var I5=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var R5=I5((exports,module)=>{const p$2=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerpolicy&&(a.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?a.credentials="include":o.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(o){if(o.ep)return;o.ep=!0;const a=n(o);fetch(o.href,a)}};p$2();function makeMap(e,t){const n=Object.create(null),r=e.split(",");for(let o=0;o<r.length;o++)n[r[o]]=!0;return t?o=>!!n[o.toLowerCase()]:o=>!!n[o]}const specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs);function includeBooleanAttr(e){return!!e||e===""}function normalizeStyle(e){if(isArray$2(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],o=isString(r)?parseStringStyle(r):normalizeStyle(r);if(o)for(const a in o)t[a]=o[a]}return t}else{if(isString(e))return e;if(isObject(e))return e}}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:(.+)/;function parseStringStyle(e){const t={};return e.split(listDelimiterRE).forEach(n=>{if(n){const r=n.split(propertyDelimiterRE);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function normalizeClass(e){let t="";if(isString(e))t=e;else if(isArray$2(e))for(let n=0;n<e.length;n++){const r=normalizeClass(e[n]);r&&(t+=r+" ")}else if(isObject(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const toDisplayString=e=>isString(e)?e:e==null?"":isArray$2(e)||isObject(e)&&(e.toString===objectToString||!isFunction(e.toString))?JSON.stringify(e,replacer,2):String(e),replacer=(e,t)=>t&&t.__v_isRef?replacer(e,t.value):isMap(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[r,o])=>(n[`${r} =>`]=o,n),{})}:isSet(t)?{[`Set(${t.size})`]:[...t.values()]}:isObject(t)&&!isArray$2(t)&&!isPlainObject$1(t)?String(t):t,EMPTY_OBJ={},EMPTY_ARR=[],NOOP=()=>{},NO$1=()=>!1,onRE=/^on[^a-z]/,isOn=e=>onRE.test(e),isModelListener=e=>e.startsWith("onUpdate:"),extend$1=Object.assign,remove=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},hasOwnProperty=Object.prototype.hasOwnProperty,hasOwn$1=(e,t)=>hasOwnProperty.call(e,t),isArray$2=Array.isArray,isMap=e=>toTypeString(e)==="[object Map]",isSet=e=>toTypeString(e)==="[object Set]",isFunction=e=>typeof e=="function",isString=e=>typeof e=="string",isSymbol=e=>typeof e=="symbol",isObject=e=>e!==null&&typeof e=="object",isPromise=e=>isObject(e)&&isFunction(e.then)&&isFunction(e.catch),objectToString=Object.prototype.toString,toTypeString=e=>objectToString.call(e),toRawType=e=>toTypeString(e).slice(8,-1),isPlainObject$1=e=>toTypeString(e)==="[object Object]",isIntegerKey=e=>isString(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cacheStringFunction=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},camelizeRE=/-(\w)/g,camelize=cacheStringFunction(e=>e.replace(camelizeRE,(t,n)=>n?n.toUpperCase():"")),hyphenateRE=/\B([A-Z])/g,hyphenate=cacheStringFunction(e=>e.replace(hyphenateRE,"-$1").toLowerCase()),capitalize=cacheStringFunction(e=>e.charAt(0).toUpperCase()+e.slice(1)),toHandlerKey=cacheStringFunction(e=>e?`on${capitalize(e)}`:""),hasChanged=(e,t)=>!Object.is(e,t),invokeArrayFns=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},def=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})},toNumber=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let _globalThis;const getGlobalThis=()=>_globalThis||(_globalThis=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});let activeEffectScope;class EffectScope{constructor(t=!1){this.active=!0,this.effects=[],this.cleanups=[],!t&&activeEffectScope&&(this.parent=activeEffectScope,this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}run(t){if(this.active){const n=activeEffectScope;try{return activeEffectScope=this,t()}finally{activeEffectScope=n}}}on(){activeEffectScope=this}off(){activeEffectScope=this.parent}stop(t){if(this.active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(this.parent&&!t){const o=this.parent.scopes.pop();o&&o!==this&&(this.parent.scopes[this.index]=o,o.index=this.index)}this.active=!1}}}function effectScope(e){return new EffectScope(e)}function recordEffectScope(e,t=activeEffectScope){t&&t.active&&t.effects.push(e)}const createDep=e=>{const t=new Set(e);return t.w=0,t.n=0,t},wasTracked=e=>(e.w&trackOpBit)>0,newTracked=e=>(e.n&trackOpBit)>0,initDepMarkers=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=trackOpBit},finalizeDepMarkers=e=>{const{deps:t}=e;if(t.length){let n=0;for(let r=0;r<t.length;r++){const o=t[r];wasTracked(o)&&!newTracked(o)?o.delete(e):t[n++]=o,o.w&=~trackOpBit,o.n&=~trackOpBit}t.length=n}},targetMap=new WeakMap;let effectTrackDepth=0,trackOpBit=1;const maxMarkerBits=30;let activeEffect;const ITERATE_KEY=Symbol(""),MAP_KEY_ITERATE_KEY=Symbol("");class ReactiveEffect{constructor(t,n=null,r){this.fn=t,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,recordEffectScope(this,r)}run(){if(!this.active)return this.fn();let t=activeEffect,n=shouldTrack;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=activeEffect,activeEffect=this,shouldTrack=!0,trackOpBit=1<<++effectTrackDepth,effectTrackDepth<=maxMarkerBits?initDepMarkers(this):cleanupEffect(this),this.fn()}finally{effectTrackDepth<=maxMarkerBits&&finalizeDepMarkers(this),trackOpBit=1<<--effectTrackDepth,activeEffect=this.parent,shouldTrack=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){activeEffect===this?this.deferStop=!0:this.active&&(cleanupEffect(this),this.onStop&&this.onStop(),this.active=!1)}}function cleanupEffect(e){const{deps:t}=e;if(t.length){for(let n=0;n<t.length;n++)t[n].delete(e);t.length=0}}let shouldTrack=!0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const e=trackStack.pop();shouldTrack=e===void 0?!0:e}function track(e,t,n){if(shouldTrack&&activeEffect){let r=targetMap.get(e);r||targetMap.set(e,r=new Map);let o=r.get(n);o||r.set(n,o=createDep()),trackEffects(o)}}function trackEffects(e,t){let n=!1;effectTrackDepth<=maxMarkerBits?newTracked(e)||(e.n|=trackOpBit,n=!wasTracked(e)):n=!e.has(activeEffect),n&&(e.add(activeEffect),activeEffect.deps.push(e))}function trigger(e,t,n,r,o,a){const s=targetMap.get(e);if(!s)return;let u=[];if(t==="clear")u=[...s.values()];else if(n==="length"&&isArray$2(e))s.forEach((l,c)=>{(c==="length"||c>=r)&&u.push(l)});else switch(n!==void 0&&u.push(s.get(n)),t){case"add":isArray$2(e)?isIntegerKey(n)&&u.push(s.get("length")):(u.push(s.get(ITERATE_KEY)),isMap(e)&&u.push(s.get(MAP_KEY_ITERATE_KEY)));break;case"delete":isArray$2(e)||(u.push(s.get(ITERATE_KEY)),isMap(e)&&u.push(s.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap(e)&&u.push(s.get(ITERATE_KEY));break}if(u.length===1)u[0]&&triggerEffects(u[0]);else{const l=[];for(const c of u)c&&l.push(...c);triggerEffects(createDep(l))}}function triggerEffects(e,t){const n=isArray$2(e)?e:[...e];for(const r of n)r.computed&&triggerEffect(r);for(const r of n)r.computed||triggerEffect(r)}function triggerEffect(e,t){(e!==activeEffect||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(isSymbol)),get=createGetter(),shallowGet=createGetter(!1,!0),readonlyGet=createGetter(!0),arrayInstrumentations=createArrayInstrumentations();function createArrayInstrumentations(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...n){const r=toRaw(this);for(let a=0,s=this.length;a<s;a++)track(r,"get",a+"");const o=r[t](...n);return o===-1||o===!1?r[t](...n.map(toRaw)):o}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...n){pauseTracking();const r=toRaw(this)[t].apply(this,n);return resetTracking(),r}}),e}function createGetter(e=!1,t=!1){return function(r,o,a){if(o==="__v_isReactive")return!e;if(o==="__v_isReadonly")return e;if(o==="__v_isShallow")return t;if(o==="__v_raw"&&a===(e?t?shallowReadonlyMap:readonlyMap:t?shallowReactiveMap:reactiveMap).get(r))return r;const s=isArray$2(r);if(!e&&s&&hasOwn$1(arrayInstrumentations,o))return Reflect.get(arrayInstrumentations,o,a);const u=Reflect.get(r,o,a);return(isSymbol(o)?builtInSymbols.has(o):isNonTrackableKeys(o))||(e||track(r,"get",o),t)?u:isRef(u)?s&&isIntegerKey(o)?u:u.value:isObject(u)?e?readonly(u):reactive(u):u}}const set=createSetter(),shallowSet=createSetter(!0);function createSetter(e=!1){return function(n,r,o,a){let s=n[r];if(isReadonly(s)&&isRef(s)&&!isRef(o))return!1;if(!e&&(!isShallow(o)&&!isReadonly(o)&&(s=toRaw(s),o=toRaw(o)),!isArray$2(n)&&isRef(s)&&!isRef(o)))return s.value=o,!0;const u=isArray$2(n)&&isIntegerKey(r)?Number(r)<n.length:hasOwn$1(n,r),l=Reflect.set(n,r,o,a);return n===toRaw(a)&&(u?hasChanged(o,s)&&trigger(n,"set",r,o):trigger(n,"add",r,o)),l}}function deleteProperty(e,t){const n=hasOwn$1(e,t);e[t];const r=Reflect.deleteProperty(e,t);return r&&n&&trigger(e,"delete",t,void 0),r}function has(e,t){const n=Reflect.has(e,t);return(!isSymbol(t)||!builtInSymbols.has(t))&&track(e,"has",t),n}function ownKeys(e){return track(e,"iterate",isArray$2(e)?"length":ITERATE_KEY),Reflect.ownKeys(e)}const mutableHandlers={get,set,deleteProperty,has,ownKeys},readonlyHandlers={get:readonlyGet,set(e,t){return!0},deleteProperty(e,t){return!0}},shallowReactiveHandlers=extend$1({},mutableHandlers,{get:shallowGet,set:shallowSet}),toShallow=e=>e,getProto$1=e=>Reflect.getPrototypeOf(e);function get$1(e,t,n=!1,r=!1){e=e.__v_raw;const o=toRaw(e),a=toRaw(t);n||(t!==a&&track(o,"get",t),track(o,"get",a));const{has:s}=getProto$1(o),u=r?toShallow:n?toReadonly:toReactive;if(s.call(o,t))return u(e.get(t));if(s.call(o,a))return u(e.get(a));e!==o&&e.get(t)}function has$1(e,t=!1){const n=this.__v_raw,r=toRaw(n),o=toRaw(e);return t||(e!==o&&track(r,"has",e),track(r,"has",o)),e===o?n.has(e):n.has(e)||n.has(o)}function size(e,t=!1){return e=e.__v_raw,!t&&track(toRaw(e),"iterate",ITERATE_KEY),Reflect.get(e,"size",e)}function add(e){e=toRaw(e);const t=toRaw(this);return getProto$1(t).has.call(t,e)||(t.add(e),trigger(t,"add",e,e)),this}function set$1(e,t){t=toRaw(t);const n=toRaw(this),{has:r,get:o}=getProto$1(n);let a=r.call(n,e);a||(e=toRaw(e),a=r.call(n,e));const s=o.call(n,e);return n.set(e,t),a?hasChanged(t,s)&&trigger(n,"set",e,t):trigger(n,"add",e,t),this}function deleteEntry(e){const t=toRaw(this),{has:n,get:r}=getProto$1(t);let o=n.call(t,e);o||(e=toRaw(e),o=n.call(t,e)),r&&r.call(t,e);const a=t.delete(e);return o&&trigger(t,"delete",e,void 0),a}function clear(){const e=toRaw(this),t=e.size!==0,n=e.clear();return t&&trigger(e,"clear",void 0,void 0),n}function createForEach(e,t){return function(r,o){const a=this,s=a.__v_raw,u=toRaw(s),l=t?toShallow:e?toReadonly:toReactive;return!e&&track(u,"iterate",ITERATE_KEY),s.forEach((c,m)=>r.call(o,l(c),l(m),a))}}function createIterableMethod(e,t,n){return function(...r){const o=this.__v_raw,a=toRaw(o),s=isMap(a),u=e==="entries"||e===Symbol.iterator&&s,l=e==="keys"&&s,c=o[e](...r),m=n?toShallow:t?toReadonly:toReactive;return!t&&track(a,"iterate",l?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:me,done:xe}=c.next();return xe?{value:me,done:xe}:{value:u?[m(me[0]),m(me[1])]:m(me),done:xe}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(e){return function(...t){return e==="delete"?!1:this}}function createInstrumentations(){const e={get(a){return get$1(this,a)},get size(){return size(this)},has:has$1,add,set:set$1,delete:deleteEntry,clear,forEach:createForEach(!1,!1)},t={get(a){return get$1(this,a,!1,!0)},get size(){return size(this)},has:has$1,add,set:set$1,delete:deleteEntry,clear,forEach:createForEach(!1,!0)},n={get(a){return get$1(this,a,!0)},get size(){return size(this,!0)},has(a){return has$1.call(this,a,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!1)},r={get(a){return get$1(this,a,!0,!0)},get size(){return size(this,!0)},has(a){return has$1.call(this,a,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(a=>{e[a]=createIterableMethod(a,!1,!1),n[a]=createIterableMethod(a,!0,!1),t[a]=createIterableMethod(a,!1,!0),r[a]=createIterableMethod(a,!0,!0)}),[e,n,t,r]}const[mutableInstrumentations,readonlyInstrumentations,shallowInstrumentations,shallowReadonlyInstrumentations]=createInstrumentations();function createInstrumentationGetter(e,t){const n=t?e?shallowReadonlyInstrumentations:shallowInstrumentations:e?readonlyInstrumentations:mutableInstrumentations;return(r,o,a)=>o==="__v_isReactive"?!e:o==="__v_isReadonly"?e:o==="__v_raw"?r:Reflect.get(hasOwn$1(n,o)&&o in r?n:r,o,a)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(e){return e.__v_skip||!Object.isExtensible(e)?0:targetTypeMap(toRawType(e))}function reactive(e){return isReadonly(e)?e:createReactiveObject(e,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(e){return createReactiveObject(e,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly(e){return createReactiveObject(e,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function createReactiveObject(e,t,n,r,o){if(!isObject(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const a=o.get(e);if(a)return a;const s=getTargetType(e);if(s===0)return e;const u=new Proxy(e,s===2?r:n);return o.set(e,u),u}function isReactive(e){return isReadonly(e)?isReactive(e.__v_raw):!!(e&&e.__v_isReactive)}function isReadonly(e){return!!(e&&e.__v_isReadonly)}function isShallow(e){return!!(e&&e.__v_isShallow)}function isProxy(e){return isReactive(e)||isReadonly(e)}function toRaw(e){const t=e&&e.__v_raw;return t?toRaw(t):e}function markRaw(e){return def(e,"__v_skip",!0),e}const toReactive=e=>isObject(e)?reactive(e):e,toReadonly=e=>isObject(e)?readonly(e):e;function trackRefValue(e){shouldTrack&&activeEffect&&(e=toRaw(e),trackEffects(e.dep||(e.dep=createDep())))}function triggerRefValue(e,t){e=toRaw(e),e.dep&&triggerEffects(e.dep)}function isRef(e){return!!(e&&e.__v_isRef===!0)}function ref(e){return createRef(e,!1)}function shallowRef(e){return createRef(e,!0)}function createRef(e,t){return isRef(e)?e:new RefImpl(e,t)}class RefImpl{constructor(t,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?t:toRaw(t),this._value=n?t:toReactive(t)}get value(){return trackRefValue(this),this._value}set value(t){const n=this.__v_isShallow||isShallow(t)||isReadonly(t);t=n?t:toRaw(t),hasChanged(t,this._rawValue)&&(this._rawValue=t,this._value=n?t:toReactive(t),triggerRefValue(this))}}function unref(e){return isRef(e)?e.value:e}const shallowUnwrapHandlers={get:(e,t,n)=>unref(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const o=e[t];return isRef(o)&&!isRef(n)?(o.value=n,!0):Reflect.set(e,t,n,r)}};function proxyRefs(e){return isReactive(e)?e:new Proxy(e,shallowUnwrapHandlers)}function toRefs(e){const t=isArray$2(e)?new Array(e.length):{};for(const n in e)t[n]=toRef(e,n);return t}class ObjectRefImpl{constructor(t,n,r){this._object=t,this._key=n,this._defaultValue=r,this.__v_isRef=!0}get value(){const t=this._object[this._key];return t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}}function toRef(e,t,n){const r=e[t];return isRef(r)?r:new ObjectRefImpl(e,t,n)}var _a$2;class ComputedRefImpl{constructor(t,n,r,o){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this[_a$2]=!1,this._dirty=!0,this.effect=new ReactiveEffect(t,()=>{this._dirty||(this._dirty=!0,triggerRefValue(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!o,this.__v_isReadonly=r}get value(){const t=toRaw(this);return trackRefValue(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}_a$2="__v_isReadonly";function computed$1(e,t,n=!1){let r,o;const a=isFunction(e);return a?(r=e,o=NOOP):(r=e.get,o=e.set),new ComputedRefImpl(r,o,a||!o,n)}function callWithErrorHandling(e,t,n,r){let o;try{o=r?e(...r):e()}catch(a){handleError(a,t,n)}return o}function callWithAsyncErrorHandling(e,t,n,r){if(isFunction(e)){const a=callWithErrorHandling(e,t,n,r);return a&&isPromise(a)&&a.catch(s=>{handleError(s,t,n)}),a}const o=[];for(let a=0;a<e.length;a++)o.push(callWithAsyncErrorHandling(e[a],t,n,r));return o}function handleError(e,t,n,r=!0){const o=t?t.vnode:null;if(t){let a=t.parent;const s=t.proxy,u=n;for(;a;){const c=a.ec;if(c){for(let m=0;m<c.length;m++)if(c[m](e,s,u)===!1)return}a=a.parent}const l=t.appContext.config.errorHandler;if(l){callWithErrorHandling(l,null,10,[e,s,u]);return}}logError(e,n,o,r)}function logError(e,t,n,r=!0){console.error(e)}let isFlushing=!1,isFlushPending=!1;const queue=[];let flushIndex=0;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null;function nextTick(e){const t=currentFlushPromise||resolvedPromise;return e?t.then(this?e.bind(this):e):t}function findInsertionIndex(e){let t=flushIndex+1,n=queue.length;for(;t<n;){const r=t+n>>>1;getId(queue[r])<e?t=r+1:n=r}return t}function queueJob(e){(!queue.length||!queue.includes(e,isFlushing&&e.allowRecurse?flushIndex+1:flushIndex))&&(e.id==null?queue.push(e):queue.splice(findInsertionIndex(e.id),0,e),queueFlush())}function queueFlush(){!isFlushing&&!isFlushPending&&(isFlushPending=!0,currentFlushPromise=resolvedPromise.then(flushJobs))}function invalidateJob(e){const t=queue.indexOf(e);t>flushIndex&&queue.splice(t,1)}function queuePostFlushCb(e){isArray$2(e)?pendingPostFlushCbs.push(...e):(!activePostFlushCbs||!activePostFlushCbs.includes(e,e.allowRecurse?postFlushIndex+1:postFlushIndex))&&pendingPostFlushCbs.push(e),queueFlush()}function flushPreFlushCbs(e,t=isFlushing?flushIndex+1:0){for(;t<queue.length;t++){const n=queue[t];n&&n.pre&&(queue.splice(t,1),t--,n())}}function flushPostFlushCbs(e){if(pendingPostFlushCbs.length){const t=[...new Set(pendingPostFlushCbs)];if(pendingPostFlushCbs.length=0,activePostFlushCbs){activePostFlushCbs.push(...t);return}for(activePostFlushCbs=t,activePostFlushCbs.sort((n,r)=>getId(n)-getId(r)),postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++)activePostFlushCbs[postFlushIndex]();activePostFlushCbs=null,postFlushIndex=0}}const getId=e=>e.id==null?1/0:e.id,comparator=(e,t)=>{const n=getId(e)-getId(t);if(n===0){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return n};function flushJobs(e){isFlushPending=!1,isFlushing=!0,queue.sort(comparator);const t=NOOP;try{for(flushIndex=0;flushIndex<queue.length;flushIndex++){const n=queue[flushIndex];n&&n.active!==!1&&callWithErrorHandling(n,null,14)}}finally{flushIndex=0,queue.length=0,flushPostFlushCbs(),isFlushing=!1,currentFlushPromise=null,(queue.length||pendingPostFlushCbs.length)&&flushJobs()}}function emit$1(e,t,...n){if(e.isUnmounted)return;const r=e.vnode.props||EMPTY_OBJ;let o=n;const a=t.startsWith("update:"),s=a&&t.slice(7);if(s&&s in r){const m=`${s==="modelValue"?"model":s}Modifiers`,{number:me,trim:xe}=r[m]||EMPTY_OBJ;xe&&(o=n.map(Ne=>Ne.trim())),me&&(o=n.map(toNumber))}let u,l=r[u=toHandlerKey(t)]||r[u=toHandlerKey(camelize(t))];!l&&a&&(l=r[u=toHandlerKey(hyphenate(t))]),l&&callWithAsyncErrorHandling(l,e,6,o);const c=r[u+"Once"];if(c){if(!e.emitted)e.emitted={};else if(e.emitted[u])return;e.emitted[u]=!0,callWithAsyncErrorHandling(c,e,6,o)}}function normalizeEmitsOptions(e,t,n=!1){const r=t.emitsCache,o=r.get(e);if(o!==void 0)return o;const a=e.emits;let s={},u=!1;if(!isFunction(e)){const l=c=>{const m=normalizeEmitsOptions(c,t,!0);m&&(u=!0,extend$1(s,m))};!n&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!a&&!u?(isObject(e)&&r.set(e,null),null):(isArray$2(a)?a.forEach(l=>s[l]=null):extend$1(s,a),isObject(e)&&r.set(e,s),s)}function isEmitListener(e,t){return!e||!isOn(t)?!1:(t=t.slice(2).replace(/Once$/,""),hasOwn$1(e,t[0].toLowerCase()+t.slice(1))||hasOwn$1(e,hyphenate(t))||hasOwn$1(e,t))}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance(e){const t=currentRenderingInstance;return currentRenderingInstance=e,currentScopeId=e&&e.type.__scopeId||null,t}function pushScopeId(e){currentScopeId=e}function popScopeId(){currentScopeId=null}function withCtx(e,t=currentRenderingInstance,n){if(!t||e._n)return e;const r=(...o)=>{r._d&&setBlockTracking(-1);const a=setCurrentRenderingInstance(t),s=e(...o);return setCurrentRenderingInstance(a),r._d&&setBlockTracking(1),s};return r._n=!0,r._c=!0,r._d=!0,r}function markAttrsAccessed(){}function renderComponentRoot(e){const{type:t,vnode:n,proxy:r,withProxy:o,props:a,propsOptions:[s],slots:u,attrs:l,emit:c,render:m,renderCache:me,data:xe,setupState:Ne,ctx:He,inheritAttrs:Ye}=e;let Je,vn;const La=setCurrentRenderingInstance(e);try{if(n.shapeFlag&4){const Zr=o||r;Je=normalizeVNode(m.call(Zr,Zr,me,a,Ne,xe,He)),vn=l}else{const Zr=t;Je=normalizeVNode(Zr.length>1?Zr(a,{attrs:l,slots:u,emit:c}):Zr(a,null)),vn=t.props?l:getFunctionalFallthrough(l)}}catch(Zr){blockStack.length=0,handleError(Zr,e,1),Je=createVNode(Comment)}let sr=Je;if(vn&&Ye!==!1){const Zr=Object.keys(vn),{shapeFlag:zs}=sr;Zr.length&&zs&7&&(s&&Zr.some(isModelListener)&&(vn=filterModelListeners(vn,s)),sr=cloneVNode(sr,vn))}return n.dirs&&(sr=cloneVNode(sr),sr.dirs=sr.dirs?sr.dirs.concat(n.dirs):n.dirs),n.transition&&(sr.transition=n.transition),Je=sr,setCurrentRenderingInstance(La),Je}const getFunctionalFallthrough=e=>{let t;for(const n in e)(n==="class"||n==="style"||isOn(n))&&((t||(t={}))[n]=e[n]);return t},filterModelListeners=(e,t)=>{const n={};for(const r in e)(!isModelListener(r)||!(r.slice(9)in t))&&(n[r]=e[r]);return n};function shouldUpdateComponent(e,t,n){const{props:r,children:o,component:a}=e,{props:s,children:u,patchFlag:l}=t,c=a.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?hasPropsChanged(r,s,c):!!s;if(l&8){const m=t.dynamicProps;for(let me=0;me<m.length;me++){const xe=m[me];if(s[xe]!==r[xe]&&!isEmitListener(c,xe))return!0}}}else return(o||u)&&(!u||!u.$stable)?!0:r===s?!1:r?s?hasPropsChanged(r,s,c):!0:!!s;return!1}function hasPropsChanged(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let o=0;o<r.length;o++){const a=r[o];if(t[a]!==e[a]&&!isEmitListener(n,a))return!0}return!1}function updateHOCHostEl({vnode:e,parent:t},n){for(;t&&t.subTree===e;)(e=t.vnode).el=n,t=t.parent}const isSuspense=e=>e.__isSuspense;function queueEffectWithSuspense(e,t){t&&t.pendingBranch?isArray$2(e)?t.effects.push(...e):t.effects.push(e):queuePostFlushCb(e)}function provide(e,t){if(currentInstance){let n=currentInstance.provides;const r=currentInstance.parent&&currentInstance.parent.provides;r===n&&(n=currentInstance.provides=Object.create(r)),n[e]=t}}function inject(e,t,n=!1){const r=currentInstance||currentRenderingInstance;if(r){const o=r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides;if(o&&e in o)return o[e];if(arguments.length>1)return n&&isFunction(t)?t.call(r.proxy):t}}const INITIAL_WATCHER_VALUE={};function watch(e,t,n){return doWatch(e,t,n)}function doWatch(e,t,{immediate:n,deep:r,flush:o,onTrack:a,onTrigger:s}=EMPTY_OBJ){const u=currentInstance;let l,c=!1,m=!1;if(isRef(e)?(l=()=>e.value,c=isShallow(e)):isReactive(e)?(l=()=>e,r=!0):isArray$2(e)?(m=!0,c=e.some(vn=>isReactive(vn)||isShallow(vn)),l=()=>e.map(vn=>{if(isRef(vn))return vn.value;if(isReactive(vn))return traverse(vn);if(isFunction(vn))return callWithErrorHandling(vn,u,2)})):isFunction(e)?t?l=()=>callWithErrorHandling(e,u,2):l=()=>{if(!(u&&u.isUnmounted))return me&&me(),callWithAsyncErrorHandling(e,u,3,[xe])}:l=NOOP,t&&r){const vn=l;l=()=>traverse(vn())}let me,xe=vn=>{me=Je.onStop=()=>{callWithErrorHandling(vn,u,4)}};if(isInSSRComponentSetup)return xe=NOOP,t?n&&callWithAsyncErrorHandling(t,u,3,[l(),m?[]:void 0,xe]):l(),NOOP;let Ne=m?[]:INITIAL_WATCHER_VALUE;const He=()=>{if(!!Je.active)if(t){const vn=Je.run();(r||c||(m?vn.some((La,sr)=>hasChanged(La,Ne[sr])):hasChanged(vn,Ne)))&&(me&&me(),callWithAsyncErrorHandling(t,u,3,[vn,Ne===INITIAL_WATCHER_VALUE?void 0:Ne,xe]),Ne=vn)}else Je.run()};He.allowRecurse=!!t;let Ye;o==="sync"?Ye=He:o==="post"?Ye=()=>queuePostRenderEffect(He,u&&u.suspense):(He.pre=!0,u&&(He.id=u.uid),Ye=()=>queueJob(He));const Je=new ReactiveEffect(l,Ye);return t?n?He():Ne=Je.run():o==="post"?queuePostRenderEffect(Je.run.bind(Je),u&&u.suspense):Je.run(),()=>{Je.stop(),u&&u.scope&&remove(u.scope.effects,Je)}}function instanceWatch(e,t,n){const r=this.proxy,o=isString(e)?e.includes(".")?createPathGetter(r,e):()=>r[e]:e.bind(r,r);let a;isFunction(t)?a=t:(a=t.handler,n=t);const s=currentInstance;setCurrentInstance(this);const u=doWatch(o,a.bind(r),n);return s?setCurrentInstance(s):unsetCurrentInstance(),u}function createPathGetter(e,t){const n=t.split(".");return()=>{let r=e;for(let o=0;o<n.length&&r;o++)r=r[n[o]];return r}}function traverse(e,t){if(!isObject(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),isRef(e))traverse(e.value,t);else if(isArray$2(e))for(let n=0;n<e.length;n++)traverse(e[n],t);else if(isSet(e)||isMap(e))e.forEach(n=>{traverse(n,t)});else if(isPlainObject$1(e))for(const n in e)traverse(e[n],t);return e}function defineComponent(e){return isFunction(e)?{setup:e,name:e.name}:e}const isAsyncWrapper=e=>!!e.type.__asyncLoader,isKeepAlive=e=>e.type.__isKeepAlive;function onActivated(e,t){registerKeepAliveHook(e,"a",t)}function onDeactivated(e,t){registerKeepAliveHook(e,"da",t)}function registerKeepAliveHook(e,t,n=currentInstance){const r=e.__wdc||(e.__wdc=()=>{let o=n;for(;o;){if(o.isDeactivated)return;o=o.parent}return e()});if(injectHook(t,r,n),n){let o=n.parent;for(;o&&o.parent;)isKeepAlive(o.parent.vnode)&&injectToKeepAliveRoot(r,t,n,o),o=o.parent}}function injectToKeepAliveRoot(e,t,n,r){const o=injectHook(t,e,r,!0);onUnmounted(()=>{remove(r[t],o)},n)}function injectHook(e,t,n=currentInstance,r=!1){if(n){const o=n[e]||(n[e]=[]),a=t.__weh||(t.__weh=(...s)=>{if(n.isUnmounted)return;pauseTracking(),setCurrentInstance(n);const u=callWithAsyncErrorHandling(t,n,e,s);return unsetCurrentInstance(),resetTracking(),u});return r?o.unshift(a):o.push(a),a}}const createHook=e=>(t,n=currentInstance)=>(!isInSSRComponentSetup||e==="sp")&&injectHook(e,(...r)=>t(...r),n),onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(e,t=currentInstance){injectHook("ec",e,t)}function withDirectives(e,t){const n=currentRenderingInstance;if(n===null)return e;const r=getExposeProxy(n)||n.proxy,o=e.dirs||(e.dirs=[]);for(let a=0;a<t.length;a++){let[s,u,l,c=EMPTY_OBJ]=t[a];isFunction(s)&&(s={mounted:s,updated:s}),s.deep&&traverse(u),o.push({dir:s,instance:r,value:u,oldValue:void 0,arg:l,modifiers:c})}return e}function invokeDirectiveHook(e,t,n,r){const o=e.dirs,a=t&&t.dirs;for(let s=0;s<o.length;s++){const u=o[s];a&&(u.oldValue=a[s].value);let l=u.dir[r];l&&(pauseTracking(),callWithAsyncErrorHandling(l,n,8,[e.el,u,e,t]),resetTracking())}}const COMPONENTS="components";function resolveComponent(e,t){return resolveAsset(COMPONENTS,e,!0,t)||e}const NULL_DYNAMIC_COMPONENT=Symbol();function resolveDynamicComponent(e){return isString(e)?resolveAsset(COMPONENTS,e,!1)||e:e||NULL_DYNAMIC_COMPONENT}function resolveAsset(e,t,n=!0,r=!1){const o=currentRenderingInstance||currentInstance;if(o){const a=o.type;if(e===COMPONENTS){const u=getComponentName(a,!1);if(u&&(u===t||u===camelize(t)||u===capitalize(camelize(t))))return a}const s=resolve(o[e]||a[e],t)||resolve(o.appContext[e],t);return!s&&r?a:s}}function resolve(e,t){return e&&(e[t]||e[camelize(t)]||e[capitalize(camelize(t))])}function renderList(e,t,n,r){let o;const a=n&&n[r];if(isArray$2(e)||isString(e)){o=new Array(e.length);for(let s=0,u=e.length;s<u;s++)o[s]=t(e[s],s,void 0,a&&a[s])}else if(typeof e=="number"){o=new Array(e);for(let s=0;s<e;s++)o[s]=t(s+1,s,void 0,a&&a[s])}else if(isObject(e))if(e[Symbol.iterator])o=Array.from(e,(s,u)=>t(s,u,void 0,a&&a[u]));else{const s=Object.keys(e);o=new Array(s.length);for(let u=0,l=s.length;u<l;u++){const c=s[u];o[u]=t(e[c],c,u,a&&a[u])}}else o=[];return n&&(n[r]=o),o}function renderSlot(e,t,n={},r,o){if(currentRenderingInstance.isCE||currentRenderingInstance.parent&&isAsyncWrapper(currentRenderingInstance.parent)&&currentRenderingInstance.parent.isCE)return createVNode("slot",t==="default"?null:{name:t},r&&r());let a=e[t];a&&a._c&&(a._d=!1),openBlock();const s=a&&ensureValidVNode(a(n)),u=createBlock(Fragment$1,{key:n.key||s&&s.key||`_${t}`},s||(r?r():[]),s&&e._===1?64:-2);return!o&&u.scopeId&&(u.slotScopeIds=[u.scopeId+"-s"]),a&&a._c&&(a._d=!0),u}function ensureValidVNode(e){return e.some(t=>isVNode(t)?!(t.type===Comment||t.type===Fragment$1&&!ensureValidVNode(t.children)):!0)?e:null}const getPublicInstance=e=>e?isStatefulComponent(e)?getExposeProxy(e)||e.proxy:getPublicInstance(e.parent):null,publicPropertiesMap=extend$1(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>getPublicInstance(e.parent),$root:e=>getPublicInstance(e.root),$emit:e=>e.emit,$options:e=>resolveMergedOptions(e),$forceUpdate:e=>e.f||(e.f=()=>queueJob(e.update)),$nextTick:e=>e.n||(e.n=nextTick.bind(e.proxy)),$watch:e=>instanceWatch.bind(e)}),PublicInstanceProxyHandlers={get({_:e},t){const{ctx:n,setupState:r,data:o,props:a,accessCache:s,type:u,appContext:l}=e;let c;if(t[0]!=="$"){const Ne=s[t];if(Ne!==void 0)switch(Ne){case 1:return r[t];case 2:return o[t];case 4:return n[t];case 3:return a[t]}else{if(r!==EMPTY_OBJ&&hasOwn$1(r,t))return s[t]=1,r[t];if(o!==EMPTY_OBJ&&hasOwn$1(o,t))return s[t]=2,o[t];if((c=e.propsOptions[0])&&hasOwn$1(c,t))return s[t]=3,a[t];if(n!==EMPTY_OBJ&&hasOwn$1(n,t))return s[t]=4,n[t];shouldCacheAccess&&(s[t]=0)}}const m=publicPropertiesMap[t];let me,xe;if(m)return t==="$attrs"&&track(e,"get",t),m(e);if((me=u.__cssModules)&&(me=me[t]))return me;if(n!==EMPTY_OBJ&&hasOwn$1(n,t))return s[t]=4,n[t];if(xe=l.config.globalProperties,hasOwn$1(xe,t))return xe[t]},set({_:e},t,n){const{data:r,setupState:o,ctx:a}=e;return o!==EMPTY_OBJ&&hasOwn$1(o,t)?(o[t]=n,!0):r!==EMPTY_OBJ&&hasOwn$1(r,t)?(r[t]=n,!0):hasOwn$1(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(a[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:o,propsOptions:a}},s){let u;return!!n[s]||e!==EMPTY_OBJ&&hasOwn$1(e,s)||t!==EMPTY_OBJ&&hasOwn$1(t,s)||(u=a[0])&&hasOwn$1(u,s)||hasOwn$1(r,s)||hasOwn$1(publicPropertiesMap,s)||hasOwn$1(o.config.globalProperties,s)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:hasOwn$1(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};let shouldCacheAccess=!0;function applyOptions(e){const t=resolveMergedOptions(e),n=e.proxy,r=e.ctx;shouldCacheAccess=!1,t.beforeCreate&&callHook(t.beforeCreate,e,"bc");const{data:o,computed:a,methods:s,watch:u,provide:l,inject:c,created:m,beforeMount:me,mounted:xe,beforeUpdate:Ne,updated:He,activated:Ye,deactivated:Je,beforeDestroy:vn,beforeUnmount:La,destroyed:sr,unmounted:Zr,render:zs,renderTracked:za,renderTriggered:Hs,errorCaptured:lc,serverPrefetch:Ty,expose:_y,inheritAttrs:xy,components:Bb,directives:Dy,filters:Bg}=t;if(c&&resolveInjections(c,r,null,e.appContext.config.unwrapInjectedRef),s)for(const Ay in s){const $b=s[Ay];isFunction($b)&&(r[Ay]=$b.bind(n))}if(o){const Ay=o.call(n,n);isObject(Ay)&&(e.data=reactive(Ay))}if(shouldCacheAccess=!0,a)for(const Ay in a){const $b=a[Ay],e0=isFunction($b)?$b.bind(n,n):isFunction($b.get)?$b.get.bind(n,n):NOOP,Hb=!isFunction($b)&&isFunction($b.set)?$b.set.bind(n):NOOP,Yb=computed({get:e0,set:Hb});Object.defineProperty(r,Ay,{enumerable:!0,configurable:!0,get:()=>Yb.value,set:Jb=>Yb.value=Jb})}if(u)for(const Ay in u)createWatcher(u[Ay],r,n,Ay);if(l){const Ay=isFunction(l)?l.call(n):l;Reflect.ownKeys(Ay).forEach($b=>{provide($b,Ay[$b])})}m&&callHook(m,e,"c");function wy(Ay,$b){isArray$2($b)?$b.forEach(e0=>Ay(e0.bind(n))):$b&&Ay($b.bind(n))}if(wy(onBeforeMount,me),wy(onMounted,xe),wy(onBeforeUpdate,Ne),wy(onUpdated,He),wy(onActivated,Ye),wy(onDeactivated,Je),wy(onErrorCaptured,lc),wy(onRenderTracked,za),wy(onRenderTriggered,Hs),wy(onBeforeUnmount,La),wy(onUnmounted,Zr),wy(onServerPrefetch,Ty),isArray$2(_y))if(_y.length){const Ay=e.exposed||(e.exposed={});_y.forEach($b=>{Object.defineProperty(Ay,$b,{get:()=>n[$b],set:e0=>n[$b]=e0})})}else e.exposed||(e.exposed={});zs&&e.render===NOOP&&(e.render=zs),xy!=null&&(e.inheritAttrs=xy),Bb&&(e.components=Bb),Dy&&(e.directives=Dy)}function resolveInjections(e,t,n=NOOP,r=!1){isArray$2(e)&&(e=normalizeInject(e));for(const o in e){const a=e[o];let s;isObject(a)?"default"in a?s=inject(a.from||o,a.default,!0):s=inject(a.from||o):s=inject(a),isRef(s)&&r?Object.defineProperty(t,o,{enumerable:!0,configurable:!0,get:()=>s.value,set:u=>s.value=u}):t[o]=s}}function callHook(e,t,n){callWithAsyncErrorHandling(isArray$2(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,n)}function createWatcher(e,t,n,r){const o=r.includes(".")?createPathGetter(n,r):()=>n[r];if(isString(e)){const a=t[e];isFunction(a)&&watch(o,a)}else if(isFunction(e))watch(o,e.bind(n));else if(isObject(e))if(isArray$2(e))e.forEach(a=>createWatcher(a,t,n,r));else{const a=isFunction(e.handler)?e.handler.bind(n):t[e.handler];isFunction(a)&&watch(o,a,e)}}function resolveMergedOptions(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:o,optionsCache:a,config:{optionMergeStrategies:s}}=e.appContext,u=a.get(t);let l;return u?l=u:!o.length&&!n&&!r?l=t:(l={},o.length&&o.forEach(c=>mergeOptions$1(l,c,s,!0)),mergeOptions$1(l,t,s)),isObject(t)&&a.set(t,l),l}function mergeOptions$1(e,t,n,r=!1){const{mixins:o,extends:a}=t;a&&mergeOptions$1(e,a,n,!0),o&&o.forEach(s=>mergeOptions$1(e,s,n,!0));for(const s in t)if(!(r&&s==="expose")){const u=internalOptionMergeStrats[s]||n&&n[s];e[s]=u?u(e[s],t[s]):t[s]}return e}const internalOptionMergeStrats={data:mergeDataFn,props:mergeObjectOptions,emits:mergeObjectOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(e,t){return t?e?function(){return extend$1(isFunction(e)?e.call(this,this):e,isFunction(t)?t.call(this,this):t)}:t:e}function mergeInject(e,t){return mergeObjectOptions(normalizeInject(e),normalizeInject(t))}function normalizeInject(e){if(isArray$2(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function mergeAsArray(e,t){return e?[...new Set([].concat(e,t))]:t}function mergeObjectOptions(e,t){return e?extend$1(extend$1(Object.create(null),e),t):t}function mergeWatchOptions(e,t){if(!e)return t;if(!t)return e;const n=extend$1(Object.create(null),e);for(const r in t)n[r]=mergeAsArray(e[r],t[r]);return n}function initProps(e,t,n,r=!1){const o={},a={};def(a,InternalObjectKey,1),e.propsDefaults=Object.create(null),setFullProps(e,t,o,a);for(const s in e.propsOptions[0])s in o||(o[s]=void 0);n?e.props=r?o:shallowReactive(o):e.type.props?e.props=o:e.props=a,e.attrs=a}function updateProps(e,t,n,r){const{props:o,attrs:a,vnode:{patchFlag:s}}=e,u=toRaw(o),[l]=e.propsOptions;let c=!1;if((r||s>0)&&!(s&16)){if(s&8){const m=e.vnode.dynamicProps;for(let me=0;me<m.length;me++){let xe=m[me];if(isEmitListener(e.emitsOptions,xe))continue;const Ne=t[xe];if(l)if(hasOwn$1(a,xe))Ne!==a[xe]&&(a[xe]=Ne,c=!0);else{const He=camelize(xe);o[He]=resolvePropValue(l,u,He,Ne,e,!1)}else Ne!==a[xe]&&(a[xe]=Ne,c=!0)}}}else{setFullProps(e,t,o,a)&&(c=!0);let m;for(const me in u)(!t||!hasOwn$1(t,me)&&((m=hyphenate(me))===me||!hasOwn$1(t,m)))&&(l?n&&(n[me]!==void 0||n[m]!==void 0)&&(o[me]=resolvePropValue(l,u,me,void 0,e,!0)):delete o[me]);if(a!==u)for(const me in a)(!t||!hasOwn$1(t,me)&&!0)&&(delete a[me],c=!0)}c&&trigger(e,"set","$attrs")}function setFullProps(e,t,n,r){const[o,a]=e.propsOptions;let s=!1,u;if(t)for(let l in t){if(isReservedProp(l))continue;const c=t[l];let m;o&&hasOwn$1(o,m=camelize(l))?!a||!a.includes(m)?n[m]=c:(u||(u={}))[m]=c:isEmitListener(e.emitsOptions,l)||(!(l in r)||c!==r[l])&&(r[l]=c,s=!0)}if(a){const l=toRaw(n),c=u||EMPTY_OBJ;for(let m=0;m<a.length;m++){const me=a[m];n[me]=resolvePropValue(o,l,me,c[me],e,!hasOwn$1(c,me))}}return s}function resolvePropValue(e,t,n,r,o,a){const s=e[n];if(s!=null){const u=hasOwn$1(s,"default");if(u&&r===void 0){const l=s.default;if(s.type!==Function&&isFunction(l)){const{propsDefaults:c}=o;n in c?r=c[n]:(setCurrentInstance(o),r=c[n]=l.call(null,t),unsetCurrentInstance())}else r=l}s[0]&&(a&&!u?r=!1:s[1]&&(r===""||r===hyphenate(n))&&(r=!0))}return r}function normalizePropsOptions(e,t,n=!1){const r=t.propsCache,o=r.get(e);if(o)return o;const a=e.props,s={},u=[];let l=!1;if(!isFunction(e)){const m=me=>{l=!0;const[xe,Ne]=normalizePropsOptions(me,t,!0);extend$1(s,xe),Ne&&u.push(...Ne)};!n&&t.mixins.length&&t.mixins.forEach(m),e.extends&&m(e.extends),e.mixins&&e.mixins.forEach(m)}if(!a&&!l)return isObject(e)&&r.set(e,EMPTY_ARR),EMPTY_ARR;if(isArray$2(a))for(let m=0;m<a.length;m++){const me=camelize(a[m]);validatePropName(me)&&(s[me]=EMPTY_OBJ)}else if(a)for(const m in a){const me=camelize(m);if(validatePropName(me)){const xe=a[m],Ne=s[me]=isArray$2(xe)||isFunction(xe)?{type:xe}:xe;if(Ne){const He=getTypeIndex(Boolean,Ne.type),Ye=getTypeIndex(String,Ne.type);Ne[0]=He>-1,Ne[1]=Ye<0||He<Ye,(He>-1||hasOwn$1(Ne,"default"))&&u.push(me)}}}const c=[s,u];return isObject(e)&&r.set(e,c),c}function validatePropName(e){return e[0]!=="$"}function getType(e){const t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:e===null?"null":""}function isSameType(e,t){return getType(e)===getType(t)}function getTypeIndex(e,t){return isArray$2(t)?t.findIndex(n=>isSameType(n,e)):isFunction(t)&&isSameType(t,e)?0:-1}const isInternalKey=e=>e[0]==="_"||e==="$stable",normalizeSlotValue=e=>isArray$2(e)?e.map(normalizeVNode):[normalizeVNode(e)],normalizeSlot$1=(e,t,n)=>{if(t._n)return t;const r=withCtx((...o)=>normalizeSlotValue(t(...o)),n);return r._c=!1,r},normalizeObjectSlots=(e,t,n)=>{const r=e._ctx;for(const o in e){if(isInternalKey(o))continue;const a=e[o];if(isFunction(a))t[o]=normalizeSlot$1(o,a,r);else if(a!=null){const s=normalizeSlotValue(a);t[o]=()=>s}}},normalizeVNodeSlots=(e,t)=>{const n=normalizeSlotValue(t);e.slots.default=()=>n},initSlots=(e,t)=>{if(e.vnode.shapeFlag&32){const n=t._;n?(e.slots=toRaw(t),def(t,"_",n)):normalizeObjectSlots(t,e.slots={})}else e.slots={},t&&normalizeVNodeSlots(e,t);def(e.slots,InternalObjectKey,1)},updateSlots=(e,t,n)=>{const{vnode:r,slots:o}=e;let a=!0,s=EMPTY_OBJ;if(r.shapeFlag&32){const u=t._;u?n&&u===1?a=!1:(extend$1(o,t),!n&&u===1&&delete o._):(a=!t.$stable,normalizeObjectSlots(t,o)),s=t}else t&&(normalizeVNodeSlots(e,t),s={default:1});if(a)for(const u in o)!isInternalKey(u)&&!(u in s)&&delete o[u]};function createAppContext(){return{app:null,config:{isNativeTag:NO$1,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid=0;function createAppAPI(e,t){return function(r,o=null){isFunction(r)||(r=Object.assign({},r)),o!=null&&!isObject(o)&&(o=null);const a=createAppContext(),s=new Set;let u=!1;const l=a.app={_uid:uid++,_component:r,_props:o,_container:null,_context:a,_instance:null,version,get config(){return a.config},set config(c){},use(c,...m){return s.has(c)||(c&&isFunction(c.install)?(s.add(c),c.install(l,...m)):isFunction(c)&&(s.add(c),c(l,...m))),l},mixin(c){return a.mixins.includes(c)||a.mixins.push(c),l},component(c,m){return m?(a.components[c]=m,l):a.components[c]},directive(c,m){return m?(a.directives[c]=m,l):a.directives[c]},mount(c,m,me){if(!u){const xe=createVNode(r,o);return xe.appContext=a,m&&t?t(xe,c):e(xe,c,me),u=!0,l._container=c,c.__vue_app__=l,getExposeProxy(xe.component)||xe.component.proxy}},unmount(){u&&(e(null,l._container),delete l._container.__vue_app__)},provide(c,m){return a.provides[c]=m,l}};return l}}function setRef(e,t,n,r,o=!1){if(isArray$2(e)){e.forEach((xe,Ne)=>setRef(xe,t&&(isArray$2(t)?t[Ne]:t),n,r,o));return}if(isAsyncWrapper(r)&&!o)return;const a=r.shapeFlag&4?getExposeProxy(r.component)||r.component.proxy:r.el,s=o?null:a,{i:u,r:l}=e,c=t&&t.r,m=u.refs===EMPTY_OBJ?u.refs={}:u.refs,me=u.setupState;if(c!=null&&c!==l&&(isString(c)?(m[c]=null,hasOwn$1(me,c)&&(me[c]=null)):isRef(c)&&(c.value=null)),isFunction(l))callWithErrorHandling(l,u,12,[s,m]);else{const xe=isString(l),Ne=isRef(l);if(xe||Ne){const He=()=>{if(e.f){const Ye=xe?m[l]:l.value;o?isArray$2(Ye)&&remove(Ye,a):isArray$2(Ye)?Ye.includes(a)||Ye.push(a):xe?(m[l]=[a],hasOwn$1(me,l)&&(me[l]=m[l])):(l.value=[a],e.k&&(m[e.k]=l.value))}else xe?(m[l]=s,hasOwn$1(me,l)&&(me[l]=s)):Ne&&(l.value=s,e.k&&(m[e.k]=s))};s?(He.id=-1,queuePostRenderEffect(He,n)):He()}}}const queuePostRenderEffect=queueEffectWithSuspense;function createRenderer(e){return baseCreateRenderer(e)}function baseCreateRenderer(e,t){const n=getGlobalThis();n.__VUE__=!0;const{insert:r,remove:o,patchProp:a,createElement:s,createText:u,createComment:l,setText:c,setElementText:m,parentNode:me,nextSibling:xe,setScopeId:Ne=NOOP,insertStaticContent:He}=e,Ye=(k_,Vb,Qb,zb=null,t2=null,Zb=null,h2=!1,g2=null,Wb=!!Vb.dynamicChildren)=>{if(k_===Vb)return;k_&&!isSameVNodeType(k_,Vb)&&(zb=s2(k_),Jb(k_,t2,Zb,!0),k_=null),Vb.patchFlag===-2&&(Wb=!1,Vb.dynamicChildren=null);const{type:f2,ref:O2,shapeFlag:C2}=Vb;switch(f2){case Text:Je(k_,Vb,Qb,zb);break;case Comment:vn(k_,Vb,Qb,zb);break;case Static:k_==null&&La(Vb,Qb,zb,h2);break;case Fragment$1:Bb(k_,Vb,Qb,zb,t2,Zb,h2,g2,Wb);break;default:C2&1?zs(k_,Vb,Qb,zb,t2,Zb,h2,g2,Wb):C2&6?Dy(k_,Vb,Qb,zb,t2,Zb,h2,g2,Wb):(C2&64||C2&128)&&f2.process(k_,Vb,Qb,zb,t2,Zb,h2,g2,Wb,L2)}O2!=null&&t2&&setRef(O2,k_&&k_.ref,Zb,Vb||k_,!Vb)},Je=(k_,Vb,Qb,zb)=>{if(k_==null)r(Vb.el=u(Vb.children),Qb,zb);else{const t2=Vb.el=k_.el;Vb.children!==k_.children&&c(t2,Vb.children)}},vn=(k_,Vb,Qb,zb)=>{k_==null?r(Vb.el=l(Vb.children||""),Qb,zb):Vb.el=k_.el},La=(k_,Vb,Qb,zb)=>{[k_.el,k_.anchor]=He(k_.children,Vb,Qb,zb,k_.el,k_.anchor)},sr=({el:k_,anchor:Vb},Qb,zb)=>{let t2;for(;k_&&k_!==Vb;)t2=xe(k_),r(k_,Qb,zb),k_=t2;r(Vb,Qb,zb)},Zr=({el:k_,anchor:Vb})=>{let Qb;for(;k_&&k_!==Vb;)Qb=xe(k_),o(k_),k_=Qb;o(Vb)},zs=(k_,Vb,Qb,zb,t2,Zb,h2,g2,Wb)=>{h2=h2||Vb.type==="svg",k_==null?za(Vb,Qb,zb,t2,Zb,h2,g2,Wb):Ty(k_,Vb,t2,Zb,h2,g2,Wb)},za=(k_,Vb,Qb,zb,t2,Zb,h2,g2)=>{let Wb,f2;const{type:O2,props:C2,shapeFlag:x2,transition:N2,dirs:U2}=k_;if(Wb=k_.el=s(k_.type,Zb,C2&&C2.is,C2),x2&8?m(Wb,k_.children):x2&16&&lc(k_.children,Wb,null,zb,t2,Zb&&O2!=="foreignObject",h2,g2),U2&&invokeDirectiveHook(k_,null,zb,"created"),C2){for(const a2 in C2)a2!=="value"&&!isReservedProp(a2)&&a(Wb,a2,null,C2[a2],Zb,k_.children,zb,t2,i2);"value"in C2&&a(Wb,"value",null,C2.value),(f2=C2.onVnodeBeforeMount)&&invokeVNodeHook(f2,zb,k_)}Hs(Wb,k_,k_.scopeId,h2,zb),U2&&invokeDirectiveHook(k_,null,zb,"beforeMount");const Q2=(!t2||t2&&!t2.pendingBranch)&&N2&&!N2.persisted;Q2&&N2.beforeEnter(Wb),r(Wb,Vb,Qb),((f2=C2&&C2.onVnodeMounted)||Q2||U2)&&queuePostRenderEffect(()=>{f2&&invokeVNodeHook(f2,zb,k_),Q2&&N2.enter(Wb),U2&&invokeDirectiveHook(k_,null,zb,"mounted")},t2)},Hs=(k_,Vb,Qb,zb,t2)=>{if(Qb&&Ne(k_,Qb),zb)for(let Zb=0;Zb<zb.length;Zb++)Ne(k_,zb[Zb]);if(t2){let Zb=t2.subTree;if(Vb===Zb){const h2=t2.vnode;Hs(k_,h2,h2.scopeId,h2.slotScopeIds,t2.parent)}}},lc=(k_,Vb,Qb,zb,t2,Zb,h2,g2,Wb=0)=>{for(let f2=Wb;f2<k_.length;f2++){const O2=k_[f2]=g2?cloneIfMounted(k_[f2]):normalizeVNode(k_[f2]);Ye(null,O2,Vb,Qb,zb,t2,Zb,h2,g2)}},Ty=(k_,Vb,Qb,zb,t2,Zb,h2)=>{const g2=Vb.el=k_.el;let{patchFlag:Wb,dynamicChildren:f2,dirs:O2}=Vb;Wb|=k_.patchFlag&16;const C2=k_.props||EMPTY_OBJ,x2=Vb.props||EMPTY_OBJ;let N2;Qb&&toggleRecurse(Qb,!1),(N2=x2.onVnodeBeforeUpdate)&&invokeVNodeHook(N2,Qb,Vb,k_),O2&&invokeDirectiveHook(Vb,k_,Qb,"beforeUpdate"),Qb&&toggleRecurse(Qb,!0);const U2=t2&&Vb.type!=="foreignObject";if(f2?_y(k_.dynamicChildren,f2,g2,Qb,zb,U2,Zb):h2||$b(k_,Vb,g2,null,Qb,zb,U2,Zb,!1),Wb>0){if(Wb&16)xy(g2,Vb,C2,x2,Qb,zb,t2);else if(Wb&2&&C2.class!==x2.class&&a(g2,"class",null,x2.class,t2),Wb&4&&a(g2,"style",C2.style,x2.style,t2),Wb&8){const Q2=Vb.dynamicProps;for(let a2=0;a2<Q2.length;a2++){const S2=Q2[a2],n2=C2[S2],F2=x2[S2];(F2!==n2||S2==="value")&&a(g2,S2,n2,F2,t2,k_.children,Qb,zb,i2)}}Wb&1&&k_.children!==Vb.children&&m(g2,Vb.children)}else!h2&&f2==null&&xy(g2,Vb,C2,x2,Qb,zb,t2);((N2=x2.onVnodeUpdated)||O2)&&queuePostRenderEffect(()=>{N2&&invokeVNodeHook(N2,Qb,Vb,k_),O2&&invokeDirectiveHook(Vb,k_,Qb,"updated")},zb)},_y=(k_,Vb,Qb,zb,t2,Zb,h2)=>{for(let g2=0;g2<Vb.length;g2++){const Wb=k_[g2],f2=Vb[g2],O2=Wb.el&&(Wb.type===Fragment$1||!isSameVNodeType(Wb,f2)||Wb.shapeFlag&70)?me(Wb.el):Qb;Ye(Wb,f2,O2,null,zb,t2,Zb,h2,!0)}},xy=(k_,Vb,Qb,zb,t2,Zb,h2)=>{if(Qb!==zb){if(Qb!==EMPTY_OBJ)for(const g2 in Qb)!isReservedProp(g2)&&!(g2 in zb)&&a(k_,g2,Qb[g2],null,h2,Vb.children,t2,Zb,i2);for(const g2 in zb){if(isReservedProp(g2))continue;const Wb=zb[g2],f2=Qb[g2];Wb!==f2&&g2!=="value"&&a(k_,g2,f2,Wb,h2,Vb.children,t2,Zb,i2)}"value"in zb&&a(k_,"value",Qb.value,zb.value)}},Bb=(k_,Vb,Qb,zb,t2,Zb,h2,g2,Wb)=>{const f2=Vb.el=k_?k_.el:u(""),O2=Vb.anchor=k_?k_.anchor:u("");let{patchFlag:C2,dynamicChildren:x2,slotScopeIds:N2}=Vb;N2&&(g2=g2?g2.concat(N2):N2),k_==null?(r(f2,Qb,zb),r(O2,Qb,zb),lc(Vb.children,Qb,O2,t2,Zb,h2,g2,Wb)):C2>0&&C2&64&&x2&&k_.dynamicChildren?(_y(k_.dynamicChildren,x2,Qb,t2,Zb,h2,g2),(Vb.key!=null||t2&&Vb===t2.subTree)&&traverseStaticChildren(k_,Vb,!0)):$b(k_,Vb,Qb,O2,t2,Zb,h2,g2,Wb)},Dy=(k_,Vb,Qb,zb,t2,Zb,h2,g2,Wb)=>{Vb.slotScopeIds=g2,k_==null?Vb.shapeFlag&512?t2.ctx.activate(Vb,Qb,zb,h2,Wb):Bg(Vb,Qb,zb,t2,Zb,h2,Wb):yy(k_,Vb,Wb)},Bg=(k_,Vb,Qb,zb,t2,Zb,h2)=>{const g2=k_.component=createComponentInstance(k_,zb,t2);if(isKeepAlive(k_)&&(g2.ctx.renderer=L2),setupComponent(g2),g2.asyncDep){if(t2&&t2.registerDep(g2,wy),!k_.el){const Wb=g2.subTree=createVNode(Comment);vn(null,Wb,Vb,Qb)}return}wy(g2,k_,Vb,Qb,t2,Zb,h2)},yy=(k_,Vb,Qb)=>{const zb=Vb.component=k_.component;if(shouldUpdateComponent(k_,Vb,Qb))if(zb.asyncDep&&!zb.asyncResolved){Ay(zb,Vb,Qb);return}else zb.next=Vb,invalidateJob(zb.update),zb.update();else Vb.el=k_.el,zb.vnode=Vb},wy=(k_,Vb,Qb,zb,t2,Zb,h2)=>{const g2=()=>{if(k_.isMounted){let{next:O2,bu:C2,u:x2,parent:N2,vnode:U2}=k_,Q2=O2,a2;toggleRecurse(k_,!1),O2?(O2.el=U2.el,Ay(k_,O2,h2)):O2=U2,C2&&invokeArrayFns(C2),(a2=O2.props&&O2.props.onVnodeBeforeUpdate)&&invokeVNodeHook(a2,N2,O2,U2),toggleRecurse(k_,!0);const S2=renderComponentRoot(k_),n2=k_.subTree;k_.subTree=S2,Ye(n2,S2,me(n2.el),s2(n2),k_,t2,Zb),O2.el=S2.el,Q2===null&&updateHOCHostEl(k_,S2.el),x2&&queuePostRenderEffect(x2,t2),(a2=O2.props&&O2.props.onVnodeUpdated)&&queuePostRenderEffect(()=>invokeVNodeHook(a2,N2,O2,U2),t2)}else{let O2;const{el:C2,props:x2}=Vb,{bm:N2,m:U2,parent:Q2}=k_,a2=isAsyncWrapper(Vb);if(toggleRecurse(k_,!1),N2&&invokeArrayFns(N2),!a2&&(O2=x2&&x2.onVnodeBeforeMount)&&invokeVNodeHook(O2,Q2,Vb),toggleRecurse(k_,!0),C2&&A2){const S2=()=>{k_.subTree=renderComponentRoot(k_),A2(C2,k_.subTree,k_,t2,null)};a2?Vb.type.__asyncLoader().then(()=>!k_.isUnmounted&&S2()):S2()}else{const S2=k_.subTree=renderComponentRoot(k_);Ye(null,S2,Qb,zb,k_,t2,Zb),Vb.el=S2.el}if(U2&&queuePostRenderEffect(U2,t2),!a2&&(O2=x2&&x2.onVnodeMounted)){const S2=Vb;queuePostRenderEffect(()=>invokeVNodeHook(O2,Q2,S2),t2)}(Vb.shapeFlag&256||Q2&&isAsyncWrapper(Q2.vnode)&&Q2.vnode.shapeFlag&256)&&k_.a&&queuePostRenderEffect(k_.a,t2),k_.isMounted=!0,Vb=Qb=zb=null}},Wb=k_.effect=new ReactiveEffect(g2,()=>queueJob(f2),k_.scope),f2=k_.update=()=>Wb.run();f2.id=k_.uid,toggleRecurse(k_,!0),f2()},Ay=(k_,Vb,Qb)=>{Vb.component=k_;const zb=k_.vnode.props;k_.vnode=Vb,k_.next=null,updateProps(k_,Vb.props,zb,Qb),updateSlots(k_,Vb.children,Qb),pauseTracking(),flushPreFlushCbs(),resetTracking()},$b=(k_,Vb,Qb,zb,t2,Zb,h2,g2,Wb=!1)=>{const f2=k_&&k_.children,O2=k_?k_.shapeFlag:0,C2=Vb.children,{patchFlag:x2,shapeFlag:N2}=Vb;if(x2>0){if(x2&128){Hb(f2,C2,Qb,zb,t2,Zb,h2,g2,Wb);return}else if(x2&256){e0(f2,C2,Qb,zb,t2,Zb,h2,g2,Wb);return}}N2&8?(O2&16&&i2(f2,t2,Zb),C2!==f2&&m(Qb,C2)):O2&16?N2&16?Hb(f2,C2,Qb,zb,t2,Zb,h2,g2,Wb):i2(f2,t2,Zb,!0):(O2&8&&m(Qb,""),N2&16&&lc(C2,Qb,zb,t2,Zb,h2,g2,Wb))},e0=(k_,Vb,Qb,zb,t2,Zb,h2,g2,Wb)=>{k_=k_||EMPTY_ARR,Vb=Vb||EMPTY_ARR;const f2=k_.length,O2=Vb.length,C2=Math.min(f2,O2);let x2;for(x2=0;x2<C2;x2++){const N2=Vb[x2]=Wb?cloneIfMounted(Vb[x2]):normalizeVNode(Vb[x2]);Ye(k_[x2],N2,Qb,null,t2,Zb,h2,g2,Wb)}f2>O2?i2(k_,t2,Zb,!0,!1,C2):lc(Vb,Qb,zb,t2,Zb,h2,g2,Wb,C2)},Hb=(k_,Vb,Qb,zb,t2,Zb,h2,g2,Wb)=>{let f2=0;const O2=Vb.length;let C2=k_.length-1,x2=O2-1;for(;f2<=C2&&f2<=x2;){const N2=k_[f2],U2=Vb[f2]=Wb?cloneIfMounted(Vb[f2]):normalizeVNode(Vb[f2]);if(isSameVNodeType(N2,U2))Ye(N2,U2,Qb,null,t2,Zb,h2,g2,Wb);else break;f2++}for(;f2<=C2&&f2<=x2;){const N2=k_[C2],U2=Vb[x2]=Wb?cloneIfMounted(Vb[x2]):normalizeVNode(Vb[x2]);if(isSameVNodeType(N2,U2))Ye(N2,U2,Qb,null,t2,Zb,h2,g2,Wb);else break;C2--,x2--}if(f2>C2){if(f2<=x2){const N2=x2+1,U2=N2<O2?Vb[N2].el:zb;for(;f2<=x2;)Ye(null,Vb[f2]=Wb?cloneIfMounted(Vb[f2]):normalizeVNode(Vb[f2]),Qb,U2,t2,Zb,h2,g2,Wb),f2++}}else if(f2>x2)for(;f2<=C2;)Jb(k_[f2],t2,Zb,!0),f2++;else{const N2=f2,U2=f2,Q2=new Map;for(f2=U2;f2<=x2;f2++){const b2=Vb[f2]=Wb?cloneIfMounted(Vb[f2]):normalizeVNode(Vb[f2]);b2.key!=null&&Q2.set(b2.key,f2)}let a2,S2=0;const n2=x2-U2+1;let F2=!1,M2=0;const v2=new Array(n2);for(f2=0;f2<n2;f2++)v2[f2]=0;for(f2=N2;f2<=C2;f2++){const b2=k_[f2];if(S2>=n2){Jb(b2,t2,Zb,!0);continue}let D2;if(b2.key!=null)D2=Q2.get(b2.key);else for(a2=U2;a2<=x2;a2++)if(v2[a2-U2]===0&&isSameVNodeType(b2,Vb[a2])){D2=a2;break}D2===void 0?Jb(b2,t2,Zb,!0):(v2[D2-U2]=f2+1,D2>=M2?M2=D2:F2=!0,Ye(b2,Vb[D2],Qb,null,t2,Zb,h2,g2,Wb),S2++)}const o2=F2?getSequence(v2):EMPTY_ARR;for(a2=o2.length-1,f2=n2-1;f2>=0;f2--){const b2=U2+f2,D2=Vb[b2],j2=b2+1<O2?Vb[b2+1].el:zb;v2[f2]===0?Ye(null,D2,Qb,j2,t2,Zb,h2,g2,Wb):F2&&(a2<0||f2!==o2[a2]?Yb(D2,Qb,j2,2):a2--)}}},Yb=(k_,Vb,Qb,zb,t2=null)=>{const{el:Zb,type:h2,transition:g2,children:Wb,shapeFlag:f2}=k_;if(f2&6){Yb(k_.component.subTree,Vb,Qb,zb);return}if(f2&128){k_.suspense.move(Vb,Qb,zb);return}if(f2&64){h2.move(k_,Vb,Qb,L2);return}if(h2===Fragment$1){r(Zb,Vb,Qb);for(let C2=0;C2<Wb.length;C2++)Yb(Wb[C2],Vb,Qb,zb);r(k_.anchor,Vb,Qb);return}if(h2===Static){sr(k_,Vb,Qb);return}if(zb!==2&&f2&1&&g2)if(zb===0)g2.beforeEnter(Zb),r(Zb,Vb,Qb),queuePostRenderEffect(()=>g2.enter(Zb),t2);else{const{leave:C2,delayLeave:x2,afterLeave:N2}=g2,U2=()=>r(Zb,Vb,Qb),Q2=()=>{C2(Zb,()=>{U2(),N2&&N2()})};x2?x2(Zb,U2,Q2):Q2()}else r(Zb,Vb,Qb)},Jb=(k_,Vb,Qb,zb=!1,t2=!1)=>{const{type:Zb,props:h2,ref:g2,children:Wb,dynamicChildren:f2,shapeFlag:O2,patchFlag:C2,dirs:x2}=k_;if(g2!=null&&setRef(g2,null,Qb,k_,!0),O2&256){Vb.ctx.deactivate(k_);return}const N2=O2&1&&x2,U2=!isAsyncWrapper(k_);let Q2;if(U2&&(Q2=h2&&h2.onVnodeBeforeUnmount)&&invokeVNodeHook(Q2,Vb,k_),O2&6)Rb(k_.component,Qb,zb);else{if(O2&128){k_.suspense.unmount(Qb,zb);return}N2&&invokeDirectiveHook(k_,null,Vb,"beforeUnmount"),O2&64?k_.type.remove(k_,Vb,Qb,t2,L2,zb):f2&&(Zb!==Fragment$1||C2>0&&C2&64)?i2(f2,Vb,Qb,!1,!0):(Zb===Fragment$1&&C2&384||!t2&&O2&16)&&i2(Wb,Vb,Qb),zb&&l2(k_)}(U2&&(Q2=h2&&h2.onVnodeUnmounted)||N2)&&queuePostRenderEffect(()=>{Q2&&invokeVNodeHook(Q2,Vb,k_),N2&&invokeDirectiveHook(k_,null,Vb,"unmounted")},Qb)},l2=k_=>{const{type:Vb,el:Qb,anchor:zb,transition:t2}=k_;if(Vb===Fragment$1){y2(Qb,zb);return}if(Vb===Static){Zr(k_);return}const Zb=()=>{o(Qb),t2&&!t2.persisted&&t2.afterLeave&&t2.afterLeave()};if(k_.shapeFlag&1&&t2&&!t2.persisted){const{leave:h2,delayLeave:g2}=t2,Wb=()=>h2(Qb,Zb);g2?g2(k_.el,Zb,Wb):Wb()}else Zb()},y2=(k_,Vb)=>{let Qb;for(;k_!==Vb;)Qb=xe(k_),o(k_),k_=Qb;o(Vb)},Rb=(k_,Vb,Qb)=>{const{bum:zb,scope:t2,update:Zb,subTree:h2,um:g2}=k_;zb&&invokeArrayFns(zb),t2.stop(),Zb&&(Zb.active=!1,Jb(h2,k_,Vb,Qb)),g2&&queuePostRenderEffect(g2,Vb),queuePostRenderEffect(()=>{k_.isUnmounted=!0},Vb),Vb&&Vb.pendingBranch&&!Vb.isUnmounted&&k_.asyncDep&&!k_.asyncResolved&&k_.suspenseId===Vb.pendingId&&(Vb.deps--,Vb.deps===0&&Vb.resolve())},i2=(k_,Vb,Qb,zb=!1,t2=!1,Zb=0)=>{for(let h2=Zb;h2<k_.length;h2++)Jb(k_[h2],Vb,Qb,zb,t2)},s2=k_=>k_.shapeFlag&6?s2(k_.component.subTree):k_.shapeFlag&128?k_.suspense.next():xe(k_.anchor||k_.el),E2=(k_,Vb,Qb)=>{k_==null?Vb._vnode&&Jb(Vb._vnode,null,null,!0):Ye(Vb._vnode||null,k_,Vb,null,null,null,Qb),flushPreFlushCbs(),flushPostFlushCbs(),Vb._vnode=k_},L2={p:Ye,um:Jb,m:Yb,r:l2,mt:Bg,mc:lc,pc:$b,pbc:_y,n:s2,o:e};let T2,A2;return t&&([T2,A2]=t(L2)),{render:E2,hydrate:T2,createApp:createAppAPI(E2,T2)}}function toggleRecurse({effect:e,update:t},n){e.allowRecurse=t.allowRecurse=n}function traverseStaticChildren(e,t,n=!1){const r=e.children,o=t.children;if(isArray$2(r)&&isArray$2(o))for(let a=0;a<r.length;a++){const s=r[a];let u=o[a];u.shapeFlag&1&&!u.dynamicChildren&&((u.patchFlag<=0||u.patchFlag===32)&&(u=o[a]=cloneIfMounted(o[a]),u.el=s.el),n||traverseStaticChildren(s,u))}}function getSequence(e){const t=e.slice(),n=[0];let r,o,a,s,u;const l=e.length;for(r=0;r<l;r++){const c=e[r];if(c!==0){if(o=n[n.length-1],e[o]<c){t[r]=o,n.push(r);continue}for(a=0,s=n.length-1;a<s;)u=a+s>>1,e[n[u]]<c?a=u+1:s=u;c<e[n[a]]&&(a>0&&(t[r]=n[a-1]),n[a]=r)}}for(a=n.length,s=n[a-1];a-- >0;)n[a]=s,s=t[s];return n}const isTeleport=e=>e.__isTeleport,isTeleportDisabled=e=>e&&(e.disabled||e.disabled===""),isTargetSVG=e=>typeof SVGElement!="undefined"&&e instanceof SVGElement,resolveTarget=(e,t)=>{const n=e&&e.to;return isString(n)?t?t(n):null:n},TeleportImpl={__isTeleport:!0,process(e,t,n,r,o,a,s,u,l,c){const{mc:m,pc:me,pbc:xe,o:{insert:Ne,querySelector:He,createText:Ye,createComment:Je}}=c,vn=isTeleportDisabled(t.props);let{shapeFlag:La,children:sr,dynamicChildren:Zr}=t;if(e==null){const zs=t.el=Ye(""),za=t.anchor=Ye("");Ne(zs,n,r),Ne(za,n,r);const Hs=t.target=resolveTarget(t.props,He),lc=t.targetAnchor=Ye("");Hs&&(Ne(lc,Hs),s=s||isTargetSVG(Hs));const Ty=(_y,xy)=>{La&16&&m(sr,_y,xy,o,a,s,u,l)};vn?Ty(n,za):Hs&&Ty(Hs,lc)}else{t.el=e.el;const zs=t.anchor=e.anchor,za=t.target=e.target,Hs=t.targetAnchor=e.targetAnchor,lc=isTeleportDisabled(e.props),Ty=lc?n:za,_y=lc?zs:Hs;if(s=s||isTargetSVG(za),Zr?(xe(e.dynamicChildren,Zr,Ty,o,a,s,u),traverseStaticChildren(e,t,!0)):l||me(e,t,Ty,_y,o,a,s,u,!1),vn)lc||moveTeleport(t,n,zs,c,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const xy=t.target=resolveTarget(t.props,He);xy&&moveTeleport(t,xy,null,c,0)}else lc&&moveTeleport(t,za,Hs,c,1)}},remove(e,t,n,r,{um:o,o:{remove:a}},s){const{shapeFlag:u,children:l,anchor:c,targetAnchor:m,target:me,props:xe}=e;if(me&&a(m),(s||!isTeleportDisabled(xe))&&(a(c),u&16))for(let Ne=0;Ne<l.length;Ne++){const He=l[Ne];o(He,t,n,!0,!!He.dynamicChildren)}},move:moveTeleport,hydrate:hydrateTeleport};function moveTeleport(e,t,n,{o:{insert:r},m:o},a=2){a===0&&r(e.targetAnchor,t,n);const{el:s,anchor:u,shapeFlag:l,children:c,props:m}=e,me=a===2;if(me&&r(s,t,n),(!me||isTeleportDisabled(m))&&l&16)for(let xe=0;xe<c.length;xe++)o(c[xe],t,n,2);me&&r(u,t,n)}function hydrateTeleport(e,t,n,r,o,a,{o:{nextSibling:s,parentNode:u,querySelector:l}},c){const m=t.target=resolveTarget(t.props,l);if(m){const me=m._lpa||m.firstChild;if(t.shapeFlag&16)if(isTeleportDisabled(t.props))t.anchor=c(s(e),t,u(e),n,r,o,a),t.targetAnchor=me;else{t.anchor=s(e);let xe=me;for(;xe;)if(xe=s(xe),xe&&xe.nodeType===8&&xe.data==="teleport anchor"){t.targetAnchor=xe,m._lpa=t.targetAnchor&&s(t.targetAnchor);break}c(me,t,m,n,r,o,a)}}return t.anchor&&s(t.anchor)}const Teleport=TeleportImpl,Fragment$1=Symbol(void 0),Text=Symbol(void 0),Comment=Symbol(void 0),Static=Symbol(void 0),blockStack=[];let currentBlock=null;function openBlock(e=!1){blockStack.push(currentBlock=e?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(e){isBlockTreeEnabled+=e}function setupBlock(e){return e.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(e),e}function createElementBlock(e,t,n,r,o,a){return setupBlock(createBaseVNode(e,t,n,r,o,a,!0))}function createBlock(e,t,n,r,o){return setupBlock(createVNode(e,t,n,r,o,!0))}function isVNode(e){return e?e.__v_isVNode===!0:!1}function isSameVNodeType(e,t){return e.type===t.type&&e.key===t.key}const InternalObjectKey="__vInternal",normalizeKey=({key:e})=>e!=null?e:null,normalizeRef=({ref:e,ref_key:t,ref_for:n})=>e!=null?isString(e)||isRef(e)||isFunction(e)?{i:currentRenderingInstance,r:e,k:t,f:!!n}:e:null;function createBaseVNode(e,t=null,n=null,r=0,o=null,a=e===Fragment$1?0:1,s=!1,u=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&normalizeKey(t),ref:t&&normalizeRef(t),scopeId:currentScopeId,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:r,dynamicProps:o,dynamicChildren:null,appContext:null};return u?(normalizeChildren(l,n),a&128&&e.normalize(l)):n&&(l.shapeFlag|=isString(n)?8:16),isBlockTreeEnabled>0&&!s&&currentBlock&&(l.patchFlag>0||a&6)&&l.patchFlag!==32&&currentBlock.push(l),l}const createVNode=_createVNode;function _createVNode(e,t=null,n=null,r=0,o=null,a=!1){if((!e||e===NULL_DYNAMIC_COMPONENT)&&(e=Comment),isVNode(e)){const u=cloneVNode(e,t,!0);return n&&normalizeChildren(u,n),isBlockTreeEnabled>0&&!a&&currentBlock&&(u.shapeFlag&6?currentBlock[currentBlock.indexOf(e)]=u:currentBlock.push(u)),u.patchFlag|=-2,u}if(isClassComponent(e)&&(e=e.__vccOpts),t){t=guardReactiveProps(t);let{class:u,style:l}=t;u&&!isString(u)&&(t.class=normalizeClass(u)),isObject(l)&&(isProxy(l)&&!isArray$2(l)&&(l=extend$1({},l)),t.style=normalizeStyle(l))}const s=isString(e)?1:isSuspense(e)?128:isTeleport(e)?64:isObject(e)?4:isFunction(e)?2:0;return createBaseVNode(e,t,n,r,o,s,a,!0)}function guardReactiveProps(e){return e?isProxy(e)||InternalObjectKey in e?extend$1({},e):e:null}function cloneVNode(e,t,n=!1){const{props:r,ref:o,patchFlag:a,children:s}=e,u=t?mergeProps(r||{},t):r;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:u,key:u&&normalizeKey(u),ref:t&&t.ref?n&&o?isArray$2(o)?o.concat(normalizeRef(t)):[o,normalizeRef(t)]:normalizeRef(t):o,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:s,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Fragment$1?a===-1?16:a|16:a,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&cloneVNode(e.ssContent),ssFallback:e.ssFallback&&cloneVNode(e.ssFallback),el:e.el,anchor:e.anchor}}function createTextVNode(e=" ",t=0){return createVNode(Text,null,e,t)}function createCommentVNode(e="",t=!1){return t?(openBlock(),createBlock(Comment,null,e)):createVNode(Comment,null,e)}function normalizeVNode(e){return e==null||typeof e=="boolean"?createVNode(Comment):isArray$2(e)?createVNode(Fragment$1,null,e.slice()):typeof e=="object"?cloneIfMounted(e):createVNode(Text,null,String(e))}function cloneIfMounted(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:cloneVNode(e)}function normalizeChildren(e,t){let n=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(isArray$2(t))n=16;else if(typeof t=="object")if(r&65){const o=t.default;o&&(o._c&&(o._d=!1),normalizeChildren(e,o()),o._c&&(o._d=!0));return}else{n=32;const o=t._;!o&&!(InternalObjectKey in t)?t._ctx=currentRenderingInstance:o===3&&currentRenderingInstance&&(currentRenderingInstance.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else isFunction(t)?(t={default:t,_ctx:currentRenderingInstance},n=32):(t=String(t),r&64?(n=16,t=[createTextVNode(t)]):n=8);e.children=t,e.shapeFlag|=n}function mergeProps(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const o in r)if(o==="class")t.class!==r.class&&(t.class=normalizeClass([t.class,r.class]));else if(o==="style")t.style=normalizeStyle([t.style,r.style]);else if(isOn(o)){const a=t[o],s=r[o];s&&a!==s&&!(isArray$2(a)&&a.includes(s))&&(t[o]=a?[].concat(a,s):s)}else o!==""&&(t[o]=r[o])}return t}function invokeVNodeHook(e,t,n,r=null){callWithAsyncErrorHandling(e,t,7,[n,r])}const emptyAppContext=createAppContext();let uid$1=0;function createComponentInstance(e,t,n){const r=e.type,o=(t?t.appContext:e.appContext)||emptyAppContext,a={uid:uid$1++,vnode:e,type:r,parent:t,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(o.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(r,o),emitsOptions:normalizeEmitsOptions(r,o),emit:null,emitted:null,propsDefaults:EMPTY_OBJ,inheritAttrs:r.inheritAttrs,ctx:EMPTY_OBJ,data:EMPTY_OBJ,props:EMPTY_OBJ,attrs:EMPTY_OBJ,slots:EMPTY_OBJ,refs:EMPTY_OBJ,setupState:EMPTY_OBJ,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=t?t.root:a,a.emit=emit$1.bind(null,a),e.ce&&e.ce(a),a}let currentInstance=null;const getCurrentInstance=()=>currentInstance||currentRenderingInstance,setCurrentInstance=e=>{currentInstance=e,e.scope.on()},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),currentInstance=null};function isStatefulComponent(e){return e.vnode.shapeFlag&4}let isInSSRComponentSetup=!1;function setupComponent(e,t=!1){isInSSRComponentSetup=t;const{props:n,children:r}=e.vnode,o=isStatefulComponent(e);initProps(e,n,o,t),initSlots(e,r);const a=o?setupStatefulComponent(e,t):void 0;return isInSSRComponentSetup=!1,a}function setupStatefulComponent(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=markRaw(new Proxy(e.ctx,PublicInstanceProxyHandlers));const{setup:r}=n;if(r){const o=e.setupContext=r.length>1?createSetupContext(e):null;setCurrentInstance(e),pauseTracking();const a=callWithErrorHandling(r,e,0,[e.props,o]);if(resetTracking(),unsetCurrentInstance(),isPromise(a)){if(a.then(unsetCurrentInstance,unsetCurrentInstance),t)return a.then(s=>{handleSetupResult(e,s,t)}).catch(s=>{handleError(s,e,0)});e.asyncDep=a}else handleSetupResult(e,a,t)}else finishComponentSetup(e,t)}function handleSetupResult(e,t,n){isFunction(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:isObject(t)&&(e.setupState=proxyRefs(t)),finishComponentSetup(e,n)}let compile;function finishComponentSetup(e,t,n){const r=e.type;if(!e.render){if(!t&&compile&&!r.render){const o=r.template||resolveMergedOptions(e).template;if(o){const{isCustomElement:a,compilerOptions:s}=e.appContext.config,{delimiters:u,compilerOptions:l}=r,c=extend$1(extend$1({isCustomElement:a,delimiters:u},s),l);r.render=compile(o,c)}}e.render=r.render||NOOP}setCurrentInstance(e),pauseTracking(),applyOptions(e),resetTracking(),unsetCurrentInstance()}function createAttrsProxy(e){return new Proxy(e.attrs,{get(t,n){return track(e,"get","$attrs"),t[n]}})}function createSetupContext(e){const t=r=>{e.exposed=r||{}};let n;return{get attrs(){return n||(n=createAttrsProxy(e))},slots:e.slots,emit:e.emit,expose:t}}function getExposeProxy(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(proxyRefs(markRaw(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in publicPropertiesMap)return publicPropertiesMap[n](e)}}))}function getComponentName(e,t=!0){return isFunction(e)?e.displayName||e.name:e.name||t&&e.__name}function isClassComponent(e){return isFunction(e)&&"__vccOpts"in e}const computed=(e,t)=>computed$1(e,t,isInSSRComponentSetup);function h$1(e,t,n){const r=arguments.length;return r===2?isObject(t)&&!isArray$2(t)?isVNode(t)?createVNode(e,null,[t]):createVNode(e,t):createVNode(e,null,t):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&isVNode(n)&&(n=[n]),createVNode(e,t,n))}const version="3.2.40",svgNS="http://www.w3.org/2000/svg",doc=typeof document!="undefined"?document:null,templateContainer=doc&&doc.createElement("template"),nodeOps={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const o=t?doc.createElementNS(svgNS,e):doc.createElement(e,n?{is:n}:void 0);return e==="select"&&r&&r.multiple!=null&&o.setAttribute("multiple",r.multiple),o},createText:e=>doc.createTextNode(e),createComment:e=>doc.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>doc.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,r,o,a){const s=n?n.previousSibling:t.lastChild;if(o&&(o===a||o.nextSibling))for(;t.insertBefore(o.cloneNode(!0),n),!(o===a||!(o=o.nextSibling)););else{templateContainer.innerHTML=r?`<svg>${e}</svg>`:e;const u=templateContainer.content;if(r){const l=u.firstChild;for(;l.firstChild;)u.appendChild(l.firstChild);u.removeChild(l)}t.insertBefore(u,n)}return[s?s.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}};function patchClass(e,t,n){const r=e._vtc;r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}function patchStyle(e,t,n){const r=e.style,o=isString(n);if(n&&!o){for(const a in n)setStyle(r,a,n[a]);if(t&&!isString(t))for(const a in t)n[a]==null&&setStyle(r,a,"")}else{const a=r.display;o?t!==n&&(r.cssText=n):t&&e.removeAttribute("style"),"_vod"in e&&(r.display=a)}}const importantRE=/\s*!important$/;function setStyle(e,t,n){if(isArray$2(n))n.forEach(r=>setStyle(e,t,r));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const r=autoPrefix(e,t);importantRE.test(n)?e.setProperty(hyphenate(r),n.replace(importantRE,""),"important"):e[r]=n}}const prefixes=["Webkit","Moz","ms"],prefixCache={};function autoPrefix(e,t){const n=prefixCache[t];if(n)return n;let r=camelize(t);if(r!=="filter"&&r in e)return prefixCache[t]=r;r=capitalize(r);for(let o=0;o<prefixes.length;o++){const a=prefixes[o]+r;if(a in e)return prefixCache[t]=a}return t}const xlinkNS="http://www.w3.org/1999/xlink";function patchAttr(e,t,n,r,o){if(r&&t.startsWith("xlink:"))n==null?e.removeAttributeNS(xlinkNS,t.slice(6,t.length)):e.setAttributeNS(xlinkNS,t,n);else{const a=isSpecialBooleanAttr(t);n==null||a&&!includeBooleanAttr(n)?e.removeAttribute(t):e.setAttribute(t,a?"":n)}}function patchDOMProp(e,t,n,r,o,a,s){if(t==="innerHTML"||t==="textContent"){r&&s(r,o,a),e[t]=n==null?"":n;return}if(t==="value"&&e.tagName!=="PROGRESS"&&!e.tagName.includes("-")){e._value=n;const l=n==null?"":n;(e.value!==l||e.tagName==="OPTION")&&(e.value=l),n==null&&e.removeAttribute(t);return}let u=!1;if(n===""||n==null){const l=typeof e[t];l==="boolean"?n=includeBooleanAttr(n):n==null&&l==="string"?(n="",u=!0):l==="number"&&(n=0,u=!0)}try{e[t]=n}catch{}u&&e.removeAttribute(t)}const[_getNow,skipTimestampCheck]=(()=>{let e=Date.now,t=!1;if(typeof window!="undefined"){Date.now()>document.createEvent("Event").timeStamp&&(e=performance.now.bind(performance));const n=navigator.userAgent.match(/firefox\/(\d+)/i);t=!!(n&&Number(n[1])<=53)}return[e,t]})();let cachedNow=0;const p$1=Promise.resolve(),reset=()=>{cachedNow=0},getNow=()=>cachedNow||(p$1.then(reset),cachedNow=_getNow());function addEventListener$1(e,t,n,r){e.addEventListener(t,n,r)}function removeEventListener(e,t,n,r){e.removeEventListener(t,n,r)}function patchEvent(e,t,n,r,o=null){const a=e._vei||(e._vei={}),s=a[t];if(r&&s)s.value=r;else{const[u,l]=parseName(t);if(r){const c=a[t]=createInvoker(r,o);addEventListener$1(e,u,c,l)}else s&&(removeEventListener(e,u,s,l),a[t]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName(e){let t;if(optionsModifierRE.test(e)){t={};let r;for(;r=e.match(optionsModifierRE);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):hyphenate(e.slice(2)),t]}function createInvoker(e,t){const n=r=>{const o=r.timeStamp||_getNow();(skipTimestampCheck||o>=n.attached-1)&&callWithAsyncErrorHandling(patchStopImmediatePropagation(r,n.value),t,5,[r])};return n.value=e,n.attached=getNow(),n}function patchStopImmediatePropagation(e,t){if(isArray$2(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(r=>o=>!o._stopped&&r&&r(o))}else return t}const nativeOnRE=/^on[a-z]/,patchProp=(e,t,n,r,o=!1,a,s,u,l)=>{t==="class"?patchClass(e,r,o):t==="style"?patchStyle(e,n,r):isOn(t)?isModelListener(t)||patchEvent(e,t,n,r,s):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):shouldSetAsProp(e,t,r,o))?patchDOMProp(e,t,r,a,s,u,l):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),patchAttr(e,t,r,o))};function shouldSetAsProp(e,t,n,r){return r?!!(t==="innerHTML"||t==="textContent"||t in e&&nativeOnRE.test(t)&&isFunction(n)):t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||nativeOnRE.test(t)&&isString(n)?!1:t in e}const systemModifiers=["ctrl","shift","alt","meta"],modifierGuards={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>systemModifiers.some(n=>e[`${n}Key`]&&!t.includes(n))},withModifiers=(e,t)=>(n,...r)=>{for(let o=0;o<t.length;o++){const a=modifierGuards[t[o]];if(a&&a(n,t))return}return e(n,...r)},keyNames={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},withKeys=(e,t)=>n=>{if(!("key"in n))return;const r=hyphenate(n.key);if(t.some(o=>o===r||keyNames[o]===r))return e(n)},vShow={beforeMount(e,{value:t},{transition:n}){e._vod=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):setDisplay(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:r}){!t!=!n&&(r?t?(r.beforeEnter(e),setDisplay(e,!0),r.enter(e)):r.leave(e,()=>{setDisplay(e,!1)}):setDisplay(e,t))},beforeUnmount(e,{value:t}){setDisplay(e,t)}};function setDisplay(e,t){e.style.display=t?e._vod:"none"}const rendererOptions=extend$1({patchProp},nodeOps);let renderer;function ensureRenderer(){return renderer||(renderer=createRenderer(rendererOptions))}const createApp=(...e)=>{const t=ensureRenderer().createApp(...e),{mount:n}=t;return t.mount=r=>{const o=normalizeContainer(r);if(!o)return;const a=t._component;!isFunction(a)&&!a.render&&!a.template&&(a.template=o.innerHTML),o.innerHTML="";const s=n(o,!1,o instanceof SVGElement);return o instanceof Element&&(o.removeAttribute("v-cloak"),o.setAttribute("data-v-app","")),s},t};function normalizeContainer(e){return isString(e)?document.querySelector(e):e}var isVue2=!1;/*!
  * pinia v2.0.22
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */let activePinia;const setActivePinia=e=>activePinia=e,piniaSymbol=Symbol();function isPlainObject(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var MutationType;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(MutationType||(MutationType={}));function createPinia(){const e=effectScope(!0),t=e.run(()=>ref({}));let n=[],r=[];const o=markRaw({install(a){setActivePinia(o),o._a=a,a.provide(piniaSymbol,o),a.config.globalProperties.$pinia=o,r.forEach(s=>n.push(s)),r=[]},use(a){return!this._a&&!isVue2?r.push(a):n.push(a),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return o}const noop$1=()=>{};function addSubscription(e,t,n,r=noop$1){e.push(t);const o=()=>{const a=e.indexOf(t);a>-1&&(e.splice(a,1),r())};return!n&&getCurrentInstance()&&onUnmounted(o),o}function triggerSubscriptions(e,...t){e.slice().forEach(n=>{n(...t)})}function mergeReactiveObjects(e,t){e instanceof Map&&t instanceof Map&&t.forEach((n,r)=>e.set(r,n)),e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const n in t){if(!t.hasOwnProperty(n))continue;const r=t[n],o=e[n];isPlainObject(o)&&isPlainObject(r)&&e.hasOwnProperty(n)&&!isRef(r)&&!isReactive(r)?e[n]=mergeReactiveObjects(o,r):e[n]=r}return e}const skipHydrateSymbol=Symbol();function shouldHydrate(e){return!isPlainObject(e)||!e.hasOwnProperty(skipHydrateSymbol)}const{assign:assign$1}=Object;function isComputed(e){return!!(isRef(e)&&e.effect)}function createOptionsStore(e,t,n,r){const{state:o,actions:a,getters:s}=t,u=n.state.value[e];let l;function c(){u||(n.state.value[e]=o?o():{});const m=toRefs(n.state.value[e]);return assign$1(m,a,Object.keys(s||{}).reduce((me,xe)=>(me[xe]=markRaw(computed(()=>{setActivePinia(n);const Ne=n._s.get(e);return s[xe].call(Ne,Ne)})),me),{}))}return l=createSetupStore(e,c,t,n,r,!0),l.$reset=function(){const me=o?o():{};this.$patch(xe=>{assign$1(xe,me)})},l}function createSetupStore(e,t,n={},r,o,a){let s;const u=assign$1({actions:{}},n),l={deep:!0};let c,m,me=markRaw([]),xe=markRaw([]),Ne;const He=r.state.value[e];!a&&!He&&(r.state.value[e]={}),ref({});let Ye;function Je(Hs){let lc;c=m=!1,typeof Hs=="function"?(Hs(r.state.value[e]),lc={type:MutationType.patchFunction,storeId:e,events:Ne}):(mergeReactiveObjects(r.state.value[e],Hs),lc={type:MutationType.patchObject,payload:Hs,storeId:e,events:Ne});const Ty=Ye=Symbol();nextTick().then(()=>{Ye===Ty&&(c=!0)}),m=!0,triggerSubscriptions(me,lc,r.state.value[e])}const vn=noop$1;function La(){s.stop(),me=[],xe=[],r._s.delete(e)}function sr(Hs,lc){return function(){setActivePinia(r);const Ty=Array.from(arguments),_y=[],xy=[];function Bb(yy){_y.push(yy)}function Dy(yy){xy.push(yy)}triggerSubscriptions(xe,{args:Ty,name:Hs,store:zs,after:Bb,onError:Dy});let Bg;try{Bg=lc.apply(this&&this.$id===e?this:zs,Ty)}catch(yy){throw triggerSubscriptions(xy,yy),yy}return Bg instanceof Promise?Bg.then(yy=>(triggerSubscriptions(_y,yy),yy)).catch(yy=>(triggerSubscriptions(xy,yy),Promise.reject(yy))):(triggerSubscriptions(_y,Bg),Bg)}}const Zr={_p:r,$id:e,$onAction:addSubscription.bind(null,xe),$patch:Je,$reset:vn,$subscribe(Hs,lc={}){const Ty=addSubscription(me,Hs,lc.detached,()=>_y()),_y=s.run(()=>watch(()=>r.state.value[e],xy=>{(lc.flush==="sync"?m:c)&&Hs({storeId:e,type:MutationType.direct,events:Ne},xy)},assign$1({},l,lc)));return Ty},$dispose:La},zs=reactive(assign$1({},Zr));r._s.set(e,zs);const za=r._e.run(()=>(s=effectScope(),s.run(()=>t())));for(const Hs in za){const lc=za[Hs];if(isRef(lc)&&!isComputed(lc)||isReactive(lc))a||(He&&shouldHydrate(lc)&&(isRef(lc)?lc.value=He[Hs]:mergeReactiveObjects(lc,He[Hs])),r.state.value[e][Hs]=lc);else if(typeof lc=="function"){const Ty=sr(Hs,lc);za[Hs]=Ty,u.actions[Hs]=lc}}return assign$1(zs,za),assign$1(toRaw(zs),za),Object.defineProperty(zs,"$state",{get:()=>r.state.value[e],set:Hs=>{Je(lc=>{assign$1(lc,Hs)})}}),r._p.forEach(Hs=>{assign$1(zs,s.run(()=>Hs({store:zs,app:r._a,pinia:r,options:u})))}),He&&a&&n.hydrate&&n.hydrate(zs.$state,He),c=!0,m=!0,zs}function defineStore(e,t,n){let r,o;const a=typeof t=="function";typeof e=="string"?(r=e,o=a?n:t):(o=e,r=e.id);function s(u,l){const c=getCurrentInstance();return u=u||c&&inject(piniaSymbol),u&&setActivePinia(u),u=activePinia,u._s.has(r)||(a?createSetupStore(r,t,o,u):createOptionsStore(r,o,u)),u._s.get(r)}return s.$id=r,s}function mapState(e,t){return Array.isArray(t)?t.reduce((n,r)=>(n[r]=function(){return e(this.$pinia)[r]},n),{}):Object.keys(t).reduce((n,r)=>(n[r]=function(){const o=e(this.$pinia),a=t[r];return typeof a=="function"?a.call(this,o):o[a]},n),{})}function mapActions(e,t){return Array.isArray(t)?t.reduce((n,r)=>(n[r]=function(...o){return e(this.$pinia)[r](...o)},n),{}):Object.keys(t).reduce((n,r)=>(n[r]=function(...o){return e(this.$pinia)[t[r]](...o)},n),{})}var mutations$2={setApplicationStartTime(e){const t=useAppStore();t.applicationStartTime=e},toggleSidebar(){const e=useAppStore();e.showSidebar=!e.showSidebar},toggleMainSidebar(){const e=useAppStore();e.showMainSidebar=!e.showMainSidebar},setMainSidebar(e){const t=useAppStore();t.showMainSidebar=e},setSidebar(e){const t=useAppStore();t.showSidebar=e},setSidebarWidth(e){const t=useAppStore();t.sidebarWidth=e},setCurrentTheme(e){const t=useAppStore();t.currentTheme=e},setGlobalTheme(e){const t=useAppStore();t.globalTheme={...t.globalTheme,...e}},setToast(e){const t=useAppStore();t.toast={...t.toast,...e}},showSuccessToast(e){const t=useAppStore();t.toast={variant:"success",open:!0,...e}},showDangerToast(e){const t=useAppStore();t.toast={variant:"danger",open:!0,...e}},setWindowState(e){const t=useAppStore();t.windowState=e},setUpdateState({updateState:e}){const t=useAppStore();t.updateState=e},setGlobalLoading(e){const t=useAppStore();t.showGlobalLoading=e},setGlobalError(e){const t=useAppStore();t.globalError=e},setShowCreateCommunity(e){const t=useAppStore();t.modals.showCreateCommunity=e},setShowEditCommunity(e){const t=useAppStore();t.modals.showEditCommunity=e},setShowCommunityMembers(e){const t=useAppStore();t.modals.showCommunityMembers=e},setShowCreateChannel(e){const t=useAppStore();t.modals.showCreateChannel=e},setShowEditProfile(e){const t=useAppStore();t.modals.showEditProfile=e},setShowDisclaimer(e){const t=useAppStore();t.modals.showDisclaimer=e},setShowSettings(e){const t=useAppStore();t.modals.showSettings=e},setShowCommunitySettings(e){const t=useAppStore();t.modals.showCommunitySettings=e},setShowInviteCode(e){const t=useAppStore();t.modals.showInviteCode=e},setShowCode(e){const t=useAppStore();t.modals.showCode=e}};const scriptRel="modulepreload",seen={},base="/",__vitePreload=function(t,n){return!n||n.length===0?t():Promise.all(n.map(r=>{if(r=`${base}${r}`,r in seen)return;seen[r]=!0;const o=r.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${r}"]${a}`))return;const s=document.createElement("link");if(s.rel=o?"stylesheet":scriptRel,o||(s.as="script",s.crossOrigin=""),s.href=r,document.head.appendChild(s),o)return new Promise((u,l)=>{s.addEventListener("load",u),s.addEventListener("error",()=>l(new Error(`Unable to preload CSS for ${r}`)))})})).then(()=>t())};function __variableDynamicImportRuntime0__(e){switch(e){case"../themes/90s.css":return __vitePreload(()=>Promise.resolve({}),["assets/90s.00aa83f5.css"]);case"../themes/black.css":return __vitePreload(()=>Promise.resolve({}),["assets/black.a88cb73e.css"]);case"../themes/cyberpunk.css":return __vitePreload(()=>Promise.resolve({}),["assets/cyberpunk.54a02e1a.css"]);case"../themes/dark.css":return __vitePreload(()=>Promise.resolve({}),["assets/dark.e6d67667.css"]);case"../themes/default.css":return __vitePreload(()=>Promise.resolve({}),["assets/default.3799e7eb.css"]);default:return new Promise(function(t,n){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(n.bind(null,new Error("Unknown variable dynamic import: "+e)))})}}function setTheme(e){document.documentElement.style.setProperty("--j-color-primary-hue",e.hue.toString()),document.documentElement.style.setProperty("--j-color-saturation",e.saturation+"%"),document.documentElement.style.setProperty("--j-font-base-size",e.fontSize),e.name==="light"?document.documentElement.removeAttribute("theme"):(__variableDynamicImportRuntime0__(`../themes/${e.name}.css`),document.documentElement.setAttribute("theme",e.name));const t=document.getElementsByTagName("head")[0];let n=null;n=t.querySelector("link[href^='https://fonts.googleapis.com']"),n?n.setAttribute("href",`https://fonts.googleapis.com/css?family=${e.fontFamily}`):(n=document.createElement("link"),n.setAttribute("rel","stylesheet"),n.setAttribute("href",`https://fonts.googleapis.com/css?family=${e.fontFamily}`),document.getElementsByTagName("head")[0].appendChild(n)),document.documentElement.style.setProperty("--j-font-family",e.fontFamily)}var mutations$1={addCommunity(e){const t=useDataStore();t.neighbourhoods[e.neighbourhood.perspective.uuid]=e.neighbourhood,t.communities[e.neighbourhood.perspective.uuid]=e.state},addCommunityState(e){const t=useDataStore();t.communities[e.perspectiveUuid]=e},setCurrentChannelId(e){const t=useDataStore(),{communityId:n,channelId:r}=e;t.communities[n].currentChannelId=r},setChannelNotificationState({channelId:e}){const n=useDataStore().channels[e];n.notifications.mute=!n.notifications.mute},toggleCommunityMute({communityId:e}){const n=useDataStore().communities[e];n.notifications?n.notifications.mute=!n.notifications.mute:n.notifications={mute:!0}},setNeighbourhoodMember({member:e,perspectiveUuid:t}){const r=useDataStore().neighbourhoods[t];r&&!r.members.find(o=>o===e)&&r.members.push(e)},setCommunityTheme(e){const t=useDataStore();t.communities[e.communityId].theme={...t.communities[e.communityId].theme,...e.theme}},updateCommunityMetadata({communityId:e,name:t,description:n,image:r,thumbnail:o}){const a=useDataStore(),s=a.neighbourhoods[e];s&&(s.name=t,s.description=n,r&&(s.image=r),o&&(s.thumbnail=o)),a.neighbourhoods[e]=s},setChannelScrollTop(e){const t=useDataStore();t.channels[e.channelId].scrollTop=e.value},clearChannels({communityId:e}){const t=useDataStore();Object.values(t.channels).forEach(n=>{n.sourcePerspective===e&&delete t.channels[n.id]})},addChannel(e){const t=useDataStore();t.neighbourhoods[e.communityId]!==void 0&&(Object.values(t.channels).find(o=>o.name===e.channel.name&&o.sourcePerspective===e.communityId)||(t.channels[e.channel.id]=e.channel))},removeChannel(e){const t=useDataStore();delete t.channels[e.channelId]},addLocalChannel(e){const t=useDataStore();t.channels[e.perspectiveUuid]=e.channel},toggleHideMutedChannels(e){const n=useDataStore().communities[e.communityId];n.hideMutedChannels=!n.hideMutedChannels},createChannelMutation(e){const t=useDataStore();t.channels[e.id]=e},setuseLocalTheme(e){const n=useDataStore().communities[e.communityId];n.useLocalTheme=e.value},setHasNewMessages(e){const t=useDataStore(),n=t.getChannel(e.communityId,e.channelId),r=t.getCommunity(e.communityId),o=t.communities[r.state.perspectiveUuid];n.hasNewMessages=e.value,o.hasNewMessages=t.getChannelStates(r.state.perspectiveUuid).reduce((a,s)=>a?!0:s.hasNewMessages,!1)}},FeedType=(e=>(e[e.Signaled=0]="Signaled",e[e.Static=1]="Static",e))(FeedType||{}),MembraneType=(e=>(e[e.Inherited=0]="Inherited",e[e.Unique=1]="Unique",e))(MembraneType||{}),commonjsGlobal=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},lib={exports:{}};(function(module){var commonjsGlobal$1=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof commonjsGlobal!="undefined"?commonjsGlobal:typeof self!="undefined"?self:{};function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function getAugmentedNamespace(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach(function(n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}),t}var src={},Ad4mClient$1={},AgentClient$1={},extendStatics$1=function(e,t){return extendStatics$1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},extendStatics$1(e,t)};function __extends$1(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");extendStatics$1(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var genericMessage="Invariant Violation",_a$3=Object.setPrototypeOf,setPrototypeOf=_a$3===void 0?function(e,t){return e.__proto__=t,e}:_a$3,InvariantError=function(e){__extends$1(t,e);function t(n){n===void 0&&(n=genericMessage);var r=e.call(this,typeof n=="number"?genericMessage+": "+n+" (see https://github.com/apollographql/invariant-packages)":n)||this;return r.framesToPop=1,r.name=genericMessage,setPrototypeOf(r,t.prototype),r}return t}(Error);function invariant$1(e,t){if(!e)throw new InvariantError(t)}var verbosityLevels=["debug","log","warn","error","silent"],verbosityLevel=verbosityLevels.indexOf("log");function wrapConsoleMethod(e){return function(){if(verbosityLevels.indexOf(e)>=verbosityLevel){var t=console[e]||console.log;return t.apply(console,arguments)}}}(function(e){e.debug=wrapConsoleMethod("debug"),e.log=wrapConsoleMethod("log"),e.warn=wrapConsoleMethod("warn"),e.error=wrapConsoleMethod("error")})(invariant$1||(invariant$1={}));function setVerbosity(e){var t=verbosityLevels[verbosityLevel];return verbosityLevel=Math.max(0,verbosityLevels.indexOf(e)),t}function maybe$1(e){try{return e()}catch{}}var global$1=maybe$1(function(){return globalThis})||maybe$1(function(){return window})||maybe$1(function(){return self})||maybe$1(function(){return commonjsGlobal})||maybe$1(function(){return maybe$1.constructor("return this")()}),__="__",GLOBAL_KEY=[__,__].join("DEV");function getDEV(){try{return Boolean(__DEV__)}catch{return Object.defineProperty(global$1,GLOBAL_KEY,{value:maybe$1(function(){return"production"})!=="production",enumerable:!1,configurable:!0,writable:!0}),global$1[GLOBAL_KEY]}}var DEV=getDEV();function maybe(e){try{return e()}catch{}}var safeGlobal=maybe(function(){return globalThis})||maybe(function(){return window})||maybe(function(){return self})||maybe(function(){return commonjsGlobal})||maybe(function(){return maybe.constructor("return this")()}),needToRemove=!1;function install(){safeGlobal&&!maybe(function(){return"production"})&&!maybe(function(){return process})&&(Object.defineProperty(safeGlobal,"process",{value:{env:{NODE_ENV:"production"}},configurable:!0,enumerable:!1,writable:!0}),needToRemove=!0)}install();function remove(){needToRemove&&(delete safeGlobal.process,needToRemove=!1)}function _typeof$3(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$3=function(n){return typeof n}:_typeof$3=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_typeof$3(e)}function isObjectLike(e){return _typeof$3(e)=="object"&&e!==null}var SYMBOL_TO_STRING_TAG=typeof Symbol=="function"&&Symbol.toStringTag!=null?Symbol.toStringTag:"@@toStringTag";function getLocation(e,t){for(var n=/\r\n|[\n\r]/g,r=1,o=t+1,a;(a=n.exec(e.body))&&a.index<t;)r+=1,o=t+1-(a.index+a[0].length);return{line:r,column:o}}function printLocation(e){return printSourceLocation(e.source,getLocation(e.source,e.start))}function printSourceLocation(e,t){var n=e.locationOffset.column-1,r=whitespace(n)+e.body,o=t.line-1,a=e.locationOffset.line-1,s=t.line+a,u=t.line===1?n:0,l=t.column+u,c="".concat(e.name,":").concat(s,":").concat(l,`
`),m=r.split(/\r\n|[\n\r]/g),me=m[o];if(me.length>120){for(var xe=Math.floor(l/80),Ne=l%80,He=[],Ye=0;Ye<me.length;Ye+=80)He.push(me.slice(Ye,Ye+80));return c+printPrefixedLines([["".concat(s),He[0]]].concat(He.slice(1,xe+1).map(function(Je){return["",Je]}),[[" ",whitespace(Ne-1)+"^"],["",He[xe+1]]]))}return c+printPrefixedLines([["".concat(s-1),m[o-1]],["".concat(s),me],["",whitespace(l-1)+"^"],["".concat(s+1),m[o+1]]])}function printPrefixedLines(e){var t=e.filter(function(r){r[0];var o=r[1];return o!==void 0}),n=Math.max.apply(Math,t.map(function(r){var o=r[0];return o.length}));return t.map(function(r){var o=r[0],a=r[1];return leftPad(n,o)+(a?" | "+a:" |")}).join(`
`)}function whitespace(e){return Array(e+1).join(" ")}function leftPad(e,t){return whitespace(e-t.length)+t}function _typeof$2(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$2=function(n){return typeof n}:_typeof$2=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_typeof$2(e)}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(r){_defineProperty(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties$2(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass$2(e,t,n){return t&&_defineProperties$2(e.prototype,t),n&&_defineProperties$2(e,n),e}function _inherits(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var r=_getPrototypeOf(e),o;if(t){var a=_getPrototypeOf(this).constructor;o=Reflect.construct(r,arguments,a)}else o=r.apply(this,arguments);return _possibleConstructorReturn(this,o)}}function _possibleConstructorReturn(e,t){return t&&(_typeof$2(t)==="object"||typeof t=="function")?t:_assertThisInitialized(e)}function _assertThisInitialized(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _wrapNativeSuper(e){var t=typeof Map=="function"?new Map:void 0;return _wrapNativeSuper=function(r){if(r===null||!_isNativeFunction(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(typeof t!="undefined"){if(t.has(r))return t.get(r);t.set(r,o)}function o(){return _construct(r,arguments,_getPrototypeOf(this).constructor)}return o.prototype=Object.create(r.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(o,r)},_wrapNativeSuper(e)}function _construct(e,t,n){return _isNativeReflectConstruct()?_construct=Reflect.construct:_construct=function(o,a,s){var u=[null];u.push.apply(u,a);var l=Function.bind.apply(o,u),c=new l;return s&&_setPrototypeOf(c,s.prototype),c},_construct.apply(null,arguments)}function _isNativeReflectConstruct(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function _isNativeFunction(e){return Function.toString.call(e).indexOf("[native code]")!==-1}function _setPrototypeOf(e,t){return _setPrototypeOf=Object.setPrototypeOf||function(r,o){return r.__proto__=o,r},_setPrototypeOf(e,t)}function _getPrototypeOf(e){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},_getPrototypeOf(e)}var GraphQLError=function(e){_inherits(n,e);var t=_createSuper(n);function n(r,o,a,s,u,l,c){var m,me,xe,Ne;_classCallCheck(this,n),Ne=t.call(this,r),Ne.name="GraphQLError",Ne.originalError=l!=null?l:void 0,Ne.nodes=undefinedIfEmpty(Array.isArray(o)?o:o?[o]:void 0);for(var He=[],Ye=0,Je=(vn=Ne.nodes)!==null&&vn!==void 0?vn:[];Ye<Je.length;Ye++){var vn,La=Je[Ye],sr=La.loc;sr!=null&&He.push(sr)}He=undefinedIfEmpty(He),Ne.source=a!=null?a:(m=He)===null||m===void 0?void 0:m[0].source,Ne.positions=s!=null?s:(me=He)===null||me===void 0?void 0:me.map(function(zs){return zs.start}),Ne.locations=s&&a?s.map(function(zs){return getLocation(a,zs)}):(xe=He)===null||xe===void 0?void 0:xe.map(function(zs){return getLocation(zs.source,zs.start)}),Ne.path=u!=null?u:void 0;var Zr=l==null?void 0:l.extensions;return c==null&&isObjectLike(Zr)?Ne.extensions=_objectSpread({},Zr):Ne.extensions=c!=null?c:{},Object.defineProperties(_assertThisInitialized(Ne),{message:{enumerable:!0},locations:{enumerable:Ne.locations!=null},path:{enumerable:Ne.path!=null},extensions:{enumerable:Ne.extensions!=null&&Object.keys(Ne.extensions).length>0},name:{enumerable:!1},nodes:{enumerable:!1},source:{enumerable:!1},positions:{enumerable:!1},originalError:{enumerable:!1}}),l!=null&&l.stack?(Object.defineProperty(_assertThisInitialized(Ne),"stack",{value:l.stack,writable:!0,configurable:!0}),_possibleConstructorReturn(Ne)):(Error.captureStackTrace?Error.captureStackTrace(_assertThisInitialized(Ne),n):Object.defineProperty(_assertThisInitialized(Ne),"stack",{value:Error().stack,writable:!0,configurable:!0}),Ne)}return _createClass$2(n,[{key:"toString",value:function(){return printError(this)}},{key:SYMBOL_TO_STRING_TAG,get:function(){return"Object"}}]),n}(_wrapNativeSuper(Error));function undefinedIfEmpty(e){return e===void 0||e.length===0?void 0:e}function printError(e){var t=e.message;if(e.nodes)for(var n=0,r=e.nodes;n<r.length;n++){var o=r[n];o.loc&&(t+=`

`+printLocation(o.loc))}else if(e.source&&e.locations)for(var a=0,s=e.locations;a<s.length;a++){var u=s[a];t+=`

`+printSourceLocation(e.source,u)}return t}function syntaxError(e,t,n){return new GraphQLError("Syntax Error: ".concat(n),void 0,e,[t])}var Kind=Object.freeze({NAME:"Name",DOCUMENT:"Document",OPERATION_DEFINITION:"OperationDefinition",VARIABLE_DEFINITION:"VariableDefinition",SELECTION_SET:"SelectionSet",FIELD:"Field",ARGUMENT:"Argument",FRAGMENT_SPREAD:"FragmentSpread",INLINE_FRAGMENT:"InlineFragment",FRAGMENT_DEFINITION:"FragmentDefinition",VARIABLE:"Variable",INT:"IntValue",FLOAT:"FloatValue",STRING:"StringValue",BOOLEAN:"BooleanValue",NULL:"NullValue",ENUM:"EnumValue",LIST:"ListValue",OBJECT:"ObjectValue",OBJECT_FIELD:"ObjectField",DIRECTIVE:"Directive",NAMED_TYPE:"NamedType",LIST_TYPE:"ListType",NON_NULL_TYPE:"NonNullType",SCHEMA_DEFINITION:"SchemaDefinition",OPERATION_TYPE_DEFINITION:"OperationTypeDefinition",SCALAR_TYPE_DEFINITION:"ScalarTypeDefinition",OBJECT_TYPE_DEFINITION:"ObjectTypeDefinition",FIELD_DEFINITION:"FieldDefinition",INPUT_VALUE_DEFINITION:"InputValueDefinition",INTERFACE_TYPE_DEFINITION:"InterfaceTypeDefinition",UNION_TYPE_DEFINITION:"UnionTypeDefinition",ENUM_TYPE_DEFINITION:"EnumTypeDefinition",ENUM_VALUE_DEFINITION:"EnumValueDefinition",INPUT_OBJECT_TYPE_DEFINITION:"InputObjectTypeDefinition",DIRECTIVE_DEFINITION:"DirectiveDefinition",SCHEMA_EXTENSION:"SchemaExtension",SCALAR_TYPE_EXTENSION:"ScalarTypeExtension",OBJECT_TYPE_EXTENSION:"ObjectTypeExtension",INTERFACE_TYPE_EXTENSION:"InterfaceTypeExtension",UNION_TYPE_EXTENSION:"UnionTypeExtension",ENUM_TYPE_EXTENSION:"EnumTypeExtension",INPUT_OBJECT_TYPE_EXTENSION:"InputObjectTypeExtension"});function invariant(e,t){var n=Boolean(e);if(!n)throw new Error(t!=null?t:"Unexpected invariant triggered.")}var nodejsCustomInspectSymbol=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):void 0,nodejsCustomInspectSymbol$1=nodejsCustomInspectSymbol;function defineInspect(e){var t=e.prototype.toJSON;typeof t=="function"||invariant(0),e.prototype.inspect=t,nodejsCustomInspectSymbol$1&&(e.prototype[nodejsCustomInspectSymbol$1]=t)}var Location=function(){function e(n,r,o){this.start=n.start,this.end=r.end,this.startToken=n,this.endToken=r,this.source=o}var t=e.prototype;return t.toJSON=function(){return{start:this.start,end:this.end}},e}();defineInspect(Location);var Token=function(){function e(n,r,o,a,s,u,l){this.kind=n,this.start=r,this.end=o,this.line=a,this.column=s,this.value=l,this.prev=u,this.next=null}var t=e.prototype;return t.toJSON=function(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}},e}();defineInspect(Token);function isNode(e){return e!=null&&typeof e.kind=="string"}var TokenKind=Object.freeze({SOF:"<SOF>",EOF:"<EOF>",BANG:"!",DOLLAR:"$",AMP:"&",PAREN_L:"(",PAREN_R:")",SPREAD:"...",COLON:":",EQUALS:"=",AT:"@",BRACKET_L:"[",BRACKET_R:"]",BRACE_L:"{",PIPE:"|",BRACE_R:"}",NAME:"Name",INT:"Int",FLOAT:"Float",STRING:"String",BLOCK_STRING:"BlockString",COMMENT:"Comment"});function _typeof$1(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$1=function(n){return typeof n}:_typeof$1=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_typeof$1(e)}var MAX_ARRAY_LENGTH=10,MAX_RECURSIVE_DEPTH=2;function inspect(e){return formatValue(e,[])}function formatValue(e,t){switch(_typeof$1(e)){case"string":return JSON.stringify(e);case"function":return e.name?"[function ".concat(e.name,"]"):"[function]";case"object":return e===null?"null":formatObjectValue(e,t);default:return String(e)}}function formatObjectValue(e,t){if(t.indexOf(e)!==-1)return"[Circular]";var n=[].concat(t,[e]),r=getCustomFn(e);if(r!==void 0){var o=r.call(e);if(o!==e)return typeof o=="string"?o:formatValue(o,n)}else if(Array.isArray(e))return formatArray(e,n);return formatObject(e,n)}function formatObject(e,t){var n=Object.keys(e);if(n.length===0)return"{}";if(t.length>MAX_RECURSIVE_DEPTH)return"["+getObjectTag(e)+"]";var r=n.map(function(o){var a=formatValue(e[o],t);return o+": "+a});return"{ "+r.join(", ")+" }"}function formatArray(e,t){if(e.length===0)return"[]";if(t.length>MAX_RECURSIVE_DEPTH)return"[Array]";for(var n=Math.min(MAX_ARRAY_LENGTH,e.length),r=e.length-n,o=[],a=0;a<n;++a)o.push(formatValue(e[a],t));return r===1?o.push("... 1 more item"):r>1&&o.push("... ".concat(r," more items")),"["+o.join(", ")+"]"}function getCustomFn(e){var t=e[String(nodejsCustomInspectSymbol$1)];if(typeof t=="function")return t;if(typeof e.inspect=="function")return e.inspect}function getObjectTag(e){var t=Object.prototype.toString.call(e).replace(/^\[object /,"").replace(/]$/,"");if(t==="Object"&&typeof e.constructor=="function"){var n=e.constructor.name;if(typeof n=="string"&&n!=="")return n}return t}function devAssert(e,t){var n=Boolean(e);if(!n)throw new Error(t)}var instanceOf=function(t,n){return t instanceof n};function _defineProperties$1(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass$1(e,t,n){return t&&_defineProperties$1(e.prototype,t),n&&_defineProperties$1(e,n),e}var Source=function(){function e(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"GraphQL request",r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{line:1,column:1};typeof t=="string"||devAssert(0,"Body must be a string. Received: ".concat(inspect(t),".")),this.body=t,this.name=n,this.locationOffset=r,this.locationOffset.line>0||devAssert(0,"line in locationOffset is 1-indexed and must be positive."),this.locationOffset.column>0||devAssert(0,"column in locationOffset is 1-indexed and must be positive.")}return _createClass$1(e,[{key:SYMBOL_TO_STRING_TAG,get:function(){return"Source"}}]),e}();function isSource(e){return instanceOf(e,Source)}var DirectiveLocation=Object.freeze({QUERY:"QUERY",MUTATION:"MUTATION",SUBSCRIPTION:"SUBSCRIPTION",FIELD:"FIELD",FRAGMENT_DEFINITION:"FRAGMENT_DEFINITION",FRAGMENT_SPREAD:"FRAGMENT_SPREAD",INLINE_FRAGMENT:"INLINE_FRAGMENT",VARIABLE_DEFINITION:"VARIABLE_DEFINITION",SCHEMA:"SCHEMA",SCALAR:"SCALAR",OBJECT:"OBJECT",FIELD_DEFINITION:"FIELD_DEFINITION",ARGUMENT_DEFINITION:"ARGUMENT_DEFINITION",INTERFACE:"INTERFACE",UNION:"UNION",ENUM:"ENUM",ENUM_VALUE:"ENUM_VALUE",INPUT_OBJECT:"INPUT_OBJECT",INPUT_FIELD_DEFINITION:"INPUT_FIELD_DEFINITION"});function dedentBlockStringValue(e){var t=e.split(/\r\n|[\n\r]/g),n=getBlockStringIndentation(e);if(n!==0)for(var r=1;r<t.length;r++)t[r]=t[r].slice(n);for(var o=0;o<t.length&&isBlank(t[o]);)++o;for(var a=t.length;a>o&&isBlank(t[a-1]);)--a;return t.slice(o,a).join(`
`)}function isBlank(e){for(var t=0;t<e.length;++t)if(e[t]!==" "&&e[t]!=="	")return!1;return!0}function getBlockStringIndentation(e){for(var t,n=!0,r=!0,o=0,a=null,s=0;s<e.length;++s)switch(e.charCodeAt(s)){case 13:e.charCodeAt(s+1)===10&&++s;case 10:n=!1,r=!0,o=0;break;case 9:case 32:++o;break;default:r&&!n&&(a===null||o<a)&&(a=o),r=!1}return(t=a)!==null&&t!==void 0?t:0}function printBlockString(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=e.indexOf(`
`)===-1,o=e[0]===" "||e[0]==="	",a=e[e.length-1]==='"',s=e[e.length-1]==="\\",u=!r||a||s||n,l="";return u&&!(r&&o)&&(l+=`
`+t),l+=t?e.replace(/\n/g,`
`+t):e,u&&(l+=`
`),'"""'+l.replace(/"""/g,'\\"""')+'"""'}var Lexer=function(){function e(n){var r=new Token(TokenKind.SOF,0,0,0,0,null);this.source=n,this.lastToken=r,this.token=r,this.line=1,this.lineStart=0}var t=e.prototype;return t.advance=function(){this.lastToken=this.token;var r=this.token=this.lookahead();return r},t.lookahead=function(){var r=this.token;if(r.kind!==TokenKind.EOF)do{var o;r=(o=r.next)!==null&&o!==void 0?o:r.next=readToken(this,r)}while(r.kind===TokenKind.COMMENT);return r},e}();function isPunctuatorTokenKind(e){return e===TokenKind.BANG||e===TokenKind.DOLLAR||e===TokenKind.AMP||e===TokenKind.PAREN_L||e===TokenKind.PAREN_R||e===TokenKind.SPREAD||e===TokenKind.COLON||e===TokenKind.EQUALS||e===TokenKind.AT||e===TokenKind.BRACKET_L||e===TokenKind.BRACKET_R||e===TokenKind.BRACE_L||e===TokenKind.PIPE||e===TokenKind.BRACE_R}function printCharCode(e){return isNaN(e)?TokenKind.EOF:e<127?JSON.stringify(String.fromCharCode(e)):'"\\u'.concat(("00"+e.toString(16).toUpperCase()).slice(-4),'"')}function readToken(e,t){for(var n=e.source,r=n.body,o=r.length,a=t.end;a<o;){var s=r.charCodeAt(a),u=e.line,l=1+a-e.lineStart;switch(s){case 65279:case 9:case 32:case 44:++a;continue;case 10:++a,++e.line,e.lineStart=a;continue;case 13:r.charCodeAt(a+1)===10?a+=2:++a,++e.line,e.lineStart=a;continue;case 33:return new Token(TokenKind.BANG,a,a+1,u,l,t);case 35:return readComment(n,a,u,l,t);case 36:return new Token(TokenKind.DOLLAR,a,a+1,u,l,t);case 38:return new Token(TokenKind.AMP,a,a+1,u,l,t);case 40:return new Token(TokenKind.PAREN_L,a,a+1,u,l,t);case 41:return new Token(TokenKind.PAREN_R,a,a+1,u,l,t);case 46:if(r.charCodeAt(a+1)===46&&r.charCodeAt(a+2)===46)return new Token(TokenKind.SPREAD,a,a+3,u,l,t);break;case 58:return new Token(TokenKind.COLON,a,a+1,u,l,t);case 61:return new Token(TokenKind.EQUALS,a,a+1,u,l,t);case 64:return new Token(TokenKind.AT,a,a+1,u,l,t);case 91:return new Token(TokenKind.BRACKET_L,a,a+1,u,l,t);case 93:return new Token(TokenKind.BRACKET_R,a,a+1,u,l,t);case 123:return new Token(TokenKind.BRACE_L,a,a+1,u,l,t);case 124:return new Token(TokenKind.PIPE,a,a+1,u,l,t);case 125:return new Token(TokenKind.BRACE_R,a,a+1,u,l,t);case 34:return r.charCodeAt(a+1)===34&&r.charCodeAt(a+2)===34?readBlockString(n,a,u,l,t,e):readString(n,a,u,l,t);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return readNumber(n,a,s,u,l,t);case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:case 95:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:return readName(n,a,u,l,t)}throw syntaxError(n,a,unexpectedCharacterMessage(s))}var c=e.line,m=1+a-e.lineStart;return new Token(TokenKind.EOF,o,o,c,m,t)}function unexpectedCharacterMessage(e){return e<32&&e!==9&&e!==10&&e!==13?"Cannot contain the invalid character ".concat(printCharCode(e),"."):e===39?`Unexpected single quote character ('), did you mean to use a double quote (")?`:"Cannot parse the unexpected character ".concat(printCharCode(e),".")}function readComment(e,t,n,r,o){var a=e.body,s,u=t;do s=a.charCodeAt(++u);while(!isNaN(s)&&(s>31||s===9));return new Token(TokenKind.COMMENT,t,u,n,r,o,a.slice(t+1,u))}function readNumber(e,t,n,r,o,a){var s=e.body,u=n,l=t,c=!1;if(u===45&&(u=s.charCodeAt(++l)),u===48){if(u=s.charCodeAt(++l),u>=48&&u<=57)throw syntaxError(e,l,"Invalid number, unexpected digit after 0: ".concat(printCharCode(u),"."))}else l=readDigits(e,l,u),u=s.charCodeAt(l);if(u===46&&(c=!0,u=s.charCodeAt(++l),l=readDigits(e,l,u),u=s.charCodeAt(l)),(u===69||u===101)&&(c=!0,u=s.charCodeAt(++l),(u===43||u===45)&&(u=s.charCodeAt(++l)),l=readDigits(e,l,u),u=s.charCodeAt(l)),u===46||isNameStart(u))throw syntaxError(e,l,"Invalid number, expected digit but got: ".concat(printCharCode(u),"."));return new Token(c?TokenKind.FLOAT:TokenKind.INT,t,l,r,o,a,s.slice(t,l))}function readDigits(e,t,n){var r=e.body,o=t,a=n;if(a>=48&&a<=57){do a=r.charCodeAt(++o);while(a>=48&&a<=57);return o}throw syntaxError(e,o,"Invalid number, expected digit but got: ".concat(printCharCode(a),"."))}function readString(e,t,n,r,o){for(var a=e.body,s=t+1,u=s,l=0,c="";s<a.length&&!isNaN(l=a.charCodeAt(s))&&l!==10&&l!==13;){if(l===34)return c+=a.slice(u,s),new Token(TokenKind.STRING,t,s+1,n,r,o,c);if(l<32&&l!==9)throw syntaxError(e,s,"Invalid character within String: ".concat(printCharCode(l),"."));if(++s,l===92){switch(c+=a.slice(u,s-1),l=a.charCodeAt(s),l){case 34:c+='"';break;case 47:c+="/";break;case 92:c+="\\";break;case 98:c+="\b";break;case 102:c+="\f";break;case 110:c+=`
`;break;case 114:c+="\r";break;case 116:c+="	";break;case 117:{var m=uniCharCode(a.charCodeAt(s+1),a.charCodeAt(s+2),a.charCodeAt(s+3),a.charCodeAt(s+4));if(m<0){var me=a.slice(s+1,s+5);throw syntaxError(e,s,"Invalid character escape sequence: \\u".concat(me,"."))}c+=String.fromCharCode(m),s+=4;break}default:throw syntaxError(e,s,"Invalid character escape sequence: \\".concat(String.fromCharCode(l),"."))}++s,u=s}}throw syntaxError(e,s,"Unterminated string.")}function readBlockString(e,t,n,r,o,a){for(var s=e.body,u=t+3,l=u,c=0,m="";u<s.length&&!isNaN(c=s.charCodeAt(u));){if(c===34&&s.charCodeAt(u+1)===34&&s.charCodeAt(u+2)===34)return m+=s.slice(l,u),new Token(TokenKind.BLOCK_STRING,t,u+3,n,r,o,dedentBlockStringValue(m));if(c<32&&c!==9&&c!==10&&c!==13)throw syntaxError(e,u,"Invalid character within String: ".concat(printCharCode(c),"."));c===10?(++u,++a.line,a.lineStart=u):c===13?(s.charCodeAt(u+1)===10?u+=2:++u,++a.line,a.lineStart=u):c===92&&s.charCodeAt(u+1)===34&&s.charCodeAt(u+2)===34&&s.charCodeAt(u+3)===34?(m+=s.slice(l,u)+'"""',u+=4,l=u):++u}throw syntaxError(e,u,"Unterminated string.")}function uniCharCode(e,t,n,r){return char2hex(e)<<12|char2hex(t)<<8|char2hex(n)<<4|char2hex(r)}function char2hex(e){return e>=48&&e<=57?e-48:e>=65&&e<=70?e-55:e>=97&&e<=102?e-87:-1}function readName(e,t,n,r,o){for(var a=e.body,s=a.length,u=t+1,l=0;u!==s&&!isNaN(l=a.charCodeAt(u))&&(l===95||l>=48&&l<=57||l>=65&&l<=90||l>=97&&l<=122);)++u;return new Token(TokenKind.NAME,t,u,n,r,o,a.slice(t,u))}function isNameStart(e){return e===95||e>=65&&e<=90||e>=97&&e<=122}function parse(e,t){var n=new Parser(e,t);return n.parseDocument()}var Parser=function(){function e(n,r){var o=isSource(n)?n:new Source(n);this._lexer=new Lexer(o),this._options=r}var t=e.prototype;return t.parseName=function(){var r=this.expectToken(TokenKind.NAME);return{kind:Kind.NAME,value:r.value,loc:this.loc(r)}},t.parseDocument=function(){var r=this._lexer.token;return{kind:Kind.DOCUMENT,definitions:this.many(TokenKind.SOF,this.parseDefinition,TokenKind.EOF),loc:this.loc(r)}},t.parseDefinition=function(){if(this.peek(TokenKind.NAME))switch(this._lexer.token.value){case"query":case"mutation":case"subscription":return this.parseOperationDefinition();case"fragment":return this.parseFragmentDefinition();case"schema":case"scalar":case"type":case"interface":case"union":case"enum":case"input":case"directive":return this.parseTypeSystemDefinition();case"extend":return this.parseTypeSystemExtension()}else{if(this.peek(TokenKind.BRACE_L))return this.parseOperationDefinition();if(this.peekDescription())return this.parseTypeSystemDefinition()}throw this.unexpected()},t.parseOperationDefinition=function(){var r=this._lexer.token;if(this.peek(TokenKind.BRACE_L))return{kind:Kind.OPERATION_DEFINITION,operation:"query",name:void 0,variableDefinitions:[],directives:[],selectionSet:this.parseSelectionSet(),loc:this.loc(r)};var o=this.parseOperationType(),a;return this.peek(TokenKind.NAME)&&(a=this.parseName()),{kind:Kind.OPERATION_DEFINITION,operation:o,name:a,variableDefinitions:this.parseVariableDefinitions(),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(r)}},t.parseOperationType=function(){var r=this.expectToken(TokenKind.NAME);switch(r.value){case"query":return"query";case"mutation":return"mutation";case"subscription":return"subscription"}throw this.unexpected(r)},t.parseVariableDefinitions=function(){return this.optionalMany(TokenKind.PAREN_L,this.parseVariableDefinition,TokenKind.PAREN_R)},t.parseVariableDefinition=function(){var r=this._lexer.token;return{kind:Kind.VARIABLE_DEFINITION,variable:this.parseVariable(),type:(this.expectToken(TokenKind.COLON),this.parseTypeReference()),defaultValue:this.expectOptionalToken(TokenKind.EQUALS)?this.parseValueLiteral(!0):void 0,directives:this.parseDirectives(!0),loc:this.loc(r)}},t.parseVariable=function(){var r=this._lexer.token;return this.expectToken(TokenKind.DOLLAR),{kind:Kind.VARIABLE,name:this.parseName(),loc:this.loc(r)}},t.parseSelectionSet=function(){var r=this._lexer.token;return{kind:Kind.SELECTION_SET,selections:this.many(TokenKind.BRACE_L,this.parseSelection,TokenKind.BRACE_R),loc:this.loc(r)}},t.parseSelection=function(){return this.peek(TokenKind.SPREAD)?this.parseFragment():this.parseField()},t.parseField=function(){var r=this._lexer.token,o=this.parseName(),a,s;return this.expectOptionalToken(TokenKind.COLON)?(a=o,s=this.parseName()):s=o,{kind:Kind.FIELD,alias:a,name:s,arguments:this.parseArguments(!1),directives:this.parseDirectives(!1),selectionSet:this.peek(TokenKind.BRACE_L)?this.parseSelectionSet():void 0,loc:this.loc(r)}},t.parseArguments=function(r){var o=r?this.parseConstArgument:this.parseArgument;return this.optionalMany(TokenKind.PAREN_L,o,TokenKind.PAREN_R)},t.parseArgument=function(){var r=this._lexer.token,o=this.parseName();return this.expectToken(TokenKind.COLON),{kind:Kind.ARGUMENT,name:o,value:this.parseValueLiteral(!1),loc:this.loc(r)}},t.parseConstArgument=function(){var r=this._lexer.token;return{kind:Kind.ARGUMENT,name:this.parseName(),value:(this.expectToken(TokenKind.COLON),this.parseValueLiteral(!0)),loc:this.loc(r)}},t.parseFragment=function(){var r=this._lexer.token;this.expectToken(TokenKind.SPREAD);var o=this.expectOptionalKeyword("on");return!o&&this.peek(TokenKind.NAME)?{kind:Kind.FRAGMENT_SPREAD,name:this.parseFragmentName(),directives:this.parseDirectives(!1),loc:this.loc(r)}:{kind:Kind.INLINE_FRAGMENT,typeCondition:o?this.parseNamedType():void 0,directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(r)}},t.parseFragmentDefinition=function(){var r,o=this._lexer.token;return this.expectKeyword("fragment"),((r=this._options)===null||r===void 0?void 0:r.experimentalFragmentVariables)===!0?{kind:Kind.FRAGMENT_DEFINITION,name:this.parseFragmentName(),variableDefinitions:this.parseVariableDefinitions(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(o)}:{kind:Kind.FRAGMENT_DEFINITION,name:this.parseFragmentName(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(o)}},t.parseFragmentName=function(){if(this._lexer.token.value==="on")throw this.unexpected();return this.parseName()},t.parseValueLiteral=function(r){var o=this._lexer.token;switch(o.kind){case TokenKind.BRACKET_L:return this.parseList(r);case TokenKind.BRACE_L:return this.parseObject(r);case TokenKind.INT:return this._lexer.advance(),{kind:Kind.INT,value:o.value,loc:this.loc(o)};case TokenKind.FLOAT:return this._lexer.advance(),{kind:Kind.FLOAT,value:o.value,loc:this.loc(o)};case TokenKind.STRING:case TokenKind.BLOCK_STRING:return this.parseStringLiteral();case TokenKind.NAME:switch(this._lexer.advance(),o.value){case"true":return{kind:Kind.BOOLEAN,value:!0,loc:this.loc(o)};case"false":return{kind:Kind.BOOLEAN,value:!1,loc:this.loc(o)};case"null":return{kind:Kind.NULL,loc:this.loc(o)};default:return{kind:Kind.ENUM,value:o.value,loc:this.loc(o)}}case TokenKind.DOLLAR:if(!r)return this.parseVariable();break}throw this.unexpected()},t.parseStringLiteral=function(){var r=this._lexer.token;return this._lexer.advance(),{kind:Kind.STRING,value:r.value,block:r.kind===TokenKind.BLOCK_STRING,loc:this.loc(r)}},t.parseList=function(r){var o=this,a=this._lexer.token,s=function(){return o.parseValueLiteral(r)};return{kind:Kind.LIST,values:this.any(TokenKind.BRACKET_L,s,TokenKind.BRACKET_R),loc:this.loc(a)}},t.parseObject=function(r){var o=this,a=this._lexer.token,s=function(){return o.parseObjectField(r)};return{kind:Kind.OBJECT,fields:this.any(TokenKind.BRACE_L,s,TokenKind.BRACE_R),loc:this.loc(a)}},t.parseObjectField=function(r){var o=this._lexer.token,a=this.parseName();return this.expectToken(TokenKind.COLON),{kind:Kind.OBJECT_FIELD,name:a,value:this.parseValueLiteral(r),loc:this.loc(o)}},t.parseDirectives=function(r){for(var o=[];this.peek(TokenKind.AT);)o.push(this.parseDirective(r));return o},t.parseDirective=function(r){var o=this._lexer.token;return this.expectToken(TokenKind.AT),{kind:Kind.DIRECTIVE,name:this.parseName(),arguments:this.parseArguments(r),loc:this.loc(o)}},t.parseTypeReference=function(){var r=this._lexer.token,o;return this.expectOptionalToken(TokenKind.BRACKET_L)?(o=this.parseTypeReference(),this.expectToken(TokenKind.BRACKET_R),o={kind:Kind.LIST_TYPE,type:o,loc:this.loc(r)}):o=this.parseNamedType(),this.expectOptionalToken(TokenKind.BANG)?{kind:Kind.NON_NULL_TYPE,type:o,loc:this.loc(r)}:o},t.parseNamedType=function(){var r=this._lexer.token;return{kind:Kind.NAMED_TYPE,name:this.parseName(),loc:this.loc(r)}},t.parseTypeSystemDefinition=function(){var r=this.peekDescription()?this._lexer.lookahead():this._lexer.token;if(r.kind===TokenKind.NAME)switch(r.value){case"schema":return this.parseSchemaDefinition();case"scalar":return this.parseScalarTypeDefinition();case"type":return this.parseObjectTypeDefinition();case"interface":return this.parseInterfaceTypeDefinition();case"union":return this.parseUnionTypeDefinition();case"enum":return this.parseEnumTypeDefinition();case"input":return this.parseInputObjectTypeDefinition();case"directive":return this.parseDirectiveDefinition()}throw this.unexpected(r)},t.peekDescription=function(){return this.peek(TokenKind.STRING)||this.peek(TokenKind.BLOCK_STRING)},t.parseDescription=function(){if(this.peekDescription())return this.parseStringLiteral()},t.parseSchemaDefinition=function(){var r=this._lexer.token,o=this.parseDescription();this.expectKeyword("schema");var a=this.parseDirectives(!0),s=this.many(TokenKind.BRACE_L,this.parseOperationTypeDefinition,TokenKind.BRACE_R);return{kind:Kind.SCHEMA_DEFINITION,description:o,directives:a,operationTypes:s,loc:this.loc(r)}},t.parseOperationTypeDefinition=function(){var r=this._lexer.token,o=this.parseOperationType();this.expectToken(TokenKind.COLON);var a=this.parseNamedType();return{kind:Kind.OPERATION_TYPE_DEFINITION,operation:o,type:a,loc:this.loc(r)}},t.parseScalarTypeDefinition=function(){var r=this._lexer.token,o=this.parseDescription();this.expectKeyword("scalar");var a=this.parseName(),s=this.parseDirectives(!0);return{kind:Kind.SCALAR_TYPE_DEFINITION,description:o,name:a,directives:s,loc:this.loc(r)}},t.parseObjectTypeDefinition=function(){var r=this._lexer.token,o=this.parseDescription();this.expectKeyword("type");var a=this.parseName(),s=this.parseImplementsInterfaces(),u=this.parseDirectives(!0),l=this.parseFieldsDefinition();return{kind:Kind.OBJECT_TYPE_DEFINITION,description:o,name:a,interfaces:s,directives:u,fields:l,loc:this.loc(r)}},t.parseImplementsInterfaces=function(){var r;if(!this.expectOptionalKeyword("implements"))return[];if(((r=this._options)===null||r===void 0?void 0:r.allowLegacySDLImplementsInterfaces)===!0){var o=[];this.expectOptionalToken(TokenKind.AMP);do o.push(this.parseNamedType());while(this.expectOptionalToken(TokenKind.AMP)||this.peek(TokenKind.NAME));return o}return this.delimitedMany(TokenKind.AMP,this.parseNamedType)},t.parseFieldsDefinition=function(){var r;return((r=this._options)===null||r===void 0?void 0:r.allowLegacySDLEmptyFields)===!0&&this.peek(TokenKind.BRACE_L)&&this._lexer.lookahead().kind===TokenKind.BRACE_R?(this._lexer.advance(),this._lexer.advance(),[]):this.optionalMany(TokenKind.BRACE_L,this.parseFieldDefinition,TokenKind.BRACE_R)},t.parseFieldDefinition=function(){var r=this._lexer.token,o=this.parseDescription(),a=this.parseName(),s=this.parseArgumentDefs();this.expectToken(TokenKind.COLON);var u=this.parseTypeReference(),l=this.parseDirectives(!0);return{kind:Kind.FIELD_DEFINITION,description:o,name:a,arguments:s,type:u,directives:l,loc:this.loc(r)}},t.parseArgumentDefs=function(){return this.optionalMany(TokenKind.PAREN_L,this.parseInputValueDef,TokenKind.PAREN_R)},t.parseInputValueDef=function(){var r=this._lexer.token,o=this.parseDescription(),a=this.parseName();this.expectToken(TokenKind.COLON);var s=this.parseTypeReference(),u;this.expectOptionalToken(TokenKind.EQUALS)&&(u=this.parseValueLiteral(!0));var l=this.parseDirectives(!0);return{kind:Kind.INPUT_VALUE_DEFINITION,description:o,name:a,type:s,defaultValue:u,directives:l,loc:this.loc(r)}},t.parseInterfaceTypeDefinition=function(){var r=this._lexer.token,o=this.parseDescription();this.expectKeyword("interface");var a=this.parseName(),s=this.parseImplementsInterfaces(),u=this.parseDirectives(!0),l=this.parseFieldsDefinition();return{kind:Kind.INTERFACE_TYPE_DEFINITION,description:o,name:a,interfaces:s,directives:u,fields:l,loc:this.loc(r)}},t.parseUnionTypeDefinition=function(){var r=this._lexer.token,o=this.parseDescription();this.expectKeyword("union");var a=this.parseName(),s=this.parseDirectives(!0),u=this.parseUnionMemberTypes();return{kind:Kind.UNION_TYPE_DEFINITION,description:o,name:a,directives:s,types:u,loc:this.loc(r)}},t.parseUnionMemberTypes=function(){return this.expectOptionalToken(TokenKind.EQUALS)?this.delimitedMany(TokenKind.PIPE,this.parseNamedType):[]},t.parseEnumTypeDefinition=function(){var r=this._lexer.token,o=this.parseDescription();this.expectKeyword("enum");var a=this.parseName(),s=this.parseDirectives(!0),u=this.parseEnumValuesDefinition();return{kind:Kind.ENUM_TYPE_DEFINITION,description:o,name:a,directives:s,values:u,loc:this.loc(r)}},t.parseEnumValuesDefinition=function(){return this.optionalMany(TokenKind.BRACE_L,this.parseEnumValueDefinition,TokenKind.BRACE_R)},t.parseEnumValueDefinition=function(){var r=this._lexer.token,o=this.parseDescription(),a=this.parseName(),s=this.parseDirectives(!0);return{kind:Kind.ENUM_VALUE_DEFINITION,description:o,name:a,directives:s,loc:this.loc(r)}},t.parseInputObjectTypeDefinition=function(){var r=this._lexer.token,o=this.parseDescription();this.expectKeyword("input");var a=this.parseName(),s=this.parseDirectives(!0),u=this.parseInputFieldsDefinition();return{kind:Kind.INPUT_OBJECT_TYPE_DEFINITION,description:o,name:a,directives:s,fields:u,loc:this.loc(r)}},t.parseInputFieldsDefinition=function(){return this.optionalMany(TokenKind.BRACE_L,this.parseInputValueDef,TokenKind.BRACE_R)},t.parseTypeSystemExtension=function(){var r=this._lexer.lookahead();if(r.kind===TokenKind.NAME)switch(r.value){case"schema":return this.parseSchemaExtension();case"scalar":return this.parseScalarTypeExtension();case"type":return this.parseObjectTypeExtension();case"interface":return this.parseInterfaceTypeExtension();case"union":return this.parseUnionTypeExtension();case"enum":return this.parseEnumTypeExtension();case"input":return this.parseInputObjectTypeExtension()}throw this.unexpected(r)},t.parseSchemaExtension=function(){var r=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("schema");var o=this.parseDirectives(!0),a=this.optionalMany(TokenKind.BRACE_L,this.parseOperationTypeDefinition,TokenKind.BRACE_R);if(o.length===0&&a.length===0)throw this.unexpected();return{kind:Kind.SCHEMA_EXTENSION,directives:o,operationTypes:a,loc:this.loc(r)}},t.parseScalarTypeExtension=function(){var r=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("scalar");var o=this.parseName(),a=this.parseDirectives(!0);if(a.length===0)throw this.unexpected();return{kind:Kind.SCALAR_TYPE_EXTENSION,name:o,directives:a,loc:this.loc(r)}},t.parseObjectTypeExtension=function(){var r=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("type");var o=this.parseName(),a=this.parseImplementsInterfaces(),s=this.parseDirectives(!0),u=this.parseFieldsDefinition();if(a.length===0&&s.length===0&&u.length===0)throw this.unexpected();return{kind:Kind.OBJECT_TYPE_EXTENSION,name:o,interfaces:a,directives:s,fields:u,loc:this.loc(r)}},t.parseInterfaceTypeExtension=function(){var r=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("interface");var o=this.parseName(),a=this.parseImplementsInterfaces(),s=this.parseDirectives(!0),u=this.parseFieldsDefinition();if(a.length===0&&s.length===0&&u.length===0)throw this.unexpected();return{kind:Kind.INTERFACE_TYPE_EXTENSION,name:o,interfaces:a,directives:s,fields:u,loc:this.loc(r)}},t.parseUnionTypeExtension=function(){var r=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("union");var o=this.parseName(),a=this.parseDirectives(!0),s=this.parseUnionMemberTypes();if(a.length===0&&s.length===0)throw this.unexpected();return{kind:Kind.UNION_TYPE_EXTENSION,name:o,directives:a,types:s,loc:this.loc(r)}},t.parseEnumTypeExtension=function(){var r=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("enum");var o=this.parseName(),a=this.parseDirectives(!0),s=this.parseEnumValuesDefinition();if(a.length===0&&s.length===0)throw this.unexpected();return{kind:Kind.ENUM_TYPE_EXTENSION,name:o,directives:a,values:s,loc:this.loc(r)}},t.parseInputObjectTypeExtension=function(){var r=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("input");var o=this.parseName(),a=this.parseDirectives(!0),s=this.parseInputFieldsDefinition();if(a.length===0&&s.length===0)throw this.unexpected();return{kind:Kind.INPUT_OBJECT_TYPE_EXTENSION,name:o,directives:a,fields:s,loc:this.loc(r)}},t.parseDirectiveDefinition=function(){var r=this._lexer.token,o=this.parseDescription();this.expectKeyword("directive"),this.expectToken(TokenKind.AT);var a=this.parseName(),s=this.parseArgumentDefs(),u=this.expectOptionalKeyword("repeatable");this.expectKeyword("on");var l=this.parseDirectiveLocations();return{kind:Kind.DIRECTIVE_DEFINITION,description:o,name:a,arguments:s,repeatable:u,locations:l,loc:this.loc(r)}},t.parseDirectiveLocations=function(){return this.delimitedMany(TokenKind.PIPE,this.parseDirectiveLocation)},t.parseDirectiveLocation=function(){var r=this._lexer.token,o=this.parseName();if(DirectiveLocation[o.value]!==void 0)return o;throw this.unexpected(r)},t.loc=function(r){var o;if(((o=this._options)===null||o===void 0?void 0:o.noLocation)!==!0)return new Location(r,this._lexer.lastToken,this._lexer.source)},t.peek=function(r){return this._lexer.token.kind===r},t.expectToken=function(r){var o=this._lexer.token;if(o.kind===r)return this._lexer.advance(),o;throw syntaxError(this._lexer.source,o.start,"Expected ".concat(getTokenKindDesc(r),", found ").concat(getTokenDesc(o),"."))},t.expectOptionalToken=function(r){var o=this._lexer.token;if(o.kind===r)return this._lexer.advance(),o},t.expectKeyword=function(r){var o=this._lexer.token;if(o.kind===TokenKind.NAME&&o.value===r)this._lexer.advance();else throw syntaxError(this._lexer.source,o.start,'Expected "'.concat(r,'", found ').concat(getTokenDesc(o),"."))},t.expectOptionalKeyword=function(r){var o=this._lexer.token;return o.kind===TokenKind.NAME&&o.value===r?(this._lexer.advance(),!0):!1},t.unexpected=function(r){var o=r!=null?r:this._lexer.token;return syntaxError(this._lexer.source,o.start,"Unexpected ".concat(getTokenDesc(o),"."))},t.any=function(r,o,a){this.expectToken(r);for(var s=[];!this.expectOptionalToken(a);)s.push(o.call(this));return s},t.optionalMany=function(r,o,a){if(this.expectOptionalToken(r)){var s=[];do s.push(o.call(this));while(!this.expectOptionalToken(a));return s}return[]},t.many=function(r,o,a){this.expectToken(r);var s=[];do s.push(o.call(this));while(!this.expectOptionalToken(a));return s},t.delimitedMany=function(r,o){this.expectOptionalToken(r);var a=[];do a.push(o.call(this));while(this.expectOptionalToken(r));return a},e}();function getTokenDesc(e){var t=e.value;return getTokenKindDesc(e.kind)+(t!=null?' "'.concat(t,'"'):"")}function getTokenKindDesc(e){return isPunctuatorTokenKind(e)?'"'.concat(e,'"'):e}var QueryDocumentKeys={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},BREAK=Object.freeze({});function visit(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:QueryDocumentKeys,r=void 0,o=Array.isArray(e),a=[e],s=-1,u=[],l=void 0,c=void 0,m=void 0,me=[],xe=[],Ne=e;do{s++;var He=s===a.length,Ye=He&&u.length!==0;if(He){if(c=xe.length===0?void 0:me[me.length-1],l=m,m=xe.pop(),Ye){if(o)l=l.slice();else{for(var Je={},vn=0,La=Object.keys(l);vn<La.length;vn++){var sr=La[vn];Je[sr]=l[sr]}l=Je}for(var Zr=0,zs=0;zs<u.length;zs++){var za=u[zs][0],Hs=u[zs][1];o&&(za-=Zr),o&&Hs===null?(l.splice(za,1),Zr++):l[za]=Hs}}s=r.index,a=r.keys,u=r.edits,o=r.inArray,r=r.prev}else{if(c=m?o?s:a[s]:void 0,l=m?m[c]:Ne,l==null)continue;m&&me.push(c)}var lc=void 0;if(!Array.isArray(l)){if(!isNode(l))throw new Error("Invalid AST Node: ".concat(inspect(l),"."));var Ty=getVisitFn(t,l.kind,He);if(Ty){if(lc=Ty.call(t,l,c,m,me,xe),lc===BREAK)break;if(lc===!1){if(!He){me.pop();continue}}else if(lc!==void 0&&(u.push([c,lc]),!He))if(isNode(lc))l=lc;else{me.pop();continue}}}if(lc===void 0&&Ye&&u.push([c,l]),He)me.pop();else{var _y;r={inArray:o,index:s,keys:a,edits:u,prev:r},o=Array.isArray(l),a=o?l:(_y=n[l.kind])!==null&&_y!==void 0?_y:[],s=-1,u=[],m&&xe.push(m),m=l}}while(r!==void 0);return u.length!==0&&(Ne=u[u.length-1][1]),Ne}function getVisitFn(e,t,n){var r=e[t];if(r){if(!n&&typeof r=="function")return r;var o=n?r.leave:r.enter;if(typeof o=="function")return o}else{var a=n?e.leave:e.enter;if(a){if(typeof a=="function")return a;var s=a[t];if(typeof s=="function")return s}}}function print(e){return visit(e,{leave:printDocASTReducer})}var MAX_LINE_LENGTH=80,printDocASTReducer={Name:function(t){return t.value},Variable:function(t){return"$"+t.name},Document:function(t){return join(t.definitions,`

`)+`
`},OperationDefinition:function(t){var n=t.operation,r=t.name,o=wrap$1("(",join(t.variableDefinitions,", "),")"),a=join(t.directives," "),s=t.selectionSet;return!r&&!a&&!o&&n==="query"?s:join([n,join([r,o]),a,s]," ")},VariableDefinition:function(t){var n=t.variable,r=t.type,o=t.defaultValue,a=t.directives;return n+": "+r+wrap$1(" = ",o)+wrap$1(" ",join(a," "))},SelectionSet:function(t){var n=t.selections;return block(n)},Field:function(t){var n=t.alias,r=t.name,o=t.arguments,a=t.directives,s=t.selectionSet,u=wrap$1("",n,": ")+r,l=u+wrap$1("(",join(o,", "),")");return l.length>MAX_LINE_LENGTH&&(l=u+wrap$1(`(
`,indent(join(o,`
`)),`
)`)),join([l,join(a," "),s]," ")},Argument:function(t){var n=t.name,r=t.value;return n+": "+r},FragmentSpread:function(t){var n=t.name,r=t.directives;return"..."+n+wrap$1(" ",join(r," "))},InlineFragment:function(t){var n=t.typeCondition,r=t.directives,o=t.selectionSet;return join(["...",wrap$1("on ",n),join(r," "),o]," ")},FragmentDefinition:function(t){var n=t.name,r=t.typeCondition,o=t.variableDefinitions,a=t.directives,s=t.selectionSet;return"fragment ".concat(n).concat(wrap$1("(",join(o,", "),")")," ")+"on ".concat(r," ").concat(wrap$1("",join(a," ")," "))+s},IntValue:function(t){var n=t.value;return n},FloatValue:function(t){var n=t.value;return n},StringValue:function(t,n){var r=t.value,o=t.block;return o?printBlockString(r,n==="description"?"":"  "):JSON.stringify(r)},BooleanValue:function(t){var n=t.value;return n?"true":"false"},NullValue:function(){return"null"},EnumValue:function(t){var n=t.value;return n},ListValue:function(t){var n=t.values;return"["+join(n,", ")+"]"},ObjectValue:function(t){var n=t.fields;return"{"+join(n,", ")+"}"},ObjectField:function(t){var n=t.name,r=t.value;return n+": "+r},Directive:function(t){var n=t.name,r=t.arguments;return"@"+n+wrap$1("(",join(r,", "),")")},NamedType:function(t){var n=t.name;return n},ListType:function(t){var n=t.type;return"["+n+"]"},NonNullType:function(t){var n=t.type;return n+"!"},SchemaDefinition:addDescription(function(e){var t=e.directives,n=e.operationTypes;return join(["schema",join(t," "),block(n)]," ")}),OperationTypeDefinition:function(t){var n=t.operation,r=t.type;return n+": "+r},ScalarTypeDefinition:addDescription(function(e){var t=e.name,n=e.directives;return join(["scalar",t,join(n," ")]," ")}),ObjectTypeDefinition:addDescription(function(e){var t=e.name,n=e.interfaces,r=e.directives,o=e.fields;return join(["type",t,wrap$1("implements ",join(n," & ")),join(r," "),block(o)]," ")}),FieldDefinition:addDescription(function(e){var t=e.name,n=e.arguments,r=e.type,o=e.directives;return t+(hasMultilineItems(n)?wrap$1(`(
`,indent(join(n,`
`)),`
)`):wrap$1("(",join(n,", "),")"))+": "+r+wrap$1(" ",join(o," "))}),InputValueDefinition:addDescription(function(e){var t=e.name,n=e.type,r=e.defaultValue,o=e.directives;return join([t+": "+n,wrap$1("= ",r),join(o," ")]," ")}),InterfaceTypeDefinition:addDescription(function(e){var t=e.name,n=e.interfaces,r=e.directives,o=e.fields;return join(["interface",t,wrap$1("implements ",join(n," & ")),join(r," "),block(o)]," ")}),UnionTypeDefinition:addDescription(function(e){var t=e.name,n=e.directives,r=e.types;return join(["union",t,join(n," "),r&&r.length!==0?"= "+join(r," | "):""]," ")}),EnumTypeDefinition:addDescription(function(e){var t=e.name,n=e.directives,r=e.values;return join(["enum",t,join(n," "),block(r)]," ")}),EnumValueDefinition:addDescription(function(e){var t=e.name,n=e.directives;return join([t,join(n," ")]," ")}),InputObjectTypeDefinition:addDescription(function(e){var t=e.name,n=e.directives,r=e.fields;return join(["input",t,join(n," "),block(r)]," ")}),DirectiveDefinition:addDescription(function(e){var t=e.name,n=e.arguments,r=e.repeatable,o=e.locations;return"directive @"+t+(hasMultilineItems(n)?wrap$1(`(
`,indent(join(n,`
`)),`
)`):wrap$1("(",join(n,", "),")"))+(r?" repeatable":"")+" on "+join(o," | ")}),SchemaExtension:function(t){var n=t.directives,r=t.operationTypes;return join(["extend schema",join(n," "),block(r)]," ")},ScalarTypeExtension:function(t){var n=t.name,r=t.directives;return join(["extend scalar",n,join(r," ")]," ")},ObjectTypeExtension:function(t){var n=t.name,r=t.interfaces,o=t.directives,a=t.fields;return join(["extend type",n,wrap$1("implements ",join(r," & ")),join(o," "),block(a)]," ")},InterfaceTypeExtension:function(t){var n=t.name,r=t.interfaces,o=t.directives,a=t.fields;return join(["extend interface",n,wrap$1("implements ",join(r," & ")),join(o," "),block(a)]," ")},UnionTypeExtension:function(t){var n=t.name,r=t.directives,o=t.types;return join(["extend union",n,join(r," "),o&&o.length!==0?"= "+join(o," | "):""]," ")},EnumTypeExtension:function(t){var n=t.name,r=t.directives,o=t.values;return join(["extend enum",n,join(r," "),block(o)]," ")},InputObjectTypeExtension:function(t){var n=t.name,r=t.directives,o=t.fields;return join(["extend input",n,join(r," "),block(o)]," ")}};function addDescription(e){return function(t){return join([t.description,e(t)],`
`)}}function join(e){var t,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return(t=e==null?void 0:e.filter(function(r){return r}).join(n))!==null&&t!==void 0?t:""}function block(e){return wrap$1(`{
`,indent(join(e,`
`)),`
}`)}function wrap$1(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";return t!=null&&t!==""?e+t+n:""}function indent(e){return wrap$1("  ",e.replace(/\n/g,`
  `))}function isMultiline(e){return e.indexOf(`
`)!==-1}function hasMultilineItems(e){return e!=null&&e.some(isMultiline)}function removeTemporaryGlobals(){return remove()}function checkDEV(){__DEV__?invariant$1(typeof DEV=="boolean",DEV):invariant$1(typeof DEV=="boolean",36)}removeTemporaryGlobals(),checkDEV();var extendStatics=function(e,t){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},extendStatics(e,t)};function __extends(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");extendStatics(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var __assign$1=function(){return __assign$1=Object.assign||function(t){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},__assign$1.apply(this,arguments)};function __rest(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n}function __awaiter(e,t,n,r){function o(a){return a instanceof n?a:new n(function(s){s(a)})}return new(n||(n=Promise))(function(a,s){function u(m){try{c(r.next(m))}catch(me){s(me)}}function l(m){try{c(r.throw(m))}catch(me){s(me)}}function c(m){m.done?a(m.value):o(m.value).then(u,l)}c((r=r.apply(e,t||[])).next())})}function __generator(e,t){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,o,a,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(c){return function(m){return l([c,m])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,o&&(a=c[0]&2?o.return:c[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,c[1])).done)return a;switch(o=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,o=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){n.label=c[1];break}if(c[0]===6&&n.label<a[1]){n.label=a[1],a=c;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(c);break}a[2]&&n.ops.pop(),n.trys.pop();continue}c=t.call(e,n)}catch(m){c=[6,m],o=0}finally{r=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function __spreadArray(e,t,n){if(n||arguments.length===2)for(var r=0,o=t.length,a;r<o;r++)(a||!(r in t))&&(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))}function shouldInclude(e,t){var n=e.directives;return!n||!n.length?!0:getInclusionDirectives(n).every(function(r){var o=r.directive,a=r.ifArgument,s=!1;return a.value.kind==="Variable"?(s=t&&t[a.value.name.value],__DEV__?invariant$1(s!==void 0,"Invalid variable referenced in @".concat(o.name.value," directive.")):invariant$1(s!==void 0,37)):s=a.value.value,o.name.value==="skip"?!s:s})}function getDirectiveNames(e){var t=[];return visit(e,{Directive:function(n){t.push(n.name.value)}}),t}function hasDirectives(e,t){return getDirectiveNames(t).some(function(n){return e.indexOf(n)>-1})}function hasClientExports(e){return e&&hasDirectives(["client"],e)&&hasDirectives(["export"],e)}function isInclusionDirective(e){var t=e.name.value;return t==="skip"||t==="include"}function getInclusionDirectives(e){var t=[];return e&&e.length&&e.forEach(function(n){if(!!isInclusionDirective(n)){var r=n.arguments,o=n.name.value;__DEV__?invariant$1(r&&r.length===1,"Incorrect number of arguments for the @".concat(o," directive.")):invariant$1(r&&r.length===1,38);var a=r[0];__DEV__?invariant$1(a.name&&a.name.value==="if","Invalid argument for the @".concat(o," directive.")):invariant$1(a.name&&a.name.value==="if",39);var s=a.value;__DEV__?invariant$1(s&&(s.kind==="Variable"||s.kind==="BooleanValue"),"Argument for the @".concat(o," directive must be a variable or a boolean value.")):invariant$1(s&&(s.kind==="Variable"||s.kind==="BooleanValue"),40),t.push({directive:n,ifArgument:a})}}),t}function getFragmentQueryDocument(e,t){var n=t,r=[];e.definitions.forEach(function(a){if(a.kind==="OperationDefinition")throw __DEV__?new InvariantError("Found a ".concat(a.operation," operation").concat(a.name?" named '".concat(a.name.value,"'"):"",". ")+"No operations are allowed when using a fragment as a query. Only fragments are allowed."):new InvariantError(41);a.kind==="FragmentDefinition"&&r.push(a)}),typeof n=="undefined"&&(__DEV__?invariant$1(r.length===1,"Found ".concat(r.length," fragments. `fragmentName` must be provided when there is not exactly 1 fragment.")):invariant$1(r.length===1,42),n=r[0].name.value);var o=__assign$1(__assign$1({},e),{definitions:__spreadArray([{kind:"OperationDefinition",operation:"query",selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:n}}]}}],e.definitions,!0)});return o}function createFragmentMap(e){e===void 0&&(e=[]);var t={};return e.forEach(function(n){t[n.name.value]=n}),t}function getFragmentFromSelection(e,t){switch(e.kind){case"InlineFragment":return e;case"FragmentSpread":{var n=t&&t[e.name.value];return __DEV__?invariant$1(n,"No fragment named ".concat(e.name.value,".")):invariant$1(n,43),n}default:return null}}function isNonNullObject(e){return e!==null&&typeof e=="object"}function makeReference(e){return{__ref:String(e)}}function isReference(e){return Boolean(e&&typeof e=="object"&&typeof e.__ref=="string")}function isDocumentNode(e){return isNonNullObject(e)&&e.kind==="Document"&&Array.isArray(e.definitions)}function isStringValue(e){return e.kind==="StringValue"}function isBooleanValue(e){return e.kind==="BooleanValue"}function isIntValue(e){return e.kind==="IntValue"}function isFloatValue(e){return e.kind==="FloatValue"}function isVariable(e){return e.kind==="Variable"}function isObjectValue(e){return e.kind==="ObjectValue"}function isListValue(e){return e.kind==="ListValue"}function isEnumValue(e){return e.kind==="EnumValue"}function isNullValue(e){return e.kind==="NullValue"}function valueToObjectRepresentation(e,t,n,r){if(isIntValue(n)||isFloatValue(n))e[t.value]=Number(n.value);else if(isBooleanValue(n)||isStringValue(n))e[t.value]=n.value;else if(isObjectValue(n)){var o={};n.fields.map(function(s){return valueToObjectRepresentation(o,s.name,s.value,r)}),e[t.value]=o}else if(isVariable(n)){var a=(r||{})[n.name.value];e[t.value]=a}else if(isListValue(n))e[t.value]=n.values.map(function(s){var u={};return valueToObjectRepresentation(u,t,s,r),u[t.value]});else if(isEnumValue(n))e[t.value]=n.value;else if(isNullValue(n))e[t.value]=null;else throw __DEV__?new InvariantError('The inline argument "'.concat(t.value,'" of kind "').concat(n.kind,'"')+"is not supported. Use variables instead of inline arguments to overcome this limitation."):new InvariantError(52)}function storeKeyNameFromField(e,t){var n=null;e.directives&&(n={},e.directives.forEach(function(o){n[o.name.value]={},o.arguments&&o.arguments.forEach(function(a){var s=a.name,u=a.value;return valueToObjectRepresentation(n[o.name.value],s,u,t)})}));var r=null;return e.arguments&&e.arguments.length&&(r={},e.arguments.forEach(function(o){var a=o.name,s=o.value;return valueToObjectRepresentation(r,a,s,t)})),getStoreKeyName(e.name.value,r,n)}var KNOWN_DIRECTIVES=["connection","include","skip","client","rest","export"],getStoreKeyName=Object.assign(function(e,t,n){if(t&&n&&n.connection&&n.connection.key)if(n.connection.filter&&n.connection.filter.length>0){var r=n.connection.filter?n.connection.filter:[];r.sort();var o={};return r.forEach(function(u){o[u]=t[u]}),"".concat(n.connection.key,"(").concat(stringify(o),")")}else return n.connection.key;var a=e;if(t){var s=stringify(t);a+="(".concat(s,")")}return n&&Object.keys(n).forEach(function(u){KNOWN_DIRECTIVES.indexOf(u)===-1&&(n[u]&&Object.keys(n[u]).length?a+="@".concat(u,"(").concat(stringify(n[u]),")"):a+="@".concat(u))}),a},{setStringify:function(e){var t=stringify;return stringify=e,t}}),stringify=function(t){return JSON.stringify(t,stringifyReplacer)};function stringifyReplacer(e,t){return isNonNullObject(t)&&!Array.isArray(t)&&(t=Object.keys(t).sort().reduce(function(n,r){return n[r]=t[r],n},{})),t}function argumentsObjectFromField(e,t){if(e.arguments&&e.arguments.length){var n={};return e.arguments.forEach(function(r){var o=r.name,a=r.value;return valueToObjectRepresentation(n,o,a,t)}),n}return null}function resultKeyNameFromField(e){return e.alias?e.alias.value:e.name.value}function getTypenameFromResult(e,t,n){if(typeof e.__typename=="string")return e.__typename;for(var r=0,o=t.selections;r<o.length;r++){var a=o[r];if(isField(a)){if(a.name.value==="__typename")return e[resultKeyNameFromField(a)]}else{var s=getTypenameFromResult(e,getFragmentFromSelection(a,n).selectionSet,n);if(typeof s=="string")return s}}}function isField(e){return e.kind==="Field"}function isInlineFragment(e){return e.kind==="InlineFragment"}function checkDocument(e){__DEV__?invariant$1(e&&e.kind==="Document",'Expecting a parsed GraphQL document. Perhaps you need to wrap the query string in a "gql" tag? http://docs.apollostack.com/apollo-client/core.html#gql'):invariant$1(e&&e.kind==="Document",44);var t=e.definitions.filter(function(n){return n.kind!=="FragmentDefinition"}).map(function(n){if(n.kind!=="OperationDefinition")throw __DEV__?new InvariantError('Schema type definitions not allowed in queries. Found: "'.concat(n.kind,'"')):new InvariantError(45);return n});return __DEV__?invariant$1(t.length<=1,"Ambiguous GraphQL document: contains ".concat(t.length," operations")):invariant$1(t.length<=1,46),e}function getOperationDefinition(e){return checkDocument(e),e.definitions.filter(function(t){return t.kind==="OperationDefinition"})[0]}function getOperationName(e){return e.definitions.filter(function(t){return t.kind==="OperationDefinition"&&t.name}).map(function(t){return t.name.value})[0]||null}function getFragmentDefinitions(e){return e.definitions.filter(function(t){return t.kind==="FragmentDefinition"})}function getQueryDefinition(e){var t=getOperationDefinition(e);return __DEV__?invariant$1(t&&t.operation==="query","Must contain a query definition."):invariant$1(t&&t.operation==="query",47),t}function getFragmentDefinition(e){__DEV__?invariant$1(e.kind==="Document",'Expecting a parsed GraphQL document. Perhaps you need to wrap the query string in a "gql" tag? http://docs.apollostack.com/apollo-client/core.html#gql'):invariant$1(e.kind==="Document",48),__DEV__?invariant$1(e.definitions.length<=1,"Fragment must have exactly one definition."):invariant$1(e.definitions.length<=1,49);var t=e.definitions[0];return __DEV__?invariant$1(t.kind==="FragmentDefinition","Must be a fragment definition."):invariant$1(t.kind==="FragmentDefinition",50),t}function getMainDefinition(e){checkDocument(e);for(var t,n=0,r=e.definitions;n<r.length;n++){var o=r[n];if(o.kind==="OperationDefinition"){var a=o.operation;if(a==="query"||a==="mutation"||a==="subscription")return o}o.kind==="FragmentDefinition"&&!t&&(t=o)}if(t)return t;throw __DEV__?new InvariantError("Expected a parsed GraphQL query with a query, mutation, subscription, or a fragment."):new InvariantError(51)}function getDefaultValues(e){var t=Object.create(null),n=e&&e.variableDefinitions;return n&&n.length&&n.forEach(function(r){r.defaultValue&&valueToObjectRepresentation(t,r.variable.name,r.defaultValue)}),t}function filterInPlace(e,t,n){var r=0;return e.forEach(function(o,a){t.call(this,o,a,e)&&(e[r++]=o)},n),e.length=r,e}var TYPENAME_FIELD={kind:"Field",name:{kind:"Name",value:"__typename"}};function isEmpty(e,t){return e.selectionSet.selections.every(function(n){return n.kind==="FragmentSpread"&&isEmpty(t[n.name.value],t)})}function nullIfDocIsEmpty(e){return isEmpty(getOperationDefinition(e)||getFragmentDefinition(e),createFragmentMap(getFragmentDefinitions(e)))?null:e}function getDirectiveMatcher(e){return function(n){return e.some(function(r){return r.name&&r.name===n.name.value||r.test&&r.test(n)})}}function removeDirectivesFromDocument(e,t){var n=Object.create(null),r=[],o=Object.create(null),a=[],s=nullIfDocIsEmpty(visit(t,{Variable:{enter:function(u,l,c){c.kind!=="VariableDefinition"&&(n[u.name.value]=!0)}},Field:{enter:function(u){if(e&&u.directives){var l=e.some(function(c){return c.remove});if(l&&u.directives&&u.directives.some(getDirectiveMatcher(e)))return u.arguments&&u.arguments.forEach(function(c){c.value.kind==="Variable"&&r.push({name:c.value.name.value})}),u.selectionSet&&getAllFragmentSpreadsFromSelectionSet(u.selectionSet).forEach(function(c){a.push({name:c.name.value})}),null}}},FragmentSpread:{enter:function(u){o[u.name.value]=!0}},Directive:{enter:function(u){if(getDirectiveMatcher(e)(u))return null}}}));return s&&filterInPlace(r,function(u){return!!u.name&&!n[u.name]}).length&&(s=removeArgumentsFromDocument(r,s)),s&&filterInPlace(a,function(u){return!!u.name&&!o[u.name]}).length&&(s=removeFragmentSpreadFromDocument(a,s)),s}var addTypenameToDocument=Object.assign(function(e){return visit(e,{SelectionSet:{enter:function(t,n,r){if(!(r&&r.kind==="OperationDefinition")){var o=t.selections;if(!!o){var a=o.some(function(u){return isField(u)&&(u.name.value==="__typename"||u.name.value.lastIndexOf("__",0)===0)});if(!a){var s=r;if(!(isField(s)&&s.directives&&s.directives.some(function(u){return u.name.value==="export"})))return __assign$1(__assign$1({},t),{selections:__spreadArray(__spreadArray([],o,!0),[TYPENAME_FIELD],!1)})}}}}}})},{added:function(e){return e===TYPENAME_FIELD}}),connectionRemoveConfig={test:function(e){var t=e.name.value==="connection";return t&&(!e.arguments||!e.arguments.some(function(n){return n.name.value==="key"}))&&__DEV__&&invariant$1.warn("Removing an @connection directive even though it does not have a key. You may want to use the key parameter to specify a store key."),t}};function removeConnectionDirectiveFromDocument(e){return removeDirectivesFromDocument([connectionRemoveConfig],checkDocument(e))}function getArgumentMatcher(e){return function(n){return e.some(function(r){return n.value&&n.value.kind==="Variable"&&n.value.name&&(r.name===n.value.name.value||r.test&&r.test(n))})}}function removeArgumentsFromDocument(e,t){var n=getArgumentMatcher(e);return nullIfDocIsEmpty(visit(t,{OperationDefinition:{enter:function(r){return __assign$1(__assign$1({},r),{variableDefinitions:r.variableDefinitions?r.variableDefinitions.filter(function(o){return!e.some(function(a){return a.name===o.variable.name.value})}):[]})}},Field:{enter:function(r){var o=e.some(function(s){return s.remove});if(o){var a=0;if(r.arguments&&r.arguments.forEach(function(s){n(s)&&(a+=1)}),a===1)return null}}},Argument:{enter:function(r){if(n(r))return null}}}))}function removeFragmentSpreadFromDocument(e,t){function n(r){if(e.some(function(o){return o.name===r.name.value}))return null}return nullIfDocIsEmpty(visit(t,{FragmentSpread:{enter:n},FragmentDefinition:{enter:n}}))}function getAllFragmentSpreadsFromSelectionSet(e){var t=[];return e.selections.forEach(function(n){(isField(n)||isInlineFragment(n))&&n.selectionSet?getAllFragmentSpreadsFromSelectionSet(n.selectionSet).forEach(function(r){return t.push(r)}):n.kind==="FragmentSpread"&&t.push(n)}),t}function buildQueryFromSelectionSet(e){var t=getMainDefinition(e),n=t.operation;if(n==="query")return e;var r=visit(e,{OperationDefinition:{enter:function(o){return __assign$1(__assign$1({},o),{operation:"query"})}}});return r}function removeClientSetsFromDocument(e){checkDocument(e);var t=removeDirectivesFromDocument([{test:function(n){return n.name.value==="client"},remove:!0}],e);return t&&(t=visit(t,{FragmentDefinition:{enter:function(n){if(n.selectionSet){var r=n.selectionSet.selections.every(function(o){return isField(o)&&o.name.value==="__typename"});if(r)return null}}}})),t}var hasOwnProperty$5=Object.prototype.hasOwnProperty;function mergeDeep(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return mergeDeepArray(e)}function mergeDeepArray(e){var t=e[0]||{},n=e.length;if(n>1)for(var r=new DeepMerger,o=1;o<n;++o)t=r.merge(t,e[o]);return t}var defaultReconciler=function(e,t,n){return this.merge(e[n],t[n])},DeepMerger=function(){function e(t){t===void 0&&(t=defaultReconciler),this.reconciler=t,this.isObject=isNonNullObject,this.pastCopies=new Set}return e.prototype.merge=function(t,n){for(var r=this,o=[],a=2;a<arguments.length;a++)o[a-2]=arguments[a];return isNonNullObject(n)&&isNonNullObject(t)?(Object.keys(n).forEach(function(s){if(hasOwnProperty$5.call(t,s)){var u=t[s];if(n[s]!==u){var l=r.reconciler.apply(r,__spreadArray([t,n,s],o,!1));l!==u&&(t=r.shallowCopyForMerge(t),t[s]=l)}}else t=r.shallowCopyForMerge(t),t[s]=n[s]}),t):n},e.prototype.shallowCopyForMerge=function(t){return isNonNullObject(t)&&(this.pastCopies.has(t)||(Array.isArray(t)?t=t.slice(0):t=__assign$1({__proto__:Object.getPrototypeOf(t)},t),this.pastCopies.add(t))),t},e}();function _createForOfIteratorHelperLoose(e,t){var n=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=_unsupportedIterableToArray(e))||t&&e&&typeof e.length=="number"){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray(e,t){if(!!e){if(typeof e=="string")return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(e,t)}}function _arrayLikeToArray(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var hasSymbols=function(){return typeof Symbol=="function"},hasSymbol=function(e){return hasSymbols()&&Boolean(Symbol[e])},getSymbol=function(e){return hasSymbol(e)?Symbol[e]:"@@"+e};hasSymbols()&&!hasSymbol("observable")&&(Symbol.observable=Symbol("observable"));var SymbolIterator=getSymbol("iterator"),SymbolObservable=getSymbol("observable"),SymbolSpecies=getSymbol("species");function getMethod(e,t){var n=e[t];if(n!=null){if(typeof n!="function")throw new TypeError(n+" is not a function");return n}}function getSpecies(e){var t=e.constructor;return t!==void 0&&(t=t[SymbolSpecies],t===null&&(t=void 0)),t!==void 0?t:Observable}function isObservable(e){return e instanceof Observable}function hostReportError(e){hostReportError.log?hostReportError.log(e):setTimeout(function(){throw e})}function enqueue(e){Promise.resolve().then(function(){try{e()}catch(t){hostReportError(t)}})}function cleanupSubscription(e){var t=e._cleanup;if(t!==void 0&&(e._cleanup=void 0,!!t))try{if(typeof t=="function")t();else{var n=getMethod(t,"unsubscribe");n&&n.call(t)}}catch(r){hostReportError(r)}}function closeSubscription(e){e._observer=void 0,e._queue=void 0,e._state="closed"}function flushSubscription(e){var t=e._queue;if(!!t){e._queue=void 0,e._state="ready";for(var n=0;n<t.length&&(notifySubscription(e,t[n].type,t[n].value),e._state!=="closed");++n);}}function notifySubscription(e,t,n){e._state="running";var r=e._observer;try{var o=getMethod(r,t);switch(t){case"next":o&&o.call(r,n);break;case"error":if(closeSubscription(e),o)o.call(r,n);else throw n;break;case"complete":closeSubscription(e),o&&o.call(r);break}}catch(a){hostReportError(a)}e._state==="closed"?cleanupSubscription(e):e._state==="running"&&(e._state="ready")}function onNotify(e,t,n){if(e._state!=="closed"){if(e._state==="buffering"){e._queue.push({type:t,value:n});return}if(e._state!=="ready"){e._state="buffering",e._queue=[{type:t,value:n}],enqueue(function(){return flushSubscription(e)});return}notifySubscription(e,t,n)}}var Subscription=function(){function e(n,r){this._cleanup=void 0,this._observer=n,this._queue=void 0,this._state="initializing";var o=new SubscriptionObserver(this);try{this._cleanup=r.call(void 0,o)}catch(a){o.error(a)}this._state==="initializing"&&(this._state="ready")}var t=e.prototype;return t.unsubscribe=function(){this._state!=="closed"&&(closeSubscription(this),cleanupSubscription(this))},_createClass(e,[{key:"closed",get:function(){return this._state==="closed"}}]),e}(),SubscriptionObserver=function(){function e(n){this._subscription=n}var t=e.prototype;return t.next=function(r){onNotify(this._subscription,"next",r)},t.error=function(r){onNotify(this._subscription,"error",r)},t.complete=function(){onNotify(this._subscription,"complete")},_createClass(e,[{key:"closed",get:function(){return this._subscription._state==="closed"}}]),e}(),Observable=function(){function e(n){if(!(this instanceof e))throw new TypeError("Observable cannot be called as a function");if(typeof n!="function")throw new TypeError("Observable initializer must be a function");this._subscriber=n}var t=e.prototype;return t.subscribe=function(r){return(typeof r!="object"||r===null)&&(r={next:r,error:arguments[1],complete:arguments[2]}),new Subscription(r,this._subscriber)},t.forEach=function(r){var o=this;return new Promise(function(a,s){if(typeof r!="function"){s(new TypeError(r+" is not a function"));return}function u(){l.unsubscribe(),a()}var l=o.subscribe({next:function(c){try{r(c,u)}catch(m){s(m),l.unsubscribe()}},error:s,complete:a})})},t.map=function(r){var o=this;if(typeof r!="function")throw new TypeError(r+" is not a function");var a=getSpecies(this);return new a(function(s){return o.subscribe({next:function(u){try{u=r(u)}catch(l){return s.error(l)}s.next(u)},error:function(u){s.error(u)},complete:function(){s.complete()}})})},t.filter=function(r){var o=this;if(typeof r!="function")throw new TypeError(r+" is not a function");var a=getSpecies(this);return new a(function(s){return o.subscribe({next:function(u){try{if(!r(u))return}catch(l){return s.error(l)}s.next(u)},error:function(u){s.error(u)},complete:function(){s.complete()}})})},t.reduce=function(r){var o=this;if(typeof r!="function")throw new TypeError(r+" is not a function");var a=getSpecies(this),s=arguments.length>1,u=!1,l=arguments[1],c=l;return new a(function(m){return o.subscribe({next:function(me){var xe=!u;if(u=!0,!xe||s)try{c=r(c,me)}catch(Ne){return m.error(Ne)}else c=me},error:function(me){m.error(me)},complete:function(){if(!u&&!s)return m.error(new TypeError("Cannot reduce an empty sequence"));m.next(c),m.complete()}})})},t.concat=function(){for(var r=this,o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];var u=getSpecies(this);return new u(function(l){var c,m=0;function me(xe){c=xe.subscribe({next:function(Ne){l.next(Ne)},error:function(Ne){l.error(Ne)},complete:function(){m===a.length?(c=void 0,l.complete()):me(u.from(a[m++]))}})}return me(r),function(){c&&(c.unsubscribe(),c=void 0)}})},t.flatMap=function(r){var o=this;if(typeof r!="function")throw new TypeError(r+" is not a function");var a=getSpecies(this);return new a(function(s){var u=[],l=o.subscribe({next:function(m){if(r)try{m=r(m)}catch(xe){return s.error(xe)}var me=a.from(m).subscribe({next:function(xe){s.next(xe)},error:function(xe){s.error(xe)},complete:function(){var xe=u.indexOf(me);xe>=0&&u.splice(xe,1),c()}});u.push(me)},error:function(m){s.error(m)},complete:function(){c()}});function c(){l.closed&&u.length===0&&s.complete()}return function(){u.forEach(function(m){return m.unsubscribe()}),l.unsubscribe()}})},t[SymbolObservable]=function(){return this},e.from=function(r){var o=typeof this=="function"?this:e;if(r==null)throw new TypeError(r+" is not an object");var a=getMethod(r,SymbolObservable);if(a){var s=a.call(r);if(Object(s)!==s)throw new TypeError(s+" is not an object");return isObservable(s)&&s.constructor===o?s:new o(function(u){return s.subscribe(u)})}if(hasSymbol("iterator")&&(a=getMethod(r,SymbolIterator),a))return new o(function(u){enqueue(function(){if(!u.closed){for(var l=_createForOfIteratorHelperLoose(a.call(r)),c;!(c=l()).done;){var m=c.value;if(u.next(m),u.closed)return}u.complete()}})});if(Array.isArray(r))return new o(function(u){enqueue(function(){if(!u.closed){for(var l=0;l<r.length;++l)if(u.next(r[l]),u.closed)return;u.complete()}})});throw new TypeError(r+" is not observable")},e.of=function(){for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];var s=typeof this=="function"?this:e;return new s(function(u){enqueue(function(){if(!u.closed){for(var l=0;l<o.length;++l)if(u.next(o[l]),u.closed)return;u.complete()}})})},_createClass(e,null,[{key:SymbolSpecies,get:function(){return this}}]),e}();hasSymbols()&&Object.defineProperty(Observable,Symbol("extensions"),{value:{symbol:SymbolObservable,hostReportError},configurable:!0});var toString$1=Object.prototype.toString;function cloneDeep(e){return cloneDeepHelper(e)}function cloneDeepHelper(e,t){switch(toString$1.call(e)){case"[object Array]":{if(t=t||new Map,t.has(e))return t.get(e);var n=e.slice(0);return t.set(e,n),n.forEach(function(o,a){n[a]=cloneDeepHelper(o,t)}),n}case"[object Object]":{if(t=t||new Map,t.has(e))return t.get(e);var r=Object.create(Object.getPrototypeOf(e));return t.set(e,r),Object.keys(e).forEach(function(o){r[o]=cloneDeepHelper(e[o],t)}),r}default:return e}}function deepFreeze(e){var t=new Set([e]);return t.forEach(function(n){isNonNullObject(n)&&shallowFreeze(n)===n&&Object.getOwnPropertyNames(n).forEach(function(r){isNonNullObject(n[r])&&t.add(n[r])})}),e}function shallowFreeze(e){if(__DEV__&&!Object.isFrozen(e))try{Object.freeze(e)}catch(t){if(t instanceof TypeError)return null;throw t}return e}function maybeDeepFreeze(e){return __DEV__&&deepFreeze(e),e}function iterateObserversSafely(e,t,n){var r=[];e.forEach(function(o){return o[t]&&r.push(o)}),r.forEach(function(o){return o[t](n)})}function asyncMap(e,t,n){return new Observable(function(r){var o=r.next,a=r.error,s=r.complete,u=0,l=!1,c={then:function(Ne){return new Promise(function(He){return He(Ne())})}};function m(Ne,He){return Ne?function(Ye){++u;var Je=function(){return Ne(Ye)};c=c.then(Je,Je).then(function(vn){--u,o&&o.call(r,vn),l&&me.complete()},function(vn){throw--u,vn}).catch(function(vn){a&&a.call(r,vn)})}:function(Ye){return He&&He.call(r,Ye)}}var me={next:m(t,o),error:m(n,a),complete:function(){l=!0,u||s&&s.call(r)}},xe=e.subscribe(me);return function(){return xe.unsubscribe()}})}var canUseWeakMap=typeof WeakMap=="function"&&maybe$1(function(){return navigator.product})!=="ReactNative",canUseWeakSet=typeof WeakSet=="function",canUseSymbol=typeof Symbol=="function"&&typeof Symbol.for=="function";maybe$1(function(){return window.document.createElement}),maybe$1(function(){return navigator.userAgent.indexOf("jsdom")>=0});function fixObservableSubclass(e){function t(n){Object.defineProperty(e,n,{value:Observable})}return canUseSymbol&&Symbol.species&&t(Symbol.species),t("@@species"),e}function isPromiseLike(e){return e&&typeof e.then=="function"}var Concast=function(e){__extends(t,e);function t(n){var r=e.call(this,function(o){return r.addObserver(o),function(){return r.removeObserver(o)}})||this;return r.observers=new Set,r.addCount=0,r.promise=new Promise(function(o,a){r.resolve=o,r.reject=a}),r.handlers={next:function(o){r.sub!==null&&(r.latest=["next",o],iterateObserversSafely(r.observers,"next",o))},error:function(o){var a=r.sub;a!==null&&(a&&setTimeout(function(){return a.unsubscribe()}),r.sub=null,r.latest=["error",o],r.reject(o),iterateObserversSafely(r.observers,"error",o))},complete:function(){var o=r.sub;if(o!==null){var a=r.sources.shift();a?isPromiseLike(a)?a.then(function(s){return r.sub=s.subscribe(r.handlers)}):r.sub=a.subscribe(r.handlers):(o&&setTimeout(function(){return o.unsubscribe()}),r.sub=null,r.latest&&r.latest[0]==="next"?r.resolve(r.latest[1]):r.resolve(),iterateObserversSafely(r.observers,"complete"))}}},r.cancel=function(o){r.reject(o),r.sources=[],r.handlers.complete()},r.promise.catch(function(o){}),typeof n=="function"&&(n=[new Observable(n)]),isPromiseLike(n)?n.then(function(o){return r.start(o)},r.handlers.error):r.start(n),r}return t.prototype.start=function(n){this.sub===void 0&&(this.sources=Array.from(n),this.handlers.complete())},t.prototype.deliverLastMessage=function(n){if(this.latest){var r=this.latest[0],o=n[r];o&&o.call(n,this.latest[1]),this.sub===null&&r==="next"&&n.complete&&n.complete()}},t.prototype.addObserver=function(n){this.observers.has(n)||(this.deliverLastMessage(n),this.observers.add(n),++this.addCount)},t.prototype.removeObserver=function(n,r){this.observers.delete(n)&&--this.addCount<1&&!r&&this.handlers.complete()},t.prototype.cleanup=function(n){var r=this,o=!1,a=function(){o||(o=!0,r.observers.delete(s),n())},s={next:a,error:a,complete:a},u=this.addCount;this.addObserver(s),this.addCount=u},t}(Observable);fixObservableSubclass(Concast);function isNonEmptyArray(e){return Array.isArray(e)&&e.length>0}function graphQLResultHasError(e){return e.errors&&e.errors.length>0||!1}function compact(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Object.create(null);return e.forEach(function(r){!r||Object.keys(r).forEach(function(o){var a=r[o];a!==void 0&&(n[o]=a)})}),n}var prefixCounts=new Map;function makeUniqueId(e){var t=prefixCounts.get(e)||1;return prefixCounts.set(e,t+1),"".concat(e,":").concat(t,":").concat(Math.random().toString(36).slice(2))}function stringifyForDisplay(e){var t=makeUniqueId("stringifyForDisplay");return JSON.stringify(e,function(n,r){return r===void 0?t:r}).split(JSON.stringify(t)).join("<undefined>")}function mergeOptions(e,t){return compact(e,t,t.variables&&{variables:__assign$1(__assign$1({},e&&e.variables),t.variables)})}function fromError(e){return new Observable(function(t){t.error(e)})}function toPromise(e){var t=!1;return new Promise(function(n,r){e.subscribe({next:function(o){t?__DEV__&&invariant$1.warn("Promise Wrapper does not support multiple results from Observable"):(t=!0,n(o))},error:r})})}function fromPromise(e){return new Observable(function(t){e.then(function(n){t.next(n),t.complete()}).catch(t.error.bind(t))})}var throwServerError=function(e,t,n){var r=new Error(n);throw r.name="ServerError",r.response=e,r.statusCode=e.status,r.result=t,r};function validateOperation(e){for(var t=["query","operationName","variables","extensions","context"],n=0,r=Object.keys(e);n<r.length;n++){var o=r[n];if(t.indexOf(o)<0)throw __DEV__?new InvariantError("illegal argument: ".concat(o)):new InvariantError(24)}return e}function createOperation(e,t){var n=__assign$1({},e),r=function(a){typeof a=="function"?n=__assign$1(__assign$1({},n),a(n)):n=__assign$1(__assign$1({},n),a)},o=function(){return __assign$1({},n)};return Object.defineProperty(t,"setContext",{enumerable:!1,value:r}),Object.defineProperty(t,"getContext",{enumerable:!1,value:o}),t}function transformOperation(e){var t={variables:e.variables||{},extensions:e.extensions||{},operationName:e.operationName,query:e.query};return t.operationName||(t.operationName=typeof t.query!="string"?getOperationName(t.query)||void 0:""),t}function passthrough(e,t){return t?t(e):Observable.of()}function toLink(e){return typeof e=="function"?new ApolloLink(e):e}function isTerminating(e){return e.request.length<=1}var LinkError=function(e){__extends(t,e);function t(n,r){var o=e.call(this,n)||this;return o.link=r,o}return t}(Error),ApolloLink=function(){function e(t){t&&(this.request=t)}return e.empty=function(){return new e(function(){return Observable.of()})},e.from=function(t){return t.length===0?e.empty():t.map(toLink).reduce(function(n,r){return n.concat(r)})},e.split=function(t,n,r){var o=toLink(n),a=toLink(r||new e(passthrough));return isTerminating(o)&&isTerminating(a)?new e(function(s){return t(s)?o.request(s)||Observable.of():a.request(s)||Observable.of()}):new e(function(s,u){return t(s)?o.request(s,u)||Observable.of():a.request(s,u)||Observable.of()})},e.execute=function(t,n){return t.request(createOperation(n.context,transformOperation(validateOperation(n))))||Observable.of()},e.concat=function(t,n){var r=toLink(t);if(isTerminating(r))return __DEV__&&invariant$1.warn(new LinkError("You are calling concat on a terminating link, which will have no effect",r)),r;var o=toLink(n);return isTerminating(o)?new e(function(a){return r.request(a,function(s){return o.request(s)||Observable.of()})||Observable.of()}):new e(function(a,s){return r.request(a,function(u){return o.request(u,s)||Observable.of()})||Observable.of()})},e.prototype.split=function(t,n,r){return this.concat(e.split(t,n,r||new e(passthrough)))},e.prototype.concat=function(t){return e.concat(this,t)},e.prototype.request=function(t,n){throw __DEV__?new InvariantError("request is not implemented"):new InvariantError(19)},e.prototype.onError=function(t,n){if(n&&n.error)return n.error(t),!1;throw t},e.prototype.setOnError=function(t){return this.onError=t,this},e}(),empty=ApolloLink.empty,from=ApolloLink.from,split=ApolloLink.split,concat=ApolloLink.concat,execute=ApolloLink.execute,version="3.6.9",hasOwnProperty$4=Object.prototype.hasOwnProperty;function parseAndCheckHttpResponse(e){return function(t){return t.text().then(function(n){try{return JSON.parse(n)}catch(o){var r=o;throw r.name="ServerParseError",r.response=t,r.statusCode=t.status,r.bodyText=n,r}}).then(function(n){return t.status>=300&&throwServerError(t,n,"Response not successful: Received status code ".concat(t.status)),!Array.isArray(n)&&!hasOwnProperty$4.call(n,"data")&&!hasOwnProperty$4.call(n,"errors")&&throwServerError(t,n,"Server response was missing for query '".concat(Array.isArray(e)?e.map(function(r){return r.operationName}):e.operationName,"'.")),n})}}var serializeFetchParameter=function(e,t){var n;try{n=JSON.stringify(e)}catch(o){var r=__DEV__?new InvariantError("Network request failed. ".concat(t," is not serializable: ").concat(o.message)):new InvariantError(21);throw r.parseError=o,r}return n},defaultHttpOptions={includeQuery:!0,includeExtensions:!1},defaultHeaders={accept:"*/*","content-type":"application/json"},defaultOptions={method:"POST"},fallbackHttpConfig={http:defaultHttpOptions,headers:defaultHeaders,options:defaultOptions},defaultPrinter=function(e,t){return t(e)};function selectHttpOptionsAndBody(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return n.unshift(t),selectHttpOptionsAndBodyInternal.apply(void 0,__spreadArray([e,defaultPrinter],n,!1))}function selectHttpOptionsAndBodyInternal(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var o={},a={};n.forEach(function(me){o=__assign$1(__assign$1(__assign$1({},o),me.options),{headers:__assign$1(__assign$1({},o.headers),headersToLowerCase(me.headers))}),me.credentials&&(o.credentials=me.credentials),a=__assign$1(__assign$1({},a),me.http)});var s=e.operationName,u=e.extensions,l=e.variables,c=e.query,m={operationName:s,variables:l};return a.includeExtensions&&(m.extensions=u),a.includeQuery&&(m.query=t(c,print)),{options:o,body:m}}function headersToLowerCase(e){if(e){var t=Object.create(null);return Object.keys(Object(e)).forEach(function(n){t[n.toLowerCase()]=e[n]}),t}return e}var checkFetcher=function(e){if(!e&&typeof fetch=="undefined")throw __DEV__?new InvariantError(`
"fetch" has not been found globally and no fetcher has been configured. To fix this, install a fetch package (like https://www.npmjs.com/package/cross-fetch), instantiate the fetcher, and pass it into your HttpLink constructor. For example:

import fetch from 'cross-fetch';
import { ApolloClient, HttpLink } from '@apollo/client';
const client = new ApolloClient({
  link: new HttpLink({ uri: '/graphql', fetch })
});
    `):new InvariantError(20)},createSignalIfSupported=function(){if(typeof AbortController=="undefined")return{controller:!1,signal:!1};var e=new AbortController,t=e.signal;return{controller:e,signal:t}},selectURI=function(e,t){var n=e.getContext(),r=n.uri;return r||(typeof t=="function"?t(e):t||"/graphql")};function rewriteURIForGET(e,t){var n=[],r=function(me,xe){n.push("".concat(me,"=").concat(encodeURIComponent(xe)))};if("query"in t&&r("query",t.query),t.operationName&&r("operationName",t.operationName),t.variables){var o=void 0;try{o=serializeFetchParameter(t.variables,"Variables map")}catch(me){return{parseError:me}}r("variables",o)}if(t.extensions){var a=void 0;try{a=serializeFetchParameter(t.extensions,"Extensions map")}catch(me){return{parseError:me}}r("extensions",a)}var s="",u=e,l=e.indexOf("#");l!==-1&&(s=e.substr(l),u=e.substr(0,l));var c=u.indexOf("?")===-1?"?":"&",m=u+c+n.join("&")+s;return{newURI:m}}var backupFetch=maybe$1(function(){return fetch}),createHttpLink=function(e){e===void 0&&(e={});var t=e.uri,n=t===void 0?"/graphql":t,r=e.fetch,o=e.print,a=o===void 0?defaultPrinter:o,s=e.includeExtensions,u=e.useGETForQueries,l=e.includeUnusedVariables,c=l===void 0?!1:l,m=__rest(e,["uri","fetch","print","includeExtensions","useGETForQueries","includeUnusedVariables"]);__DEV__&&checkFetcher(r||backupFetch);var me={http:{includeExtensions:s},options:m.fetchOptions,credentials:m.credentials,headers:m.headers};return new ApolloLink(function(xe){var Ne=selectURI(xe,n),He=xe.getContext(),Ye={};if(He.clientAwareness){var Je=He.clientAwareness,vn=Je.name,La=Je.version;vn&&(Ye["apollographql-client-name"]=vn),La&&(Ye["apollographql-client-version"]=La)}var sr=__assign$1(__assign$1({},Ye),He.headers),Zr={http:He.http,options:He.fetchOptions,credentials:He.credentials,headers:sr},zs=selectHttpOptionsAndBodyInternal(xe,a,fallbackHttpConfig,me,Zr),za=zs.options,Hs=zs.body;if(Hs.variables&&!c){var lc=new Set(Object.keys(Hs.variables));visit(xe.query,{Variable:function(Ay,$b,e0){e0&&e0.kind!=="VariableDefinition"&&lc.delete(Ay.name.value)}}),lc.size&&(Hs.variables=__assign$1({},Hs.variables),lc.forEach(function(Ay){delete Hs.variables[Ay]}))}var Ty;if(!za.signal){var _y=createSignalIfSupported(),xy=_y.controller,Bb=_y.signal;Ty=xy,Ty&&(za.signal=Bb)}var Dy=function(Ay){return Ay.kind==="OperationDefinition"&&Ay.operation==="mutation"};if(u&&!xe.query.definitions.some(Dy)&&(za.method="GET"),za.method==="GET"){var Bg=rewriteURIForGET(Ne,Hs),yy=Bg.newURI,wy=Bg.parseError;if(wy)return fromError(wy);Ne=yy}else try{za.body=serializeFetchParameter(Hs,"Payload")}catch(Ay){return fromError(Ay)}return new Observable(function(Ay){var $b=r||maybe$1(function(){return fetch})||backupFetch;return $b(Ne,za).then(function(e0){return xe.setContext({response:e0}),e0}).then(parseAndCheckHttpResponse(xe)).then(function(e0){return Ay.next(e0),Ay.complete(),e0}).catch(function(e0){e0.name!=="AbortError"&&(e0.result&&e0.result.errors&&e0.result.data&&Ay.next(e0.result),Ay.error(e0))}),function(){Ty&&Ty.abort()}})})},HttpLink=function(e){__extends(t,e);function t(n){n===void 0&&(n={});var r=e.call(this,createHttpLink(n).request)||this;return r.options=n,r}return t}(ApolloLink),_a$2=Object.prototype,toString=_a$2.toString,hasOwnProperty$3=_a$2.hasOwnProperty,fnToStr=Function.prototype.toString,previousComparisons=new Map;function equal(e,t){try{return check(e,t)}finally{previousComparisons.clear()}}function check(e,t){if(e===t)return!0;var n=toString.call(e),r=toString.call(t);if(n!==r)return!1;switch(n){case"[object Array]":if(e.length!==t.length)return!1;case"[object Object]":{if(previouslyCompared(e,t))return!0;var o=definedKeys(e),a=definedKeys(t),s=o.length;if(s!==a.length)return!1;for(var u=0;u<s;++u)if(!hasOwnProperty$3.call(t,o[u]))return!1;for(var u=0;u<s;++u){var l=o[u];if(!check(e[l],t[l]))return!1}return!0}case"[object Error]":return e.name===t.name&&e.message===t.message;case"[object Number]":if(e!==e)return t!==t;case"[object Boolean]":case"[object Date]":return+e==+t;case"[object RegExp]":case"[object String]":return e==""+t;case"[object Map]":case"[object Set]":{if(e.size!==t.size)return!1;if(previouslyCompared(e,t))return!0;for(var c=e.entries(),m=n==="[object Map]";;){var me=c.next();if(me.done)break;var xe=me.value,Ne=xe[0],He=xe[1];if(!t.has(Ne)||m&&!check(He,t.get(Ne)))return!1}return!0}case"[object Uint16Array]":case"[object Uint8Array]":case"[object Uint32Array]":case"[object Int32Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object ArrayBuffer]":e=new Uint8Array(e),t=new Uint8Array(t);case"[object DataView]":{var Ye=e.byteLength;if(Ye===t.byteLength)for(;Ye--&&e[Ye]===t[Ye];);return Ye===-1}case"[object AsyncFunction]":case"[object GeneratorFunction]":case"[object AsyncGeneratorFunction]":case"[object Function]":{var Je=fnToStr.call(e);return Je!==fnToStr.call(t)?!1:!endsWith(Je,nativeCodeSuffix)}}return!1}function definedKeys(e){return Object.keys(e).filter(isDefinedKey,e)}function isDefinedKey(e){return this[e]!==void 0}var nativeCodeSuffix="{ [native code] }";function endsWith(e,t){var n=e.length-t.length;return n>=0&&e.indexOf(t,n)===n}function previouslyCompared(e,t){var n=previousComparisons.get(e);if(n){if(n.has(t))return!0}else previousComparisons.set(e,n=new Set);return n.add(t),!1}var defaultMakeData=function(){return Object.create(null)},_a$1=Array.prototype,forEach=_a$1.forEach,slice=_a$1.slice,Trie=function(){function e(t,n){t===void 0&&(t=!0),n===void 0&&(n=defaultMakeData),this.weakness=t,this.makeData=n}return e.prototype.lookup=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return this.lookupArray(t)},e.prototype.lookupArray=function(t){var n=this;return forEach.call(t,function(r){return n=n.getChildTrie(r)}),n.data||(n.data=this.makeData(slice.call(t)))},e.prototype.getChildTrie=function(t){var n=this.weakness&&isObjRef(t)?this.weak||(this.weak=new WeakMap):this.strong||(this.strong=new Map),r=n.get(t);return r||n.set(t,r=new e(this.weakness,this.makeData)),r},e}();function isObjRef(e){switch(typeof e){case"object":if(e===null)break;case"function":return!0}return!1}var currentContext=null,MISSING_VALUE={},idCounter=1,makeSlotClass=function(){return function(){function e(){this.id=["slot",idCounter++,Date.now(),Math.random().toString(36).slice(2)].join(":")}return e.prototype.hasValue=function(){for(var t=currentContext;t;t=t.parent)if(this.id in t.slots){var n=t.slots[this.id];if(n===MISSING_VALUE)break;return t!==currentContext&&(currentContext.slots[this.id]=n),!0}return currentContext&&(currentContext.slots[this.id]=MISSING_VALUE),!1},e.prototype.getValue=function(){if(this.hasValue())return currentContext.slots[this.id]},e.prototype.withValue=function(t,n,r,o){var a,s=(a={__proto__:null},a[this.id]=t,a),u=currentContext;currentContext={parent:u,slots:s};try{return n.apply(o,r)}finally{currentContext=u}},e.bind=function(t){var n=currentContext;return function(){var r=currentContext;try{return currentContext=n,t.apply(this,arguments)}finally{currentContext=r}}},e.noContext=function(t,n,r){if(currentContext){var o=currentContext;try{return currentContext=null,t.apply(r,n)}finally{currentContext=o}}else return t.apply(r,n)},e}()},globalKey="@wry/context:Slot",host=Array,Slot=host[globalKey]||function(){var e=makeSlotClass();try{Object.defineProperty(host,globalKey,{value:host[globalKey]=e,enumerable:!1,writable:!1,configurable:!1})}finally{return e}}();Slot.bind,Slot.noContext;function defaultDispose(){}var Cache$1=function(){function e(t,n){t===void 0&&(t=1/0),n===void 0&&(n=defaultDispose),this.max=t,this.dispose=n,this.map=new Map,this.newest=null,this.oldest=null}return e.prototype.has=function(t){return this.map.has(t)},e.prototype.get=function(t){var n=this.getNode(t);return n&&n.value},e.prototype.getNode=function(t){var n=this.map.get(t);if(n&&n!==this.newest){var r=n.older,o=n.newer;o&&(o.older=r),r&&(r.newer=o),n.older=this.newest,n.older.newer=n,n.newer=null,this.newest=n,n===this.oldest&&(this.oldest=o)}return n},e.prototype.set=function(t,n){var r=this.getNode(t);return r?r.value=n:(r={key:t,value:n,newer:null,older:this.newest},this.newest&&(this.newest.newer=r),this.newest=r,this.oldest=this.oldest||r,this.map.set(t,r),r.value)},e.prototype.clean=function(){for(;this.oldest&&this.map.size>this.max;)this.delete(this.oldest.key)},e.prototype.delete=function(t){var n=this.map.get(t);return n?(n===this.newest&&(this.newest=n.older),n===this.oldest&&(this.oldest=n.newer),n.newer&&(n.newer.older=n.older),n.older&&(n.older.newer=n.newer),this.map.delete(t),this.dispose(n.value,t),!0):!1},e}(),parentEntrySlot=new Slot,_a,hasOwnProperty$2=Object.prototype.hasOwnProperty,toArray=(_a=Array.from,_a===void 0?function(e){var t=[];return e.forEach(function(n){return t.push(n)}),t}:_a);function maybeUnsubscribe(e){var t=e.unsubscribe;typeof t=="function"&&(e.unsubscribe=void 0,t())}var emptySetPool=[],POOL_TARGET_SIZE=100;function assert(e,t){if(!e)throw new Error(t||"assertion failure")}function valueIs(e,t){var n=e.length;return n>0&&n===t.length&&e[n-1]===t[n-1]}function valueGet(e){switch(e.length){case 0:throw new Error("unknown value");case 1:return e[0];case 2:throw e[1]}}function valueCopy(e){return e.slice(0)}var Entry=function(){function e(t){this.fn=t,this.parents=new Set,this.childValues=new Map,this.dirtyChildren=null,this.dirty=!0,this.recomputing=!1,this.value=[],this.deps=null,++e.count}return e.prototype.peek=function(){if(this.value.length===1&&!mightBeDirty(this))return rememberParent(this),this.value[0]},e.prototype.recompute=function(t){return assert(!this.recomputing,"already recomputing"),rememberParent(this),mightBeDirty(this)?reallyRecompute(this,t):valueGet(this.value)},e.prototype.setDirty=function(){this.dirty||(this.dirty=!0,this.value.length=0,reportDirty(this),maybeUnsubscribe(this))},e.prototype.dispose=function(){var t=this;this.setDirty(),forgetChildren(this),eachParent(this,function(n,r){n.setDirty(),forgetChild(n,t)})},e.prototype.forget=function(){this.dispose()},e.prototype.dependOn=function(t){t.add(this),this.deps||(this.deps=emptySetPool.pop()||new Set),this.deps.add(t)},e.prototype.forgetDeps=function(){var t=this;this.deps&&(toArray(this.deps).forEach(function(n){return n.delete(t)}),this.deps.clear(),emptySetPool.push(this.deps),this.deps=null)},e.count=0,e}();function rememberParent(e){var t=parentEntrySlot.getValue();if(t)return e.parents.add(t),t.childValues.has(e)||t.childValues.set(e,[]),mightBeDirty(e)?reportDirtyChild(t,e):reportCleanChild(t,e),t}function reallyRecompute(e,t){return forgetChildren(e),parentEntrySlot.withValue(e,recomputeNewValue,[e,t]),maybeSubscribe(e,t)&&setClean(e),valueGet(e.value)}function recomputeNewValue(e,t){e.recomputing=!0,e.value.length=0;try{e.value[0]=e.fn.apply(null,t)}catch(n){e.value[1]=n}e.recomputing=!1}function mightBeDirty(e){return e.dirty||!!(e.dirtyChildren&&e.dirtyChildren.size)}function setClean(e){e.dirty=!1,!mightBeDirty(e)&&reportClean(e)}function reportDirty(e){eachParent(e,reportDirtyChild)}function reportClean(e){eachParent(e,reportCleanChild)}function eachParent(e,t){var n=e.parents.size;if(n)for(var r=toArray(e.parents),o=0;o<n;++o)t(r[o],e)}function reportDirtyChild(e,t){assert(e.childValues.has(t)),assert(mightBeDirty(t));var n=!mightBeDirty(e);if(!e.dirtyChildren)e.dirtyChildren=emptySetPool.pop()||new Set;else if(e.dirtyChildren.has(t))return;e.dirtyChildren.add(t),n&&reportDirty(e)}function reportCleanChild(e,t){assert(e.childValues.has(t)),assert(!mightBeDirty(t));var n=e.childValues.get(t);n.length===0?e.childValues.set(t,valueCopy(t.value)):valueIs(n,t.value)||e.setDirty(),removeDirtyChild(e,t),!mightBeDirty(e)&&reportClean(e)}function removeDirtyChild(e,t){var n=e.dirtyChildren;n&&(n.delete(t),n.size===0&&(emptySetPool.length<POOL_TARGET_SIZE&&emptySetPool.push(n),e.dirtyChildren=null))}function forgetChildren(e){e.childValues.size>0&&e.childValues.forEach(function(t,n){forgetChild(e,n)}),e.forgetDeps(),assert(e.dirtyChildren===null)}function forgetChild(e,t){t.parents.delete(e),e.childValues.delete(t),removeDirtyChild(e,t)}function maybeSubscribe(e,t){if(typeof e.subscribe=="function")try{maybeUnsubscribe(e),e.unsubscribe=e.subscribe.apply(null,t)}catch{return e.setDirty(),!1}return!0}var EntryMethods={setDirty:!0,dispose:!0,forget:!0};function dep(e){var t=new Map,n=e&&e.subscribe;function r(o){var a=parentEntrySlot.getValue();if(a){var s=t.get(o);s||t.set(o,s=new Set),a.dependOn(s),typeof n=="function"&&(maybeUnsubscribe(s),s.unsubscribe=n(o))}}return r.dirty=function(a,s){var u=t.get(a);if(u){var l=s&&hasOwnProperty$2.call(EntryMethods,s)?s:"setDirty";toArray(u).forEach(function(c){return c[l]()}),t.delete(a),maybeUnsubscribe(u)}},r}function makeDefaultMakeCacheKeyFunction(){var e=new Trie(typeof WeakMap=="function");return function(){return e.lookupArray(arguments)}}makeDefaultMakeCacheKeyFunction();var caches=new Set;function wrap(e,t){t===void 0&&(t=Object.create(null));var n=new Cache$1(t.max||Math.pow(2,16),function(c){return c.dispose()}),r=t.keyArgs,o=t.makeCacheKey||makeDefaultMakeCacheKeyFunction(),a=function(){var c=o.apply(null,r?r.apply(null,arguments):arguments);if(c===void 0)return e.apply(null,arguments);var m=n.get(c);m||(n.set(c,m=new Entry(e)),m.subscribe=t.subscribe,m.forget=function(){return n.delete(c)});var me=m.recompute(Array.prototype.slice.call(arguments));return n.set(c,m),caches.add(n),parentEntrySlot.hasValue()||(caches.forEach(function(xe){return xe.clean()}),caches.clear()),me};Object.defineProperty(a,"size",{get:function(){return n.map.size},configurable:!1,enumerable:!1});function s(c){var m=n.get(c);m&&m.setDirty()}a.dirtyKey=s,a.dirty=function(){s(o.apply(null,arguments))};function u(c){var m=n.get(c);if(m)return m.peek()}a.peekKey=u,a.peek=function(){return u(o.apply(null,arguments))};function l(c){return n.delete(c)}return a.forgetKey=l,a.forget=function(){return l(o.apply(null,arguments))},a.makeCacheKey=o,a.getKey=r?function(){return o.apply(null,r.apply(null,arguments))}:o,Object.freeze(a)}var ApolloCache=function(){function e(){this.getFragmentDoc=wrap(getFragmentQueryDocument)}return e.prototype.batch=function(t){var n=this,r=typeof t.optimistic=="string"?t.optimistic:t.optimistic===!1?null:void 0,o;return this.performTransaction(function(){return o=t.update(n)},r),o},e.prototype.recordOptimisticTransaction=function(t,n){this.performTransaction(t,n)},e.prototype.transformDocument=function(t){return t},e.prototype.identify=function(t){},e.prototype.gc=function(){return[]},e.prototype.modify=function(t){return!1},e.prototype.transformForLink=function(t){return t},e.prototype.readQuery=function(t,n){return n===void 0&&(n=!!t.optimistic),this.read(__assign$1(__assign$1({},t),{rootId:t.id||"ROOT_QUERY",optimistic:n}))},e.prototype.readFragment=function(t,n){return n===void 0&&(n=!!t.optimistic),this.read(__assign$1(__assign$1({},t),{query:this.getFragmentDoc(t.fragment,t.fragmentName),rootId:t.id,optimistic:n}))},e.prototype.writeQuery=function(t){var n=t.id,r=t.data,o=__rest(t,["id","data"]);return this.write(Object.assign(o,{dataId:n||"ROOT_QUERY",result:r}))},e.prototype.writeFragment=function(t){var n=t.id,r=t.data,o=t.fragment,a=t.fragmentName,s=__rest(t,["id","data","fragment","fragmentName"]);return this.write(Object.assign(s,{query:this.getFragmentDoc(o,a),dataId:n,result:r}))},e.prototype.updateQuery=function(t,n){return this.batch({update:function(r){var o=r.readQuery(t),a=n(o);return a==null?o:(r.writeQuery(__assign$1(__assign$1({},t),{data:a})),a)}})},e.prototype.updateFragment=function(t,n){return this.batch({update:function(r){var o=r.readFragment(t),a=n(o);return a==null?o:(r.writeFragment(__assign$1(__assign$1({},t),{data:a})),a)}})},e}(),Cache;(function(e){})(Cache||(Cache={}));var MissingFieldError=function(){function e(t,n,r,o){this.message=t,this.path=n,this.query=r,this.variables=o}return e}(),hasOwn=Object.prototype.hasOwnProperty;function defaultDataIdFromObject(e,t){var n=e.__typename,r=e.id,o=e._id;if(typeof n=="string"&&(t&&(t.keyObject=r!==void 0?{id:r}:o!==void 0?{_id:o}:void 0),r===void 0&&(r=o),r!==void 0))return"".concat(n,":").concat(typeof r=="number"||typeof r=="string"?r:JSON.stringify(r))}var defaultConfig={dataIdFromObject:defaultDataIdFromObject,addTypename:!0,resultCaching:!0,canonizeResults:!1};function normalizeConfig(e){return compact(defaultConfig,e)}function shouldCanonizeResults(e){var t=e.canonizeResults;return t===void 0?defaultConfig.canonizeResults:t}function getTypenameFromStoreObject(e,t){return isReference(t)?e.get(t.__ref,"__typename"):t&&t.__typename}var TypeOrFieldNameRegExp=/^[_a-z][_0-9a-z]*/i;function fieldNameFromStoreName(e){var t=e.match(TypeOrFieldNameRegExp);return t?t[0]:e}function selectionSetMatchesResult(e,t,n){return isNonNullObject(t)?isArray(t)?t.every(function(r){return selectionSetMatchesResult(e,r,n)}):e.selections.every(function(r){if(isField(r)&&shouldInclude(r,n)){var o=resultKeyNameFromField(r);return hasOwn.call(t,o)&&(!r.selectionSet||selectionSetMatchesResult(r.selectionSet,t[o],n))}return!0}):!1}function storeValueIsStoreObject(e){return isNonNullObject(e)&&!isReference(e)&&!isArray(e)}function makeProcessedFieldsMerger(){return new DeepMerger}var isArray=function(e){return Array.isArray(e)},DELETE=Object.create(null),delModifier=function(){return DELETE},INVALIDATE=Object.create(null),EntityStore=function(){function e(t,n){var r=this;this.policies=t,this.group=n,this.data=Object.create(null),this.rootIds=Object.create(null),this.refs=Object.create(null),this.getFieldValue=function(o,a){return maybeDeepFreeze(isReference(o)?r.get(o.__ref,a):o&&o[a])},this.canRead=function(o){return isReference(o)?r.has(o.__ref):typeof o=="object"},this.toReference=function(o,a){if(typeof o=="string")return makeReference(o);if(isReference(o))return o;var s=r.policies.identify(o)[0];if(s){var u=makeReference(s);return a&&r.merge(s,o),u}}}return e.prototype.toObject=function(){return __assign$1({},this.data)},e.prototype.has=function(t){return this.lookup(t,!0)!==void 0},e.prototype.get=function(t,n){if(this.group.depend(t,n),hasOwn.call(this.data,t)){var r=this.data[t];if(r&&hasOwn.call(r,n))return r[n]}if(n==="__typename"&&hasOwn.call(this.policies.rootTypenamesById,t))return this.policies.rootTypenamesById[t];if(this instanceof Layer)return this.parent.get(t,n)},e.prototype.lookup=function(t,n){if(n&&this.group.depend(t,"__exists"),hasOwn.call(this.data,t))return this.data[t];if(this instanceof Layer)return this.parent.lookup(t,n);if(this.policies.rootTypenamesById[t])return Object.create(null)},e.prototype.merge=function(t,n){var r=this,o;isReference(t)&&(t=t.__ref),isReference(n)&&(n=n.__ref);var a=typeof t=="string"?this.lookup(o=t):t,s=typeof n=="string"?this.lookup(o=n):n;if(!!s){__DEV__?invariant$1(typeof o=="string","store.merge expects a string ID"):invariant$1(typeof o=="string",1);var u=new DeepMerger(storeObjectReconciler).merge(a,s);if(this.data[o]=u,u!==a&&(delete this.refs[o],this.group.caching)){var l=Object.create(null);a||(l.__exists=1),Object.keys(s).forEach(function(c){if(!a||a[c]!==u[c]){l[c]=1;var m=fieldNameFromStoreName(c);m!==c&&!r.policies.hasKeyArgs(u.__typename,m)&&(l[m]=1),u[c]===void 0&&!(r instanceof Layer)&&delete u[c]}}),l.__typename&&!(a&&a.__typename)&&this.policies.rootTypenamesById[o]===u.__typename&&delete l.__typename,Object.keys(l).forEach(function(c){return r.group.dirty(o,c)})}}},e.prototype.modify=function(t,n){var r=this,o=this.lookup(t);if(o){var a=Object.create(null),s=!1,u=!0,l={DELETE,INVALIDATE,isReference,toReference:this.toReference,canRead:this.canRead,readField:function(c,m){return r.policies.readField(typeof c=="string"?{fieldName:c,from:m||makeReference(t)}:c,{store:r})}};if(Object.keys(o).forEach(function(c){var m=fieldNameFromStoreName(c),me=o[c];if(me!==void 0){var xe=typeof n=="function"?n:n[c]||n[m];if(xe){var Ne=xe===delModifier?DELETE:xe(maybeDeepFreeze(me),__assign$1(__assign$1({},l),{fieldName:m,storeFieldName:c,storage:r.getStorage(t,c)}));Ne===INVALIDATE?r.group.dirty(t,c):(Ne===DELETE&&(Ne=void 0),Ne!==me&&(a[c]=Ne,s=!0,me=Ne))}me!==void 0&&(u=!1)}}),s)return this.merge(t,a),u&&(this instanceof Layer?this.data[t]=void 0:delete this.data[t],this.group.dirty(t,"__exists")),!0}return!1},e.prototype.delete=function(t,n,r){var o,a=this.lookup(t);if(a){var s=this.getFieldValue(a,"__typename"),u=n&&r?this.policies.getStoreFieldName({typename:s,fieldName:n,args:r}):n;return this.modify(t,u?(o={},o[u]=delModifier,o):delModifier)}return!1},e.prototype.evict=function(t,n){var r=!1;return t.id&&(hasOwn.call(this.data,t.id)&&(r=this.delete(t.id,t.fieldName,t.args)),this instanceof Layer&&this!==n&&(r=this.parent.evict(t,n)||r),(t.fieldName||r)&&this.group.dirty(t.id,t.fieldName||"__exists")),r},e.prototype.clear=function(){this.replace(null)},e.prototype.extract=function(){var t=this,n=this.toObject(),r=[];return this.getRootIdSet().forEach(function(o){hasOwn.call(t.policies.rootTypenamesById,o)||r.push(o)}),r.length&&(n.__META={extraRootIds:r.sort()}),n},e.prototype.replace=function(t){var n=this;if(Object.keys(this.data).forEach(function(a){t&&hasOwn.call(t,a)||n.delete(a)}),t){var r=t.__META,o=__rest(t,["__META"]);Object.keys(o).forEach(function(a){n.merge(a,o[a])}),r&&r.extraRootIds.forEach(this.retain,this)}},e.prototype.retain=function(t){return this.rootIds[t]=(this.rootIds[t]||0)+1},e.prototype.release=function(t){if(this.rootIds[t]>0){var n=--this.rootIds[t];return n||delete this.rootIds[t],n}return 0},e.prototype.getRootIdSet=function(t){return t===void 0&&(t=new Set),Object.keys(this.rootIds).forEach(t.add,t),this instanceof Layer?this.parent.getRootIdSet(t):Object.keys(this.policies.rootTypenamesById).forEach(t.add,t),t},e.prototype.gc=function(){var t=this,n=this.getRootIdSet(),r=this.toObject();n.forEach(function(s){hasOwn.call(r,s)&&(Object.keys(t.findChildRefIds(s)).forEach(n.add,n),delete r[s])});var o=Object.keys(r);if(o.length){for(var a=this;a instanceof Layer;)a=a.parent;o.forEach(function(s){return a.delete(s)})}return o},e.prototype.findChildRefIds=function(t){if(!hasOwn.call(this.refs,t)){var n=this.refs[t]=Object.create(null),r=this.data[t];if(!r)return n;var o=new Set([r]);o.forEach(function(a){isReference(a)&&(n[a.__ref]=!0),isNonNullObject(a)&&Object.keys(a).forEach(function(s){var u=a[s];isNonNullObject(u)&&o.add(u)})})}return this.refs[t]},e.prototype.makeCacheKey=function(){return this.group.keyMaker.lookupArray(arguments)},e}(),CacheGroup=function(){function e(t,n){n===void 0&&(n=null),this.caching=t,this.parent=n,this.d=null,this.resetCaching()}return e.prototype.resetCaching=function(){this.d=this.caching?dep():null,this.keyMaker=new Trie(canUseWeakMap)},e.prototype.depend=function(t,n){if(this.d){this.d(makeDepKey(t,n));var r=fieldNameFromStoreName(n);r!==n&&this.d(makeDepKey(t,r)),this.parent&&this.parent.depend(t,n)}},e.prototype.dirty=function(t,n){this.d&&this.d.dirty(makeDepKey(t,n),n==="__exists"?"forget":"setDirty")},e}();function makeDepKey(e,t){return t+"#"+e}function maybeDependOnExistenceOfEntity(e,t){supportsResultCaching(e)&&e.group.depend(t,"__exists")}(function(e){var t=function(n){__extends(r,n);function r(o){var a=o.policies,s=o.resultCaching,u=s===void 0?!0:s,l=o.seed,c=n.call(this,a,new CacheGroup(u))||this;return c.stump=new Stump(c),c.storageTrie=new Trie(canUseWeakMap),l&&c.replace(l),c}return r.prototype.addLayer=function(o,a){return this.stump.addLayer(o,a)},r.prototype.removeLayer=function(){return this},r.prototype.getStorage=function(){return this.storageTrie.lookupArray(arguments)},r}(e);e.Root=t})(EntityStore||(EntityStore={}));var Layer=function(e){__extends(t,e);function t(n,r,o,a){var s=e.call(this,r.policies,a)||this;return s.id=n,s.parent=r,s.replay=o,s.group=a,o(s),s}return t.prototype.addLayer=function(n,r){return new t(n,this,r,this.group)},t.prototype.removeLayer=function(n){var r=this,o=this.parent.removeLayer(n);return n===this.id?(this.group.caching&&Object.keys(this.data).forEach(function(a){var s=r.data[a],u=o.lookup(a);u?s?s!==u&&Object.keys(s).forEach(function(l){equal(s[l],u[l])||r.group.dirty(a,l)}):(r.group.dirty(a,"__exists"),Object.keys(u).forEach(function(l){r.group.dirty(a,l)})):r.delete(a)}),o):o===this.parent?this:o.addLayer(this.id,this.replay)},t.prototype.toObject=function(){return __assign$1(__assign$1({},this.parent.toObject()),this.data)},t.prototype.findChildRefIds=function(n){var r=this.parent.findChildRefIds(n);return hasOwn.call(this.data,n)?__assign$1(__assign$1({},r),e.prototype.findChildRefIds.call(this,n)):r},t.prototype.getStorage=function(){for(var n=this.parent;n.parent;)n=n.parent;return n.getStorage.apply(n,arguments)},t}(EntityStore),Stump=function(e){__extends(t,e);function t(n){return e.call(this,"EntityStore.Stump",n,function(){},new CacheGroup(n.group.caching,n.group))||this}return t.prototype.removeLayer=function(){return this},t.prototype.merge=function(){return this.parent.merge.apply(this.parent,arguments)},t}(Layer);function storeObjectReconciler(e,t,n){var r=e[n],o=t[n];return equal(r,o)?r:o}function supportsResultCaching(e){return!!(e instanceof EntityStore&&e.group.caching)}function shallowCopy(e){return isNonNullObject(e)?isArray(e)?e.slice(0):__assign$1({__proto__:Object.getPrototypeOf(e)},e):e}var ObjectCanon=function(){function e(){this.known=new(canUseWeakSet?WeakSet:Set),this.pool=new Trie(canUseWeakMap),this.passes=new WeakMap,this.keysByJSON=new Map,this.empty=this.admit({})}return e.prototype.isKnown=function(t){return isNonNullObject(t)&&this.known.has(t)},e.prototype.pass=function(t){if(isNonNullObject(t)){var n=shallowCopy(t);return this.passes.set(n,t),n}return t},e.prototype.admit=function(t){var n=this;if(isNonNullObject(t)){var r=this.passes.get(t);if(r)return r;var o=Object.getPrototypeOf(t);switch(o){case Array.prototype:{if(this.known.has(t))return t;var a=t.map(this.admit,this),s=this.pool.lookupArray(a);return s.array||(this.known.add(s.array=a),__DEV__&&Object.freeze(a)),s.array}case null:case Object.prototype:{if(this.known.has(t))return t;var u=Object.getPrototypeOf(t),l=[u],c=this.sortedKeys(t);l.push(c.json);var m=l.length;c.sorted.forEach(function(Ne){l.push(n.admit(t[Ne]))});var s=this.pool.lookupArray(l);if(!s.object){var me=s.object=Object.create(u);this.known.add(me),c.sorted.forEach(function(Ne,He){me[Ne]=l[m+He]}),__DEV__&&Object.freeze(me)}return s.object}}}return t},e.prototype.sortedKeys=function(t){var n=Object.keys(t),r=this.pool.lookupArray(n);if(!r.keys){n.sort();var o=JSON.stringify(n);(r.keys=this.keysByJSON.get(o))||this.keysByJSON.set(o,r.keys={sorted:n,json:o})}return r.keys},e}(),canonicalStringify=Object.assign(function(e){if(isNonNullObject(e)){stringifyCanon===void 0&&resetCanonicalStringify();var t=stringifyCanon.admit(e),n=stringifyCache.get(t);return n===void 0&&stringifyCache.set(t,n=JSON.stringify(t)),n}return JSON.stringify(e)},{reset:resetCanonicalStringify}),stringifyCanon,stringifyCache;function resetCanonicalStringify(){stringifyCanon=new ObjectCanon,stringifyCache=new(canUseWeakMap?WeakMap:Map)}function execSelectionSetKeyArgs(e){return[e.selectionSet,e.objectOrReference,e.context,e.context.canonizeResults]}var StoreReader=function(){function e(t){var n=this;this.knownResults=new(canUseWeakMap?WeakMap:Map),this.config=compact(t,{addTypename:t.addTypename!==!1,canonizeResults:shouldCanonizeResults(t)}),this.canon=t.canon||new ObjectCanon,this.executeSelectionSet=wrap(function(r){var o,a=r.context.canonizeResults,s=execSelectionSetKeyArgs(r);s[3]=!a;var u=(o=n.executeSelectionSet).peek.apply(o,s);return u?a?__assign$1(__assign$1({},u),{result:n.canon.admit(u.result)}):u:(maybeDependOnExistenceOfEntity(r.context.store,r.enclosingRef.__ref),n.execSelectionSetImpl(r))},{max:this.config.resultCacheMaxSize,keyArgs:execSelectionSetKeyArgs,makeCacheKey:function(r,o,a,s){if(supportsResultCaching(a.store))return a.store.makeCacheKey(r,isReference(o)?o.__ref:o,a.varString,s)}}),this.executeSubSelectedArray=wrap(function(r){return maybeDependOnExistenceOfEntity(r.context.store,r.enclosingRef.__ref),n.execSubSelectedArrayImpl(r)},{max:this.config.resultCacheMaxSize,makeCacheKey:function(r){var o=r.field,a=r.array,s=r.context;if(supportsResultCaching(s.store))return s.store.makeCacheKey(o,a,s.varString)}})}return e.prototype.resetCanon=function(){this.canon=new ObjectCanon},e.prototype.diffQueryAgainstStore=function(t){var n=t.store,r=t.query,o=t.rootId,a=o===void 0?"ROOT_QUERY":o,s=t.variables,u=t.returnPartialData,l=u===void 0?!0:u,c=t.canonizeResults,m=c===void 0?this.config.canonizeResults:c,me=this.config.cache.policies;s=__assign$1(__assign$1({},getDefaultValues(getQueryDefinition(r))),s);var xe=makeReference(a),Ne=this.executeSelectionSet({selectionSet:getMainDefinition(r).selectionSet,objectOrReference:xe,enclosingRef:xe,context:{store:n,query:r,policies:me,variables:s,varString:canonicalStringify(s),canonizeResults:m,fragmentMap:createFragmentMap(getFragmentDefinitions(r))}}),He;if(Ne.missing&&(He=[new MissingFieldError(firstMissing(Ne.missing),Ne.missing,r,s)],!l))throw He[0];return{result:Ne.result,complete:!He,missing:He}},e.prototype.isFresh=function(t,n,r,o){if(supportsResultCaching(o.store)&&this.knownResults.get(t)===r){var a=this.executeSelectionSet.peek(r,n,o,this.canon.isKnown(t));if(a&&t===a.result)return!0}return!1},e.prototype.execSelectionSetImpl=function(t){var n=this,r=t.selectionSet,o=t.objectOrReference,a=t.enclosingRef,s=t.context;if(isReference(o)&&!s.policies.rootTypenamesById[o.__ref]&&!s.store.has(o.__ref))return{result:this.canon.empty,missing:"Dangling reference to missing ".concat(o.__ref," object")};var u=s.variables,l=s.policies,c=s.store,m=c.getFieldValue(o,"__typename"),me=[],xe,Ne=new DeepMerger;this.config.addTypename&&typeof m=="string"&&!l.rootIdsByTypename[m]&&me.push({__typename:m});function He(sr,Zr){var zs;return sr.missing&&(xe=Ne.merge(xe,(zs={},zs[Zr]=sr.missing,zs))),sr.result}var Ye=new Set(r.selections);Ye.forEach(function(sr){var Zr,zs;if(!!shouldInclude(sr,u))if(isField(sr)){var za=l.readField({fieldName:sr.name.value,field:sr,variables:s.variables,from:o},s),Hs=resultKeyNameFromField(sr);za===void 0?addTypenameToDocument.added(sr)||(xe=Ne.merge(xe,(Zr={},Zr[Hs]="Can't find field '".concat(sr.name.value,"' on ").concat(isReference(o)?o.__ref+" object":"object "+JSON.stringify(o,null,2)),Zr))):isArray(za)?za=He(n.executeSubSelectedArray({field:sr,array:za,enclosingRef:a,context:s}),Hs):sr.selectionSet?za!=null&&(za=He(n.executeSelectionSet({selectionSet:sr.selectionSet,objectOrReference:za,enclosingRef:isReference(za)?za:a,context:s}),Hs)):s.canonizeResults&&(za=n.canon.pass(za)),za!==void 0&&me.push((zs={},zs[Hs]=za,zs))}else{var lc=getFragmentFromSelection(sr,s.fragmentMap);lc&&l.fragmentMatches(lc,m)&&lc.selectionSet.selections.forEach(Ye.add,Ye)}});var Je=mergeDeepArray(me),vn={result:Je,missing:xe},La=s.canonizeResults?this.canon.admit(vn):maybeDeepFreeze(vn);return La.result&&this.knownResults.set(La.result,r),La},e.prototype.execSubSelectedArrayImpl=function(t){var n=this,r=t.field,o=t.array,a=t.enclosingRef,s=t.context,u,l=new DeepMerger;function c(m,me){var xe;return m.missing&&(u=l.merge(u,(xe={},xe[me]=m.missing,xe))),m.result}return r.selectionSet&&(o=o.filter(s.store.canRead)),o=o.map(function(m,me){return m===null?null:isArray(m)?c(n.executeSubSelectedArray({field:r,array:m,enclosingRef:a,context:s}),me):r.selectionSet?c(n.executeSelectionSet({selectionSet:r.selectionSet,objectOrReference:m,enclosingRef:isReference(m)?m:a,context:s}),me):(__DEV__&&assertSelectionSetForIdValue(s.store,r,m),m)}),{result:s.canonizeResults?this.canon.admit(o):o,missing:u}},e}();function firstMissing(e){try{JSON.stringify(e,function(t,n){if(typeof n=="string")throw n;return n})}catch(t){return t}}function assertSelectionSetForIdValue(e,t,n){if(!t.selectionSet){var r=new Set([n]);r.forEach(function(o){isNonNullObject(o)&&(__DEV__?invariant$1(!isReference(o),"Missing selection set for object of type ".concat(getTypenameFromStoreObject(e,o)," returned for query field ").concat(t.name.value)):invariant$1(!isReference(o),5),Object.values(o).forEach(r.add,r))})}}var cacheSlot=new Slot,cacheInfoMap=new WeakMap;function getCacheInfo(e){var t=cacheInfoMap.get(e);return t||cacheInfoMap.set(e,t={vars:new Set,dep:dep()}),t}function forgetCache(e){getCacheInfo(e).vars.forEach(function(t){return t.forgetCache(e)})}function recallCache(e){getCacheInfo(e).vars.forEach(function(t){return t.attachCache(e)})}function makeVar(e){var t=new Set,n=new Set,r=function(a){if(arguments.length>0){if(e!==a){e=a,t.forEach(function(l){getCacheInfo(l).dep.dirty(r),broadcast(l)});var s=Array.from(n);n.clear(),s.forEach(function(l){return l(e)})}}else{var u=cacheSlot.getValue();u&&(o(u),getCacheInfo(u).dep(r))}return e};r.onNextChange=function(a){return n.add(a),function(){n.delete(a)}};var o=r.attachCache=function(a){return t.add(a),getCacheInfo(a).vars.add(r),r};return r.forgetCache=function(a){return t.delete(a)},r}function broadcast(e){e.broadcastWatches&&e.broadcastWatches()}var specifierInfoCache=Object.create(null);function lookupSpecifierInfo(e){var t=JSON.stringify(e);return specifierInfoCache[t]||(specifierInfoCache[t]=Object.create(null))}function keyFieldsFnFromSpecifier(e){var t=lookupSpecifierInfo(e);return t.keyFieldsFn||(t.keyFieldsFn=function(n,r){var o=function(s,u){return r.readField(u,s)},a=r.keyObject=collectSpecifierPaths(e,function(s){var u=extractKeyPath(r.storeObject,s,o);return u===void 0&&n!==r.storeObject&&hasOwn.call(n,s[0])&&(u=extractKeyPath(n,s,extractKey)),__DEV__?invariant$1(u!==void 0,"Missing field '".concat(s.join("."),"' while extracting keyFields from ").concat(JSON.stringify(n))):invariant$1(u!==void 0,2),u});return"".concat(r.typename,":").concat(JSON.stringify(a))})}function keyArgsFnFromSpecifier(e){var t=lookupSpecifierInfo(e);return t.keyArgsFn||(t.keyArgsFn=function(n,r){var o=r.field,a=r.variables,s=r.fieldName,u=collectSpecifierPaths(e,function(c){var m=c[0],me=m.charAt(0);if(me==="@"){if(o&&isNonEmptyArray(o.directives)){var xe=m.slice(1),Ne=o.directives.find(function(vn){return vn.name.value===xe}),He=Ne&&argumentsObjectFromField(Ne,a);return He&&extractKeyPath(He,c.slice(1))}return}if(me==="$"){var Ye=m.slice(1);if(a&&hasOwn.call(a,Ye)){var Je=c.slice(0);return Je[0]=Ye,extractKeyPath(a,Je)}return}if(n)return extractKeyPath(n,c)}),l=JSON.stringify(u);return(n||l!=="{}")&&(s+=":"+l),s})}function collectSpecifierPaths(e,t){var n=new DeepMerger;return getSpecifierPaths(e).reduce(function(r,o){var a,s=t(o);if(s!==void 0){for(var u=o.length-1;u>=0;--u)s=(a={},a[o[u]]=s,a);r=n.merge(r,s)}return r},Object.create(null))}function getSpecifierPaths(e){var t=lookupSpecifierInfo(e);if(!t.paths){var n=t.paths=[],r=[];e.forEach(function(o,a){isArray(o)?(getSpecifierPaths(o).forEach(function(s){return n.push(r.concat(s))}),r.length=0):(r.push(o),isArray(e[a+1])||(n.push(r.slice(0)),r.length=0))})}return t.paths}function extractKey(e,t){return e[t]}function extractKeyPath(e,t,n){return n=n||extractKey,normalize$1(t.reduce(function r(o,a){return isArray(o)?o.map(function(s){return r(s,a)}):o&&n(o,a)},e))}function normalize$1(e){return isNonNullObject(e)?isArray(e)?e.map(normalize$1):collectSpecifierPaths(Object.keys(e).sort(),function(t){return extractKeyPath(e,t)}):e}getStoreKeyName.setStringify(canonicalStringify);function argsFromFieldSpecifier(e){return e.args!==void 0?e.args:e.field?argumentsObjectFromField(e.field,e.variables):null}var nullKeyFieldsFn=function(){},simpleKeyArgsFn=function(e,t){return t.fieldName},mergeTrueFn=function(e,t,n){var r=n.mergeObjects;return r(e,t)},mergeFalseFn=function(e,t){return t},Policies=function(){function e(t){this.config=t,this.typePolicies=Object.create(null),this.toBeAdded=Object.create(null),this.supertypeMap=new Map,this.fuzzySubtypes=new Map,this.rootIdsByTypename=Object.create(null),this.rootTypenamesById=Object.create(null),this.usingPossibleTypes=!1,this.config=__assign$1({dataIdFromObject:defaultDataIdFromObject},t),this.cache=this.config.cache,this.setRootTypename("Query"),this.setRootTypename("Mutation"),this.setRootTypename("Subscription"),t.possibleTypes&&this.addPossibleTypes(t.possibleTypes),t.typePolicies&&this.addTypePolicies(t.typePolicies)}return e.prototype.identify=function(t,n){var r,o=this,a=n&&(n.typename||((r=n.storeObject)===null||r===void 0?void 0:r.__typename))||t.__typename;if(a===this.rootTypenamesById.ROOT_QUERY)return["ROOT_QUERY"];for(var s=n&&n.storeObject||t,u=__assign$1(__assign$1({},n),{typename:a,storeObject:s,readField:n&&n.readField||function(){var xe=normalizeReadFieldOptions(arguments,s);return o.readField(xe,{store:o.cache.data,variables:xe.variables})}}),l,c=a&&this.getTypePolicy(a),m=c&&c.keyFn||this.config.dataIdFromObject;m;){var me=m(t,u);if(isArray(me))m=keyFieldsFnFromSpecifier(me);else{l=me;break}}return l=l?String(l):void 0,u.keyObject?[l,u.keyObject]:[l]},e.prototype.addTypePolicies=function(t){var n=this;Object.keys(t).forEach(function(r){var o=t[r],a=o.queryType,s=o.mutationType,u=o.subscriptionType,l=__rest(o,["queryType","mutationType","subscriptionType"]);a&&n.setRootTypename("Query",r),s&&n.setRootTypename("Mutation",r),u&&n.setRootTypename("Subscription",r),hasOwn.call(n.toBeAdded,r)?n.toBeAdded[r].push(l):n.toBeAdded[r]=[l]})},e.prototype.updateTypePolicy=function(t,n){var r=this,o=this.getTypePolicy(t),a=n.keyFields,s=n.fields;function u(l,c){l.merge=typeof c=="function"?c:c===!0?mergeTrueFn:c===!1?mergeFalseFn:l.merge}u(o,n.merge),o.keyFn=a===!1?nullKeyFieldsFn:isArray(a)?keyFieldsFnFromSpecifier(a):typeof a=="function"?a:o.keyFn,s&&Object.keys(s).forEach(function(l){var c=r.getFieldPolicy(t,l,!0),m=s[l];if(typeof m=="function")c.read=m;else{var me=m.keyArgs,xe=m.read,Ne=m.merge;c.keyFn=me===!1?simpleKeyArgsFn:isArray(me)?keyArgsFnFromSpecifier(me):typeof me=="function"?me:c.keyFn,typeof xe=="function"&&(c.read=xe),u(c,Ne)}c.read&&c.merge&&(c.keyFn=c.keyFn||simpleKeyArgsFn)})},e.prototype.setRootTypename=function(t,n){n===void 0&&(n=t);var r="ROOT_"+t.toUpperCase(),o=this.rootTypenamesById[r];n!==o&&(__DEV__?invariant$1(!o||o===t,"Cannot change root ".concat(t," __typename more than once")):invariant$1(!o||o===t,3),o&&delete this.rootIdsByTypename[o],this.rootIdsByTypename[n]=r,this.rootTypenamesById[r]=n)},e.prototype.addPossibleTypes=function(t){var n=this;this.usingPossibleTypes=!0,Object.keys(t).forEach(function(r){n.getSupertypeSet(r,!0),t[r].forEach(function(o){n.getSupertypeSet(o,!0).add(r);var a=o.match(TypeOrFieldNameRegExp);(!a||a[0]!==o)&&n.fuzzySubtypes.set(o,new RegExp(o))})})},e.prototype.getTypePolicy=function(t){var n=this;if(!hasOwn.call(this.typePolicies,t)){var r=this.typePolicies[t]=Object.create(null);r.fields=Object.create(null);var o=this.supertypeMap.get(t);o&&o.size&&o.forEach(function(s){var u=n.getTypePolicy(s),l=u.fields,c=__rest(u,["fields"]);Object.assign(r,c),Object.assign(r.fields,l)})}var a=this.toBeAdded[t];return a&&a.length&&a.splice(0).forEach(function(s){n.updateTypePolicy(t,s)}),this.typePolicies[t]},e.prototype.getFieldPolicy=function(t,n,r){if(t){var o=this.getTypePolicy(t).fields;return o[n]||r&&(o[n]=Object.create(null))}},e.prototype.getSupertypeSet=function(t,n){var r=this.supertypeMap.get(t);return!r&&n&&this.supertypeMap.set(t,r=new Set),r},e.prototype.fragmentMatches=function(t,n,r,o){var a=this;if(!t.typeCondition)return!0;if(!n)return!1;var s=t.typeCondition.name.value;if(n===s)return!0;if(this.usingPossibleTypes&&this.supertypeMap.has(s))for(var u=this.getSupertypeSet(n,!0),l=[u],c=function(He){var Ye=a.getSupertypeSet(He,!1);Ye&&Ye.size&&l.indexOf(Ye)<0&&l.push(Ye)},m=!!(r&&this.fuzzySubtypes.size),me=!1,xe=0;xe<l.length;++xe){var Ne=l[xe];if(Ne.has(s))return u.has(s)||(me&&__DEV__&&invariant$1.warn("Inferring subtype ".concat(n," of supertype ").concat(s)),u.add(s)),!0;Ne.forEach(c),m&&xe===l.length-1&&selectionSetMatchesResult(t.selectionSet,r,o)&&(m=!1,me=!0,this.fuzzySubtypes.forEach(function(He,Ye){var Je=n.match(He);Je&&Je[0]===n&&c(Ye)}))}return!1},e.prototype.hasKeyArgs=function(t,n){var r=this.getFieldPolicy(t,n,!1);return!!(r&&r.keyFn)},e.prototype.getStoreFieldName=function(t){var n=t.typename,r=t.fieldName,o=this.getFieldPolicy(n,r,!1),a,s=o&&o.keyFn;if(s&&n)for(var u={typename:n,fieldName:r,field:t.field||null,variables:t.variables},l=argsFromFieldSpecifier(t);s;){var c=s(l,u);if(isArray(c))s=keyArgsFnFromSpecifier(c);else{a=c||r;break}}return a===void 0&&(a=t.field?storeKeyNameFromField(t.field,t.variables):getStoreKeyName(r,argsFromFieldSpecifier(t))),a===!1?r:r===fieldNameFromStoreName(a)?a:r+":"+a},e.prototype.readField=function(t,n){var r=t.from;if(!!r){var o=t.field||t.fieldName;if(!!o){if(t.typename===void 0){var a=n.store.getFieldValue(r,"__typename");a&&(t.typename=a)}var s=this.getStoreFieldName(t),u=fieldNameFromStoreName(s),l=n.store.getFieldValue(r,s),c=this.getFieldPolicy(t.typename,u,!1),m=c&&c.read;if(m){var me=makeFieldFunctionOptions(this,r,t,n,n.store.getStorage(isReference(r)?r.__ref:r,s));return cacheSlot.withValue(this.cache,m,[l,me])}return l}}},e.prototype.getReadFunction=function(t,n){var r=this.getFieldPolicy(t,n,!1);return r&&r.read},e.prototype.getMergeFunction=function(t,n,r){var o=this.getFieldPolicy(t,n,!1),a=o&&o.merge;return!a&&r&&(o=this.getTypePolicy(r),a=o&&o.merge),a},e.prototype.runMergeFunction=function(t,n,r,o,a){var s=r.field,u=r.typename,l=r.merge;return l===mergeTrueFn?makeMergeObjectsFunction(o.store)(t,n):l===mergeFalseFn?n:(o.overwrite&&(t=void 0),l(t,n,makeFieldFunctionOptions(this,void 0,{typename:u,fieldName:s.name.value,field:s,variables:o.variables},o,a||Object.create(null))))},e}();function makeFieldFunctionOptions(e,t,n,r,o){var a=e.getStoreFieldName(n),s=fieldNameFromStoreName(a),u=n.variables||r.variables,l=r.store,c=l.toReference,m=l.canRead;return{args:argsFromFieldSpecifier(n),field:n.field||null,fieldName:s,storeFieldName:a,variables:u,isReference,toReference:c,storage:o,cache:e.cache,canRead:m,readField:function(){return e.readField(normalizeReadFieldOptions(arguments,t,u),r)},mergeObjects:makeMergeObjectsFunction(r.store)}}function normalizeReadFieldOptions(e,t,n){var r=e[0],o=e[1],a=e.length,s;return typeof r=="string"?s={fieldName:r,from:a>1?o:t}:(s=__assign$1({},r),hasOwn.call(s,"from")||(s.from=t)),__DEV__&&s.from===void 0&&__DEV__&&invariant$1.warn("Undefined 'from' passed to readField with arguments ".concat(stringifyForDisplay(Array.from(e)))),s.variables===void 0&&(s.variables=n),s}function makeMergeObjectsFunction(e){return function(n,r){if(isArray(n)||isArray(r))throw __DEV__?new InvariantError("Cannot automatically merge arrays"):new InvariantError(4);if(isNonNullObject(n)&&isNonNullObject(r)){var o=e.getFieldValue(n,"__typename"),a=e.getFieldValue(r,"__typename"),s=o&&a&&o!==a;if(s)return r;if(isReference(n)&&storeValueIsStoreObject(r))return e.merge(n.__ref,r),n;if(storeValueIsStoreObject(n)&&isReference(r))return e.merge(n,r.__ref),r;if(storeValueIsStoreObject(n)&&storeValueIsStoreObject(r))return __assign$1(__assign$1({},n),r)}return r}}function getContextFlavor(e,t,n){var r="".concat(t).concat(n),o=e.flavors.get(r);return o||e.flavors.set(r,o=e.clientOnly===t&&e.deferred===n?e:__assign$1(__assign$1({},e),{clientOnly:t,deferred:n})),o}var StoreWriter=function(){function e(t,n){this.cache=t,this.reader=n}return e.prototype.writeToStore=function(t,n){var r=this,o=n.query,a=n.result,s=n.dataId,u=n.variables,l=n.overwrite,c=getOperationDefinition(o),m=makeProcessedFieldsMerger();u=__assign$1(__assign$1({},getDefaultValues(c)),u);var me={store:t,written:Object.create(null),merge:function(Ne,He){return m.merge(Ne,He)},variables:u,varString:canonicalStringify(u),fragmentMap:createFragmentMap(getFragmentDefinitions(o)),overwrite:!!l,incomingById:new Map,clientOnly:!1,deferred:!1,flavors:new Map},xe=this.processSelectionSet({result:a||Object.create(null),dataId:s,selectionSet:c.selectionSet,mergeTree:{map:new Map},context:me});if(!isReference(xe))throw __DEV__?new InvariantError("Could not identify object ".concat(JSON.stringify(a))):new InvariantError(6);return me.incomingById.forEach(function(Ne,He){var Ye=Ne.storeObject,Je=Ne.mergeTree,vn=Ne.fieldNodeSet,La=makeReference(He);if(Je&&Je.map.size){var sr=r.applyMerges(Je,La,Ye,me);if(isReference(sr))return;Ye=sr}if(__DEV__&&!me.overwrite){var Zr=Object.create(null);vn.forEach(function(Hs){Hs.selectionSet&&(Zr[Hs.name.value]=!0)});var zs=function(Hs){return Zr[fieldNameFromStoreName(Hs)]===!0},za=function(Hs){var lc=Je&&Je.map.get(Hs);return Boolean(lc&&lc.info&&lc.info.merge)};Object.keys(Ye).forEach(function(Hs){zs(Hs)&&!za(Hs)&&warnAboutDataLoss(La,Ye,Hs,me.store)})}t.merge(He,Ye)}),t.retain(xe.__ref),xe},e.prototype.processSelectionSet=function(t){var n=this,r=t.dataId,o=t.result,a=t.selectionSet,s=t.context,u=t.mergeTree,l=this.cache.policies,c=Object.create(null),m=r&&l.rootTypenamesById[r]||getTypenameFromResult(o,a,s.fragmentMap)||r&&s.store.get(r,"__typename");typeof m=="string"&&(c.__typename=m);var me=function(){var sr=normalizeReadFieldOptions(arguments,c,s.variables);if(isReference(sr.from)){var Zr=s.incomingById.get(sr.from.__ref);if(Zr){var zs=l.readField(__assign$1(__assign$1({},sr),{from:Zr.storeObject}),s);if(zs!==void 0)return zs}}return l.readField(sr,s)},xe=new Set;this.flattenFields(a,o,s,m).forEach(function(sr,Zr){var zs,za=resultKeyNameFromField(Zr),Hs=o[za];if(xe.add(Zr),Hs!==void 0){var lc=l.getStoreFieldName({typename:m,fieldName:Zr.name.value,field:Zr,variables:sr.variables}),Ty=getChildMergeTree(u,lc),_y=n.processFieldValue(Hs,Zr,Zr.selectionSet?getContextFlavor(sr,!1,!1):sr,Ty),xy=void 0;Zr.selectionSet&&(isReference(_y)||storeValueIsStoreObject(_y))&&(xy=me("__typename",_y));var Bb=l.getMergeFunction(m,Zr.name.value,xy);Bb?Ty.info={field:Zr,typename:m,merge:Bb}:maybeRecycleChildMergeTree(u,lc),c=sr.merge(c,(zs={},zs[lc]=_y,zs))}else __DEV__&&!sr.clientOnly&&!sr.deferred&&!addTypenameToDocument.added(Zr)&&!l.getReadFunction(m,Zr.name.value)&&__DEV__&&invariant$1.error("Missing field '".concat(resultKeyNameFromField(Zr),"' while writing result ").concat(JSON.stringify(o,null,2)).substring(0,1e3))});try{var Ne=l.identify(o,{typename:m,selectionSet:a,fragmentMap:s.fragmentMap,storeObject:c,readField:me}),He=Ne[0],Ye=Ne[1];r=r||He,Ye&&(c=s.merge(c,Ye))}catch(sr){if(!r)throw sr}if(typeof r=="string"){var Je=makeReference(r),vn=s.written[r]||(s.written[r]=[]);if(vn.indexOf(a)>=0||(vn.push(a),this.reader&&this.reader.isFresh(o,Je,a,s)))return Je;var La=s.incomingById.get(r);return La?(La.storeObject=s.merge(La.storeObject,c),La.mergeTree=mergeMergeTrees(La.mergeTree,u),xe.forEach(function(sr){return La.fieldNodeSet.add(sr)})):s.incomingById.set(r,{storeObject:c,mergeTree:mergeTreeIsEmpty(u)?void 0:u,fieldNodeSet:xe}),Je}return c},e.prototype.processFieldValue=function(t,n,r,o){var a=this;return!n.selectionSet||t===null?__DEV__?cloneDeep(t):t:isArray(t)?t.map(function(s,u){var l=a.processFieldValue(s,n,r,getChildMergeTree(o,u));return maybeRecycleChildMergeTree(o,u),l}):this.processSelectionSet({result:t,selectionSet:n.selectionSet,context:r,mergeTree:o})},e.prototype.flattenFields=function(t,n,r,o){o===void 0&&(o=getTypenameFromResult(n,t,r.fragmentMap));var a=new Map,s=this.cache.policies,u=new Trie(!1);return function l(c,m){var me=u.lookup(c,m.clientOnly,m.deferred);me.visited||(me.visited=!0,c.selections.forEach(function(xe){if(!!shouldInclude(xe,r.variables)){var Ne=m.clientOnly,He=m.deferred;if(!(Ne&&He)&&isNonEmptyArray(xe.directives)&&xe.directives.forEach(function(vn){var La=vn.name.value;if(La==="client"&&(Ne=!0),La==="defer"){var sr=argumentsObjectFromField(vn,r.variables);(!sr||sr.if!==!1)&&(He=!0)}}),isField(xe)){var Ye=a.get(xe);Ye&&(Ne=Ne&&Ye.clientOnly,He=He&&Ye.deferred),a.set(xe,getContextFlavor(r,Ne,He))}else{var Je=getFragmentFromSelection(xe,r.fragmentMap);Je&&s.fragmentMatches(Je,o,n,r.variables)&&l(Je.selectionSet,getContextFlavor(r,Ne,He))}}}))}(t,r),a},e.prototype.applyMerges=function(t,n,r,o,a){var s,u=this;if(t.map.size&&!isReference(r)){var l=!isArray(r)&&(isReference(n)||storeValueIsStoreObject(n))?n:void 0,c=r;l&&!a&&(a=[isReference(l)?l.__ref:l]);var m,me=function(xe,Ne){return isArray(xe)?typeof Ne=="number"?xe[Ne]:void 0:o.store.getFieldValue(xe,String(Ne))};t.map.forEach(function(xe,Ne){var He=me(l,Ne),Ye=me(c,Ne);if(Ye!==void 0){a&&a.push(Ne);var Je=u.applyMerges(xe,He,Ye,o,a);Je!==Ye&&(m=m||new Map,m.set(Ne,Je)),a&&invariant$1(a.pop()===Ne)}}),m&&(r=isArray(c)?c.slice(0):__assign$1({},c),m.forEach(function(xe,Ne){r[Ne]=xe}))}return t.info?this.cache.policies.runMergeFunction(n,r,t.info,o,a&&(s=o.store).getStorage.apply(s,a)):r},e}(),emptyMergeTreePool=[];function getChildMergeTree(e,t){var n=e.map;return n.has(t)||n.set(t,emptyMergeTreePool.pop()||{map:new Map}),n.get(t)}function mergeMergeTrees(e,t){if(e===t||!t||mergeTreeIsEmpty(t))return e;if(!e||mergeTreeIsEmpty(e))return t;var n=e.info&&t.info?__assign$1(__assign$1({},e.info),t.info):e.info||t.info,r=e.map.size&&t.map.size,o=r?new Map:e.map.size?e.map:t.map,a={info:n,map:o};if(r){var s=new Set(t.map.keys());e.map.forEach(function(u,l){a.map.set(l,mergeMergeTrees(u,t.map.get(l))),s.delete(l)}),s.forEach(function(u){a.map.set(u,mergeMergeTrees(t.map.get(u),e.map.get(u)))})}return a}function mergeTreeIsEmpty(e){return!e||!(e.info||e.map.size)}function maybeRecycleChildMergeTree(e,t){var n=e.map,r=n.get(t);r&&mergeTreeIsEmpty(r)&&(emptyMergeTreePool.push(r),n.delete(t))}var warnings=new Set;function warnAboutDataLoss(e,t,n,r){var o=function(me){var xe=r.getFieldValue(me,n);return typeof xe=="object"&&xe},a=o(e);if(!!a){var s=o(t);if(!!s&&!isReference(a)&&!equal(a,s)&&!Object.keys(a).every(function(me){return r.getFieldValue(s,me)!==void 0})){var u=r.getFieldValue(e,"__typename")||r.getFieldValue(t,"__typename"),l=fieldNameFromStoreName(n),c="".concat(u,".").concat(l);if(!warnings.has(c)){warnings.add(c);var m=[];!isArray(a)&&!isArray(s)&&[a,s].forEach(function(me){var xe=r.getFieldValue(me,"__typename");typeof xe=="string"&&!m.includes(xe)&&m.push(xe)}),__DEV__&&invariant$1.warn("Cache data may be lost when replacing the ".concat(l," field of a ").concat(u,` object.

To address this problem (which is not a bug in Apollo Client), `).concat(m.length?"either ensure all objects of type "+m.join(" and ")+" have an ID or a custom merge function, or ":"","define a custom merge function for the ").concat(c,` field, so InMemoryCache can safely merge these objects:

  existing: `).concat(JSON.stringify(a).slice(0,1e3),`
  incoming: `).concat(JSON.stringify(s).slice(0,1e3),`

For more information about these options, please refer to the documentation:

  * Ensuring entity objects have IDs: https://go.apollo.dev/c/generating-unique-identifiers
  * Defining custom merge functions: https://go.apollo.dev/c/merging-non-normalized-objects
`))}}}}var InMemoryCache=function(e){__extends(t,e);function t(n){n===void 0&&(n={});var r=e.call(this)||this;return r.watches=new Set,r.typenameDocumentCache=new Map,r.makeVar=makeVar,r.txCount=0,r.config=normalizeConfig(n),r.addTypename=!!r.config.addTypename,r.policies=new Policies({cache:r,dataIdFromObject:r.config.dataIdFromObject,possibleTypes:r.config.possibleTypes,typePolicies:r.config.typePolicies}),r.init(),r}return t.prototype.init=function(){var n=this.data=new EntityStore.Root({policies:this.policies,resultCaching:this.config.resultCaching});this.optimisticData=n.stump,this.resetResultCache()},t.prototype.resetResultCache=function(n){var r=this,o=this.storeReader;this.storeWriter=new StoreWriter(this,this.storeReader=new StoreReader({cache:this,addTypename:this.addTypename,resultCacheMaxSize:this.config.resultCacheMaxSize,canonizeResults:shouldCanonizeResults(this.config),canon:n?void 0:o&&o.canon})),this.maybeBroadcastWatch=wrap(function(a,s){return r.broadcastWatch(a,s)},{max:this.config.resultCacheMaxSize,makeCacheKey:function(a){var s=a.optimistic?r.optimisticData:r.data;if(supportsResultCaching(s)){var u=a.optimistic,l=a.rootId,c=a.variables;return s.makeCacheKey(a.query,a.callback,canonicalStringify({optimistic:u,rootId:l,variables:c}))}}}),new Set([this.data.group,this.optimisticData.group]).forEach(function(a){return a.resetCaching()})},t.prototype.restore=function(n){return this.init(),n&&this.data.replace(n),this},t.prototype.extract=function(n){return n===void 0&&(n=!1),(n?this.optimisticData:this.data).extract()},t.prototype.read=function(n){var r=n.returnPartialData,o=r===void 0?!1:r;try{return this.storeReader.diffQueryAgainstStore(__assign$1(__assign$1({},n),{store:n.optimistic?this.optimisticData:this.data,config:this.config,returnPartialData:o})).result||null}catch(a){if(a instanceof MissingFieldError)return null;throw a}},t.prototype.write=function(n){try{return++this.txCount,this.storeWriter.writeToStore(this.data,n)}finally{!--this.txCount&&n.broadcast!==!1&&this.broadcastWatches()}},t.prototype.modify=function(n){if(hasOwn.call(n,"id")&&!n.id)return!1;var r=n.optimistic?this.optimisticData:this.data;try{return++this.txCount,r.modify(n.id||"ROOT_QUERY",n.fields)}finally{!--this.txCount&&n.broadcast!==!1&&this.broadcastWatches()}},t.prototype.diff=function(n){return this.storeReader.diffQueryAgainstStore(__assign$1(__assign$1({},n),{store:n.optimistic?this.optimisticData:this.data,rootId:n.id||"ROOT_QUERY",config:this.config}))},t.prototype.watch=function(n){var r=this;return this.watches.size||recallCache(this),this.watches.add(n),n.immediate&&this.maybeBroadcastWatch(n),function(){r.watches.delete(n)&&!r.watches.size&&forgetCache(r),r.maybeBroadcastWatch.forget(n)}},t.prototype.gc=function(n){canonicalStringify.reset();var r=this.optimisticData.gc();return n&&!this.txCount&&(n.resetResultCache?this.resetResultCache(n.resetResultIdentities):n.resetResultIdentities&&this.storeReader.resetCanon()),r},t.prototype.retain=function(n,r){return(r?this.optimisticData:this.data).retain(n)},t.prototype.release=function(n,r){return(r?this.optimisticData:this.data).release(n)},t.prototype.identify=function(n){if(isReference(n))return n.__ref;try{return this.policies.identify(n)[0]}catch(r){__DEV__&&invariant$1.warn(r)}},t.prototype.evict=function(n){if(!n.id){if(hasOwn.call(n,"id"))return!1;n=__assign$1(__assign$1({},n),{id:"ROOT_QUERY"})}try{return++this.txCount,this.optimisticData.evict(n,this.data)}finally{!--this.txCount&&n.broadcast!==!1&&this.broadcastWatches()}},t.prototype.reset=function(n){var r=this;return this.init(),canonicalStringify.reset(),n&&n.discardWatches?(this.watches.forEach(function(o){return r.maybeBroadcastWatch.forget(o)}),this.watches.clear(),forgetCache(this)):this.broadcastWatches(),Promise.resolve()},t.prototype.removeOptimistic=function(n){var r=this.optimisticData.removeLayer(n);r!==this.optimisticData&&(this.optimisticData=r,this.broadcastWatches())},t.prototype.batch=function(n){var r=this,o=n.update,a=n.optimistic,s=a===void 0?!0:a,u=n.removeOptimistic,l=n.onWatchUpdated,c,m=function(xe){var Ne=r,He=Ne.data,Ye=Ne.optimisticData;++r.txCount,xe&&(r.data=r.optimisticData=xe);try{return c=o(r)}finally{--r.txCount,r.data=He,r.optimisticData=Ye}},me=new Set;return l&&!this.txCount&&this.broadcastWatches(__assign$1(__assign$1({},n),{onWatchUpdated:function(xe){return me.add(xe),!1}})),typeof s=="string"?this.optimisticData=this.optimisticData.addLayer(s,m):s===!1?m(this.data):m(),typeof u=="string"&&(this.optimisticData=this.optimisticData.removeLayer(u)),l&&me.size?(this.broadcastWatches(__assign$1(__assign$1({},n),{onWatchUpdated:function(xe,Ne){var He=l.call(this,xe,Ne);return He!==!1&&me.delete(xe),He}})),me.size&&me.forEach(function(xe){return r.maybeBroadcastWatch.dirty(xe)})):this.broadcastWatches(n),c},t.prototype.performTransaction=function(n,r){return this.batch({update:n,optimistic:r||r!==null})},t.prototype.transformDocument=function(n){if(this.addTypename){var r=this.typenameDocumentCache.get(n);return r||(r=addTypenameToDocument(n),this.typenameDocumentCache.set(n,r),this.typenameDocumentCache.set(r,r)),r}return n},t.prototype.broadcastWatches=function(n){var r=this;this.txCount||this.watches.forEach(function(o){return r.maybeBroadcastWatch(o,n)})},t.prototype.broadcastWatch=function(n,r){var o=n.lastDiff,a=this.diff(n);r&&(n.optimistic&&typeof r.optimistic=="string"&&(a.fromOptimisticTransaction=!0),r.onWatchUpdated&&r.onWatchUpdated.call(this,n,a,o)===!1)||(!o||!equal(o.result,a.result))&&n.callback(n.lastDiff=a,o)},t}(ApolloCache);function isApolloError(e){return e.hasOwnProperty("graphQLErrors")}var generateErrorMessage=function(e){var t="";if(isNonEmptyArray(e.graphQLErrors)||isNonEmptyArray(e.clientErrors)){var n=(e.graphQLErrors||[]).concat(e.clientErrors||[]);n.forEach(function(r){var o=r?r.message:"Error message not found.";t+="".concat(o,`
`)})}return e.networkError&&(t+="".concat(e.networkError.message,`
`)),t=t.replace(/\n$/,""),t},ApolloError=function(e){__extends(t,e);function t(n){var r=n.graphQLErrors,o=n.clientErrors,a=n.networkError,s=n.errorMessage,u=n.extraInfo,l=e.call(this,s)||this;return l.graphQLErrors=r||[],l.clientErrors=o||[],l.networkError=a||null,l.message=s||generateErrorMessage(l),l.extraInfo=u,l.__proto__=t.prototype,l}return t}(Error),NetworkStatus;(function(e){e[e.loading=1]="loading",e[e.setVariables=2]="setVariables",e[e.fetchMore=3]="fetchMore",e[e.refetch=4]="refetch",e[e.poll=6]="poll",e[e.ready=7]="ready",e[e.error=8]="error"})(NetworkStatus||(NetworkStatus={}));function isNetworkRequestInFlight(e){return e?e<7:!1}var assign=Object.assign,hasOwnProperty$1=Object.hasOwnProperty,ObservableQuery=function(e){__extends(t,e);function t(n){var r=n.queryManager,o=n.queryInfo,a=n.options,s=e.call(this,function(Je){try{var vn=Je._subscription._observer;vn&&!vn.error&&(vn.error=defaultSubscriptionObserverErrorCallback)}catch{}var La=!s.observers.size;s.observers.add(Je);var sr=s.last;return sr&&sr.error?Je.error&&Je.error(sr.error):sr&&sr.result&&Je.next&&Je.next(sr.result),La&&s.reobserve().catch(function(){}),function(){s.observers.delete(Je)&&!s.observers.size&&s.tearDownQuery()}})||this;s.observers=new Set,s.subscriptions=new Set,s.queryInfo=o,s.queryManager=r,s.isTornDown=!1;var u=r.defaultOptions.watchQuery,l=u===void 0?{}:u,c=l.fetchPolicy,m=c===void 0?"cache-first":c,me=a.fetchPolicy,xe=me===void 0?m:me,Ne=a.initialFetchPolicy,He=Ne===void 0?xe==="standby"?m:xe:Ne;s.options=__assign$1(__assign$1({},a),{initialFetchPolicy:He,fetchPolicy:xe}),s.queryId=o.queryId||r.generateQueryId();var Ye=getOperationDefinition(s.query);return s.queryName=Ye&&Ye.name&&Ye.name.value,s}return Object.defineProperty(t.prototype,"query",{get:function(){return this.queryManager.transform(this.options.query).document},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"variables",{get:function(){return this.options.variables},enumerable:!1,configurable:!0}),t.prototype.result=function(){var n=this;return new Promise(function(r,o){var a={next:function(u){r(u),n.observers.delete(a),n.observers.size||n.queryManager.removeQuery(n.queryId),setTimeout(function(){s.unsubscribe()},0)},error:o},s=n.subscribe(a)})},t.prototype.getCurrentResult=function(n){n===void 0&&(n=!0);var r=this.getLastResult(!0),o=this.queryInfo.networkStatus||r&&r.networkStatus||NetworkStatus.ready,a=__assign$1(__assign$1({},r),{loading:isNetworkRequestInFlight(o),networkStatus:o}),s=this.options.fetchPolicy,u=s===void 0?"cache-first":s;if(!(u==="network-only"||u==="no-cache"||u==="standby"||this.queryManager.transform(this.options.query).hasForcedResolvers)){var l=this.queryInfo.getDiff();(l.complete||this.options.returnPartialData)&&(a.data=l.result),equal(a.data,{})&&(a.data=void 0),l.complete?(delete a.partial,l.complete&&a.networkStatus===NetworkStatus.loading&&(u==="cache-first"||u==="cache-only")&&(a.networkStatus=NetworkStatus.ready,a.loading=!1)):a.partial=!0,__DEV__&&!l.complete&&!this.options.partialRefetch&&!a.loading&&!a.data&&!a.error&&logMissingFieldErrors(l.missing)}return n&&this.updateLastResult(a),a},t.prototype.isDifferentFromLastResult=function(n){return!this.last||!equal(this.last.result,n)},t.prototype.getLast=function(n,r){var o=this.last;if(o&&o[n]&&(!r||equal(o.variables,this.variables)))return o[n]},t.prototype.getLastResult=function(n){return this.getLast("result",n)},t.prototype.getLastError=function(n){return this.getLast("error",n)},t.prototype.resetLastResults=function(){delete this.last,this.isTornDown=!1},t.prototype.resetQueryStoreErrors=function(){this.queryManager.resetErrors(this.queryId)},t.prototype.refetch=function(n){var r,o={pollInterval:0},a=this.options.fetchPolicy;if(a==="cache-and-network"?o.fetchPolicy=a:a==="no-cache"?o.fetchPolicy="no-cache":o.fetchPolicy="network-only",__DEV__&&n&&hasOwnProperty$1.call(n,"variables")){var s=getQueryDefinition(this.query),u=s.variableDefinitions;(!u||!u.some(function(l){return l.variable.name.value==="variables"}))&&__DEV__&&invariant$1.warn("Called refetch(".concat(JSON.stringify(n),") for query ").concat(((r=s.name)===null||r===void 0?void 0:r.value)||JSON.stringify(s),`, which does not declare a $variables variable.
Did you mean to call refetch(variables) instead of refetch({ variables })?`))}return n&&!equal(this.options.variables,n)&&(o.variables=this.options.variables=__assign$1(__assign$1({},this.options.variables),n)),this.queryInfo.resetLastWrite(),this.reobserve(o,NetworkStatus.refetch)},t.prototype.fetchMore=function(n){var r=this,o=__assign$1(__assign$1({},n.query?n:__assign$1(__assign$1(__assign$1(__assign$1({},this.options),{query:this.query}),n),{variables:__assign$1(__assign$1({},this.options.variables),n.variables)})),{fetchPolicy:"no-cache"}),a=this.queryManager.generateQueryId(),s=this.queryInfo,u=s.networkStatus;s.networkStatus=NetworkStatus.fetchMore,o.notifyOnNetworkStatusChange&&this.observe();var l=new Set;return this.queryManager.fetchQuery(a,o,NetworkStatus.fetchMore).then(function(c){return r.queryManager.removeQuery(a),s.networkStatus===NetworkStatus.fetchMore&&(s.networkStatus=u),r.queryManager.cache.batch({update:function(m){var me=n.updateQuery;me?m.updateQuery({query:r.query,variables:r.variables,returnPartialData:!0,optimistic:!1},function(xe){return me(xe,{fetchMoreResult:c.data,variables:o.variables})}):m.writeQuery({query:o.query,variables:o.variables,data:c.data})},onWatchUpdated:function(m){l.add(m.query)}}),c}).finally(function(){l.has(r.query)||reobserveCacheFirst(r)})},t.prototype.subscribeToMore=function(n){var r=this,o=this.queryManager.startGraphQLSubscription({query:n.document,variables:n.variables,context:n.context}).subscribe({next:function(a){var s=n.updateQuery;s&&r.updateQuery(function(u,l){var c=l.variables;return s(u,{subscriptionData:a,variables:c})})},error:function(a){if(n.onError){n.onError(a);return}__DEV__&&invariant$1.error("Unhandled GraphQL subscription error",a)}});return this.subscriptions.add(o),function(){r.subscriptions.delete(o)&&o.unsubscribe()}},t.prototype.setOptions=function(n){return this.reobserve(n)},t.prototype.setVariables=function(n){return equal(this.variables,n)?this.observers.size?this.result():Promise.resolve():(this.options.variables=n,this.observers.size?this.reobserve({fetchPolicy:this.options.initialFetchPolicy,variables:n},NetworkStatus.setVariables):Promise.resolve())},t.prototype.updateQuery=function(n){var r=this.queryManager,o=r.cache.diff({query:this.options.query,variables:this.variables,returnPartialData:!0,optimistic:!1}).result,a=n(o,{variables:this.variables});a&&(r.cache.writeQuery({query:this.options.query,data:a,variables:this.variables}),r.broadcastQueries())},t.prototype.startPolling=function(n){this.options.pollInterval=n,this.updatePolling()},t.prototype.stopPolling=function(){this.options.pollInterval=0,this.updatePolling()},t.prototype.applyNextFetchPolicy=function(n,r){if(r.nextFetchPolicy){var o=r.fetchPolicy,a=o===void 0?"cache-first":o,s=r.initialFetchPolicy,u=s===void 0?a:s;a==="standby"||(typeof r.nextFetchPolicy=="function"?r.fetchPolicy=r.nextFetchPolicy(a,{reason:n,options:r,observable:this,initialFetchPolicy:u}):n==="variables-changed"?r.fetchPolicy=u:r.fetchPolicy=r.nextFetchPolicy)}return r.fetchPolicy},t.prototype.fetch=function(n,r){return this.queryManager.setObservableQuery(this),this.queryManager.fetchQueryObservable(this.queryId,n,r)},t.prototype.updatePolling=function(){var n=this;if(!this.queryManager.ssrMode){var r=this,o=r.pollingInfo,a=r.options.pollInterval;if(!a){o&&(clearTimeout(o.timeout),delete this.pollingInfo);return}if(!(o&&o.interval===a)){__DEV__?invariant$1(a,"Attempted to start a polling query without a polling interval."):invariant$1(a,10);var s=o||(this.pollingInfo={});s.interval=a;var u=function(){n.pollingInfo&&(isNetworkRequestInFlight(n.queryInfo.networkStatus)?l():n.reobserve({fetchPolicy:"network-only"},NetworkStatus.poll).then(l,l))},l=function(){var c=n.pollingInfo;c&&(clearTimeout(c.timeout),c.timeout=setTimeout(u,c.interval))};l()}}},t.prototype.updateLastResult=function(n,r){return r===void 0&&(r=this.variables),this.last=__assign$1(__assign$1({},this.last),{result:this.queryManager.assumeImmutableResults?n:cloneDeep(n),variables:r}),isNonEmptyArray(n.errors)||delete this.last.error,this.last},t.prototype.reobserve=function(n,r){var o=this;this.isTornDown=!1;var a=r===NetworkStatus.refetch||r===NetworkStatus.fetchMore||r===NetworkStatus.poll,s=this.options.variables,u=this.options.fetchPolicy,l=compact(this.options,n||{}),c=a?l:assign(this.options,l);a||(this.updatePolling(),n&&n.variables&&!equal(n.variables,s)&&c.fetchPolicy!=="standby"&&c.fetchPolicy===u&&(this.applyNextFetchPolicy("variables-changed",c),r===void 0&&(r=NetworkStatus.setVariables)));var m=c.variables&&__assign$1({},c.variables),me=this.fetch(c,r),xe={next:function(Ne){o.reportResult(Ne,m)},error:function(Ne){o.reportError(Ne,m)}};return a||(this.concast&&this.observer&&this.concast.removeObserver(this.observer),this.concast=me,this.observer=xe),me.addObserver(xe),me.promise},t.prototype.observe=function(){this.reportResult(this.getCurrentResult(!1),this.variables)},t.prototype.reportResult=function(n,r){var o=this.getLastError();(o||this.isDifferentFromLastResult(n))&&((o||!n.partial||this.options.returnPartialData)&&this.updateLastResult(n,r),iterateObserversSafely(this.observers,"next",n))},t.prototype.reportError=function(n,r){var o=__assign$1(__assign$1({},this.getLastResult()),{error:n,errors:n.graphQLErrors,networkStatus:NetworkStatus.error,loading:!1});this.updateLastResult(o,r),iterateObserversSafely(this.observers,"error",this.last.error=n)},t.prototype.hasObservers=function(){return this.observers.size>0},t.prototype.tearDownQuery=function(){this.isTornDown||(this.concast&&this.observer&&(this.concast.removeObserver(this.observer),delete this.concast,delete this.observer),this.stopPolling(),this.subscriptions.forEach(function(n){return n.unsubscribe()}),this.subscriptions.clear(),this.queryManager.stopQuery(this.queryId),this.observers.clear(),this.isTornDown=!0)},t}(Observable);fixObservableSubclass(ObservableQuery);function reobserveCacheFirst(e){var t=e.options,n=t.fetchPolicy,r=t.nextFetchPolicy;return n==="cache-and-network"||n==="network-only"?e.reobserve({fetchPolicy:"cache-first",nextFetchPolicy:function(){return this.nextFetchPolicy=r,typeof r=="function"?r.apply(this,arguments):n}}):e.reobserve()}function defaultSubscriptionObserverErrorCallback(e){__DEV__&&invariant$1.error("Unhandled error",e.message,e.stack)}function logMissingFieldErrors(e){__DEV__&&e&&__DEV__&&invariant$1.debug("Missing cache result fields: ".concat(JSON.stringify(e)),e)}var LocalState=function(){function e(t){var n=t.cache,r=t.client,o=t.resolvers,a=t.fragmentMatcher;this.cache=n,r&&(this.client=r),o&&this.addResolvers(o),a&&this.setFragmentMatcher(a)}return e.prototype.addResolvers=function(t){var n=this;this.resolvers=this.resolvers||{},Array.isArray(t)?t.forEach(function(r){n.resolvers=mergeDeep(n.resolvers,r)}):this.resolvers=mergeDeep(this.resolvers,t)},e.prototype.setResolvers=function(t){this.resolvers={},this.addResolvers(t)},e.prototype.getResolvers=function(){return this.resolvers||{}},e.prototype.runResolvers=function(t){var n=t.document,r=t.remoteResult,o=t.context,a=t.variables,s=t.onlyRunForcedResolvers,u=s===void 0?!1:s;return __awaiter(this,void 0,void 0,function(){return __generator(this,function(l){return n?[2,this.resolveDocument(n,r.data,o,a,this.fragmentMatcher,u).then(function(c){return __assign$1(__assign$1({},r),{data:c.result})})]:[2,r]})})},e.prototype.setFragmentMatcher=function(t){this.fragmentMatcher=t},e.prototype.getFragmentMatcher=function(){return this.fragmentMatcher},e.prototype.clientQuery=function(t){return hasDirectives(["client"],t)&&this.resolvers?t:null},e.prototype.serverQuery=function(t){return removeClientSetsFromDocument(t)},e.prototype.prepareContext=function(t){var n=this.cache;return __assign$1(__assign$1({},t),{cache:n,getCacheKey:function(r){return n.identify(r)}})},e.prototype.addExportedVariables=function(t,n,r){return n===void 0&&(n={}),r===void 0&&(r={}),__awaiter(this,void 0,void 0,function(){return __generator(this,function(o){return t?[2,this.resolveDocument(t,this.buildRootValueFromCache(t,n)||{},this.prepareContext(r),n).then(function(a){return __assign$1(__assign$1({},n),a.exportedVariables)})]:[2,__assign$1({},n)]})})},e.prototype.shouldForceResolvers=function(t){var n=!1;return visit(t,{Directive:{enter:function(r){if(r.name.value==="client"&&r.arguments&&(n=r.arguments.some(function(o){return o.name.value==="always"&&o.value.kind==="BooleanValue"&&o.value.value===!0}),n))return BREAK}}}),n},e.prototype.buildRootValueFromCache=function(t,n){return this.cache.diff({query:buildQueryFromSelectionSet(t),variables:n,returnPartialData:!0,optimistic:!1}).result},e.prototype.resolveDocument=function(t,n,r,o,a,s){return r===void 0&&(r={}),o===void 0&&(o={}),a===void 0&&(a=function(){return!0}),s===void 0&&(s=!1),__awaiter(this,void 0,void 0,function(){var u,l,c,m,me,xe,Ne,He,Ye;return __generator(this,function(Je){return u=getMainDefinition(t),l=getFragmentDefinitions(t),c=createFragmentMap(l),m=u.operation,me=m?m.charAt(0).toUpperCase()+m.slice(1):"Query",xe=this,Ne=xe.cache,He=xe.client,Ye={fragmentMap:c,context:__assign$1(__assign$1({},r),{cache:Ne,client:He}),variables:o,fragmentMatcher:a,defaultOperationType:me,exportedVariables:{},onlyRunForcedResolvers:s},[2,this.resolveSelectionSet(u.selectionSet,n,Ye).then(function(vn){return{result:vn,exportedVariables:Ye.exportedVariables}})]})})},e.prototype.resolveSelectionSet=function(t,n,r){return __awaiter(this,void 0,void 0,function(){var o,a,s,u,l,c=this;return __generator(this,function(m){return o=r.fragmentMap,a=r.context,s=r.variables,u=[n],l=function(me){return __awaiter(c,void 0,void 0,function(){var xe,Ne;return __generator(this,function(He){return shouldInclude(me,s)?isField(me)?[2,this.resolveField(me,n,r).then(function(Ye){var Je;typeof Ye!="undefined"&&u.push((Je={},Je[resultKeyNameFromField(me)]=Ye,Je))})]:(isInlineFragment(me)?xe=me:(xe=o[me.name.value],__DEV__?invariant$1(xe,"No fragment named ".concat(me.name.value)):invariant$1(xe,9)),xe&&xe.typeCondition&&(Ne=xe.typeCondition.name.value,r.fragmentMatcher(n,Ne,a))?[2,this.resolveSelectionSet(xe.selectionSet,n,r).then(function(Ye){u.push(Ye)})]:[2]):[2]})})},[2,Promise.all(t.selections.map(l)).then(function(){return mergeDeepArray(u)})]})})},e.prototype.resolveField=function(t,n,r){return __awaiter(this,void 0,void 0,function(){var o,a,s,u,l,c,m,me,xe,Ne=this;return __generator(this,function(He){return o=r.variables,a=t.name.value,s=resultKeyNameFromField(t),u=a!==s,l=n[s]||n[a],c=Promise.resolve(l),(!r.onlyRunForcedResolvers||this.shouldForceResolvers(t))&&(m=n.__typename||r.defaultOperationType,me=this.resolvers&&this.resolvers[m],me&&(xe=me[u?a:s],xe&&(c=Promise.resolve(cacheSlot.withValue(this.cache,xe,[n,argumentsObjectFromField(t,o),r.context,{field:t,fragmentMap:r.fragmentMap}]))))),[2,c.then(function(Ye){if(Ye===void 0&&(Ye=l),t.directives&&t.directives.forEach(function(Je){Je.name.value==="export"&&Je.arguments&&Je.arguments.forEach(function(vn){vn.name.value==="as"&&vn.value.kind==="StringValue"&&(r.exportedVariables[vn.value.value]=Ye)})}),!t.selectionSet||Ye==null)return Ye;if(Array.isArray(Ye))return Ne.resolveSubSelectedArray(t,Ye,r);if(t.selectionSet)return Ne.resolveSelectionSet(t.selectionSet,Ye,r)})]})})},e.prototype.resolveSubSelectedArray=function(t,n,r){var o=this;return Promise.all(n.map(function(a){if(a===null)return null;if(Array.isArray(a))return o.resolveSubSelectedArray(t,a,r);if(t.selectionSet)return o.resolveSelectionSet(t.selectionSet,a,r)}))},e}(),destructiveMethodCounts=new(canUseWeakMap?WeakMap:Map);function wrapDestructiveCacheMethod(e,t){var n=e[t];typeof n=="function"&&(e[t]=function(){return destructiveMethodCounts.set(e,(destructiveMethodCounts.get(e)+1)%1e15),n.apply(this,arguments)})}function cancelNotifyTimeout(e){e.notifyTimeout&&(clearTimeout(e.notifyTimeout),e.notifyTimeout=void 0)}var QueryInfo=function(){function e(t,n){n===void 0&&(n=t.generateQueryId()),this.queryId=n,this.listeners=new Set,this.document=null,this.lastRequestId=1,this.subscriptions=new Set,this.stopped=!1,this.dirty=!1,this.observableQuery=null;var r=this.cache=t.cache;destructiveMethodCounts.has(r)||(destructiveMethodCounts.set(r,0),wrapDestructiveCacheMethod(r,"evict"),wrapDestructiveCacheMethod(r,"modify"),wrapDestructiveCacheMethod(r,"reset"))}return e.prototype.init=function(t){var n=t.networkStatus||NetworkStatus.loading;return this.variables&&this.networkStatus!==NetworkStatus.loading&&!equal(this.variables,t.variables)&&(n=NetworkStatus.setVariables),equal(t.variables,this.variables)||(this.lastDiff=void 0),Object.assign(this,{document:t.document,variables:t.variables,networkError:null,graphQLErrors:this.graphQLErrors||[],networkStatus:n}),t.observableQuery&&this.setObservableQuery(t.observableQuery),t.lastRequestId&&(this.lastRequestId=t.lastRequestId),this},e.prototype.reset=function(){cancelNotifyTimeout(this),this.lastDiff=void 0,this.dirty=!1},e.prototype.getDiff=function(t){t===void 0&&(t=this.variables);var n=this.getDiffOptions(t);if(this.lastDiff&&equal(n,this.lastDiff.options))return this.lastDiff.diff;this.updateWatch(this.variables=t);var r=this.observableQuery;if(r&&r.options.fetchPolicy==="no-cache")return{complete:!1};var o=this.cache.diff(n);return this.updateLastDiff(o,n),o},e.prototype.updateLastDiff=function(t,n){this.lastDiff=t?{diff:t,options:n||this.getDiffOptions()}:void 0},e.prototype.getDiffOptions=function(t){var n;return t===void 0&&(t=this.variables),{query:this.document,variables:t,returnPartialData:!0,optimistic:!0,canonizeResults:(n=this.observableQuery)===null||n===void 0?void 0:n.options.canonizeResults}},e.prototype.setDiff=function(t){var n=this,r=this.lastDiff&&this.lastDiff.diff;this.updateLastDiff(t),!this.dirty&&!equal(r&&r.result,t&&t.result)&&(this.dirty=!0,this.notifyTimeout||(this.notifyTimeout=setTimeout(function(){return n.notify()},0)))},e.prototype.setObservableQuery=function(t){var n=this;t!==this.observableQuery&&(this.oqListener&&this.listeners.delete(this.oqListener),this.observableQuery=t,t?(t.queryInfo=this,this.listeners.add(this.oqListener=function(){var r=n.getDiff();r.fromOptimisticTransaction?t.observe():reobserveCacheFirst(t)})):delete this.oqListener)},e.prototype.notify=function(){var t=this;cancelNotifyTimeout(this),this.shouldNotify()&&this.listeners.forEach(function(n){return n(t)}),this.dirty=!1},e.prototype.shouldNotify=function(){if(!this.dirty||!this.listeners.size)return!1;if(isNetworkRequestInFlight(this.networkStatus)&&this.observableQuery){var t=this.observableQuery.options.fetchPolicy;if(t!=="cache-only"&&t!=="cache-and-network")return!1}return!0},e.prototype.stop=function(){if(!this.stopped){this.stopped=!0,this.reset(),this.cancel(),this.cancel=e.prototype.cancel,this.subscriptions.forEach(function(n){return n.unsubscribe()});var t=this.observableQuery;t&&t.stopPolling()}},e.prototype.cancel=function(){},e.prototype.updateWatch=function(t){var n=this;t===void 0&&(t=this.variables);var r=this.observableQuery;if(!(r&&r.options.fetchPolicy==="no-cache")){var o=__assign$1(__assign$1({},this.getDiffOptions(t)),{watcher:this,callback:function(a){return n.setDiff(a)}});(!this.lastWatch||!equal(o,this.lastWatch))&&(this.cancel(),this.cancel=this.cache.watch(this.lastWatch=o))}},e.prototype.resetLastWrite=function(){this.lastWrite=void 0},e.prototype.shouldWrite=function(t,n){var r=this.lastWrite;return!(r&&r.dmCount===destructiveMethodCounts.get(this.cache)&&equal(n,r.variables)&&equal(t.data,r.result.data))},e.prototype.markResult=function(t,n,r){var o=this;this.graphQLErrors=isNonEmptyArray(t.errors)?t.errors:[],this.reset(),n.fetchPolicy==="no-cache"?this.updateLastDiff({result:t.data,complete:!0},this.getDiffOptions(n.variables)):r!==0&&(shouldWriteResult(t,n.errorPolicy)?this.cache.performTransaction(function(a){if(o.shouldWrite(t,n.variables))a.writeQuery({query:o.document,data:t.data,variables:n.variables,overwrite:r===1}),o.lastWrite={result:t,variables:n.variables,dmCount:destructiveMethodCounts.get(o.cache)};else if(o.lastDiff&&o.lastDiff.diff.complete){t.data=o.lastDiff.diff.result;return}var s=o.getDiffOptions(n.variables),u=a.diff(s);o.stopped||o.updateWatch(n.variables),o.updateLastDiff(u,s),u.complete&&(t.data=u.result)}):this.lastWrite=void 0)},e.prototype.markReady=function(){return this.networkError=null,this.networkStatus=NetworkStatus.ready},e.prototype.markError=function(t){return this.networkStatus=NetworkStatus.error,this.lastWrite=void 0,this.reset(),t.graphQLErrors&&(this.graphQLErrors=t.graphQLErrors),t.networkError&&(this.networkError=t.networkError),t},e}();function shouldWriteResult(e,t){t===void 0&&(t="none");var n=t==="ignore"||t==="all",r=!graphQLResultHasError(e);return!r&&n&&e.data&&(r=!0),r}var hasOwnProperty=Object.prototype.hasOwnProperty,QueryManager=function(){function e(t){var n=t.cache,r=t.link,o=t.defaultOptions,a=t.queryDeduplication,s=a===void 0?!1:a,u=t.onBroadcast,l=t.ssrMode,c=l===void 0?!1:l,m=t.clientAwareness,me=m===void 0?{}:m,xe=t.localState,Ne=t.assumeImmutableResults;this.clientAwareness={},this.queries=new Map,this.fetchCancelFns=new Map,this.transformCache=new(canUseWeakMap?WeakMap:Map),this.queryIdCounter=1,this.requestIdCounter=1,this.mutationIdCounter=1,this.inFlightLinkObservables=new Map,this.cache=n,this.link=r,this.defaultOptions=o||Object.create(null),this.queryDeduplication=s,this.clientAwareness=me,this.localState=xe||new LocalState({cache:n}),this.ssrMode=c,this.assumeImmutableResults=!!Ne,(this.onBroadcast=u)&&(this.mutationStore=Object.create(null))}return e.prototype.stop=function(){var t=this;this.queries.forEach(function(n,r){t.stopQueryNoBroadcast(r)}),this.cancelPendingFetches(__DEV__?new InvariantError("QueryManager stopped while query was in flight"):new InvariantError(11))},e.prototype.cancelPendingFetches=function(t){this.fetchCancelFns.forEach(function(n){return n(t)}),this.fetchCancelFns.clear()},e.prototype.mutate=function(t){var n,r,o=t.mutation,a=t.variables,s=t.optimisticResponse,u=t.updateQueries,l=t.refetchQueries,c=l===void 0?[]:l,m=t.awaitRefetchQueries,me=m===void 0?!1:m,xe=t.update,Ne=t.onQueryUpdated,He=t.fetchPolicy,Ye=He===void 0?((n=this.defaultOptions.mutate)===null||n===void 0?void 0:n.fetchPolicy)||"network-only":He,Je=t.errorPolicy,vn=Je===void 0?((r=this.defaultOptions.mutate)===null||r===void 0?void 0:r.errorPolicy)||"none":Je,La=t.keepRootFields,sr=t.context;return __awaiter(this,void 0,void 0,function(){var Zr,zs,za;return __generator(this,function(Hs){switch(Hs.label){case 0:return __DEV__?invariant$1(o,"mutation option is required. You must specify your GraphQL document in the mutation option."):invariant$1(o,12),__DEV__?invariant$1(Ye==="network-only"||Ye==="no-cache","Mutations support only 'network-only' or 'no-cache' fetchPolicy strings. The default `network-only` behavior automatically writes mutation results to the cache. Passing `no-cache` skips the cache write."):invariant$1(Ye==="network-only"||Ye==="no-cache",13),Zr=this.generateMutationId(),o=this.transform(o).document,a=this.getVariables(o,a),this.transform(o).hasClientExports?[4,this.localState.addExportedVariables(o,a,sr)]:[3,2];case 1:a=Hs.sent(),Hs.label=2;case 2:return zs=this.mutationStore&&(this.mutationStore[Zr]={mutation:o,variables:a,loading:!0,error:null}),s&&this.markMutationOptimistic(s,{mutationId:Zr,document:o,variables:a,fetchPolicy:Ye,errorPolicy:vn,context:sr,updateQueries:u,update:xe,keepRootFields:La}),this.broadcastQueries(),za=this,[2,new Promise(function(lc,Ty){return asyncMap(za.getObservableFromLink(o,__assign$1(__assign$1({},sr),{optimisticResponse:s}),a,!1),function(_y){if(graphQLResultHasError(_y)&&vn==="none")throw new ApolloError({graphQLErrors:_y.errors});zs&&(zs.loading=!1,zs.error=null);var xy=__assign$1({},_y);return typeof c=="function"&&(c=c(xy)),vn==="ignore"&&graphQLResultHasError(xy)&&delete xy.errors,za.markMutationResult({mutationId:Zr,result:xy,document:o,variables:a,fetchPolicy:Ye,errorPolicy:vn,context:sr,update:xe,updateQueries:u,awaitRefetchQueries:me,refetchQueries:c,removeOptimistic:s?Zr:void 0,onQueryUpdated:Ne,keepRootFields:La})}).subscribe({next:function(_y){za.broadcastQueries(),lc(_y)},error:function(_y){zs&&(zs.loading=!1,zs.error=_y),s&&za.cache.removeOptimistic(Zr),za.broadcastQueries(),Ty(_y instanceof ApolloError?_y:new ApolloError({networkError:_y}))}})})]}})})},e.prototype.markMutationResult=function(t,n){var r=this;n===void 0&&(n=this.cache);var o=t.result,a=[],s=t.fetchPolicy==="no-cache";if(!s&&shouldWriteResult(o,t.errorPolicy)){a.push({result:o.data,dataId:"ROOT_MUTATION",query:t.document,variables:t.variables});var u=t.updateQueries;u&&this.queries.forEach(function(c,m){var me=c.observableQuery,xe=me&&me.queryName;if(!(!xe||!hasOwnProperty.call(u,xe))){var Ne=u[xe],He=r.queries.get(m),Ye=He.document,Je=He.variables,vn=n.diff({query:Ye,variables:Je,returnPartialData:!0,optimistic:!1}),La=vn.result,sr=vn.complete;if(sr&&La){var Zr=Ne(La,{mutationResult:o,queryName:Ye&&getOperationName(Ye)||void 0,queryVariables:Je});Zr&&a.push({result:Zr,dataId:"ROOT_QUERY",query:Ye,variables:Je})}}})}if(a.length>0||t.refetchQueries||t.update||t.onQueryUpdated||t.removeOptimistic){var l=[];if(this.refetchQueries({updateCache:function(c){s||a.forEach(function(xe){return c.write(xe)});var m=t.update;if(m){if(!s){var me=c.diff({id:"ROOT_MUTATION",query:r.transform(t.document).asQuery,variables:t.variables,optimistic:!1,returnPartialData:!0});me.complete&&(o=__assign$1(__assign$1({},o),{data:me.result}))}m(c,o,{context:t.context,variables:t.variables})}!s&&!t.keepRootFields&&c.modify({id:"ROOT_MUTATION",fields:function(xe,Ne){var He=Ne.fieldName,Ye=Ne.DELETE;return He==="__typename"?xe:Ye}})},include:t.refetchQueries,optimistic:!1,removeOptimistic:t.removeOptimistic,onQueryUpdated:t.onQueryUpdated||null}).forEach(function(c){return l.push(c)}),t.awaitRefetchQueries||t.onQueryUpdated)return Promise.all(l).then(function(){return o})}return Promise.resolve(o)},e.prototype.markMutationOptimistic=function(t,n){var r=this,o=typeof t=="function"?t(n.variables):t;return this.cache.recordOptimisticTransaction(function(a){try{r.markMutationResult(__assign$1(__assign$1({},n),{result:{data:o}}),a)}catch(s){__DEV__&&invariant$1.error(s)}},n.mutationId)},e.prototype.fetchQuery=function(t,n,r){return this.fetchQueryObservable(t,n,r).promise},e.prototype.getQueryStore=function(){var t=Object.create(null);return this.queries.forEach(function(n,r){t[r]={variables:n.variables,networkStatus:n.networkStatus,networkError:n.networkError,graphQLErrors:n.graphQLErrors}}),t},e.prototype.resetErrors=function(t){var n=this.queries.get(t);n&&(n.networkError=void 0,n.graphQLErrors=[])},e.prototype.transform=function(t){var n=this.transformCache;if(!n.has(t)){var r=this.cache.transformDocument(t),o=removeConnectionDirectiveFromDocument(this.cache.transformForLink(r)),a=this.localState.clientQuery(r),s=o&&this.localState.serverQuery(o),u={document:r,hasClientExports:hasClientExports(r),hasForcedResolvers:this.localState.shouldForceResolvers(r),clientQuery:a,serverQuery:s,defaultVars:getDefaultValues(getOperationDefinition(r)),asQuery:__assign$1(__assign$1({},r),{definitions:r.definitions.map(function(c){return c.kind==="OperationDefinition"&&c.operation!=="query"?__assign$1(__assign$1({},c),{operation:"query"}):c})})},l=function(c){c&&!n.has(c)&&n.set(c,u)};l(t),l(r),l(a),l(s)}return n.get(t)},e.prototype.getVariables=function(t,n){return __assign$1(__assign$1({},this.transform(t).defaultVars),n)},e.prototype.watchQuery=function(t){t=__assign$1(__assign$1({},t),{variables:this.getVariables(t.query,t.variables)}),typeof t.notifyOnNetworkStatusChange=="undefined"&&(t.notifyOnNetworkStatusChange=!1);var n=new QueryInfo(this),r=new ObservableQuery({queryManager:this,queryInfo:n,options:t});return this.queries.set(r.queryId,n),n.init({document:r.query,observableQuery:r,variables:r.variables}),r},e.prototype.query=function(t,n){var r=this;return n===void 0&&(n=this.generateQueryId()),__DEV__?invariant$1(t.query,"query option is required. You must specify your GraphQL document in the query option."):invariant$1(t.query,14),__DEV__?invariant$1(t.query.kind==="Document",'You must wrap the query string in a "gql" tag.'):invariant$1(t.query.kind==="Document",15),__DEV__?invariant$1(!t.returnPartialData,"returnPartialData option only supported on watchQuery."):invariant$1(!t.returnPartialData,16),__DEV__?invariant$1(!t.pollInterval,"pollInterval option only supported on watchQuery."):invariant$1(!t.pollInterval,17),this.fetchQuery(n,t).finally(function(){return r.stopQuery(n)})},e.prototype.generateQueryId=function(){return String(this.queryIdCounter++)},e.prototype.generateRequestId=function(){return this.requestIdCounter++},e.prototype.generateMutationId=function(){return String(this.mutationIdCounter++)},e.prototype.stopQueryInStore=function(t){this.stopQueryInStoreNoBroadcast(t),this.broadcastQueries()},e.prototype.stopQueryInStoreNoBroadcast=function(t){var n=this.queries.get(t);n&&n.stop()},e.prototype.clearStore=function(t){return t===void 0&&(t={discardWatches:!0}),this.cancelPendingFetches(__DEV__?new InvariantError("Store reset while query was in flight (not completed in link chain)"):new InvariantError(18)),this.queries.forEach(function(n){n.observableQuery?n.networkStatus=NetworkStatus.loading:n.stop()}),this.mutationStore&&(this.mutationStore=Object.create(null)),this.cache.reset(t)},e.prototype.getObservableQueries=function(t){var n=this;t===void 0&&(t="active");var r=new Map,o=new Map,a=new Set;return Array.isArray(t)&&t.forEach(function(s){typeof s=="string"?o.set(s,!1):isDocumentNode(s)?o.set(n.transform(s).document,!1):isNonNullObject(s)&&s.query&&a.add(s)}),this.queries.forEach(function(s,u){var l=s.observableQuery,c=s.document;if(l){if(t==="all"){r.set(u,l);return}var m=l.queryName,me=l.options.fetchPolicy;if(me==="standby"||t==="active"&&!l.hasObservers())return;(t==="active"||m&&o.has(m)||c&&o.has(c))&&(r.set(u,l),m&&o.set(m,!0),c&&o.set(c,!0))}}),a.size&&a.forEach(function(s){var u=makeUniqueId("legacyOneTimeQuery"),l=n.getQuery(u).init({document:s.query,variables:s.variables}),c=new ObservableQuery({queryManager:n,queryInfo:l,options:__assign$1(__assign$1({},s),{fetchPolicy:"network-only"})});invariant$1(c.queryId===u),l.setObservableQuery(c),r.set(u,c)}),__DEV__&&o.size&&o.forEach(function(s,u){s||__DEV__&&invariant$1.warn("Unknown query ".concat(typeof u=="string"?"named ":"").concat(JSON.stringify(u,null,2)," requested in refetchQueries options.include array"))}),r},e.prototype.reFetchObservableQueries=function(t){var n=this;t===void 0&&(t=!1);var r=[];return this.getObservableQueries(t?"all":"active").forEach(function(o,a){var s=o.options.fetchPolicy;o.resetLastResults(),(t||s!=="standby"&&s!=="cache-only")&&r.push(o.refetch()),n.getQuery(a).setDiff(null)}),this.broadcastQueries(),Promise.all(r)},e.prototype.setObservableQuery=function(t){this.getQuery(t.queryId).setObservableQuery(t)},e.prototype.startGraphQLSubscription=function(t){var n=this,r=t.query,o=t.fetchPolicy,a=t.errorPolicy,s=t.variables,u=t.context,l=u===void 0?{}:u;r=this.transform(r).document,s=this.getVariables(r,s);var c=function(me){return n.getObservableFromLink(r,l,me).map(function(xe){if(o!=="no-cache"&&(shouldWriteResult(xe,a)&&n.cache.write({query:r,result:xe.data,dataId:"ROOT_SUBSCRIPTION",variables:me}),n.broadcastQueries()),graphQLResultHasError(xe))throw new ApolloError({graphQLErrors:xe.errors});return xe})};if(this.transform(r).hasClientExports){var m=this.localState.addExportedVariables(r,s,l).then(c);return new Observable(function(me){var xe=null;return m.then(function(Ne){return xe=Ne.subscribe(me)},me.error),function(){return xe&&xe.unsubscribe()}})}return c(s)},e.prototype.stopQuery=function(t){this.stopQueryNoBroadcast(t),this.broadcastQueries()},e.prototype.stopQueryNoBroadcast=function(t){this.stopQueryInStoreNoBroadcast(t),this.removeQuery(t)},e.prototype.removeQuery=function(t){this.fetchCancelFns.delete(t),this.queries.has(t)&&(this.getQuery(t).stop(),this.queries.delete(t))},e.prototype.broadcastQueries=function(){this.onBroadcast&&this.onBroadcast(),this.queries.forEach(function(t){return t.notify()})},e.prototype.getLocalState=function(){return this.localState},e.prototype.getObservableFromLink=function(t,n,r,o){var a=this,s;o===void 0&&(o=(s=n==null?void 0:n.queryDeduplication)!==null&&s!==void 0?s:this.queryDeduplication);var u,l=this.transform(t).serverQuery;if(l){var c=this,m=c.inFlightLinkObservables,me=c.link,xe={query:l,variables:r,operationName:getOperationName(l)||void 0,context:this.prepareContext(__assign$1(__assign$1({},n),{forceFetch:!o}))};if(n=xe.context,o){var Ne=m.get(l)||new Map;m.set(l,Ne);var He=canonicalStringify(r);if(u=Ne.get(He),!u){var Ye=new Concast([execute(me,xe)]);Ne.set(He,u=Ye),Ye.cleanup(function(){Ne.delete(He)&&Ne.size<1&&m.delete(l)})}}else u=new Concast([execute(me,xe)])}else u=new Concast([Observable.of({data:{}})]),n=this.prepareContext(n);var Je=this.transform(t).clientQuery;return Je&&(u=asyncMap(u,function(vn){return a.localState.runResolvers({document:Je,remoteResult:vn,context:n,variables:r})})),u},e.prototype.getResultsFromLink=function(t,n,r){var o=t.lastRequestId=this.generateRequestId();return asyncMap(this.getObservableFromLink(t.document,r.context,r.variables),function(a){var s=isNonEmptyArray(a.errors);if(o>=t.lastRequestId){if(s&&r.errorPolicy==="none")throw t.markError(new ApolloError({graphQLErrors:a.errors}));t.markResult(a,r,n),t.markReady()}var u={data:a.data,loading:!1,networkStatus:NetworkStatus.ready};return s&&r.errorPolicy!=="ignore"&&(u.errors=a.errors,u.networkStatus=NetworkStatus.error),u},function(a){var s=isApolloError(a)?a:new ApolloError({networkError:a});throw o>=t.lastRequestId&&t.markError(s),s})},e.prototype.fetchQueryObservable=function(t,n,r){var o=this;r===void 0&&(r=NetworkStatus.loading);var a=this.transform(n.query).document,s=this.getVariables(a,n.variables),u=this.getQuery(t),l=this.defaultOptions.watchQuery,c=n.fetchPolicy,m=c===void 0?l&&l.fetchPolicy||"cache-first":c,me=n.errorPolicy,xe=me===void 0?l&&l.errorPolicy||"none":me,Ne=n.returnPartialData,He=Ne===void 0?!1:Ne,Ye=n.notifyOnNetworkStatusChange,Je=Ye===void 0?!1:Ye,vn=n.context,La=vn===void 0?{}:vn,sr=Object.assign({},n,{query:a,variables:s,fetchPolicy:m,errorPolicy:xe,returnPartialData:He,notifyOnNetworkStatusChange:Je,context:La}),Zr=function(Hs){sr.variables=Hs;var lc=o.fetchQueryByPolicy(u,sr,r);return sr.fetchPolicy!=="standby"&&lc.length>0&&u.observableQuery&&u.observableQuery.applyNextFetchPolicy("after-fetch",n),lc},zs=function(){return o.fetchCancelFns.delete(t)};this.fetchCancelFns.set(t,function(Hs){zs(),setTimeout(function(){return za.cancel(Hs)})});var za=new Concast(this.transform(sr.query).hasClientExports?this.localState.addExportedVariables(sr.query,sr.variables,sr.context).then(Zr):Zr(sr.variables));return za.promise.then(zs,zs),za},e.prototype.refetchQueries=function(t){var n=this,r=t.updateCache,o=t.include,a=t.optimistic,s=a===void 0?!1:a,u=t.removeOptimistic,l=u===void 0?s?makeUniqueId("refetchQueries"):void 0:u,c=t.onQueryUpdated,m=new Map;o&&this.getObservableQueries(o).forEach(function(xe,Ne){m.set(Ne,{oq:xe,lastDiff:n.getQuery(Ne).getDiff()})});var me=new Map;return r&&this.cache.batch({update:r,optimistic:s&&l||!1,removeOptimistic:l,onWatchUpdated:function(xe,Ne,He){var Ye=xe.watcher instanceof QueryInfo&&xe.watcher.observableQuery;if(Ye){if(c){m.delete(Ye.queryId);var Je=c(Ye,Ne,He);return Je===!0&&(Je=Ye.refetch()),Je!==!1&&me.set(Ye,Je),Je}c!==null&&m.set(Ye.queryId,{oq:Ye,lastDiff:He,diff:Ne})}}}),m.size&&m.forEach(function(xe,Ne){var He=xe.oq,Ye=xe.lastDiff,Je=xe.diff,vn;if(c){if(!Je){var La=He.queryInfo;La.reset(),Je=La.getDiff()}vn=c(He,Je,Ye)}(!c||vn===!0)&&(vn=He.refetch()),vn!==!1&&me.set(He,vn),Ne.indexOf("legacyOneTimeQuery")>=0&&n.stopQueryNoBroadcast(Ne)}),l&&this.cache.removeOptimistic(l),me},e.prototype.fetchQueryByPolicy=function(t,n,r){var o=this,a=n.query,s=n.variables,u=n.fetchPolicy,l=n.refetchWritePolicy,c=n.errorPolicy,m=n.returnPartialData,me=n.context,xe=n.notifyOnNetworkStatusChange,Ne=t.networkStatus;t.init({document:this.transform(a).document,variables:s,networkStatus:r});var He=function(){return t.getDiff(s)},Ye=function(Zr,zs){zs===void 0&&(zs=t.networkStatus||NetworkStatus.loading);var za=Zr.result;__DEV__&&!m&&!equal(za,{})&&logMissingFieldErrors(Zr.missing);var Hs=function(lc){return Observable.of(__assign$1({data:lc,loading:isNetworkRequestInFlight(zs),networkStatus:zs},Zr.complete?null:{partial:!0}))};return za&&o.transform(a).hasForcedResolvers?o.localState.runResolvers({document:a,remoteResult:{data:za},context:me,variables:s,onlyRunForcedResolvers:!0}).then(function(lc){return Hs(lc.data||void 0)}):Hs(za)},Je=u==="no-cache"?0:r===NetworkStatus.refetch&&l!=="merge"?1:2,vn=function(){return o.getResultsFromLink(t,Je,{variables:s,context:me,fetchPolicy:u,errorPolicy:c})},La=xe&&typeof Ne=="number"&&Ne!==r&&isNetworkRequestInFlight(r);switch(u){default:case"cache-first":{var sr=He();return sr.complete?[Ye(sr,t.markReady())]:m||La?[Ye(sr),vn()]:[vn()]}case"cache-and-network":{var sr=He();return sr.complete||m||La?[Ye(sr),vn()]:[vn()]}case"cache-only":return[Ye(He(),t.markReady())];case"network-only":return La?[Ye(He()),vn()]:[vn()];case"no-cache":return La?[Ye(t.getDiff()),vn()]:[vn()];case"standby":return[]}},e.prototype.getQuery=function(t){return t&&!this.queries.has(t)&&this.queries.set(t,new QueryInfo(this,t)),this.queries.get(t)},e.prototype.prepareContext=function(t){t===void 0&&(t={});var n=this.localState.prepareContext(t);return __assign$1(__assign$1({},n),{clientAwareness:this.clientAwareness})},e}(),hasSuggestedDevtools=!1,ApolloClient=function(){function e(t){var n=this;this.resetStoreCallbacks=[],this.clearStoreCallbacks=[];var r=t.uri,o=t.credentials,a=t.headers,s=t.cache,u=t.ssrMode,l=u===void 0?!1:u,c=t.ssrForceFetchDelay,m=c===void 0?0:c,me=t.connectToDevTools,xe=me===void 0?typeof window=="object"&&!window.__APOLLO_CLIENT__&&__DEV__:me,Ne=t.queryDeduplication,He=Ne===void 0?!0:Ne,Ye=t.defaultOptions,Je=t.assumeImmutableResults,vn=Je===void 0?!1:Je,La=t.resolvers,sr=t.typeDefs,Zr=t.fragmentMatcher,zs=t.name,za=t.version,Hs=t.link;if(Hs||(Hs=r?new HttpLink({uri:r,credentials:o,headers:a}):ApolloLink.empty()),!s)throw __DEV__?new InvariantError(`To initialize Apollo Client, you must specify a 'cache' property in the options object. 
For more information, please visit: https://go.apollo.dev/c/docs`):new InvariantError(7);if(this.link=Hs,this.cache=s,this.disableNetworkFetches=l||m>0,this.queryDeduplication=He,this.defaultOptions=Ye||Object.create(null),this.typeDefs=sr,m&&setTimeout(function(){return n.disableNetworkFetches=!1},m),this.watchQuery=this.watchQuery.bind(this),this.query=this.query.bind(this),this.mutate=this.mutate.bind(this),this.resetStore=this.resetStore.bind(this),this.reFetchObservableQueries=this.reFetchObservableQueries.bind(this),xe&&typeof window=="object"&&(window.__APOLLO_CLIENT__=this),!hasSuggestedDevtools&&__DEV__&&(hasSuggestedDevtools=!0,typeof window!="undefined"&&window.document&&window.top===window.self&&!window.__APOLLO_DEVTOOLS_GLOBAL_HOOK__)){var lc=window.navigator,Ty=lc&&lc.userAgent,_y=void 0;typeof Ty=="string"&&(Ty.indexOf("Chrome/")>-1?_y="https://chrome.google.com/webstore/detail/apollo-client-developer-t/jdkknkkbebbapilgoeccciglkfbmbnfm":Ty.indexOf("Firefox/")>-1&&(_y="https://addons.mozilla.org/en-US/firefox/addon/apollo-developer-tools/")),_y&&__DEV__&&invariant$1.log("Download the Apollo DevTools for a better development experience: "+_y)}this.version=version,this.localState=new LocalState({cache:s,client:this,resolvers:La,fragmentMatcher:Zr}),this.queryManager=new QueryManager({cache:this.cache,link:this.link,defaultOptions:this.defaultOptions,queryDeduplication:He,ssrMode:l,clientAwareness:{name:zs,version:za},localState:this.localState,assumeImmutableResults:vn,onBroadcast:xe?function(){n.devToolsHookCb&&n.devToolsHookCb({action:{},state:{queries:n.queryManager.getQueryStore(),mutations:n.queryManager.mutationStore||{}},dataWithOptimisticResults:n.cache.extract(!0)})}:void 0})}return e.prototype.stop=function(){this.queryManager.stop()},e.prototype.watchQuery=function(t){return this.defaultOptions.watchQuery&&(t=mergeOptions(this.defaultOptions.watchQuery,t)),this.disableNetworkFetches&&(t.fetchPolicy==="network-only"||t.fetchPolicy==="cache-and-network")&&(t=__assign$1(__assign$1({},t),{fetchPolicy:"cache-first"})),this.queryManager.watchQuery(t)},e.prototype.query=function(t){return this.defaultOptions.query&&(t=mergeOptions(this.defaultOptions.query,t)),__DEV__?invariant$1(t.fetchPolicy!=="cache-and-network","The cache-and-network fetchPolicy does not work with client.query, because client.query can only return a single result. Please use client.watchQuery to receive multiple results from the cache and the network, or consider using a different fetchPolicy, such as cache-first or network-only."):invariant$1(t.fetchPolicy!=="cache-and-network",8),this.disableNetworkFetches&&t.fetchPolicy==="network-only"&&(t=__assign$1(__assign$1({},t),{fetchPolicy:"cache-first"})),this.queryManager.query(t)},e.prototype.mutate=function(t){return this.defaultOptions.mutate&&(t=mergeOptions(this.defaultOptions.mutate,t)),this.queryManager.mutate(t)},e.prototype.subscribe=function(t){return this.queryManager.startGraphQLSubscription(t)},e.prototype.readQuery=function(t,n){return n===void 0&&(n=!1),this.cache.readQuery(t,n)},e.prototype.readFragment=function(t,n){return n===void 0&&(n=!1),this.cache.readFragment(t,n)},e.prototype.writeQuery=function(t){this.cache.writeQuery(t),this.queryManager.broadcastQueries()},e.prototype.writeFragment=function(t){this.cache.writeFragment(t),this.queryManager.broadcastQueries()},e.prototype.__actionHookForDevTools=function(t){this.devToolsHookCb=t},e.prototype.__requestRaw=function(t){return execute(this.link,t)},e.prototype.resetStore=function(){var t=this;return Promise.resolve().then(function(){return t.queryManager.clearStore({discardWatches:!1})}).then(function(){return Promise.all(t.resetStoreCallbacks.map(function(n){return n()}))}).then(function(){return t.reFetchObservableQueries()})},e.prototype.clearStore=function(){var t=this;return Promise.resolve().then(function(){return t.queryManager.clearStore({discardWatches:!0})}).then(function(){return Promise.all(t.clearStoreCallbacks.map(function(n){return n()}))})},e.prototype.onResetStore=function(t){var n=this;return this.resetStoreCallbacks.push(t),function(){n.resetStoreCallbacks=n.resetStoreCallbacks.filter(function(r){return r!==t})}},e.prototype.onClearStore=function(t){var n=this;return this.clearStoreCallbacks.push(t),function(){n.clearStoreCallbacks=n.clearStoreCallbacks.filter(function(r){return r!==t})}},e.prototype.reFetchObservableQueries=function(t){return this.queryManager.reFetchObservableQueries(t)},e.prototype.refetchQueries=function(t){var n=this.queryManager.refetchQueries(t),r=[],o=[];n.forEach(function(s,u){r.push(u),o.push(s)});var a=Promise.all(o);return a.queries=r,a.results=o,a.catch(function(s){__DEV__&&invariant$1.debug("In client.refetchQueries, Promise.all promise rejected with error ".concat(s))}),a},e.prototype.getObservableQueries=function(t){return t===void 0&&(t="active"),this.queryManager.getObservableQueries(t)},e.prototype.extract=function(t){return this.cache.extract(t)},e.prototype.restore=function(t){return this.cache.restore(t)},e.prototype.addResolvers=function(t){this.localState.addResolvers(t)},e.prototype.setResolvers=function(t){this.localState.setResolvers(t)},e.prototype.getResolvers=function(){return this.localState.getResolvers()},e.prototype.setLocalStateFragmentMatcher=function(t){this.localState.setFragmentMatcher(t)},e.prototype.setLink=function(t){this.link=this.queryManager.link=t},e}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var __assign=function(){return __assign=Object.assign||function(t){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},__assign.apply(this,arguments)},docCache=new Map,fragmentSourceMap=new Map,printFragmentWarnings=!0,experimentalFragmentVariables=!1;function normalize(e){return e.replace(/[\s,]+/g," ").trim()}function cacheKeyFromLoc(e){return normalize(e.source.body.substring(e.start,e.end))}function processFragments(e){var t=new Set,n=[];return e.definitions.forEach(function(r){if(r.kind==="FragmentDefinition"){var o=r.name.value,a=cacheKeyFromLoc(r.loc),s=fragmentSourceMap.get(o);s&&!s.has(a)?printFragmentWarnings&&console.warn("Warning: fragment with name "+o+` already exists.
graphql-tag enforces all fragment names across your application to be unique; read more about
this in the docs: http://dev.apollodata.com/core/fragments.html#unique-names`):s||fragmentSourceMap.set(o,s=new Set),s.add(a),t.has(a)||(t.add(a),n.push(r))}else n.push(r)}),__assign(__assign({},e),{definitions:n})}function stripLoc(e){var t=new Set(e.definitions);t.forEach(function(r){r.loc&&delete r.loc,Object.keys(r).forEach(function(o){var a=r[o];a&&typeof a=="object"&&t.add(a)})});var n=e.loc;return n&&(delete n.startToken,delete n.endToken),e}function parseDocument(e){var t=normalize(e);if(!docCache.has(t)){var n=parse(e,{experimentalFragmentVariables,allowLegacyFragmentVariables:experimentalFragmentVariables});if(!n||n.kind!=="Document")throw new Error("Not a valid GraphQL document.");docCache.set(t,stripLoc(processFragments(n)))}return docCache.get(t)}function gql(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];typeof e=="string"&&(e=[e]);var r=e[0];return t.forEach(function(o,a){o&&o.kind==="Document"?r+=o.loc.source.body:r+=o,r+=e[a+1]}),parseDocument(r)}function resetCaches(){docCache.clear(),fragmentSourceMap.clear()}function disableFragmentWarnings(){printFragmentWarnings=!1}function enableExperimentalFragmentVariables(){experimentalFragmentVariables=!0}function disableExperimentalFragmentVariables(){experimentalFragmentVariables=!1}var extras={gql,resetCaches,disableFragmentWarnings,enableExperimentalFragmentVariables,disableExperimentalFragmentVariables};(function(e){e.gql=extras.gql,e.resetCaches=extras.resetCaches,e.disableFragmentWarnings=extras.disableFragmentWarnings,e.enableExperimentalFragmentVariables=extras.enableExperimentalFragmentVariables,e.disableExperimentalFragmentVariables=extras.disableExperimentalFragmentVariables})(gql||(gql={})),gql.default=gql,setVerbosity(DEV?"log":"silent");var core=Object.freeze({__proto__:null,setLogVerbosity:setVerbosity,ApolloClient,mergeOptions,ObservableQuery,get NetworkStatus(){return NetworkStatus},isApolloError,ApolloError,get Cache(){return Cache},ApolloCache,InMemoryCache,MissingFieldError,defaultDataIdFromObject,makeVar,fromError,toPromise,fromPromise,throwServerError,Observable,isReference,makeReference,get gql(){return gql},resetCaches,disableFragmentWarnings,enableExperimentalFragmentVariables,disableExperimentalFragmentVariables,empty,from,split,concat,execute,ApolloLink,parseAndCheckHttpResponse,serializeFetchParameter,fallbackHttpConfig,defaultPrinter,selectHttpOptionsAndBody,selectHttpOptionsAndBodyInternal,checkFetcher,createSignalIfSupported,selectURI,createHttpLink,HttpLink,rewriteURIForGET}),require$$0=getAugmentedNamespace(core),unwrapApolloResult$1={};Object.defineProperty(unwrapApolloResult$1,"__esModule",{value:!0});function unwrapApolloResult(e){if(e.error)throw e.error;if(e.errors)throw e.errors;return e.data}unwrapApolloResult$1.default=unwrapApolloResult;var Agent$1={},typeGraphql$1={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.GraphQLTimestamp=e.GraphQLISODateTime=e.ID=e.Float=e.Int=e.ClassType=e.PubSubEngine=e.UseMiddleware=e.createUnionType=e.Subscription=e.Root=e.Resolver=e.Query=e.PubSub=e.ObjectType=e.Mutation=e.InterfaceType=e.InputType=e.Info=e.FieldResolver=e.Field=e.registerEnumType=e.Ctx=e.Authorized=e.ArgsType=e.Args=e.Arg=e.dummyDecorator=e.dummyFn=e.dummyValue=void 0,e.dummyValue="";function t(){}e.dummyFn=t;function n(){return t}e.dummyDecorator=n,e.Arg=n,e.Args=n,e.ArgsType=n,e.Authorized=n,e.Ctx=n,e.registerEnumType=t,e.Field=n,e.FieldResolver=n,e.Info=n,e.InputType=n,e.InterfaceType=n,e.Mutation=n,e.ObjectType=n,e.PubSub=n,e.Query=n,e.Resolver=n,e.Root=n,e.Subscription=n,e.createUnionType=t,e.UseMiddleware=n,e.PubSubEngine=n;class r{}e.ClassType=r,e.Int=e.dummyValue,e.Float=e.dummyValue,e.ID=e.dummyValue,e.GraphQLISODateTime=e.dummyValue,e.GraphQLTimestamp=e.dummyValue})(typeGraphql$1);var typeGraphql={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.GraphQLTimestamp=e.GraphQLISODateTime=e.ID=e.Float=e.Int=e.ClassType=e.PubSubEngine=e.UseMiddleware=e.createUnionType=e.Subscription=e.Root=e.Resolver=e.Query=e.PubSub=e.ObjectType=e.Mutation=e.InterfaceType=e.InputType=e.Info=e.FieldResolver=e.Field=e.registerEnumType=e.Ctx=e.Authorized=e.ArgsType=e.Args=e.Arg=e.dummyDecorator=e.dummyFn=e.dummyValue=void 0,e.dummyValue="";function t(){}e.dummyFn=t;function n(){return t}e.dummyDecorator=n,e.Arg=n,e.Args=n,e.ArgsType=n,e.Authorized=n,e.Ctx=n,e.registerEnumType=t,e.Field=n,e.FieldResolver=n,e.Info=n,e.InputType=n,e.InterfaceType=n,e.Mutation=n,e.ObjectType=n,e.PubSub=n,e.Query=n,e.Resolver=n,e.Root=n,e.Subscription=n,e.createUnionType=t,e.UseMiddleware=n,e.PubSubEngine=n;class r{}e.ClassType=r,e.Int=e.dummyValue,e.Float=e.dummyValue,e.ID=e.dummyValue,e.GraphQLISODateTime=e.dummyValue,e.GraphQLTimestamp=e.dummyValue})(typeGraphql);var Perspective$1={},Expression$1={},Icon$1={},__decorate$e=commonjsGlobal$1&&commonjsGlobal$1.__decorate||function(e,t,n,r){var o=arguments.length,a=o<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(e,t,n,r);else for(var u=e.length-1;u>=0;u--)(s=e[u])&&(a=(o<3?s(a):o>3?s(t,n,a):s(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},__metadata$e=commonjsGlobal$1&&commonjsGlobal$1.__metadata||function(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)};Object.defineProperty(Icon$1,"__esModule",{value:!0}),Icon$1.Icon=void 0;const type_graphql_1$e=typeGraphql;let Icon=class{constructor(t){this.code=t}};__decorate$e([(0,type_graphql_1$e.Field)(),__metadata$e("design:type",String)],Icon.prototype,"code",void 0),Icon=__decorate$e([(0,type_graphql_1$e.ObjectType)(),__metadata$e("design:paramtypes",[String])],Icon),Icon$1.Icon=Icon;var LanguageRef$1={},__decorate$d=commonjsGlobal$1&&commonjsGlobal$1.__decorate||function(e,t,n,r){var o=arguments.length,a=o<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(e,t,n,r);else for(var u=e.length-1;u>=0;u--)(s=e[u])&&(a=(o<3?s(a):o>3?s(t,n,a):s(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},__metadata$d=commonjsGlobal$1&&commonjsGlobal$1.__metadata||function(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)};Object.defineProperty(LanguageRef$1,"__esModule",{value:!0}),LanguageRef$1.LanguageRef=void 0;const type_graphql_1$d=typeGraphql;let LanguageRef=class{constructor(t,n){this.address=t,this.name=n}};__decorate$d([(0,type_graphql_1$d.Field)(),__metadata$d("design:type",String)],LanguageRef.prototype,"address",void 0),__decorate$d([(0,type_graphql_1$d.Field)(),__metadata$d("design:type",String)],LanguageRef.prototype,"name",void 0),LanguageRef=__decorate$d([(0,type_graphql_1$d.ObjectType)(),__metadata$d("design:paramtypes",[String,String])],LanguageRef),LanguageRef$1.LanguageRef=LanguageRef;var __decorate$c=commonjsGlobal$1&&commonjsGlobal$1.__decorate||function(e,t,n,r){var o=arguments.length,a=o<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(e,t,n,r);else for(var u=e.length-1;u>=0;u--)(s=e[u])&&(a=(o<3?s(a):o>3?s(t,n,a):s(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},__metadata$c=commonjsGlobal$1&&commonjsGlobal$1.__metadata||function(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)};Object.defineProperty(Expression$1,"__esModule",{value:!0}),Expression$1.isExpression=Expression$1.ExpressionRendered=Expression$1.Expression=Expression$1.ExpressionGenericInput=Expression$1.ExpressionGeneric=Expression$1.ExpressionProofInput=Expression$1.ExpressionProof=void 0;const type_graphql_1$c=typeGraphql,Icon_1$1=Icon$1,LanguageRef_1$1=LanguageRef$1;let ExpressionProof=class{constructor(t,n){this.key=n,this.signature=t}};__decorate$c([(0,type_graphql_1$c.Field)(),__metadata$c("design:type",String)],ExpressionProof.prototype,"signature",void 0),__decorate$c([(0,type_graphql_1$c.Field)(),__metadata$c("design:type",String)],ExpressionProof.prototype,"key",void 0),__decorate$c([(0,type_graphql_1$c.Field)({nullable:!0}),__metadata$c("design:type",Boolean)],ExpressionProof.prototype,"valid",void 0),__decorate$c([(0,type_graphql_1$c.Field)({nullable:!0}),__metadata$c("design:type",Boolean)],ExpressionProof.prototype,"invalid",void 0),ExpressionProof=__decorate$c([(0,type_graphql_1$c.ObjectType)(),(0,type_graphql_1$c.InputType)(),__metadata$c("design:paramtypes",[String,String])],ExpressionProof),Expression$1.ExpressionProof=ExpressionProof;let ExpressionProofInput=class{};__decorate$c([(0,type_graphql_1$c.Field)(),__metadata$c("design:type",String)],ExpressionProofInput.prototype,"signature",void 0),__decorate$c([(0,type_graphql_1$c.Field)(),__metadata$c("design:type",String)],ExpressionProofInput.prototype,"key",void 0),__decorate$c([(0,type_graphql_1$c.Field)({nullable:!0}),__metadata$c("design:type",Boolean)],ExpressionProofInput.prototype,"valid",void 0),__decorate$c([(0,type_graphql_1$c.Field)({nullable:!0}),__metadata$c("design:type",Boolean)],ExpressionProofInput.prototype,"invalid",void 0),ExpressionProofInput=__decorate$c([(0,type_graphql_1$c.InputType)()],ExpressionProofInput),Expression$1.ExpressionProofInput=ExpressionProofInput;function ExpressionGeneric(e){let t=class{constructor(r,o,a,s){this.author=r,this.timestamp=o,this.data=a,this.proof=s}};return __decorate$c([(0,type_graphql_1$c.Field)(),__metadata$c("design:type",String)],t.prototype,"author",void 0),__decorate$c([(0,type_graphql_1$c.Field)(),__metadata$c("design:type",String)],t.prototype,"timestamp",void 0),__decorate$c([(0,type_graphql_1$c.Field)(n=>e),__metadata$c("design:type",Object)],t.prototype,"data",void 0),__decorate$c([(0,type_graphql_1$c.Field)(),__metadata$c("design:type",ExpressionProof)],t.prototype,"proof",void 0),t=__decorate$c([(0,type_graphql_1$c.ObjectType)(),__metadata$c("design:paramtypes",[String,String,Object,ExpressionProof])],t),t}Expression$1.ExpressionGeneric=ExpressionGeneric;function ExpressionGenericInput(e){let t=class{};return __decorate$c([(0,type_graphql_1$c.Field)(),__metadata$c("design:type",String)],t.prototype,"author",void 0),__decorate$c([(0,type_graphql_1$c.Field)(),__metadata$c("design:type",String)],t.prototype,"timestamp",void 0),__decorate$c([(0,type_graphql_1$c.Field)(n=>e),__metadata$c("design:type",Object)],t.prototype,"data",void 0),__decorate$c([(0,type_graphql_1$c.Field)(),__metadata$c("design:type",ExpressionProofInput)],t.prototype,"proof",void 0),t=__decorate$c([(0,type_graphql_1$c.InputType)()],t),t}Expression$1.ExpressionGenericInput=ExpressionGenericInput;let Expression=class extends ExpressionGeneric(Object){};Expression=__decorate$c([(0,type_graphql_1$c.ObjectType)()],Expression),Expression$1.Expression=Expression;let ExpressionRendered=class extends ExpressionGeneric(String){};__decorate$c([(0,type_graphql_1$c.Field)(),__metadata$c("design:type",LanguageRef_1$1.LanguageRef)],ExpressionRendered.prototype,"language",void 0),__decorate$c([(0,type_graphql_1$c.Field)(),__metadata$c("design:type",Icon_1$1.Icon)],ExpressionRendered.prototype,"icon",void 0),ExpressionRendered=__decorate$c([(0,type_graphql_1$c.ObjectType)()],ExpressionRendered),Expression$1.ExpressionRendered=ExpressionRendered;function isExpression(e){return e&&e.author&&e.timestamp&&e.data}Expression$1.isExpression=isExpression;var Links={},__decorate$b=commonjsGlobal$1&&commonjsGlobal$1.__decorate||function(e,t,n,r){var o=arguments.length,a=o<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(e,t,n,r);else for(var u=e.length-1;u>=0;u--)(s=e[u])&&(a=(o<3?s(a):o>3?s(t,n,a):s(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},__metadata$b=commonjsGlobal$1&&commonjsGlobal$1.__metadata||function(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)};Object.defineProperty(Links,"__esModule",{value:!0}),Links.isLink=Links.linkEqual=Links.LinkExpressionInput=Links.LinkExpression=Links.LinkInput=Links.Link=void 0;const type_graphql_1$b=typeGraphql,Expression_1$5=Expression$1;let Link=class{constructor(t){this.source=t.source?t.source:"",this.target=t.target?t.target:"",this.predicate=t.predicate?t.predicate:""}};__decorate$b([(0,type_graphql_1$b.Field)(),__metadata$b("design:type",String)],Link.prototype,"source",void 0),__decorate$b([(0,type_graphql_1$b.Field)(),__metadata$b("design:type",String)],Link.prototype,"target",void 0),__decorate$b([(0,type_graphql_1$b.Field)({nullable:!0}),__metadata$b("design:type",String)],Link.prototype,"predicate",void 0),Link=__decorate$b([(0,type_graphql_1$b.ObjectType)(),__metadata$b("design:paramtypes",[Object])],Link),Links.Link=Link;let LinkInput=class{};__decorate$b([(0,type_graphql_1$b.Field)(),__metadata$b("design:type",String)],LinkInput.prototype,"source",void 0),__decorate$b([(0,type_graphql_1$b.Field)(),__metadata$b("design:type",String)],LinkInput.prototype,"target",void 0),__decorate$b([(0,type_graphql_1$b.Field)({nullable:!0}),__metadata$b("design:type",String)],LinkInput.prototype,"predicate",void 0),LinkInput=__decorate$b([(0,type_graphql_1$b.InputType)()],LinkInput),Links.LinkInput=LinkInput;let LinkExpression=class extends(0,Expression_1$5.ExpressionGeneric)(Link){hash(){const t=JSON.stringify(this.data,Object.keys(this.data).sort())+JSON.stringify(this.author)+this.timestamp;let n=0,r,o;for(r=0;r<t.length;r++)o=t.charCodeAt(r),n=(n<<5)-n+o,n|=0;return n}};LinkExpression=__decorate$b([(0,type_graphql_1$b.ObjectType)()],LinkExpression),Links.LinkExpression=LinkExpression;let LinkExpressionInput=class extends(0,Expression_1$5.ExpressionGenericInput)(LinkInput){};LinkExpressionInput=__decorate$b([(0,type_graphql_1$b.InputType)()],LinkExpressionInput),Links.LinkExpressionInput=LinkExpressionInput;function linkEqual(e,t){return e.author==t.author&&e.timestamp==t.timestamp&&e.data.source==t.data.source&&e.data.predicate==t.data.predicate&&e.data.target==t.data.target}Links.linkEqual=linkEqual;function isLink(e){return e&&e.source&&e.target}Links.isLink=isLink;var __decorate$a=commonjsGlobal$1&&commonjsGlobal$1.__decorate||function(e,t,n,r){var o=arguments.length,a=o<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(e,t,n,r);else for(var u=e.length-1;u>=0;u--)(s=e[u])&&(a=(o<3?s(a):o>3?s(t,n,a):s(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},__metadata$a=commonjsGlobal$1&&commonjsGlobal$1.__metadata||function(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)};Object.defineProperty(Perspective$1,"__esModule",{value:!0}),Perspective$1.PerspectiveExpression=Perspective$1.PerspectiveInput=Perspective$1.Perspective=void 0;const type_graphql_1$a=typeGraphql,Expression_1$4=Expression$1,Links_1$2=Links;let Perspective=class{constructor(t){t?this.links=t:this.links=[]}get(t){if(!t||!t.source&&!t.predicate&&!t.target)return this.links;if(t.source){let r=JSON.parse(JSON.stringify(this.links));return t.target&&(r=r.filter(o=>o.data.target===t.target)),t.predicate&&(r=r.filter(o=>o.data.predicate===t.predicate)),t.fromDate&&(r=r.filter(o=>new Date(o.timestamp)>=t.fromDate)),t.untilDate&&(r=r.filter(o=>new Date(o.timestamp)<=t.untilDate)),t.limit&&(r=r.slice(0,t.limit)),r}if(t.target){let r=JSON.parse(JSON.stringify(this.links));return t.predicate&&(r=r.filter(o=>o.data.predicate===t.predicate)),t.fromDate&&(r=r.filter(o=>new Date(o.timestamp)>=t.fromDate)),t.untilDate&&(r=r.filter(o=>new Date(o.timestamp)<=t.untilDate)),t.limit&&(r=r.slice(0,t.limit)),r}let n=JSON.parse(JSON.stringify(this.links));return n=n.filter(r=>r.data.predicate===t.predicate),t.limit&&(n=n.slice(0,t.limit)),n}getSingleTarget(t){delete t.target;const n=this.get(t);return n.length?n[0].data.target:null}};__decorate$a([(0,type_graphql_1$a.Field)(e=>[Links_1$2.LinkExpression]),__metadata$a("design:type",Array)],Perspective.prototype,"links",void 0),Perspective=__decorate$a([(0,type_graphql_1$a.ObjectType)(),__metadata$a("design:paramtypes",[Array])],Perspective),Perspective$1.Perspective=Perspective;let PerspectiveInput=class{};__decorate$a([(0,type_graphql_1$a.Field)(e=>[Links_1$2.LinkExpressionInput]),__metadata$a("design:type",Array)],PerspectiveInput.prototype,"links",void 0),PerspectiveInput=__decorate$a([(0,type_graphql_1$a.InputType)()],PerspectiveInput),Perspective$1.PerspectiveInput=PerspectiveInput;let PerspectiveExpression=class extends(0,Expression_1$4.ExpressionGeneric)(Perspective){};PerspectiveExpression=__decorate$a([(0,type_graphql_1$a.ObjectType)()],PerspectiveExpression),Perspective$1.PerspectiveExpression=PerspectiveExpression;var __decorate$9=commonjsGlobal$1&&commonjsGlobal$1.__decorate||function(e,t,n,r){var o=arguments.length,a=o<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(e,t,n,r);else for(var u=e.length-1;u>=0;u--)(s=e[u])&&(a=(o<3?s(a):o>3?s(t,n,a):s(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},__metadata$9=commonjsGlobal$1&&commonjsGlobal$1.__metadata||function(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)};Object.defineProperty(Agent$1,"__esModule",{value:!0}),Agent$1.EntanglementProofInput=Agent$1.EntanglementProof=Agent$1.AgentExpression=Agent$1.Agent=void 0;const type_graphql_1$9=typeGraphql,Perspective_1$1=Perspective$1,Expression_1$3=Expression$1;let Agent=class{constructor(t,n){this.did=t,n?this.perspective=n:this.perspective=new Perspective_1$1.Perspective}};__decorate$9([(0,type_graphql_1$9.Field)(),__metadata$9("design:type",String)],Agent.prototype,"did",void 0),__decorate$9([(0,type_graphql_1$9.Field)(e=>Perspective_1$1.Perspective,{nullable:!0}),__metadata$9("design:type",Perspective_1$1.Perspective)],Agent.prototype,"perspective",void 0),__decorate$9([(0,type_graphql_1$9.Field)({nullable:!0}),__metadata$9("design:type",String)],Agent.prototype,"directMessageLanguage",void 0),Agent=__decorate$9([(0,type_graphql_1$9.ObjectType)(),__metadata$9("design:paramtypes",[String,Perspective_1$1.Perspective])],Agent),Agent$1.Agent=Agent;let AgentExpression=class extends(0,Expression_1$3.ExpressionGeneric)(Agent){};AgentExpression=__decorate$9([(0,type_graphql_1$9.ObjectType)()],AgentExpression),Agent$1.AgentExpression=AgentExpression;let EntanglementProof=class{constructor(t,n,r,o,a,s){this.did=t,this.didSigningKeyId=n,this.deviceKeyType=r,this.deviceKey=o,this.deviceKeySignedByDid=a,this.didSignedByDeviceKey=s}};__decorate$9([(0,type_graphql_1$9.Field)(),__metadata$9("design:type",String)],EntanglementProof.prototype,"did",void 0),__decorate$9([(0,type_graphql_1$9.Field)(),__metadata$9("design:type",String)],EntanglementProof.prototype,"didSigningKeyId",void 0),__decorate$9([(0,type_graphql_1$9.Field)(),__metadata$9("design:type",String)],EntanglementProof.prototype,"deviceKeyType",void 0),__decorate$9([(0,type_graphql_1$9.Field)(),__metadata$9("design:type",String)],EntanglementProof.prototype,"deviceKey",void 0),__decorate$9([(0,type_graphql_1$9.Field)(),__metadata$9("design:type",String)],EntanglementProof.prototype,"deviceKeySignedByDid",void 0),__decorate$9([(0,type_graphql_1$9.Field)({nullable:!0}),__metadata$9("design:type",String)],EntanglementProof.prototype,"didSignedByDeviceKey",void 0),EntanglementProof=__decorate$9([(0,type_graphql_1$9.ObjectType)(),__metadata$9("design:paramtypes",[String,String,String,String,String,String])],EntanglementProof),Agent$1.EntanglementProof=EntanglementProof;let EntanglementProofInput=class{constructor(t,n,r,o,a,s){this.did=t,this.didSigningKeyId=n,this.deviceKeyType=r,this.deviceKey=o,this.deviceKeySignedByDid=a,this.didSignedByDeviceKey=s}};__decorate$9([(0,type_graphql_1$9.Field)(),__metadata$9("design:type",String)],EntanglementProofInput.prototype,"did",void 0),__decorate$9([(0,type_graphql_1$9.Field)(),__metadata$9("design:type",String)],EntanglementProofInput.prototype,"didSigningKeyId",void 0),__decorate$9([(0,type_graphql_1$9.Field)(),__metadata$9("design:type",String)],EntanglementProofInput.prototype,"deviceKeyType",void 0),__decorate$9([(0,type_graphql_1$9.Field)(),__metadata$9("design:type",String)],EntanglementProofInput.prototype,"deviceKey",void 0),__decorate$9([(0,type_graphql_1$9.Field)(),__metadata$9("design:type",String)],EntanglementProofInput.prototype,"deviceKeySignedByDid",void 0),__decorate$9([(0,type_graphql_1$9.Field)(),__metadata$9("design:type",String)],EntanglementProofInput.prototype,"didSignedByDeviceKey",void 0),EntanglementProofInput=__decorate$9([(0,type_graphql_1$9.InputType)(),__metadata$9("design:paramtypes",[String,String,String,String,String,String])],EntanglementProofInput),Agent$1.EntanglementProofInput=EntanglementProofInput;var AgentStatus$1={},__decorate$8=commonjsGlobal$1&&commonjsGlobal$1.__decorate||function(e,t,n,r){var o=arguments.length,a=o<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(e,t,n,r);else for(var u=e.length-1;u>=0;u--)(s=e[u])&&(a=(o<3?s(a):o>3?s(t,n,a):s(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},__metadata$8=commonjsGlobal$1&&commonjsGlobal$1.__metadata||function(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)};Object.defineProperty(AgentStatus$1,"__esModule",{value:!0}),AgentStatus$1.AgentStatus=void 0;const type_graphql_1$8=typeGraphql;let AgentStatus=class{constructor(t){t?(this.isInitialized=t.isInitialized,this.isInitialized||(this.isInitialized=!1),this.isUnlocked=t.isUnlocked,this.isUnlocked||(this.isUnlocked=!1),this.did=t.did,this.didDocument=t.didDocument,this.error=t.error):(this.isInitialized=!1,this.isUnlocked=!1)}};__decorate$8([(0,type_graphql_1$8.Field)(),__metadata$8("design:type",Boolean)],AgentStatus.prototype,"isInitialized",void 0),__decorate$8([(0,type_graphql_1$8.Field)(),__metadata$8("design:type",Boolean)],AgentStatus.prototype,"isUnlocked",void 0),__decorate$8([(0,type_graphql_1$8.Field)({nullable:!0}),__metadata$8("design:type",String)],AgentStatus.prototype,"did",void 0),__decorate$8([(0,type_graphql_1$8.Field)({nullable:!0}),__metadata$8("design:type",String)],AgentStatus.prototype,"didDocument",void 0),__decorate$8([(0,type_graphql_1$8.Field)({nullable:!0}),__metadata$8("design:type",String)],AgentStatus.prototype,"error",void 0),AgentStatus=__decorate$8([(0,type_graphql_1$8.ObjectType)(),__metadata$8("design:paramtypes",[Object])],AgentStatus),AgentStatus$1.AgentStatus=AgentStatus;var __classPrivateFieldSet$8=commonjsGlobal$1&&commonjsGlobal$1.__classPrivateFieldSet||function(e,t,n,r,o){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?o.call(e,n):o?o.value=n:t.set(e,n),n},__classPrivateFieldGet$8=commonjsGlobal$1&&commonjsGlobal$1.__classPrivateFieldGet||function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},__importDefault$6=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},_AgentClient_apolloClient,_AgentClient_updatedCallbacks,_AgentClient_agentStatusChangedCallbacks;Object.defineProperty(AgentClient$1,"__esModule",{value:!0});const core_1$5=require$$0,unwrapApolloResult_1$5=__importDefault$6(unwrapApolloResult$1),Agent_1=Agent$1,AgentStatus_1=AgentStatus$1,AGENT_SUBITEMS=`
    did
    directMessageLanguage
    perspective { 
        links {
            author, timestamp, 
            proof {
                signature, key, valid, invalid
            }
            data {
                source, predicate, target
            }
        }
    }
`,AGENT_STATUS_FIELDS=`
    isInitialized
    isUnlocked
    did
    didDocument
    error
`,ENTANGLEMENT_PROOF_FIELDS=`
    did
    didSigningKeyId
    deviceKeyType
    deviceKey
    deviceKeySignedByDid
    didSignedByDeviceKey
`;class AgentClient{constructor(t,n=!0){_AgentClient_apolloClient.set(this,void 0),_AgentClient_updatedCallbacks.set(this,void 0),_AgentClient_agentStatusChangedCallbacks.set(this,void 0),__classPrivateFieldSet$8(this,_AgentClient_apolloClient,t,"f"),__classPrivateFieldSet$8(this,_AgentClient_updatedCallbacks,[],"f"),__classPrivateFieldSet$8(this,_AgentClient_agentStatusChangedCallbacks,[],"f"),n&&(this.subscribeAgentUpdated(),this.subscribeAgentStatusChanged())}async me(){const{agent:t}=(0,unwrapApolloResult_1$5.default)(await __classPrivateFieldGet$8(this,_AgentClient_apolloClient,"f").query({query:(0,core_1$5.gql)`query agent { agent { ${AGENT_SUBITEMS} } }`}));let n=new Agent_1.Agent(t.did,t.perspective);return n.directMessageLanguage=t.directMessageLanguage,n}async status(){const{agentStatus:t}=(0,unwrapApolloResult_1$5.default)(await __classPrivateFieldGet$8(this,_AgentClient_apolloClient,"f").query({query:(0,core_1$5.gql)`query agentStatus {
                agentStatus {
                    ${AGENT_STATUS_FIELDS}
                }
            }`}));return new AgentStatus_1.AgentStatus(t)}async generate(t){const{agentGenerate:n}=(0,unwrapApolloResult_1$5.default)(await __classPrivateFieldGet$8(this,_AgentClient_apolloClient,"f").mutate({mutation:(0,core_1$5.gql)`mutation agentGenerate(
                $passphrase: String!
            ) {
                agentGenerate(passphrase: $passphrase) {
                    ${AGENT_STATUS_FIELDS}
                }
            }`,variables:{passphrase:t}}));return new AgentStatus_1.AgentStatus(n)}async import(t){let{did:n,didDocument:r,keystore:o,passphrase:a}=t;const{agentImport:s}=(0,unwrapApolloResult_1$5.default)(await __classPrivateFieldGet$8(this,_AgentClient_apolloClient,"f").mutate({mutation:(0,core_1$5.gql)`mutation agentImport(
                $did: String!,
                $didDocument: String!,
                $keystore: String!,
                $passphrase: String!
            ) {
                agentImport(did: $did, didDocument: $didDocument, keystore: $keystore, passphrase: $passphrase) {
                    ${AGENT_STATUS_FIELDS}
                }
            }`,variables:{did:n,didDocument:r,keystore:o,passphrase:a}}));return new AgentStatus_1.AgentStatus(s)}async lock(t){const{agentLock:n}=(0,unwrapApolloResult_1$5.default)(await __classPrivateFieldGet$8(this,_AgentClient_apolloClient,"f").mutate({mutation:(0,core_1$5.gql)`mutation agentLock($passphrase: String!) {
                agentLock(passphrase: $passphrase) {
                    ${AGENT_STATUS_FIELDS}
                }
            }`,variables:{passphrase:t}}));return new AgentStatus_1.AgentStatus(n)}async unlock(t){const{agentUnlock:n}=(0,unwrapApolloResult_1$5.default)(await __classPrivateFieldGet$8(this,_AgentClient_apolloClient,"f").mutate({mutation:(0,core_1$5.gql)`mutation agentUnlock($passphrase: String!) {
                agentUnlock(passphrase: $passphrase) {
                    ${AGENT_STATUS_FIELDS}
                }
            }`,variables:{passphrase:t}}));return new AgentStatus_1.AgentStatus(n)}async byDID(t){const{agentByDID:n}=(0,unwrapApolloResult_1$5.default)(await __classPrivateFieldGet$8(this,_AgentClient_apolloClient,"f").query({query:(0,core_1$5.gql)`query agentByDID($did: String!) {
                agentByDID(did: $did) {
                    ${AGENT_SUBITEMS}
                }
            }`,variables:{did:t}}));return n}async updatePublicPerspective(t){const{agentUpdatePublicPerspective:n}=(0,unwrapApolloResult_1$5.default)(await __classPrivateFieldGet$8(this,_AgentClient_apolloClient,"f").mutate({mutation:(0,core_1$5.gql)`mutation agentUpdatePublicPerspective($perspective: PerspectiveInput!) {
                agentUpdatePublicPerspective(perspective: $perspective) {
                    ${AGENT_SUBITEMS}
                }
            }`,variables:{perspective:t}})),r=n,o=new Agent_1.Agent(r.did,r.perspective);return o.directMessageLanguage=r.directMessageLanguage,o}async updateDirectMessageLanguage(t){const{agentUpdateDirectMessageLanguage:n}=(0,unwrapApolloResult_1$5.default)(await __classPrivateFieldGet$8(this,_AgentClient_apolloClient,"f").mutate({mutation:(0,core_1$5.gql)`mutation agentUpdateDirectMessageLanguage($directMessageLanguage: String!) {
                agentUpdateDirectMessageLanguage(directMessageLanguage: $directMessageLanguage) {
                    ${AGENT_SUBITEMS}
                }
            }`,variables:{directMessageLanguage:t}})),r=n,o=new Agent_1.Agent(r.did,r.perspective);return o.directMessageLanguage=r.directMessageLanguage,o}async addEntanglementProofs(t){const{agentAddEntanglementProofs:n}=(0,unwrapApolloResult_1$5.default)(await __classPrivateFieldGet$8(this,_AgentClient_apolloClient,"f").mutate({mutation:(0,core_1$5.gql)`mutation agentAddEntanglementProofs($proofs: [EntanglementProofInput!]!) {
                agentAddEntanglementProofs(proofs: $proofs) {
                    ${ENTANGLEMENT_PROOF_FIELDS}
                }
            }`,variables:{proofs:t}}));return n}async deleteEntanglementProofs(t){const{agentDeleteEntanglementProofs:n}=(0,unwrapApolloResult_1$5.default)(await __classPrivateFieldGet$8(this,_AgentClient_apolloClient,"f").mutate({mutation:(0,core_1$5.gql)`mutation agentDeleteEntanglementProofs($proofs: [EntanglementProofInput!]!) {
                agentDeleteEntanglementProofs(proofs: $proofs) {
                    ${ENTANGLEMENT_PROOF_FIELDS}
                }
            }`,variables:{proofs:t}}));return n}async getEntanglementProofs(){const{agentGetEntanglementProofs:t}=(0,unwrapApolloResult_1$5.default)(await __classPrivateFieldGet$8(this,_AgentClient_apolloClient,"f").query({query:(0,core_1$5.gql)`query agentGetEntanglementProofs {
                agentGetEntanglementProofs {
                    ${ENTANGLEMENT_PROOF_FIELDS}
                }
            }`}));return t}async entanglementProofPreFlight(t,n){const{agentEntanglementProofPreFlight:r}=(0,unwrapApolloResult_1$5.default)(await __classPrivateFieldGet$8(this,_AgentClient_apolloClient,"f").mutate({mutation:(0,core_1$5.gql)`mutation agentEntanglementProofPreFlight($deviceKey: String!, $deviceKeyType: String!) {
                agentEntanglementProofPreFlight(deviceKey: $deviceKey, deviceKeyType: $deviceKeyType) {
                    ${ENTANGLEMENT_PROOF_FIELDS}
                }
            }`,variables:{deviceKey:t,deviceKeyType:n}}));return r}addUpdatedListener(t){__classPrivateFieldGet$8(this,_AgentClient_updatedCallbacks,"f").push(t)}subscribeAgentUpdated(){__classPrivateFieldGet$8(this,_AgentClient_apolloClient,"f").subscribe({query:(0,core_1$5.gql)` subscription {
                agentUpdated { ${AGENT_SUBITEMS} }
            }   
        `}).subscribe({next:t=>{const n=t.data.agentUpdated;__classPrivateFieldGet$8(this,_AgentClient_updatedCallbacks,"f").forEach(r=>{r(n)})},error:t=>console.error(t)})}addAgentStatusChangedListener(t){__classPrivateFieldGet$8(this,_AgentClient_agentStatusChangedCallbacks,"f").push(t)}subscribeAgentStatusChanged(){__classPrivateFieldGet$8(this,_AgentClient_apolloClient,"f").subscribe({query:(0,core_1$5.gql)` subscription {
                agentStatusChanged { ${AGENT_STATUS_FIELDS} }
            }   
        `}).subscribe({next:t=>{const n=t.data.agentStatusChanged;__classPrivateFieldGet$8(this,_AgentClient_agentStatusChangedCallbacks,"f").forEach(r=>{r(n)})},error:t=>console.error(t)})}async requestCapability(t,n,r,o){const{agentRequestCapability:a}=(0,unwrapApolloResult_1$5.default)(await __classPrivateFieldGet$8(this,_AgentClient_apolloClient,"f").mutate({mutation:(0,core_1$5.gql)`mutation agentRequestCapability($appName: String!, $appDesc: String!, $appUrl: String!, $capabilities: String!) {
                agentRequestCapability(appName: $appName, appDesc: $appDesc, appUrl: $appUrl, capabilities: $capabilities)
            }`,variables:{appName:t,appDesc:n,appUrl:r,capabilities:o}}));return a}async permitCapability(t){const{agentPermitCapability:n}=(0,unwrapApolloResult_1$5.default)(await __classPrivateFieldGet$8(this,_AgentClient_apolloClient,"f").mutate({mutation:(0,core_1$5.gql)`mutation agentPermitCapability($auth: String!) {
                agentPermitCapability(auth: $auth)
            }`,variables:{auth:t}}));return n}async generateJwt(t,n){const{agentGenerateJwt:r}=(0,unwrapApolloResult_1$5.default)(await __classPrivateFieldGet$8(this,_AgentClient_apolloClient,"f").mutate({mutation:(0,core_1$5.gql)`mutation agentGenerateJwt($requestId: String!, $rand: String!) {
                agentGenerateJwt(requestId: $requestId, rand: $rand)
            }`,variables:{requestId:t,rand:n}}));return r}async isLocked(){const{agentIsLocked:t}=(0,unwrapApolloResult_1$5.default)(await __classPrivateFieldGet$8(this,_AgentClient_apolloClient,"f").mutate({mutation:(0,core_1$5.gql)`query agentIsLocked {
                agentIsLocked
            }`}));return t}}AgentClient$1.default=AgentClient,_AgentClient_apolloClient=new WeakMap,_AgentClient_updatedCallbacks=new WeakMap,_AgentClient_agentStatusChangedCallbacks=new WeakMap;var LanguageClient$1={},__classPrivateFieldSet$7=commonjsGlobal$1&&commonjsGlobal$1.__classPrivateFieldSet||function(e,t,n,r,o){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?o.call(e,n):o?o.value=n:t.set(e,n),n},__classPrivateFieldGet$7=commonjsGlobal$1&&commonjsGlobal$1.__classPrivateFieldGet||function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},__importDefault$5=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},_LanguageClient_apolloClient;Object.defineProperty(LanguageClient$1,"__esModule",{value:!0}),LanguageClient$1.LanguageClient=void 0;const core_1$4=require$$0,unwrapApolloResult_1$4=__importDefault$5(unwrapApolloResult$1),LANGUAGE_COMPLETE=`
    name
    address
    settings
    icon { code }
    constructorIcon { code }
    settingsIcon { code }
`,LANGUAGE_META=`
    name
    address
    description
    author
    templated
    templateSourceLanguageAddress
    templateAppliedParams
    possibleTemplateParams
    sourceCodeLink
`;class LanguageClient{constructor(t){_LanguageClient_apolloClient.set(this,void 0),__classPrivateFieldSet$7(this,_LanguageClient_apolloClient,t,"f")}async byAddress(t){const{language:n}=(0,unwrapApolloResult_1$4.default)(await __classPrivateFieldGet$7(this,_LanguageClient_apolloClient,"f").query({query:(0,core_1$4.gql)`query byAddress($address: String!) {
                language(address: $address) {
                    ${LANGUAGE_COMPLETE}
                }
            }`,variables:{address:t}}));return n}async byFilter(t){const{languages:n}=(0,unwrapApolloResult_1$4.default)(await __classPrivateFieldGet$7(this,_LanguageClient_apolloClient,"f").query({query:(0,core_1$4.gql)`query byFilter($filter: String!) {
                languages(filter: $filter) {
                    ${LANGUAGE_COMPLETE}
                }
            }`,variables:{filter:t}}));return n}async all(){return this.byFilter("")}async writeSettings(t,n){const{languageWriteSettings:r}=(0,unwrapApolloResult_1$4.default)(await __classPrivateFieldGet$7(this,_LanguageClient_apolloClient,"f").mutate({mutation:(0,core_1$4.gql)`mutation writeSettings($languageAddress: String!, $settings: String!) {
                languageWriteSettings(languageAddress: $languageAddress, settings: $settings)
            }`,variables:{languageAddress:t,settings:n}}));return r}async applyTemplateAndPublish(t,n){const{languageApplyTemplateAndPublish:r}=(0,unwrapApolloResult_1$4.default)(await __classPrivateFieldGet$7(this,_LanguageClient_apolloClient,"f").mutate({mutation:(0,core_1$4.gql)`mutation languageApplyTemplateAndPublish(
                $sourceLanguageHash: String!,
                $templateData: String!,
            ) {
                languageApplyTemplateAndPublish(sourceLanguageHash: $sourceLanguageHash, templateData: $templateData) {
                    name, address
                }
            }`,variables:{sourceLanguageHash:t,templateData:n}}));return r}async publish(t,n){const{languagePublish:r}=(0,unwrapApolloResult_1$4.default)(await __classPrivateFieldGet$7(this,_LanguageClient_apolloClient,"f").mutate({mutation:(0,core_1$4.gql)`mutation languagePublish(
                $languagePath: String!,
                $languageMeta: LanguageMetaInput!,
            ) {
                languagePublish(languagePath: $languagePath, languageMeta: $languageMeta) {
                    ${LANGUAGE_META}
                }
            }`,variables:{languagePath:t,languageMeta:n}}));return r}async meta(t){const{languageMeta:n}=(0,unwrapApolloResult_1$4.default)(await __classPrivateFieldGet$7(this,_LanguageClient_apolloClient,"f").query({query:(0,core_1$4.gql)`query languageMeta(
                $address: String!,
            ) {
                languageMeta(address: $address) {
                    ${LANGUAGE_META}
                }
            }`,variables:{address:t}}));return n}async source(t){const{languageSource:n}=(0,unwrapApolloResult_1$4.default)(await __classPrivateFieldGet$7(this,_LanguageClient_apolloClient,"f").query({query:(0,core_1$4.gql)`query languageSource(
                $address: String!,
            ) {
                languageSource(address: $address)
            }`,variables:{address:t}}));return n}}LanguageClient$1.LanguageClient=LanguageClient,_LanguageClient_apolloClient=new WeakMap;var NeighbourhoodClient$1={},__classPrivateFieldSet$6=commonjsGlobal$1&&commonjsGlobal$1.__classPrivateFieldSet||function(e,t,n,r,o){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?o.call(e,n):o?o.value=n:t.set(e,n),n},__classPrivateFieldGet$6=commonjsGlobal$1&&commonjsGlobal$1.__classPrivateFieldGet||function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},__importDefault$4=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},_NeighbourhoodClient_apolloClient;Object.defineProperty(NeighbourhoodClient$1,"__esModule",{value:!0});const core_1$3=require$$0,unwrapApolloResult_1$3=__importDefault$4(unwrapApolloResult$1);class NeighbourhoodClient{constructor(t){_NeighbourhoodClient_apolloClient.set(this,void 0),__classPrivateFieldSet$6(this,_NeighbourhoodClient_apolloClient,t,"f")}async publishFromPerspective(t,n,r){const{neighbourhoodPublishFromPerspective:o}=(0,unwrapApolloResult_1$3.default)(await __classPrivateFieldGet$6(this,_NeighbourhoodClient_apolloClient,"f").mutate({mutation:(0,core_1$3.gql)`mutation neighbourhoodPublishFromPerspective(
                $linkLanguage: String!,
                $meta: PerspectiveInput!,
                $perspectiveUUID: String!
            ) {
                neighbourhoodPublishFromPerspective(
                    linkLanguage: $linkLanguage,
                    meta: $meta,
                    perspectiveUUID: $perspectiveUUID
                )
            }`,variables:{perspectiveUUID:t,linkLanguage:n,meta:r}}));return o}async joinFromUrl(t){const{neighbourhoodJoinFromUrl:n}=(0,unwrapApolloResult_1$3.default)(await __classPrivateFieldGet$6(this,_NeighbourhoodClient_apolloClient,"f").mutate({mutation:(0,core_1$3.gql)`    mutation neighbourhoodJoinFromUrl($url: String!) {
                neighbourhoodJoinFromUrl(url: $url) {
                    uuid
                    name
                    sharedUrl
                    neighbourhood { 
                        linkLanguage 
                        meta { 
                            links
                                {
                                    author
                                    timestamp
                                    data { source, predicate, target }
                                    proof { valid, invalid, signature, key }
                                }  
                        } 
                    }
                }
            }`,variables:{url:t}}));return n}}NeighbourhoodClient$1.default=NeighbourhoodClient,_NeighbourhoodClient_apolloClient=new WeakMap;var PerspectiveClient$1={},PerspectiveProxy$1={},LinkQuery$1={},__decorate$7=commonjsGlobal$1&&commonjsGlobal$1.__decorate||function(e,t,n,r){var o=arguments.length,a=o<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(e,t,n,r);else for(var u=e.length-1;u>=0;u--)(s=e[u])&&(a=(o<3?s(a):o>3?s(t,n,a):s(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},__metadata$7=commonjsGlobal$1&&commonjsGlobal$1.__metadata||function(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)};Object.defineProperty(LinkQuery$1,"__esModule",{value:!0}),LinkQuery$1.LinkQuery=void 0;const type_graphql_1$7=typeGraphql;let LinkQuery=class{constructor(t){t&&(this.source=t.source,this.predicate=t.predicate,this.target=t.target,t.fromDate&&(this.fromDate=t.fromDate),t.untilDate&&(this.untilDate=t.untilDate),t.limit&&(this.limit=t.limit))}isMatch(t){return!(this.source&&this.source!==t.source||this.predicate&&this.predicate!==t.predicate||this.target&&this.target!==t.target)}};__decorate$7([(0,type_graphql_1$7.Field)({nullable:!0}),__metadata$7("design:type",String)],LinkQuery.prototype,"source",void 0),__decorate$7([(0,type_graphql_1$7.Field)({nullable:!0}),__metadata$7("design:type",String)],LinkQuery.prototype,"target",void 0),__decorate$7([(0,type_graphql_1$7.Field)({nullable:!0}),__metadata$7("design:type",String)],LinkQuery.prototype,"predicate",void 0),__decorate$7([(0,type_graphql_1$7.Field)({nullable:!0}),__metadata$7("design:type",Date)],LinkQuery.prototype,"fromDate",void 0),__decorate$7([(0,type_graphql_1$7.Field)({nullable:!0}),__metadata$7("design:type",Date)],LinkQuery.prototype,"untilDate",void 0),__decorate$7([(0,type_graphql_1$7.Field)({nullable:!0}),__metadata$7("design:type",Number)],LinkQuery.prototype,"limit",void 0),LinkQuery=__decorate$7([(0,type_graphql_1$7.ObjectType)(),(0,type_graphql_1$7.InputType)(),__metadata$7("design:paramtypes",[Object])],LinkQuery),LinkQuery$1.LinkQuery=LinkQuery;var __classPrivateFieldSet$5=commonjsGlobal$1&&commonjsGlobal$1.__classPrivateFieldSet||function(e,t,n,r,o){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?o.call(e,n):o?o.value=n:t.set(e,n),n},__classPrivateFieldGet$5=commonjsGlobal$1&&commonjsGlobal$1.__classPrivateFieldGet||function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},_PerspectiveProxy_handle,_PerspectiveProxy_client,_PerspectiveProxy_perspectiveLinkAddedCallbacks,_PerspectiveProxy_perspectiveLinkRemovedCallbacks,_PerspectiveProxy_executeAction;Object.defineProperty(PerspectiveProxy$1,"__esModule",{value:!0}),PerspectiveProxy$1.PerspectiveProxy=void 0;const Links_1$1=Links,LinkQuery_1=LinkQuery$1;class PerspectiveProxy{constructor(e,t){_PerspectiveProxy_handle.set(this,void 0),_PerspectiveProxy_client.set(this,void 0),_PerspectiveProxy_perspectiveLinkAddedCallbacks.set(this,void 0),_PerspectiveProxy_perspectiveLinkRemovedCallbacks.set(this,void 0),_PerspectiveProxy_executeAction.set(this,void 0),__classPrivateFieldSet$5(this,_PerspectiveProxy_perspectiveLinkAddedCallbacks,[],"f"),__classPrivateFieldSet$5(this,_PerspectiveProxy_perspectiveLinkRemovedCallbacks,[],"f"),__classPrivateFieldSet$5(this,_PerspectiveProxy_handle,e,"f"),__classPrivateFieldSet$5(this,_PerspectiveProxy_client,t,"f"),__classPrivateFieldGet$5(this,_PerspectiveProxy_client,"f").addPerspectiveLinkAddedListener(__classPrivateFieldGet$5(this,_PerspectiveProxy_handle,"f").uuid,__classPrivateFieldGet$5(this,_PerspectiveProxy_perspectiveLinkAddedCallbacks,"f")),__classPrivateFieldGet$5(this,_PerspectiveProxy_client,"f").addPerspectiveLinkRemovedListener(__classPrivateFieldGet$5(this,_PerspectiveProxy_handle,"f").uuid,__classPrivateFieldGet$5(this,_PerspectiveProxy_perspectiveLinkRemovedCallbacks,"f")),__classPrivateFieldSet$5(this,_PerspectiveProxy_executeAction,async(n,r)=>{console.log("execute:",n);const o=a=>{if(a)return a.replace("this",r)};for(let a of n)switch(a.action){case"addLink":await this.add(new Links_1$1.Link({source:o(a.source),predicate:o(a.predicate),target:o(a.target)}));break;case"removeLink":const s=await this.get(new LinkQuery_1.LinkQuery({source:o(a.source),predicate:o(a.predicate),target:o(a.target)}));for(const u of s)await this.remove(u);break}},"f")}get uuid(){return __classPrivateFieldGet$5(this,_PerspectiveProxy_handle,"f").uuid}get name(){return __classPrivateFieldGet$5(this,_PerspectiveProxy_handle,"f").name}get sharedUrl(){return __classPrivateFieldGet$5(this,_PerspectiveProxy_handle,"f").sharedUrl}get neighbourhood(){return __classPrivateFieldGet$5(this,_PerspectiveProxy_handle,"f").neighbourhood}async get(e){return await __classPrivateFieldGet$5(this,_PerspectiveProxy_client,"f").queryLinks(__classPrivateFieldGet$5(this,_PerspectiveProxy_handle,"f").uuid,e)}async infer(e){return await __classPrivateFieldGet$5(this,_PerspectiveProxy_client,"f").queryProlog(__classPrivateFieldGet$5(this,_PerspectiveProxy_handle,"f").uuid,e)}async add(e){return await __classPrivateFieldGet$5(this,_PerspectiveProxy_client,"f").addLink(__classPrivateFieldGet$5(this,_PerspectiveProxy_handle,"f").uuid,e)}async update(e,t){return await __classPrivateFieldGet$5(this,_PerspectiveProxy_client,"f").updateLink(__classPrivateFieldGet$5(this,_PerspectiveProxy_handle,"f").uuid,e,t)}async remove(e){return await __classPrivateFieldGet$5(this,_PerspectiveProxy_client,"f").removeLink(__classPrivateFieldGet$5(this,_PerspectiveProxy_handle,"f").uuid,e)}async addListener(e,t){e==="link-added"?__classPrivateFieldGet$5(this,_PerspectiveProxy_perspectiveLinkAddedCallbacks,"f").push(t):e==="link-removed"&&__classPrivateFieldGet$5(this,_PerspectiveProxy_perspectiveLinkRemovedCallbacks,"f").push(t)}async removeListener(e,t){if(e==="link-added"){const n=__classPrivateFieldGet$5(this,_PerspectiveProxy_perspectiveLinkAddedCallbacks,"f").indexOf(t);__classPrivateFieldGet$5(this,_PerspectiveProxy_perspectiveLinkAddedCallbacks,"f").splice(n,1)}else if(e==="link-removed"){const n=__classPrivateFieldGet$5(this,_PerspectiveProxy_perspectiveLinkRemovedCallbacks,"f").indexOf(t);__classPrivateFieldGet$5(this,_PerspectiveProxy_perspectiveLinkRemovedCallbacks,"f").splice(n,1)}}async snapshot(){return __classPrivateFieldGet$5(this,_PerspectiveProxy_client,"f").snapshotByUUID(__classPrivateFieldGet$5(this,_PerspectiveProxy_handle,"f").uuid)}async loadSnapshot(e){for(const t of e.links)await this.add(t.data)}async getSingleTarget(e){delete e.target;const t=await this.get(e);return t.length?t[0].data.target:null}async setSingleTarget(e){const t=new LinkQuery_1.LinkQuery({source:e.source,predicate:e.predicate}),n=await this.get(t);for(const r of n)delete r.__typename,delete r.data.__typename,delete r.proof.__typename,await this.remove(r);await this.add(e)}async sdnaFlows(){return(await this.infer("register_sdna_flow(X, _)")).map(t=>t.X)}async availableFlows(e){return(await this.infer(`flowable("${e}", F), register_sdna_flow(X, F)`)).map(n=>n.X)}async startFlow(flowName,exprAddr){let startAction=await this.infer(`start_action(Action, F), register_sdna_flow("${flowName}", F)`);startAction=eval(startAction[0].Action),await __classPrivateFieldGet$5(this,_PerspectiveProxy_executeAction,"f").call(this,startAction,exprAddr)}async expressionsInFlowState(e,t){return(await this.infer(`register_sdna_flow("${e}", F), flow_state(X, ${t}, F)`)).map(r=>r.X)}async flowState(e,t){return(await this.infer(`register_sdna_flow("${e}", F), flow_state("${t}", X, F)`))[0].X}async flowActions(e,t){return(await this.infer(`register_sdna_flow("${e}", Flow), flow_state("${t}", State, Flow), action(State, Name, _, _)`)).map(r=>r.Name)}async runFlowAction(flowName,exprAddr,actionName){let action=await this.infer(`register_sdna_flow("${flowName}", Flow), flow_state("${exprAddr}", State, Flow), action(State, "${actionName}", _, Action)`);action=eval(action[0].Action),await __classPrivateFieldGet$5(this,_PerspectiveProxy_executeAction,"f").call(this,action,exprAddr)}}PerspectiveProxy$1.PerspectiveProxy=PerspectiveProxy,_PerspectiveProxy_handle=new WeakMap,_PerspectiveProxy_client=new WeakMap,_PerspectiveProxy_perspectiveLinkAddedCallbacks=new WeakMap,_PerspectiveProxy_perspectiveLinkRemovedCallbacks=new WeakMap,_PerspectiveProxy_executeAction=new WeakMap;var __classPrivateFieldSet$4=commonjsGlobal$1&&commonjsGlobal$1.__classPrivateFieldSet||function(e,t,n,r,o){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?o.call(e,n):o?o.value=n:t.set(e,n),n},__classPrivateFieldGet$4=commonjsGlobal$1&&commonjsGlobal$1.__classPrivateFieldGet||function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},__importDefault$3=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},_PerspectiveClient_apolloClient,_PerspectiveClient_perspectiveAddedCallbacks,_PerspectiveClient_perspectiveUpdatedCallbacks,_PerspectiveClient_perspectiveRemovedCallbacks;Object.defineProperty(PerspectiveClient$1,"__esModule",{value:!0});const core_1$2=require$$0,unwrapApolloResult_1$2=__importDefault$3(unwrapApolloResult$1),PerspectiveProxy_1=PerspectiveProxy$1,LINK_EXPRESSION_FIELDS=`
author
timestamp
data { source, predicate, target }
proof { valid, invalid, signature, key }
`,PERSPECTIVE_HANDLE_FIELDS=`
uuid
name
sharedUrl
neighbourhood { 
    linkLanguage 
    meta { 
        links
            {
                author
                timestamp
                data { source, predicate, target }
                proof { valid, invalid, signature, key }
            }  
    } 
}
`;class PerspectiveClient{constructor(t,n=!0){_PerspectiveClient_apolloClient.set(this,void 0),_PerspectiveClient_perspectiveAddedCallbacks.set(this,void 0),_PerspectiveClient_perspectiveUpdatedCallbacks.set(this,void 0),_PerspectiveClient_perspectiveRemovedCallbacks.set(this,void 0),__classPrivateFieldSet$4(this,_PerspectiveClient_apolloClient,t,"f"),__classPrivateFieldSet$4(this,_PerspectiveClient_perspectiveAddedCallbacks,[],"f"),__classPrivateFieldSet$4(this,_PerspectiveClient_perspectiveUpdatedCallbacks,[],"f"),__classPrivateFieldSet$4(this,_PerspectiveClient_perspectiveRemovedCallbacks,[],"f"),n&&(this.subscribePerspectiveAdded(),this.subscribePerspectiveUpdated(),this.subscribePerspectiveRemoved())}async all(){const{perspectives:t}=(0,unwrapApolloResult_1$2.default)(await __classPrivateFieldGet$4(this,_PerspectiveClient_apolloClient,"f").query({query:(0,core_1$2.gql)`query perspectives {
                perspectives {
                    ${PERSPECTIVE_HANDLE_FIELDS}
                }
                
            }`}));return t.map(n=>new PerspectiveProxy_1.PerspectiveProxy(n,this))}async byUUID(t){const{perspective:n}=(0,unwrapApolloResult_1$2.default)(await __classPrivateFieldGet$4(this,_PerspectiveClient_apolloClient,"f").query({query:(0,core_1$2.gql)`query perspective($uuid: String!) {
                perspective(uuid: $uuid) {
                    ${PERSPECTIVE_HANDLE_FIELDS}
                }
            }`,variables:{uuid:t}}));return n?new PerspectiveProxy_1.PerspectiveProxy(n,this):null}async snapshotByUUID(t){const{perspectiveSnapshot:n}=(0,unwrapApolloResult_1$2.default)(await __classPrivateFieldGet$4(this,_PerspectiveClient_apolloClient,"f").query({query:(0,core_1$2.gql)`query perspectiveSnapshot($uuid: String!) {
                perspectiveSnapshot(uuid: $uuid) {
                    links { ${LINK_EXPRESSION_FIELDS} }
                }
            }`,variables:{uuid:t}}));return n}async publishSnapshotByUUID(t){const{perspectivePublishSnapshot:n}=(0,unwrapApolloResult_1$2.default)(await __classPrivateFieldGet$4(this,_PerspectiveClient_apolloClient,"f").mutate({mutation:(0,core_1$2.gql)`mutation perspectivePublishSnapshot($uuid: String!) {
                perspectivePublishSnapshot(uuid: $uuid)
            }`,variables:{uuid:t}}));return n}async queryLinks(t,n){const{perspectiveQueryLinks:r}=(0,unwrapApolloResult_1$2.default)(await __classPrivateFieldGet$4(this,_PerspectiveClient_apolloClient,"f").query({query:(0,core_1$2.gql)`query perspectiveQueryLinks($uuid: String!, $query: LinkQuery!) {
                perspectiveQueryLinks(query: $query, uuid: $uuid) {
                    ${LINK_EXPRESSION_FIELDS}
                }
            }`,variables:{uuid:t,query:n}}));return r}async queryProlog(t,n){const{perspectiveQueryProlog:r}=(0,unwrapApolloResult_1$2.default)(await __classPrivateFieldGet$4(this,_PerspectiveClient_apolloClient,"f").query({query:(0,core_1$2.gql)`query perspectiveQueryProlog($uuid: String!, $query: String!) {
                perspectiveQueryProlog(uuid: $uuid, query: $query)
            }`,variables:{uuid:t,query:n}}));return JSON.parse(r)}async add(t){const{perspectiveAdd:n}=(0,unwrapApolloResult_1$2.default)(await __classPrivateFieldGet$4(this,_PerspectiveClient_apolloClient,"f").mutate({mutation:(0,core_1$2.gql)`mutation perspectiveAdd($name: String!) {
                perspectiveAdd(name: $name) {
                    ${PERSPECTIVE_HANDLE_FIELDS}
                }
            }`,variables:{name:t}}));return new PerspectiveProxy_1.PerspectiveProxy(n,this)}async update(t,n){const{perspectiveUpdate:r}=(0,unwrapApolloResult_1$2.default)(await __classPrivateFieldGet$4(this,_PerspectiveClient_apolloClient,"f").mutate({mutation:(0,core_1$2.gql)`mutation perspectiveUpdate($uuid: String!, $name: String!) {
                perspectiveUpdate(uuid: $uuid, name: $name) {
                    ${PERSPECTIVE_HANDLE_FIELDS}
                }
            }`,variables:{uuid:t,name:n}}));return new PerspectiveProxy_1.PerspectiveProxy(r,this)}async remove(t){return(0,unwrapApolloResult_1$2.default)(await __classPrivateFieldGet$4(this,_PerspectiveClient_apolloClient,"f").mutate({mutation:(0,core_1$2.gql)`mutation perspectiveRemove($uuid: String!) {
                perspectiveRemove(uuid: $uuid)
            }`,variables:{uuid:t}}))}async addLink(t,n){const{perspectiveAddLink:r}=(0,unwrapApolloResult_1$2.default)(await __classPrivateFieldGet$4(this,_PerspectiveClient_apolloClient,"f").mutate({mutation:(0,core_1$2.gql)`mutation perspectiveAddLink($uuid: String!, $link: LinkInput!){
                perspectiveAddLink(link: $link, uuid: $uuid) {
                    ${LINK_EXPRESSION_FIELDS}
                }
            }`,variables:{uuid:t,link:n}}));return r}async updateLink(t,n,r){delete n.__typename,delete n.data.__typename,delete n.proof.__typename;const{perspectiveUpdateLink:o}=(0,unwrapApolloResult_1$2.default)(await __classPrivateFieldGet$4(this,_PerspectiveClient_apolloClient,"f").mutate({mutation:(0,core_1$2.gql)`mutation perspectiveUpdateLink(
                $uuid: String!, 
                $newLink: LinkInput!
                $oldLink: LinkExpressionInput!
            ){
                perspectiveUpdateLink(
                    newLink: $newLink, 
                    oldLink: $oldLink, 
                    uuid: $uuid
                ) {
                    ${LINK_EXPRESSION_FIELDS}
                }
            }`,variables:{uuid:t,oldLink:n,newLink:r}}));return o}async removeLink(t,n){return delete n.__typename,delete n.data.__typename,delete n.proof.__typename,(0,unwrapApolloResult_1$2.default)(await __classPrivateFieldGet$4(this,_PerspectiveClient_apolloClient,"f").mutate({mutation:(0,core_1$2.gql)`mutation perspectiveRemoveLink($link: LinkExpressionInput!, $uuid: String!) {
                perspectiveRemoveLink(link: $link, uuid: $uuid)
            }`,variables:{uuid:t,link:n}}))}addPerspectiveAddedListener(t){__classPrivateFieldGet$4(this,_PerspectiveClient_perspectiveAddedCallbacks,"f").push(t)}subscribePerspectiveAdded(){__classPrivateFieldGet$4(this,_PerspectiveClient_apolloClient,"f").subscribe({query:(0,core_1$2.gql)` subscription {
                perspectiveAdded { ${PERSPECTIVE_HANDLE_FIELDS} }
            }   
        `}).subscribe({next:t=>{__classPrivateFieldGet$4(this,_PerspectiveClient_perspectiveAddedCallbacks,"f").forEach(n=>{n(t.data.perspectiveAdded)})},error:t=>console.error(t)})}addPerspectiveUpdatedListener(t){__classPrivateFieldGet$4(this,_PerspectiveClient_perspectiveUpdatedCallbacks,"f").push(t)}subscribePerspectiveUpdated(){__classPrivateFieldGet$4(this,_PerspectiveClient_apolloClient,"f").subscribe({query:(0,core_1$2.gql)` subscription {
                perspectiveUpdated { ${PERSPECTIVE_HANDLE_FIELDS} }
            }   
        `}).subscribe({next:t=>{__classPrivateFieldGet$4(this,_PerspectiveClient_perspectiveUpdatedCallbacks,"f").forEach(n=>{n(t.data.perspectiveUpdated)})},error:t=>console.error(t)})}addPerspectiveRemovedListener(t){__classPrivateFieldGet$4(this,_PerspectiveClient_perspectiveRemovedCallbacks,"f").push(t)}subscribePerspectiveRemoved(){__classPrivateFieldGet$4(this,_PerspectiveClient_apolloClient,"f").subscribe({query:(0,core_1$2.gql)` subscription {
                perspectiveRemoved
            }   
        `}).subscribe({next:t=>{__classPrivateFieldGet$4(this,_PerspectiveClient_perspectiveRemovedCallbacks,"f").forEach(n=>{n(t.data.perspectiveRemoved)})},error:t=>console.error(t)})}async addPerspectiveLinkAddedListener(t,n){__classPrivateFieldGet$4(this,_PerspectiveClient_apolloClient,"f").subscribe({query:(0,core_1$2.gql)` subscription {
                perspectiveLinkAdded(uuid: "${t}") { ${LINK_EXPRESSION_FIELDS} }
            }   
        `}).subscribe({next:r=>{n.forEach(o=>{o(r.data.perspectiveLinkAdded)})},error:r=>console.error(r)}),await new Promise(r=>setTimeout(r,500))}async addPerspectiveLinkRemovedListener(t,n){__classPrivateFieldGet$4(this,_PerspectiveClient_apolloClient,"f").subscribe({query:(0,core_1$2.gql)` subscription {
                perspectiveLinkRemoved(uuid: "${t}") { ${LINK_EXPRESSION_FIELDS} }
            }   
        `}).subscribe({next:r=>{n.forEach(o=>{o(r.data.perspectiveLinkRemoved)})},error:r=>console.error(r)}),await new Promise(r=>setTimeout(r,500))}}PerspectiveClient$1.default=PerspectiveClient,_PerspectiveClient_apolloClient=new WeakMap,_PerspectiveClient_perspectiveAddedCallbacks=new WeakMap,_PerspectiveClient_perspectiveUpdatedCallbacks=new WeakMap,_PerspectiveClient_perspectiveRemovedCallbacks=new WeakMap;var RuntimeClient$1={},__classPrivateFieldSet$3=commonjsGlobal$1&&commonjsGlobal$1.__classPrivateFieldSet||function(e,t,n,r,o){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?o.call(e,n):o?o.value=n:t.set(e,n),n},__classPrivateFieldGet$3=commonjsGlobal$1&&commonjsGlobal$1.__classPrivateFieldGet||function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},__importDefault$2=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},_RuntimeClient_apolloClient,_RuntimeClient_messageReceivedCallbacks,_RuntimeClient_exceptionOccurredCallbacks;Object.defineProperty(RuntimeClient$1,"__esModule",{value:!0});const core_1$1=require$$0,unwrapApolloResult_1$1=__importDefault$2(unwrapApolloResult$1),PERSPECTIVE_EXPRESSION_FIELDS=`
author
timestamp
data { 
    links {
        author
        timestamp
        data { source, predicate, target }
        proof { valid, invalid, signature, key }
    }  
}
proof { valid, invalid, signature, key }
`;class RuntimeClient{constructor(t,n=!0){_RuntimeClient_apolloClient.set(this,void 0),_RuntimeClient_messageReceivedCallbacks.set(this,void 0),_RuntimeClient_exceptionOccurredCallbacks.set(this,void 0),__classPrivateFieldSet$3(this,_RuntimeClient_apolloClient,t,"f"),__classPrivateFieldSet$3(this,_RuntimeClient_messageReceivedCallbacks,[],"f"),__classPrivateFieldSet$3(this,_RuntimeClient_exceptionOccurredCallbacks,[],"f"),n&&(this.subscribeMessageReceived(),this.subscribeExceptionOccurred())}async info(){const{runtimeInfo:t}=(0,unwrapApolloResult_1$1.default)(await __classPrivateFieldGet$3(this,_RuntimeClient_apolloClient,"f").query({query:(0,core_1$1.gql)`query runtimeInfo {
                runtimeInfo {
                    ad4mExecutorVersion
                }
            }`}));return t}async quit(){return(0,unwrapApolloResult_1$1.default)(await __classPrivateFieldGet$3(this,_RuntimeClient_apolloClient,"f").mutate({mutation:(0,core_1$1.gql)`mutation runtimeQuit { runtimeQuit }`})).runtimeQuit}async openLink(t){const{runtimeOpenLink:n}=(0,unwrapApolloResult_1$1.default)(await __classPrivateFieldGet$3(this,_RuntimeClient_apolloClient,"f").mutate({mutation:(0,core_1$1.gql)`mutation runtimeOpenLink($url: String!) {
                runtimeOpenLink(url: $url)
            }`,variables:{url:t}}));return n}async addTrustedAgents(t){const{addTrustedAgents:n}=(0,unwrapApolloResult_1$1.default)(await __classPrivateFieldGet$3(this,_RuntimeClient_apolloClient,"f").mutate({mutation:(0,core_1$1.gql)`mutation addTrustedAgents($agents: [String!]!) {
                addTrustedAgents(agents: $agents)
            }`,variables:{agents:t}}));return n}async deleteTrustedAgents(t){const{deleteTrustedAgents:n}=(0,unwrapApolloResult_1$1.default)(await __classPrivateFieldGet$3(this,_RuntimeClient_apolloClient,"f").mutate({mutation:(0,core_1$1.gql)`mutation deleteTrustedAgents($agents: [String!]!) {
                deleteTrustedAgents(agents: $agents)
            }`,variables:{agents:t}}));return n}async getTrustedAgents(){const{getTrustedAgents:t}=(0,unwrapApolloResult_1$1.default)(await __classPrivateFieldGet$3(this,_RuntimeClient_apolloClient,"f").query({query:(0,core_1$1.gql)`query getTrustedAgents {
                getTrustedAgents
            }`}));return t}async addKnownLinkLanguageTemplates(t){const{runtimeAddKnownLinkLanguageTemplates:n}=(0,unwrapApolloResult_1$1.default)(await __classPrivateFieldGet$3(this,_RuntimeClient_apolloClient,"f").mutate({mutation:(0,core_1$1.gql)`mutation runtimeAddKnownLinkLanguageTemplates($addresses: [String!]!) {
                runtimeAddKnownLinkLanguageTemplates(addresses: $addresses)
            }`,variables:{addresses:t}}));return n}async removeKnownLinkLanguageTemplates(t){const{runtimeRemoveKnownLinkLanguageTemplates:n}=(0,unwrapApolloResult_1$1.default)(await __classPrivateFieldGet$3(this,_RuntimeClient_apolloClient,"f").mutate({mutation:(0,core_1$1.gql)`mutation runtimeRemoveKnownLinkLanguageTemplates($addresses: [String!]!) {
                runtimeRemoveKnownLinkLanguageTemplates(addresses: $addresses)
            }`,variables:{addresses:t}}));return n}async knownLinkLanguageTemplates(){const{runtimeKnownLinkLanguageTemplates:t}=(0,unwrapApolloResult_1$1.default)(await __classPrivateFieldGet$3(this,_RuntimeClient_apolloClient,"f").query({query:(0,core_1$1.gql)`query runtimeKnownLinkLanguageTemplates {
                runtimeKnownLinkLanguageTemplates
            }`}));return t}async addFriends(t){const{runtimeAddFriends:n}=(0,unwrapApolloResult_1$1.default)(await __classPrivateFieldGet$3(this,_RuntimeClient_apolloClient,"f").mutate({mutation:(0,core_1$1.gql)`mutation runtimeAddFriends($dids: [String!]!) {
                runtimeAddFriends(dids: $dids)
            }`,variables:{dids:t}}));return n}async removeFriends(t){const{runtimeRemoveFriends:n}=(0,unwrapApolloResult_1$1.default)(await __classPrivateFieldGet$3(this,_RuntimeClient_apolloClient,"f").mutate({mutation:(0,core_1$1.gql)`mutation runtimeRemoveFriends($dids: [String!]!) {
                runtimeRemoveFriends(dids: $dids)
            }`,variables:{dids:t}}));return n}async friends(){const{runtimeFriends:t}=(0,unwrapApolloResult_1$1.default)(await __classPrivateFieldGet$3(this,_RuntimeClient_apolloClient,"f").query({query:(0,core_1$1.gql)`query runtimeFriends {
                runtimeFriends
            }`}));return t}async hcAgentInfos(){const{runtimeHcAgentInfos:t}=(0,unwrapApolloResult_1$1.default)(await __classPrivateFieldGet$3(this,_RuntimeClient_apolloClient,"f").query({query:(0,core_1$1.gql)`query runtimeHcAgentInfos {
                runtimeHcAgentInfos
            }`}));return t}async hcAddAgentInfos(t){const{runtimeHcAddAgentInfos:n}=(0,unwrapApolloResult_1$1.default)(await __classPrivateFieldGet$3(this,_RuntimeClient_apolloClient,"f").mutate({mutation:(0,core_1$1.gql)`mutation runtimeHcAddAgentInfos($agentInfos: String!) {
                runtimeHcAddAgentInfos(agentInfos: $agentInfos)
            }`,variables:{agentInfos:t}}));return n}async verifyStringSignedByDid(t,n,r,o){const{runtimeVerifyStringSignedByDid:a}=(0,unwrapApolloResult_1$1.default)(await __classPrivateFieldGet$3(this,_RuntimeClient_apolloClient,"f").mutate({mutation:(0,core_1$1.gql)`query runtimeVerifyStringSignedByDid($did: String!, $didSigningKeyId: String!, $data: String!, $signedData: String!) {
                runtimeVerifyStringSignedByDid(did: $did, didSigningKeyId: $didSigningKeyId, data: $data, signedData: $signedData)
            }`,variables:{did:t,didSigningKeyId:n,data:r,signedData:o}}));return a}async setStatus(t){const{runtimeSetStatus:n}=(0,unwrapApolloResult_1$1.default)(await __classPrivateFieldGet$3(this,_RuntimeClient_apolloClient,"f").mutate({mutation:(0,core_1$1.gql)`mutation runtimeSetStatus($status: PerspectiveInput!) {
                runtimeSetStatus(status: $status)
            }`,variables:{status:t}}));return n}async friendStatus(t){const{runtimeFriendStatus:n}=(0,unwrapApolloResult_1$1.default)(await __classPrivateFieldGet$3(this,_RuntimeClient_apolloClient,"f").query({query:(0,core_1$1.gql)`query runtimeFriendStatus($did: String!) {
                runtimeFriendStatus(did: $did) { ${PERSPECTIVE_EXPRESSION_FIELDS} }
            }`,variables:{did:t}}));return n}async friendSendMessage(t,n){const{runtimeFriendSendMessage:r}=(0,unwrapApolloResult_1$1.default)(await __classPrivateFieldGet$3(this,_RuntimeClient_apolloClient,"f").mutate({mutation:(0,core_1$1.gql)`mutation runtimeFriendSendMessage($did: String!, $message: PerspectiveInput!) {
                runtimeFriendSendMessage(did: $did, message: $message)
            }`,variables:{did:t,message:n}}));return r}async messageInbox(t){const{runtimeMessageInbox:n}=(0,unwrapApolloResult_1$1.default)(await __classPrivateFieldGet$3(this,_RuntimeClient_apolloClient,"f").query({query:(0,core_1$1.gql)`query runtimeMessageInbox($filter: String) {
                runtimeMessageInbox(filter: $filter) { ${PERSPECTIVE_EXPRESSION_FIELDS} }
            }`,variables:{filter:t}}));return n}async messageOutbox(t){const{runtimeMessageOutbox:n}=(0,unwrapApolloResult_1$1.default)(await __classPrivateFieldGet$3(this,_RuntimeClient_apolloClient,"f").query({query:(0,core_1$1.gql)`query runtimeMessageOutbox($filter: String) {
                runtimeMessageOutbox(filter: $filter) { 
                    recipient,
                    message {
                        ${PERSPECTIVE_EXPRESSION_FIELDS} 
                    }
                }
            }`,variables:{filter:t}}));return n}addMessageCallback(t){__classPrivateFieldGet$3(this,_RuntimeClient_messageReceivedCallbacks,"f").push(t)}subscribeMessageReceived(){__classPrivateFieldGet$3(this,_RuntimeClient_apolloClient,"f").subscribe({query:(0,core_1$1.gql)` subscription {
                runtimeMessageReceived { ${PERSPECTIVE_EXPRESSION_FIELDS} }
            }   
        `}).subscribe({next:t=>{__classPrivateFieldGet$3(this,_RuntimeClient_messageReceivedCallbacks,"f").forEach(n=>{n(t.data.runtimeMessageReceived)})},error:t=>console.error(t)})}addExceptionCallback(t){__classPrivateFieldGet$3(this,_RuntimeClient_exceptionOccurredCallbacks,"f").push(t)}subscribeExceptionOccurred(){__classPrivateFieldGet$3(this,_RuntimeClient_apolloClient,"f").subscribe({query:(0,core_1$1.gql)` subscription {
                exceptionOccurred {
                    title
                    message
                    type
                    addon
                }
            }`}).subscribe({next:t=>{__classPrivateFieldGet$3(this,_RuntimeClient_exceptionOccurredCallbacks,"f").forEach(n=>{n(t.data.exceptionOccurred)})},error:t=>console.error(t)})}}RuntimeClient$1.default=RuntimeClient,_RuntimeClient_apolloClient=new WeakMap,_RuntimeClient_messageReceivedCallbacks=new WeakMap,_RuntimeClient_exceptionOccurredCallbacks=new WeakMap;var ExpressionClient$1={},__classPrivateFieldSet$2=commonjsGlobal$1&&commonjsGlobal$1.__classPrivateFieldSet||function(e,t,n,r,o){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?o.call(e,n):o?o.value=n:t.set(e,n),n},__classPrivateFieldGet$2=commonjsGlobal$1&&commonjsGlobal$1.__classPrivateFieldGet||function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},__importDefault$1=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},_ExpressionClient_apolloClient;Object.defineProperty(ExpressionClient$1,"__esModule",{value:!0});const core_1=require$$0,unwrapApolloResult_1=__importDefault$1(unwrapApolloResult$1);class ExpressionClient{constructor(t){_ExpressionClient_apolloClient.set(this,void 0),__classPrivateFieldSet$2(this,_ExpressionClient_apolloClient,t,"f")}async get(t){const{expression:n}=(0,unwrapApolloResult_1.default)(await __classPrivateFieldGet$2(this,_ExpressionClient_apolloClient,"f").query({query:(0,core_1.gql)`query expression($url: String!) {
                expression(url: $url) {
                    author
                    timestamp
                    data
                    language {
                        address
                    }
                    proof {
                        valid
                        invalid
                    }
                }
            }`,variables:{url:t}}));return n}async getMany(t){const{expressionMany:n}=(0,unwrapApolloResult_1.default)(await __classPrivateFieldGet$2(this,_ExpressionClient_apolloClient,"f").query({query:(0,core_1.gql)`query expressionMany($urls: [String!]!) {
                expressionMany(urls: $urls) {
                    author
                    timestamp
                    data
                    language {
                        address
                    }
                    proof {
                        valid
                        invalid
                    }
                }
            }`,variables:{urls:t}}));return n}async getRaw(t){const{expressionRaw:n}=(0,unwrapApolloResult_1.default)(await __classPrivateFieldGet$2(this,_ExpressionClient_apolloClient,"f").query({query:(0,core_1.gql)`query expressionRaw($url: String!) {
                expressionRaw(url: $url)
            }`,variables:{url:t}}));return n}async create(t,n){t=JSON.stringify(t);const{expressionCreate:r}=(0,unwrapApolloResult_1.default)(await __classPrivateFieldGet$2(this,_ExpressionClient_apolloClient,"f").mutate({mutation:(0,core_1.gql)`mutation expressionCreate($content: String!, $languageAddress: String!){
                expressionCreate(content: $content, languageAddress: $languageAddress)
            }`,variables:{content:t,languageAddress:n}}));return r}async interactions(t){const{expressionInteractions:n}=(0,unwrapApolloResult_1.default)(await __classPrivateFieldGet$2(this,_ExpressionClient_apolloClient,"f").query({query:(0,core_1.gql)`query expressionInteractions($url: String!) {
                expressionInteractions(url: $url) { 
                    label
                    name
                    parameters { name, type }
                }
            }`,variables:{url:t}}));return n}async interact(t,n){const{expressionInteract:r}=(0,unwrapApolloResult_1.default)(await __classPrivateFieldGet$2(this,_ExpressionClient_apolloClient,"f").mutate({mutation:(0,core_1.gql)`mutation expressionInteract($url: String!, $interactionCall: InteractionCall!){
                expressionInteract(url: $url, interactionCall: $interactionCall)
            }`,variables:{url:t,interactionCall:n}}));return r}}ExpressionClient$1.default=ExpressionClient,_ExpressionClient_apolloClient=new WeakMap;var __classPrivateFieldSet$1=commonjsGlobal$1&&commonjsGlobal$1.__classPrivateFieldSet||function(e,t,n,r,o){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?o.call(e,n):o?o.value=n:t.set(e,n),n},__classPrivateFieldGet$1=commonjsGlobal$1&&commonjsGlobal$1.__classPrivateFieldGet||function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},__importDefault=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},_Ad4mClient_apolloClient,_Ad4mClient_agentClient,_Ad4mClient_expressionClient,_Ad4mClient_languageClient,_Ad4mClient_neighbourhoodClient,_Ad4mClient_perspectiveClient,_Ad4mClient_runtimeClient;Object.defineProperty(Ad4mClient$1,"__esModule",{value:!0}),Ad4mClient$1.Ad4mClient=void 0;const AgentClient_1=__importDefault(AgentClient$1),LanguageClient_1=LanguageClient$1,NeighbourhoodClient_1=__importDefault(NeighbourhoodClient$1),PerspectiveClient_1=__importDefault(PerspectiveClient$1),RuntimeClient_1=__importDefault(RuntimeClient$1),ExpressionClient_1=__importDefault(ExpressionClient$1);class Ad4mClient{constructor(t,n=!0){_Ad4mClient_apolloClient.set(this,void 0),_Ad4mClient_agentClient.set(this,void 0),_Ad4mClient_expressionClient.set(this,void 0),_Ad4mClient_languageClient.set(this,void 0),_Ad4mClient_neighbourhoodClient.set(this,void 0),_Ad4mClient_perspectiveClient.set(this,void 0),_Ad4mClient_runtimeClient.set(this,void 0),__classPrivateFieldSet$1(this,_Ad4mClient_apolloClient,t,"f"),__classPrivateFieldSet$1(this,_Ad4mClient_agentClient,new AgentClient_1.default(t,n),"f"),__classPrivateFieldSet$1(this,_Ad4mClient_expressionClient,new ExpressionClient_1.default(t),"f"),__classPrivateFieldSet$1(this,_Ad4mClient_languageClient,new LanguageClient_1.LanguageClient(t),"f"),__classPrivateFieldSet$1(this,_Ad4mClient_neighbourhoodClient,new NeighbourhoodClient_1.default(t),"f"),__classPrivateFieldSet$1(this,_Ad4mClient_perspectiveClient,new PerspectiveClient_1.default(t,n),"f"),__classPrivateFieldSet$1(this,_Ad4mClient_runtimeClient,new RuntimeClient_1.default(t,n),"f")}get agent(){return __classPrivateFieldGet$1(this,_Ad4mClient_agentClient,"f")}get expression(){return __classPrivateFieldGet$1(this,_Ad4mClient_expressionClient,"f")}get languages(){return __classPrivateFieldGet$1(this,_Ad4mClient_languageClient,"f")}get neighbourhood(){return __classPrivateFieldGet$1(this,_Ad4mClient_neighbourhoodClient,"f")}get perspective(){return __classPrivateFieldGet$1(this,_Ad4mClient_perspectiveClient,"f")}get runtime(){return __classPrivateFieldGet$1(this,_Ad4mClient_runtimeClient,"f")}}Ad4mClient$1.Ad4mClient=Ad4mClient,_Ad4mClient_apolloClient=new WeakMap,_Ad4mClient_agentClient=new WeakMap,_Ad4mClient_expressionClient=new WeakMap,_Ad4mClient_languageClient=new WeakMap,_Ad4mClient_neighbourhoodClient=new WeakMap,_Ad4mClient_perspectiveClient=new WeakMap,_Ad4mClient_runtimeClient=new WeakMap;var Address={};Object.defineProperty(Address,"__esModule",{value:!0});var Exception={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ExceptionType=void 0,function(t){t[t.LanguageIsNotLoaded=0]="LanguageIsNotLoaded",t[t.ExpressionIsNotVerified=1]="ExpressionIsNotVerified",t[t.AgentIsUntrusted=2]="AgentIsUntrusted",t[t.CapabilityRequested=3]="CapabilityRequested"}(e.ExceptionType||(e.ExceptionType={}))})(Exception);var ExpressionRef$1={},__decorate$6=commonjsGlobal$1&&commonjsGlobal$1.__decorate||function(e,t,n,r){var o=arguments.length,a=o<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(e,t,n,r);else for(var u=e.length-1;u>=0;u--)(s=e[u])&&(a=(o<3?s(a):o>3?s(t,n,a):s(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},__metadata$6=commonjsGlobal$1&&commonjsGlobal$1.__metadata||function(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)};Object.defineProperty(ExpressionRef$1,"__esModule",{value:!0}),ExpressionRef$1.parseExprUrl=ExpressionRef$1.exprRef2String=ExpressionRef$1.ExpressionRef=void 0;const LanguageRef_1=LanguageRef$1,type_graphql_1$6=typeGraphql;let ExpressionRef=class{constructor(t,n){this.language=t,this.expression=n}};__decorate$6([(0,type_graphql_1$6.Field)(),__metadata$6("design:type",LanguageRef_1.LanguageRef)],ExpressionRef.prototype,"language",void 0),__decorate$6([(0,type_graphql_1$6.Field)(),__metadata$6("design:type",String)],ExpressionRef.prototype,"expression",void 0),ExpressionRef=__decorate$6([(0,type_graphql_1$6.ObjectType)(),__metadata$6("design:paramtypes",[LanguageRef_1.LanguageRef,String])],ExpressionRef),ExpressionRef$1.ExpressionRef=ExpressionRef;function exprRef2String(e){return e.language.address==="did"?e.expression.toString():`${e.language.address}://${e.expression}`}ExpressionRef$1.exprRef2String=exprRef2String;function parseExprUrl(e){if(e.startsWith("literal://")){const a=new LanguageRef_1.LanguageRef;a.address="literal",a.name="literal";const s=e.substring(10);return new ExpressionRef(a,s)}const n=/^([^:^\s]+):\/\/([\s\S]+)$/.exec(e);if(n&&n.length==3){const a=n[1],s=n[2],u=new LanguageRef_1.LanguageRef;return u.address=a,new ExpressionRef(u,s)}const o=/^did:([^\s]+)$/.exec(e);if(o&&o.length==2){const a=new LanguageRef_1.LanguageRef;return a.address="did",new ExpressionRef(a,e)}throw new Error("Couldn't parse string as expression URL or DID: "+e)}ExpressionRef$1.parseExprUrl=parseExprUrl;var Language={},__decorate$5=commonjsGlobal$1&&commonjsGlobal$1.__decorate||function(e,t,n,r){var o=arguments.length,a=o<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(e,t,n,r);else for(var u=e.length-1;u>=0;u--)(s=e[u])&&(a=(o<3?s(a):o>3?s(t,n,a):s(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},__metadata$5=commonjsGlobal$1&&commonjsGlobal$1.__metadata||function(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)};Object.defineProperty(Language,"__esModule",{value:!0}),Language.TelepresenceRpcCall=Language.OnlineAgent=Language.InteractionCall=Language.InteractionMeta=Language.InteractionParameter=void 0;const type_graphql_1$5=typeGraphql;let InteractionParameter=class{};__decorate$5([(0,type_graphql_1$5.Field)(),__metadata$5("design:type",String)],InteractionParameter.prototype,"name",void 0),__decorate$5([(0,type_graphql_1$5.Field)(),__metadata$5("design:type",String)],InteractionParameter.prototype,"type",void 0),InteractionParameter=__decorate$5([(0,type_graphql_1$5.ObjectType)()],InteractionParameter),Language.InteractionParameter=InteractionParameter;let InteractionMeta=class{};__decorate$5([(0,type_graphql_1$5.Field)(),__metadata$5("design:type",String)],InteractionMeta.prototype,"label",void 0),__decorate$5([(0,type_graphql_1$5.Field)(),__metadata$5("design:type",String)],InteractionMeta.prototype,"name",void 0),__decorate$5([(0,type_graphql_1$5.Field)(e=>[InteractionParameter]),__metadata$5("design:type",Array)],InteractionMeta.prototype,"parameters",void 0),InteractionMeta=__decorate$5([(0,type_graphql_1$5.ObjectType)()],InteractionMeta),Language.InteractionMeta=InteractionMeta;let InteractionCall=class{constructor(t,n){this.name=t,this.parametersStringified=JSON.stringify(n)}get parameters(){return JSON.parse(this.parametersStringified)}};__decorate$5([(0,type_graphql_1$5.Field)(),__metadata$5("design:type",String)],InteractionCall.prototype,"name",void 0),__decorate$5([(0,type_graphql_1$5.Field)(),__metadata$5("design:type",String)],InteractionCall.prototype,"parametersStringified",void 0),InteractionCall=__decorate$5([(0,type_graphql_1$5.InputType)(),__metadata$5("design:paramtypes",[String,Object])],InteractionCall),Language.InteractionCall=InteractionCall;class OnlineAgent{}Language.OnlineAgent=OnlineAgent;class TelepresenceRpcCall{}Language.TelepresenceRpcCall=TelepresenceRpcCall;var LanguageContext={};Object.defineProperty(LanguageContext,"__esModule",{value:!0}),LanguageContext.Dna=void 0;class Dna{}LanguageContext.Dna=Dna;var LanguageHandle$1={},__decorate$4=commonjsGlobal$1&&commonjsGlobal$1.__decorate||function(e,t,n,r){var o=arguments.length,a=o<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(e,t,n,r);else for(var u=e.length-1;u>=0;u--)(s=e[u])&&(a=(o<3?s(a):o>3?s(t,n,a):s(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},__metadata$4=commonjsGlobal$1&&commonjsGlobal$1.__metadata||function(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)};Object.defineProperty(LanguageHandle$1,"__esModule",{value:!0}),LanguageHandle$1.LanguageHandle=void 0;const type_graphql_1$4=typeGraphql,Icon_1=Icon$1;let LanguageHandle=class{};__decorate$4([(0,type_graphql_1$4.Field)(),__metadata$4("design:type",String)],LanguageHandle.prototype,"name",void 0),__decorate$4([(0,type_graphql_1$4.Field)(),__metadata$4("design:type",String)],LanguageHandle.prototype,"address",void 0),__decorate$4([(0,type_graphql_1$4.Field)({nullable:!0}),__metadata$4("design:type",String)],LanguageHandle.prototype,"settings",void 0),__decorate$4([(0,type_graphql_1$4.Field)({nullable:!0}),__metadata$4("design:type",Icon_1.Icon)],LanguageHandle.prototype,"icon",void 0),__decorate$4([(0,type_graphql_1$4.Field)({nullable:!0}),__metadata$4("design:type",Icon_1.Icon)],LanguageHandle.prototype,"constructorIcon",void 0),__decorate$4([(0,type_graphql_1$4.Field)({nullable:!0}),__metadata$4("design:type",Icon_1.Icon)],LanguageHandle.prototype,"settingsIcon",void 0),LanguageHandle=__decorate$4([(0,type_graphql_1$4.ObjectType)()],LanguageHandle),LanguageHandle$1.LanguageHandle=LanguageHandle;var LanguageMeta$1={},__decorate$3=commonjsGlobal$1&&commonjsGlobal$1.__decorate||function(e,t,n,r){var o=arguments.length,a=o<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(e,t,n,r);else for(var u=e.length-1;u>=0;u--)(s=e[u])&&(a=(o<3?s(a):o>3?s(t,n,a):s(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},__metadata$3=commonjsGlobal$1&&commonjsGlobal$1.__metadata||function(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)};Object.defineProperty(LanguageMeta$1,"__esModule",{value:!0}),LanguageMeta$1.LanguageLanguageInput=LanguageMeta$1.LanguageExpression=LanguageMeta$1.LanguageMetaInternal=LanguageMeta$1.LanguageMetaInput=LanguageMeta$1.LanguageMeta=void 0;const type_graphql_1$3=typeGraphql,Expression_1$2=Expression$1;let LanguageMeta=class{};__decorate$3([(0,type_graphql_1$3.Field)(),__metadata$3("design:type",String)],LanguageMeta.prototype,"name",void 0),__decorate$3([(0,type_graphql_1$3.Field)(),__metadata$3("design:type",String)],LanguageMeta.prototype,"address",void 0),__decorate$3([(0,type_graphql_1$3.Field)({nullable:!0}),__metadata$3("design:type",String)],LanguageMeta.prototype,"description",void 0),__decorate$3([(0,type_graphql_1$3.Field)(),__metadata$3("design:type",String)],LanguageMeta.prototype,"author",void 0),__decorate$3([(0,type_graphql_1$3.Field)({nullable:!0}),__metadata$3("design:type",Boolean)],LanguageMeta.prototype,"templated",void 0),__decorate$3([(0,type_graphql_1$3.Field)({nullable:!0}),__metadata$3("design:type",String)],LanguageMeta.prototype,"templateSourceLanguageAddress",void 0),__decorate$3([(0,type_graphql_1$3.Field)({nullable:!0}),__metadata$3("design:type",String)],LanguageMeta.prototype,"templateAppliedParams",void 0),__decorate$3([(0,type_graphql_1$3.Field)(e=>[String],{nullable:!0}),__metadata$3("design:type",Array)],LanguageMeta.prototype,"possibleTemplateParams",void 0),__decorate$3([(0,type_graphql_1$3.Field)({nullable:!0}),__metadata$3("design:type",String)],LanguageMeta.prototype,"sourceCodeLink",void 0),LanguageMeta=__decorate$3([(0,type_graphql_1$3.ObjectType)()],LanguageMeta),LanguageMeta$1.LanguageMeta=LanguageMeta;let LanguageMetaInput=class{constructor(t,n){this.name=t,this.description=n,this.description||(this.description="")}};__decorate$3([(0,type_graphql_1$3.Field)(),__metadata$3("design:type",String)],LanguageMetaInput.prototype,"name",void 0),__decorate$3([(0,type_graphql_1$3.Field)(),__metadata$3("design:type",String)],LanguageMetaInput.prototype,"description",void 0),__decorate$3([(0,type_graphql_1$3.Field)(e=>[String],{nullable:!0}),__metadata$3("design:type",Array)],LanguageMetaInput.prototype,"possibleTemplateParams",void 0),__decorate$3([(0,type_graphql_1$3.Field)({nullable:!0}),__metadata$3("design:type",String)],LanguageMetaInput.prototype,"sourceCodeLink",void 0),LanguageMetaInput=__decorate$3([(0,type_graphql_1$3.InputType)(),__metadata$3("design:paramtypes",[String,String])],LanguageMetaInput),LanguageMeta$1.LanguageMetaInput=LanguageMetaInput;class LanguageMetaInternal{}LanguageMeta$1.LanguageMetaInternal=LanguageMetaInternal;class LanguageExpression extends(0,Expression_1$2.ExpressionGeneric)(LanguageMetaInternal){}LanguageMeta$1.LanguageExpression=LanguageExpression;class LanguageLanguageInput{}LanguageMeta$1.LanguageLanguageInput=LanguageLanguageInput;var Literal$1={},__classPrivateFieldSet=commonjsGlobal$1&&commonjsGlobal$1.__classPrivateFieldSet||function(e,t,n,r,o){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?o.call(e,n):o?o.value=n:t.set(e,n),n},__classPrivateFieldGet=commonjsGlobal$1&&commonjsGlobal$1.__classPrivateFieldGet||function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},_Literal_literal,_Literal_url;Object.defineProperty(Literal$1,"__esModule",{value:!0}),Literal$1.Literal=void 0;class Literal{constructor(){_Literal_literal.set(this,void 0),_Literal_url.set(this,void 0)}static fromUrl(t){if(!t||!t.startsWith("literal://"))throw new Error("Can't create Literal from non-literal URL");const n=new Literal;return __classPrivateFieldSet(n,_Literal_url,t,"f"),n}static from(t){const n=new Literal;return __classPrivateFieldSet(n,_Literal_literal,t,"f"),n}encodeSingleQuote(t){return t=t.split("'").join("\\'"),t}decodeSingleQuote(t){return t=t.split("\\'").join("'"),t}toUrl(){if(__classPrivateFieldGet(this,_Literal_url,"f")&&!__classPrivateFieldGet(this,_Literal_literal,"f"))return __classPrivateFieldGet(this,_Literal_url,"f");if(!__classPrivateFieldGet(this,_Literal_url,"f")&&!__classPrivateFieldGet(this,_Literal_literal,"f"))throw new Error("Can't turn empty Literal into URL");let t;switch(typeof __classPrivateFieldGet(this,_Literal_literal,"f")){case"string":t=`string:${__classPrivateFieldGet(this,_Literal_literal,"f")}`;break;case"number":t=`number:${__classPrivateFieldGet(this,_Literal_literal,"f")}`;break;case"object":t=`json:${JSON.stringify(__classPrivateFieldGet(this,_Literal_literal,"f"))}`;break}return this.encodeSingleQuote(encodeURI(`literal://${t}`))}get(){if(__classPrivateFieldGet(this,_Literal_literal,"f"))return __classPrivateFieldGet(this,_Literal_literal,"f");if(!__classPrivateFieldGet(this,_Literal_url,"f"))throw new Error("Can't render empty Literal");if(!__classPrivateFieldGet(this,_Literal_url,"f").startsWith("literal://"))throw new Error("Can't render Literal from non-literal URL");const t=decodeURI(this.decodeSingleQuote(__classPrivateFieldGet(this,_Literal_url,"f").substring(10)));if(t.startsWith("string:"))return t.substring(7);if(t.startsWith("number:")){const n=t.substring(7);return parseFloat(n)}if(t.startsWith("json:")){const n=t.substring(5);return JSON.parse(n)}throw new Error(`Can't parse unknown literal: ${t}`)}}Literal$1.Literal=Literal,_Literal_literal=new WeakMap,_Literal_url=new WeakMap;var PerspectiveHandle$1={},Neighbourhood$1={},__decorate$2=commonjsGlobal$1&&commonjsGlobal$1.__decorate||function(e,t,n,r){var o=arguments.length,a=o<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(e,t,n,r);else for(var u=e.length-1;u>=0;u--)(s=e[u])&&(a=(o<3?s(a):o>3?s(t,n,a):s(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},__metadata$2=commonjsGlobal$1&&commonjsGlobal$1.__metadata||function(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)};Object.defineProperty(Neighbourhood$1,"__esModule",{value:!0}),Neighbourhood$1.NeighbourhoodExpression=Neighbourhood$1.Neighbourhood=void 0;const type_graphql_1$2=typeGraphql,Expression_1$1=Expression$1,Perspective_1=Perspective$1;let Neighbourhood=class{constructor(t,n){this.linkLanguage=t,this.meta=n}};__decorate$2([(0,type_graphql_1$2.Field)(),__metadata$2("design:type",String)],Neighbourhood.prototype,"linkLanguage",void 0),__decorate$2([(0,type_graphql_1$2.Field)(),__metadata$2("design:type",Perspective_1.Perspective)],Neighbourhood.prototype,"meta",void 0),Neighbourhood=__decorate$2([(0,type_graphql_1$2.ObjectType)(),__metadata$2("design:paramtypes",[String,Perspective_1.Perspective])],Neighbourhood),Neighbourhood$1.Neighbourhood=Neighbourhood;let NeighbourhoodExpression=class extends(0,Expression_1$1.ExpressionGeneric)(Neighbourhood){};NeighbourhoodExpression=__decorate$2([(0,type_graphql_1$2.ObjectType)()],NeighbourhoodExpression),Neighbourhood$1.NeighbourhoodExpression=NeighbourhoodExpression;var __decorate$1=commonjsGlobal$1&&commonjsGlobal$1.__decorate||function(e,t,n,r){var o=arguments.length,a=o<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(e,t,n,r);else for(var u=e.length-1;u>=0;u--)(s=e[u])&&(a=(o<3?s(a):o>3?s(t,n,a):s(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},__metadata$1=commonjsGlobal$1&&commonjsGlobal$1.__metadata||function(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)};Object.defineProperty(PerspectiveHandle$1,"__esModule",{value:!0}),PerspectiveHandle$1.PerspectiveHandle=void 0;const type_graphql_1$1=typeGraphql,Neighbourhood_1=Neighbourhood$1;let PerspectiveHandle=class{constructor(t,n){this.uuid=t,this.name=n}};__decorate$1([(0,type_graphql_1$1.Field)(),__metadata$1("design:type",String)],PerspectiveHandle.prototype,"uuid",void 0),__decorate$1([(0,type_graphql_1$1.Field)(),__metadata$1("design:type",String)],PerspectiveHandle.prototype,"name",void 0),__decorate$1([(0,type_graphql_1$1.Field)(e=>String,{nullable:!0}),__metadata$1("design:type",String)],PerspectiveHandle.prototype,"sharedUrl",void 0),__decorate$1([(0,type_graphql_1$1.Field)(e=>Neighbourhood_1.Neighbourhood,{nullable:!0}),__metadata$1("design:type",Neighbourhood_1.Neighbourhood)],PerspectiveHandle.prototype,"neighbourhood",void 0),PerspectiveHandle=__decorate$1([(0,type_graphql_1$1.ObjectType)(),__metadata$1("design:paramtypes",[String,String])],PerspectiveHandle),PerspectiveHandle$1.PerspectiveHandle=PerspectiveHandle;var PerspectiveDiff$1={},__decorate=commonjsGlobal$1&&commonjsGlobal$1.__decorate||function(e,t,n,r){var o=arguments.length,a=o<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(e,t,n,r);else for(var u=e.length-1;u>=0;u--)(s=e[u])&&(a=(o<3?s(a):o>3?s(t,n,a):s(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},__metadata=commonjsGlobal$1&&commonjsGlobal$1.__metadata||function(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)};Object.defineProperty(PerspectiveDiff$1,"__esModule",{value:!0}),PerspectiveDiff$1.PerspectiveDiffExpression=PerspectiveDiff$1.PerspectiveDiff=void 0;const type_graphql_1=typeGraphql,Expression_1=Expression$1,Links_1=Links;let PerspectiveDiff=class{};__decorate([(0,type_graphql_1.Field)(e=>[Links_1.LinkExpression]),__metadata("design:type",Array)],PerspectiveDiff.prototype,"additions",void 0),__decorate([(0,type_graphql_1.Field)(e=>[Links_1.LinkExpression]),__metadata("design:type",Array)],PerspectiveDiff.prototype,"removals",void 0),PerspectiveDiff=__decorate([(0,type_graphql_1.ObjectType)()],PerspectiveDiff),PerspectiveDiff$1.PerspectiveDiff=PerspectiveDiff;let PerspectiveDiffExpression=class extends(0,Expression_1.ExpressionGeneric)(PerspectiveDiff){};PerspectiveDiffExpression=__decorate([(0,type_graphql_1.ObjectType)()],PerspectiveDiffExpression),PerspectiveDiff$1.PerspectiveDiffExpression=PerspectiveDiffExpression;const typeDefsString=`
type Agent {
  did: String!
  directMessageLanguage: String
  perspective: Perspective
}

type AgentStatus {
  did: String
  didDocument: String
  error: String
  isInitialized: Boolean!
  isUnlocked: Boolean!
}

scalar DateTime

type EntanglementProof {
  deviceKey: String!
  deviceKeySignedByDid: String!
  deviceKeyType: String!
  did: String!
  didSignedByDeviceKey: String
  didSigningKeyId: String!
}

input EntanglementProofInput {
  deviceKey: String!
  deviceKeySignedByDid: String!
  deviceKeyType: String!
  did: String!
  didSignedByDeviceKey: String!
  didSigningKeyId: String!
}

type ExceptionInfo {
  addon: String
  message: String!
  title: String!
  type: Float!
}

type ExpressionProof {
  invalid: Boolean
  key: String!
  signature: String!
  valid: Boolean
}

input ExpressionProofInput {
  invalid: Boolean
  key: String!
  signature: String!
  valid: Boolean
}

type ExpressionRendered {
  author: String!
  data: String!
  icon: Icon!
  language: LanguageRef!
  proof: ExpressionProof!
  timestamp: String!
}

type Icon {
  code: String!
}

input InteractionCall {
  name: String!
  parametersStringified: String!
}

type InteractionMeta {
  label: String!
  name: String!
  parameters: [InteractionParameter!]!
}

type InteractionParameter {
  name: String!
  type: String!
}

type LanguageHandle {
  address: String!
  constructorIcon: Icon
  icon: Icon
  name: String!
  settings: String
  settingsIcon: Icon
}

type LanguageMeta {
  address: String!
  author: String!
  description: String
  name: String!
  possibleTemplateParams: [String!]
  sourceCodeLink: String
  templateAppliedParams: String
  templateSourceLanguageAddress: String
  templated: Boolean
}

input LanguageMetaInput {
  description: String = ""
  name: String!
  possibleTemplateParams: [String!]
  sourceCodeLink: String
}

type LanguageRef {
  address: String!
  name: String!
}

type Link {
  predicate: String
  source: String!
  target: String!
}

type LinkExpression {
  author: String!
  data: Link!
  proof: ExpressionProof!
  timestamp: String!
}

input LinkExpressionInput {
  author: String!
  data: LinkInput!
  proof: ExpressionProofInput!
  timestamp: String!
}

input LinkInput {
  predicate: String
  source: String!
  target: String!
}

input LinkQuery {
  fromDate: DateTime
  limit: Float
  predicate: String
  source: String
  target: String
  untilDate: DateTime
}

type Mutation {
  addTrustedAgents(agents: [String!]!): [String!]!
  agentAddEntanglementProofs(proofs: [EntanglementProofInput!]!): [EntanglementProof!]!
  agentDeleteEntanglementProofs(proofs: [EntanglementProofInput!]!): [EntanglementProof!]!
  agentEntanglementProofPreFlight(deviceKey: String!, deviceKeyType: String!): EntanglementProof!
  agentGenerate(passphrase: String!): AgentStatus!
  agentGenerateJwt(rand: String!, requestId: String!): String!
  agentImport(did: String!, didDocument: String!, keystore: String!, passphrase: String!): AgentStatus!
  agentLock(passphrase: String!): AgentStatus!
  agentPermitCapability(auth: String!): String!
  agentRequestCapability(appDesc: String!, appName: String!, appUrl: String!, capabilities: String!): String!
  agentUnlock(passphrase: String!): AgentStatus!
  agentUpdateDirectMessageLanguage(directMessageLanguage: String!): Agent!
  agentUpdatePublicPerspective(perspective: PerspectiveInput!): Agent!
  deleteTrustedAgents(agents: [String!]!): [String!]!
  expressionCreate(content: String!, languageAddress: String!): String!
  expressionInteract(interactionCall: InteractionCall!, url: String!): String
  languageApplyTemplateAndPublish(sourceLanguageHash: String!, templateData: String!): LanguageRef!
  languagePublish(languageMeta: LanguageMetaInput!, languagePath: String!): LanguageMeta!
  languageWriteSettings(languageAddress: String!, settings: String!): Boolean!
  neighbourhoodJoinFromUrl(url: String!): PerspectiveHandle!
  neighbourhoodPublishFromPerspective(linkLanguage: String!, meta: PerspectiveInput!, perspectiveUUID: String!): String!
  perspectiveAdd(name: String!): PerspectiveHandle!
  perspectiveAddLink(link: LinkInput!, uuid: String!): LinkExpression!
  perspectivePublishSnapshot(uuid: String!): String
  perspectiveRemove(uuid: String!): Boolean!
  perspectiveRemoveLink(link: LinkExpressionInput!, uuid: String!): Boolean!
  perspectiveUpdate(name: String!, uuid: String!): PerspectiveHandle
  perspectiveUpdateLink(newLink: LinkInput!, oldLink: LinkExpressionInput!, uuid: String!): LinkExpression!
  runtimeAddFriends(dids: [String!]!): [String!]!
  runtimeAddKnownLinkLanguageTemplates(addresses: [String!]!): [String!]!
  runtimeFriendSendMessage(did: String!, message: PerspectiveInput!): Boolean!
  runtimeHcAddAgentInfos(agentInfos: String!): Boolean!
  runtimeOpenLink(url: String!): Boolean!
  runtimeQuit: Boolean!
  runtimeRemoveFriends(dids: [String!]!): [String!]!
  runtimeRemoveKnownLinkLanguageTemplates(addresses: [String!]!): [String!]!
  runtimeSetStatus(status: PerspectiveInput!): Boolean!
}

type Neighbourhood {
  linkLanguage: String!
  meta: Perspective!
}

type Perspective {
  links: [LinkExpression!]!
}

type PerspectiveExpression {
  author: String!
  data: Perspective!
  proof: ExpressionProof!
  timestamp: String!
}

type PerspectiveHandle {
  name: String!
  neighbourhood: Neighbourhood
  sharedUrl: String
  uuid: String!
}

input PerspectiveInput {
  links: [LinkExpressionInput!]!
}

type Query {
  agent: Agent!
  agentByDID(did: String!): Agent
  agentGetEntanglementProofs: [EntanglementProof!]!
  agentIsLocked: Boolean!
  agentStatus: AgentStatus!
  expression(url: String!): ExpressionRendered
  expressionInteractions(url: String!): [InteractionMeta!]!
  expressionMany(urls: [String!]!): [ExpressionRendered]!
  expressionRaw(url: String!): String
  getTrustedAgents: [String!]!
  language(address: String!): LanguageHandle
  languageMeta(address: String!): LanguageMeta!
  languageSource(address: String!): String!
  languages(filter: String): [LanguageHandle!]!
  perspective(uuid: String!): PerspectiveHandle
  perspectiveQueryLinks(query: LinkQuery!, uuid: String!): [LinkExpression!]
  perspectiveQueryProlog(query: String!, uuid: String!): String!
  perspectiveSnapshot(uuid: String!): Perspective
  perspectives: [PerspectiveHandle!]!
  runtimeFriendStatus(did: String!): PerspectiveExpression
  runtimeFriends: [String!]!
  runtimeHcAgentInfos: String!
  runtimeInfo: RuntimeInfo!
  runtimeKnownLinkLanguageTemplates: [String!]!
  runtimeMessageInbox(filter: String): [PerspectiveExpression!]!
  runtimeMessageOutbox(filter: String): [SentMessage!]!
  runtimeVerifyStringSignedByDid(data: String!, did: String!, didSigningKeyId: String!, signedData: String!): Boolean!
}

type RuntimeInfo {
  ad4mExecutorVersion: String!
}

type SentMessage {
  message: PerspectiveExpression!
  recipient: String!
}

type Subscription {
  agentStatusChanged: AgentStatus
  agentUpdated: Agent
  exceptionOccurred: ExceptionInfo
  perspectiveAdded: PerspectiveHandle
  perspectiveLinkAdded(uuid: String!): LinkExpression
  perspectiveLinkRemoved(uuid: String!): LinkExpression
  perspectiveRemoved: String
  perspectiveUpdated: PerspectiveHandle
  runtimeMessageReceived: PerspectiveExpression
}
`;var typeDefs={typeDefsString};(function(e){var t=commonjsGlobal$1&&commonjsGlobal$1.__createBinding||(Object.create?function(r,o,a,s){s===void 0&&(s=a),Object.defineProperty(r,s,{enumerable:!0,get:function(){return o[a]}})}:function(r,o,a,s){s===void 0&&(s=a),r[s]=o[a]}),n=commonjsGlobal$1&&commonjsGlobal$1.__exportStar||function(r,o){for(var a in r)a!=="default"&&!Object.prototype.hasOwnProperty.call(o,a)&&t(o,r,a)};Object.defineProperty(e,"__esModule",{value:!0}),n(Ad4mClient$1,e),n(Address,e),n(Agent$1,e),n(AgentStatus$1,e),n(Exception,e),n(Expression$1,e),n(ExpressionRef$1,e),n(Icon$1,e),n(Language,e),n(LanguageRef$1,e),n(LanguageContext,e),n(LanguageHandle$1,e),n(LanguageMeta$1,e),n(Links,e),n(Literal$1,e),n(Perspective$1,e),n(PerspectiveHandle$1,e),n(PerspectiveProxy$1,e),n(PerspectiveDiff$1,e),n(LinkQuery$1,e),n(Neighbourhood$1,e),n(typeDefs,e)})(src);var index=getDefaultExportFromCjs(src);module.exports=index})(lib);class Profile$1{}class ProfileExpression extends lib.exports.ExpressionGeneric(Profile$1){}const DESCRIPTION="rdf://description",SELF="ad4m://self",CREATOR="rdf://creator",CREATED_AT="rdf://dateCreated",NAME="rdf://name",MEMBER="sioc://has_member",EXPRESSION="sioc://content_of",CHANNEL="flux://has_channel",CHANNEL_NAME="flux://has_channel_name",AD4M_CLASS="ad4m://has_class",FLUX_CHANNEL="flux://channel",FLUX_GROUP_NAME="flux://communityName",FLUX_GROUP_DESCRIPTION="flux://communityDescription",FLUX_GROUP_IMAGE="flux://communityImage",FLUX_GROUP_THUMBNAIL="flux://communityThumbnail";let nanoid=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((t,n)=>(n&=63,n<36?t+=n.toString(36):n<62?t+=(n-26).toString(36).toUpperCase():n>62?t+="-":t+="_",t),"");var zf$1=Object.create,Vi$1=Object.defineProperty,Hf$1=Object.defineProperties,dc$1=Object.getOwnPropertyDescriptor,Wf$1=Object.getOwnPropertyDescriptors,Kf$1=Object.getOwnPropertyNames,uc$1=Object.getOwnPropertySymbols,Yf$1=Object.getPrototypeOf,hc$1=Object.prototype.hasOwnProperty,Xf$1=Object.prototype.propertyIsEnumerable,fc$1=(e,t,n)=>t in e?Vi$1(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,pc$1=(e,t)=>{for(var n in t||(t={}))hc$1.call(t,n)&&fc$1(e,n,t[n]);if(uc$1)for(var n of uc$1(t))Xf$1.call(t,n)&&fc$1(e,n,t[n]);return e},gc$1=(e,t)=>Hf$1(e,Wf$1(t)),to$1=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Zf$1=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of Kf$1(t))!hc$1.call(e,o)&&o!==n&&Vi$1(e,o,{get:()=>t[o],enumerable:!(r=dc$1(t,o))||r.enumerable});return e},ro$1=(e,t,n)=>(n=e!=null?zf$1(Yf$1(e)):{},Zf$1(t||!e||!e.__esModule?Vi$1(n,"default",{value:e,enumerable:!0}):n,e)),St$2=(e,t,n,r)=>{for(var o=r>1?void 0:r?dc$1(t,n):t,a=e.length-1,s;a>=0;a--)(s=e[a])&&(o=(r?s(t,n,o):s(o))||o);return r&&o&&Vi$1(t,n,o),o},br$1=(e,t,n)=>new Promise((r,o)=>{var a=l=>{try{u(n.next(l))}catch(c){o(c)}},s=l=>{try{u(n.throw(l))}catch(c){o(c)}},u=l=>l.done?r(l.value):Promise.resolve(l.value).then(a,s);u((n=n.apply(e,t)).next())}),rl$1=to$1((e,t)=>{var n,r,o,a,s,u,l,c,m,me,xe,Ne,He,Ye,Je,vn,La,sr,Zr,zs,za,Hs,lc,Ty,_y;(function(xy){var Bb=typeof global=="object"?global:typeof self=="object"?self:typeof this=="object"?this:{};typeof define=="function"&&define.amd?define("tslib",["exports"],function(Bg){xy(Dy(Bb,Dy(Bg)))}):typeof t=="object"&&typeof t.exports=="object"?xy(Dy(Bb,Dy(t.exports))):xy(Dy(Bb));function Dy(Bg,yy){return Bg!==Bb&&(typeof Object.create=="function"?Object.defineProperty(Bg,"__esModule",{value:!0}):Bg.__esModule=!0),function(wy,Ay){return Bg[wy]=yy?yy(wy,Ay):Ay}}})(function(xy){var Bb=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Bg,yy){Bg.__proto__=yy}||function(Bg,yy){for(var wy in yy)Object.prototype.hasOwnProperty.call(yy,wy)&&(Bg[wy]=yy[wy])};n=function(Bg,yy){if(typeof yy!="function"&&yy!==null)throw new TypeError("Class extends value "+String(yy)+" is not a constructor or null");Bb(Bg,yy);function wy(){this.constructor=Bg}Bg.prototype=yy===null?Object.create(yy):(wy.prototype=yy.prototype,new wy)},r=Object.assign||function(Bg){for(var yy,wy=1,Ay=arguments.length;wy<Ay;wy++){yy=arguments[wy];for(var $b in yy)Object.prototype.hasOwnProperty.call(yy,$b)&&(Bg[$b]=yy[$b])}return Bg},o=function(Bg,yy){var wy={};for(var Ay in Bg)Object.prototype.hasOwnProperty.call(Bg,Ay)&&yy.indexOf(Ay)<0&&(wy[Ay]=Bg[Ay]);if(Bg!=null&&typeof Object.getOwnPropertySymbols=="function")for(var $b=0,Ay=Object.getOwnPropertySymbols(Bg);$b<Ay.length;$b++)yy.indexOf(Ay[$b])<0&&Object.prototype.propertyIsEnumerable.call(Bg,Ay[$b])&&(wy[Ay[$b]]=Bg[Ay[$b]]);return wy},a=function(Bg,yy,wy,Ay){var $b=arguments.length,e0=$b<3?yy:Ay===null?Ay=Object.getOwnPropertyDescriptor(yy,wy):Ay,Hb;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")e0=Reflect.decorate(Bg,yy,wy,Ay);else for(var Yb=Bg.length-1;Yb>=0;Yb--)(Hb=Bg[Yb])&&(e0=($b<3?Hb(e0):$b>3?Hb(yy,wy,e0):Hb(yy,wy))||e0);return $b>3&&e0&&Object.defineProperty(yy,wy,e0),e0},s=function(Bg,yy){return function(wy,Ay){yy(wy,Ay,Bg)}},u=function(Bg,yy){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(Bg,yy)},l=function(Bg,yy,wy,Ay){function $b(e0){return e0 instanceof wy?e0:new wy(function(Hb){Hb(e0)})}return new(wy||(wy=Promise))(function(e0,Hb){function Yb(y2){try{l2(Ay.next(y2))}catch(Rb){Hb(Rb)}}function Jb(y2){try{l2(Ay.throw(y2))}catch(Rb){Hb(Rb)}}function l2(y2){y2.done?e0(y2.value):$b(y2.value).then(Yb,Jb)}l2((Ay=Ay.apply(Bg,yy||[])).next())})},c=function(Bg,yy){var wy={label:0,sent:function(){if(e0[0]&1)throw e0[1];return e0[1]},trys:[],ops:[]},Ay,$b,e0,Hb;return Hb={next:Yb(0),throw:Yb(1),return:Yb(2)},typeof Symbol=="function"&&(Hb[Symbol.iterator]=function(){return this}),Hb;function Yb(l2){return function(y2){return Jb([l2,y2])}}function Jb(l2){if(Ay)throw new TypeError("Generator is already executing.");for(;wy;)try{if(Ay=1,$b&&(e0=l2[0]&2?$b.return:l2[0]?$b.throw||((e0=$b.return)&&e0.call($b),0):$b.next)&&!(e0=e0.call($b,l2[1])).done)return e0;switch($b=0,e0&&(l2=[l2[0]&2,e0.value]),l2[0]){case 0:case 1:e0=l2;break;case 4:return wy.label++,{value:l2[1],done:!1};case 5:wy.label++,$b=l2[1],l2=[0];continue;case 7:l2=wy.ops.pop(),wy.trys.pop();continue;default:if(e0=wy.trys,!(e0=e0.length>0&&e0[e0.length-1])&&(l2[0]===6||l2[0]===2)){wy=0;continue}if(l2[0]===3&&(!e0||l2[1]>e0[0]&&l2[1]<e0[3])){wy.label=l2[1];break}if(l2[0]===6&&wy.label<e0[1]){wy.label=e0[1],e0=l2;break}if(e0&&wy.label<e0[2]){wy.label=e0[2],wy.ops.push(l2);break}e0[2]&&wy.ops.pop(),wy.trys.pop();continue}l2=yy.call(Bg,wy)}catch(y2){l2=[6,y2],$b=0}finally{Ay=e0=0}if(l2[0]&5)throw l2[1];return{value:l2[0]?l2[1]:void 0,done:!0}}},m=function(Bg,yy){for(var wy in Bg)wy!=="default"&&!Object.prototype.hasOwnProperty.call(yy,wy)&&_y(yy,Bg,wy)},_y=Object.create?function(Bg,yy,wy,Ay){Ay===void 0&&(Ay=wy);var $b=Object.getOwnPropertyDescriptor(yy,wy);(!$b||("get"in $b?!yy.__esModule:$b.writable||$b.configurable))&&($b={enumerable:!0,get:function(){return yy[wy]}}),Object.defineProperty(Bg,Ay,$b)}:function(Bg,yy,wy,Ay){Ay===void 0&&(Ay=wy),Bg[Ay]=yy[wy]},me=function(Bg){var yy=typeof Symbol=="function"&&Symbol.iterator,wy=yy&&Bg[yy],Ay=0;if(wy)return wy.call(Bg);if(Bg&&typeof Bg.length=="number")return{next:function(){return Bg&&Ay>=Bg.length&&(Bg=void 0),{value:Bg&&Bg[Ay++],done:!Bg}}};throw new TypeError(yy?"Object is not iterable.":"Symbol.iterator is not defined.")},xe=function(Bg,yy){var wy=typeof Symbol=="function"&&Bg[Symbol.iterator];if(!wy)return Bg;var Ay=wy.call(Bg),$b,e0=[],Hb;try{for(;(yy===void 0||yy-- >0)&&!($b=Ay.next()).done;)e0.push($b.value)}catch(Yb){Hb={error:Yb}}finally{try{$b&&!$b.done&&(wy=Ay.return)&&wy.call(Ay)}finally{if(Hb)throw Hb.error}}return e0},Ne=function(){for(var Bg=[],yy=0;yy<arguments.length;yy++)Bg=Bg.concat(xe(arguments[yy]));return Bg},He=function(){for(var Bg=0,yy=0,wy=arguments.length;yy<wy;yy++)Bg+=arguments[yy].length;for(var Ay=Array(Bg),$b=0,yy=0;yy<wy;yy++)for(var e0=arguments[yy],Hb=0,Yb=e0.length;Hb<Yb;Hb++,$b++)Ay[$b]=e0[Hb];return Ay},Ye=function(Bg,yy,wy){if(wy||arguments.length===2)for(var Ay=0,$b=yy.length,e0;Ay<$b;Ay++)(e0||!(Ay in yy))&&(e0||(e0=Array.prototype.slice.call(yy,0,Ay)),e0[Ay]=yy[Ay]);return Bg.concat(e0||Array.prototype.slice.call(yy))},Je=function(Bg){return this instanceof Je?(this.v=Bg,this):new Je(Bg)},vn=function(Bg,yy,wy){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ay=wy.apply(Bg,yy||[]),$b,e0=[];return $b={},Hb("next"),Hb("throw"),Hb("return"),$b[Symbol.asyncIterator]=function(){return this},$b;function Hb(i2){Ay[i2]&&($b[i2]=function(s2){return new Promise(function(E2,L2){e0.push([i2,s2,E2,L2])>1||Yb(i2,s2)})})}function Yb(i2,s2){try{Jb(Ay[i2](s2))}catch(E2){Rb(e0[0][3],E2)}}function Jb(i2){i2.value instanceof Je?Promise.resolve(i2.value.v).then(l2,y2):Rb(e0[0][2],i2)}function l2(i2){Yb("next",i2)}function y2(i2){Yb("throw",i2)}function Rb(i2,s2){i2(s2),e0.shift(),e0.length&&Yb(e0[0][0],e0[0][1])}},La=function(Bg){var yy,wy;return yy={},Ay("next"),Ay("throw",function($b){throw $b}),Ay("return"),yy[Symbol.iterator]=function(){return this},yy;function Ay($b,e0){yy[$b]=Bg[$b]?function(Hb){return(wy=!wy)?{value:Je(Bg[$b](Hb)),done:$b==="return"}:e0?e0(Hb):Hb}:e0}},sr=function(Bg){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var yy=Bg[Symbol.asyncIterator],wy;return yy?yy.call(Bg):(Bg=typeof me=="function"?me(Bg):Bg[Symbol.iterator](),wy={},Ay("next"),Ay("throw"),Ay("return"),wy[Symbol.asyncIterator]=function(){return this},wy);function Ay(e0){wy[e0]=Bg[e0]&&function(Hb){return new Promise(function(Yb,Jb){Hb=Bg[e0](Hb),$b(Yb,Jb,Hb.done,Hb.value)})}}function $b(e0,Hb,Yb,Jb){Promise.resolve(Jb).then(function(l2){e0({value:l2,done:Yb})},Hb)}},Zr=function(Bg,yy){return Object.defineProperty?Object.defineProperty(Bg,"raw",{value:yy}):Bg.raw=yy,Bg};var Dy=Object.create?function(Bg,yy){Object.defineProperty(Bg,"default",{enumerable:!0,value:yy})}:function(Bg,yy){Bg.default=yy};zs=function(Bg){if(Bg&&Bg.__esModule)return Bg;var yy={};if(Bg!=null)for(var wy in Bg)wy!=="default"&&Object.prototype.hasOwnProperty.call(Bg,wy)&&_y(yy,Bg,wy);return Dy(yy,Bg),yy},za=function(Bg){return Bg&&Bg.__esModule?Bg:{default:Bg}},Hs=function(Bg,yy,wy,Ay){if(wy==="a"&&!Ay)throw new TypeError("Private accessor was defined without a getter");if(typeof yy=="function"?Bg!==yy||!Ay:!yy.has(Bg))throw new TypeError("Cannot read private member from an object whose class did not declare it");return wy==="m"?Ay:wy==="a"?Ay.call(Bg):Ay?Ay.value:yy.get(Bg)},lc=function(Bg,yy,wy,Ay,$b){if(Ay==="m")throw new TypeError("Private method is not writable");if(Ay==="a"&&!$b)throw new TypeError("Private accessor was defined without a setter");if(typeof yy=="function"?Bg!==yy||!$b:!yy.has(Bg))throw new TypeError("Cannot write private member to an object whose class did not declare it");return Ay==="a"?$b.call(Bg,wy):$b?$b.value=wy:yy.set(Bg,wy),wy},Ty=function(Bg,yy){if(yy===null||typeof yy!="object"&&typeof yy!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof Bg=="function"?yy===Bg:Bg.has(yy)},xy("__extends",n),xy("__assign",r),xy("__rest",o),xy("__decorate",a),xy("__param",s),xy("__metadata",u),xy("__awaiter",l),xy("__generator",c),xy("__exportStar",m),xy("__createBinding",_y),xy("__values",me),xy("__read",xe),xy("__spread",Ne),xy("__spreadArrays",He),xy("__spreadArray",Ye),xy("__await",Je),xy("__asyncGenerator",vn),xy("__asyncDelegator",La),xy("__asyncValues",sr),xy("__makeTemplateObject",Zr),xy("__importStar",zs),xy("__importDefault",za),xy("__classPrivateFieldGet",Hs),xy("__classPrivateFieldSet",lc),xy("__classPrivateFieldIn",Ty)})}),Wu$1=to$1((exports,module)=>{var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function getAugmentedNamespace(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach(function(n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}),t}var src={},Ad4mClient$1={},AgentClient$1={},extendStatics$1=function(e,t){return extendStatics$1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},extendStatics$1(e,t)};function __extends$1(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");extendStatics$1(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var genericMessage="Invariant Violation",_a$3=Object.setPrototypeOf,setPrototypeOf=_a$3===void 0?function(e,t){return e.__proto__=t,e}:_a$3,InvariantError=function(e){__extends$1(t,e);function t(n){n===void 0&&(n=genericMessage);var r=e.call(this,typeof n=="number"?genericMessage+": "+n+" (see https://github.com/apollographql/invariant-packages)":n)||this;return r.framesToPop=1,r.name=genericMessage,setPrototypeOf(r,t.prototype),r}return t}(Error);function invariant$1(e,t){if(!e)throw new InvariantError(t)}var verbosityLevels=["debug","log","warn","error","silent"],verbosityLevel=verbosityLevels.indexOf("log");function wrapConsoleMethod(e){return function(){if(verbosityLevels.indexOf(e)>=verbosityLevel){var t=console[e]||console.log;return t.apply(console,arguments)}}}(function(e){e.debug=wrapConsoleMethod("debug"),e.log=wrapConsoleMethod("log"),e.warn=wrapConsoleMethod("warn"),e.error=wrapConsoleMethod("error")})(invariant$1||(invariant$1={}));function setVerbosity(e){var t=verbosityLevels[verbosityLevel];return verbosityLevel=Math.max(0,verbosityLevels.indexOf(e)),t}function maybe$1(e){try{return e()}catch{}}var global$1=maybe$1(function(){return globalThis})||maybe$1(function(){return window})||maybe$1(function(){return self})||maybe$1(function(){return global})||maybe$1(function(){return maybe$1.constructor("return this")()}),__="__",GLOBAL_KEY=[__,__].join("DEV");function getDEV(){try{return Boolean(__DEV__)}catch{return Object.defineProperty(global$1,GLOBAL_KEY,{value:maybe$1(function(){return"production"})!=="production",enumerable:!1,configurable:!0,writable:!0}),global$1[GLOBAL_KEY]}}var DEV=getDEV();function maybe(e){try{return e()}catch{}}var safeGlobal=maybe(function(){return globalThis})||maybe(function(){return window})||maybe(function(){return self})||maybe(function(){return global})||maybe(function(){return maybe.constructor("return this")()}),needToRemove=!1;function install(){safeGlobal&&!maybe(function(){return"production"})&&!maybe(function(){return process})&&(Object.defineProperty(safeGlobal,"process",{value:{env:{NODE_ENV:"production"}},configurable:!0,enumerable:!1,writable:!0}),needToRemove=!0)}install();function remove(){needToRemove&&(delete safeGlobal.process,needToRemove=!1)}function _typeof$3(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$3=function(t){return typeof t}:_typeof$3=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof$3(e)}function isObjectLike(e){return _typeof$3(e)=="object"&&e!==null}var SYMBOL_TO_STRING_TAG=typeof Symbol=="function"&&Symbol.toStringTag!=null?Symbol.toStringTag:"@@toStringTag";function getLocation(e,t){for(var n=/\r\n|[\n\r]/g,r=1,o=t+1,a;(a=n.exec(e.body))&&a.index<t;)r+=1,o=t+1-(a.index+a[0].length);return{line:r,column:o}}function printLocation(e){return printSourceLocation(e.source,getLocation(e.source,e.start))}function printSourceLocation(e,t){var n=e.locationOffset.column-1,r=whitespace(n)+e.body,o=t.line-1,a=e.locationOffset.line-1,s=t.line+a,u=t.line===1?n:0,l=t.column+u,c="".concat(e.name,":").concat(s,":").concat(l,`
`),m=r.split(/\r\n|[\n\r]/g),me=m[o];if(me.length>120){for(var xe=Math.floor(l/80),Ne=l%80,He=[],Ye=0;Ye<me.length;Ye+=80)He.push(me.slice(Ye,Ye+80));return c+printPrefixedLines([["".concat(s),He[0]]].concat(He.slice(1,xe+1).map(function(Je){return["",Je]}),[[" ",whitespace(Ne-1)+"^"],["",He[xe+1]]]))}return c+printPrefixedLines([["".concat(s-1),m[o-1]],["".concat(s),me],["",whitespace(l-1)+"^"],["".concat(s+1),m[o+1]]])}function printPrefixedLines(e){var t=e.filter(function(r){r[0];var o=r[1];return o!==void 0}),n=Math.max.apply(Math,t.map(function(r){var o=r[0];return o.length}));return t.map(function(r){var o=r[0],a=r[1];return leftPad(n,o)+(a?" | "+a:" |")}).join(`
`)}function whitespace(e){return Array(e+1).join(" ")}function leftPad(e,t){return whitespace(e-t.length)+t}function _typeof$2(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$2=function(t){return typeof t}:_typeof$2=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof$2(e)}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(r){_defineProperty(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties$2(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass$2(e,t,n){return t&&_defineProperties$2(e.prototype,t),n&&_defineProperties$2(e,n),e}function _inherits(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var n=_getPrototypeOf(e),r;if(t){var o=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(e,t){return t&&(_typeof$2(t)==="object"||typeof t=="function")?t:_assertThisInitialized(e)}function _assertThisInitialized(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _wrapNativeSuper(e){var t=typeof Map=="function"?new Map:void 0;return _wrapNativeSuper=function(n){if(n===null||!_isNativeFunction(n))return n;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(typeof t<"u"){if(t.has(n))return t.get(n);t.set(n,r)}function r(){return _construct(n,arguments,_getPrototypeOf(this).constructor)}return r.prototype=Object.create(n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(r,n)},_wrapNativeSuper(e)}function _construct(e,t,n){return _isNativeReflectConstruct()?_construct=Reflect.construct:_construct=function(r,o,a){var s=[null];s.push.apply(s,o);var u=Function.bind.apply(r,s),l=new u;return a&&_setPrototypeOf(l,a.prototype),l},_construct.apply(null,arguments)}function _isNativeReflectConstruct(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function _isNativeFunction(e){return Function.toString.call(e).indexOf("[native code]")!==-1}function _setPrototypeOf(e,t){return _setPrototypeOf=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},_setPrototypeOf(e,t)}function _getPrototypeOf(e){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},_getPrototypeOf(e)}var GraphQLError=function(e){_inherits(n,e);var t=_createSuper(n);function n(r,o,a,s,u,l,c){var m,me,xe,Ne;_classCallCheck(this,n),Ne=t.call(this,r),Ne.name="GraphQLError",Ne.originalError=l!=null?l:void 0,Ne.nodes=undefinedIfEmpty(Array.isArray(o)?o:o?[o]:void 0);for(var He=[],Ye=0,Je=(vn=Ne.nodes)!==null&&vn!==void 0?vn:[];Ye<Je.length;Ye++){var vn,La=Je[Ye],sr=La.loc;sr!=null&&He.push(sr)}He=undefinedIfEmpty(He),Ne.source=a!=null?a:(m=He)===null||m===void 0?void 0:m[0].source,Ne.positions=s!=null?s:(me=He)===null||me===void 0?void 0:me.map(function(zs){return zs.start}),Ne.locations=s&&a?s.map(function(zs){return getLocation(a,zs)}):(xe=He)===null||xe===void 0?void 0:xe.map(function(zs){return getLocation(zs.source,zs.start)}),Ne.path=u!=null?u:void 0;var Zr=l==null?void 0:l.extensions;return c==null&&isObjectLike(Zr)?Ne.extensions=_objectSpread({},Zr):Ne.extensions=c!=null?c:{},Object.defineProperties(_assertThisInitialized(Ne),{message:{enumerable:!0},locations:{enumerable:Ne.locations!=null},path:{enumerable:Ne.path!=null},extensions:{enumerable:Ne.extensions!=null&&Object.keys(Ne.extensions).length>0},name:{enumerable:!1},nodes:{enumerable:!1},source:{enumerable:!1},positions:{enumerable:!1},originalError:{enumerable:!1}}),l!=null&&l.stack?(Object.defineProperty(_assertThisInitialized(Ne),"stack",{value:l.stack,writable:!0,configurable:!0}),_possibleConstructorReturn(Ne)):(Error.captureStackTrace?Error.captureStackTrace(_assertThisInitialized(Ne),n):Object.defineProperty(_assertThisInitialized(Ne),"stack",{value:Error().stack,writable:!0,configurable:!0}),Ne)}return _createClass$2(n,[{key:"toString",value:function(){return printError(this)}},{key:SYMBOL_TO_STRING_TAG,get:function(){return"Object"}}]),n}(_wrapNativeSuper(Error));function undefinedIfEmpty(e){return e===void 0||e.length===0?void 0:e}function printError(e){var t=e.message;if(e.nodes)for(var n=0,r=e.nodes;n<r.length;n++){var o=r[n];o.loc&&(t+=`

`+printLocation(o.loc))}else if(e.source&&e.locations)for(var a=0,s=e.locations;a<s.length;a++){var u=s[a];t+=`

`+printSourceLocation(e.source,u)}return t}function syntaxError(e,t,n){return new GraphQLError("Syntax Error: ".concat(n),void 0,e,[t])}var Kind=Object.freeze({NAME:"Name",DOCUMENT:"Document",OPERATION_DEFINITION:"OperationDefinition",VARIABLE_DEFINITION:"VariableDefinition",SELECTION_SET:"SelectionSet",FIELD:"Field",ARGUMENT:"Argument",FRAGMENT_SPREAD:"FragmentSpread",INLINE_FRAGMENT:"InlineFragment",FRAGMENT_DEFINITION:"FragmentDefinition",VARIABLE:"Variable",INT:"IntValue",FLOAT:"FloatValue",STRING:"StringValue",BOOLEAN:"BooleanValue",NULL:"NullValue",ENUM:"EnumValue",LIST:"ListValue",OBJECT:"ObjectValue",OBJECT_FIELD:"ObjectField",DIRECTIVE:"Directive",NAMED_TYPE:"NamedType",LIST_TYPE:"ListType",NON_NULL_TYPE:"NonNullType",SCHEMA_DEFINITION:"SchemaDefinition",OPERATION_TYPE_DEFINITION:"OperationTypeDefinition",SCALAR_TYPE_DEFINITION:"ScalarTypeDefinition",OBJECT_TYPE_DEFINITION:"ObjectTypeDefinition",FIELD_DEFINITION:"FieldDefinition",INPUT_VALUE_DEFINITION:"InputValueDefinition",INTERFACE_TYPE_DEFINITION:"InterfaceTypeDefinition",UNION_TYPE_DEFINITION:"UnionTypeDefinition",ENUM_TYPE_DEFINITION:"EnumTypeDefinition",ENUM_VALUE_DEFINITION:"EnumValueDefinition",INPUT_OBJECT_TYPE_DEFINITION:"InputObjectTypeDefinition",DIRECTIVE_DEFINITION:"DirectiveDefinition",SCHEMA_EXTENSION:"SchemaExtension",SCALAR_TYPE_EXTENSION:"ScalarTypeExtension",OBJECT_TYPE_EXTENSION:"ObjectTypeExtension",INTERFACE_TYPE_EXTENSION:"InterfaceTypeExtension",UNION_TYPE_EXTENSION:"UnionTypeExtension",ENUM_TYPE_EXTENSION:"EnumTypeExtension",INPUT_OBJECT_TYPE_EXTENSION:"InputObjectTypeExtension"});function invariant(e,t){var n=Boolean(e);if(!n)throw new Error(t!=null?t:"Unexpected invariant triggered.")}var nodejsCustomInspectSymbol=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):void 0,nodejsCustomInspectSymbol$1=nodejsCustomInspectSymbol;function defineInspect(e){var t=e.prototype.toJSON;typeof t=="function"||invariant(0),e.prototype.inspect=t,nodejsCustomInspectSymbol$1&&(e.prototype[nodejsCustomInspectSymbol$1]=t)}var Location=function(){function e(n,r,o){this.start=n.start,this.end=r.end,this.startToken=n,this.endToken=r,this.source=o}var t=e.prototype;return t.toJSON=function(){return{start:this.start,end:this.end}},e}();defineInspect(Location);var Token=function(){function e(n,r,o,a,s,u,l){this.kind=n,this.start=r,this.end=o,this.line=a,this.column=s,this.value=l,this.prev=u,this.next=null}var t=e.prototype;return t.toJSON=function(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}},e}();defineInspect(Token);function isNode(e){return e!=null&&typeof e.kind=="string"}var TokenKind=Object.freeze({SOF:"<SOF>",EOF:"<EOF>",BANG:"!",DOLLAR:"$",AMP:"&",PAREN_L:"(",PAREN_R:")",SPREAD:"...",COLON:":",EQUALS:"=",AT:"@",BRACKET_L:"[",BRACKET_R:"]",BRACE_L:"{",PIPE:"|",BRACE_R:"}",NAME:"Name",INT:"Int",FLOAT:"Float",STRING:"String",BLOCK_STRING:"BlockString",COMMENT:"Comment"});function _typeof$1(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$1=function(t){return typeof t}:_typeof$1=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof$1(e)}var MAX_ARRAY_LENGTH=10,MAX_RECURSIVE_DEPTH=2;function inspect(e){return formatValue(e,[])}function formatValue(e,t){switch(_typeof$1(e)){case"string":return JSON.stringify(e);case"function":return e.name?"[function ".concat(e.name,"]"):"[function]";case"object":return e===null?"null":formatObjectValue(e,t);default:return String(e)}}function formatObjectValue(e,t){if(t.indexOf(e)!==-1)return"[Circular]";var n=[].concat(t,[e]),r=getCustomFn(e);if(r!==void 0){var o=r.call(e);if(o!==e)return typeof o=="string"?o:formatValue(o,n)}else if(Array.isArray(e))return formatArray(e,n);return formatObject(e,n)}function formatObject(e,t){var n=Object.keys(e);if(n.length===0)return"{}";if(t.length>MAX_RECURSIVE_DEPTH)return"["+getObjectTag(e)+"]";var r=n.map(function(o){var a=formatValue(e[o],t);return o+": "+a});return"{ "+r.join(", ")+" }"}function formatArray(e,t){if(e.length===0)return"[]";if(t.length>MAX_RECURSIVE_DEPTH)return"[Array]";for(var n=Math.min(MAX_ARRAY_LENGTH,e.length),r=e.length-n,o=[],a=0;a<n;++a)o.push(formatValue(e[a],t));return r===1?o.push("... 1 more item"):r>1&&o.push("... ".concat(r," more items")),"["+o.join(", ")+"]"}function getCustomFn(e){var t=e[String(nodejsCustomInspectSymbol$1)];if(typeof t=="function")return t;if(typeof e.inspect=="function")return e.inspect}function getObjectTag(e){var t=Object.prototype.toString.call(e).replace(/^\[object /,"").replace(/]$/,"");if(t==="Object"&&typeof e.constructor=="function"){var n=e.constructor.name;if(typeof n=="string"&&n!=="")return n}return t}function devAssert(e,t){var n=Boolean(e);if(!n)throw new Error(t)}var instanceOf=function(e,t){return e instanceof t};function _defineProperties$1(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass$1(e,t,n){return t&&_defineProperties$1(e.prototype,t),n&&_defineProperties$1(e,n),e}var Source=function(){function e(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"GraphQL request",r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{line:1,column:1};typeof t=="string"||devAssert(0,"Body must be a string. Received: ".concat(inspect(t),".")),this.body=t,this.name=n,this.locationOffset=r,this.locationOffset.line>0||devAssert(0,"line in locationOffset is 1-indexed and must be positive."),this.locationOffset.column>0||devAssert(0,"column in locationOffset is 1-indexed and must be positive.")}return _createClass$1(e,[{key:SYMBOL_TO_STRING_TAG,get:function(){return"Source"}}]),e}();function isSource(e){return instanceOf(e,Source)}var DirectiveLocation=Object.freeze({QUERY:"QUERY",MUTATION:"MUTATION",SUBSCRIPTION:"SUBSCRIPTION",FIELD:"FIELD",FRAGMENT_DEFINITION:"FRAGMENT_DEFINITION",FRAGMENT_SPREAD:"FRAGMENT_SPREAD",INLINE_FRAGMENT:"INLINE_FRAGMENT",VARIABLE_DEFINITION:"VARIABLE_DEFINITION",SCHEMA:"SCHEMA",SCALAR:"SCALAR",OBJECT:"OBJECT",FIELD_DEFINITION:"FIELD_DEFINITION",ARGUMENT_DEFINITION:"ARGUMENT_DEFINITION",INTERFACE:"INTERFACE",UNION:"UNION",ENUM:"ENUM",ENUM_VALUE:"ENUM_VALUE",INPUT_OBJECT:"INPUT_OBJECT",INPUT_FIELD_DEFINITION:"INPUT_FIELD_DEFINITION"});function dedentBlockStringValue(e){var t=e.split(/\r\n|[\n\r]/g),n=getBlockStringIndentation(e);if(n!==0)for(var r=1;r<t.length;r++)t[r]=t[r].slice(n);for(var o=0;o<t.length&&isBlank(t[o]);)++o;for(var a=t.length;a>o&&isBlank(t[a-1]);)--a;return t.slice(o,a).join(`
`)}function isBlank(e){for(var t=0;t<e.length;++t)if(e[t]!==" "&&e[t]!=="	")return!1;return!0}function getBlockStringIndentation(e){for(var t,n=!0,r=!0,o=0,a=null,s=0;s<e.length;++s)switch(e.charCodeAt(s)){case 13:e.charCodeAt(s+1)===10&&++s;case 10:n=!1,r=!0,o=0;break;case 9:case 32:++o;break;default:r&&!n&&(a===null||o<a)&&(a=o),r=!1}return(t=a)!==null&&t!==void 0?t:0}function printBlockString(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=e.indexOf(`
`)===-1,o=e[0]===" "||e[0]==="	",a=e[e.length-1]==='"',s=e[e.length-1]==="\\",u=!r||a||s||n,l="";return u&&!(r&&o)&&(l+=`
`+t),l+=t?e.replace(/\n/g,`
`+t):e,u&&(l+=`
`),'"""'+l.replace(/"""/g,'\\"""')+'"""'}var Lexer=function(){function e(n){var r=new Token(TokenKind.SOF,0,0,0,0,null);this.source=n,this.lastToken=r,this.token=r,this.line=1,this.lineStart=0}var t=e.prototype;return t.advance=function(){this.lastToken=this.token;var n=this.token=this.lookahead();return n},t.lookahead=function(){var n=this.token;if(n.kind!==TokenKind.EOF)do{var r;n=(r=n.next)!==null&&r!==void 0?r:n.next=readToken(this,n)}while(n.kind===TokenKind.COMMENT);return n},e}();function isPunctuatorTokenKind(e){return e===TokenKind.BANG||e===TokenKind.DOLLAR||e===TokenKind.AMP||e===TokenKind.PAREN_L||e===TokenKind.PAREN_R||e===TokenKind.SPREAD||e===TokenKind.COLON||e===TokenKind.EQUALS||e===TokenKind.AT||e===TokenKind.BRACKET_L||e===TokenKind.BRACKET_R||e===TokenKind.BRACE_L||e===TokenKind.PIPE||e===TokenKind.BRACE_R}function printCharCode(e){return isNaN(e)?TokenKind.EOF:e<127?JSON.stringify(String.fromCharCode(e)):'"\\u'.concat(("00"+e.toString(16).toUpperCase()).slice(-4),'"')}function readToken(e,t){for(var n=e.source,r=n.body,o=r.length,a=t.end;a<o;){var s=r.charCodeAt(a),u=e.line,l=1+a-e.lineStart;switch(s){case 65279:case 9:case 32:case 44:++a;continue;case 10:++a,++e.line,e.lineStart=a;continue;case 13:r.charCodeAt(a+1)===10?a+=2:++a,++e.line,e.lineStart=a;continue;case 33:return new Token(TokenKind.BANG,a,a+1,u,l,t);case 35:return readComment(n,a,u,l,t);case 36:return new Token(TokenKind.DOLLAR,a,a+1,u,l,t);case 38:return new Token(TokenKind.AMP,a,a+1,u,l,t);case 40:return new Token(TokenKind.PAREN_L,a,a+1,u,l,t);case 41:return new Token(TokenKind.PAREN_R,a,a+1,u,l,t);case 46:if(r.charCodeAt(a+1)===46&&r.charCodeAt(a+2)===46)return new Token(TokenKind.SPREAD,a,a+3,u,l,t);break;case 58:return new Token(TokenKind.COLON,a,a+1,u,l,t);case 61:return new Token(TokenKind.EQUALS,a,a+1,u,l,t);case 64:return new Token(TokenKind.AT,a,a+1,u,l,t);case 91:return new Token(TokenKind.BRACKET_L,a,a+1,u,l,t);case 93:return new Token(TokenKind.BRACKET_R,a,a+1,u,l,t);case 123:return new Token(TokenKind.BRACE_L,a,a+1,u,l,t);case 124:return new Token(TokenKind.PIPE,a,a+1,u,l,t);case 125:return new Token(TokenKind.BRACE_R,a,a+1,u,l,t);case 34:return r.charCodeAt(a+1)===34&&r.charCodeAt(a+2)===34?readBlockString(n,a,u,l,t,e):readString(n,a,u,l,t);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return readNumber(n,a,s,u,l,t);case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:case 95:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:return readName(n,a,u,l,t)}throw syntaxError(n,a,unexpectedCharacterMessage(s))}var c=e.line,m=1+a-e.lineStart;return new Token(TokenKind.EOF,o,o,c,m,t)}function unexpectedCharacterMessage(e){return e<32&&e!==9&&e!==10&&e!==13?"Cannot contain the invalid character ".concat(printCharCode(e),"."):e===39?`Unexpected single quote character ('), did you mean to use a double quote (")?`:"Cannot parse the unexpected character ".concat(printCharCode(e),".")}function readComment(e,t,n,r,o){var a=e.body,s,u=t;do s=a.charCodeAt(++u);while(!isNaN(s)&&(s>31||s===9));return new Token(TokenKind.COMMENT,t,u,n,r,o,a.slice(t+1,u))}function readNumber(e,t,n,r,o,a){var s=e.body,u=n,l=t,c=!1;if(u===45&&(u=s.charCodeAt(++l)),u===48){if(u=s.charCodeAt(++l),u>=48&&u<=57)throw syntaxError(e,l,"Invalid number, unexpected digit after 0: ".concat(printCharCode(u),"."))}else l=readDigits(e,l,u),u=s.charCodeAt(l);if(u===46&&(c=!0,u=s.charCodeAt(++l),l=readDigits(e,l,u),u=s.charCodeAt(l)),(u===69||u===101)&&(c=!0,u=s.charCodeAt(++l),(u===43||u===45)&&(u=s.charCodeAt(++l)),l=readDigits(e,l,u),u=s.charCodeAt(l)),u===46||isNameStart(u))throw syntaxError(e,l,"Invalid number, expected digit but got: ".concat(printCharCode(u),"."));return new Token(c?TokenKind.FLOAT:TokenKind.INT,t,l,r,o,a,s.slice(t,l))}function readDigits(e,t,n){var r=e.body,o=t,a=n;if(a>=48&&a<=57){do a=r.charCodeAt(++o);while(a>=48&&a<=57);return o}throw syntaxError(e,o,"Invalid number, expected digit but got: ".concat(printCharCode(a),"."))}function readString(e,t,n,r,o){for(var a=e.body,s=t+1,u=s,l=0,c="";s<a.length&&!isNaN(l=a.charCodeAt(s))&&l!==10&&l!==13;){if(l===34)return c+=a.slice(u,s),new Token(TokenKind.STRING,t,s+1,n,r,o,c);if(l<32&&l!==9)throw syntaxError(e,s,"Invalid character within String: ".concat(printCharCode(l),"."));if(++s,l===92){switch(c+=a.slice(u,s-1),l=a.charCodeAt(s),l){case 34:c+='"';break;case 47:c+="/";break;case 92:c+="\\";break;case 98:c+="\b";break;case 102:c+="\f";break;case 110:c+=`
`;break;case 114:c+="\r";break;case 116:c+="	";break;case 117:{var m=uniCharCode(a.charCodeAt(s+1),a.charCodeAt(s+2),a.charCodeAt(s+3),a.charCodeAt(s+4));if(m<0){var me=a.slice(s+1,s+5);throw syntaxError(e,s,"Invalid character escape sequence: \\u".concat(me,"."))}c+=String.fromCharCode(m),s+=4;break}default:throw syntaxError(e,s,"Invalid character escape sequence: \\".concat(String.fromCharCode(l),"."))}++s,u=s}}throw syntaxError(e,s,"Unterminated string.")}function readBlockString(e,t,n,r,o,a){for(var s=e.body,u=t+3,l=u,c=0,m="";u<s.length&&!isNaN(c=s.charCodeAt(u));){if(c===34&&s.charCodeAt(u+1)===34&&s.charCodeAt(u+2)===34)return m+=s.slice(l,u),new Token(TokenKind.BLOCK_STRING,t,u+3,n,r,o,dedentBlockStringValue(m));if(c<32&&c!==9&&c!==10&&c!==13)throw syntaxError(e,u,"Invalid character within String: ".concat(printCharCode(c),"."));c===10?(++u,++a.line,a.lineStart=u):c===13?(s.charCodeAt(u+1)===10?u+=2:++u,++a.line,a.lineStart=u):c===92&&s.charCodeAt(u+1)===34&&s.charCodeAt(u+2)===34&&s.charCodeAt(u+3)===34?(m+=s.slice(l,u)+'"""',u+=4,l=u):++u}throw syntaxError(e,u,"Unterminated string.")}function uniCharCode(e,t,n,r){return char2hex(e)<<12|char2hex(t)<<8|char2hex(n)<<4|char2hex(r)}function char2hex(e){return e>=48&&e<=57?e-48:e>=65&&e<=70?e-55:e>=97&&e<=102?e-87:-1}function readName(e,t,n,r,o){for(var a=e.body,s=a.length,u=t+1,l=0;u!==s&&!isNaN(l=a.charCodeAt(u))&&(l===95||l>=48&&l<=57||l>=65&&l<=90||l>=97&&l<=122);)++u;return new Token(TokenKind.NAME,t,u,n,r,o,a.slice(t,u))}function isNameStart(e){return e===95||e>=65&&e<=90||e>=97&&e<=122}function parse(e,t){var n=new Parser(e,t);return n.parseDocument()}var Parser=function(){function e(n,r){var o=isSource(n)?n:new Source(n);this._lexer=new Lexer(o),this._options=r}var t=e.prototype;return t.parseName=function(){var n=this.expectToken(TokenKind.NAME);return{kind:Kind.NAME,value:n.value,loc:this.loc(n)}},t.parseDocument=function(){var n=this._lexer.token;return{kind:Kind.DOCUMENT,definitions:this.many(TokenKind.SOF,this.parseDefinition,TokenKind.EOF),loc:this.loc(n)}},t.parseDefinition=function(){if(this.peek(TokenKind.NAME))switch(this._lexer.token.value){case"query":case"mutation":case"subscription":return this.parseOperationDefinition();case"fragment":return this.parseFragmentDefinition();case"schema":case"scalar":case"type":case"interface":case"union":case"enum":case"input":case"directive":return this.parseTypeSystemDefinition();case"extend":return this.parseTypeSystemExtension()}else{if(this.peek(TokenKind.BRACE_L))return this.parseOperationDefinition();if(this.peekDescription())return this.parseTypeSystemDefinition()}throw this.unexpected()},t.parseOperationDefinition=function(){var n=this._lexer.token;if(this.peek(TokenKind.BRACE_L))return{kind:Kind.OPERATION_DEFINITION,operation:"query",name:void 0,variableDefinitions:[],directives:[],selectionSet:this.parseSelectionSet(),loc:this.loc(n)};var r=this.parseOperationType(),o;return this.peek(TokenKind.NAME)&&(o=this.parseName()),{kind:Kind.OPERATION_DEFINITION,operation:r,name:o,variableDefinitions:this.parseVariableDefinitions(),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(n)}},t.parseOperationType=function(){var n=this.expectToken(TokenKind.NAME);switch(n.value){case"query":return"query";case"mutation":return"mutation";case"subscription":return"subscription"}throw this.unexpected(n)},t.parseVariableDefinitions=function(){return this.optionalMany(TokenKind.PAREN_L,this.parseVariableDefinition,TokenKind.PAREN_R)},t.parseVariableDefinition=function(){var n=this._lexer.token;return{kind:Kind.VARIABLE_DEFINITION,variable:this.parseVariable(),type:(this.expectToken(TokenKind.COLON),this.parseTypeReference()),defaultValue:this.expectOptionalToken(TokenKind.EQUALS)?this.parseValueLiteral(!0):void 0,directives:this.parseDirectives(!0),loc:this.loc(n)}},t.parseVariable=function(){var n=this._lexer.token;return this.expectToken(TokenKind.DOLLAR),{kind:Kind.VARIABLE,name:this.parseName(),loc:this.loc(n)}},t.parseSelectionSet=function(){var n=this._lexer.token;return{kind:Kind.SELECTION_SET,selections:this.many(TokenKind.BRACE_L,this.parseSelection,TokenKind.BRACE_R),loc:this.loc(n)}},t.parseSelection=function(){return this.peek(TokenKind.SPREAD)?this.parseFragment():this.parseField()},t.parseField=function(){var n=this._lexer.token,r=this.parseName(),o,a;return this.expectOptionalToken(TokenKind.COLON)?(o=r,a=this.parseName()):a=r,{kind:Kind.FIELD,alias:o,name:a,arguments:this.parseArguments(!1),directives:this.parseDirectives(!1),selectionSet:this.peek(TokenKind.BRACE_L)?this.parseSelectionSet():void 0,loc:this.loc(n)}},t.parseArguments=function(n){var r=n?this.parseConstArgument:this.parseArgument;return this.optionalMany(TokenKind.PAREN_L,r,TokenKind.PAREN_R)},t.parseArgument=function(){var n=this._lexer.token,r=this.parseName();return this.expectToken(TokenKind.COLON),{kind:Kind.ARGUMENT,name:r,value:this.parseValueLiteral(!1),loc:this.loc(n)}},t.parseConstArgument=function(){var n=this._lexer.token;return{kind:Kind.ARGUMENT,name:this.parseName(),value:(this.expectToken(TokenKind.COLON),this.parseValueLiteral(!0)),loc:this.loc(n)}},t.parseFragment=function(){var n=this._lexer.token;this.expectToken(TokenKind.SPREAD);var r=this.expectOptionalKeyword("on");return!r&&this.peek(TokenKind.NAME)?{kind:Kind.FRAGMENT_SPREAD,name:this.parseFragmentName(),directives:this.parseDirectives(!1),loc:this.loc(n)}:{kind:Kind.INLINE_FRAGMENT,typeCondition:r?this.parseNamedType():void 0,directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(n)}},t.parseFragmentDefinition=function(){var n,r=this._lexer.token;return this.expectKeyword("fragment"),((n=this._options)===null||n===void 0?void 0:n.experimentalFragmentVariables)===!0?{kind:Kind.FRAGMENT_DEFINITION,name:this.parseFragmentName(),variableDefinitions:this.parseVariableDefinitions(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(r)}:{kind:Kind.FRAGMENT_DEFINITION,name:this.parseFragmentName(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(r)}},t.parseFragmentName=function(){if(this._lexer.token.value==="on")throw this.unexpected();return this.parseName()},t.parseValueLiteral=function(n){var r=this._lexer.token;switch(r.kind){case TokenKind.BRACKET_L:return this.parseList(n);case TokenKind.BRACE_L:return this.parseObject(n);case TokenKind.INT:return this._lexer.advance(),{kind:Kind.INT,value:r.value,loc:this.loc(r)};case TokenKind.FLOAT:return this._lexer.advance(),{kind:Kind.FLOAT,value:r.value,loc:this.loc(r)};case TokenKind.STRING:case TokenKind.BLOCK_STRING:return this.parseStringLiteral();case TokenKind.NAME:switch(this._lexer.advance(),r.value){case"true":return{kind:Kind.BOOLEAN,value:!0,loc:this.loc(r)};case"false":return{kind:Kind.BOOLEAN,value:!1,loc:this.loc(r)};case"null":return{kind:Kind.NULL,loc:this.loc(r)};default:return{kind:Kind.ENUM,value:r.value,loc:this.loc(r)}}case TokenKind.DOLLAR:if(!n)return this.parseVariable();break}throw this.unexpected()},t.parseStringLiteral=function(){var n=this._lexer.token;return this._lexer.advance(),{kind:Kind.STRING,value:n.value,block:n.kind===TokenKind.BLOCK_STRING,loc:this.loc(n)}},t.parseList=function(n){var r=this,o=this._lexer.token,a=function(){return r.parseValueLiteral(n)};return{kind:Kind.LIST,values:this.any(TokenKind.BRACKET_L,a,TokenKind.BRACKET_R),loc:this.loc(o)}},t.parseObject=function(n){var r=this,o=this._lexer.token,a=function(){return r.parseObjectField(n)};return{kind:Kind.OBJECT,fields:this.any(TokenKind.BRACE_L,a,TokenKind.BRACE_R),loc:this.loc(o)}},t.parseObjectField=function(n){var r=this._lexer.token,o=this.parseName();return this.expectToken(TokenKind.COLON),{kind:Kind.OBJECT_FIELD,name:o,value:this.parseValueLiteral(n),loc:this.loc(r)}},t.parseDirectives=function(n){for(var r=[];this.peek(TokenKind.AT);)r.push(this.parseDirective(n));return r},t.parseDirective=function(n){var r=this._lexer.token;return this.expectToken(TokenKind.AT),{kind:Kind.DIRECTIVE,name:this.parseName(),arguments:this.parseArguments(n),loc:this.loc(r)}},t.parseTypeReference=function(){var n=this._lexer.token,r;return this.expectOptionalToken(TokenKind.BRACKET_L)?(r=this.parseTypeReference(),this.expectToken(TokenKind.BRACKET_R),r={kind:Kind.LIST_TYPE,type:r,loc:this.loc(n)}):r=this.parseNamedType(),this.expectOptionalToken(TokenKind.BANG)?{kind:Kind.NON_NULL_TYPE,type:r,loc:this.loc(n)}:r},t.parseNamedType=function(){var n=this._lexer.token;return{kind:Kind.NAMED_TYPE,name:this.parseName(),loc:this.loc(n)}},t.parseTypeSystemDefinition=function(){var n=this.peekDescription()?this._lexer.lookahead():this._lexer.token;if(n.kind===TokenKind.NAME)switch(n.value){case"schema":return this.parseSchemaDefinition();case"scalar":return this.parseScalarTypeDefinition();case"type":return this.parseObjectTypeDefinition();case"interface":return this.parseInterfaceTypeDefinition();case"union":return this.parseUnionTypeDefinition();case"enum":return this.parseEnumTypeDefinition();case"input":return this.parseInputObjectTypeDefinition();case"directive":return this.parseDirectiveDefinition()}throw this.unexpected(n)},t.peekDescription=function(){return this.peek(TokenKind.STRING)||this.peek(TokenKind.BLOCK_STRING)},t.parseDescription=function(){if(this.peekDescription())return this.parseStringLiteral()},t.parseSchemaDefinition=function(){var n=this._lexer.token,r=this.parseDescription();this.expectKeyword("schema");var o=this.parseDirectives(!0),a=this.many(TokenKind.BRACE_L,this.parseOperationTypeDefinition,TokenKind.BRACE_R);return{kind:Kind.SCHEMA_DEFINITION,description:r,directives:o,operationTypes:a,loc:this.loc(n)}},t.parseOperationTypeDefinition=function(){var n=this._lexer.token,r=this.parseOperationType();this.expectToken(TokenKind.COLON);var o=this.parseNamedType();return{kind:Kind.OPERATION_TYPE_DEFINITION,operation:r,type:o,loc:this.loc(n)}},t.parseScalarTypeDefinition=function(){var n=this._lexer.token,r=this.parseDescription();this.expectKeyword("scalar");var o=this.parseName(),a=this.parseDirectives(!0);return{kind:Kind.SCALAR_TYPE_DEFINITION,description:r,name:o,directives:a,loc:this.loc(n)}},t.parseObjectTypeDefinition=function(){var n=this._lexer.token,r=this.parseDescription();this.expectKeyword("type");var o=this.parseName(),a=this.parseImplementsInterfaces(),s=this.parseDirectives(!0),u=this.parseFieldsDefinition();return{kind:Kind.OBJECT_TYPE_DEFINITION,description:r,name:o,interfaces:a,directives:s,fields:u,loc:this.loc(n)}},t.parseImplementsInterfaces=function(){var n;if(!this.expectOptionalKeyword("implements"))return[];if(((n=this._options)===null||n===void 0?void 0:n.allowLegacySDLImplementsInterfaces)===!0){var r=[];this.expectOptionalToken(TokenKind.AMP);do r.push(this.parseNamedType());while(this.expectOptionalToken(TokenKind.AMP)||this.peek(TokenKind.NAME));return r}return this.delimitedMany(TokenKind.AMP,this.parseNamedType)},t.parseFieldsDefinition=function(){var n;return((n=this._options)===null||n===void 0?void 0:n.allowLegacySDLEmptyFields)===!0&&this.peek(TokenKind.BRACE_L)&&this._lexer.lookahead().kind===TokenKind.BRACE_R?(this._lexer.advance(),this._lexer.advance(),[]):this.optionalMany(TokenKind.BRACE_L,this.parseFieldDefinition,TokenKind.BRACE_R)},t.parseFieldDefinition=function(){var n=this._lexer.token,r=this.parseDescription(),o=this.parseName(),a=this.parseArgumentDefs();this.expectToken(TokenKind.COLON);var s=this.parseTypeReference(),u=this.parseDirectives(!0);return{kind:Kind.FIELD_DEFINITION,description:r,name:o,arguments:a,type:s,directives:u,loc:this.loc(n)}},t.parseArgumentDefs=function(){return this.optionalMany(TokenKind.PAREN_L,this.parseInputValueDef,TokenKind.PAREN_R)},t.parseInputValueDef=function(){var n=this._lexer.token,r=this.parseDescription(),o=this.parseName();this.expectToken(TokenKind.COLON);var a=this.parseTypeReference(),s;this.expectOptionalToken(TokenKind.EQUALS)&&(s=this.parseValueLiteral(!0));var u=this.parseDirectives(!0);return{kind:Kind.INPUT_VALUE_DEFINITION,description:r,name:o,type:a,defaultValue:s,directives:u,loc:this.loc(n)}},t.parseInterfaceTypeDefinition=function(){var n=this._lexer.token,r=this.parseDescription();this.expectKeyword("interface");var o=this.parseName(),a=this.parseImplementsInterfaces(),s=this.parseDirectives(!0),u=this.parseFieldsDefinition();return{kind:Kind.INTERFACE_TYPE_DEFINITION,description:r,name:o,interfaces:a,directives:s,fields:u,loc:this.loc(n)}},t.parseUnionTypeDefinition=function(){var n=this._lexer.token,r=this.parseDescription();this.expectKeyword("union");var o=this.parseName(),a=this.parseDirectives(!0),s=this.parseUnionMemberTypes();return{kind:Kind.UNION_TYPE_DEFINITION,description:r,name:o,directives:a,types:s,loc:this.loc(n)}},t.parseUnionMemberTypes=function(){return this.expectOptionalToken(TokenKind.EQUALS)?this.delimitedMany(TokenKind.PIPE,this.parseNamedType):[]},t.parseEnumTypeDefinition=function(){var n=this._lexer.token,r=this.parseDescription();this.expectKeyword("enum");var o=this.parseName(),a=this.parseDirectives(!0),s=this.parseEnumValuesDefinition();return{kind:Kind.ENUM_TYPE_DEFINITION,description:r,name:o,directives:a,values:s,loc:this.loc(n)}},t.parseEnumValuesDefinition=function(){return this.optionalMany(TokenKind.BRACE_L,this.parseEnumValueDefinition,TokenKind.BRACE_R)},t.parseEnumValueDefinition=function(){var n=this._lexer.token,r=this.parseDescription(),o=this.parseName(),a=this.parseDirectives(!0);return{kind:Kind.ENUM_VALUE_DEFINITION,description:r,name:o,directives:a,loc:this.loc(n)}},t.parseInputObjectTypeDefinition=function(){var n=this._lexer.token,r=this.parseDescription();this.expectKeyword("input");var o=this.parseName(),a=this.parseDirectives(!0),s=this.parseInputFieldsDefinition();return{kind:Kind.INPUT_OBJECT_TYPE_DEFINITION,description:r,name:o,directives:a,fields:s,loc:this.loc(n)}},t.parseInputFieldsDefinition=function(){return this.optionalMany(TokenKind.BRACE_L,this.parseInputValueDef,TokenKind.BRACE_R)},t.parseTypeSystemExtension=function(){var n=this._lexer.lookahead();if(n.kind===TokenKind.NAME)switch(n.value){case"schema":return this.parseSchemaExtension();case"scalar":return this.parseScalarTypeExtension();case"type":return this.parseObjectTypeExtension();case"interface":return this.parseInterfaceTypeExtension();case"union":return this.parseUnionTypeExtension();case"enum":return this.parseEnumTypeExtension();case"input":return this.parseInputObjectTypeExtension()}throw this.unexpected(n)},t.parseSchemaExtension=function(){var n=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("schema");var r=this.parseDirectives(!0),o=this.optionalMany(TokenKind.BRACE_L,this.parseOperationTypeDefinition,TokenKind.BRACE_R);if(r.length===0&&o.length===0)throw this.unexpected();return{kind:Kind.SCHEMA_EXTENSION,directives:r,operationTypes:o,loc:this.loc(n)}},t.parseScalarTypeExtension=function(){var n=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("scalar");var r=this.parseName(),o=this.parseDirectives(!0);if(o.length===0)throw this.unexpected();return{kind:Kind.SCALAR_TYPE_EXTENSION,name:r,directives:o,loc:this.loc(n)}},t.parseObjectTypeExtension=function(){var n=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("type");var r=this.parseName(),o=this.parseImplementsInterfaces(),a=this.parseDirectives(!0),s=this.parseFieldsDefinition();if(o.length===0&&a.length===0&&s.length===0)throw this.unexpected();return{kind:Kind.OBJECT_TYPE_EXTENSION,name:r,interfaces:o,directives:a,fields:s,loc:this.loc(n)}},t.parseInterfaceTypeExtension=function(){var n=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("interface");var r=this.parseName(),o=this.parseImplementsInterfaces(),a=this.parseDirectives(!0),s=this.parseFieldsDefinition();if(o.length===0&&a.length===0&&s.length===0)throw this.unexpected();return{kind:Kind.INTERFACE_TYPE_EXTENSION,name:r,interfaces:o,directives:a,fields:s,loc:this.loc(n)}},t.parseUnionTypeExtension=function(){var n=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("union");var r=this.parseName(),o=this.parseDirectives(!0),a=this.parseUnionMemberTypes();if(o.length===0&&a.length===0)throw this.unexpected();return{kind:Kind.UNION_TYPE_EXTENSION,name:r,directives:o,types:a,loc:this.loc(n)}},t.parseEnumTypeExtension=function(){var n=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("enum");var r=this.parseName(),o=this.parseDirectives(!0),a=this.parseEnumValuesDefinition();if(o.length===0&&a.length===0)throw this.unexpected();return{kind:Kind.ENUM_TYPE_EXTENSION,name:r,directives:o,values:a,loc:this.loc(n)}},t.parseInputObjectTypeExtension=function(){var n=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("input");var r=this.parseName(),o=this.parseDirectives(!0),a=this.parseInputFieldsDefinition();if(o.length===0&&a.length===0)throw this.unexpected();return{kind:Kind.INPUT_OBJECT_TYPE_EXTENSION,name:r,directives:o,fields:a,loc:this.loc(n)}},t.parseDirectiveDefinition=function(){var n=this._lexer.token,r=this.parseDescription();this.expectKeyword("directive"),this.expectToken(TokenKind.AT);var o=this.parseName(),a=this.parseArgumentDefs(),s=this.expectOptionalKeyword("repeatable");this.expectKeyword("on");var u=this.parseDirectiveLocations();return{kind:Kind.DIRECTIVE_DEFINITION,description:r,name:o,arguments:a,repeatable:s,locations:u,loc:this.loc(n)}},t.parseDirectiveLocations=function(){return this.delimitedMany(TokenKind.PIPE,this.parseDirectiveLocation)},t.parseDirectiveLocation=function(){var n=this._lexer.token,r=this.parseName();if(DirectiveLocation[r.value]!==void 0)return r;throw this.unexpected(n)},t.loc=function(n){var r;if(((r=this._options)===null||r===void 0?void 0:r.noLocation)!==!0)return new Location(n,this._lexer.lastToken,this._lexer.source)},t.peek=function(n){return this._lexer.token.kind===n},t.expectToken=function(n){var r=this._lexer.token;if(r.kind===n)return this._lexer.advance(),r;throw syntaxError(this._lexer.source,r.start,"Expected ".concat(getTokenKindDesc(n),", found ").concat(getTokenDesc(r),"."))},t.expectOptionalToken=function(n){var r=this._lexer.token;if(r.kind===n)return this._lexer.advance(),r},t.expectKeyword=function(n){var r=this._lexer.token;if(r.kind===TokenKind.NAME&&r.value===n)this._lexer.advance();else throw syntaxError(this._lexer.source,r.start,'Expected "'.concat(n,'", found ').concat(getTokenDesc(r),"."))},t.expectOptionalKeyword=function(n){var r=this._lexer.token;return r.kind===TokenKind.NAME&&r.value===n?(this._lexer.advance(),!0):!1},t.unexpected=function(n){var r=n!=null?n:this._lexer.token;return syntaxError(this._lexer.source,r.start,"Unexpected ".concat(getTokenDesc(r),"."))},t.any=function(n,r,o){this.expectToken(n);for(var a=[];!this.expectOptionalToken(o);)a.push(r.call(this));return a},t.optionalMany=function(n,r,o){if(this.expectOptionalToken(n)){var a=[];do a.push(r.call(this));while(!this.expectOptionalToken(o));return a}return[]},t.many=function(n,r,o){this.expectToken(n);var a=[];do a.push(r.call(this));while(!this.expectOptionalToken(o));return a},t.delimitedMany=function(n,r){this.expectOptionalToken(n);var o=[];do o.push(r.call(this));while(this.expectOptionalToken(n));return o},e}();function getTokenDesc(e){var t=e.value;return getTokenKindDesc(e.kind)+(t!=null?' "'.concat(t,'"'):"")}function getTokenKindDesc(e){return isPunctuatorTokenKind(e)?'"'.concat(e,'"'):e}var QueryDocumentKeys={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},BREAK=Object.freeze({});function visit(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:QueryDocumentKeys,r=void 0,o=Array.isArray(e),a=[e],s=-1,u=[],l=void 0,c=void 0,m=void 0,me=[],xe=[],Ne=e;do{s++;var He=s===a.length,Ye=He&&u.length!==0;if(He){if(c=xe.length===0?void 0:me[me.length-1],l=m,m=xe.pop(),Ye){if(o)l=l.slice();else{for(var Je={},vn=0,La=Object.keys(l);vn<La.length;vn++){var sr=La[vn];Je[sr]=l[sr]}l=Je}for(var Zr=0,zs=0;zs<u.length;zs++){var za=u[zs][0],Hs=u[zs][1];o&&(za-=Zr),o&&Hs===null?(l.splice(za,1),Zr++):l[za]=Hs}}s=r.index,a=r.keys,u=r.edits,o=r.inArray,r=r.prev}else{if(c=m?o?s:a[s]:void 0,l=m?m[c]:Ne,l==null)continue;m&&me.push(c)}var lc=void 0;if(!Array.isArray(l)){if(!isNode(l))throw new Error("Invalid AST Node: ".concat(inspect(l),"."));var Ty=getVisitFn(t,l.kind,He);if(Ty){if(lc=Ty.call(t,l,c,m,me,xe),lc===BREAK)break;if(lc===!1){if(!He){me.pop();continue}}else if(lc!==void 0&&(u.push([c,lc]),!He))if(isNode(lc))l=lc;else{me.pop();continue}}}if(lc===void 0&&Ye&&u.push([c,l]),He)me.pop();else{var _y;r={inArray:o,index:s,keys:a,edits:u,prev:r},o=Array.isArray(l),a=o?l:(_y=n[l.kind])!==null&&_y!==void 0?_y:[],s=-1,u=[],m&&xe.push(m),m=l}}while(r!==void 0);return u.length!==0&&(Ne=u[u.length-1][1]),Ne}function getVisitFn(e,t,n){var r=e[t];if(r){if(!n&&typeof r=="function")return r;var o=n?r.leave:r.enter;if(typeof o=="function")return o}else{var a=n?e.leave:e.enter;if(a){if(typeof a=="function")return a;var s=a[t];if(typeof s=="function")return s}}}function print(e){return visit(e,{leave:printDocASTReducer})}var MAX_LINE_LENGTH=80,printDocASTReducer={Name:function(e){return e.value},Variable:function(e){return"$"+e.name},Document:function(e){return join(e.definitions,`

`)+`
`},OperationDefinition:function(e){var t=e.operation,n=e.name,r=wrap$1("(",join(e.variableDefinitions,", "),")"),o=join(e.directives," "),a=e.selectionSet;return!n&&!o&&!r&&t==="query"?a:join([t,join([n,r]),o,a]," ")},VariableDefinition:function(e){var t=e.variable,n=e.type,r=e.defaultValue,o=e.directives;return t+": "+n+wrap$1(" = ",r)+wrap$1(" ",join(o," "))},SelectionSet:function(e){var t=e.selections;return block(t)},Field:function(e){var t=e.alias,n=e.name,r=e.arguments,o=e.directives,a=e.selectionSet,s=wrap$1("",t,": ")+n,u=s+wrap$1("(",join(r,", "),")");return u.length>MAX_LINE_LENGTH&&(u=s+wrap$1(`(
`,indent(join(r,`
`)),`
)`)),join([u,join(o," "),a]," ")},Argument:function(e){var t=e.name,n=e.value;return t+": "+n},FragmentSpread:function(e){var t=e.name,n=e.directives;return"..."+t+wrap$1(" ",join(n," "))},InlineFragment:function(e){var t=e.typeCondition,n=e.directives,r=e.selectionSet;return join(["...",wrap$1("on ",t),join(n," "),r]," ")},FragmentDefinition:function(e){var t=e.name,n=e.typeCondition,r=e.variableDefinitions,o=e.directives,a=e.selectionSet;return"fragment ".concat(t).concat(wrap$1("(",join(r,", "),")")," ")+"on ".concat(n," ").concat(wrap$1("",join(o," ")," "))+a},IntValue:function(e){var t=e.value;return t},FloatValue:function(e){var t=e.value;return t},StringValue:function(e,t){var n=e.value,r=e.block;return r?printBlockString(n,t==="description"?"":"  "):JSON.stringify(n)},BooleanValue:function(e){var t=e.value;return t?"true":"false"},NullValue:function(){return"null"},EnumValue:function(e){var t=e.value;return t},ListValue:function(e){var t=e.values;return"["+join(t,", ")+"]"},ObjectValue:function(e){var t=e.fields;return"{"+join(t,", ")+"}"},ObjectField:function(e){var t=e.name,n=e.value;return t+": "+n},Directive:function(e){var t=e.name,n=e.arguments;return"@"+t+wrap$1("(",join(n,", "),")")},NamedType:function(e){var t=e.name;return t},ListType:function(e){var t=e.type;return"["+t+"]"},NonNullType:function(e){var t=e.type;return t+"!"},SchemaDefinition:addDescription(function(e){var t=e.directives,n=e.operationTypes;return join(["schema",join(t," "),block(n)]," ")}),OperationTypeDefinition:function(e){var t=e.operation,n=e.type;return t+": "+n},ScalarTypeDefinition:addDescription(function(e){var t=e.name,n=e.directives;return join(["scalar",t,join(n," ")]," ")}),ObjectTypeDefinition:addDescription(function(e){var t=e.name,n=e.interfaces,r=e.directives,o=e.fields;return join(["type",t,wrap$1("implements ",join(n," & ")),join(r," "),block(o)]," ")}),FieldDefinition:addDescription(function(e){var t=e.name,n=e.arguments,r=e.type,o=e.directives;return t+(hasMultilineItems(n)?wrap$1(`(
`,indent(join(n,`
`)),`
)`):wrap$1("(",join(n,", "),")"))+": "+r+wrap$1(" ",join(o," "))}),InputValueDefinition:addDescription(function(e){var t=e.name,n=e.type,r=e.defaultValue,o=e.directives;return join([t+": "+n,wrap$1("= ",r),join(o," ")]," ")}),InterfaceTypeDefinition:addDescription(function(e){var t=e.name,n=e.interfaces,r=e.directives,o=e.fields;return join(["interface",t,wrap$1("implements ",join(n," & ")),join(r," "),block(o)]," ")}),UnionTypeDefinition:addDescription(function(e){var t=e.name,n=e.directives,r=e.types;return join(["union",t,join(n," "),r&&r.length!==0?"= "+join(r," | "):""]," ")}),EnumTypeDefinition:addDescription(function(e){var t=e.name,n=e.directives,r=e.values;return join(["enum",t,join(n," "),block(r)]," ")}),EnumValueDefinition:addDescription(function(e){var t=e.name,n=e.directives;return join([t,join(n," ")]," ")}),InputObjectTypeDefinition:addDescription(function(e){var t=e.name,n=e.directives,r=e.fields;return join(["input",t,join(n," "),block(r)]," ")}),DirectiveDefinition:addDescription(function(e){var t=e.name,n=e.arguments,r=e.repeatable,o=e.locations;return"directive @"+t+(hasMultilineItems(n)?wrap$1(`(
`,indent(join(n,`
`)),`
)`):wrap$1("(",join(n,", "),")"))+(r?" repeatable":"")+" on "+join(o," | ")}),SchemaExtension:function(e){var t=e.directives,n=e.operationTypes;return join(["extend schema",join(t," "),block(n)]," ")},ScalarTypeExtension:function(e){var t=e.name,n=e.directives;return join(["extend scalar",t,join(n," ")]," ")},ObjectTypeExtension:function(e){var t=e.name,n=e.interfaces,r=e.directives,o=e.fields;return join(["extend type",t,wrap$1("implements ",join(n," & ")),join(r," "),block(o)]," ")},InterfaceTypeExtension:function(e){var t=e.name,n=e.interfaces,r=e.directives,o=e.fields;return join(["extend interface",t,wrap$1("implements ",join(n," & ")),join(r," "),block(o)]," ")},UnionTypeExtension:function(e){var t=e.name,n=e.directives,r=e.types;return join(["extend union",t,join(n," "),r&&r.length!==0?"= "+join(r," | "):""]," ")},EnumTypeExtension:function(e){var t=e.name,n=e.directives,r=e.values;return join(["extend enum",t,join(n," "),block(r)]," ")},InputObjectTypeExtension:function(e){var t=e.name,n=e.directives,r=e.fields;return join(["extend input",t,join(n," "),block(r)]," ")}};function addDescription(e){return function(t){return join([t.description,e(t)],`
`)}}function join(e){var t,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return(t=e==null?void 0:e.filter(function(r){return r}).join(n))!==null&&t!==void 0?t:""}function block(e){return wrap$1(`{
`,indent(join(e,`
`)),`
}`)}function wrap$1(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";return t!=null&&t!==""?e+t+n:""}function indent(e){return wrap$1("  ",e.replace(/\n/g,`
  `))}function isMultiline(e){return e.indexOf(`
`)!==-1}function hasMultilineItems(e){return e!=null&&e.some(isMultiline)}function removeTemporaryGlobals(){return remove()}function checkDEV(){__DEV__?invariant$1(typeof DEV=="boolean",DEV):invariant$1(typeof DEV=="boolean",36)}removeTemporaryGlobals(),checkDEV();var extendStatics=function(e,t){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},extendStatics(e,t)};function __extends(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");extendStatics(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var __assign$1=function(){return __assign$1=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},__assign$1.apply(this,arguments)};function __rest(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n}function __awaiter(e,t,n,r){function o(a){return a instanceof n?a:new n(function(s){s(a)})}return new(n||(n=Promise))(function(a,s){function u(m){try{c(r.next(m))}catch(me){s(me)}}function l(m){try{c(r.throw(m))}catch(me){s(me)}}function c(m){m.done?a(m.value):o(m.value).then(u,l)}c((r=r.apply(e,t||[])).next())})}function __generator(e,t){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,o,a,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(c){return function(m){return l([c,m])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,o&&(a=c[0]&2?o.return:c[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,c[1])).done)return a;switch(o=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,o=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){n.label=c[1];break}if(c[0]===6&&n.label<a[1]){n.label=a[1],a=c;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(c);break}a[2]&&n.ops.pop(),n.trys.pop();continue}c=t.call(e,n)}catch(m){c=[6,m],o=0}finally{r=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function __spreadArray(e,t,n){if(n||arguments.length===2)for(var r=0,o=t.length,a;r<o;r++)(a||!(r in t))&&(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))}function shouldInclude(e,t){var n=e.directives;return!n||!n.length?!0:getInclusionDirectives(n).every(function(r){var o=r.directive,a=r.ifArgument,s=!1;return a.value.kind==="Variable"?(s=t&&t[a.value.name.value],__DEV__?invariant$1(s!==void 0,"Invalid variable referenced in @".concat(o.name.value," directive.")):invariant$1(s!==void 0,37)):s=a.value.value,o.name.value==="skip"?!s:s})}function getDirectiveNames(e){var t=[];return visit(e,{Directive:function(n){t.push(n.name.value)}}),t}function hasDirectives(e,t){return getDirectiveNames(t).some(function(n){return e.indexOf(n)>-1})}function hasClientExports(e){return e&&hasDirectives(["client"],e)&&hasDirectives(["export"],e)}function isInclusionDirective(e){var t=e.name.value;return t==="skip"||t==="include"}function getInclusionDirectives(e){var t=[];return e&&e.length&&e.forEach(function(n){if(isInclusionDirective(n)){var r=n.arguments,o=n.name.value;__DEV__?invariant$1(r&&r.length===1,"Incorrect number of arguments for the @".concat(o," directive.")):invariant$1(r&&r.length===1,38);var a=r[0];__DEV__?invariant$1(a.name&&a.name.value==="if","Invalid argument for the @".concat(o," directive.")):invariant$1(a.name&&a.name.value==="if",39);var s=a.value;__DEV__?invariant$1(s&&(s.kind==="Variable"||s.kind==="BooleanValue"),"Argument for the @".concat(o," directive must be a variable or a boolean value.")):invariant$1(s&&(s.kind==="Variable"||s.kind==="BooleanValue"),40),t.push({directive:n,ifArgument:a})}}),t}function getFragmentQueryDocument(e,t){var n=t,r=[];e.definitions.forEach(function(a){if(a.kind==="OperationDefinition")throw __DEV__?new InvariantError("Found a ".concat(a.operation," operation").concat(a.name?" named '".concat(a.name.value,"'"):"",". ")+"No operations are allowed when using a fragment as a query. Only fragments are allowed."):new InvariantError(41);a.kind==="FragmentDefinition"&&r.push(a)}),typeof n>"u"&&(__DEV__?invariant$1(r.length===1,"Found ".concat(r.length," fragments. `fragmentName` must be provided when there is not exactly 1 fragment.")):invariant$1(r.length===1,42),n=r[0].name.value);var o=__assign$1(__assign$1({},e),{definitions:__spreadArray([{kind:"OperationDefinition",operation:"query",selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:n}}]}}],e.definitions,!0)});return o}function createFragmentMap(e){e===void 0&&(e=[]);var t={};return e.forEach(function(n){t[n.name.value]=n}),t}function getFragmentFromSelection(e,t){switch(e.kind){case"InlineFragment":return e;case"FragmentSpread":{var n=t&&t[e.name.value];return __DEV__?invariant$1(n,"No fragment named ".concat(e.name.value,".")):invariant$1(n,43),n}default:return null}}function isNonNullObject(e){return e!==null&&typeof e=="object"}function makeReference(e){return{__ref:String(e)}}function isReference(e){return Boolean(e&&typeof e=="object"&&typeof e.__ref=="string")}function isDocumentNode(e){return isNonNullObject(e)&&e.kind==="Document"&&Array.isArray(e.definitions)}function isStringValue(e){return e.kind==="StringValue"}function isBooleanValue(e){return e.kind==="BooleanValue"}function isIntValue(e){return e.kind==="IntValue"}function isFloatValue(e){return e.kind==="FloatValue"}function isVariable(e){return e.kind==="Variable"}function isObjectValue(e){return e.kind==="ObjectValue"}function isListValue(e){return e.kind==="ListValue"}function isEnumValue(e){return e.kind==="EnumValue"}function isNullValue(e){return e.kind==="NullValue"}function valueToObjectRepresentation(e,t,n,r){if(isIntValue(n)||isFloatValue(n))e[t.value]=Number(n.value);else if(isBooleanValue(n)||isStringValue(n))e[t.value]=n.value;else if(isObjectValue(n)){var o={};n.fields.map(function(s){return valueToObjectRepresentation(o,s.name,s.value,r)}),e[t.value]=o}else if(isVariable(n)){var a=(r||{})[n.name.value];e[t.value]=a}else if(isListValue(n))e[t.value]=n.values.map(function(s){var u={};return valueToObjectRepresentation(u,t,s,r),u[t.value]});else if(isEnumValue(n))e[t.value]=n.value;else if(isNullValue(n))e[t.value]=null;else throw __DEV__?new InvariantError('The inline argument "'.concat(t.value,'" of kind "').concat(n.kind,'"')+"is not supported. Use variables instead of inline arguments to overcome this limitation."):new InvariantError(52)}function storeKeyNameFromField(e,t){var n=null;e.directives&&(n={},e.directives.forEach(function(o){n[o.name.value]={},o.arguments&&o.arguments.forEach(function(a){var s=a.name,u=a.value;return valueToObjectRepresentation(n[o.name.value],s,u,t)})}));var r=null;return e.arguments&&e.arguments.length&&(r={},e.arguments.forEach(function(o){var a=o.name,s=o.value;return valueToObjectRepresentation(r,a,s,t)})),getStoreKeyName(e.name.value,r,n)}var KNOWN_DIRECTIVES=["connection","include","skip","client","rest","export"],getStoreKeyName=Object.assign(function(e,t,n){if(t&&n&&n.connection&&n.connection.key)if(n.connection.filter&&n.connection.filter.length>0){var r=n.connection.filter?n.connection.filter:[];r.sort();var o={};return r.forEach(function(u){o[u]=t[u]}),"".concat(n.connection.key,"(").concat(stringify(o),")")}else return n.connection.key;var a=e;if(t){var s=stringify(t);a+="(".concat(s,")")}return n&&Object.keys(n).forEach(function(u){KNOWN_DIRECTIVES.indexOf(u)===-1&&(n[u]&&Object.keys(n[u]).length?a+="@".concat(u,"(").concat(stringify(n[u]),")"):a+="@".concat(u))}),a},{setStringify:function(e){var t=stringify;return stringify=e,t}}),stringify=function(e){return JSON.stringify(e,stringifyReplacer)};function stringifyReplacer(e,t){return isNonNullObject(t)&&!Array.isArray(t)&&(t=Object.keys(t).sort().reduce(function(n,r){return n[r]=t[r],n},{})),t}function argumentsObjectFromField(e,t){if(e.arguments&&e.arguments.length){var n={};return e.arguments.forEach(function(r){var o=r.name,a=r.value;return valueToObjectRepresentation(n,o,a,t)}),n}return null}function resultKeyNameFromField(e){return e.alias?e.alias.value:e.name.value}function getTypenameFromResult(e,t,n){if(typeof e.__typename=="string")return e.__typename;for(var r=0,o=t.selections;r<o.length;r++){var a=o[r];if(isField(a)){if(a.name.value==="__typename")return e[resultKeyNameFromField(a)]}else{var s=getTypenameFromResult(e,getFragmentFromSelection(a,n).selectionSet,n);if(typeof s=="string")return s}}}function isField(e){return e.kind==="Field"}function isInlineFragment(e){return e.kind==="InlineFragment"}function checkDocument(e){__DEV__?invariant$1(e&&e.kind==="Document",'Expecting a parsed GraphQL document. Perhaps you need to wrap the query string in a "gql" tag? http://docs.apollostack.com/apollo-client/core.html#gql'):invariant$1(e&&e.kind==="Document",44);var t=e.definitions.filter(function(n){return n.kind!=="FragmentDefinition"}).map(function(n){if(n.kind!=="OperationDefinition")throw __DEV__?new InvariantError('Schema type definitions not allowed in queries. Found: "'.concat(n.kind,'"')):new InvariantError(45);return n});return __DEV__?invariant$1(t.length<=1,"Ambiguous GraphQL document: contains ".concat(t.length," operations")):invariant$1(t.length<=1,46),e}function getOperationDefinition(e){return checkDocument(e),e.definitions.filter(function(t){return t.kind==="OperationDefinition"})[0]}function getOperationName(e){return e.definitions.filter(function(t){return t.kind==="OperationDefinition"&&t.name}).map(function(t){return t.name.value})[0]||null}function getFragmentDefinitions(e){return e.definitions.filter(function(t){return t.kind==="FragmentDefinition"})}function getQueryDefinition(e){var t=getOperationDefinition(e);return __DEV__?invariant$1(t&&t.operation==="query","Must contain a query definition."):invariant$1(t&&t.operation==="query",47),t}function getFragmentDefinition(e){__DEV__?invariant$1(e.kind==="Document",'Expecting a parsed GraphQL document. Perhaps you need to wrap the query string in a "gql" tag? http://docs.apollostack.com/apollo-client/core.html#gql'):invariant$1(e.kind==="Document",48),__DEV__?invariant$1(e.definitions.length<=1,"Fragment must have exactly one definition."):invariant$1(e.definitions.length<=1,49);var t=e.definitions[0];return __DEV__?invariant$1(t.kind==="FragmentDefinition","Must be a fragment definition."):invariant$1(t.kind==="FragmentDefinition",50),t}function getMainDefinition(e){checkDocument(e);for(var t,n=0,r=e.definitions;n<r.length;n++){var o=r[n];if(o.kind==="OperationDefinition"){var a=o.operation;if(a==="query"||a==="mutation"||a==="subscription")return o}o.kind==="FragmentDefinition"&&!t&&(t=o)}if(t)return t;throw __DEV__?new InvariantError("Expected a parsed GraphQL query with a query, mutation, subscription, or a fragment."):new InvariantError(51)}function getDefaultValues(e){var t=Object.create(null),n=e&&e.variableDefinitions;return n&&n.length&&n.forEach(function(r){r.defaultValue&&valueToObjectRepresentation(t,r.variable.name,r.defaultValue)}),t}function filterInPlace(e,t,n){var r=0;return e.forEach(function(o,a){t.call(this,o,a,e)&&(e[r++]=o)},n),e.length=r,e}var TYPENAME_FIELD={kind:"Field",name:{kind:"Name",value:"__typename"}};function isEmpty(e,t){return e.selectionSet.selections.every(function(n){return n.kind==="FragmentSpread"&&isEmpty(t[n.name.value],t)})}function nullIfDocIsEmpty(e){return isEmpty(getOperationDefinition(e)||getFragmentDefinition(e),createFragmentMap(getFragmentDefinitions(e)))?null:e}function getDirectiveMatcher(e){return function(t){return e.some(function(n){return n.name&&n.name===t.name.value||n.test&&n.test(t)})}}function removeDirectivesFromDocument(e,t){var n=Object.create(null),r=[],o=Object.create(null),a=[],s=nullIfDocIsEmpty(visit(t,{Variable:{enter:function(u,l,c){c.kind!=="VariableDefinition"&&(n[u.name.value]=!0)}},Field:{enter:function(u){if(e&&u.directives){var l=e.some(function(c){return c.remove});if(l&&u.directives&&u.directives.some(getDirectiveMatcher(e)))return u.arguments&&u.arguments.forEach(function(c){c.value.kind==="Variable"&&r.push({name:c.value.name.value})}),u.selectionSet&&getAllFragmentSpreadsFromSelectionSet(u.selectionSet).forEach(function(c){a.push({name:c.name.value})}),null}}},FragmentSpread:{enter:function(u){o[u.name.value]=!0}},Directive:{enter:function(u){if(getDirectiveMatcher(e)(u))return null}}}));return s&&filterInPlace(r,function(u){return!!u.name&&!n[u.name]}).length&&(s=removeArgumentsFromDocument(r,s)),s&&filterInPlace(a,function(u){return!!u.name&&!o[u.name]}).length&&(s=removeFragmentSpreadFromDocument(a,s)),s}var addTypenameToDocument=Object.assign(function(e){return visit(e,{SelectionSet:{enter:function(t,n,r){if(!(r&&r.kind==="OperationDefinition")){var o=t.selections;if(o){var a=o.some(function(u){return isField(u)&&(u.name.value==="__typename"||u.name.value.lastIndexOf("__",0)===0)});if(!a){var s=r;if(!(isField(s)&&s.directives&&s.directives.some(function(u){return u.name.value==="export"})))return __assign$1(__assign$1({},t),{selections:__spreadArray(__spreadArray([],o,!0),[TYPENAME_FIELD],!1)})}}}}}})},{added:function(e){return e===TYPENAME_FIELD}}),connectionRemoveConfig={test:function(e){var t=e.name.value==="connection";return t&&(!e.arguments||!e.arguments.some(function(n){return n.name.value==="key"}))&&__DEV__&&invariant$1.warn("Removing an @connection directive even though it does not have a key. You may want to use the key parameter to specify a store key."),t}};function removeConnectionDirectiveFromDocument(e){return removeDirectivesFromDocument([connectionRemoveConfig],checkDocument(e))}function getArgumentMatcher(e){return function(t){return e.some(function(n){return t.value&&t.value.kind==="Variable"&&t.value.name&&(n.name===t.value.name.value||n.test&&n.test(t))})}}function removeArgumentsFromDocument(e,t){var n=getArgumentMatcher(e);return nullIfDocIsEmpty(visit(t,{OperationDefinition:{enter:function(r){return __assign$1(__assign$1({},r),{variableDefinitions:r.variableDefinitions?r.variableDefinitions.filter(function(o){return!e.some(function(a){return a.name===o.variable.name.value})}):[]})}},Field:{enter:function(r){var o=e.some(function(s){return s.remove});if(o){var a=0;if(r.arguments&&r.arguments.forEach(function(s){n(s)&&(a+=1)}),a===1)return null}}},Argument:{enter:function(r){if(n(r))return null}}}))}function removeFragmentSpreadFromDocument(e,t){function n(r){if(e.some(function(o){return o.name===r.name.value}))return null}return nullIfDocIsEmpty(visit(t,{FragmentSpread:{enter:n},FragmentDefinition:{enter:n}}))}function getAllFragmentSpreadsFromSelectionSet(e){var t=[];return e.selections.forEach(function(n){(isField(n)||isInlineFragment(n))&&n.selectionSet?getAllFragmentSpreadsFromSelectionSet(n.selectionSet).forEach(function(r){return t.push(r)}):n.kind==="FragmentSpread"&&t.push(n)}),t}function buildQueryFromSelectionSet(e){var t=getMainDefinition(e),n=t.operation;if(n==="query")return e;var r=visit(e,{OperationDefinition:{enter:function(o){return __assign$1(__assign$1({},o),{operation:"query"})}}});return r}function removeClientSetsFromDocument(e){checkDocument(e);var t=removeDirectivesFromDocument([{test:function(n){return n.name.value==="client"},remove:!0}],e);return t&&(t=visit(t,{FragmentDefinition:{enter:function(n){if(n.selectionSet){var r=n.selectionSet.selections.every(function(o){return isField(o)&&o.name.value==="__typename"});if(r)return null}}}})),t}var hasOwnProperty$5=Object.prototype.hasOwnProperty;function mergeDeep(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return mergeDeepArray(e)}function mergeDeepArray(e){var t=e[0]||{},n=e.length;if(n>1)for(var r=new DeepMerger,o=1;o<n;++o)t=r.merge(t,e[o]);return t}var defaultReconciler=function(e,t,n){return this.merge(e[n],t[n])},DeepMerger=function(){function e(t){t===void 0&&(t=defaultReconciler),this.reconciler=t,this.isObject=isNonNullObject,this.pastCopies=new Set}return e.prototype.merge=function(t,n){for(var r=this,o=[],a=2;a<arguments.length;a++)o[a-2]=arguments[a];return isNonNullObject(n)&&isNonNullObject(t)?(Object.keys(n).forEach(function(s){if(hasOwnProperty$5.call(t,s)){var u=t[s];if(n[s]!==u){var l=r.reconciler.apply(r,__spreadArray([t,n,s],o,!1));l!==u&&(t=r.shallowCopyForMerge(t),t[s]=l)}}else t=r.shallowCopyForMerge(t),t[s]=n[s]}),t):n},e.prototype.shallowCopyForMerge=function(t){return isNonNullObject(t)&&(this.pastCopies.has(t)||(Array.isArray(t)?t=t.slice(0):t=__assign$1({__proto__:Object.getPrototypeOf(t)},t),this.pastCopies.add(t))),t},e}();function _createForOfIteratorHelperLoose(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=_unsupportedIterableToArray(e))||t&&e&&typeof e.length=="number"){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray(e,t){if(e){if(typeof e=="string")return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(e,t)}}function _arrayLikeToArray(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var hasSymbols=function(){return typeof Symbol=="function"},hasSymbol=function(e){return hasSymbols()&&Boolean(Symbol[e])},getSymbol=function(e){return hasSymbol(e)?Symbol[e]:"@@"+e};hasSymbols()&&!hasSymbol("observable")&&(Symbol.observable=Symbol("observable"));var SymbolIterator=getSymbol("iterator"),SymbolObservable=getSymbol("observable"),SymbolSpecies=getSymbol("species");function getMethod(e,t){var n=e[t];if(n!=null){if(typeof n!="function")throw new TypeError(n+" is not a function");return n}}function getSpecies(e){var t=e.constructor;return t!==void 0&&(t=t[SymbolSpecies],t===null&&(t=void 0)),t!==void 0?t:Observable}function isObservable(e){return e instanceof Observable}function hostReportError(e){hostReportError.log?hostReportError.log(e):setTimeout(function(){throw e})}function enqueue(e){Promise.resolve().then(function(){try{e()}catch(t){hostReportError(t)}})}function cleanupSubscription(e){var t=e._cleanup;if(t!==void 0&&(e._cleanup=void 0,!!t))try{if(typeof t=="function")t();else{var n=getMethod(t,"unsubscribe");n&&n.call(t)}}catch(r){hostReportError(r)}}function closeSubscription(e){e._observer=void 0,e._queue=void 0,e._state="closed"}function flushSubscription(e){var t=e._queue;if(t){e._queue=void 0,e._state="ready";for(var n=0;n<t.length&&(notifySubscription(e,t[n].type,t[n].value),e._state!=="closed");++n);}}function notifySubscription(e,t,n){e._state="running";var r=e._observer;try{var o=getMethod(r,t);switch(t){case"next":o&&o.call(r,n);break;case"error":if(closeSubscription(e),o)o.call(r,n);else throw n;break;case"complete":closeSubscription(e),o&&o.call(r);break}}catch(a){hostReportError(a)}e._state==="closed"?cleanupSubscription(e):e._state==="running"&&(e._state="ready")}function onNotify(e,t,n){if(e._state!=="closed"){if(e._state==="buffering"){e._queue.push({type:t,value:n});return}if(e._state!=="ready"){e._state="buffering",e._queue=[{type:t,value:n}],enqueue(function(){return flushSubscription(e)});return}notifySubscription(e,t,n)}}var Subscription=function(){function e(n,r){this._cleanup=void 0,this._observer=n,this._queue=void 0,this._state="initializing";var o=new SubscriptionObserver(this);try{this._cleanup=r.call(void 0,o)}catch(a){o.error(a)}this._state==="initializing"&&(this._state="ready")}var t=e.prototype;return t.unsubscribe=function(){this._state!=="closed"&&(closeSubscription(this),cleanupSubscription(this))},_createClass(e,[{key:"closed",get:function(){return this._state==="closed"}}]),e}(),SubscriptionObserver=function(){function e(n){this._subscription=n}var t=e.prototype;return t.next=function(n){onNotify(this._subscription,"next",n)},t.error=function(n){onNotify(this._subscription,"error",n)},t.complete=function(){onNotify(this._subscription,"complete")},_createClass(e,[{key:"closed",get:function(){return this._subscription._state==="closed"}}]),e}(),Observable=function(){function e(n){if(!(this instanceof e))throw new TypeError("Observable cannot be called as a function");if(typeof n!="function")throw new TypeError("Observable initializer must be a function");this._subscriber=n}var t=e.prototype;return t.subscribe=function(n){return(typeof n!="object"||n===null)&&(n={next:n,error:arguments[1],complete:arguments[2]}),new Subscription(n,this._subscriber)},t.forEach=function(n){var r=this;return new Promise(function(o,a){if(typeof n!="function"){a(new TypeError(n+" is not a function"));return}function s(){u.unsubscribe(),o()}var u=r.subscribe({next:function(l){try{n(l,s)}catch(c){a(c),u.unsubscribe()}},error:a,complete:o})})},t.map=function(n){var r=this;if(typeof n!="function")throw new TypeError(n+" is not a function");var o=getSpecies(this);return new o(function(a){return r.subscribe({next:function(s){try{s=n(s)}catch(u){return a.error(u)}a.next(s)},error:function(s){a.error(s)},complete:function(){a.complete()}})})},t.filter=function(n){var r=this;if(typeof n!="function")throw new TypeError(n+" is not a function");var o=getSpecies(this);return new o(function(a){return r.subscribe({next:function(s){try{if(!n(s))return}catch(u){return a.error(u)}a.next(s)},error:function(s){a.error(s)},complete:function(){a.complete()}})})},t.reduce=function(n){var r=this;if(typeof n!="function")throw new TypeError(n+" is not a function");var o=getSpecies(this),a=arguments.length>1,s=!1,u=arguments[1],l=u;return new o(function(c){return r.subscribe({next:function(m){var me=!s;if(s=!0,!me||a)try{l=n(l,m)}catch(xe){return c.error(xe)}else l=m},error:function(m){c.error(m)},complete:function(){if(!s&&!a)return c.error(new TypeError("Cannot reduce an empty sequence"));c.next(l),c.complete()}})})},t.concat=function(){for(var n=this,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];var s=getSpecies(this);return new s(function(u){var l,c=0;function m(me){l=me.subscribe({next:function(xe){u.next(xe)},error:function(xe){u.error(xe)},complete:function(){c===o.length?(l=void 0,u.complete()):m(s.from(o[c++]))}})}return m(n),function(){l&&(l.unsubscribe(),l=void 0)}})},t.flatMap=function(n){var r=this;if(typeof n!="function")throw new TypeError(n+" is not a function");var o=getSpecies(this);return new o(function(a){var s=[],u=r.subscribe({next:function(c){if(n)try{c=n(c)}catch(me){return a.error(me)}var m=o.from(c).subscribe({next:function(me){a.next(me)},error:function(me){a.error(me)},complete:function(){var me=s.indexOf(m);me>=0&&s.splice(me,1),l()}});s.push(m)},error:function(c){a.error(c)},complete:function(){l()}});function l(){u.closed&&s.length===0&&a.complete()}return function(){s.forEach(function(c){return c.unsubscribe()}),u.unsubscribe()}})},t[SymbolObservable]=function(){return this},e.from=function(n){var r=typeof this=="function"?this:e;if(n==null)throw new TypeError(n+" is not an object");var o=getMethod(n,SymbolObservable);if(o){var a=o.call(n);if(Object(a)!==a)throw new TypeError(a+" is not an object");return isObservable(a)&&a.constructor===r?a:new r(function(s){return a.subscribe(s)})}if(hasSymbol("iterator")&&(o=getMethod(n,SymbolIterator),o))return new r(function(s){enqueue(function(){if(!s.closed){for(var u=_createForOfIteratorHelperLoose(o.call(n)),l;!(l=u()).done;){var c=l.value;if(s.next(c),s.closed)return}s.complete()}})});if(Array.isArray(n))return new r(function(s){enqueue(function(){if(!s.closed){for(var u=0;u<n.length;++u)if(s.next(n[u]),s.closed)return;s.complete()}})});throw new TypeError(n+" is not observable")},e.of=function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];var a=typeof this=="function"?this:e;return new a(function(s){enqueue(function(){if(!s.closed){for(var u=0;u<r.length;++u)if(s.next(r[u]),s.closed)return;s.complete()}})})},_createClass(e,null,[{key:SymbolSpecies,get:function(){return this}}]),e}();hasSymbols()&&Object.defineProperty(Observable,Symbol("extensions"),{value:{symbol:SymbolObservable,hostReportError},configurable:!0});var toString$1=Object.prototype.toString;function cloneDeep(e){return cloneDeepHelper(e)}function cloneDeepHelper(e,t){switch(toString$1.call(e)){case"[object Array]":{if(t=t||new Map,t.has(e))return t.get(e);var n=e.slice(0);return t.set(e,n),n.forEach(function(o,a){n[a]=cloneDeepHelper(o,t)}),n}case"[object Object]":{if(t=t||new Map,t.has(e))return t.get(e);var r=Object.create(Object.getPrototypeOf(e));return t.set(e,r),Object.keys(e).forEach(function(o){r[o]=cloneDeepHelper(e[o],t)}),r}default:return e}}function deepFreeze(e){var t=new Set([e]);return t.forEach(function(n){isNonNullObject(n)&&shallowFreeze(n)===n&&Object.getOwnPropertyNames(n).forEach(function(r){isNonNullObject(n[r])&&t.add(n[r])})}),e}function shallowFreeze(e){if(__DEV__&&!Object.isFrozen(e))try{Object.freeze(e)}catch(t){if(t instanceof TypeError)return null;throw t}return e}function maybeDeepFreeze(e){return __DEV__&&deepFreeze(e),e}function iterateObserversSafely(e,t,n){var r=[];e.forEach(function(o){return o[t]&&r.push(o)}),r.forEach(function(o){return o[t](n)})}function asyncMap(e,t,n){return new Observable(function(r){var o=r.next,a=r.error,s=r.complete,u=0,l=!1,c={then:function(Ne){return new Promise(function(He){return He(Ne())})}};function m(Ne,He){return Ne?function(Ye){++u;var Je=function(){return Ne(Ye)};c=c.then(Je,Je).then(function(vn){--u,o&&o.call(r,vn),l&&me.complete()},function(vn){throw--u,vn}).catch(function(vn){a&&a.call(r,vn)})}:function(Ye){return He&&He.call(r,Ye)}}var me={next:m(t,o),error:m(n,a),complete:function(){l=!0,u||s&&s.call(r)}},xe=e.subscribe(me);return function(){return xe.unsubscribe()}})}var canUseWeakMap=typeof WeakMap=="function"&&maybe$1(function(){return navigator.product})!=="ReactNative",canUseWeakSet=typeof WeakSet=="function",canUseSymbol=typeof Symbol=="function"&&typeof Symbol.for=="function";maybe$1(function(){return window.document.createElement}),maybe$1(function(){return navigator.userAgent.indexOf("jsdom")>=0});function fixObservableSubclass(e){function t(n){Object.defineProperty(e,n,{value:Observable})}return canUseSymbol&&Symbol.species&&t(Symbol.species),t("@@species"),e}function isPromiseLike(e){return e&&typeof e.then=="function"}var Concast=function(e){__extends(t,e);function t(n){var r=e.call(this,function(o){return r.addObserver(o),function(){return r.removeObserver(o)}})||this;return r.observers=new Set,r.addCount=0,r.promise=new Promise(function(o,a){r.resolve=o,r.reject=a}),r.handlers={next:function(o){r.sub!==null&&(r.latest=["next",o],iterateObserversSafely(r.observers,"next",o))},error:function(o){var a=r.sub;a!==null&&(a&&setTimeout(function(){return a.unsubscribe()}),r.sub=null,r.latest=["error",o],r.reject(o),iterateObserversSafely(r.observers,"error",o))},complete:function(){var o=r.sub;if(o!==null){var a=r.sources.shift();a?isPromiseLike(a)?a.then(function(s){return r.sub=s.subscribe(r.handlers)}):r.sub=a.subscribe(r.handlers):(o&&setTimeout(function(){return o.unsubscribe()}),r.sub=null,r.latest&&r.latest[0]==="next"?r.resolve(r.latest[1]):r.resolve(),iterateObserversSafely(r.observers,"complete"))}}},r.cancel=function(o){r.reject(o),r.sources=[],r.handlers.complete()},r.promise.catch(function(o){}),typeof n=="function"&&(n=[new Observable(n)]),isPromiseLike(n)?n.then(function(o){return r.start(o)},r.handlers.error):r.start(n),r}return t.prototype.start=function(n){this.sub===void 0&&(this.sources=Array.from(n),this.handlers.complete())},t.prototype.deliverLastMessage=function(n){if(this.latest){var r=this.latest[0],o=n[r];o&&o.call(n,this.latest[1]),this.sub===null&&r==="next"&&n.complete&&n.complete()}},t.prototype.addObserver=function(n){this.observers.has(n)||(this.deliverLastMessage(n),this.observers.add(n),++this.addCount)},t.prototype.removeObserver=function(n,r){this.observers.delete(n)&&--this.addCount<1&&!r&&this.handlers.complete()},t.prototype.cleanup=function(n){var r=this,o=!1,a=function(){o||(o=!0,r.observers.delete(s),n())},s={next:a,error:a,complete:a},u=this.addCount;this.addObserver(s),this.addCount=u},t}(Observable);fixObservableSubclass(Concast);function isNonEmptyArray(e){return Array.isArray(e)&&e.length>0}function graphQLResultHasError(e){return e.errors&&e.errors.length>0||!1}function compact(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Object.create(null);return e.forEach(function(r){!r||Object.keys(r).forEach(function(o){var a=r[o];a!==void 0&&(n[o]=a)})}),n}var prefixCounts=new Map;function makeUniqueId(e){var t=prefixCounts.get(e)||1;return prefixCounts.set(e,t+1),"".concat(e,":").concat(t,":").concat(Math.random().toString(36).slice(2))}function stringifyForDisplay(e){var t=makeUniqueId("stringifyForDisplay");return JSON.stringify(e,function(n,r){return r===void 0?t:r}).split(JSON.stringify(t)).join("<undefined>")}function mergeOptions(e,t){return compact(e,t,t.variables&&{variables:__assign$1(__assign$1({},e&&e.variables),t.variables)})}function fromError(e){return new Observable(function(t){t.error(e)})}function toPromise(e){var t=!1;return new Promise(function(n,r){e.subscribe({next:function(o){t?__DEV__&&invariant$1.warn("Promise Wrapper does not support multiple results from Observable"):(t=!0,n(o))},error:r})})}function fromPromise(e){return new Observable(function(t){e.then(function(n){t.next(n),t.complete()}).catch(t.error.bind(t))})}var throwServerError=function(e,t,n){var r=new Error(n);throw r.name="ServerError",r.response=e,r.statusCode=e.status,r.result=t,r};function validateOperation(e){for(var t=["query","operationName","variables","extensions","context"],n=0,r=Object.keys(e);n<r.length;n++){var o=r[n];if(t.indexOf(o)<0)throw __DEV__?new InvariantError("illegal argument: ".concat(o)):new InvariantError(24)}return e}function createOperation(e,t){var n=__assign$1({},e),r=function(a){typeof a=="function"?n=__assign$1(__assign$1({},n),a(n)):n=__assign$1(__assign$1({},n),a)},o=function(){return __assign$1({},n)};return Object.defineProperty(t,"setContext",{enumerable:!1,value:r}),Object.defineProperty(t,"getContext",{enumerable:!1,value:o}),t}function transformOperation(e){var t={variables:e.variables||{},extensions:e.extensions||{},operationName:e.operationName,query:e.query};return t.operationName||(t.operationName=typeof t.query!="string"?getOperationName(t.query)||void 0:""),t}function passthrough(e,t){return t?t(e):Observable.of()}function toLink(e){return typeof e=="function"?new ApolloLink(e):e}function isTerminating(e){return e.request.length<=1}var LinkError=function(e){__extends(t,e);function t(n,r){var o=e.call(this,n)||this;return o.link=r,o}return t}(Error),ApolloLink=function(){function e(t){t&&(this.request=t)}return e.empty=function(){return new e(function(){return Observable.of()})},e.from=function(t){return t.length===0?e.empty():t.map(toLink).reduce(function(n,r){return n.concat(r)})},e.split=function(t,n,r){var o=toLink(n),a=toLink(r||new e(passthrough));return isTerminating(o)&&isTerminating(a)?new e(function(s){return t(s)?o.request(s)||Observable.of():a.request(s)||Observable.of()}):new e(function(s,u){return t(s)?o.request(s,u)||Observable.of():a.request(s,u)||Observable.of()})},e.execute=function(t,n){return t.request(createOperation(n.context,transformOperation(validateOperation(n))))||Observable.of()},e.concat=function(t,n){var r=toLink(t);if(isTerminating(r))return __DEV__&&invariant$1.warn(new LinkError("You are calling concat on a terminating link, which will have no effect",r)),r;var o=toLink(n);return isTerminating(o)?new e(function(a){return r.request(a,function(s){return o.request(s)||Observable.of()})||Observable.of()}):new e(function(a,s){return r.request(a,function(u){return o.request(u,s)||Observable.of()})||Observable.of()})},e.prototype.split=function(t,n,r){return this.concat(e.split(t,n,r||new e(passthrough)))},e.prototype.concat=function(t){return e.concat(this,t)},e.prototype.request=function(t,n){throw __DEV__?new InvariantError("request is not implemented"):new InvariantError(19)},e.prototype.onError=function(t,n){if(n&&n.error)return n.error(t),!1;throw t},e.prototype.setOnError=function(t){return this.onError=t,this},e}(),empty=ApolloLink.empty,from=ApolloLink.from,split=ApolloLink.split,concat=ApolloLink.concat,execute=ApolloLink.execute,version="3.6.9",hasOwnProperty$4=Object.prototype.hasOwnProperty;function parseAndCheckHttpResponse(e){return function(t){return t.text().then(function(n){try{return JSON.parse(n)}catch(o){var r=o;throw r.name="ServerParseError",r.response=t,r.statusCode=t.status,r.bodyText=n,r}}).then(function(n){return t.status>=300&&throwServerError(t,n,"Response not successful: Received status code ".concat(t.status)),!Array.isArray(n)&&!hasOwnProperty$4.call(n,"data")&&!hasOwnProperty$4.call(n,"errors")&&throwServerError(t,n,"Server response was missing for query '".concat(Array.isArray(e)?e.map(function(r){return r.operationName}):e.operationName,"'.")),n})}}var serializeFetchParameter=function(e,t){var n;try{n=JSON.stringify(e)}catch(o){var r=__DEV__?new InvariantError("Network request failed. ".concat(t," is not serializable: ").concat(o.message)):new InvariantError(21);throw r.parseError=o,r}return n},defaultHttpOptions={includeQuery:!0,includeExtensions:!1},defaultHeaders={accept:"*/*","content-type":"application/json"},defaultOptions={method:"POST"},fallbackHttpConfig={http:defaultHttpOptions,headers:defaultHeaders,options:defaultOptions},defaultPrinter=function(e,t){return t(e)};function selectHttpOptionsAndBody(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return n.unshift(t),selectHttpOptionsAndBodyInternal.apply(void 0,__spreadArray([e,defaultPrinter],n,!1))}function selectHttpOptionsAndBodyInternal(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var o={},a={};n.forEach(function(me){o=__assign$1(__assign$1(__assign$1({},o),me.options),{headers:__assign$1(__assign$1({},o.headers),headersToLowerCase(me.headers))}),me.credentials&&(o.credentials=me.credentials),a=__assign$1(__assign$1({},a),me.http)});var s=e.operationName,u=e.extensions,l=e.variables,c=e.query,m={operationName:s,variables:l};return a.includeExtensions&&(m.extensions=u),a.includeQuery&&(m.query=t(c,print)),{options:o,body:m}}function headersToLowerCase(e){if(e){var t=Object.create(null);return Object.keys(Object(e)).forEach(function(n){t[n.toLowerCase()]=e[n]}),t}return e}var checkFetcher=function(e){if(!e&&typeof fetch>"u")throw __DEV__?new InvariantError(`
"fetch" has not been found globally and no fetcher has been configured. To fix this, install a fetch package (like https://www.npmjs.com/package/cross-fetch), instantiate the fetcher, and pass it into your HttpLink constructor. For example:

import fetch from 'cross-fetch';
import { ApolloClient, HttpLink } from '@apollo/client';
const client = new ApolloClient({
  link: new HttpLink({ uri: '/graphql', fetch })
});
    `):new InvariantError(20)},createSignalIfSupported=function(){if(typeof AbortController>"u")return{controller:!1,signal:!1};var e=new AbortController,t=e.signal;return{controller:e,signal:t}},selectURI=function(e,t){var n=e.getContext(),r=n.uri;return r||(typeof t=="function"?t(e):t||"/graphql")};function rewriteURIForGET(e,t){var n=[],r=function(me,xe){n.push("".concat(me,"=").concat(encodeURIComponent(xe)))};if("query"in t&&r("query",t.query),t.operationName&&r("operationName",t.operationName),t.variables){var o=void 0;try{o=serializeFetchParameter(t.variables,"Variables map")}catch(me){return{parseError:me}}r("variables",o)}if(t.extensions){var a=void 0;try{a=serializeFetchParameter(t.extensions,"Extensions map")}catch(me){return{parseError:me}}r("extensions",a)}var s="",u=e,l=e.indexOf("#");l!==-1&&(s=e.substr(l),u=e.substr(0,l));var c=u.indexOf("?")===-1?"?":"&",m=u+c+n.join("&")+s;return{newURI:m}}var backupFetch=maybe$1(function(){return fetch}),createHttpLink=function(e){e===void 0&&(e={});var t=e.uri,n=t===void 0?"/graphql":t,r=e.fetch,o=e.print,a=o===void 0?defaultPrinter:o,s=e.includeExtensions,u=e.useGETForQueries,l=e.includeUnusedVariables,c=l===void 0?!1:l,m=__rest(e,["uri","fetch","print","includeExtensions","useGETForQueries","includeUnusedVariables"]);__DEV__&&checkFetcher(r||backupFetch);var me={http:{includeExtensions:s},options:m.fetchOptions,credentials:m.credentials,headers:m.headers};return new ApolloLink(function(xe){var Ne=selectURI(xe,n),He=xe.getContext(),Ye={};if(He.clientAwareness){var Je=He.clientAwareness,vn=Je.name,La=Je.version;vn&&(Ye["apollographql-client-name"]=vn),La&&(Ye["apollographql-client-version"]=La)}var sr=__assign$1(__assign$1({},Ye),He.headers),Zr={http:He.http,options:He.fetchOptions,credentials:He.credentials,headers:sr},zs=selectHttpOptionsAndBodyInternal(xe,a,fallbackHttpConfig,me,Zr),za=zs.options,Hs=zs.body;if(Hs.variables&&!c){var lc=new Set(Object.keys(Hs.variables));visit(xe.query,{Variable:function(Ay,$b,e0){e0&&e0.kind!=="VariableDefinition"&&lc.delete(Ay.name.value)}}),lc.size&&(Hs.variables=__assign$1({},Hs.variables),lc.forEach(function(Ay){delete Hs.variables[Ay]}))}var Ty;if(!za.signal){var _y=createSignalIfSupported(),xy=_y.controller,Bb=_y.signal;Ty=xy,Ty&&(za.signal=Bb)}var Dy=function(Ay){return Ay.kind==="OperationDefinition"&&Ay.operation==="mutation"};if(u&&!xe.query.definitions.some(Dy)&&(za.method="GET"),za.method==="GET"){var Bg=rewriteURIForGET(Ne,Hs),yy=Bg.newURI,wy=Bg.parseError;if(wy)return fromError(wy);Ne=yy}else try{za.body=serializeFetchParameter(Hs,"Payload")}catch(Ay){return fromError(Ay)}return new Observable(function(Ay){var $b=r||maybe$1(function(){return fetch})||backupFetch;return $b(Ne,za).then(function(e0){return xe.setContext({response:e0}),e0}).then(parseAndCheckHttpResponse(xe)).then(function(e0){return Ay.next(e0),Ay.complete(),e0}).catch(function(e0){e0.name!=="AbortError"&&(e0.result&&e0.result.errors&&e0.result.data&&Ay.next(e0.result),Ay.error(e0))}),function(){Ty&&Ty.abort()}})})},HttpLink=function(e){__extends(t,e);function t(n){n===void 0&&(n={});var r=e.call(this,createHttpLink(n).request)||this;return r.options=n,r}return t}(ApolloLink),_a$2=Object.prototype,toString=_a$2.toString,hasOwnProperty$3=_a$2.hasOwnProperty,fnToStr=Function.prototype.toString,previousComparisons=new Map;function equal(e,t){try{return check(e,t)}finally{previousComparisons.clear()}}function check(e,t){if(e===t)return!0;var n=toString.call(e),r=toString.call(t);if(n!==r)return!1;switch(n){case"[object Array]":if(e.length!==t.length)return!1;case"[object Object]":{if(previouslyCompared(e,t))return!0;var o=definedKeys(e),a=definedKeys(t),s=o.length;if(s!==a.length)return!1;for(var u=0;u<s;++u)if(!hasOwnProperty$3.call(t,o[u]))return!1;for(var u=0;u<s;++u){var l=o[u];if(!check(e[l],t[l]))return!1}return!0}case"[object Error]":return e.name===t.name&&e.message===t.message;case"[object Number]":if(e!==e)return t!==t;case"[object Boolean]":case"[object Date]":return+e==+t;case"[object RegExp]":case"[object String]":return e==""+t;case"[object Map]":case"[object Set]":{if(e.size!==t.size)return!1;if(previouslyCompared(e,t))return!0;for(var c=e.entries(),m=n==="[object Map]";;){var me=c.next();if(me.done)break;var xe=me.value,Ne=xe[0],He=xe[1];if(!t.has(Ne)||m&&!check(He,t.get(Ne)))return!1}return!0}case"[object Uint16Array]":case"[object Uint8Array]":case"[object Uint32Array]":case"[object Int32Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object ArrayBuffer]":e=new Uint8Array(e),t=new Uint8Array(t);case"[object DataView]":{var Ye=e.byteLength;if(Ye===t.byteLength)for(;Ye--&&e[Ye]===t[Ye];);return Ye===-1}case"[object AsyncFunction]":case"[object GeneratorFunction]":case"[object AsyncGeneratorFunction]":case"[object Function]":{var Je=fnToStr.call(e);return Je!==fnToStr.call(t)?!1:!endsWith(Je,nativeCodeSuffix)}}return!1}function definedKeys(e){return Object.keys(e).filter(isDefinedKey,e)}function isDefinedKey(e){return this[e]!==void 0}var nativeCodeSuffix="{ [native code] }";function endsWith(e,t){var n=e.length-t.length;return n>=0&&e.indexOf(t,n)===n}function previouslyCompared(e,t){var n=previousComparisons.get(e);if(n){if(n.has(t))return!0}else previousComparisons.set(e,n=new Set);return n.add(t),!1}var defaultMakeData=function(){return Object.create(null)},_a$1=Array.prototype,forEach=_a$1.forEach,slice=_a$1.slice,Trie=function(){function e(t,n){t===void 0&&(t=!0),n===void 0&&(n=defaultMakeData),this.weakness=t,this.makeData=n}return e.prototype.lookup=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return this.lookupArray(t)},e.prototype.lookupArray=function(t){var n=this;return forEach.call(t,function(r){return n=n.getChildTrie(r)}),n.data||(n.data=this.makeData(slice.call(t)))},e.prototype.getChildTrie=function(t){var n=this.weakness&&isObjRef(t)?this.weak||(this.weak=new WeakMap):this.strong||(this.strong=new Map),r=n.get(t);return r||n.set(t,r=new e(this.weakness,this.makeData)),r},e}();function isObjRef(e){switch(typeof e){case"object":if(e===null)break;case"function":return!0}return!1}var currentContext=null,MISSING_VALUE={},idCounter=1,makeSlotClass=function(){return function(){function e(){this.id=["slot",idCounter++,Date.now(),Math.random().toString(36).slice(2)].join(":")}return e.prototype.hasValue=function(){for(var t=currentContext;t;t=t.parent)if(this.id in t.slots){var n=t.slots[this.id];if(n===MISSING_VALUE)break;return t!==currentContext&&(currentContext.slots[this.id]=n),!0}return currentContext&&(currentContext.slots[this.id]=MISSING_VALUE),!1},e.prototype.getValue=function(){if(this.hasValue())return currentContext.slots[this.id]},e.prototype.withValue=function(t,n,r,o){var a,s=(a={__proto__:null},a[this.id]=t,a),u=currentContext;currentContext={parent:u,slots:s};try{return n.apply(o,r)}finally{currentContext=u}},e.bind=function(t){var n=currentContext;return function(){var r=currentContext;try{return currentContext=n,t.apply(this,arguments)}finally{currentContext=r}}},e.noContext=function(t,n,r){if(currentContext){var o=currentContext;try{return currentContext=null,t.apply(r,n)}finally{currentContext=o}}else return t.apply(r,n)},e}()},globalKey="@wry/context:Slot",host=Array,Slot=host[globalKey]||function(){var e=makeSlotClass();try{Object.defineProperty(host,globalKey,{value:host[globalKey]=e,enumerable:!1,writable:!1,configurable:!1})}finally{return e}}();Slot.bind,Slot.noContext;function defaultDispose(){}var Cache$1=function(){function e(t,n){t===void 0&&(t=1/0),n===void 0&&(n=defaultDispose),this.max=t,this.dispose=n,this.map=new Map,this.newest=null,this.oldest=null}return e.prototype.has=function(t){return this.map.has(t)},e.prototype.get=function(t){var n=this.getNode(t);return n&&n.value},e.prototype.getNode=function(t){var n=this.map.get(t);if(n&&n!==this.newest){var r=n.older,o=n.newer;o&&(o.older=r),r&&(r.newer=o),n.older=this.newest,n.older.newer=n,n.newer=null,this.newest=n,n===this.oldest&&(this.oldest=o)}return n},e.prototype.set=function(t,n){var r=this.getNode(t);return r?r.value=n:(r={key:t,value:n,newer:null,older:this.newest},this.newest&&(this.newest.newer=r),this.newest=r,this.oldest=this.oldest||r,this.map.set(t,r),r.value)},e.prototype.clean=function(){for(;this.oldest&&this.map.size>this.max;)this.delete(this.oldest.key)},e.prototype.delete=function(t){var n=this.map.get(t);return n?(n===this.newest&&(this.newest=n.older),n===this.oldest&&(this.oldest=n.newer),n.newer&&(n.newer.older=n.older),n.older&&(n.older.newer=n.newer),this.map.delete(t),this.dispose(n.value,t),!0):!1},e}(),parentEntrySlot=new Slot,_a,hasOwnProperty$2=Object.prototype.hasOwnProperty,toArray=(_a=Array.from,_a===void 0?function(e){var t=[];return e.forEach(function(n){return t.push(n)}),t}:_a);function maybeUnsubscribe(e){var t=e.unsubscribe;typeof t=="function"&&(e.unsubscribe=void 0,t())}var emptySetPool=[],POOL_TARGET_SIZE=100;function assert(e,t){if(!e)throw new Error(t||"assertion failure")}function valueIs(e,t){var n=e.length;return n>0&&n===t.length&&e[n-1]===t[n-1]}function valueGet(e){switch(e.length){case 0:throw new Error("unknown value");case 1:return e[0];case 2:throw e[1]}}function valueCopy(e){return e.slice(0)}var Entry=function(){function e(t){this.fn=t,this.parents=new Set,this.childValues=new Map,this.dirtyChildren=null,this.dirty=!0,this.recomputing=!1,this.value=[],this.deps=null,++e.count}return e.prototype.peek=function(){if(this.value.length===1&&!mightBeDirty(this))return rememberParent(this),this.value[0]},e.prototype.recompute=function(t){return assert(!this.recomputing,"already recomputing"),rememberParent(this),mightBeDirty(this)?reallyRecompute(this,t):valueGet(this.value)},e.prototype.setDirty=function(){this.dirty||(this.dirty=!0,this.value.length=0,reportDirty(this),maybeUnsubscribe(this))},e.prototype.dispose=function(){var t=this;this.setDirty(),forgetChildren(this),eachParent(this,function(n,r){n.setDirty(),forgetChild(n,t)})},e.prototype.forget=function(){this.dispose()},e.prototype.dependOn=function(t){t.add(this),this.deps||(this.deps=emptySetPool.pop()||new Set),this.deps.add(t)},e.prototype.forgetDeps=function(){var t=this;this.deps&&(toArray(this.deps).forEach(function(n){return n.delete(t)}),this.deps.clear(),emptySetPool.push(this.deps),this.deps=null)},e.count=0,e}();function rememberParent(e){var t=parentEntrySlot.getValue();if(t)return e.parents.add(t),t.childValues.has(e)||t.childValues.set(e,[]),mightBeDirty(e)?reportDirtyChild(t,e):reportCleanChild(t,e),t}function reallyRecompute(e,t){return forgetChildren(e),parentEntrySlot.withValue(e,recomputeNewValue,[e,t]),maybeSubscribe(e,t)&&setClean(e),valueGet(e.value)}function recomputeNewValue(e,t){e.recomputing=!0,e.value.length=0;try{e.value[0]=e.fn.apply(null,t)}catch(n){e.value[1]=n}e.recomputing=!1}function mightBeDirty(e){return e.dirty||!!(e.dirtyChildren&&e.dirtyChildren.size)}function setClean(e){e.dirty=!1,!mightBeDirty(e)&&reportClean(e)}function reportDirty(e){eachParent(e,reportDirtyChild)}function reportClean(e){eachParent(e,reportCleanChild)}function eachParent(e,t){var n=e.parents.size;if(n)for(var r=toArray(e.parents),o=0;o<n;++o)t(r[o],e)}function reportDirtyChild(e,t){assert(e.childValues.has(t)),assert(mightBeDirty(t));var n=!mightBeDirty(e);if(!e.dirtyChildren)e.dirtyChildren=emptySetPool.pop()||new Set;else if(e.dirtyChildren.has(t))return;e.dirtyChildren.add(t),n&&reportDirty(e)}function reportCleanChild(e,t){assert(e.childValues.has(t)),assert(!mightBeDirty(t));var n=e.childValues.get(t);n.length===0?e.childValues.set(t,valueCopy(t.value)):valueIs(n,t.value)||e.setDirty(),removeDirtyChild(e,t),!mightBeDirty(e)&&reportClean(e)}function removeDirtyChild(e,t){var n=e.dirtyChildren;n&&(n.delete(t),n.size===0&&(emptySetPool.length<POOL_TARGET_SIZE&&emptySetPool.push(n),e.dirtyChildren=null))}function forgetChildren(e){e.childValues.size>0&&e.childValues.forEach(function(t,n){forgetChild(e,n)}),e.forgetDeps(),assert(e.dirtyChildren===null)}function forgetChild(e,t){t.parents.delete(e),e.childValues.delete(t),removeDirtyChild(e,t)}function maybeSubscribe(e,t){if(typeof e.subscribe=="function")try{maybeUnsubscribe(e),e.unsubscribe=e.subscribe.apply(null,t)}catch{return e.setDirty(),!1}return!0}var EntryMethods={setDirty:!0,dispose:!0,forget:!0};function dep(e){var t=new Map,n=e&&e.subscribe;function r(o){var a=parentEntrySlot.getValue();if(a){var s=t.get(o);s||t.set(o,s=new Set),a.dependOn(s),typeof n=="function"&&(maybeUnsubscribe(s),s.unsubscribe=n(o))}}return r.dirty=function(o,a){var s=t.get(o);if(s){var u=a&&hasOwnProperty$2.call(EntryMethods,a)?a:"setDirty";toArray(s).forEach(function(l){return l[u]()}),t.delete(o),maybeUnsubscribe(s)}},r}function makeDefaultMakeCacheKeyFunction(){var e=new Trie(typeof WeakMap=="function");return function(){return e.lookupArray(arguments)}}makeDefaultMakeCacheKeyFunction();var caches=new Set;function wrap(e,t){t===void 0&&(t=Object.create(null));var n=new Cache$1(t.max||Math.pow(2,16),function(c){return c.dispose()}),r=t.keyArgs,o=t.makeCacheKey||makeDefaultMakeCacheKeyFunction(),a=function(){var c=o.apply(null,r?r.apply(null,arguments):arguments);if(c===void 0)return e.apply(null,arguments);var m=n.get(c);m||(n.set(c,m=new Entry(e)),m.subscribe=t.subscribe,m.forget=function(){return n.delete(c)});var me=m.recompute(Array.prototype.slice.call(arguments));return n.set(c,m),caches.add(n),parentEntrySlot.hasValue()||(caches.forEach(function(xe){return xe.clean()}),caches.clear()),me};Object.defineProperty(a,"size",{get:function(){return n.map.size},configurable:!1,enumerable:!1});function s(c){var m=n.get(c);m&&m.setDirty()}a.dirtyKey=s,a.dirty=function(){s(o.apply(null,arguments))};function u(c){var m=n.get(c);if(m)return m.peek()}a.peekKey=u,a.peek=function(){return u(o.apply(null,arguments))};function l(c){return n.delete(c)}return a.forgetKey=l,a.forget=function(){return l(o.apply(null,arguments))},a.makeCacheKey=o,a.getKey=r?function(){return o.apply(null,r.apply(null,arguments))}:o,Object.freeze(a)}var ApolloCache=function(){function e(){this.getFragmentDoc=wrap(getFragmentQueryDocument)}return e.prototype.batch=function(t){var n=this,r=typeof t.optimistic=="string"?t.optimistic:t.optimistic===!1?null:void 0,o;return this.performTransaction(function(){return o=t.update(n)},r),o},e.prototype.recordOptimisticTransaction=function(t,n){this.performTransaction(t,n)},e.prototype.transformDocument=function(t){return t},e.prototype.identify=function(t){},e.prototype.gc=function(){return[]},e.prototype.modify=function(t){return!1},e.prototype.transformForLink=function(t){return t},e.prototype.readQuery=function(t,n){return n===void 0&&(n=!!t.optimistic),this.read(__assign$1(__assign$1({},t),{rootId:t.id||"ROOT_QUERY",optimistic:n}))},e.prototype.readFragment=function(t,n){return n===void 0&&(n=!!t.optimistic),this.read(__assign$1(__assign$1({},t),{query:this.getFragmentDoc(t.fragment,t.fragmentName),rootId:t.id,optimistic:n}))},e.prototype.writeQuery=function(t){var n=t.id,r=t.data,o=__rest(t,["id","data"]);return this.write(Object.assign(o,{dataId:n||"ROOT_QUERY",result:r}))},e.prototype.writeFragment=function(t){var n=t.id,r=t.data,o=t.fragment,a=t.fragmentName,s=__rest(t,["id","data","fragment","fragmentName"]);return this.write(Object.assign(s,{query:this.getFragmentDoc(o,a),dataId:n,result:r}))},e.prototype.updateQuery=function(t,n){return this.batch({update:function(r){var o=r.readQuery(t),a=n(o);return a==null?o:(r.writeQuery(__assign$1(__assign$1({},t),{data:a})),a)}})},e.prototype.updateFragment=function(t,n){return this.batch({update:function(r){var o=r.readFragment(t),a=n(o);return a==null?o:(r.writeFragment(__assign$1(__assign$1({},t),{data:a})),a)}})},e}(),Cache;(function(e){})(Cache||(Cache={}));var MissingFieldError=function(){function e(t,n,r,o){this.message=t,this.path=n,this.query=r,this.variables=o}return e}(),hasOwn=Object.prototype.hasOwnProperty;function defaultDataIdFromObject(e,t){var n=e.__typename,r=e.id,o=e._id;if(typeof n=="string"&&(t&&(t.keyObject=r!==void 0?{id:r}:o!==void 0?{_id:o}:void 0),r===void 0&&(r=o),r!==void 0))return"".concat(n,":").concat(typeof r=="number"||typeof r=="string"?r:JSON.stringify(r))}var defaultConfig={dataIdFromObject:defaultDataIdFromObject,addTypename:!0,resultCaching:!0,canonizeResults:!1};function normalizeConfig(e){return compact(defaultConfig,e)}function shouldCanonizeResults(e){var t=e.canonizeResults;return t===void 0?defaultConfig.canonizeResults:t}function getTypenameFromStoreObject(e,t){return isReference(t)?e.get(t.__ref,"__typename"):t&&t.__typename}var TypeOrFieldNameRegExp=/^[_a-z][_0-9a-z]*/i;function fieldNameFromStoreName(e){var t=e.match(TypeOrFieldNameRegExp);return t?t[0]:e}function selectionSetMatchesResult(e,t,n){return isNonNullObject(t)?isArray(t)?t.every(function(r){return selectionSetMatchesResult(e,r,n)}):e.selections.every(function(r){if(isField(r)&&shouldInclude(r,n)){var o=resultKeyNameFromField(r);return hasOwn.call(t,o)&&(!r.selectionSet||selectionSetMatchesResult(r.selectionSet,t[o],n))}return!0}):!1}function storeValueIsStoreObject(e){return isNonNullObject(e)&&!isReference(e)&&!isArray(e)}function makeProcessedFieldsMerger(){return new DeepMerger}var isArray=function(e){return Array.isArray(e)},DELETE=Object.create(null),delModifier=function(){return DELETE},INVALIDATE=Object.create(null),EntityStore=function(){function e(t,n){var r=this;this.policies=t,this.group=n,this.data=Object.create(null),this.rootIds=Object.create(null),this.refs=Object.create(null),this.getFieldValue=function(o,a){return maybeDeepFreeze(isReference(o)?r.get(o.__ref,a):o&&o[a])},this.canRead=function(o){return isReference(o)?r.has(o.__ref):typeof o=="object"},this.toReference=function(o,a){if(typeof o=="string")return makeReference(o);if(isReference(o))return o;var s=r.policies.identify(o)[0];if(s){var u=makeReference(s);return a&&r.merge(s,o),u}}}return e.prototype.toObject=function(){return __assign$1({},this.data)},e.prototype.has=function(t){return this.lookup(t,!0)!==void 0},e.prototype.get=function(t,n){if(this.group.depend(t,n),hasOwn.call(this.data,t)){var r=this.data[t];if(r&&hasOwn.call(r,n))return r[n]}if(n==="__typename"&&hasOwn.call(this.policies.rootTypenamesById,t))return this.policies.rootTypenamesById[t];if(this instanceof Layer)return this.parent.get(t,n)},e.prototype.lookup=function(t,n){if(n&&this.group.depend(t,"__exists"),hasOwn.call(this.data,t))return this.data[t];if(this instanceof Layer)return this.parent.lookup(t,n);if(this.policies.rootTypenamesById[t])return Object.create(null)},e.prototype.merge=function(t,n){var r=this,o;isReference(t)&&(t=t.__ref),isReference(n)&&(n=n.__ref);var a=typeof t=="string"?this.lookup(o=t):t,s=typeof n=="string"?this.lookup(o=n):n;if(s){__DEV__?invariant$1(typeof o=="string","store.merge expects a string ID"):invariant$1(typeof o=="string",1);var u=new DeepMerger(storeObjectReconciler).merge(a,s);if(this.data[o]=u,u!==a&&(delete this.refs[o],this.group.caching)){var l=Object.create(null);a||(l.__exists=1),Object.keys(s).forEach(function(c){if(!a||a[c]!==u[c]){l[c]=1;var m=fieldNameFromStoreName(c);m!==c&&!r.policies.hasKeyArgs(u.__typename,m)&&(l[m]=1),u[c]===void 0&&!(r instanceof Layer)&&delete u[c]}}),l.__typename&&!(a&&a.__typename)&&this.policies.rootTypenamesById[o]===u.__typename&&delete l.__typename,Object.keys(l).forEach(function(c){return r.group.dirty(o,c)})}}},e.prototype.modify=function(t,n){var r=this,o=this.lookup(t);if(o){var a=Object.create(null),s=!1,u=!0,l={DELETE,INVALIDATE,isReference,toReference:this.toReference,canRead:this.canRead,readField:function(c,m){return r.policies.readField(typeof c=="string"?{fieldName:c,from:m||makeReference(t)}:c,{store:r})}};if(Object.keys(o).forEach(function(c){var m=fieldNameFromStoreName(c),me=o[c];if(me!==void 0){var xe=typeof n=="function"?n:n[c]||n[m];if(xe){var Ne=xe===delModifier?DELETE:xe(maybeDeepFreeze(me),__assign$1(__assign$1({},l),{fieldName:m,storeFieldName:c,storage:r.getStorage(t,c)}));Ne===INVALIDATE?r.group.dirty(t,c):(Ne===DELETE&&(Ne=void 0),Ne!==me&&(a[c]=Ne,s=!0,me=Ne))}me!==void 0&&(u=!1)}}),s)return this.merge(t,a),u&&(this instanceof Layer?this.data[t]=void 0:delete this.data[t],this.group.dirty(t,"__exists")),!0}return!1},e.prototype.delete=function(t,n,r){var o,a=this.lookup(t);if(a){var s=this.getFieldValue(a,"__typename"),u=n&&r?this.policies.getStoreFieldName({typename:s,fieldName:n,args:r}):n;return this.modify(t,u?(o={},o[u]=delModifier,o):delModifier)}return!1},e.prototype.evict=function(t,n){var r=!1;return t.id&&(hasOwn.call(this.data,t.id)&&(r=this.delete(t.id,t.fieldName,t.args)),this instanceof Layer&&this!==n&&(r=this.parent.evict(t,n)||r),(t.fieldName||r)&&this.group.dirty(t.id,t.fieldName||"__exists")),r},e.prototype.clear=function(){this.replace(null)},e.prototype.extract=function(){var t=this,n=this.toObject(),r=[];return this.getRootIdSet().forEach(function(o){hasOwn.call(t.policies.rootTypenamesById,o)||r.push(o)}),r.length&&(n.__META={extraRootIds:r.sort()}),n},e.prototype.replace=function(t){var n=this;if(Object.keys(this.data).forEach(function(a){t&&hasOwn.call(t,a)||n.delete(a)}),t){var r=t.__META,o=__rest(t,["__META"]);Object.keys(o).forEach(function(a){n.merge(a,o[a])}),r&&r.extraRootIds.forEach(this.retain,this)}},e.prototype.retain=function(t){return this.rootIds[t]=(this.rootIds[t]||0)+1},e.prototype.release=function(t){if(this.rootIds[t]>0){var n=--this.rootIds[t];return n||delete this.rootIds[t],n}return 0},e.prototype.getRootIdSet=function(t){return t===void 0&&(t=new Set),Object.keys(this.rootIds).forEach(t.add,t),this instanceof Layer?this.parent.getRootIdSet(t):Object.keys(this.policies.rootTypenamesById).forEach(t.add,t),t},e.prototype.gc=function(){var t=this,n=this.getRootIdSet(),r=this.toObject();n.forEach(function(s){hasOwn.call(r,s)&&(Object.keys(t.findChildRefIds(s)).forEach(n.add,n),delete r[s])});var o=Object.keys(r);if(o.length){for(var a=this;a instanceof Layer;)a=a.parent;o.forEach(function(s){return a.delete(s)})}return o},e.prototype.findChildRefIds=function(t){if(!hasOwn.call(this.refs,t)){var n=this.refs[t]=Object.create(null),r=this.data[t];if(!r)return n;var o=new Set([r]);o.forEach(function(a){isReference(a)&&(n[a.__ref]=!0),isNonNullObject(a)&&Object.keys(a).forEach(function(s){var u=a[s];isNonNullObject(u)&&o.add(u)})})}return this.refs[t]},e.prototype.makeCacheKey=function(){return this.group.keyMaker.lookupArray(arguments)},e}(),CacheGroup=function(){function e(t,n){n===void 0&&(n=null),this.caching=t,this.parent=n,this.d=null,this.resetCaching()}return e.prototype.resetCaching=function(){this.d=this.caching?dep():null,this.keyMaker=new Trie(canUseWeakMap)},e.prototype.depend=function(t,n){if(this.d){this.d(makeDepKey(t,n));var r=fieldNameFromStoreName(n);r!==n&&this.d(makeDepKey(t,r)),this.parent&&this.parent.depend(t,n)}},e.prototype.dirty=function(t,n){this.d&&this.d.dirty(makeDepKey(t,n),n==="__exists"?"forget":"setDirty")},e}();function makeDepKey(e,t){return t+"#"+e}function maybeDependOnExistenceOfEntity(e,t){supportsResultCaching(e)&&e.group.depend(t,"__exists")}(function(e){var t=function(n){__extends(r,n);function r(o){var a=o.policies,s=o.resultCaching,u=s===void 0?!0:s,l=o.seed,c=n.call(this,a,new CacheGroup(u))||this;return c.stump=new Stump(c),c.storageTrie=new Trie(canUseWeakMap),l&&c.replace(l),c}return r.prototype.addLayer=function(o,a){return this.stump.addLayer(o,a)},r.prototype.removeLayer=function(){return this},r.prototype.getStorage=function(){return this.storageTrie.lookupArray(arguments)},r}(e);e.Root=t})(EntityStore||(EntityStore={}));var Layer=function(e){__extends(t,e);function t(n,r,o,a){var s=e.call(this,r.policies,a)||this;return s.id=n,s.parent=r,s.replay=o,s.group=a,o(s),s}return t.prototype.addLayer=function(n,r){return new t(n,this,r,this.group)},t.prototype.removeLayer=function(n){var r=this,o=this.parent.removeLayer(n);return n===this.id?(this.group.caching&&Object.keys(this.data).forEach(function(a){var s=r.data[a],u=o.lookup(a);u?s?s!==u&&Object.keys(s).forEach(function(l){equal(s[l],u[l])||r.group.dirty(a,l)}):(r.group.dirty(a,"__exists"),Object.keys(u).forEach(function(l){r.group.dirty(a,l)})):r.delete(a)}),o):o===this.parent?this:o.addLayer(this.id,this.replay)},t.prototype.toObject=function(){return __assign$1(__assign$1({},this.parent.toObject()),this.data)},t.prototype.findChildRefIds=function(n){var r=this.parent.findChildRefIds(n);return hasOwn.call(this.data,n)?__assign$1(__assign$1({},r),e.prototype.findChildRefIds.call(this,n)):r},t.prototype.getStorage=function(){for(var n=this.parent;n.parent;)n=n.parent;return n.getStorage.apply(n,arguments)},t}(EntityStore),Stump=function(e){__extends(t,e);function t(n){return e.call(this,"EntityStore.Stump",n,function(){},new CacheGroup(n.group.caching,n.group))||this}return t.prototype.removeLayer=function(){return this},t.prototype.merge=function(){return this.parent.merge.apply(this.parent,arguments)},t}(Layer);function storeObjectReconciler(e,t,n){var r=e[n],o=t[n];return equal(r,o)?r:o}function supportsResultCaching(e){return!!(e instanceof EntityStore&&e.group.caching)}function shallowCopy(e){return isNonNullObject(e)?isArray(e)?e.slice(0):__assign$1({__proto__:Object.getPrototypeOf(e)},e):e}var ObjectCanon=function(){function e(){this.known=new(canUseWeakSet?WeakSet:Set),this.pool=new Trie(canUseWeakMap),this.passes=new WeakMap,this.keysByJSON=new Map,this.empty=this.admit({})}return e.prototype.isKnown=function(t){return isNonNullObject(t)&&this.known.has(t)},e.prototype.pass=function(t){if(isNonNullObject(t)){var n=shallowCopy(t);return this.passes.set(n,t),n}return t},e.prototype.admit=function(t){var n=this;if(isNonNullObject(t)){var r=this.passes.get(t);if(r)return r;var o=Object.getPrototypeOf(t);switch(o){case Array.prototype:{if(this.known.has(t))return t;var a=t.map(this.admit,this),s=this.pool.lookupArray(a);return s.array||(this.known.add(s.array=a),__DEV__&&Object.freeze(a)),s.array}case null:case Object.prototype:{if(this.known.has(t))return t;var u=Object.getPrototypeOf(t),l=[u],c=this.sortedKeys(t);l.push(c.json);var m=l.length;c.sorted.forEach(function(Ne){l.push(n.admit(t[Ne]))});var s=this.pool.lookupArray(l);if(!s.object){var me=s.object=Object.create(u);this.known.add(me),c.sorted.forEach(function(Ne,He){me[Ne]=l[m+He]}),__DEV__&&Object.freeze(me)}return s.object}}}return t},e.prototype.sortedKeys=function(t){var n=Object.keys(t),r=this.pool.lookupArray(n);if(!r.keys){n.sort();var o=JSON.stringify(n);(r.keys=this.keysByJSON.get(o))||this.keysByJSON.set(o,r.keys={sorted:n,json:o})}return r.keys},e}(),canonicalStringify=Object.assign(function(e){if(isNonNullObject(e)){stringifyCanon===void 0&&resetCanonicalStringify();var t=stringifyCanon.admit(e),n=stringifyCache.get(t);return n===void 0&&stringifyCache.set(t,n=JSON.stringify(t)),n}return JSON.stringify(e)},{reset:resetCanonicalStringify}),stringifyCanon,stringifyCache;function resetCanonicalStringify(){stringifyCanon=new ObjectCanon,stringifyCache=new(canUseWeakMap?WeakMap:Map)}function execSelectionSetKeyArgs(e){return[e.selectionSet,e.objectOrReference,e.context,e.context.canonizeResults]}var StoreReader=function(){function e(t){var n=this;this.knownResults=new(canUseWeakMap?WeakMap:Map),this.config=compact(t,{addTypename:t.addTypename!==!1,canonizeResults:shouldCanonizeResults(t)}),this.canon=t.canon||new ObjectCanon,this.executeSelectionSet=wrap(function(r){var o,a=r.context.canonizeResults,s=execSelectionSetKeyArgs(r);s[3]=!a;var u=(o=n.executeSelectionSet).peek.apply(o,s);return u?a?__assign$1(__assign$1({},u),{result:n.canon.admit(u.result)}):u:(maybeDependOnExistenceOfEntity(r.context.store,r.enclosingRef.__ref),n.execSelectionSetImpl(r))},{max:this.config.resultCacheMaxSize,keyArgs:execSelectionSetKeyArgs,makeCacheKey:function(r,o,a,s){if(supportsResultCaching(a.store))return a.store.makeCacheKey(r,isReference(o)?o.__ref:o,a.varString,s)}}),this.executeSubSelectedArray=wrap(function(r){return maybeDependOnExistenceOfEntity(r.context.store,r.enclosingRef.__ref),n.execSubSelectedArrayImpl(r)},{max:this.config.resultCacheMaxSize,makeCacheKey:function(r){var o=r.field,a=r.array,s=r.context;if(supportsResultCaching(s.store))return s.store.makeCacheKey(o,a,s.varString)}})}return e.prototype.resetCanon=function(){this.canon=new ObjectCanon},e.prototype.diffQueryAgainstStore=function(t){var n=t.store,r=t.query,o=t.rootId,a=o===void 0?"ROOT_QUERY":o,s=t.variables,u=t.returnPartialData,l=u===void 0?!0:u,c=t.canonizeResults,m=c===void 0?this.config.canonizeResults:c,me=this.config.cache.policies;s=__assign$1(__assign$1({},getDefaultValues(getQueryDefinition(r))),s);var xe=makeReference(a),Ne=this.executeSelectionSet({selectionSet:getMainDefinition(r).selectionSet,objectOrReference:xe,enclosingRef:xe,context:{store:n,query:r,policies:me,variables:s,varString:canonicalStringify(s),canonizeResults:m,fragmentMap:createFragmentMap(getFragmentDefinitions(r))}}),He;if(Ne.missing&&(He=[new MissingFieldError(firstMissing(Ne.missing),Ne.missing,r,s)],!l))throw He[0];return{result:Ne.result,complete:!He,missing:He}},e.prototype.isFresh=function(t,n,r,o){if(supportsResultCaching(o.store)&&this.knownResults.get(t)===r){var a=this.executeSelectionSet.peek(r,n,o,this.canon.isKnown(t));if(a&&t===a.result)return!0}return!1},e.prototype.execSelectionSetImpl=function(t){var n=this,r=t.selectionSet,o=t.objectOrReference,a=t.enclosingRef,s=t.context;if(isReference(o)&&!s.policies.rootTypenamesById[o.__ref]&&!s.store.has(o.__ref))return{result:this.canon.empty,missing:"Dangling reference to missing ".concat(o.__ref," object")};var u=s.variables,l=s.policies,c=s.store,m=c.getFieldValue(o,"__typename"),me=[],xe,Ne=new DeepMerger;this.config.addTypename&&typeof m=="string"&&!l.rootIdsByTypename[m]&&me.push({__typename:m});function He(sr,Zr){var zs;return sr.missing&&(xe=Ne.merge(xe,(zs={},zs[Zr]=sr.missing,zs))),sr.result}var Ye=new Set(r.selections);Ye.forEach(function(sr){var Zr,zs;if(shouldInclude(sr,u))if(isField(sr)){var za=l.readField({fieldName:sr.name.value,field:sr,variables:s.variables,from:o},s),Hs=resultKeyNameFromField(sr);za===void 0?addTypenameToDocument.added(sr)||(xe=Ne.merge(xe,(Zr={},Zr[Hs]="Can't find field '".concat(sr.name.value,"' on ").concat(isReference(o)?o.__ref+" object":"object "+JSON.stringify(o,null,2)),Zr))):isArray(za)?za=He(n.executeSubSelectedArray({field:sr,array:za,enclosingRef:a,context:s}),Hs):sr.selectionSet?za!=null&&(za=He(n.executeSelectionSet({selectionSet:sr.selectionSet,objectOrReference:za,enclosingRef:isReference(za)?za:a,context:s}),Hs)):s.canonizeResults&&(za=n.canon.pass(za)),za!==void 0&&me.push((zs={},zs[Hs]=za,zs))}else{var lc=getFragmentFromSelection(sr,s.fragmentMap);lc&&l.fragmentMatches(lc,m)&&lc.selectionSet.selections.forEach(Ye.add,Ye)}});var Je=mergeDeepArray(me),vn={result:Je,missing:xe},La=s.canonizeResults?this.canon.admit(vn):maybeDeepFreeze(vn);return La.result&&this.knownResults.set(La.result,r),La},e.prototype.execSubSelectedArrayImpl=function(t){var n=this,r=t.field,o=t.array,a=t.enclosingRef,s=t.context,u,l=new DeepMerger;function c(m,me){var xe;return m.missing&&(u=l.merge(u,(xe={},xe[me]=m.missing,xe))),m.result}return r.selectionSet&&(o=o.filter(s.store.canRead)),o=o.map(function(m,me){return m===null?null:isArray(m)?c(n.executeSubSelectedArray({field:r,array:m,enclosingRef:a,context:s}),me):r.selectionSet?c(n.executeSelectionSet({selectionSet:r.selectionSet,objectOrReference:m,enclosingRef:isReference(m)?m:a,context:s}),me):(__DEV__&&assertSelectionSetForIdValue(s.store,r,m),m)}),{result:s.canonizeResults?this.canon.admit(o):o,missing:u}},e}();function firstMissing(e){try{JSON.stringify(e,function(t,n){if(typeof n=="string")throw n;return n})}catch(t){return t}}function assertSelectionSetForIdValue(e,t,n){if(!t.selectionSet){var r=new Set([n]);r.forEach(function(o){isNonNullObject(o)&&(__DEV__?invariant$1(!isReference(o),"Missing selection set for object of type ".concat(getTypenameFromStoreObject(e,o)," returned for query field ").concat(t.name.value)):invariant$1(!isReference(o),5),Object.values(o).forEach(r.add,r))})}}var cacheSlot=new Slot,cacheInfoMap=new WeakMap;function getCacheInfo(e){var t=cacheInfoMap.get(e);return t||cacheInfoMap.set(e,t={vars:new Set,dep:dep()}),t}function forgetCache(e){getCacheInfo(e).vars.forEach(function(t){return t.forgetCache(e)})}function recallCache(e){getCacheInfo(e).vars.forEach(function(t){return t.attachCache(e)})}function makeVar(e){var t=new Set,n=new Set,r=function(a){if(arguments.length>0){if(e!==a){e=a,t.forEach(function(l){getCacheInfo(l).dep.dirty(r),broadcast(l)});var s=Array.from(n);n.clear(),s.forEach(function(l){return l(e)})}}else{var u=cacheSlot.getValue();u&&(o(u),getCacheInfo(u).dep(r))}return e};r.onNextChange=function(a){return n.add(a),function(){n.delete(a)}};var o=r.attachCache=function(a){return t.add(a),getCacheInfo(a).vars.add(r),r};return r.forgetCache=function(a){return t.delete(a)},r}function broadcast(e){e.broadcastWatches&&e.broadcastWatches()}var specifierInfoCache=Object.create(null);function lookupSpecifierInfo(e){var t=JSON.stringify(e);return specifierInfoCache[t]||(specifierInfoCache[t]=Object.create(null))}function keyFieldsFnFromSpecifier(e){var t=lookupSpecifierInfo(e);return t.keyFieldsFn||(t.keyFieldsFn=function(n,r){var o=function(s,u){return r.readField(u,s)},a=r.keyObject=collectSpecifierPaths(e,function(s){var u=extractKeyPath(r.storeObject,s,o);return u===void 0&&n!==r.storeObject&&hasOwn.call(n,s[0])&&(u=extractKeyPath(n,s,extractKey)),__DEV__?invariant$1(u!==void 0,"Missing field '".concat(s.join("."),"' while extracting keyFields from ").concat(JSON.stringify(n))):invariant$1(u!==void 0,2),u});return"".concat(r.typename,":").concat(JSON.stringify(a))})}function keyArgsFnFromSpecifier(e){var t=lookupSpecifierInfo(e);return t.keyArgsFn||(t.keyArgsFn=function(n,r){var o=r.field,a=r.variables,s=r.fieldName,u=collectSpecifierPaths(e,function(c){var m=c[0],me=m.charAt(0);if(me==="@"){if(o&&isNonEmptyArray(o.directives)){var xe=m.slice(1),Ne=o.directives.find(function(vn){return vn.name.value===xe}),He=Ne&&argumentsObjectFromField(Ne,a);return He&&extractKeyPath(He,c.slice(1))}return}if(me==="$"){var Ye=m.slice(1);if(a&&hasOwn.call(a,Ye)){var Je=c.slice(0);return Je[0]=Ye,extractKeyPath(a,Je)}return}if(n)return extractKeyPath(n,c)}),l=JSON.stringify(u);return(n||l!=="{}")&&(s+=":"+l),s})}function collectSpecifierPaths(e,t){var n=new DeepMerger;return getSpecifierPaths(e).reduce(function(r,o){var a,s=t(o);if(s!==void 0){for(var u=o.length-1;u>=0;--u)s=(a={},a[o[u]]=s,a);r=n.merge(r,s)}return r},Object.create(null))}function getSpecifierPaths(e){var t=lookupSpecifierInfo(e);if(!t.paths){var n=t.paths=[],r=[];e.forEach(function(o,a){isArray(o)?(getSpecifierPaths(o).forEach(function(s){return n.push(r.concat(s))}),r.length=0):(r.push(o),isArray(e[a+1])||(n.push(r.slice(0)),r.length=0))})}return t.paths}function extractKey(e,t){return e[t]}function extractKeyPath(e,t,n){return n=n||extractKey,normalize$1(t.reduce(function r(o,a){return isArray(o)?o.map(function(s){return r(s,a)}):o&&n(o,a)},e))}function normalize$1(e){return isNonNullObject(e)?isArray(e)?e.map(normalize$1):collectSpecifierPaths(Object.keys(e).sort(),function(t){return extractKeyPath(e,t)}):e}getStoreKeyName.setStringify(canonicalStringify);function argsFromFieldSpecifier(e){return e.args!==void 0?e.args:e.field?argumentsObjectFromField(e.field,e.variables):null}var nullKeyFieldsFn=function(){},simpleKeyArgsFn=function(e,t){return t.fieldName},mergeTrueFn=function(e,t,n){var r=n.mergeObjects;return r(e,t)},mergeFalseFn=function(e,t){return t},Policies=function(){function e(t){this.config=t,this.typePolicies=Object.create(null),this.toBeAdded=Object.create(null),this.supertypeMap=new Map,this.fuzzySubtypes=new Map,this.rootIdsByTypename=Object.create(null),this.rootTypenamesById=Object.create(null),this.usingPossibleTypes=!1,this.config=__assign$1({dataIdFromObject:defaultDataIdFromObject},t),this.cache=this.config.cache,this.setRootTypename("Query"),this.setRootTypename("Mutation"),this.setRootTypename("Subscription"),t.possibleTypes&&this.addPossibleTypes(t.possibleTypes),t.typePolicies&&this.addTypePolicies(t.typePolicies)}return e.prototype.identify=function(t,n){var r,o=this,a=n&&(n.typename||((r=n.storeObject)===null||r===void 0?void 0:r.__typename))||t.__typename;if(a===this.rootTypenamesById.ROOT_QUERY)return["ROOT_QUERY"];for(var s=n&&n.storeObject||t,u=__assign$1(__assign$1({},n),{typename:a,storeObject:s,readField:n&&n.readField||function(){var xe=normalizeReadFieldOptions(arguments,s);return o.readField(xe,{store:o.cache.data,variables:xe.variables})}}),l,c=a&&this.getTypePolicy(a),m=c&&c.keyFn||this.config.dataIdFromObject;m;){var me=m(t,u);if(isArray(me))m=keyFieldsFnFromSpecifier(me);else{l=me;break}}return l=l?String(l):void 0,u.keyObject?[l,u.keyObject]:[l]},e.prototype.addTypePolicies=function(t){var n=this;Object.keys(t).forEach(function(r){var o=t[r],a=o.queryType,s=o.mutationType,u=o.subscriptionType,l=__rest(o,["queryType","mutationType","subscriptionType"]);a&&n.setRootTypename("Query",r),s&&n.setRootTypename("Mutation",r),u&&n.setRootTypename("Subscription",r),hasOwn.call(n.toBeAdded,r)?n.toBeAdded[r].push(l):n.toBeAdded[r]=[l]})},e.prototype.updateTypePolicy=function(t,n){var r=this,o=this.getTypePolicy(t),a=n.keyFields,s=n.fields;function u(l,c){l.merge=typeof c=="function"?c:c===!0?mergeTrueFn:c===!1?mergeFalseFn:l.merge}u(o,n.merge),o.keyFn=a===!1?nullKeyFieldsFn:isArray(a)?keyFieldsFnFromSpecifier(a):typeof a=="function"?a:o.keyFn,s&&Object.keys(s).forEach(function(l){var c=r.getFieldPolicy(t,l,!0),m=s[l];if(typeof m=="function")c.read=m;else{var me=m.keyArgs,xe=m.read,Ne=m.merge;c.keyFn=me===!1?simpleKeyArgsFn:isArray(me)?keyArgsFnFromSpecifier(me):typeof me=="function"?me:c.keyFn,typeof xe=="function"&&(c.read=xe),u(c,Ne)}c.read&&c.merge&&(c.keyFn=c.keyFn||simpleKeyArgsFn)})},e.prototype.setRootTypename=function(t,n){n===void 0&&(n=t);var r="ROOT_"+t.toUpperCase(),o=this.rootTypenamesById[r];n!==o&&(__DEV__?invariant$1(!o||o===t,"Cannot change root ".concat(t," __typename more than once")):invariant$1(!o||o===t,3),o&&delete this.rootIdsByTypename[o],this.rootIdsByTypename[n]=r,this.rootTypenamesById[r]=n)},e.prototype.addPossibleTypes=function(t){var n=this;this.usingPossibleTypes=!0,Object.keys(t).forEach(function(r){n.getSupertypeSet(r,!0),t[r].forEach(function(o){n.getSupertypeSet(o,!0).add(r);var a=o.match(TypeOrFieldNameRegExp);(!a||a[0]!==o)&&n.fuzzySubtypes.set(o,new RegExp(o))})})},e.prototype.getTypePolicy=function(t){var n=this;if(!hasOwn.call(this.typePolicies,t)){var r=this.typePolicies[t]=Object.create(null);r.fields=Object.create(null);var o=this.supertypeMap.get(t);o&&o.size&&o.forEach(function(s){var u=n.getTypePolicy(s),l=u.fields,c=__rest(u,["fields"]);Object.assign(r,c),Object.assign(r.fields,l)})}var a=this.toBeAdded[t];return a&&a.length&&a.splice(0).forEach(function(s){n.updateTypePolicy(t,s)}),this.typePolicies[t]},e.prototype.getFieldPolicy=function(t,n,r){if(t){var o=this.getTypePolicy(t).fields;return o[n]||r&&(o[n]=Object.create(null))}},e.prototype.getSupertypeSet=function(t,n){var r=this.supertypeMap.get(t);return!r&&n&&this.supertypeMap.set(t,r=new Set),r},e.prototype.fragmentMatches=function(t,n,r,o){var a=this;if(!t.typeCondition)return!0;if(!n)return!1;var s=t.typeCondition.name.value;if(n===s)return!0;if(this.usingPossibleTypes&&this.supertypeMap.has(s))for(var u=this.getSupertypeSet(n,!0),l=[u],c=function(He){var Ye=a.getSupertypeSet(He,!1);Ye&&Ye.size&&l.indexOf(Ye)<0&&l.push(Ye)},m=!!(r&&this.fuzzySubtypes.size),me=!1,xe=0;xe<l.length;++xe){var Ne=l[xe];if(Ne.has(s))return u.has(s)||(me&&__DEV__&&invariant$1.warn("Inferring subtype ".concat(n," of supertype ").concat(s)),u.add(s)),!0;Ne.forEach(c),m&&xe===l.length-1&&selectionSetMatchesResult(t.selectionSet,r,o)&&(m=!1,me=!0,this.fuzzySubtypes.forEach(function(He,Ye){var Je=n.match(He);Je&&Je[0]===n&&c(Ye)}))}return!1},e.prototype.hasKeyArgs=function(t,n){var r=this.getFieldPolicy(t,n,!1);return!!(r&&r.keyFn)},e.prototype.getStoreFieldName=function(t){var n=t.typename,r=t.fieldName,o=this.getFieldPolicy(n,r,!1),a,s=o&&o.keyFn;if(s&&n)for(var u={typename:n,fieldName:r,field:t.field||null,variables:t.variables},l=argsFromFieldSpecifier(t);s;){var c=s(l,u);if(isArray(c))s=keyArgsFnFromSpecifier(c);else{a=c||r;break}}return a===void 0&&(a=t.field?storeKeyNameFromField(t.field,t.variables):getStoreKeyName(r,argsFromFieldSpecifier(t))),a===!1?r:r===fieldNameFromStoreName(a)?a:r+":"+a},e.prototype.readField=function(t,n){var r=t.from;if(r){var o=t.field||t.fieldName;if(o){if(t.typename===void 0){var a=n.store.getFieldValue(r,"__typename");a&&(t.typename=a)}var s=this.getStoreFieldName(t),u=fieldNameFromStoreName(s),l=n.store.getFieldValue(r,s),c=this.getFieldPolicy(t.typename,u,!1),m=c&&c.read;if(m){var me=makeFieldFunctionOptions(this,r,t,n,n.store.getStorage(isReference(r)?r.__ref:r,s));return cacheSlot.withValue(this.cache,m,[l,me])}return l}}},e.prototype.getReadFunction=function(t,n){var r=this.getFieldPolicy(t,n,!1);return r&&r.read},e.prototype.getMergeFunction=function(t,n,r){var o=this.getFieldPolicy(t,n,!1),a=o&&o.merge;return!a&&r&&(o=this.getTypePolicy(r),a=o&&o.merge),a},e.prototype.runMergeFunction=function(t,n,r,o,a){var s=r.field,u=r.typename,l=r.merge;return l===mergeTrueFn?makeMergeObjectsFunction(o.store)(t,n):l===mergeFalseFn?n:(o.overwrite&&(t=void 0),l(t,n,makeFieldFunctionOptions(this,void 0,{typename:u,fieldName:s.name.value,field:s,variables:o.variables},o,a||Object.create(null))))},e}();function makeFieldFunctionOptions(e,t,n,r,o){var a=e.getStoreFieldName(n),s=fieldNameFromStoreName(a),u=n.variables||r.variables,l=r.store,c=l.toReference,m=l.canRead;return{args:argsFromFieldSpecifier(n),field:n.field||null,fieldName:s,storeFieldName:a,variables:u,isReference,toReference:c,storage:o,cache:e.cache,canRead:m,readField:function(){return e.readField(normalizeReadFieldOptions(arguments,t,u),r)},mergeObjects:makeMergeObjectsFunction(r.store)}}function normalizeReadFieldOptions(e,t,n){var r=e[0],o=e[1],a=e.length,s;return typeof r=="string"?s={fieldName:r,from:a>1?o:t}:(s=__assign$1({},r),hasOwn.call(s,"from")||(s.from=t)),__DEV__&&s.from===void 0&&__DEV__&&invariant$1.warn("Undefined 'from' passed to readField with arguments ".concat(stringifyForDisplay(Array.from(e)))),s.variables===void 0&&(s.variables=n),s}function makeMergeObjectsFunction(e){return function(t,n){if(isArray(t)||isArray(n))throw __DEV__?new InvariantError("Cannot automatically merge arrays"):new InvariantError(4);if(isNonNullObject(t)&&isNonNullObject(n)){var r=e.getFieldValue(t,"__typename"),o=e.getFieldValue(n,"__typename"),a=r&&o&&r!==o;if(a)return n;if(isReference(t)&&storeValueIsStoreObject(n))return e.merge(t.__ref,n),t;if(storeValueIsStoreObject(t)&&isReference(n))return e.merge(t,n.__ref),n;if(storeValueIsStoreObject(t)&&storeValueIsStoreObject(n))return __assign$1(__assign$1({},t),n)}return n}}function getContextFlavor(e,t,n){var r="".concat(t).concat(n),o=e.flavors.get(r);return o||e.flavors.set(r,o=e.clientOnly===t&&e.deferred===n?e:__assign$1(__assign$1({},e),{clientOnly:t,deferred:n})),o}var StoreWriter=function(){function e(t,n){this.cache=t,this.reader=n}return e.prototype.writeToStore=function(t,n){var r=this,o=n.query,a=n.result,s=n.dataId,u=n.variables,l=n.overwrite,c=getOperationDefinition(o),m=makeProcessedFieldsMerger();u=__assign$1(__assign$1({},getDefaultValues(c)),u);var me={store:t,written:Object.create(null),merge:function(Ne,He){return m.merge(Ne,He)},variables:u,varString:canonicalStringify(u),fragmentMap:createFragmentMap(getFragmentDefinitions(o)),overwrite:!!l,incomingById:new Map,clientOnly:!1,deferred:!1,flavors:new Map},xe=this.processSelectionSet({result:a||Object.create(null),dataId:s,selectionSet:c.selectionSet,mergeTree:{map:new Map},context:me});if(!isReference(xe))throw __DEV__?new InvariantError("Could not identify object ".concat(JSON.stringify(a))):new InvariantError(6);return me.incomingById.forEach(function(Ne,He){var Ye=Ne.storeObject,Je=Ne.mergeTree,vn=Ne.fieldNodeSet,La=makeReference(He);if(Je&&Je.map.size){var sr=r.applyMerges(Je,La,Ye,me);if(isReference(sr))return;Ye=sr}if(__DEV__&&!me.overwrite){var Zr=Object.create(null);vn.forEach(function(Hs){Hs.selectionSet&&(Zr[Hs.name.value]=!0)});var zs=function(Hs){return Zr[fieldNameFromStoreName(Hs)]===!0},za=function(Hs){var lc=Je&&Je.map.get(Hs);return Boolean(lc&&lc.info&&lc.info.merge)};Object.keys(Ye).forEach(function(Hs){zs(Hs)&&!za(Hs)&&warnAboutDataLoss(La,Ye,Hs,me.store)})}t.merge(He,Ye)}),t.retain(xe.__ref),xe},e.prototype.processSelectionSet=function(t){var n=this,r=t.dataId,o=t.result,a=t.selectionSet,s=t.context,u=t.mergeTree,l=this.cache.policies,c=Object.create(null),m=r&&l.rootTypenamesById[r]||getTypenameFromResult(o,a,s.fragmentMap)||r&&s.store.get(r,"__typename");typeof m=="string"&&(c.__typename=m);var me=function(){var sr=normalizeReadFieldOptions(arguments,c,s.variables);if(isReference(sr.from)){var Zr=s.incomingById.get(sr.from.__ref);if(Zr){var zs=l.readField(__assign$1(__assign$1({},sr),{from:Zr.storeObject}),s);if(zs!==void 0)return zs}}return l.readField(sr,s)},xe=new Set;this.flattenFields(a,o,s,m).forEach(function(sr,Zr){var zs,za=resultKeyNameFromField(Zr),Hs=o[za];if(xe.add(Zr),Hs!==void 0){var lc=l.getStoreFieldName({typename:m,fieldName:Zr.name.value,field:Zr,variables:sr.variables}),Ty=getChildMergeTree(u,lc),_y=n.processFieldValue(Hs,Zr,Zr.selectionSet?getContextFlavor(sr,!1,!1):sr,Ty),xy=void 0;Zr.selectionSet&&(isReference(_y)||storeValueIsStoreObject(_y))&&(xy=me("__typename",_y));var Bb=l.getMergeFunction(m,Zr.name.value,xy);Bb?Ty.info={field:Zr,typename:m,merge:Bb}:maybeRecycleChildMergeTree(u,lc),c=sr.merge(c,(zs={},zs[lc]=_y,zs))}else __DEV__&&!sr.clientOnly&&!sr.deferred&&!addTypenameToDocument.added(Zr)&&!l.getReadFunction(m,Zr.name.value)&&__DEV__&&invariant$1.error("Missing field '".concat(resultKeyNameFromField(Zr),"' while writing result ").concat(JSON.stringify(o,null,2)).substring(0,1e3))});try{var Ne=l.identify(o,{typename:m,selectionSet:a,fragmentMap:s.fragmentMap,storeObject:c,readField:me}),He=Ne[0],Ye=Ne[1];r=r||He,Ye&&(c=s.merge(c,Ye))}catch(sr){if(!r)throw sr}if(typeof r=="string"){var Je=makeReference(r),vn=s.written[r]||(s.written[r]=[]);if(vn.indexOf(a)>=0||(vn.push(a),this.reader&&this.reader.isFresh(o,Je,a,s)))return Je;var La=s.incomingById.get(r);return La?(La.storeObject=s.merge(La.storeObject,c),La.mergeTree=mergeMergeTrees(La.mergeTree,u),xe.forEach(function(sr){return La.fieldNodeSet.add(sr)})):s.incomingById.set(r,{storeObject:c,mergeTree:mergeTreeIsEmpty(u)?void 0:u,fieldNodeSet:xe}),Je}return c},e.prototype.processFieldValue=function(t,n,r,o){var a=this;return!n.selectionSet||t===null?__DEV__?cloneDeep(t):t:isArray(t)?t.map(function(s,u){var l=a.processFieldValue(s,n,r,getChildMergeTree(o,u));return maybeRecycleChildMergeTree(o,u),l}):this.processSelectionSet({result:t,selectionSet:n.selectionSet,context:r,mergeTree:o})},e.prototype.flattenFields=function(t,n,r,o){o===void 0&&(o=getTypenameFromResult(n,t,r.fragmentMap));var a=new Map,s=this.cache.policies,u=new Trie(!1);return function l(c,m){var me=u.lookup(c,m.clientOnly,m.deferred);me.visited||(me.visited=!0,c.selections.forEach(function(xe){if(shouldInclude(xe,r.variables)){var Ne=m.clientOnly,He=m.deferred;if(!(Ne&&He)&&isNonEmptyArray(xe.directives)&&xe.directives.forEach(function(vn){var La=vn.name.value;if(La==="client"&&(Ne=!0),La==="defer"){var sr=argumentsObjectFromField(vn,r.variables);(!sr||sr.if!==!1)&&(He=!0)}}),isField(xe)){var Ye=a.get(xe);Ye&&(Ne=Ne&&Ye.clientOnly,He=He&&Ye.deferred),a.set(xe,getContextFlavor(r,Ne,He))}else{var Je=getFragmentFromSelection(xe,r.fragmentMap);Je&&s.fragmentMatches(Je,o,n,r.variables)&&l(Je.selectionSet,getContextFlavor(r,Ne,He))}}}))}(t,r),a},e.prototype.applyMerges=function(t,n,r,o,a){var s,u=this;if(t.map.size&&!isReference(r)){var l=!isArray(r)&&(isReference(n)||storeValueIsStoreObject(n))?n:void 0,c=r;l&&!a&&(a=[isReference(l)?l.__ref:l]);var m,me=function(xe,Ne){return isArray(xe)?typeof Ne=="number"?xe[Ne]:void 0:o.store.getFieldValue(xe,String(Ne))};t.map.forEach(function(xe,Ne){var He=me(l,Ne),Ye=me(c,Ne);if(Ye!==void 0){a&&a.push(Ne);var Je=u.applyMerges(xe,He,Ye,o,a);Je!==Ye&&(m=m||new Map,m.set(Ne,Je)),a&&invariant$1(a.pop()===Ne)}}),m&&(r=isArray(c)?c.slice(0):__assign$1({},c),m.forEach(function(xe,Ne){r[Ne]=xe}))}return t.info?this.cache.policies.runMergeFunction(n,r,t.info,o,a&&(s=o.store).getStorage.apply(s,a)):r},e}(),emptyMergeTreePool=[];function getChildMergeTree(e,t){var n=e.map;return n.has(t)||n.set(t,emptyMergeTreePool.pop()||{map:new Map}),n.get(t)}function mergeMergeTrees(e,t){if(e===t||!t||mergeTreeIsEmpty(t))return e;if(!e||mergeTreeIsEmpty(e))return t;var n=e.info&&t.info?__assign$1(__assign$1({},e.info),t.info):e.info||t.info,r=e.map.size&&t.map.size,o=r?new Map:e.map.size?e.map:t.map,a={info:n,map:o};if(r){var s=new Set(t.map.keys());e.map.forEach(function(u,l){a.map.set(l,mergeMergeTrees(u,t.map.get(l))),s.delete(l)}),s.forEach(function(u){a.map.set(u,mergeMergeTrees(t.map.get(u),e.map.get(u)))})}return a}function mergeTreeIsEmpty(e){return!e||!(e.info||e.map.size)}function maybeRecycleChildMergeTree(e,t){var n=e.map,r=n.get(t);r&&mergeTreeIsEmpty(r)&&(emptyMergeTreePool.push(r),n.delete(t))}var warnings=new Set;function warnAboutDataLoss(e,t,n,r){var o=function(me){var xe=r.getFieldValue(me,n);return typeof xe=="object"&&xe},a=o(e);if(a){var s=o(t);if(!!s&&!isReference(a)&&!equal(a,s)&&!Object.keys(a).every(function(me){return r.getFieldValue(s,me)!==void 0})){var u=r.getFieldValue(e,"__typename")||r.getFieldValue(t,"__typename"),l=fieldNameFromStoreName(n),c="".concat(u,".").concat(l);if(!warnings.has(c)){warnings.add(c);var m=[];!isArray(a)&&!isArray(s)&&[a,s].forEach(function(me){var xe=r.getFieldValue(me,"__typename");typeof xe=="string"&&!m.includes(xe)&&m.push(xe)}),__DEV__&&invariant$1.warn("Cache data may be lost when replacing the ".concat(l," field of a ").concat(u,` object.

To address this problem (which is not a bug in Apollo Client), `).concat(m.length?"either ensure all objects of type "+m.join(" and ")+" have an ID or a custom merge function, or ":"","define a custom merge function for the ").concat(c,` field, so InMemoryCache can safely merge these objects:

  existing: `).concat(JSON.stringify(a).slice(0,1e3),`
  incoming: `).concat(JSON.stringify(s).slice(0,1e3),`

For more information about these options, please refer to the documentation:

  * Ensuring entity objects have IDs: https://go.apollo.dev/c/generating-unique-identifiers
  * Defining custom merge functions: https://go.apollo.dev/c/merging-non-normalized-objects
`))}}}}var InMemoryCache=function(e){__extends(t,e);function t(n){n===void 0&&(n={});var r=e.call(this)||this;return r.watches=new Set,r.typenameDocumentCache=new Map,r.makeVar=makeVar,r.txCount=0,r.config=normalizeConfig(n),r.addTypename=!!r.config.addTypename,r.policies=new Policies({cache:r,dataIdFromObject:r.config.dataIdFromObject,possibleTypes:r.config.possibleTypes,typePolicies:r.config.typePolicies}),r.init(),r}return t.prototype.init=function(){var n=this.data=new EntityStore.Root({policies:this.policies,resultCaching:this.config.resultCaching});this.optimisticData=n.stump,this.resetResultCache()},t.prototype.resetResultCache=function(n){var r=this,o=this.storeReader;this.storeWriter=new StoreWriter(this,this.storeReader=new StoreReader({cache:this,addTypename:this.addTypename,resultCacheMaxSize:this.config.resultCacheMaxSize,canonizeResults:shouldCanonizeResults(this.config),canon:n?void 0:o&&o.canon})),this.maybeBroadcastWatch=wrap(function(a,s){return r.broadcastWatch(a,s)},{max:this.config.resultCacheMaxSize,makeCacheKey:function(a){var s=a.optimistic?r.optimisticData:r.data;if(supportsResultCaching(s)){var u=a.optimistic,l=a.rootId,c=a.variables;return s.makeCacheKey(a.query,a.callback,canonicalStringify({optimistic:u,rootId:l,variables:c}))}}}),new Set([this.data.group,this.optimisticData.group]).forEach(function(a){return a.resetCaching()})},t.prototype.restore=function(n){return this.init(),n&&this.data.replace(n),this},t.prototype.extract=function(n){return n===void 0&&(n=!1),(n?this.optimisticData:this.data).extract()},t.prototype.read=function(n){var r=n.returnPartialData,o=r===void 0?!1:r;try{return this.storeReader.diffQueryAgainstStore(__assign$1(__assign$1({},n),{store:n.optimistic?this.optimisticData:this.data,config:this.config,returnPartialData:o})).result||null}catch(a){if(a instanceof MissingFieldError)return null;throw a}},t.prototype.write=function(n){try{return++this.txCount,this.storeWriter.writeToStore(this.data,n)}finally{!--this.txCount&&n.broadcast!==!1&&this.broadcastWatches()}},t.prototype.modify=function(n){if(hasOwn.call(n,"id")&&!n.id)return!1;var r=n.optimistic?this.optimisticData:this.data;try{return++this.txCount,r.modify(n.id||"ROOT_QUERY",n.fields)}finally{!--this.txCount&&n.broadcast!==!1&&this.broadcastWatches()}},t.prototype.diff=function(n){return this.storeReader.diffQueryAgainstStore(__assign$1(__assign$1({},n),{store:n.optimistic?this.optimisticData:this.data,rootId:n.id||"ROOT_QUERY",config:this.config}))},t.prototype.watch=function(n){var r=this;return this.watches.size||recallCache(this),this.watches.add(n),n.immediate&&this.maybeBroadcastWatch(n),function(){r.watches.delete(n)&&!r.watches.size&&forgetCache(r),r.maybeBroadcastWatch.forget(n)}},t.prototype.gc=function(n){canonicalStringify.reset();var r=this.optimisticData.gc();return n&&!this.txCount&&(n.resetResultCache?this.resetResultCache(n.resetResultIdentities):n.resetResultIdentities&&this.storeReader.resetCanon()),r},t.prototype.retain=function(n,r){return(r?this.optimisticData:this.data).retain(n)},t.prototype.release=function(n,r){return(r?this.optimisticData:this.data).release(n)},t.prototype.identify=function(n){if(isReference(n))return n.__ref;try{return this.policies.identify(n)[0]}catch(r){__DEV__&&invariant$1.warn(r)}},t.prototype.evict=function(n){if(!n.id){if(hasOwn.call(n,"id"))return!1;n=__assign$1(__assign$1({},n),{id:"ROOT_QUERY"})}try{return++this.txCount,this.optimisticData.evict(n,this.data)}finally{!--this.txCount&&n.broadcast!==!1&&this.broadcastWatches()}},t.prototype.reset=function(n){var r=this;return this.init(),canonicalStringify.reset(),n&&n.discardWatches?(this.watches.forEach(function(o){return r.maybeBroadcastWatch.forget(o)}),this.watches.clear(),forgetCache(this)):this.broadcastWatches(),Promise.resolve()},t.prototype.removeOptimistic=function(n){var r=this.optimisticData.removeLayer(n);r!==this.optimisticData&&(this.optimisticData=r,this.broadcastWatches())},t.prototype.batch=function(n){var r=this,o=n.update,a=n.optimistic,s=a===void 0?!0:a,u=n.removeOptimistic,l=n.onWatchUpdated,c,m=function(xe){var Ne=r,He=Ne.data,Ye=Ne.optimisticData;++r.txCount,xe&&(r.data=r.optimisticData=xe);try{return c=o(r)}finally{--r.txCount,r.data=He,r.optimisticData=Ye}},me=new Set;return l&&!this.txCount&&this.broadcastWatches(__assign$1(__assign$1({},n),{onWatchUpdated:function(xe){return me.add(xe),!1}})),typeof s=="string"?this.optimisticData=this.optimisticData.addLayer(s,m):s===!1?m(this.data):m(),typeof u=="string"&&(this.optimisticData=this.optimisticData.removeLayer(u)),l&&me.size?(this.broadcastWatches(__assign$1(__assign$1({},n),{onWatchUpdated:function(xe,Ne){var He=l.call(this,xe,Ne);return He!==!1&&me.delete(xe),He}})),me.size&&me.forEach(function(xe){return r.maybeBroadcastWatch.dirty(xe)})):this.broadcastWatches(n),c},t.prototype.performTransaction=function(n,r){return this.batch({update:n,optimistic:r||r!==null})},t.prototype.transformDocument=function(n){if(this.addTypename){var r=this.typenameDocumentCache.get(n);return r||(r=addTypenameToDocument(n),this.typenameDocumentCache.set(n,r),this.typenameDocumentCache.set(r,r)),r}return n},t.prototype.broadcastWatches=function(n){var r=this;this.txCount||this.watches.forEach(function(o){return r.maybeBroadcastWatch(o,n)})},t.prototype.broadcastWatch=function(n,r){var o=n.lastDiff,a=this.diff(n);r&&(n.optimistic&&typeof r.optimistic=="string"&&(a.fromOptimisticTransaction=!0),r.onWatchUpdated&&r.onWatchUpdated.call(this,n,a,o)===!1)||(!o||!equal(o.result,a.result))&&n.callback(n.lastDiff=a,o)},t}(ApolloCache);function isApolloError(e){return e.hasOwnProperty("graphQLErrors")}var generateErrorMessage=function(e){var t="";if(isNonEmptyArray(e.graphQLErrors)||isNonEmptyArray(e.clientErrors)){var n=(e.graphQLErrors||[]).concat(e.clientErrors||[]);n.forEach(function(r){var o=r?r.message:"Error message not found.";t+="".concat(o,`
`)})}return e.networkError&&(t+="".concat(e.networkError.message,`
`)),t=t.replace(/\n$/,""),t},ApolloError=function(e){__extends(t,e);function t(n){var r=n.graphQLErrors,o=n.clientErrors,a=n.networkError,s=n.errorMessage,u=n.extraInfo,l=e.call(this,s)||this;return l.graphQLErrors=r||[],l.clientErrors=o||[],l.networkError=a||null,l.message=s||generateErrorMessage(l),l.extraInfo=u,l.__proto__=t.prototype,l}return t}(Error),NetworkStatus;(function(e){e[e.loading=1]="loading",e[e.setVariables=2]="setVariables",e[e.fetchMore=3]="fetchMore",e[e.refetch=4]="refetch",e[e.poll=6]="poll",e[e.ready=7]="ready",e[e.error=8]="error"})(NetworkStatus||(NetworkStatus={}));function isNetworkRequestInFlight(e){return e?e<7:!1}var assign=Object.assign,hasOwnProperty$1=Object.hasOwnProperty,ObservableQuery=function(e){__extends(t,e);function t(n){var r=n.queryManager,o=n.queryInfo,a=n.options,s=e.call(this,function(Je){try{var vn=Je._subscription._observer;vn&&!vn.error&&(vn.error=defaultSubscriptionObserverErrorCallback)}catch{}var La=!s.observers.size;s.observers.add(Je);var sr=s.last;return sr&&sr.error?Je.error&&Je.error(sr.error):sr&&sr.result&&Je.next&&Je.next(sr.result),La&&s.reobserve().catch(function(){}),function(){s.observers.delete(Je)&&!s.observers.size&&s.tearDownQuery()}})||this;s.observers=new Set,s.subscriptions=new Set,s.queryInfo=o,s.queryManager=r,s.isTornDown=!1;var u=r.defaultOptions.watchQuery,l=u===void 0?{}:u,c=l.fetchPolicy,m=c===void 0?"cache-first":c,me=a.fetchPolicy,xe=me===void 0?m:me,Ne=a.initialFetchPolicy,He=Ne===void 0?xe==="standby"?m:xe:Ne;s.options=__assign$1(__assign$1({},a),{initialFetchPolicy:He,fetchPolicy:xe}),s.queryId=o.queryId||r.generateQueryId();var Ye=getOperationDefinition(s.query);return s.queryName=Ye&&Ye.name&&Ye.name.value,s}return Object.defineProperty(t.prototype,"query",{get:function(){return this.queryManager.transform(this.options.query).document},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"variables",{get:function(){return this.options.variables},enumerable:!1,configurable:!0}),t.prototype.result=function(){var n=this;return new Promise(function(r,o){var a={next:function(u){r(u),n.observers.delete(a),n.observers.size||n.queryManager.removeQuery(n.queryId),setTimeout(function(){s.unsubscribe()},0)},error:o},s=n.subscribe(a)})},t.prototype.getCurrentResult=function(n){n===void 0&&(n=!0);var r=this.getLastResult(!0),o=this.queryInfo.networkStatus||r&&r.networkStatus||NetworkStatus.ready,a=__assign$1(__assign$1({},r),{loading:isNetworkRequestInFlight(o),networkStatus:o}),s=this.options.fetchPolicy,u=s===void 0?"cache-first":s;if(!(u==="network-only"||u==="no-cache"||u==="standby"||this.queryManager.transform(this.options.query).hasForcedResolvers)){var l=this.queryInfo.getDiff();(l.complete||this.options.returnPartialData)&&(a.data=l.result),equal(a.data,{})&&(a.data=void 0),l.complete?(delete a.partial,l.complete&&a.networkStatus===NetworkStatus.loading&&(u==="cache-first"||u==="cache-only")&&(a.networkStatus=NetworkStatus.ready,a.loading=!1)):a.partial=!0,__DEV__&&!l.complete&&!this.options.partialRefetch&&!a.loading&&!a.data&&!a.error&&logMissingFieldErrors(l.missing)}return n&&this.updateLastResult(a),a},t.prototype.isDifferentFromLastResult=function(n){return!this.last||!equal(this.last.result,n)},t.prototype.getLast=function(n,r){var o=this.last;if(o&&o[n]&&(!r||equal(o.variables,this.variables)))return o[n]},t.prototype.getLastResult=function(n){return this.getLast("result",n)},t.prototype.getLastError=function(n){return this.getLast("error",n)},t.prototype.resetLastResults=function(){delete this.last,this.isTornDown=!1},t.prototype.resetQueryStoreErrors=function(){this.queryManager.resetErrors(this.queryId)},t.prototype.refetch=function(n){var r,o={pollInterval:0},a=this.options.fetchPolicy;if(a==="cache-and-network"?o.fetchPolicy=a:a==="no-cache"?o.fetchPolicy="no-cache":o.fetchPolicy="network-only",__DEV__&&n&&hasOwnProperty$1.call(n,"variables")){var s=getQueryDefinition(this.query),u=s.variableDefinitions;(!u||!u.some(function(l){return l.variable.name.value==="variables"}))&&__DEV__&&invariant$1.warn("Called refetch(".concat(JSON.stringify(n),") for query ").concat(((r=s.name)===null||r===void 0?void 0:r.value)||JSON.stringify(s),`, which does not declare a $variables variable.
Did you mean to call refetch(variables) instead of refetch({ variables })?`))}return n&&!equal(this.options.variables,n)&&(o.variables=this.options.variables=__assign$1(__assign$1({},this.options.variables),n)),this.queryInfo.resetLastWrite(),this.reobserve(o,NetworkStatus.refetch)},t.prototype.fetchMore=function(n){var r=this,o=__assign$1(__assign$1({},n.query?n:__assign$1(__assign$1(__assign$1(__assign$1({},this.options),{query:this.query}),n),{variables:__assign$1(__assign$1({},this.options.variables),n.variables)})),{fetchPolicy:"no-cache"}),a=this.queryManager.generateQueryId(),s=this.queryInfo,u=s.networkStatus;s.networkStatus=NetworkStatus.fetchMore,o.notifyOnNetworkStatusChange&&this.observe();var l=new Set;return this.queryManager.fetchQuery(a,o,NetworkStatus.fetchMore).then(function(c){return r.queryManager.removeQuery(a),s.networkStatus===NetworkStatus.fetchMore&&(s.networkStatus=u),r.queryManager.cache.batch({update:function(m){var me=n.updateQuery;me?m.updateQuery({query:r.query,variables:r.variables,returnPartialData:!0,optimistic:!1},function(xe){return me(xe,{fetchMoreResult:c.data,variables:o.variables})}):m.writeQuery({query:o.query,variables:o.variables,data:c.data})},onWatchUpdated:function(m){l.add(m.query)}}),c}).finally(function(){l.has(r.query)||reobserveCacheFirst(r)})},t.prototype.subscribeToMore=function(n){var r=this,o=this.queryManager.startGraphQLSubscription({query:n.document,variables:n.variables,context:n.context}).subscribe({next:function(a){var s=n.updateQuery;s&&r.updateQuery(function(u,l){var c=l.variables;return s(u,{subscriptionData:a,variables:c})})},error:function(a){if(n.onError){n.onError(a);return}__DEV__&&invariant$1.error("Unhandled GraphQL subscription error",a)}});return this.subscriptions.add(o),function(){r.subscriptions.delete(o)&&o.unsubscribe()}},t.prototype.setOptions=function(n){return this.reobserve(n)},t.prototype.setVariables=function(n){return equal(this.variables,n)?this.observers.size?this.result():Promise.resolve():(this.options.variables=n,this.observers.size?this.reobserve({fetchPolicy:this.options.initialFetchPolicy,variables:n},NetworkStatus.setVariables):Promise.resolve())},t.prototype.updateQuery=function(n){var r=this.queryManager,o=r.cache.diff({query:this.options.query,variables:this.variables,returnPartialData:!0,optimistic:!1}).result,a=n(o,{variables:this.variables});a&&(r.cache.writeQuery({query:this.options.query,data:a,variables:this.variables}),r.broadcastQueries())},t.prototype.startPolling=function(n){this.options.pollInterval=n,this.updatePolling()},t.prototype.stopPolling=function(){this.options.pollInterval=0,this.updatePolling()},t.prototype.applyNextFetchPolicy=function(n,r){if(r.nextFetchPolicy){var o=r.fetchPolicy,a=o===void 0?"cache-first":o,s=r.initialFetchPolicy,u=s===void 0?a:s;a==="standby"||(typeof r.nextFetchPolicy=="function"?r.fetchPolicy=r.nextFetchPolicy(a,{reason:n,options:r,observable:this,initialFetchPolicy:u}):n==="variables-changed"?r.fetchPolicy=u:r.fetchPolicy=r.nextFetchPolicy)}return r.fetchPolicy},t.prototype.fetch=function(n,r){return this.queryManager.setObservableQuery(this),this.queryManager.fetchQueryObservable(this.queryId,n,r)},t.prototype.updatePolling=function(){var n=this;if(!this.queryManager.ssrMode){var r=this,o=r.pollingInfo,a=r.options.pollInterval;if(!a){o&&(clearTimeout(o.timeout),delete this.pollingInfo);return}if(!(o&&o.interval===a)){__DEV__?invariant$1(a,"Attempted to start a polling query without a polling interval."):invariant$1(a,10);var s=o||(this.pollingInfo={});s.interval=a;var u=function(){n.pollingInfo&&(isNetworkRequestInFlight(n.queryInfo.networkStatus)?l():n.reobserve({fetchPolicy:"network-only"},NetworkStatus.poll).then(l,l))},l=function(){var c=n.pollingInfo;c&&(clearTimeout(c.timeout),c.timeout=setTimeout(u,c.interval))};l()}}},t.prototype.updateLastResult=function(n,r){return r===void 0&&(r=this.variables),this.last=__assign$1(__assign$1({},this.last),{result:this.queryManager.assumeImmutableResults?n:cloneDeep(n),variables:r}),isNonEmptyArray(n.errors)||delete this.last.error,this.last},t.prototype.reobserve=function(n,r){var o=this;this.isTornDown=!1;var a=r===NetworkStatus.refetch||r===NetworkStatus.fetchMore||r===NetworkStatus.poll,s=this.options.variables,u=this.options.fetchPolicy,l=compact(this.options,n||{}),c=a?l:assign(this.options,l);a||(this.updatePolling(),n&&n.variables&&!equal(n.variables,s)&&c.fetchPolicy!=="standby"&&c.fetchPolicy===u&&(this.applyNextFetchPolicy("variables-changed",c),r===void 0&&(r=NetworkStatus.setVariables)));var m=c.variables&&__assign$1({},c.variables),me=this.fetch(c,r),xe={next:function(Ne){o.reportResult(Ne,m)},error:function(Ne){o.reportError(Ne,m)}};return a||(this.concast&&this.observer&&this.concast.removeObserver(this.observer),this.concast=me,this.observer=xe),me.addObserver(xe),me.promise},t.prototype.observe=function(){this.reportResult(this.getCurrentResult(!1),this.variables)},t.prototype.reportResult=function(n,r){var o=this.getLastError();(o||this.isDifferentFromLastResult(n))&&((o||!n.partial||this.options.returnPartialData)&&this.updateLastResult(n,r),iterateObserversSafely(this.observers,"next",n))},t.prototype.reportError=function(n,r){var o=__assign$1(__assign$1({},this.getLastResult()),{error:n,errors:n.graphQLErrors,networkStatus:NetworkStatus.error,loading:!1});this.updateLastResult(o,r),iterateObserversSafely(this.observers,"error",this.last.error=n)},t.prototype.hasObservers=function(){return this.observers.size>0},t.prototype.tearDownQuery=function(){this.isTornDown||(this.concast&&this.observer&&(this.concast.removeObserver(this.observer),delete this.concast,delete this.observer),this.stopPolling(),this.subscriptions.forEach(function(n){return n.unsubscribe()}),this.subscriptions.clear(),this.queryManager.stopQuery(this.queryId),this.observers.clear(),this.isTornDown=!0)},t}(Observable);fixObservableSubclass(ObservableQuery);function reobserveCacheFirst(e){var t=e.options,n=t.fetchPolicy,r=t.nextFetchPolicy;return n==="cache-and-network"||n==="network-only"?e.reobserve({fetchPolicy:"cache-first",nextFetchPolicy:function(){return this.nextFetchPolicy=r,typeof r=="function"?r.apply(this,arguments):n}}):e.reobserve()}function defaultSubscriptionObserverErrorCallback(e){__DEV__&&invariant$1.error("Unhandled error",e.message,e.stack)}function logMissingFieldErrors(e){__DEV__&&e&&__DEV__&&invariant$1.debug("Missing cache result fields: ".concat(JSON.stringify(e)),e)}var LocalState=function(){function e(t){var n=t.cache,r=t.client,o=t.resolvers,a=t.fragmentMatcher;this.cache=n,r&&(this.client=r),o&&this.addResolvers(o),a&&this.setFragmentMatcher(a)}return e.prototype.addResolvers=function(t){var n=this;this.resolvers=this.resolvers||{},Array.isArray(t)?t.forEach(function(r){n.resolvers=mergeDeep(n.resolvers,r)}):this.resolvers=mergeDeep(this.resolvers,t)},e.prototype.setResolvers=function(t){this.resolvers={},this.addResolvers(t)},e.prototype.getResolvers=function(){return this.resolvers||{}},e.prototype.runResolvers=function(t){var n=t.document,r=t.remoteResult,o=t.context,a=t.variables,s=t.onlyRunForcedResolvers,u=s===void 0?!1:s;return __awaiter(this,void 0,void 0,function(){return __generator(this,function(l){return n?[2,this.resolveDocument(n,r.data,o,a,this.fragmentMatcher,u).then(function(c){return __assign$1(__assign$1({},r),{data:c.result})})]:[2,r]})})},e.prototype.setFragmentMatcher=function(t){this.fragmentMatcher=t},e.prototype.getFragmentMatcher=function(){return this.fragmentMatcher},e.prototype.clientQuery=function(t){return hasDirectives(["client"],t)&&this.resolvers?t:null},e.prototype.serverQuery=function(t){return removeClientSetsFromDocument(t)},e.prototype.prepareContext=function(t){var n=this.cache;return __assign$1(__assign$1({},t),{cache:n,getCacheKey:function(r){return n.identify(r)}})},e.prototype.addExportedVariables=function(t,n,r){return n===void 0&&(n={}),r===void 0&&(r={}),__awaiter(this,void 0,void 0,function(){return __generator(this,function(o){return t?[2,this.resolveDocument(t,this.buildRootValueFromCache(t,n)||{},this.prepareContext(r),n).then(function(a){return __assign$1(__assign$1({},n),a.exportedVariables)})]:[2,__assign$1({},n)]})})},e.prototype.shouldForceResolvers=function(t){var n=!1;return visit(t,{Directive:{enter:function(r){if(r.name.value==="client"&&r.arguments&&(n=r.arguments.some(function(o){return o.name.value==="always"&&o.value.kind==="BooleanValue"&&o.value.value===!0}),n))return BREAK}}}),n},e.prototype.buildRootValueFromCache=function(t,n){return this.cache.diff({query:buildQueryFromSelectionSet(t),variables:n,returnPartialData:!0,optimistic:!1}).result},e.prototype.resolveDocument=function(t,n,r,o,a,s){return r===void 0&&(r={}),o===void 0&&(o={}),a===void 0&&(a=function(){return!0}),s===void 0&&(s=!1),__awaiter(this,void 0,void 0,function(){var u,l,c,m,me,xe,Ne,He,Ye;return __generator(this,function(Je){return u=getMainDefinition(t),l=getFragmentDefinitions(t),c=createFragmentMap(l),m=u.operation,me=m?m.charAt(0).toUpperCase()+m.slice(1):"Query",xe=this,Ne=xe.cache,He=xe.client,Ye={fragmentMap:c,context:__assign$1(__assign$1({},r),{cache:Ne,client:He}),variables:o,fragmentMatcher:a,defaultOperationType:me,exportedVariables:{},onlyRunForcedResolvers:s},[2,this.resolveSelectionSet(u.selectionSet,n,Ye).then(function(vn){return{result:vn,exportedVariables:Ye.exportedVariables}})]})})},e.prototype.resolveSelectionSet=function(t,n,r){return __awaiter(this,void 0,void 0,function(){var o,a,s,u,l,c=this;return __generator(this,function(m){return o=r.fragmentMap,a=r.context,s=r.variables,u=[n],l=function(me){return __awaiter(c,void 0,void 0,function(){var xe,Ne;return __generator(this,function(He){return shouldInclude(me,s)?isField(me)?[2,this.resolveField(me,n,r).then(function(Ye){var Je;typeof Ye<"u"&&u.push((Je={},Je[resultKeyNameFromField(me)]=Ye,Je))})]:(isInlineFragment(me)?xe=me:(xe=o[me.name.value],__DEV__?invariant$1(xe,"No fragment named ".concat(me.name.value)):invariant$1(xe,9)),xe&&xe.typeCondition&&(Ne=xe.typeCondition.name.value,r.fragmentMatcher(n,Ne,a))?[2,this.resolveSelectionSet(xe.selectionSet,n,r).then(function(Ye){u.push(Ye)})]:[2]):[2]})})},[2,Promise.all(t.selections.map(l)).then(function(){return mergeDeepArray(u)})]})})},e.prototype.resolveField=function(t,n,r){return __awaiter(this,void 0,void 0,function(){var o,a,s,u,l,c,m,me,xe,Ne=this;return __generator(this,function(He){return o=r.variables,a=t.name.value,s=resultKeyNameFromField(t),u=a!==s,l=n[s]||n[a],c=Promise.resolve(l),(!r.onlyRunForcedResolvers||this.shouldForceResolvers(t))&&(m=n.__typename||r.defaultOperationType,me=this.resolvers&&this.resolvers[m],me&&(xe=me[u?a:s],xe&&(c=Promise.resolve(cacheSlot.withValue(this.cache,xe,[n,argumentsObjectFromField(t,o),r.context,{field:t,fragmentMap:r.fragmentMap}]))))),[2,c.then(function(Ye){if(Ye===void 0&&(Ye=l),t.directives&&t.directives.forEach(function(Je){Je.name.value==="export"&&Je.arguments&&Je.arguments.forEach(function(vn){vn.name.value==="as"&&vn.value.kind==="StringValue"&&(r.exportedVariables[vn.value.value]=Ye)})}),!t.selectionSet||Ye==null)return Ye;if(Array.isArray(Ye))return Ne.resolveSubSelectedArray(t,Ye,r);if(t.selectionSet)return Ne.resolveSelectionSet(t.selectionSet,Ye,r)})]})})},e.prototype.resolveSubSelectedArray=function(t,n,r){var o=this;return Promise.all(n.map(function(a){if(a===null)return null;if(Array.isArray(a))return o.resolveSubSelectedArray(t,a,r);if(t.selectionSet)return o.resolveSelectionSet(t.selectionSet,a,r)}))},e}(),destructiveMethodCounts=new(canUseWeakMap?WeakMap:Map);function wrapDestructiveCacheMethod(e,t){var n=e[t];typeof n=="function"&&(e[t]=function(){return destructiveMethodCounts.set(e,(destructiveMethodCounts.get(e)+1)%1e15),n.apply(this,arguments)})}function cancelNotifyTimeout(e){e.notifyTimeout&&(clearTimeout(e.notifyTimeout),e.notifyTimeout=void 0)}var QueryInfo=function(){function e(t,n){n===void 0&&(n=t.generateQueryId()),this.queryId=n,this.listeners=new Set,this.document=null,this.lastRequestId=1,this.subscriptions=new Set,this.stopped=!1,this.dirty=!1,this.observableQuery=null;var r=this.cache=t.cache;destructiveMethodCounts.has(r)||(destructiveMethodCounts.set(r,0),wrapDestructiveCacheMethod(r,"evict"),wrapDestructiveCacheMethod(r,"modify"),wrapDestructiveCacheMethod(r,"reset"))}return e.prototype.init=function(t){var n=t.networkStatus||NetworkStatus.loading;return this.variables&&this.networkStatus!==NetworkStatus.loading&&!equal(this.variables,t.variables)&&(n=NetworkStatus.setVariables),equal(t.variables,this.variables)||(this.lastDiff=void 0),Object.assign(this,{document:t.document,variables:t.variables,networkError:null,graphQLErrors:this.graphQLErrors||[],networkStatus:n}),t.observableQuery&&this.setObservableQuery(t.observableQuery),t.lastRequestId&&(this.lastRequestId=t.lastRequestId),this},e.prototype.reset=function(){cancelNotifyTimeout(this),this.lastDiff=void 0,this.dirty=!1},e.prototype.getDiff=function(t){t===void 0&&(t=this.variables);var n=this.getDiffOptions(t);if(this.lastDiff&&equal(n,this.lastDiff.options))return this.lastDiff.diff;this.updateWatch(this.variables=t);var r=this.observableQuery;if(r&&r.options.fetchPolicy==="no-cache")return{complete:!1};var o=this.cache.diff(n);return this.updateLastDiff(o,n),o},e.prototype.updateLastDiff=function(t,n){this.lastDiff=t?{diff:t,options:n||this.getDiffOptions()}:void 0},e.prototype.getDiffOptions=function(t){var n;return t===void 0&&(t=this.variables),{query:this.document,variables:t,returnPartialData:!0,optimistic:!0,canonizeResults:(n=this.observableQuery)===null||n===void 0?void 0:n.options.canonizeResults}},e.prototype.setDiff=function(t){var n=this,r=this.lastDiff&&this.lastDiff.diff;this.updateLastDiff(t),!this.dirty&&!equal(r&&r.result,t&&t.result)&&(this.dirty=!0,this.notifyTimeout||(this.notifyTimeout=setTimeout(function(){return n.notify()},0)))},e.prototype.setObservableQuery=function(t){var n=this;t!==this.observableQuery&&(this.oqListener&&this.listeners.delete(this.oqListener),this.observableQuery=t,t?(t.queryInfo=this,this.listeners.add(this.oqListener=function(){var r=n.getDiff();r.fromOptimisticTransaction?t.observe():reobserveCacheFirst(t)})):delete this.oqListener)},e.prototype.notify=function(){var t=this;cancelNotifyTimeout(this),this.shouldNotify()&&this.listeners.forEach(function(n){return n(t)}),this.dirty=!1},e.prototype.shouldNotify=function(){if(!this.dirty||!this.listeners.size)return!1;if(isNetworkRequestInFlight(this.networkStatus)&&this.observableQuery){var t=this.observableQuery.options.fetchPolicy;if(t!=="cache-only"&&t!=="cache-and-network")return!1}return!0},e.prototype.stop=function(){if(!this.stopped){this.stopped=!0,this.reset(),this.cancel(),this.cancel=e.prototype.cancel,this.subscriptions.forEach(function(n){return n.unsubscribe()});var t=this.observableQuery;t&&t.stopPolling()}},e.prototype.cancel=function(){},e.prototype.updateWatch=function(t){var n=this;t===void 0&&(t=this.variables);var r=this.observableQuery;if(!(r&&r.options.fetchPolicy==="no-cache")){var o=__assign$1(__assign$1({},this.getDiffOptions(t)),{watcher:this,callback:function(a){return n.setDiff(a)}});(!this.lastWatch||!equal(o,this.lastWatch))&&(this.cancel(),this.cancel=this.cache.watch(this.lastWatch=o))}},e.prototype.resetLastWrite=function(){this.lastWrite=void 0},e.prototype.shouldWrite=function(t,n){var r=this.lastWrite;return!(r&&r.dmCount===destructiveMethodCounts.get(this.cache)&&equal(n,r.variables)&&equal(t.data,r.result.data))},e.prototype.markResult=function(t,n,r){var o=this;this.graphQLErrors=isNonEmptyArray(t.errors)?t.errors:[],this.reset(),n.fetchPolicy==="no-cache"?this.updateLastDiff({result:t.data,complete:!0},this.getDiffOptions(n.variables)):r!==0&&(shouldWriteResult(t,n.errorPolicy)?this.cache.performTransaction(function(a){if(o.shouldWrite(t,n.variables))a.writeQuery({query:o.document,data:t.data,variables:n.variables,overwrite:r===1}),o.lastWrite={result:t,variables:n.variables,dmCount:destructiveMethodCounts.get(o.cache)};else if(o.lastDiff&&o.lastDiff.diff.complete){t.data=o.lastDiff.diff.result;return}var s=o.getDiffOptions(n.variables),u=a.diff(s);o.stopped||o.updateWatch(n.variables),o.updateLastDiff(u,s),u.complete&&(t.data=u.result)}):this.lastWrite=void 0)},e.prototype.markReady=function(){return this.networkError=null,this.networkStatus=NetworkStatus.ready},e.prototype.markError=function(t){return this.networkStatus=NetworkStatus.error,this.lastWrite=void 0,this.reset(),t.graphQLErrors&&(this.graphQLErrors=t.graphQLErrors),t.networkError&&(this.networkError=t.networkError),t},e}();function shouldWriteResult(e,t){t===void 0&&(t="none");var n=t==="ignore"||t==="all",r=!graphQLResultHasError(e);return!r&&n&&e.data&&(r=!0),r}var hasOwnProperty=Object.prototype.hasOwnProperty,QueryManager=function(){function e(t){var n=t.cache,r=t.link,o=t.defaultOptions,a=t.queryDeduplication,s=a===void 0?!1:a,u=t.onBroadcast,l=t.ssrMode,c=l===void 0?!1:l,m=t.clientAwareness,me=m===void 0?{}:m,xe=t.localState,Ne=t.assumeImmutableResults;this.clientAwareness={},this.queries=new Map,this.fetchCancelFns=new Map,this.transformCache=new(canUseWeakMap?WeakMap:Map),this.queryIdCounter=1,this.requestIdCounter=1,this.mutationIdCounter=1,this.inFlightLinkObservables=new Map,this.cache=n,this.link=r,this.defaultOptions=o||Object.create(null),this.queryDeduplication=s,this.clientAwareness=me,this.localState=xe||new LocalState({cache:n}),this.ssrMode=c,this.assumeImmutableResults=!!Ne,(this.onBroadcast=u)&&(this.mutationStore=Object.create(null))}return e.prototype.stop=function(){var t=this;this.queries.forEach(function(n,r){t.stopQueryNoBroadcast(r)}),this.cancelPendingFetches(__DEV__?new InvariantError("QueryManager stopped while query was in flight"):new InvariantError(11))},e.prototype.cancelPendingFetches=function(t){this.fetchCancelFns.forEach(function(n){return n(t)}),this.fetchCancelFns.clear()},e.prototype.mutate=function(t){var n,r,o=t.mutation,a=t.variables,s=t.optimisticResponse,u=t.updateQueries,l=t.refetchQueries,c=l===void 0?[]:l,m=t.awaitRefetchQueries,me=m===void 0?!1:m,xe=t.update,Ne=t.onQueryUpdated,He=t.fetchPolicy,Ye=He===void 0?((n=this.defaultOptions.mutate)===null||n===void 0?void 0:n.fetchPolicy)||"network-only":He,Je=t.errorPolicy,vn=Je===void 0?((r=this.defaultOptions.mutate)===null||r===void 0?void 0:r.errorPolicy)||"none":Je,La=t.keepRootFields,sr=t.context;return __awaiter(this,void 0,void 0,function(){var Zr,zs,za;return __generator(this,function(Hs){switch(Hs.label){case 0:return __DEV__?invariant$1(o,"mutation option is required. You must specify your GraphQL document in the mutation option."):invariant$1(o,12),__DEV__?invariant$1(Ye==="network-only"||Ye==="no-cache","Mutations support only 'network-only' or 'no-cache' fetchPolicy strings. The default `network-only` behavior automatically writes mutation results to the cache. Passing `no-cache` skips the cache write."):invariant$1(Ye==="network-only"||Ye==="no-cache",13),Zr=this.generateMutationId(),o=this.transform(o).document,a=this.getVariables(o,a),this.transform(o).hasClientExports?[4,this.localState.addExportedVariables(o,a,sr)]:[3,2];case 1:a=Hs.sent(),Hs.label=2;case 2:return zs=this.mutationStore&&(this.mutationStore[Zr]={mutation:o,variables:a,loading:!0,error:null}),s&&this.markMutationOptimistic(s,{mutationId:Zr,document:o,variables:a,fetchPolicy:Ye,errorPolicy:vn,context:sr,updateQueries:u,update:xe,keepRootFields:La}),this.broadcastQueries(),za=this,[2,new Promise(function(lc,Ty){return asyncMap(za.getObservableFromLink(o,__assign$1(__assign$1({},sr),{optimisticResponse:s}),a,!1),function(_y){if(graphQLResultHasError(_y)&&vn==="none")throw new ApolloError({graphQLErrors:_y.errors});zs&&(zs.loading=!1,zs.error=null);var xy=__assign$1({},_y);return typeof c=="function"&&(c=c(xy)),vn==="ignore"&&graphQLResultHasError(xy)&&delete xy.errors,za.markMutationResult({mutationId:Zr,result:xy,document:o,variables:a,fetchPolicy:Ye,errorPolicy:vn,context:sr,update:xe,updateQueries:u,awaitRefetchQueries:me,refetchQueries:c,removeOptimistic:s?Zr:void 0,onQueryUpdated:Ne,keepRootFields:La})}).subscribe({next:function(_y){za.broadcastQueries(),lc(_y)},error:function(_y){zs&&(zs.loading=!1,zs.error=_y),s&&za.cache.removeOptimistic(Zr),za.broadcastQueries(),Ty(_y instanceof ApolloError?_y:new ApolloError({networkError:_y}))}})})]}})})},e.prototype.markMutationResult=function(t,n){var r=this;n===void 0&&(n=this.cache);var o=t.result,a=[],s=t.fetchPolicy==="no-cache";if(!s&&shouldWriteResult(o,t.errorPolicy)){a.push({result:o.data,dataId:"ROOT_MUTATION",query:t.document,variables:t.variables});var u=t.updateQueries;u&&this.queries.forEach(function(c,m){var me=c.observableQuery,xe=me&&me.queryName;if(!(!xe||!hasOwnProperty.call(u,xe))){var Ne=u[xe],He=r.queries.get(m),Ye=He.document,Je=He.variables,vn=n.diff({query:Ye,variables:Je,returnPartialData:!0,optimistic:!1}),La=vn.result,sr=vn.complete;if(sr&&La){var Zr=Ne(La,{mutationResult:o,queryName:Ye&&getOperationName(Ye)||void 0,queryVariables:Je});Zr&&a.push({result:Zr,dataId:"ROOT_QUERY",query:Ye,variables:Je})}}})}if(a.length>0||t.refetchQueries||t.update||t.onQueryUpdated||t.removeOptimistic){var l=[];if(this.refetchQueries({updateCache:function(c){s||a.forEach(function(xe){return c.write(xe)});var m=t.update;if(m){if(!s){var me=c.diff({id:"ROOT_MUTATION",query:r.transform(t.document).asQuery,variables:t.variables,optimistic:!1,returnPartialData:!0});me.complete&&(o=__assign$1(__assign$1({},o),{data:me.result}))}m(c,o,{context:t.context,variables:t.variables})}!s&&!t.keepRootFields&&c.modify({id:"ROOT_MUTATION",fields:function(xe,Ne){var He=Ne.fieldName,Ye=Ne.DELETE;return He==="__typename"?xe:Ye}})},include:t.refetchQueries,optimistic:!1,removeOptimistic:t.removeOptimistic,onQueryUpdated:t.onQueryUpdated||null}).forEach(function(c){return l.push(c)}),t.awaitRefetchQueries||t.onQueryUpdated)return Promise.all(l).then(function(){return o})}return Promise.resolve(o)},e.prototype.markMutationOptimistic=function(t,n){var r=this,o=typeof t=="function"?t(n.variables):t;return this.cache.recordOptimisticTransaction(function(a){try{r.markMutationResult(__assign$1(__assign$1({},n),{result:{data:o}}),a)}catch(s){__DEV__&&invariant$1.error(s)}},n.mutationId)},e.prototype.fetchQuery=function(t,n,r){return this.fetchQueryObservable(t,n,r).promise},e.prototype.getQueryStore=function(){var t=Object.create(null);return this.queries.forEach(function(n,r){t[r]={variables:n.variables,networkStatus:n.networkStatus,networkError:n.networkError,graphQLErrors:n.graphQLErrors}}),t},e.prototype.resetErrors=function(t){var n=this.queries.get(t);n&&(n.networkError=void 0,n.graphQLErrors=[])},e.prototype.transform=function(t){var n=this.transformCache;if(!n.has(t)){var r=this.cache.transformDocument(t),o=removeConnectionDirectiveFromDocument(this.cache.transformForLink(r)),a=this.localState.clientQuery(r),s=o&&this.localState.serverQuery(o),u={document:r,hasClientExports:hasClientExports(r),hasForcedResolvers:this.localState.shouldForceResolvers(r),clientQuery:a,serverQuery:s,defaultVars:getDefaultValues(getOperationDefinition(r)),asQuery:__assign$1(__assign$1({},r),{definitions:r.definitions.map(function(c){return c.kind==="OperationDefinition"&&c.operation!=="query"?__assign$1(__assign$1({},c),{operation:"query"}):c})})},l=function(c){c&&!n.has(c)&&n.set(c,u)};l(t),l(r),l(a),l(s)}return n.get(t)},e.prototype.getVariables=function(t,n){return __assign$1(__assign$1({},this.transform(t).defaultVars),n)},e.prototype.watchQuery=function(t){t=__assign$1(__assign$1({},t),{variables:this.getVariables(t.query,t.variables)}),typeof t.notifyOnNetworkStatusChange>"u"&&(t.notifyOnNetworkStatusChange=!1);var n=new QueryInfo(this),r=new ObservableQuery({queryManager:this,queryInfo:n,options:t});return this.queries.set(r.queryId,n),n.init({document:r.query,observableQuery:r,variables:r.variables}),r},e.prototype.query=function(t,n){var r=this;return n===void 0&&(n=this.generateQueryId()),__DEV__?invariant$1(t.query,"query option is required. You must specify your GraphQL document in the query option."):invariant$1(t.query,14),__DEV__?invariant$1(t.query.kind==="Document",'You must wrap the query string in a "gql" tag.'):invariant$1(t.query.kind==="Document",15),__DEV__?invariant$1(!t.returnPartialData,"returnPartialData option only supported on watchQuery."):invariant$1(!t.returnPartialData,16),__DEV__?invariant$1(!t.pollInterval,"pollInterval option only supported on watchQuery."):invariant$1(!t.pollInterval,17),this.fetchQuery(n,t).finally(function(){return r.stopQuery(n)})},e.prototype.generateQueryId=function(){return String(this.queryIdCounter++)},e.prototype.generateRequestId=function(){return this.requestIdCounter++},e.prototype.generateMutationId=function(){return String(this.mutationIdCounter++)},e.prototype.stopQueryInStore=function(t){this.stopQueryInStoreNoBroadcast(t),this.broadcastQueries()},e.prototype.stopQueryInStoreNoBroadcast=function(t){var n=this.queries.get(t);n&&n.stop()},e.prototype.clearStore=function(t){return t===void 0&&(t={discardWatches:!0}),this.cancelPendingFetches(__DEV__?new InvariantError("Store reset while query was in flight (not completed in link chain)"):new InvariantError(18)),this.queries.forEach(function(n){n.observableQuery?n.networkStatus=NetworkStatus.loading:n.stop()}),this.mutationStore&&(this.mutationStore=Object.create(null)),this.cache.reset(t)},e.prototype.getObservableQueries=function(t){var n=this;t===void 0&&(t="active");var r=new Map,o=new Map,a=new Set;return Array.isArray(t)&&t.forEach(function(s){typeof s=="string"?o.set(s,!1):isDocumentNode(s)?o.set(n.transform(s).document,!1):isNonNullObject(s)&&s.query&&a.add(s)}),this.queries.forEach(function(s,u){var l=s.observableQuery,c=s.document;if(l){if(t==="all"){r.set(u,l);return}var m=l.queryName,me=l.options.fetchPolicy;if(me==="standby"||t==="active"&&!l.hasObservers())return;(t==="active"||m&&o.has(m)||c&&o.has(c))&&(r.set(u,l),m&&o.set(m,!0),c&&o.set(c,!0))}}),a.size&&a.forEach(function(s){var u=makeUniqueId("legacyOneTimeQuery"),l=n.getQuery(u).init({document:s.query,variables:s.variables}),c=new ObservableQuery({queryManager:n,queryInfo:l,options:__assign$1(__assign$1({},s),{fetchPolicy:"network-only"})});invariant$1(c.queryId===u),l.setObservableQuery(c),r.set(u,c)}),__DEV__&&o.size&&o.forEach(function(s,u){s||__DEV__&&invariant$1.warn("Unknown query ".concat(typeof u=="string"?"named ":"").concat(JSON.stringify(u,null,2)," requested in refetchQueries options.include array"))}),r},e.prototype.reFetchObservableQueries=function(t){var n=this;t===void 0&&(t=!1);var r=[];return this.getObservableQueries(t?"all":"active").forEach(function(o,a){var s=o.options.fetchPolicy;o.resetLastResults(),(t||s!=="standby"&&s!=="cache-only")&&r.push(o.refetch()),n.getQuery(a).setDiff(null)}),this.broadcastQueries(),Promise.all(r)},e.prototype.setObservableQuery=function(t){this.getQuery(t.queryId).setObservableQuery(t)},e.prototype.startGraphQLSubscription=function(t){var n=this,r=t.query,o=t.fetchPolicy,a=t.errorPolicy,s=t.variables,u=t.context,l=u===void 0?{}:u;r=this.transform(r).document,s=this.getVariables(r,s);var c=function(me){return n.getObservableFromLink(r,l,me).map(function(xe){if(o!=="no-cache"&&(shouldWriteResult(xe,a)&&n.cache.write({query:r,result:xe.data,dataId:"ROOT_SUBSCRIPTION",variables:me}),n.broadcastQueries()),graphQLResultHasError(xe))throw new ApolloError({graphQLErrors:xe.errors});return xe})};if(this.transform(r).hasClientExports){var m=this.localState.addExportedVariables(r,s,l).then(c);return new Observable(function(me){var xe=null;return m.then(function(Ne){return xe=Ne.subscribe(me)},me.error),function(){return xe&&xe.unsubscribe()}})}return c(s)},e.prototype.stopQuery=function(t){this.stopQueryNoBroadcast(t),this.broadcastQueries()},e.prototype.stopQueryNoBroadcast=function(t){this.stopQueryInStoreNoBroadcast(t),this.removeQuery(t)},e.prototype.removeQuery=function(t){this.fetchCancelFns.delete(t),this.queries.has(t)&&(this.getQuery(t).stop(),this.queries.delete(t))},e.prototype.broadcastQueries=function(){this.onBroadcast&&this.onBroadcast(),this.queries.forEach(function(t){return t.notify()})},e.prototype.getLocalState=function(){return this.localState},e.prototype.getObservableFromLink=function(t,n,r,o){var a=this,s;o===void 0&&(o=(s=n==null?void 0:n.queryDeduplication)!==null&&s!==void 0?s:this.queryDeduplication);var u,l=this.transform(t).serverQuery;if(l){var c=this,m=c.inFlightLinkObservables,me=c.link,xe={query:l,variables:r,operationName:getOperationName(l)||void 0,context:this.prepareContext(__assign$1(__assign$1({},n),{forceFetch:!o}))};if(n=xe.context,o){var Ne=m.get(l)||new Map;m.set(l,Ne);var He=canonicalStringify(r);if(u=Ne.get(He),!u){var Ye=new Concast([execute(me,xe)]);Ne.set(He,u=Ye),Ye.cleanup(function(){Ne.delete(He)&&Ne.size<1&&m.delete(l)})}}else u=new Concast([execute(me,xe)])}else u=new Concast([Observable.of({data:{}})]),n=this.prepareContext(n);var Je=this.transform(t).clientQuery;return Je&&(u=asyncMap(u,function(vn){return a.localState.runResolvers({document:Je,remoteResult:vn,context:n,variables:r})})),u},e.prototype.getResultsFromLink=function(t,n,r){var o=t.lastRequestId=this.generateRequestId();return asyncMap(this.getObservableFromLink(t.document,r.context,r.variables),function(a){var s=isNonEmptyArray(a.errors);if(o>=t.lastRequestId){if(s&&r.errorPolicy==="none")throw t.markError(new ApolloError({graphQLErrors:a.errors}));t.markResult(a,r,n),t.markReady()}var u={data:a.data,loading:!1,networkStatus:NetworkStatus.ready};return s&&r.errorPolicy!=="ignore"&&(u.errors=a.errors,u.networkStatus=NetworkStatus.error),u},function(a){var s=isApolloError(a)?a:new ApolloError({networkError:a});throw o>=t.lastRequestId&&t.markError(s),s})},e.prototype.fetchQueryObservable=function(t,n,r){var o=this;r===void 0&&(r=NetworkStatus.loading);var a=this.transform(n.query).document,s=this.getVariables(a,n.variables),u=this.getQuery(t),l=this.defaultOptions.watchQuery,c=n.fetchPolicy,m=c===void 0?l&&l.fetchPolicy||"cache-first":c,me=n.errorPolicy,xe=me===void 0?l&&l.errorPolicy||"none":me,Ne=n.returnPartialData,He=Ne===void 0?!1:Ne,Ye=n.notifyOnNetworkStatusChange,Je=Ye===void 0?!1:Ye,vn=n.context,La=vn===void 0?{}:vn,sr=Object.assign({},n,{query:a,variables:s,fetchPolicy:m,errorPolicy:xe,returnPartialData:He,notifyOnNetworkStatusChange:Je,context:La}),Zr=function(Hs){sr.variables=Hs;var lc=o.fetchQueryByPolicy(u,sr,r);return sr.fetchPolicy!=="standby"&&lc.length>0&&u.observableQuery&&u.observableQuery.applyNextFetchPolicy("after-fetch",n),lc},zs=function(){return o.fetchCancelFns.delete(t)};this.fetchCancelFns.set(t,function(Hs){zs(),setTimeout(function(){return za.cancel(Hs)})});var za=new Concast(this.transform(sr.query).hasClientExports?this.localState.addExportedVariables(sr.query,sr.variables,sr.context).then(Zr):Zr(sr.variables));return za.promise.then(zs,zs),za},e.prototype.refetchQueries=function(t){var n=this,r=t.updateCache,o=t.include,a=t.optimistic,s=a===void 0?!1:a,u=t.removeOptimistic,l=u===void 0?s?makeUniqueId("refetchQueries"):void 0:u,c=t.onQueryUpdated,m=new Map;o&&this.getObservableQueries(o).forEach(function(xe,Ne){m.set(Ne,{oq:xe,lastDiff:n.getQuery(Ne).getDiff()})});var me=new Map;return r&&this.cache.batch({update:r,optimistic:s&&l||!1,removeOptimistic:l,onWatchUpdated:function(xe,Ne,He){var Ye=xe.watcher instanceof QueryInfo&&xe.watcher.observableQuery;if(Ye){if(c){m.delete(Ye.queryId);var Je=c(Ye,Ne,He);return Je===!0&&(Je=Ye.refetch()),Je!==!1&&me.set(Ye,Je),Je}c!==null&&m.set(Ye.queryId,{oq:Ye,lastDiff:He,diff:Ne})}}}),m.size&&m.forEach(function(xe,Ne){var He=xe.oq,Ye=xe.lastDiff,Je=xe.diff,vn;if(c){if(!Je){var La=He.queryInfo;La.reset(),Je=La.getDiff()}vn=c(He,Je,Ye)}(!c||vn===!0)&&(vn=He.refetch()),vn!==!1&&me.set(He,vn),Ne.indexOf("legacyOneTimeQuery")>=0&&n.stopQueryNoBroadcast(Ne)}),l&&this.cache.removeOptimistic(l),me},e.prototype.fetchQueryByPolicy=function(t,n,r){var o=this,a=n.query,s=n.variables,u=n.fetchPolicy,l=n.refetchWritePolicy,c=n.errorPolicy,m=n.returnPartialData,me=n.context,xe=n.notifyOnNetworkStatusChange,Ne=t.networkStatus;t.init({document:this.transform(a).document,variables:s,networkStatus:r});var He=function(){return t.getDiff(s)},Ye=function(Zr,zs){zs===void 0&&(zs=t.networkStatus||NetworkStatus.loading);var za=Zr.result;__DEV__&&!m&&!equal(za,{})&&logMissingFieldErrors(Zr.missing);var Hs=function(lc){return Observable.of(__assign$1({data:lc,loading:isNetworkRequestInFlight(zs),networkStatus:zs},Zr.complete?null:{partial:!0}))};return za&&o.transform(a).hasForcedResolvers?o.localState.runResolvers({document:a,remoteResult:{data:za},context:me,variables:s,onlyRunForcedResolvers:!0}).then(function(lc){return Hs(lc.data||void 0)}):Hs(za)},Je=u==="no-cache"?0:r===NetworkStatus.refetch&&l!=="merge"?1:2,vn=function(){return o.getResultsFromLink(t,Je,{variables:s,context:me,fetchPolicy:u,errorPolicy:c})},La=xe&&typeof Ne=="number"&&Ne!==r&&isNetworkRequestInFlight(r);switch(u){default:case"cache-first":{var sr=He();return sr.complete?[Ye(sr,t.markReady())]:m||La?[Ye(sr),vn()]:[vn()]}case"cache-and-network":{var sr=He();return sr.complete||m||La?[Ye(sr),vn()]:[vn()]}case"cache-only":return[Ye(He(),t.markReady())];case"network-only":return La?[Ye(He()),vn()]:[vn()];case"no-cache":return La?[Ye(t.getDiff()),vn()]:[vn()];case"standby":return[]}},e.prototype.getQuery=function(t){return t&&!this.queries.has(t)&&this.queries.set(t,new QueryInfo(this,t)),this.queries.get(t)},e.prototype.prepareContext=function(t){t===void 0&&(t={});var n=this.localState.prepareContext(t);return __assign$1(__assign$1({},n),{clientAwareness:this.clientAwareness})},e}(),hasSuggestedDevtools=!1,ApolloClient=function(){function e(t){var n=this;this.resetStoreCallbacks=[],this.clearStoreCallbacks=[];var r=t.uri,o=t.credentials,a=t.headers,s=t.cache,u=t.ssrMode,l=u===void 0?!1:u,c=t.ssrForceFetchDelay,m=c===void 0?0:c,me=t.connectToDevTools,xe=me===void 0?typeof window=="object"&&!window.__APOLLO_CLIENT__&&__DEV__:me,Ne=t.queryDeduplication,He=Ne===void 0?!0:Ne,Ye=t.defaultOptions,Je=t.assumeImmutableResults,vn=Je===void 0?!1:Je,La=t.resolvers,sr=t.typeDefs,Zr=t.fragmentMatcher,zs=t.name,za=t.version,Hs=t.link;if(Hs||(Hs=r?new HttpLink({uri:r,credentials:o,headers:a}):ApolloLink.empty()),!s)throw __DEV__?new InvariantError(`To initialize Apollo Client, you must specify a 'cache' property in the options object. 
For more information, please visit: https://go.apollo.dev/c/docs`):new InvariantError(7);if(this.link=Hs,this.cache=s,this.disableNetworkFetches=l||m>0,this.queryDeduplication=He,this.defaultOptions=Ye||Object.create(null),this.typeDefs=sr,m&&setTimeout(function(){return n.disableNetworkFetches=!1},m),this.watchQuery=this.watchQuery.bind(this),this.query=this.query.bind(this),this.mutate=this.mutate.bind(this),this.resetStore=this.resetStore.bind(this),this.reFetchObservableQueries=this.reFetchObservableQueries.bind(this),xe&&typeof window=="object"&&(window.__APOLLO_CLIENT__=this),!hasSuggestedDevtools&&__DEV__&&(hasSuggestedDevtools=!0,typeof window<"u"&&window.document&&window.top===window.self&&!window.__APOLLO_DEVTOOLS_GLOBAL_HOOK__)){var lc=window.navigator,Ty=lc&&lc.userAgent,_y=void 0;typeof Ty=="string"&&(Ty.indexOf("Chrome/")>-1?_y="https://chrome.google.com/webstore/detail/apollo-client-developer-t/jdkknkkbebbapilgoeccciglkfbmbnfm":Ty.indexOf("Firefox/")>-1&&(_y="https://addons.mozilla.org/en-US/firefox/addon/apollo-developer-tools/")),_y&&__DEV__&&invariant$1.log("Download the Apollo DevTools for a better development experience: "+_y)}this.version=version,this.localState=new LocalState({cache:s,client:this,resolvers:La,fragmentMatcher:Zr}),this.queryManager=new QueryManager({cache:this.cache,link:this.link,defaultOptions:this.defaultOptions,queryDeduplication:He,ssrMode:l,clientAwareness:{name:zs,version:za},localState:this.localState,assumeImmutableResults:vn,onBroadcast:xe?function(){n.devToolsHookCb&&n.devToolsHookCb({action:{},state:{queries:n.queryManager.getQueryStore(),mutations:n.queryManager.mutationStore||{}},dataWithOptimisticResults:n.cache.extract(!0)})}:void 0})}return e.prototype.stop=function(){this.queryManager.stop()},e.prototype.watchQuery=function(t){return this.defaultOptions.watchQuery&&(t=mergeOptions(this.defaultOptions.watchQuery,t)),this.disableNetworkFetches&&(t.fetchPolicy==="network-only"||t.fetchPolicy==="cache-and-network")&&(t=__assign$1(__assign$1({},t),{fetchPolicy:"cache-first"})),this.queryManager.watchQuery(t)},e.prototype.query=function(t){return this.defaultOptions.query&&(t=mergeOptions(this.defaultOptions.query,t)),__DEV__?invariant$1(t.fetchPolicy!=="cache-and-network","The cache-and-network fetchPolicy does not work with client.query, because client.query can only return a single result. Please use client.watchQuery to receive multiple results from the cache and the network, or consider using a different fetchPolicy, such as cache-first or network-only."):invariant$1(t.fetchPolicy!=="cache-and-network",8),this.disableNetworkFetches&&t.fetchPolicy==="network-only"&&(t=__assign$1(__assign$1({},t),{fetchPolicy:"cache-first"})),this.queryManager.query(t)},e.prototype.mutate=function(t){return this.defaultOptions.mutate&&(t=mergeOptions(this.defaultOptions.mutate,t)),this.queryManager.mutate(t)},e.prototype.subscribe=function(t){return this.queryManager.startGraphQLSubscription(t)},e.prototype.readQuery=function(t,n){return n===void 0&&(n=!1),this.cache.readQuery(t,n)},e.prototype.readFragment=function(t,n){return n===void 0&&(n=!1),this.cache.readFragment(t,n)},e.prototype.writeQuery=function(t){this.cache.writeQuery(t),this.queryManager.broadcastQueries()},e.prototype.writeFragment=function(t){this.cache.writeFragment(t),this.queryManager.broadcastQueries()},e.prototype.__actionHookForDevTools=function(t){this.devToolsHookCb=t},e.prototype.__requestRaw=function(t){return execute(this.link,t)},e.prototype.resetStore=function(){var t=this;return Promise.resolve().then(function(){return t.queryManager.clearStore({discardWatches:!1})}).then(function(){return Promise.all(t.resetStoreCallbacks.map(function(n){return n()}))}).then(function(){return t.reFetchObservableQueries()})},e.prototype.clearStore=function(){var t=this;return Promise.resolve().then(function(){return t.queryManager.clearStore({discardWatches:!0})}).then(function(){return Promise.all(t.clearStoreCallbacks.map(function(n){return n()}))})},e.prototype.onResetStore=function(t){var n=this;return this.resetStoreCallbacks.push(t),function(){n.resetStoreCallbacks=n.resetStoreCallbacks.filter(function(r){return r!==t})}},e.prototype.onClearStore=function(t){var n=this;return this.clearStoreCallbacks.push(t),function(){n.clearStoreCallbacks=n.clearStoreCallbacks.filter(function(r){return r!==t})}},e.prototype.reFetchObservableQueries=function(t){return this.queryManager.reFetchObservableQueries(t)},e.prototype.refetchQueries=function(t){var n=this.queryManager.refetchQueries(t),r=[],o=[];n.forEach(function(s,u){r.push(u),o.push(s)});var a=Promise.all(o);return a.queries=r,a.results=o,a.catch(function(s){__DEV__&&invariant$1.debug("In client.refetchQueries, Promise.all promise rejected with error ".concat(s))}),a},e.prototype.getObservableQueries=function(t){return t===void 0&&(t="active"),this.queryManager.getObservableQueries(t)},e.prototype.extract=function(t){return this.cache.extract(t)},e.prototype.restore=function(t){return this.cache.restore(t)},e.prototype.addResolvers=function(t){this.localState.addResolvers(t)},e.prototype.setResolvers=function(t){this.localState.setResolvers(t)},e.prototype.getResolvers=function(){return this.localState.getResolvers()},e.prototype.setLocalStateFragmentMatcher=function(t){this.localState.setFragmentMatcher(t)},e.prototype.setLink=function(t){this.link=this.queryManager.link=t},e}(),__assign=function(){return __assign=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},__assign.apply(this,arguments)},docCache=new Map,fragmentSourceMap=new Map,printFragmentWarnings=!0,experimentalFragmentVariables=!1;function normalize(e){return e.replace(/[\s,]+/g," ").trim()}function cacheKeyFromLoc(e){return normalize(e.source.body.substring(e.start,e.end))}function processFragments(e){var t=new Set,n=[];return e.definitions.forEach(function(r){if(r.kind==="FragmentDefinition"){var o=r.name.value,a=cacheKeyFromLoc(r.loc),s=fragmentSourceMap.get(o);s&&!s.has(a)?printFragmentWarnings&&console.warn("Warning: fragment with name "+o+` already exists.
graphql-tag enforces all fragment names across your application to be unique; read more about
this in the docs: http://dev.apollodata.com/core/fragments.html#unique-names`):s||fragmentSourceMap.set(o,s=new Set),s.add(a),t.has(a)||(t.add(a),n.push(r))}else n.push(r)}),__assign(__assign({},e),{definitions:n})}function stripLoc(e){var t=new Set(e.definitions);t.forEach(function(r){r.loc&&delete r.loc,Object.keys(r).forEach(function(o){var a=r[o];a&&typeof a=="object"&&t.add(a)})});var n=e.loc;return n&&(delete n.startToken,delete n.endToken),e}function parseDocument(e){var t=normalize(e);if(!docCache.has(t)){var n=parse(e,{experimentalFragmentVariables,allowLegacyFragmentVariables:experimentalFragmentVariables});if(!n||n.kind!=="Document")throw new Error("Not a valid GraphQL document.");docCache.set(t,stripLoc(processFragments(n)))}return docCache.get(t)}function gql(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];typeof e=="string"&&(e=[e]);var r=e[0];return t.forEach(function(o,a){o&&o.kind==="Document"?r+=o.loc.source.body:r+=o,r+=e[a+1]}),parseDocument(r)}function resetCaches(){docCache.clear(),fragmentSourceMap.clear()}function disableFragmentWarnings(){printFragmentWarnings=!1}function enableExperimentalFragmentVariables(){experimentalFragmentVariables=!0}function disableExperimentalFragmentVariables(){experimentalFragmentVariables=!1}var extras={gql,resetCaches,disableFragmentWarnings,enableExperimentalFragmentVariables,disableExperimentalFragmentVariables};(function(e){e.gql=extras.gql,e.resetCaches=extras.resetCaches,e.disableFragmentWarnings=extras.disableFragmentWarnings,e.enableExperimentalFragmentVariables=extras.enableExperimentalFragmentVariables,e.disableExperimentalFragmentVariables=extras.disableExperimentalFragmentVariables})(gql||(gql={})),gql.default=gql,setVerbosity(DEV?"log":"silent");var core=Object.freeze({__proto__:null,setLogVerbosity:setVerbosity,ApolloClient,mergeOptions,ObservableQuery,get NetworkStatus(){return NetworkStatus},isApolloError,ApolloError,get Cache(){return Cache},ApolloCache,InMemoryCache,MissingFieldError,defaultDataIdFromObject,makeVar,fromError,toPromise,fromPromise,throwServerError,Observable,isReference,makeReference,get gql(){return gql},resetCaches,disableFragmentWarnings,enableExperimentalFragmentVariables,disableExperimentalFragmentVariables,empty,from,split,concat,execute,ApolloLink,parseAndCheckHttpResponse,serializeFetchParameter,fallbackHttpConfig,defaultPrinter,selectHttpOptionsAndBody,selectHttpOptionsAndBodyInternal,checkFetcher,createSignalIfSupported,selectURI,createHttpLink,HttpLink,rewriteURIForGET}),require$$0=getAugmentedNamespace(core),unwrapApolloResult$1={};Object.defineProperty(unwrapApolloResult$1,"__esModule",{value:!0});function unwrapApolloResult(e){if(e.error)throw e.error;if(e.errors)throw e.errors;return e.data}unwrapApolloResult$1.default=unwrapApolloResult;var Agent$1={},typeGraphql$1={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.GraphQLTimestamp=e.GraphQLISODateTime=e.ID=e.Float=e.Int=e.ClassType=e.PubSubEngine=e.UseMiddleware=e.createUnionType=e.Subscription=e.Root=e.Resolver=e.Query=e.PubSub=e.ObjectType=e.Mutation=e.InterfaceType=e.InputType=e.Info=e.FieldResolver=e.Field=e.registerEnumType=e.Ctx=e.Authorized=e.ArgsType=e.Args=e.Arg=e.dummyDecorator=e.dummyFn=e.dummyValue=void 0,e.dummyValue="";function t(){}e.dummyFn=t;function n(){return t}e.dummyDecorator=n,e.Arg=n,e.Args=n,e.ArgsType=n,e.Authorized=n,e.Ctx=n,e.registerEnumType=t,e.Field=n,e.FieldResolver=n,e.Info=n,e.InputType=n,e.InterfaceType=n,e.Mutation=n,e.ObjectType=n,e.PubSub=n,e.Query=n,e.Resolver=n,e.Root=n,e.Subscription=n,e.createUnionType=t,e.UseMiddleware=n,e.PubSubEngine=n;class r{}e.ClassType=r,e.Int=e.dummyValue,e.Float=e.dummyValue,e.ID=e.dummyValue,e.GraphQLISODateTime=e.dummyValue,e.GraphQLTimestamp=e.dummyValue})(typeGraphql$1);var typeGraphql={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.GraphQLTimestamp=e.GraphQLISODateTime=e.ID=e.Float=e.Int=e.ClassType=e.PubSubEngine=e.UseMiddleware=e.createUnionType=e.Subscription=e.Root=e.Resolver=e.Query=e.PubSub=e.ObjectType=e.Mutation=e.InterfaceType=e.InputType=e.Info=e.FieldResolver=e.Field=e.registerEnumType=e.Ctx=e.Authorized=e.ArgsType=e.Args=e.Arg=e.dummyDecorator=e.dummyFn=e.dummyValue=void 0,e.dummyValue="";function t(){}e.dummyFn=t;function n(){return t}e.dummyDecorator=n,e.Arg=n,e.Args=n,e.ArgsType=n,e.Authorized=n,e.Ctx=n,e.registerEnumType=t,e.Field=n,e.FieldResolver=n,e.Info=n,e.InputType=n,e.InterfaceType=n,e.Mutation=n,e.ObjectType=n,e.PubSub=n,e.Query=n,e.Resolver=n,e.Root=n,e.Subscription=n,e.createUnionType=t,e.UseMiddleware=n,e.PubSubEngine=n;class r{}e.ClassType=r,e.Int=e.dummyValue,e.Float=e.dummyValue,e.ID=e.dummyValue,e.GraphQLISODateTime=e.dummyValue,e.GraphQLTimestamp=e.dummyValue})(typeGraphql);var Perspective$1={},Expression$1={},Icon$1={},__decorate$e=commonjsGlobal&&commonjsGlobal.__decorate||function(e,t,n,r){var o=arguments.length,a=o<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(e,t,n,r);else for(var u=e.length-1;u>=0;u--)(s=e[u])&&(a=(o<3?s(a):o>3?s(t,n,a):s(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},__metadata$e=commonjsGlobal&&commonjsGlobal.__metadata||function(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)};Object.defineProperty(Icon$1,"__esModule",{value:!0}),Icon$1.Icon=void 0;var type_graphql_1$e=typeGraphql,Icon=class{constructor(e){this.code=e}};__decorate$e([(0,type_graphql_1$e.Field)(),__metadata$e("design:type",String)],Icon.prototype,"code",void 0),Icon=__decorate$e([(0,type_graphql_1$e.ObjectType)(),__metadata$e("design:paramtypes",[String])],Icon),Icon$1.Icon=Icon;var LanguageRef$1={},__decorate$d=commonjsGlobal&&commonjsGlobal.__decorate||function(e,t,n,r){var o=arguments.length,a=o<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(e,t,n,r);else for(var u=e.length-1;u>=0;u--)(s=e[u])&&(a=(o<3?s(a):o>3?s(t,n,a):s(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},__metadata$d=commonjsGlobal&&commonjsGlobal.__metadata||function(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)};Object.defineProperty(LanguageRef$1,"__esModule",{value:!0}),LanguageRef$1.LanguageRef=void 0;var type_graphql_1$d=typeGraphql,LanguageRef=class{constructor(e,t){this.address=e,this.name=t}};__decorate$d([(0,type_graphql_1$d.Field)(),__metadata$d("design:type",String)],LanguageRef.prototype,"address",void 0),__decorate$d([(0,type_graphql_1$d.Field)(),__metadata$d("design:type",String)],LanguageRef.prototype,"name",void 0),LanguageRef=__decorate$d([(0,type_graphql_1$d.ObjectType)(),__metadata$d("design:paramtypes",[String,String])],LanguageRef),LanguageRef$1.LanguageRef=LanguageRef;var __decorate$c=commonjsGlobal&&commonjsGlobal.__decorate||function(e,t,n,r){var o=arguments.length,a=o<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(e,t,n,r);else for(var u=e.length-1;u>=0;u--)(s=e[u])&&(a=(o<3?s(a):o>3?s(t,n,a):s(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},__metadata$c=commonjsGlobal&&commonjsGlobal.__metadata||function(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)};Object.defineProperty(Expression$1,"__esModule",{value:!0}),Expression$1.isExpression=Expression$1.ExpressionRendered=Expression$1.Expression=Expression$1.ExpressionGenericInput=Expression$1.ExpressionGeneric=Expression$1.ExpressionProofInput=Expression$1.ExpressionProof=void 0;var type_graphql_1$c=typeGraphql,Icon_1$1=Icon$1,LanguageRef_1$1=LanguageRef$1,ExpressionProof=class{constructor(e,t){this.key=t,this.signature=e}};__decorate$c([(0,type_graphql_1$c.Field)(),__metadata$c("design:type",String)],ExpressionProof.prototype,"signature",void 0),__decorate$c([(0,type_graphql_1$c.Field)(),__metadata$c("design:type",String)],ExpressionProof.prototype,"key",void 0),__decorate$c([(0,type_graphql_1$c.Field)({nullable:!0}),__metadata$c("design:type",Boolean)],ExpressionProof.prototype,"valid",void 0),__decorate$c([(0,type_graphql_1$c.Field)({nullable:!0}),__metadata$c("design:type",Boolean)],ExpressionProof.prototype,"invalid",void 0),ExpressionProof=__decorate$c([(0,type_graphql_1$c.ObjectType)(),(0,type_graphql_1$c.InputType)(),__metadata$c("design:paramtypes",[String,String])],ExpressionProof),Expression$1.ExpressionProof=ExpressionProof;var ExpressionProofInput=class{};__decorate$c([(0,type_graphql_1$c.Field)(),__metadata$c("design:type",String)],ExpressionProofInput.prototype,"signature",void 0),__decorate$c([(0,type_graphql_1$c.Field)(),__metadata$c("design:type",String)],ExpressionProofInput.prototype,"key",void 0),__decorate$c([(0,type_graphql_1$c.Field)({nullable:!0}),__metadata$c("design:type",Boolean)],ExpressionProofInput.prototype,"valid",void 0),__decorate$c([(0,type_graphql_1$c.Field)({nullable:!0}),__metadata$c("design:type",Boolean)],ExpressionProofInput.prototype,"invalid",void 0),ExpressionProofInput=__decorate$c([(0,type_graphql_1$c.InputType)()],ExpressionProofInput),Expression$1.ExpressionProofInput=ExpressionProofInput;function ExpressionGeneric(e){let t=class{constructor(n,r,o,a){this.author=n,this.timestamp=r,this.data=o,this.proof=a}};return __decorate$c([(0,type_graphql_1$c.Field)(),__metadata$c("design:type",String)],t.prototype,"author",void 0),__decorate$c([(0,type_graphql_1$c.Field)(),__metadata$c("design:type",String)],t.prototype,"timestamp",void 0),__decorate$c([(0,type_graphql_1$c.Field)(n=>e),__metadata$c("design:type",Object)],t.prototype,"data",void 0),__decorate$c([(0,type_graphql_1$c.Field)(),__metadata$c("design:type",ExpressionProof)],t.prototype,"proof",void 0),t=__decorate$c([(0,type_graphql_1$c.ObjectType)(),__metadata$c("design:paramtypes",[String,String,Object,ExpressionProof])],t),t}Expression$1.ExpressionGeneric=ExpressionGeneric;function ExpressionGenericInput(e){let t=class{};return __decorate$c([(0,type_graphql_1$c.Field)(),__metadata$c("design:type",String)],t.prototype,"author",void 0),__decorate$c([(0,type_graphql_1$c.Field)(),__metadata$c("design:type",String)],t.prototype,"timestamp",void 0),__decorate$c([(0,type_graphql_1$c.Field)(n=>e),__metadata$c("design:type",Object)],t.prototype,"data",void 0),__decorate$c([(0,type_graphql_1$c.Field)(),__metadata$c("design:type",ExpressionProofInput)],t.prototype,"proof",void 0),t=__decorate$c([(0,type_graphql_1$c.InputType)()],t),t}Expression$1.ExpressionGenericInput=ExpressionGenericInput;var Expression=class extends ExpressionGeneric(Object){};Expression=__decorate$c([(0,type_graphql_1$c.ObjectType)()],Expression),Expression$1.Expression=Expression;var ExpressionRendered=class extends ExpressionGeneric(String){};__decorate$c([(0,type_graphql_1$c.Field)(),__metadata$c("design:type",LanguageRef_1$1.LanguageRef)],ExpressionRendered.prototype,"language",void 0),__decorate$c([(0,type_graphql_1$c.Field)(),__metadata$c("design:type",Icon_1$1.Icon)],ExpressionRendered.prototype,"icon",void 0),ExpressionRendered=__decorate$c([(0,type_graphql_1$c.ObjectType)()],ExpressionRendered),Expression$1.ExpressionRendered=ExpressionRendered;function isExpression(e){return e&&e.author&&e.timestamp&&e.data}Expression$1.isExpression=isExpression;var Links={},__decorate$b=commonjsGlobal&&commonjsGlobal.__decorate||function(e,t,n,r){var o=arguments.length,a=o<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(e,t,n,r);else for(var u=e.length-1;u>=0;u--)(s=e[u])&&(a=(o<3?s(a):o>3?s(t,n,a):s(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},__metadata$b=commonjsGlobal&&commonjsGlobal.__metadata||function(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)};Object.defineProperty(Links,"__esModule",{value:!0}),Links.isLink=Links.linkEqual=Links.LinkExpressionInput=Links.LinkExpression=Links.LinkInput=Links.Link=void 0;var type_graphql_1$b=typeGraphql,Expression_1$5=Expression$1,Link=class{constructor(e){this.source=e.source?e.source:"",this.target=e.target?e.target:"",this.predicate=e.predicate?e.predicate:""}};__decorate$b([(0,type_graphql_1$b.Field)(),__metadata$b("design:type",String)],Link.prototype,"source",void 0),__decorate$b([(0,type_graphql_1$b.Field)(),__metadata$b("design:type",String)],Link.prototype,"target",void 0),__decorate$b([(0,type_graphql_1$b.Field)({nullable:!0}),__metadata$b("design:type",String)],Link.prototype,"predicate",void 0),Link=__decorate$b([(0,type_graphql_1$b.ObjectType)(),__metadata$b("design:paramtypes",[Object])],Link),Links.Link=Link;var LinkInput=class{};__decorate$b([(0,type_graphql_1$b.Field)(),__metadata$b("design:type",String)],LinkInput.prototype,"source",void 0),__decorate$b([(0,type_graphql_1$b.Field)(),__metadata$b("design:type",String)],LinkInput.prototype,"target",void 0),__decorate$b([(0,type_graphql_1$b.Field)({nullable:!0}),__metadata$b("design:type",String)],LinkInput.prototype,"predicate",void 0),LinkInput=__decorate$b([(0,type_graphql_1$b.InputType)()],LinkInput),Links.LinkInput=LinkInput;var LinkExpression=class extends(0,Expression_1$5.ExpressionGeneric)(Link){hash(){let e=JSON.stringify(this.data,Object.keys(this.data).sort())+JSON.stringify(this.author)+this.timestamp,t=0,n,r;for(n=0;n<e.length;n++)r=e.charCodeAt(n),t=(t<<5)-t+r,t|=0;return t}};LinkExpression=__decorate$b([(0,type_graphql_1$b.ObjectType)()],LinkExpression),Links.LinkExpression=LinkExpression;var LinkExpressionInput=class extends(0,Expression_1$5.ExpressionGenericInput)(LinkInput){};LinkExpressionInput=__decorate$b([(0,type_graphql_1$b.InputType)()],LinkExpressionInput),Links.LinkExpressionInput=LinkExpressionInput;function linkEqual(e,t){return e.author==t.author&&e.timestamp==t.timestamp&&e.data.source==t.data.source&&e.data.predicate==t.data.predicate&&e.data.target==t.data.target}Links.linkEqual=linkEqual;function isLink(e){return e&&e.source&&e.target}Links.isLink=isLink;var __decorate$a=commonjsGlobal&&commonjsGlobal.__decorate||function(e,t,n,r){var o=arguments.length,a=o<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(e,t,n,r);else for(var u=e.length-1;u>=0;u--)(s=e[u])&&(a=(o<3?s(a):o>3?s(t,n,a):s(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},__metadata$a=commonjsGlobal&&commonjsGlobal.__metadata||function(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)};Object.defineProperty(Perspective$1,"__esModule",{value:!0}),Perspective$1.PerspectiveExpression=Perspective$1.PerspectiveInput=Perspective$1.Perspective=void 0;var type_graphql_1$a=typeGraphql,Expression_1$4=Expression$1,Links_1$2=Links,Perspective=class{constructor(e){e?this.links=e:this.links=[]}get(e){if(!e||!e.source&&!e.predicate&&!e.target)return this.links;if(e.source){let n=JSON.parse(JSON.stringify(this.links));return e.target&&(n=n.filter(r=>r.data.target===e.target)),e.predicate&&(n=n.filter(r=>r.data.predicate===e.predicate)),e.fromDate&&(n=n.filter(r=>new Date(r.timestamp)>=e.fromDate)),e.untilDate&&(n=n.filter(r=>new Date(r.timestamp)<=e.untilDate)),e.limit&&(n=n.slice(0,e.limit)),n}if(e.target){let n=JSON.parse(JSON.stringify(this.links));return e.predicate&&(n=n.filter(r=>r.data.predicate===e.predicate)),e.fromDate&&(n=n.filter(r=>new Date(r.timestamp)>=e.fromDate)),e.untilDate&&(n=n.filter(r=>new Date(r.timestamp)<=e.untilDate)),e.limit&&(n=n.slice(0,e.limit)),n}let t=JSON.parse(JSON.stringify(this.links));return t=t.filter(n=>n.data.predicate===e.predicate),e.limit&&(t=t.slice(0,e.limit)),t}getSingleTarget(e){delete e.target;let t=this.get(e);return t.length?t[0].data.target:null}};__decorate$a([(0,type_graphql_1$a.Field)(e=>[Links_1$2.LinkExpression]),__metadata$a("design:type",Array)],Perspective.prototype,"links",void 0),Perspective=__decorate$a([(0,type_graphql_1$a.ObjectType)(),__metadata$a("design:paramtypes",[Array])],Perspective),Perspective$1.Perspective=Perspective;var PerspectiveInput=class{};__decorate$a([(0,type_graphql_1$a.Field)(e=>[Links_1$2.LinkExpressionInput]),__metadata$a("design:type",Array)],PerspectiveInput.prototype,"links",void 0),PerspectiveInput=__decorate$a([(0,type_graphql_1$a.InputType)()],PerspectiveInput),Perspective$1.PerspectiveInput=PerspectiveInput;var PerspectiveExpression=class extends(0,Expression_1$4.ExpressionGeneric)(Perspective){};PerspectiveExpression=__decorate$a([(0,type_graphql_1$a.ObjectType)()],PerspectiveExpression),Perspective$1.PerspectiveExpression=PerspectiveExpression;var __decorate$9=commonjsGlobal&&commonjsGlobal.__decorate||function(e,t,n,r){var o=arguments.length,a=o<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(e,t,n,r);else for(var u=e.length-1;u>=0;u--)(s=e[u])&&(a=(o<3?s(a):o>3?s(t,n,a):s(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},__metadata$9=commonjsGlobal&&commonjsGlobal.__metadata||function(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)};Object.defineProperty(Agent$1,"__esModule",{value:!0}),Agent$1.EntanglementProofInput=Agent$1.EntanglementProof=Agent$1.AgentExpression=Agent$1.Agent=void 0;var type_graphql_1$9=typeGraphql,Perspective_1$1=Perspective$1,Expression_1$3=Expression$1,Agent=class{constructor(e,t){this.did=e,t?this.perspective=t:this.perspective=new Perspective_1$1.Perspective}};__decorate$9([(0,type_graphql_1$9.Field)(),__metadata$9("design:type",String)],Agent.prototype,"did",void 0),__decorate$9([(0,type_graphql_1$9.Field)(e=>Perspective_1$1.Perspective,{nullable:!0}),__metadata$9("design:type",Perspective_1$1.Perspective)],Agent.prototype,"perspective",void 0),__decorate$9([(0,type_graphql_1$9.Field)({nullable:!0}),__metadata$9("design:type",String)],Agent.prototype,"directMessageLanguage",void 0),Agent=__decorate$9([(0,type_graphql_1$9.ObjectType)(),__metadata$9("design:paramtypes",[String,Perspective_1$1.Perspective])],Agent),Agent$1.Agent=Agent;var AgentExpression=class extends(0,Expression_1$3.ExpressionGeneric)(Agent){};AgentExpression=__decorate$9([(0,type_graphql_1$9.ObjectType)()],AgentExpression),Agent$1.AgentExpression=AgentExpression;var EntanglementProof=class{constructor(e,t,n,r,o,a){this.did=e,this.didSigningKeyId=t,this.deviceKeyType=n,this.deviceKey=r,this.deviceKeySignedByDid=o,this.didSignedByDeviceKey=a}};__decorate$9([(0,type_graphql_1$9.Field)(),__metadata$9("design:type",String)],EntanglementProof.prototype,"did",void 0),__decorate$9([(0,type_graphql_1$9.Field)(),__metadata$9("design:type",String)],EntanglementProof.prototype,"didSigningKeyId",void 0),__decorate$9([(0,type_graphql_1$9.Field)(),__metadata$9("design:type",String)],EntanglementProof.prototype,"deviceKeyType",void 0),__decorate$9([(0,type_graphql_1$9.Field)(),__metadata$9("design:type",String)],EntanglementProof.prototype,"deviceKey",void 0),__decorate$9([(0,type_graphql_1$9.Field)(),__metadata$9("design:type",String)],EntanglementProof.prototype,"deviceKeySignedByDid",void 0),__decorate$9([(0,type_graphql_1$9.Field)({nullable:!0}),__metadata$9("design:type",String)],EntanglementProof.prototype,"didSignedByDeviceKey",void 0),EntanglementProof=__decorate$9([(0,type_graphql_1$9.ObjectType)(),__metadata$9("design:paramtypes",[String,String,String,String,String,String])],EntanglementProof),Agent$1.EntanglementProof=EntanglementProof;var EntanglementProofInput=class{constructor(e,t,n,r,o,a){this.did=e,this.didSigningKeyId=t,this.deviceKeyType=n,this.deviceKey=r,this.deviceKeySignedByDid=o,this.didSignedByDeviceKey=a}};__decorate$9([(0,type_graphql_1$9.Field)(),__metadata$9("design:type",String)],EntanglementProofInput.prototype,"did",void 0),__decorate$9([(0,type_graphql_1$9.Field)(),__metadata$9("design:type",String)],EntanglementProofInput.prototype,"didSigningKeyId",void 0),__decorate$9([(0,type_graphql_1$9.Field)(),__metadata$9("design:type",String)],EntanglementProofInput.prototype,"deviceKeyType",void 0),__decorate$9([(0,type_graphql_1$9.Field)(),__metadata$9("design:type",String)],EntanglementProofInput.prototype,"deviceKey",void 0),__decorate$9([(0,type_graphql_1$9.Field)(),__metadata$9("design:type",String)],EntanglementProofInput.prototype,"deviceKeySignedByDid",void 0),__decorate$9([(0,type_graphql_1$9.Field)(),__metadata$9("design:type",String)],EntanglementProofInput.prototype,"didSignedByDeviceKey",void 0),EntanglementProofInput=__decorate$9([(0,type_graphql_1$9.InputType)(),__metadata$9("design:paramtypes",[String,String,String,String,String,String])],EntanglementProofInput),Agent$1.EntanglementProofInput=EntanglementProofInput;var AgentStatus$1={},__decorate$8=commonjsGlobal&&commonjsGlobal.__decorate||function(e,t,n,r){var o=arguments.length,a=o<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(e,t,n,r);else for(var u=e.length-1;u>=0;u--)(s=e[u])&&(a=(o<3?s(a):o>3?s(t,n,a):s(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},__metadata$8=commonjsGlobal&&commonjsGlobal.__metadata||function(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)};Object.defineProperty(AgentStatus$1,"__esModule",{value:!0}),AgentStatus$1.AgentStatus=void 0;var type_graphql_1$8=typeGraphql,AgentStatus=class{constructor(e){e?(this.isInitialized=e.isInitialized,this.isInitialized||(this.isInitialized=!1),this.isUnlocked=e.isUnlocked,this.isUnlocked||(this.isUnlocked=!1),this.did=e.did,this.didDocument=e.didDocument,this.error=e.error):(this.isInitialized=!1,this.isUnlocked=!1)}};__decorate$8([(0,type_graphql_1$8.Field)(),__metadata$8("design:type",Boolean)],AgentStatus.prototype,"isInitialized",void 0),__decorate$8([(0,type_graphql_1$8.Field)(),__metadata$8("design:type",Boolean)],AgentStatus.prototype,"isUnlocked",void 0),__decorate$8([(0,type_graphql_1$8.Field)({nullable:!0}),__metadata$8("design:type",String)],AgentStatus.prototype,"did",void 0),__decorate$8([(0,type_graphql_1$8.Field)({nullable:!0}),__metadata$8("design:type",String)],AgentStatus.prototype,"didDocument",void 0),__decorate$8([(0,type_graphql_1$8.Field)({nullable:!0}),__metadata$8("design:type",String)],AgentStatus.prototype,"error",void 0),AgentStatus=__decorate$8([(0,type_graphql_1$8.ObjectType)(),__metadata$8("design:paramtypes",[Object])],AgentStatus),AgentStatus$1.AgentStatus=AgentStatus;var __classPrivateFieldSet$8=commonjsGlobal&&commonjsGlobal.__classPrivateFieldSet||function(e,t,n,r,o){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?o.call(e,n):o?o.value=n:t.set(e,n),n},__classPrivateFieldGet$8=commonjsGlobal&&commonjsGlobal.__classPrivateFieldGet||function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},__importDefault$6=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},_AgentClient_apolloClient,_AgentClient_updatedCallbacks,_AgentClient_agentStatusChangedCallbacks;Object.defineProperty(AgentClient$1,"__esModule",{value:!0});var core_1$5=require$$0,unwrapApolloResult_1$5=__importDefault$6(unwrapApolloResult$1),Agent_1=Agent$1,AgentStatus_1=AgentStatus$1,AGENT_SUBITEMS=`
    did
    directMessageLanguage
    perspective { 
        links {
            author, timestamp, 
            proof {
                signature, key, valid, invalid
            }
            data {
                source, predicate, target
            }
        }
    }
`,AGENT_STATUS_FIELDS=`
    isInitialized
    isUnlocked
    did
    didDocument
    error
`,ENTANGLEMENT_PROOF_FIELDS=`
    did
    didSigningKeyId
    deviceKeyType
    deviceKey
    deviceKeySignedByDid
    didSignedByDeviceKey
`,AgentClient=class{constructor(e,t=!0){_AgentClient_apolloClient.set(this,void 0),_AgentClient_updatedCallbacks.set(this,void 0),_AgentClient_agentStatusChangedCallbacks.set(this,void 0),__classPrivateFieldSet$8(this,_AgentClient_apolloClient,e,"f"),__classPrivateFieldSet$8(this,_AgentClient_updatedCallbacks,[],"f"),__classPrivateFieldSet$8(this,_AgentClient_agentStatusChangedCallbacks,[],"f"),t&&(this.subscribeAgentUpdated(),this.subscribeAgentStatusChanged())}async me(){let{agent:e}=(0,unwrapApolloResult_1$5.default)(await __classPrivateFieldGet$8(this,_AgentClient_apolloClient,"f").query({query:(0,core_1$5.gql)`query agent { agent { ${AGENT_SUBITEMS} } }`})),t=new Agent_1.Agent(e.did,e.perspective);return t.directMessageLanguage=e.directMessageLanguage,t}async status(){let{agentStatus:e}=(0,unwrapApolloResult_1$5.default)(await __classPrivateFieldGet$8(this,_AgentClient_apolloClient,"f").query({query:(0,core_1$5.gql)`query agentStatus {
                agentStatus {
                    ${AGENT_STATUS_FIELDS}
                }
            }`}));return new AgentStatus_1.AgentStatus(e)}async generate(e){let{agentGenerate:t}=(0,unwrapApolloResult_1$5.default)(await __classPrivateFieldGet$8(this,_AgentClient_apolloClient,"f").mutate({mutation:(0,core_1$5.gql)`mutation agentGenerate(
                $passphrase: String!
            ) {
                agentGenerate(passphrase: $passphrase) {
                    ${AGENT_STATUS_FIELDS}
                }
            }`,variables:{passphrase:e}}));return new AgentStatus_1.AgentStatus(t)}async import(e){let{did:t,didDocument:n,keystore:r,passphrase:o}=e,{agentImport:a}=(0,unwrapApolloResult_1$5.default)(await __classPrivateFieldGet$8(this,_AgentClient_apolloClient,"f").mutate({mutation:(0,core_1$5.gql)`mutation agentImport(
                $did: String!,
                $didDocument: String!,
                $keystore: String!,
                $passphrase: String!
            ) {
                agentImport(did: $did, didDocument: $didDocument, keystore: $keystore, passphrase: $passphrase) {
                    ${AGENT_STATUS_FIELDS}
                }
            }`,variables:{did:t,didDocument:n,keystore:r,passphrase:o}}));return new AgentStatus_1.AgentStatus(a)}async lock(e){let{agentLock:t}=(0,unwrapApolloResult_1$5.default)(await __classPrivateFieldGet$8(this,_AgentClient_apolloClient,"f").mutate({mutation:(0,core_1$5.gql)`mutation agentLock($passphrase: String!) {
                agentLock(passphrase: $passphrase) {
                    ${AGENT_STATUS_FIELDS}
                }
            }`,variables:{passphrase:e}}));return new AgentStatus_1.AgentStatus(t)}async unlock(e){let{agentUnlock:t}=(0,unwrapApolloResult_1$5.default)(await __classPrivateFieldGet$8(this,_AgentClient_apolloClient,"f").mutate({mutation:(0,core_1$5.gql)`mutation agentUnlock($passphrase: String!) {
                agentUnlock(passphrase: $passphrase) {
                    ${AGENT_STATUS_FIELDS}
                }
            }`,variables:{passphrase:e}}));return new AgentStatus_1.AgentStatus(t)}async byDID(e){let{agentByDID:t}=(0,unwrapApolloResult_1$5.default)(await __classPrivateFieldGet$8(this,_AgentClient_apolloClient,"f").query({query:(0,core_1$5.gql)`query agentByDID($did: String!) {
                agentByDID(did: $did) {
                    ${AGENT_SUBITEMS}
                }
            }`,variables:{did:e}}));return t}async updatePublicPerspective(e){let{agentUpdatePublicPerspective:t}=(0,unwrapApolloResult_1$5.default)(await __classPrivateFieldGet$8(this,_AgentClient_apolloClient,"f").mutate({mutation:(0,core_1$5.gql)`mutation agentUpdatePublicPerspective($perspective: PerspectiveInput!) {
                agentUpdatePublicPerspective(perspective: $perspective) {
                    ${AGENT_SUBITEMS}
                }
            }`,variables:{perspective:e}})),n=t,r=new Agent_1.Agent(n.did,n.perspective);return r.directMessageLanguage=n.directMessageLanguage,r}async updateDirectMessageLanguage(e){let{agentUpdateDirectMessageLanguage:t}=(0,unwrapApolloResult_1$5.default)(await __classPrivateFieldGet$8(this,_AgentClient_apolloClient,"f").mutate({mutation:(0,core_1$5.gql)`mutation agentUpdateDirectMessageLanguage($directMessageLanguage: String!) {
                agentUpdateDirectMessageLanguage(directMessageLanguage: $directMessageLanguage) {
                    ${AGENT_SUBITEMS}
                }
            }`,variables:{directMessageLanguage:e}})),n=t,r=new Agent_1.Agent(n.did,n.perspective);return r.directMessageLanguage=n.directMessageLanguage,r}async addEntanglementProofs(e){let{agentAddEntanglementProofs:t}=(0,unwrapApolloResult_1$5.default)(await __classPrivateFieldGet$8(this,_AgentClient_apolloClient,"f").mutate({mutation:(0,core_1$5.gql)`mutation agentAddEntanglementProofs($proofs: [EntanglementProofInput!]!) {
                agentAddEntanglementProofs(proofs: $proofs) {
                    ${ENTANGLEMENT_PROOF_FIELDS}
                }
            }`,variables:{proofs:e}}));return t}async deleteEntanglementProofs(e){let{agentDeleteEntanglementProofs:t}=(0,unwrapApolloResult_1$5.default)(await __classPrivateFieldGet$8(this,_AgentClient_apolloClient,"f").mutate({mutation:(0,core_1$5.gql)`mutation agentDeleteEntanglementProofs($proofs: [EntanglementProofInput!]!) {
                agentDeleteEntanglementProofs(proofs: $proofs) {
                    ${ENTANGLEMENT_PROOF_FIELDS}
                }
            }`,variables:{proofs:e}}));return t}async getEntanglementProofs(){let{agentGetEntanglementProofs:e}=(0,unwrapApolloResult_1$5.default)(await __classPrivateFieldGet$8(this,_AgentClient_apolloClient,"f").query({query:(0,core_1$5.gql)`query agentGetEntanglementProofs {
                agentGetEntanglementProofs {
                    ${ENTANGLEMENT_PROOF_FIELDS}
                }
            }`}));return e}async entanglementProofPreFlight(e,t){let{agentEntanglementProofPreFlight:n}=(0,unwrapApolloResult_1$5.default)(await __classPrivateFieldGet$8(this,_AgentClient_apolloClient,"f").mutate({mutation:(0,core_1$5.gql)`mutation agentEntanglementProofPreFlight($deviceKey: String!, $deviceKeyType: String!) {
                agentEntanglementProofPreFlight(deviceKey: $deviceKey, deviceKeyType: $deviceKeyType) {
                    ${ENTANGLEMENT_PROOF_FIELDS}
                }
            }`,variables:{deviceKey:e,deviceKeyType:t}}));return n}addUpdatedListener(e){__classPrivateFieldGet$8(this,_AgentClient_updatedCallbacks,"f").push(e)}subscribeAgentUpdated(){__classPrivateFieldGet$8(this,_AgentClient_apolloClient,"f").subscribe({query:(0,core_1$5.gql)` subscription {
                agentUpdated { ${AGENT_SUBITEMS} }
            }   
        `}).subscribe({next:e=>{let t=e.data.agentUpdated;__classPrivateFieldGet$8(this,_AgentClient_updatedCallbacks,"f").forEach(n=>{n(t)})},error:e=>console.error(e)})}addAgentStatusChangedListener(e){__classPrivateFieldGet$8(this,_AgentClient_agentStatusChangedCallbacks,"f").push(e)}subscribeAgentStatusChanged(){__classPrivateFieldGet$8(this,_AgentClient_apolloClient,"f").subscribe({query:(0,core_1$5.gql)` subscription {
                agentStatusChanged { ${AGENT_STATUS_FIELDS} }
            }   
        `}).subscribe({next:e=>{let t=e.data.agentStatusChanged;__classPrivateFieldGet$8(this,_AgentClient_agentStatusChangedCallbacks,"f").forEach(n=>{n(t)})},error:e=>console.error(e)})}async requestCapability(e,t,n,r){let{agentRequestCapability:o}=(0,unwrapApolloResult_1$5.default)(await __classPrivateFieldGet$8(this,_AgentClient_apolloClient,"f").mutate({mutation:(0,core_1$5.gql)`mutation agentRequestCapability($appName: String!, $appDesc: String!, $appUrl: String!, $capabilities: String!) {
                agentRequestCapability(appName: $appName, appDesc: $appDesc, appUrl: $appUrl, capabilities: $capabilities)
            }`,variables:{appName:e,appDesc:t,appUrl:n,capabilities:r}}));return o}async permitCapability(e){let{agentPermitCapability:t}=(0,unwrapApolloResult_1$5.default)(await __classPrivateFieldGet$8(this,_AgentClient_apolloClient,"f").mutate({mutation:(0,core_1$5.gql)`mutation agentPermitCapability($auth: String!) {
                agentPermitCapability(auth: $auth)
            }`,variables:{auth:e}}));return t}async generateJwt(e,t){let{agentGenerateJwt:n}=(0,unwrapApolloResult_1$5.default)(await __classPrivateFieldGet$8(this,_AgentClient_apolloClient,"f").mutate({mutation:(0,core_1$5.gql)`mutation agentGenerateJwt($requestId: String!, $rand: String!) {
                agentGenerateJwt(requestId: $requestId, rand: $rand)
            }`,variables:{requestId:e,rand:t}}));return n}};AgentClient$1.default=AgentClient,_AgentClient_apolloClient=new WeakMap,_AgentClient_updatedCallbacks=new WeakMap,_AgentClient_agentStatusChangedCallbacks=new WeakMap;var LanguageClient$1={},__classPrivateFieldSet$7=commonjsGlobal&&commonjsGlobal.__classPrivateFieldSet||function(e,t,n,r,o){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?o.call(e,n):o?o.value=n:t.set(e,n),n},__classPrivateFieldGet$7=commonjsGlobal&&commonjsGlobal.__classPrivateFieldGet||function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},__importDefault$5=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},_LanguageClient_apolloClient;Object.defineProperty(LanguageClient$1,"__esModule",{value:!0}),LanguageClient$1.LanguageClient=void 0;var core_1$4=require$$0,unwrapApolloResult_1$4=__importDefault$5(unwrapApolloResult$1),LANGUAGE_COMPLETE=`
    name
    address
    settings
    icon { code }
    constructorIcon { code }
    settingsIcon { code }
`,LANGUAGE_META=`
    name
    address
    description
    author
    templated
    templateSourceLanguageAddress
    templateAppliedParams
    possibleTemplateParams
    sourceCodeLink
`,LanguageClient=class{constructor(e){_LanguageClient_apolloClient.set(this,void 0),__classPrivateFieldSet$7(this,_LanguageClient_apolloClient,e,"f")}async byAddress(e){let{language:t}=(0,unwrapApolloResult_1$4.default)(await __classPrivateFieldGet$7(this,_LanguageClient_apolloClient,"f").query({query:(0,core_1$4.gql)`query byAddress($address: String!) {
                language(address: $address) {
                    ${LANGUAGE_COMPLETE}
                }
            }`,variables:{address:e}}));return t}async byFilter(e){let{languages:t}=(0,unwrapApolloResult_1$4.default)(await __classPrivateFieldGet$7(this,_LanguageClient_apolloClient,"f").query({query:(0,core_1$4.gql)`query byFilter($filter: String!) {
                languages(filter: $filter) {
                    ${LANGUAGE_COMPLETE}
                }
            }`,variables:{filter:e}}));return t}async all(){return this.byFilter("")}async writeSettings(e,t){let{languageWriteSettings:n}=(0,unwrapApolloResult_1$4.default)(await __classPrivateFieldGet$7(this,_LanguageClient_apolloClient,"f").mutate({mutation:(0,core_1$4.gql)`mutation writeSettings($languageAddress: String!, $settings: String!) {
                languageWriteSettings(languageAddress: $languageAddress, settings: $settings)
            }`,variables:{languageAddress:e,settings:t}}));return n}async applyTemplateAndPublish(e,t){let{languageApplyTemplateAndPublish:n}=(0,unwrapApolloResult_1$4.default)(await __classPrivateFieldGet$7(this,_LanguageClient_apolloClient,"f").mutate({mutation:(0,core_1$4.gql)`mutation languageApplyTemplateAndPublish(
                $sourceLanguageHash: String!,
                $templateData: String!,
            ) {
                languageApplyTemplateAndPublish(sourceLanguageHash: $sourceLanguageHash, templateData: $templateData) {
                    name, address
                }
            }`,variables:{sourceLanguageHash:e,templateData:t}}));return n}async publish(e,t){let{languagePublish:n}=(0,unwrapApolloResult_1$4.default)(await __classPrivateFieldGet$7(this,_LanguageClient_apolloClient,"f").mutate({mutation:(0,core_1$4.gql)`mutation languagePublish(
                $languagePath: String!,
                $languageMeta: LanguageMetaInput!,
            ) {
                languagePublish(languagePath: $languagePath, languageMeta: $languageMeta) {
                    ${LANGUAGE_META}
                }
            }`,variables:{languagePath:e,languageMeta:t}}));return n}async meta(e){let{languageMeta:t}=(0,unwrapApolloResult_1$4.default)(await __classPrivateFieldGet$7(this,_LanguageClient_apolloClient,"f").query({query:(0,core_1$4.gql)`query languageMeta(
                $address: String!,
            ) {
                languageMeta(address: $address) {
                    ${LANGUAGE_META}
                }
            }`,variables:{address:e}}));return t}async source(e){let{languageSource:t}=(0,unwrapApolloResult_1$4.default)(await __classPrivateFieldGet$7(this,_LanguageClient_apolloClient,"f").query({query:(0,core_1$4.gql)`query languageSource(
                $address: String!,
            ) {
                languageSource(address: $address)
            }`,variables:{address:e}}));return t}};LanguageClient$1.LanguageClient=LanguageClient,_LanguageClient_apolloClient=new WeakMap;var NeighbourhoodClient$1={},__classPrivateFieldSet$6=commonjsGlobal&&commonjsGlobal.__classPrivateFieldSet||function(e,t,n,r,o){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?o.call(e,n):o?o.value=n:t.set(e,n),n},__classPrivateFieldGet$6=commonjsGlobal&&commonjsGlobal.__classPrivateFieldGet||function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},__importDefault$4=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},_NeighbourhoodClient_apolloClient;Object.defineProperty(NeighbourhoodClient$1,"__esModule",{value:!0});var core_1$3=require$$0,unwrapApolloResult_1$3=__importDefault$4(unwrapApolloResult$1),NeighbourhoodClient=class{constructor(e){_NeighbourhoodClient_apolloClient.set(this,void 0),__classPrivateFieldSet$6(this,_NeighbourhoodClient_apolloClient,e,"f")}async publishFromPerspective(e,t,n){let{neighbourhoodPublishFromPerspective:r}=(0,unwrapApolloResult_1$3.default)(await __classPrivateFieldGet$6(this,_NeighbourhoodClient_apolloClient,"f").mutate({mutation:(0,core_1$3.gql)`mutation neighbourhoodPublishFromPerspective(
                $linkLanguage: String!,
                $meta: PerspectiveInput!,
                $perspectiveUUID: String!
            ) {
                neighbourhoodPublishFromPerspective(
                    linkLanguage: $linkLanguage,
                    meta: $meta,
                    perspectiveUUID: $perspectiveUUID
                )
            }`,variables:{perspectiveUUID:e,linkLanguage:t,meta:n}}));return r}async joinFromUrl(e){let{neighbourhoodJoinFromUrl:t}=(0,unwrapApolloResult_1$3.default)(await __classPrivateFieldGet$6(this,_NeighbourhoodClient_apolloClient,"f").mutate({mutation:(0,core_1$3.gql)`    mutation neighbourhoodJoinFromUrl($url: String!) {
                neighbourhoodJoinFromUrl(url: $url) {
                    uuid
                    name
                    sharedUrl
                    neighbourhood { 
                        linkLanguage 
                        meta { 
                            links
                                {
                                    author
                                    timestamp
                                    data { source, predicate, target }
                                    proof { valid, invalid, signature, key }
                                }  
                        } 
                    }
                }
            }`,variables:{url:e}}));return t}};NeighbourhoodClient$1.default=NeighbourhoodClient,_NeighbourhoodClient_apolloClient=new WeakMap;var PerspectiveClient$1={},PerspectiveProxy$1={},LinkQuery$1={},__decorate$7=commonjsGlobal&&commonjsGlobal.__decorate||function(e,t,n,r){var o=arguments.length,a=o<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(e,t,n,r);else for(var u=e.length-1;u>=0;u--)(s=e[u])&&(a=(o<3?s(a):o>3?s(t,n,a):s(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},__metadata$7=commonjsGlobal&&commonjsGlobal.__metadata||function(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)};Object.defineProperty(LinkQuery$1,"__esModule",{value:!0}),LinkQuery$1.LinkQuery=void 0;var type_graphql_1$7=typeGraphql,LinkQuery=class{constructor(e){e&&(this.source=e.source,this.predicate=e.predicate,this.target=e.target,e.fromDate&&(this.fromDate=e.fromDate),e.untilDate&&(this.untilDate=e.untilDate),e.limit&&(this.limit=e.limit))}isMatch(e){return!(this.source&&this.source!==e.source||this.predicate&&this.predicate!==e.predicate||this.target&&this.target!==e.target)}};__decorate$7([(0,type_graphql_1$7.Field)({nullable:!0}),__metadata$7("design:type",String)],LinkQuery.prototype,"source",void 0),__decorate$7([(0,type_graphql_1$7.Field)({nullable:!0}),__metadata$7("design:type",String)],LinkQuery.prototype,"target",void 0),__decorate$7([(0,type_graphql_1$7.Field)({nullable:!0}),__metadata$7("design:type",String)],LinkQuery.prototype,"predicate",void 0),__decorate$7([(0,type_graphql_1$7.Field)({nullable:!0}),__metadata$7("design:type",Date)],LinkQuery.prototype,"fromDate",void 0),__decorate$7([(0,type_graphql_1$7.Field)({nullable:!0}),__metadata$7("design:type",Date)],LinkQuery.prototype,"untilDate",void 0),__decorate$7([(0,type_graphql_1$7.Field)({nullable:!0}),__metadata$7("design:type",Number)],LinkQuery.prototype,"limit",void 0),LinkQuery=__decorate$7([(0,type_graphql_1$7.ObjectType)(),(0,type_graphql_1$7.InputType)(),__metadata$7("design:paramtypes",[Object])],LinkQuery),LinkQuery$1.LinkQuery=LinkQuery;var __classPrivateFieldSet$5=commonjsGlobal&&commonjsGlobal.__classPrivateFieldSet||function(e,t,n,r,o){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?o.call(e,n):o?o.value=n:t.set(e,n),n},__classPrivateFieldGet$5=commonjsGlobal&&commonjsGlobal.__classPrivateFieldGet||function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},_PerspectiveProxy_handle,_PerspectiveProxy_client,_PerspectiveProxy_perspectiveLinkAddedCallbacks,_PerspectiveProxy_perspectiveLinkRemovedCallbacks,_PerspectiveProxy_executeAction;Object.defineProperty(PerspectiveProxy$1,"__esModule",{value:!0}),PerspectiveProxy$1.PerspectiveProxy=void 0;var Links_1$1=Links,LinkQuery_1=LinkQuery$1,PerspectiveProxy=class{constructor(e,t){_PerspectiveProxy_handle.set(this,void 0),_PerspectiveProxy_client.set(this,void 0),_PerspectiveProxy_perspectiveLinkAddedCallbacks.set(this,void 0),_PerspectiveProxy_perspectiveLinkRemovedCallbacks.set(this,void 0),_PerspectiveProxy_executeAction.set(this,void 0),__classPrivateFieldSet$5(this,_PerspectiveProxy_perspectiveLinkAddedCallbacks,[],"f"),__classPrivateFieldSet$5(this,_PerspectiveProxy_perspectiveLinkRemovedCallbacks,[],"f"),__classPrivateFieldSet$5(this,_PerspectiveProxy_handle,e,"f"),__classPrivateFieldSet$5(this,_PerspectiveProxy_client,t,"f"),__classPrivateFieldGet$5(this,_PerspectiveProxy_client,"f").addPerspectiveLinkAddedListener(__classPrivateFieldGet$5(this,_PerspectiveProxy_handle,"f").uuid,__classPrivateFieldGet$5(this,_PerspectiveProxy_perspectiveLinkAddedCallbacks,"f")),__classPrivateFieldGet$5(this,_PerspectiveProxy_client,"f").addPerspectiveLinkRemovedListener(__classPrivateFieldGet$5(this,_PerspectiveProxy_handle,"f").uuid,__classPrivateFieldGet$5(this,_PerspectiveProxy_perspectiveLinkRemovedCallbacks,"f")),__classPrivateFieldSet$5(this,_PerspectiveProxy_executeAction,async(n,r)=>{console.log("execute:",n);let o=a=>{if(a)return a.replace("this",r)};for(let a of n)switch(a.action){case"addLink":await this.add(new Links_1$1.Link({source:o(a.source),predicate:o(a.predicate),target:o(a.target)}));break;case"removeLink":let s=await this.get(new LinkQuery_1.LinkQuery({source:o(a.source),predicate:o(a.predicate),target:o(a.target)}));for(let u of s)await this.remove(u);break}},"f")}get uuid(){return __classPrivateFieldGet$5(this,_PerspectiveProxy_handle,"f").uuid}get name(){return __classPrivateFieldGet$5(this,_PerspectiveProxy_handle,"f").name}get sharedUrl(){return __classPrivateFieldGet$5(this,_PerspectiveProxy_handle,"f").sharedUrl}get neighbourhood(){return __classPrivateFieldGet$5(this,_PerspectiveProxy_handle,"f").neighbourhood}async get(e){return await __classPrivateFieldGet$5(this,_PerspectiveProxy_client,"f").queryLinks(__classPrivateFieldGet$5(this,_PerspectiveProxy_handle,"f").uuid,e)}async infer(e){return await __classPrivateFieldGet$5(this,_PerspectiveProxy_client,"f").queryProlog(__classPrivateFieldGet$5(this,_PerspectiveProxy_handle,"f").uuid,e)}async add(e){return await __classPrivateFieldGet$5(this,_PerspectiveProxy_client,"f").addLink(__classPrivateFieldGet$5(this,_PerspectiveProxy_handle,"f").uuid,e)}async update(e,t){return await __classPrivateFieldGet$5(this,_PerspectiveProxy_client,"f").updateLink(__classPrivateFieldGet$5(this,_PerspectiveProxy_handle,"f").uuid,e,t)}async remove(e){return await __classPrivateFieldGet$5(this,_PerspectiveProxy_client,"f").removeLink(__classPrivateFieldGet$5(this,_PerspectiveProxy_handle,"f").uuid,e)}async addListener(e,t){e==="link-added"?__classPrivateFieldGet$5(this,_PerspectiveProxy_perspectiveLinkAddedCallbacks,"f").push(t):e==="link-removed"&&__classPrivateFieldGet$5(this,_PerspectiveProxy_perspectiveLinkRemovedCallbacks,"f").push(t)}async removeListener(e,t){if(e==="link-added"){let n=__classPrivateFieldGet$5(this,_PerspectiveProxy_perspectiveLinkAddedCallbacks,"f").indexOf(t);__classPrivateFieldGet$5(this,_PerspectiveProxy_perspectiveLinkAddedCallbacks,"f").splice(n,1)}else if(e==="link-removed"){let n=__classPrivateFieldGet$5(this,_PerspectiveProxy_perspectiveLinkRemovedCallbacks,"f").indexOf(t);__classPrivateFieldGet$5(this,_PerspectiveProxy_perspectiveLinkRemovedCallbacks,"f").splice(n,1)}}async snapshot(){return __classPrivateFieldGet$5(this,_PerspectiveProxy_client,"f").snapshotByUUID(__classPrivateFieldGet$5(this,_PerspectiveProxy_handle,"f").uuid)}async loadSnapshot(e){for(let t of e.links)await this.add(t.data)}async getSingleTarget(e){delete e.target;let t=await this.get(e);return t.length?t[0].data.target:null}async setSingleTarget(e){let t=new LinkQuery_1.LinkQuery({source:e.source,predicate:e.predicate}),n=await this.get(t);for(let r of n)await this.remove(r);await this.add(e)}async sdnaFlows(){return(await this.infer("register_sdna_flow(X, _)")).map(e=>e.X)}async availableFlows(e){return(await this.infer(`flowable("${e}", F), register_sdna_flow(X, F)`)).map(t=>t.X)}async startFlow(flowName,exprAddr){let startAction=await this.infer(`start_action(Action, F), register_sdna_flow("${flowName}", F)`);startAction=eval(startAction[0].Action),await __classPrivateFieldGet$5(this,_PerspectiveProxy_executeAction,"f").call(this,startAction,exprAddr)}async expressionsInFlowState(e,t){return(await this.infer(`register_sdna_flow("${e}", F), flow_state(X, ${t}, F)`)).map(n=>n.X)}async flowState(e,t){return(await this.infer(`register_sdna_flow("${e}", F), flow_state("${t}", X, F)`))[0].X}async flowActions(e,t){return(await this.infer(`register_sdna_flow("${e}", Flow), flow_state("${t}", State, Flow), action(State, Name, _, _)`)).map(n=>n.Name)}async runFlowAction(flowName,exprAddr,actionName){let action=await this.infer(`register_sdna_flow("${flowName}", Flow), flow_state("${exprAddr}", State, Flow), action(State, "${actionName}", _, Action)`);action=eval(action[0].Action),await __classPrivateFieldGet$5(this,_PerspectiveProxy_executeAction,"f").call(this,action,exprAddr)}};PerspectiveProxy$1.PerspectiveProxy=PerspectiveProxy,_PerspectiveProxy_handle=new WeakMap,_PerspectiveProxy_client=new WeakMap,_PerspectiveProxy_perspectiveLinkAddedCallbacks=new WeakMap,_PerspectiveProxy_perspectiveLinkRemovedCallbacks=new WeakMap,_PerspectiveProxy_executeAction=new WeakMap;var __classPrivateFieldSet$4=commonjsGlobal&&commonjsGlobal.__classPrivateFieldSet||function(e,t,n,r,o){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?o.call(e,n):o?o.value=n:t.set(e,n),n},__classPrivateFieldGet$4=commonjsGlobal&&commonjsGlobal.__classPrivateFieldGet||function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},__importDefault$3=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},_PerspectiveClient_apolloClient,_PerspectiveClient_perspectiveAddedCallbacks,_PerspectiveClient_perspectiveUpdatedCallbacks,_PerspectiveClient_perspectiveRemovedCallbacks;Object.defineProperty(PerspectiveClient$1,"__esModule",{value:!0});var core_1$2=require$$0,unwrapApolloResult_1$2=__importDefault$3(unwrapApolloResult$1),PerspectiveProxy_1=PerspectiveProxy$1,LINK_EXPRESSION_FIELDS=`
author
timestamp
data { source, predicate, target }
proof { valid, invalid, signature, key }
`,PERSPECTIVE_HANDLE_FIELDS=`
uuid
name
sharedUrl
neighbourhood { 
    linkLanguage 
    meta { 
        links
            {
                author
                timestamp
                data { source, predicate, target }
                proof { valid, invalid, signature, key }
            }  
    } 
}
`,PerspectiveClient=class{constructor(e,t=!0){_PerspectiveClient_apolloClient.set(this,void 0),_PerspectiveClient_perspectiveAddedCallbacks.set(this,void 0),_PerspectiveClient_perspectiveUpdatedCallbacks.set(this,void 0),_PerspectiveClient_perspectiveRemovedCallbacks.set(this,void 0),__classPrivateFieldSet$4(this,_PerspectiveClient_apolloClient,e,"f"),__classPrivateFieldSet$4(this,_PerspectiveClient_perspectiveAddedCallbacks,[],"f"),__classPrivateFieldSet$4(this,_PerspectiveClient_perspectiveUpdatedCallbacks,[],"f"),__classPrivateFieldSet$4(this,_PerspectiveClient_perspectiveRemovedCallbacks,[],"f"),t&&(this.subscribePerspectiveAdded(),this.subscribePerspectiveUpdated(),this.subscribePerspectiveRemoved())}async all(){let{perspectives:e}=(0,unwrapApolloResult_1$2.default)(await __classPrivateFieldGet$4(this,_PerspectiveClient_apolloClient,"f").query({query:(0,core_1$2.gql)`query perspectives {
                perspectives {
                    ${PERSPECTIVE_HANDLE_FIELDS}
                }
                
            }`}));return e.map(t=>new PerspectiveProxy_1.PerspectiveProxy(t,this))}async byUUID(e){let{perspective:t}=(0,unwrapApolloResult_1$2.default)(await __classPrivateFieldGet$4(this,_PerspectiveClient_apolloClient,"f").query({query:(0,core_1$2.gql)`query perspective($uuid: String!) {
                perspective(uuid: $uuid) {
                    ${PERSPECTIVE_HANDLE_FIELDS}
                }
            }`,variables:{uuid:e}}));return t?new PerspectiveProxy_1.PerspectiveProxy(t,this):null}async snapshotByUUID(e){let{perspectiveSnapshot:t}=(0,unwrapApolloResult_1$2.default)(await __classPrivateFieldGet$4(this,_PerspectiveClient_apolloClient,"f").query({query:(0,core_1$2.gql)`query perspectiveSnapshot($uuid: String!) {
                perspectiveSnapshot(uuid: $uuid) {
                    links { ${LINK_EXPRESSION_FIELDS} }
                }
            }`,variables:{uuid:e}}));return t}async publishSnapshotByUUID(e){let{perspectivePublishSnapshot:t}=(0,unwrapApolloResult_1$2.default)(await __classPrivateFieldGet$4(this,_PerspectiveClient_apolloClient,"f").mutate({mutation:(0,core_1$2.gql)`mutation perspectivePublishSnapshot($uuid: String!) {
                perspectivePublishSnapshot(uuid: $uuid)
            }`,variables:{uuid:e}}));return t}async queryLinks(e,t){let{perspectiveQueryLinks:n}=(0,unwrapApolloResult_1$2.default)(await __classPrivateFieldGet$4(this,_PerspectiveClient_apolloClient,"f").query({query:(0,core_1$2.gql)`query perspectiveQueryLinks($uuid: String!, $query: LinkQuery!) {
                perspectiveQueryLinks(query: $query, uuid: $uuid) {
                    ${LINK_EXPRESSION_FIELDS}
                }
            }`,variables:{uuid:e,query:t}}));return n}async queryProlog(e,t){let{perspectiveQueryProlog:n}=(0,unwrapApolloResult_1$2.default)(await __classPrivateFieldGet$4(this,_PerspectiveClient_apolloClient,"f").query({query:(0,core_1$2.gql)`query perspectiveQueryProlog($uuid: String!, $query: String!) {
                perspectiveQueryProlog(uuid: $uuid, query: $query)
            }`,variables:{uuid:e,query:t}}));return JSON.parse(n)}async add(e){let{perspectiveAdd:t}=(0,unwrapApolloResult_1$2.default)(await __classPrivateFieldGet$4(this,_PerspectiveClient_apolloClient,"f").mutate({mutation:(0,core_1$2.gql)`mutation perspectiveAdd($name: String!) {
                perspectiveAdd(name: $name) {
                    ${PERSPECTIVE_HANDLE_FIELDS}
                }
            }`,variables:{name:e}}));return new PerspectiveProxy_1.PerspectiveProxy(t,this)}async update(e,t){let{perspectiveUpdate:n}=(0,unwrapApolloResult_1$2.default)(await __classPrivateFieldGet$4(this,_PerspectiveClient_apolloClient,"f").mutate({mutation:(0,core_1$2.gql)`mutation perspectiveUpdate($uuid: String!, $name: String!) {
                perspectiveUpdate(uuid: $uuid, name: $name) {
                    ${PERSPECTIVE_HANDLE_FIELDS}
                }
            }`,variables:{uuid:e,name:t}}));return new PerspectiveProxy_1.PerspectiveProxy(n,this)}async remove(e){return(0,unwrapApolloResult_1$2.default)(await __classPrivateFieldGet$4(this,_PerspectiveClient_apolloClient,"f").mutate({mutation:(0,core_1$2.gql)`mutation perspectiveRemove($uuid: String!) {
                perspectiveRemove(uuid: $uuid)
            }`,variables:{uuid:e}}))}async addLink(e,t){let{perspectiveAddLink:n}=(0,unwrapApolloResult_1$2.default)(await __classPrivateFieldGet$4(this,_PerspectiveClient_apolloClient,"f").mutate({mutation:(0,core_1$2.gql)`mutation perspectiveAddLink($uuid: String!, $link: LinkInput!){
                perspectiveAddLink(link: $link, uuid: $uuid) {
                    ${LINK_EXPRESSION_FIELDS}
                }
            }`,variables:{uuid:e,link:t}}));return n}async updateLink(e,t,n){let{perspectiveUpdateLink:r}=(0,unwrapApolloResult_1$2.default)(await __classPrivateFieldGet$4(this,_PerspectiveClient_apolloClient,"f").mutate({mutation:(0,core_1$2.gql)`mutation perspectiveUpdateLink(
                $uuid: String!, 
                $newLink: LinkInput!
                $oldLink: LinkExpressionInput!
            ){
                perspectiveUpdateLink(
                    newLink: $newLink, 
                    oldLink: $oldLink, 
                    uuid: $uuid
                ) {
                    ${LINK_EXPRESSION_FIELDS}
                }
            }`,variables:{uuid:e,oldLink:t,newLink:n}}));return r}async removeLink(e,t){return(0,unwrapApolloResult_1$2.default)(await __classPrivateFieldGet$4(this,_PerspectiveClient_apolloClient,"f").mutate({mutation:(0,core_1$2.gql)`mutation perspectiveRemoveLink($link: LinkExpressionInput!, $uuid: String!) {
                perspectiveRemoveLink(link: $link, uuid: $uuid)
            }`,variables:{uuid:e,link:t}}))}addPerspectiveAddedListener(e){__classPrivateFieldGet$4(this,_PerspectiveClient_perspectiveAddedCallbacks,"f").push(e)}subscribePerspectiveAdded(){__classPrivateFieldGet$4(this,_PerspectiveClient_apolloClient,"f").subscribe({query:(0,core_1$2.gql)` subscription {
                perspectiveAdded { ${PERSPECTIVE_HANDLE_FIELDS} }
            }   
        `}).subscribe({next:e=>{__classPrivateFieldGet$4(this,_PerspectiveClient_perspectiveAddedCallbacks,"f").forEach(t=>{t(e.data.perspectiveAdded)})},error:e=>console.error(e)})}addPerspectiveUpdatedListener(e){__classPrivateFieldGet$4(this,_PerspectiveClient_perspectiveUpdatedCallbacks,"f").push(e)}subscribePerspectiveUpdated(){__classPrivateFieldGet$4(this,_PerspectiveClient_apolloClient,"f").subscribe({query:(0,core_1$2.gql)` subscription {
                perspectiveUpdated { ${PERSPECTIVE_HANDLE_FIELDS} }
            }   
        `}).subscribe({next:e=>{__classPrivateFieldGet$4(this,_PerspectiveClient_perspectiveUpdatedCallbacks,"f").forEach(t=>{t(e.data.perspectiveUpdated)})},error:e=>console.error(e)})}addPerspectiveRemovedListener(e){__classPrivateFieldGet$4(this,_PerspectiveClient_perspectiveRemovedCallbacks,"f").push(e)}subscribePerspectiveRemoved(){__classPrivateFieldGet$4(this,_PerspectiveClient_apolloClient,"f").subscribe({query:(0,core_1$2.gql)` subscription {
                perspectiveRemoved
            }   
        `}).subscribe({next:e=>{__classPrivateFieldGet$4(this,_PerspectiveClient_perspectiveRemovedCallbacks,"f").forEach(t=>{t(e.data.perspectiveRemoved)})},error:e=>console.error(e)})}async addPerspectiveLinkAddedListener(e,t){__classPrivateFieldGet$4(this,_PerspectiveClient_apolloClient,"f").subscribe({query:(0,core_1$2.gql)` subscription {
                perspectiveLinkAdded(uuid: "${e}") { ${LINK_EXPRESSION_FIELDS} }
            }   
        `}).subscribe({next:n=>{t.forEach(r=>{r(n.data.perspectiveLinkAdded)})},error:n=>console.error(n)}),await new Promise(n=>setTimeout(n,500))}async addPerspectiveLinkRemovedListener(e,t){__classPrivateFieldGet$4(this,_PerspectiveClient_apolloClient,"f").subscribe({query:(0,core_1$2.gql)` subscription {
                perspectiveLinkRemoved(uuid: "${e}") { ${LINK_EXPRESSION_FIELDS} }
            }   
        `}).subscribe({next:n=>{t.forEach(r=>{r(n.data.perspectiveLinkRemoved)})},error:n=>console.error(n)}),await new Promise(n=>setTimeout(n,500))}};PerspectiveClient$1.default=PerspectiveClient,_PerspectiveClient_apolloClient=new WeakMap,_PerspectiveClient_perspectiveAddedCallbacks=new WeakMap,_PerspectiveClient_perspectiveUpdatedCallbacks=new WeakMap,_PerspectiveClient_perspectiveRemovedCallbacks=new WeakMap;var RuntimeClient$1={},__classPrivateFieldSet$3=commonjsGlobal&&commonjsGlobal.__classPrivateFieldSet||function(e,t,n,r,o){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?o.call(e,n):o?o.value=n:t.set(e,n),n},__classPrivateFieldGet$3=commonjsGlobal&&commonjsGlobal.__classPrivateFieldGet||function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},__importDefault$2=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},_RuntimeClient_apolloClient,_RuntimeClient_messageReceivedCallbacks,_RuntimeClient_exceptionOccurredCallbacks;Object.defineProperty(RuntimeClient$1,"__esModule",{value:!0});var core_1$1=require$$0,unwrapApolloResult_1$1=__importDefault$2(unwrapApolloResult$1),PERSPECTIVE_EXPRESSION_FIELDS=`
author
timestamp
data { 
    links {
        author
        timestamp
        data { source, predicate, target }
        proof { valid, invalid, signature, key }
    }  
}
proof { valid, invalid, signature, key }
`,RuntimeClient=class{constructor(e,t=!0){_RuntimeClient_apolloClient.set(this,void 0),_RuntimeClient_messageReceivedCallbacks.set(this,void 0),_RuntimeClient_exceptionOccurredCallbacks.set(this,void 0),__classPrivateFieldSet$3(this,_RuntimeClient_apolloClient,e,"f"),__classPrivateFieldSet$3(this,_RuntimeClient_messageReceivedCallbacks,[],"f"),__classPrivateFieldSet$3(this,_RuntimeClient_exceptionOccurredCallbacks,[],"f"),t&&(this.subscribeMessageReceived(),this.subscribeExceptionOccurred())}async info(){let{runtimeInfo:e}=(0,unwrapApolloResult_1$1.default)(await __classPrivateFieldGet$3(this,_RuntimeClient_apolloClient,"f").query({query:(0,core_1$1.gql)`query runtimeInfo {
                runtimeInfo {
                    ad4mExecutorVersion
                }
            }`}));return e}async quit(){return(0,unwrapApolloResult_1$1.default)(await __classPrivateFieldGet$3(this,_RuntimeClient_apolloClient,"f").mutate({mutation:(0,core_1$1.gql)`mutation runtimeQuit { runtimeQuit }`})).runtimeQuit}async openLink(e){let{runtimeOpenLink:t}=(0,unwrapApolloResult_1$1.default)(await __classPrivateFieldGet$3(this,_RuntimeClient_apolloClient,"f").mutate({mutation:(0,core_1$1.gql)`mutation runtimeOpenLink($url: String!) {
                runtimeOpenLink(url: $url)
            }`,variables:{url:e}}));return t}async addTrustedAgents(e){let{addTrustedAgents:t}=(0,unwrapApolloResult_1$1.default)(await __classPrivateFieldGet$3(this,_RuntimeClient_apolloClient,"f").mutate({mutation:(0,core_1$1.gql)`mutation addTrustedAgents($agents: [String!]!) {
                addTrustedAgents(agents: $agents)
            }`,variables:{agents:e}}));return t}async deleteTrustedAgents(e){let{deleteTrustedAgents:t}=(0,unwrapApolloResult_1$1.default)(await __classPrivateFieldGet$3(this,_RuntimeClient_apolloClient,"f").mutate({mutation:(0,core_1$1.gql)`mutation deleteTrustedAgents($agents: [String!]!) {
                deleteTrustedAgents(agents: $agents)
            }`,variables:{agents:e}}));return t}async getTrustedAgents(){let{getTrustedAgents:e}=(0,unwrapApolloResult_1$1.default)(await __classPrivateFieldGet$3(this,_RuntimeClient_apolloClient,"f").query({query:(0,core_1$1.gql)`query getTrustedAgents {
                getTrustedAgents
            }`}));return e}async addKnownLinkLanguageTemplates(e){let{runtimeAddKnownLinkLanguageTemplates:t}=(0,unwrapApolloResult_1$1.default)(await __classPrivateFieldGet$3(this,_RuntimeClient_apolloClient,"f").mutate({mutation:(0,core_1$1.gql)`mutation runtimeAddKnownLinkLanguageTemplates($addresses: [String!]!) {
                runtimeAddKnownLinkLanguageTemplates(addresses: $addresses)
            }`,variables:{addresses:e}}));return t}async removeKnownLinkLanguageTemplates(e){let{runtimeRemoveKnownLinkLanguageTemplates:t}=(0,unwrapApolloResult_1$1.default)(await __classPrivateFieldGet$3(this,_RuntimeClient_apolloClient,"f").mutate({mutation:(0,core_1$1.gql)`mutation runtimeRemoveKnownLinkLanguageTemplates($addresses: [String!]!) {
                runtimeRemoveKnownLinkLanguageTemplates(addresses: $addresses)
            }`,variables:{addresses:e}}));return t}async knownLinkLanguageTemplates(){let{runtimeKnownLinkLanguageTemplates:e}=(0,unwrapApolloResult_1$1.default)(await __classPrivateFieldGet$3(this,_RuntimeClient_apolloClient,"f").query({query:(0,core_1$1.gql)`query runtimeKnownLinkLanguageTemplates {
                runtimeKnownLinkLanguageTemplates
            }`}));return e}async addFriends(e){let{runtimeAddFriends:t}=(0,unwrapApolloResult_1$1.default)(await __classPrivateFieldGet$3(this,_RuntimeClient_apolloClient,"f").mutate({mutation:(0,core_1$1.gql)`mutation runtimeAddFriends($dids: [String!]!) {
                runtimeAddFriends(dids: $dids)
            }`,variables:{dids:e}}));return t}async removeFriends(e){let{runtimeRemoveFriends:t}=(0,unwrapApolloResult_1$1.default)(await __classPrivateFieldGet$3(this,_RuntimeClient_apolloClient,"f").mutate({mutation:(0,core_1$1.gql)`mutation runtimeRemoveFriends($dids: [String!]!) {
                runtimeRemoveFriends(dids: $dids)
            }`,variables:{dids:e}}));return t}async friends(){let{runtimeFriends:e}=(0,unwrapApolloResult_1$1.default)(await __classPrivateFieldGet$3(this,_RuntimeClient_apolloClient,"f").query({query:(0,core_1$1.gql)`query runtimeFriends {
                runtimeFriends
            }`}));return e}async hcAgentInfos(){let{runtimeHcAgentInfos:e}=(0,unwrapApolloResult_1$1.default)(await __classPrivateFieldGet$3(this,_RuntimeClient_apolloClient,"f").query({query:(0,core_1$1.gql)`query runtimeHcAgentInfos {
                runtimeHcAgentInfos
            }`}));return e}async hcAddAgentInfos(e){let{runtimeHcAddAgentInfos:t}=(0,unwrapApolloResult_1$1.default)(await __classPrivateFieldGet$3(this,_RuntimeClient_apolloClient,"f").mutate({mutation:(0,core_1$1.gql)`mutation runtimeHcAddAgentInfos($agentInfos: String!) {
                runtimeHcAddAgentInfos(agentInfos: $agentInfos)
            }`,variables:{agentInfos:e}}));return t}async verifyStringSignedByDid(e,t,n,r){let{runtimeVerifyStringSignedByDid:o}=(0,unwrapApolloResult_1$1.default)(await __classPrivateFieldGet$3(this,_RuntimeClient_apolloClient,"f").mutate({mutation:(0,core_1$1.gql)`query runtimeVerifyStringSignedByDid($did: String!, $didSigningKeyId: String!, $data: String!, $signedData: String!) {
                runtimeVerifyStringSignedByDid(did: $did, didSigningKeyId: $didSigningKeyId, data: $data, signedData: $signedData)
            }`,variables:{did:e,didSigningKeyId:t,data:n,signedData:r}}));return o}async setStatus(e){let{runtimeSetStatus:t}=(0,unwrapApolloResult_1$1.default)(await __classPrivateFieldGet$3(this,_RuntimeClient_apolloClient,"f").mutate({mutation:(0,core_1$1.gql)`mutation runtimeSetStatus($status: PerspectiveInput!) {
                runtimeSetStatus(status: $status)
            }`,variables:{status:e}}));return t}async friendStatus(e){let{runtimeFriendStatus:t}=(0,unwrapApolloResult_1$1.default)(await __classPrivateFieldGet$3(this,_RuntimeClient_apolloClient,"f").query({query:(0,core_1$1.gql)`query runtimeFriendStatus($did: String!) {
                runtimeFriendStatus(did: $did) { ${PERSPECTIVE_EXPRESSION_FIELDS} }
            }`,variables:{did:e}}));return t}async friendSendMessage(e,t){let{runtimeFriendSendMessage:n}=(0,unwrapApolloResult_1$1.default)(await __classPrivateFieldGet$3(this,_RuntimeClient_apolloClient,"f").mutate({mutation:(0,core_1$1.gql)`mutation runtimeFriendSendMessage($did: String!, $message: PerspectiveInput!) {
                runtimeFriendSendMessage(did: $did, message: $message)
            }`,variables:{did:e,message:t}}));return n}async messageInbox(e){let{runtimeMessageInbox:t}=(0,unwrapApolloResult_1$1.default)(await __classPrivateFieldGet$3(this,_RuntimeClient_apolloClient,"f").query({query:(0,core_1$1.gql)`query runtimeMessageInbox($filter: String) {
                runtimeMessageInbox(filter: $filter) { ${PERSPECTIVE_EXPRESSION_FIELDS} }
            }`,variables:{filter:e}}));return t}async messageOutbox(e){let{runtimeMessageOutbox:t}=(0,unwrapApolloResult_1$1.default)(await __classPrivateFieldGet$3(this,_RuntimeClient_apolloClient,"f").query({query:(0,core_1$1.gql)`query runtimeMessageOutbox($filter: String) {
                runtimeMessageOutbox(filter: $filter) { 
                    recipient,
                    message {
                        ${PERSPECTIVE_EXPRESSION_FIELDS} 
                    }
                }
            }`,variables:{filter:e}}));return t}addMessageCallback(e){__classPrivateFieldGet$3(this,_RuntimeClient_messageReceivedCallbacks,"f").push(e)}subscribeMessageReceived(){__classPrivateFieldGet$3(this,_RuntimeClient_apolloClient,"f").subscribe({query:(0,core_1$1.gql)` subscription {
                runtimeMessageReceived { ${PERSPECTIVE_EXPRESSION_FIELDS} }
            }   
        `}).subscribe({next:e=>{__classPrivateFieldGet$3(this,_RuntimeClient_messageReceivedCallbacks,"f").forEach(t=>{t(e.data.runtimeMessageReceived)})},error:e=>console.error(e)})}addExceptionCallback(e){__classPrivateFieldGet$3(this,_RuntimeClient_exceptionOccurredCallbacks,"f").push(e)}subscribeExceptionOccurred(){__classPrivateFieldGet$3(this,_RuntimeClient_apolloClient,"f").subscribe({query:(0,core_1$1.gql)` subscription {
                exceptionOccurred {
                    title
                    message
                    type
                    addon
                }
            }`}).subscribe({next:e=>{__classPrivateFieldGet$3(this,_RuntimeClient_exceptionOccurredCallbacks,"f").forEach(t=>{t(e.data.exceptionOccurred)})},error:e=>console.error(e)})}};RuntimeClient$1.default=RuntimeClient,_RuntimeClient_apolloClient=new WeakMap,_RuntimeClient_messageReceivedCallbacks=new WeakMap,_RuntimeClient_exceptionOccurredCallbacks=new WeakMap;var ExpressionClient$1={},__classPrivateFieldSet$2=commonjsGlobal&&commonjsGlobal.__classPrivateFieldSet||function(e,t,n,r,o){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?o.call(e,n):o?o.value=n:t.set(e,n),n},__classPrivateFieldGet$2=commonjsGlobal&&commonjsGlobal.__classPrivateFieldGet||function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},__importDefault$1=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},_ExpressionClient_apolloClient;Object.defineProperty(ExpressionClient$1,"__esModule",{value:!0});var core_1=require$$0,unwrapApolloResult_1=__importDefault$1(unwrapApolloResult$1),ExpressionClient=class{constructor(e){_ExpressionClient_apolloClient.set(this,void 0),__classPrivateFieldSet$2(this,_ExpressionClient_apolloClient,e,"f")}async get(e){let{expression:t}=(0,unwrapApolloResult_1.default)(await __classPrivateFieldGet$2(this,_ExpressionClient_apolloClient,"f").query({query:(0,core_1.gql)`query expression($url: String!) {
                expression(url: $url) {
                    author
                    timestamp
                    data
                    language {
                        address
                    }
                    proof {
                        valid
                        invalid
                    }
                }
            }`,variables:{url:e}}));return t}async getMany(e){let{expressionMany:t}=(0,unwrapApolloResult_1.default)(await __classPrivateFieldGet$2(this,_ExpressionClient_apolloClient,"f").query({query:(0,core_1.gql)`query expressionMany($urls: [String!]!) {
                expressionMany(urls: $urls) {
                    author
                    timestamp
                    data
                    language {
                        address
                    }
                    proof {
                        valid
                        invalid
                    }
                }
            }`,variables:{urls:e}}));return t}async getRaw(e){let{expressionRaw:t}=(0,unwrapApolloResult_1.default)(await __classPrivateFieldGet$2(this,_ExpressionClient_apolloClient,"f").query({query:(0,core_1.gql)`query expressionRaw($url: String!) {
                expressionRaw(url: $url)
            }`,variables:{url:e}}));return t}async create(e,t){e=JSON.stringify(e);let{expressionCreate:n}=(0,unwrapApolloResult_1.default)(await __classPrivateFieldGet$2(this,_ExpressionClient_apolloClient,"f").mutate({mutation:(0,core_1.gql)`mutation expressionCreate($content: String!, $languageAddress: String!){
                expressionCreate(content: $content, languageAddress: $languageAddress)
            }`,variables:{content:e,languageAddress:t}}));return n}async interactions(e){let{expressionInteractions:t}=(0,unwrapApolloResult_1.default)(await __classPrivateFieldGet$2(this,_ExpressionClient_apolloClient,"f").query({query:(0,core_1.gql)`query expressionInteractions($url: String!) {
                expressionInteractions(url: $url) { 
                    label
                    name
                    parameters { name, type }
                }
            }`,variables:{url:e}}));return t}async interact(e,t){let{expressionInteract:n}=(0,unwrapApolloResult_1.default)(await __classPrivateFieldGet$2(this,_ExpressionClient_apolloClient,"f").mutate({mutation:(0,core_1.gql)`mutation expressionInteract($url: String!, $interactionCall: InteractionCall!){
                expressionInteract(url: $url, interactionCall: $interactionCall)
            }`,variables:{url:e,interactionCall:t}}));return n}};ExpressionClient$1.default=ExpressionClient,_ExpressionClient_apolloClient=new WeakMap;var __classPrivateFieldSet$1=commonjsGlobal&&commonjsGlobal.__classPrivateFieldSet||function(e,t,n,r,o){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?o.call(e,n):o?o.value=n:t.set(e,n),n},__classPrivateFieldGet$1=commonjsGlobal&&commonjsGlobal.__classPrivateFieldGet||function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},__importDefault=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},_Ad4mClient_apolloClient,_Ad4mClient_agentClient,_Ad4mClient_expressionClient,_Ad4mClient_languageClient,_Ad4mClient_neighbourhoodClient,_Ad4mClient_perspectiveClient,_Ad4mClient_runtimeClient;Object.defineProperty(Ad4mClient$1,"__esModule",{value:!0}),Ad4mClient$1.Ad4mClient=void 0;var AgentClient_1=__importDefault(AgentClient$1),LanguageClient_1=LanguageClient$1,NeighbourhoodClient_1=__importDefault(NeighbourhoodClient$1),PerspectiveClient_1=__importDefault(PerspectiveClient$1),RuntimeClient_1=__importDefault(RuntimeClient$1),ExpressionClient_1=__importDefault(ExpressionClient$1),Ad4mClient=class{constructor(e,t=!0){_Ad4mClient_apolloClient.set(this,void 0),_Ad4mClient_agentClient.set(this,void 0),_Ad4mClient_expressionClient.set(this,void 0),_Ad4mClient_languageClient.set(this,void 0),_Ad4mClient_neighbourhoodClient.set(this,void 0),_Ad4mClient_perspectiveClient.set(this,void 0),_Ad4mClient_runtimeClient.set(this,void 0),__classPrivateFieldSet$1(this,_Ad4mClient_apolloClient,e,"f"),__classPrivateFieldSet$1(this,_Ad4mClient_agentClient,new AgentClient_1.default(e,t),"f"),__classPrivateFieldSet$1(this,_Ad4mClient_expressionClient,new ExpressionClient_1.default(e),"f"),__classPrivateFieldSet$1(this,_Ad4mClient_languageClient,new LanguageClient_1.LanguageClient(e),"f"),__classPrivateFieldSet$1(this,_Ad4mClient_neighbourhoodClient,new NeighbourhoodClient_1.default(e),"f"),__classPrivateFieldSet$1(this,_Ad4mClient_perspectiveClient,new PerspectiveClient_1.default(e,t),"f"),__classPrivateFieldSet$1(this,_Ad4mClient_runtimeClient,new RuntimeClient_1.default(e,t),"f")}get agent(){return __classPrivateFieldGet$1(this,_Ad4mClient_agentClient,"f")}get expression(){return __classPrivateFieldGet$1(this,_Ad4mClient_expressionClient,"f")}get languages(){return __classPrivateFieldGet$1(this,_Ad4mClient_languageClient,"f")}get neighbourhood(){return __classPrivateFieldGet$1(this,_Ad4mClient_neighbourhoodClient,"f")}get perspective(){return __classPrivateFieldGet$1(this,_Ad4mClient_perspectiveClient,"f")}get runtime(){return __classPrivateFieldGet$1(this,_Ad4mClient_runtimeClient,"f")}};Ad4mClient$1.Ad4mClient=Ad4mClient,_Ad4mClient_apolloClient=new WeakMap,_Ad4mClient_agentClient=new WeakMap,_Ad4mClient_expressionClient=new WeakMap,_Ad4mClient_languageClient=new WeakMap,_Ad4mClient_neighbourhoodClient=new WeakMap,_Ad4mClient_perspectiveClient=new WeakMap,_Ad4mClient_runtimeClient=new WeakMap;var Address={};Object.defineProperty(Address,"__esModule",{value:!0});var Exception={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ExceptionType=void 0,function(t){t[t.LanguageIsNotLoaded=0]="LanguageIsNotLoaded",t[t.ExpressionIsNotVerified=1]="ExpressionIsNotVerified",t[t.AgentIsUntrusted=2]="AgentIsUntrusted",t[t.CapabilityRequested=3]="CapabilityRequested"}(e.ExceptionType||(e.ExceptionType={}))})(Exception);var ExpressionRef$1={},__decorate$6=commonjsGlobal&&commonjsGlobal.__decorate||function(e,t,n,r){var o=arguments.length,a=o<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(e,t,n,r);else for(var u=e.length-1;u>=0;u--)(s=e[u])&&(a=(o<3?s(a):o>3?s(t,n,a):s(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},__metadata$6=commonjsGlobal&&commonjsGlobal.__metadata||function(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)};Object.defineProperty(ExpressionRef$1,"__esModule",{value:!0}),ExpressionRef$1.parseExprUrl=ExpressionRef$1.exprRef2String=ExpressionRef$1.ExpressionRef=void 0;var LanguageRef_1=LanguageRef$1,type_graphql_1$6=typeGraphql,ExpressionRef=class{constructor(e,t){this.language=e,this.expression=t}};__decorate$6([(0,type_graphql_1$6.Field)(),__metadata$6("design:type",LanguageRef_1.LanguageRef)],ExpressionRef.prototype,"language",void 0),__decorate$6([(0,type_graphql_1$6.Field)(),__metadata$6("design:type",String)],ExpressionRef.prototype,"expression",void 0),ExpressionRef=__decorate$6([(0,type_graphql_1$6.ObjectType)(),__metadata$6("design:paramtypes",[LanguageRef_1.LanguageRef,String])],ExpressionRef),ExpressionRef$1.ExpressionRef=ExpressionRef;function exprRef2String(e){return e.language.address==="did"?e.expression.toString():`${e.language.address}://${e.expression}`}ExpressionRef$1.exprRef2String=exprRef2String;function parseExprUrl(e){if(e.startsWith("literal://")){let r=new LanguageRef_1.LanguageRef;r.address="literal",r.name="literal";let o=e.substring(10);return new ExpressionRef(r,o)}let t=/^([^:^\s]+):\/\/([\s\S]+)$/.exec(e);if(t&&t.length==3){let r=t[1],o=t[2],a=new LanguageRef_1.LanguageRef;return a.address=r,new ExpressionRef(a,o)}let n=/^did:([^\s]+)$/.exec(e);if(n&&n.length==2){let r=new LanguageRef_1.LanguageRef;return r.address="did",new ExpressionRef(r,e)}throw new Error("Couldn't parse string as expression URL or DID: "+e)}ExpressionRef$1.parseExprUrl=parseExprUrl;var Language={},__decorate$5=commonjsGlobal&&commonjsGlobal.__decorate||function(e,t,n,r){var o=arguments.length,a=o<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(e,t,n,r);else for(var u=e.length-1;u>=0;u--)(s=e[u])&&(a=(o<3?s(a):o>3?s(t,n,a):s(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},__metadata$5=commonjsGlobal&&commonjsGlobal.__metadata||function(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)};Object.defineProperty(Language,"__esModule",{value:!0}),Language.TelepresenceRpcCall=Language.OnlineAgent=Language.InteractionCall=Language.InteractionMeta=Language.InteractionParameter=void 0;var type_graphql_1$5=typeGraphql,InteractionParameter=class{};__decorate$5([(0,type_graphql_1$5.Field)(),__metadata$5("design:type",String)],InteractionParameter.prototype,"name",void 0),__decorate$5([(0,type_graphql_1$5.Field)(),__metadata$5("design:type",String)],InteractionParameter.prototype,"type",void 0),InteractionParameter=__decorate$5([(0,type_graphql_1$5.ObjectType)()],InteractionParameter),Language.InteractionParameter=InteractionParameter;var InteractionMeta=class{};__decorate$5([(0,type_graphql_1$5.Field)(),__metadata$5("design:type",String)],InteractionMeta.prototype,"label",void 0),__decorate$5([(0,type_graphql_1$5.Field)(),__metadata$5("design:type",String)],InteractionMeta.prototype,"name",void 0),__decorate$5([(0,type_graphql_1$5.Field)(e=>[InteractionParameter]),__metadata$5("design:type",Array)],InteractionMeta.prototype,"parameters",void 0),InteractionMeta=__decorate$5([(0,type_graphql_1$5.ObjectType)()],InteractionMeta),Language.InteractionMeta=InteractionMeta;var InteractionCall=class{constructor(e,t){this.name=e,this.parametersStringified=JSON.stringify(t)}get parameters(){return JSON.parse(this.parametersStringified)}};__decorate$5([(0,type_graphql_1$5.Field)(),__metadata$5("design:type",String)],InteractionCall.prototype,"name",void 0),__decorate$5([(0,type_graphql_1$5.Field)(),__metadata$5("design:type",String)],InteractionCall.prototype,"parametersStringified",void 0),InteractionCall=__decorate$5([(0,type_graphql_1$5.InputType)(),__metadata$5("design:paramtypes",[String,Object])],InteractionCall),Language.InteractionCall=InteractionCall;var OnlineAgent=class{};Language.OnlineAgent=OnlineAgent;var TelepresenceRpcCall=class{};Language.TelepresenceRpcCall=TelepresenceRpcCall;var LanguageContext={};Object.defineProperty(LanguageContext,"__esModule",{value:!0}),LanguageContext.Dna=void 0;var Dna=class{};LanguageContext.Dna=Dna;var LanguageHandle$1={},__decorate$4=commonjsGlobal&&commonjsGlobal.__decorate||function(e,t,n,r){var o=arguments.length,a=o<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(e,t,n,r);else for(var u=e.length-1;u>=0;u--)(s=e[u])&&(a=(o<3?s(a):o>3?s(t,n,a):s(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},__metadata$4=commonjsGlobal&&commonjsGlobal.__metadata||function(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)};Object.defineProperty(LanguageHandle$1,"__esModule",{value:!0}),LanguageHandle$1.LanguageHandle=void 0;var type_graphql_1$4=typeGraphql,Icon_1=Icon$1,LanguageHandle=class{};__decorate$4([(0,type_graphql_1$4.Field)(),__metadata$4("design:type",String)],LanguageHandle.prototype,"name",void 0),__decorate$4([(0,type_graphql_1$4.Field)(),__metadata$4("design:type",String)],LanguageHandle.prototype,"address",void 0),__decorate$4([(0,type_graphql_1$4.Field)({nullable:!0}),__metadata$4("design:type",String)],LanguageHandle.prototype,"settings",void 0),__decorate$4([(0,type_graphql_1$4.Field)({nullable:!0}),__metadata$4("design:type",Icon_1.Icon)],LanguageHandle.prototype,"icon",void 0),__decorate$4([(0,type_graphql_1$4.Field)({nullable:!0}),__metadata$4("design:type",Icon_1.Icon)],LanguageHandle.prototype,"constructorIcon",void 0),__decorate$4([(0,type_graphql_1$4.Field)({nullable:!0}),__metadata$4("design:type",Icon_1.Icon)],LanguageHandle.prototype,"settingsIcon",void 0),LanguageHandle=__decorate$4([(0,type_graphql_1$4.ObjectType)()],LanguageHandle),LanguageHandle$1.LanguageHandle=LanguageHandle;var LanguageMeta$1={},__decorate$3=commonjsGlobal&&commonjsGlobal.__decorate||function(e,t,n,r){var o=arguments.length,a=o<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(e,t,n,r);else for(var u=e.length-1;u>=0;u--)(s=e[u])&&(a=(o<3?s(a):o>3?s(t,n,a):s(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},__metadata$3=commonjsGlobal&&commonjsGlobal.__metadata||function(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)};Object.defineProperty(LanguageMeta$1,"__esModule",{value:!0}),LanguageMeta$1.LanguageLanguageInput=LanguageMeta$1.LanguageExpression=LanguageMeta$1.LanguageMetaInternal=LanguageMeta$1.LanguageMetaInput=LanguageMeta$1.LanguageMeta=void 0;var type_graphql_1$3=typeGraphql,Expression_1$2=Expression$1,LanguageMeta=class{};__decorate$3([(0,type_graphql_1$3.Field)(),__metadata$3("design:type",String)],LanguageMeta.prototype,"name",void 0),__decorate$3([(0,type_graphql_1$3.Field)(),__metadata$3("design:type",String)],LanguageMeta.prototype,"address",void 0),__decorate$3([(0,type_graphql_1$3.Field)({nullable:!0}),__metadata$3("design:type",String)],LanguageMeta.prototype,"description",void 0),__decorate$3([(0,type_graphql_1$3.Field)(),__metadata$3("design:type",String)],LanguageMeta.prototype,"author",void 0),__decorate$3([(0,type_graphql_1$3.Field)({nullable:!0}),__metadata$3("design:type",Boolean)],LanguageMeta.prototype,"templated",void 0),__decorate$3([(0,type_graphql_1$3.Field)({nullable:!0}),__metadata$3("design:type",String)],LanguageMeta.prototype,"templateSourceLanguageAddress",void 0),__decorate$3([(0,type_graphql_1$3.Field)({nullable:!0}),__metadata$3("design:type",String)],LanguageMeta.prototype,"templateAppliedParams",void 0),__decorate$3([(0,type_graphql_1$3.Field)(e=>[String],{nullable:!0}),__metadata$3("design:type",Array)],LanguageMeta.prototype,"possibleTemplateParams",void 0),__decorate$3([(0,type_graphql_1$3.Field)({nullable:!0}),__metadata$3("design:type",String)],LanguageMeta.prototype,"sourceCodeLink",void 0),LanguageMeta=__decorate$3([(0,type_graphql_1$3.ObjectType)()],LanguageMeta),LanguageMeta$1.LanguageMeta=LanguageMeta;var LanguageMetaInput=class{constructor(e,t){this.name=e,this.description=t,this.description||(this.description="")}};__decorate$3([(0,type_graphql_1$3.Field)(),__metadata$3("design:type",String)],LanguageMetaInput.prototype,"name",void 0),__decorate$3([(0,type_graphql_1$3.Field)(),__metadata$3("design:type",String)],LanguageMetaInput.prototype,"description",void 0),__decorate$3([(0,type_graphql_1$3.Field)(e=>[String],{nullable:!0}),__metadata$3("design:type",Array)],LanguageMetaInput.prototype,"possibleTemplateParams",void 0),__decorate$3([(0,type_graphql_1$3.Field)({nullable:!0}),__metadata$3("design:type",String)],LanguageMetaInput.prototype,"sourceCodeLink",void 0),LanguageMetaInput=__decorate$3([(0,type_graphql_1$3.InputType)(),__metadata$3("design:paramtypes",[String,String])],LanguageMetaInput),LanguageMeta$1.LanguageMetaInput=LanguageMetaInput;var LanguageMetaInternal=class{};LanguageMeta$1.LanguageMetaInternal=LanguageMetaInternal;var LanguageExpression=class extends(0,Expression_1$2.ExpressionGeneric)(LanguageMetaInternal){};LanguageMeta$1.LanguageExpression=LanguageExpression;var LanguageLanguageInput=class{};LanguageMeta$1.LanguageLanguageInput=LanguageLanguageInput;var Literal$1={},__classPrivateFieldSet=commonjsGlobal&&commonjsGlobal.__classPrivateFieldSet||function(e,t,n,r,o){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?o.call(e,n):o?o.value=n:t.set(e,n),n},__classPrivateFieldGet=commonjsGlobal&&commonjsGlobal.__classPrivateFieldGet||function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},_Literal_literal,_Literal_url;Object.defineProperty(Literal$1,"__esModule",{value:!0}),Literal$1.Literal=void 0;var Literal=class{constructor(){_Literal_literal.set(this,void 0),_Literal_url.set(this,void 0)}static fromUrl(e){if(!e||!e.startsWith("literal://"))throw new Error("Can't create Literal from non-literal URL");let t=new Literal;return __classPrivateFieldSet(t,_Literal_url,e,"f"),t}static from(e){let t=new Literal;return __classPrivateFieldSet(t,_Literal_literal,e,"f"),t}encodeSingleQuote(e){return e=e.split("'").join("\\'"),e}decodeSingleQuote(e){return e=e.split("\\'").join("'"),e}toUrl(){if(__classPrivateFieldGet(this,_Literal_url,"f")&&!__classPrivateFieldGet(this,_Literal_literal,"f"))return __classPrivateFieldGet(this,_Literal_url,"f");if(!__classPrivateFieldGet(this,_Literal_url,"f")&&!__classPrivateFieldGet(this,_Literal_literal,"f"))throw new Error("Can't turn empty Literal into URL");let e;switch(typeof __classPrivateFieldGet(this,_Literal_literal,"f")){case"string":e=`string:${__classPrivateFieldGet(this,_Literal_literal,"f")}`;break;case"number":e=`number:${__classPrivateFieldGet(this,_Literal_literal,"f")}`;break;case"object":e=`json:${JSON.stringify(__classPrivateFieldGet(this,_Literal_literal,"f"))}`;break}return this.encodeSingleQuote(encodeURI(`literal://${e}`))}get(){if(__classPrivateFieldGet(this,_Literal_literal,"f"))return __classPrivateFieldGet(this,_Literal_literal,"f");if(!__classPrivateFieldGet(this,_Literal_url,"f"))throw new Error("Can't render empty Literal");if(!__classPrivateFieldGet(this,_Literal_url,"f").startsWith("literal://"))throw new Error("Can't render Literal from non-literal URL");let e=decodeURI(this.decodeSingleQuote(__classPrivateFieldGet(this,_Literal_url,"f").substring(10)));if(e.startsWith("string:"))return e.substring(7);if(e.startsWith("number:")){let t=e.substring(7);return parseFloat(t)}if(e.startsWith("json:")){let t=e.substring(5);return JSON.parse(t)}throw new Error(`Can't parse unknown literal: ${e}`)}};Literal$1.Literal=Literal,_Literal_literal=new WeakMap,_Literal_url=new WeakMap;var PerspectiveHandle$1={},Neighbourhood$1={},__decorate$2=commonjsGlobal&&commonjsGlobal.__decorate||function(e,t,n,r){var o=arguments.length,a=o<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(e,t,n,r);else for(var u=e.length-1;u>=0;u--)(s=e[u])&&(a=(o<3?s(a):o>3?s(t,n,a):s(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},__metadata$2=commonjsGlobal&&commonjsGlobal.__metadata||function(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)};Object.defineProperty(Neighbourhood$1,"__esModule",{value:!0}),Neighbourhood$1.NeighbourhoodExpression=Neighbourhood$1.Neighbourhood=void 0;var type_graphql_1$2=typeGraphql,Expression_1$1=Expression$1,Perspective_1=Perspective$1,Neighbourhood=class{constructor(e,t){this.linkLanguage=e,this.meta=t}};__decorate$2([(0,type_graphql_1$2.Field)(),__metadata$2("design:type",String)],Neighbourhood.prototype,"linkLanguage",void 0),__decorate$2([(0,type_graphql_1$2.Field)(),__metadata$2("design:type",Perspective_1.Perspective)],Neighbourhood.prototype,"meta",void 0),Neighbourhood=__decorate$2([(0,type_graphql_1$2.ObjectType)(),__metadata$2("design:paramtypes",[String,Perspective_1.Perspective])],Neighbourhood),Neighbourhood$1.Neighbourhood=Neighbourhood;var NeighbourhoodExpression=class extends(0,Expression_1$1.ExpressionGeneric)(Neighbourhood){};NeighbourhoodExpression=__decorate$2([(0,type_graphql_1$2.ObjectType)()],NeighbourhoodExpression),Neighbourhood$1.NeighbourhoodExpression=NeighbourhoodExpression;var __decorate$1=commonjsGlobal&&commonjsGlobal.__decorate||function(e,t,n,r){var o=arguments.length,a=o<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(e,t,n,r);else for(var u=e.length-1;u>=0;u--)(s=e[u])&&(a=(o<3?s(a):o>3?s(t,n,a):s(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},__metadata$1=commonjsGlobal&&commonjsGlobal.__metadata||function(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)};Object.defineProperty(PerspectiveHandle$1,"__esModule",{value:!0}),PerspectiveHandle$1.PerspectiveHandle=void 0;var type_graphql_1$1=typeGraphql,Neighbourhood_1=Neighbourhood$1,PerspectiveHandle=class{constructor(e,t){this.uuid=e,this.name=t}};__decorate$1([(0,type_graphql_1$1.Field)(),__metadata$1("design:type",String)],PerspectiveHandle.prototype,"uuid",void 0),__decorate$1([(0,type_graphql_1$1.Field)(),__metadata$1("design:type",String)],PerspectiveHandle.prototype,"name",void 0),__decorate$1([(0,type_graphql_1$1.Field)(e=>String,{nullable:!0}),__metadata$1("design:type",String)],PerspectiveHandle.prototype,"sharedUrl",void 0),__decorate$1([(0,type_graphql_1$1.Field)(e=>Neighbourhood_1.Neighbourhood,{nullable:!0}),__metadata$1("design:type",Neighbourhood_1.Neighbourhood)],PerspectiveHandle.prototype,"neighbourhood",void 0),PerspectiveHandle=__decorate$1([(0,type_graphql_1$1.ObjectType)(),__metadata$1("design:paramtypes",[String,String])],PerspectiveHandle),PerspectiveHandle$1.PerspectiveHandle=PerspectiveHandle;var PerspectiveDiff$1={},__decorate=commonjsGlobal&&commonjsGlobal.__decorate||function(e,t,n,r){var o=arguments.length,a=o<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(e,t,n,r);else for(var u=e.length-1;u>=0;u--)(s=e[u])&&(a=(o<3?s(a):o>3?s(t,n,a):s(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},__metadata=commonjsGlobal&&commonjsGlobal.__metadata||function(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)};Object.defineProperty(PerspectiveDiff$1,"__esModule",{value:!0}),PerspectiveDiff$1.PerspectiveDiffExpression=PerspectiveDiff$1.PerspectiveDiff=void 0;var type_graphql_1=typeGraphql,Expression_1=Expression$1,Links_1=Links,PerspectiveDiff=class{};__decorate([(0,type_graphql_1.Field)(e=>[Links_1.LinkExpression]),__metadata("design:type",Array)],PerspectiveDiff.prototype,"additions",void 0),__decorate([(0,type_graphql_1.Field)(e=>[Links_1.LinkExpression]),__metadata("design:type",Array)],PerspectiveDiff.prototype,"removals",void 0),PerspectiveDiff=__decorate([(0,type_graphql_1.ObjectType)()],PerspectiveDiff),PerspectiveDiff$1.PerspectiveDiff=PerspectiveDiff;var PerspectiveDiffExpression=class extends(0,Expression_1.ExpressionGeneric)(PerspectiveDiff){};PerspectiveDiffExpression=__decorate([(0,type_graphql_1.ObjectType)()],PerspectiveDiffExpression),PerspectiveDiff$1.PerspectiveDiffExpression=PerspectiveDiffExpression;var typeDefsString=`
type Agent {
  did: String!
  directMessageLanguage: String
  perspective: Perspective
}

type AgentStatus {
  did: String
  didDocument: String
  error: String
  isInitialized: Boolean!
  isUnlocked: Boolean!
}

scalar DateTime

type EntanglementProof {
  deviceKey: String!
  deviceKeySignedByDid: String!
  deviceKeyType: String!
  did: String!
  didSignedByDeviceKey: String
  didSigningKeyId: String!
}

input EntanglementProofInput {
  deviceKey: String!
  deviceKeySignedByDid: String!
  deviceKeyType: String!
  did: String!
  didSignedByDeviceKey: String!
  didSigningKeyId: String!
}

type ExceptionInfo {
  addon: String
  message: String!
  title: String!
  type: Float!
}

type ExpressionProof {
  invalid: Boolean
  key: String!
  signature: String!
  valid: Boolean
}

input ExpressionProofInput {
  invalid: Boolean
  key: String!
  signature: String!
  valid: Boolean
}

type ExpressionRendered {
  author: String!
  data: String!
  icon: Icon!
  language: LanguageRef!
  proof: ExpressionProof!
  timestamp: String!
}

type Icon {
  code: String!
}

input InteractionCall {
  name: String!
  parametersStringified: String!
}

type InteractionMeta {
  label: String!
  name: String!
  parameters: [InteractionParameter!]!
}

type InteractionParameter {
  name: String!
  type: String!
}

type LanguageHandle {
  address: String!
  constructorIcon: Icon
  icon: Icon
  name: String!
  settings: String
  settingsIcon: Icon
}

type LanguageMeta {
  address: String!
  author: String!
  description: String
  name: String!
  possibleTemplateParams: [String!]
  sourceCodeLink: String
  templateAppliedParams: String
  templateSourceLanguageAddress: String
  templated: Boolean
}

input LanguageMetaInput {
  description: String = ""
  name: String!
  possibleTemplateParams: [String!]
  sourceCodeLink: String
}

type LanguageRef {
  address: String!
  name: String!
}

type Link {
  predicate: String
  source: String!
  target: String!
}

type LinkExpression {
  author: String!
  data: Link!
  proof: ExpressionProof!
  timestamp: String!
}

input LinkExpressionInput {
  author: String!
  data: LinkInput!
  proof: ExpressionProofInput!
  timestamp: String!
}

input LinkInput {
  predicate: String
  source: String!
  target: String!
}

input LinkQuery {
  fromDate: DateTime
  limit: Float
  predicate: String
  source: String
  target: String
  untilDate: DateTime
}

type Mutation {
  addTrustedAgents(agents: [String!]!): [String!]!
  agentAddEntanglementProofs(proofs: [EntanglementProofInput!]!): [EntanglementProof!]!
  agentDeleteEntanglementProofs(proofs: [EntanglementProofInput!]!): [EntanglementProof!]!
  agentEntanglementProofPreFlight(deviceKey: String!, deviceKeyType: String!): EntanglementProof!
  agentGenerate(passphrase: String!): AgentStatus!
  agentGenerateJwt(rand: String!, requestId: String!): String!
  agentImport(did: String!, didDocument: String!, keystore: String!, passphrase: String!): AgentStatus!
  agentLock(passphrase: String!): AgentStatus!
  agentPermitCapability(auth: String!): String!
  agentRequestCapability(appDesc: String!, appName: String!, appUrl: String!, capabilities: String!): String!
  agentUnlock(passphrase: String!): AgentStatus!
  agentUpdateDirectMessageLanguage(directMessageLanguage: String!): Agent!
  agentUpdatePublicPerspective(perspective: PerspectiveInput!): Agent!
  deleteTrustedAgents(agents: [String!]!): [String!]!
  expressionCreate(content: String!, languageAddress: String!): String!
  expressionInteract(interactionCall: InteractionCall!, url: String!): String
  languageApplyTemplateAndPublish(sourceLanguageHash: String!, templateData: String!): LanguageRef!
  languagePublish(languageMeta: LanguageMetaInput!, languagePath: String!): LanguageMeta!
  languageWriteSettings(languageAddress: String!, settings: String!): Boolean!
  neighbourhoodJoinFromUrl(url: String!): PerspectiveHandle!
  neighbourhoodPublishFromPerspective(linkLanguage: String!, meta: PerspectiveInput!, perspectiveUUID: String!): String!
  perspectiveAdd(name: String!): PerspectiveHandle!
  perspectiveAddLink(link: LinkInput!, uuid: String!): LinkExpression!
  perspectivePublishSnapshot(uuid: String!): String
  perspectiveRemove(uuid: String!): Boolean!
  perspectiveRemoveLink(link: LinkExpressionInput!, uuid: String!): Boolean!
  perspectiveUpdate(name: String!, uuid: String!): PerspectiveHandle
  perspectiveUpdateLink(newLink: LinkInput!, oldLink: LinkExpressionInput!, uuid: String!): LinkExpression!
  runtimeAddFriends(dids: [String!]!): [String!]!
  runtimeAddKnownLinkLanguageTemplates(addresses: [String!]!): [String!]!
  runtimeFriendSendMessage(did: String!, message: PerspectiveInput!): Boolean!
  runtimeHcAddAgentInfos(agentInfos: String!): Boolean!
  runtimeOpenLink(url: String!): Boolean!
  runtimeQuit: Boolean!
  runtimeRemoveFriends(dids: [String!]!): [String!]!
  runtimeRemoveKnownLinkLanguageTemplates(addresses: [String!]!): [String!]!
  runtimeSetStatus(status: PerspectiveInput!): Boolean!
}

type Neighbourhood {
  linkLanguage: String!
  meta: Perspective!
}

type Perspective {
  links: [LinkExpression!]!
}

type PerspectiveExpression {
  author: String!
  data: Perspective!
  proof: ExpressionProof!
  timestamp: String!
}

type PerspectiveHandle {
  name: String!
  neighbourhood: Neighbourhood
  sharedUrl: String
  uuid: String!
}

input PerspectiveInput {
  links: [LinkExpressionInput!]!
}

type Query {
  agent: Agent!
  agentByDID(did: String!): Agent
  agentGetEntanglementProofs: [EntanglementProof!]!
  agentStatus: AgentStatus!
  expression(url: String!): ExpressionRendered
  expressionInteractions(url: String!): [InteractionMeta!]!
  expressionMany(urls: [String!]!): [ExpressionRendered]!
  expressionRaw(url: String!): String
  getTrustedAgents: [String!]!
  language(address: String!): LanguageHandle
  languageMeta(address: String!): LanguageMeta!
  languageSource(address: String!): String!
  languages(filter: String): [LanguageHandle!]!
  perspective(uuid: String!): PerspectiveHandle
  perspectiveQueryLinks(query: LinkQuery!, uuid: String!): [LinkExpression!]
  perspectiveQueryProlog(query: String!, uuid: String!): String!
  perspectiveSnapshot(uuid: String!): Perspective
  perspectives: [PerspectiveHandle!]!
  runtimeFriendStatus(did: String!): PerspectiveExpression
  runtimeFriends: [String!]!
  runtimeHcAgentInfos: String!
  runtimeInfo: RuntimeInfo!
  runtimeKnownLinkLanguageTemplates: [String!]!
  runtimeMessageInbox(filter: String): [PerspectiveExpression!]!
  runtimeMessageOutbox(filter: String): [SentMessage!]!
  runtimeVerifyStringSignedByDid(data: String!, did: String!, didSigningKeyId: String!, signedData: String!): Boolean!
}

type RuntimeInfo {
  ad4mExecutorVersion: String!
}

type SentMessage {
  message: PerspectiveExpression!
  recipient: String!
}

type Subscription {
  agentStatusChanged: AgentStatus
  agentUpdated: Agent
  exceptionOccurred: ExceptionInfo
  perspectiveAdded: PerspectiveHandle
  perspectiveLinkAdded(uuid: String!): LinkExpression
  perspectiveLinkRemoved(uuid: String!): LinkExpression
  perspectiveRemoved: String
  perspectiveUpdated: PerspectiveHandle
  runtimeMessageReceived: PerspectiveExpression
}
`,typeDefs={typeDefsString};(function(e){var t=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(r,o,a,s){s===void 0&&(s=a),Object.defineProperty(r,s,{enumerable:!0,get:function(){return o[a]}})}:function(r,o,a,s){s===void 0&&(s=a),r[s]=o[a]}),n=commonjsGlobal&&commonjsGlobal.__exportStar||function(r,o){for(var a in r)a!=="default"&&!Object.prototype.hasOwnProperty.call(o,a)&&t(o,r,a)};Object.defineProperty(e,"__esModule",{value:!0}),n(Ad4mClient$1,e),n(Address,e),n(Agent$1,e),n(AgentStatus$1,e),n(Exception,e),n(Expression$1,e),n(ExpressionRef$1,e),n(Icon$1,e),n(Language,e),n(LanguageRef$1,e),n(LanguageContext,e),n(LanguageHandle$1,e),n(LanguageMeta$1,e),n(Links,e),n(Literal$1,e),n(Perspective$1,e),n(PerspectiveHandle$1,e),n(PerspectiveProxy$1,e),n(PerspectiveDiff$1,e),n(LinkQuery$1,e),n(Neighbourhood$1,e),n(typeDefs,e)})(src);var index=getDefaultExportFromCjs(src);module.exports=index}),tf$1=to$1((e,t)=>{(function(n,r){typeof e=="object"&&typeof t<"u"?r(e):typeof define=="function"&&define.amd?define(["exports"],r):(n=typeof globalThis<"u"?globalThis:n||self,r(n.ZXing={}))})(e,function(n){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(by,d){by.__proto__=d}||function(by,d){for(var de in d)d.hasOwnProperty(de)&&(by[de]=d[de])};function o(by,d){r(by,d);function de(){this.constructor=by}by.prototype=d===null?Object.create(d):(de.prototype=d.prototype,new de)}function a(by,d){var de=Object.setPrototypeOf;de?de(by,d):by.__proto__=d}function s(by,d){d===void 0&&(d=by.constructor);var de=Error.captureStackTrace;de&&de(by,d)}var u=function(by){o(d,by);function d(de){var Se=this.constructor,Ue=by.call(this,de)||this;return Object.defineProperty(Ue,"name",{value:Se.name,enumerable:!1}),a(Ue,Se.prototype),s(Ue),Ue}return d}(Error);class l extends u{constructor(d=void 0){super(d),this.message=d}getKind(){return this.constructor.kind}}l.kind="Exception";class c extends l{}c.kind="ArgumentException";class m extends l{}m.kind="IllegalArgumentException";class me{constructor(d){if(this.binarizer=d,d===null)throw new m("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(d,de){return this.binarizer.getBlackRow(d,de)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(d,de,Se,Ue){let Ge=this.binarizer.getLuminanceSource().crop(d,de,Se,Ue);return new me(this.binarizer.createBinarizer(Ge))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){let d=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new me(this.binarizer.createBinarizer(d))}rotateCounterClockwise45(){let d=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new me(this.binarizer.createBinarizer(d))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class xe extends l{static getChecksumInstance(){return new xe}}xe.kind="ChecksumException";class Ne{constructor(d){this.source=d}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class He{static arraycopy(d,de,Se,Ue,Ge){for(;Ge--;)Se[Ue++]=d[de++]}static currentTimeMillis(){return Date.now()}}class Ye extends l{}Ye.kind="IndexOutOfBoundsException";class Je extends Ye{constructor(d=void 0,de=void 0){super(de),this.index=d,this.message=de}}Je.kind="ArrayIndexOutOfBoundsException";class vn{static fill(d,de){for(let Se=0,Ue=d.length;Se<Ue;Se++)d[Se]=de}static fillWithin(d,de,Se,Ue){vn.rangeCheck(d.length,de,Se);for(let Ge=de;Ge<Se;Ge++)d[Ge]=Ue}static rangeCheck(d,de,Se){if(de>Se)throw new m("fromIndex("+de+") > toIndex("+Se+")");if(de<0)throw new Je(de);if(Se>d)throw new Je(Se)}static asList(...d){return d}static create(d,de,Se){return Array.from({length:d}).map(Ue=>Array.from({length:de}).fill(Se))}static createInt32Array(d,de,Se){return Array.from({length:d}).map(Ue=>Int32Array.from({length:de}).fill(Se))}static equals(d,de){if(!d||!de||!d.length||!de.length||d.length!==de.length)return!1;for(let Se=0,Ue=d.length;Se<Ue;Se++)if(d[Se]!==de[Se])return!1;return!0}static hashCode(d){if(d===null)return 0;let de=1;for(let Se of d)de=31*de+Se;return de}static fillUint8Array(d,de){for(let Se=0;Se!==d.length;Se++)d[Se]=de}static copyOf(d,de){return d.slice(0,de)}static copyOfUint8Array(d,de){if(d.length<=de){let Se=new Uint8Array(de);return Se.set(d),Se}return d.slice(0,de)}static copyOfRange(d,de,Se){let Ue=Se-de,Ge=new Int32Array(Ue);return He.arraycopy(d,de,Ge,0,Ue),Ge}static binarySearch(d,de,Se){Se===void 0&&(Se=vn.numberComparator);let Ue=0,Ge=d.length-1;for(;Ue<=Ge;){let Qe=Ge+Ue>>1,gn=Se(de,d[Qe]);if(gn>0)Ue=Qe+1;else if(gn<0)Ge=Qe-1;else return Qe}return-Ue-1}static numberComparator(d,de){return d-de}}class La{static numberOfTrailingZeros(d){let de;if(d===0)return 32;let Se=31;return de=d<<16,de!==0&&(Se-=16,d=de),de=d<<8,de!==0&&(Se-=8,d=de),de=d<<4,de!==0&&(Se-=4,d=de),de=d<<2,de!==0&&(Se-=2,d=de),Se-(d<<1>>>31)}static numberOfLeadingZeros(d){if(d===0)return 32;let de=1;return d>>>16===0&&(de+=16,d<<=16),d>>>24===0&&(de+=8,d<<=8),d>>>28===0&&(de+=4,d<<=4),d>>>30===0&&(de+=2,d<<=2),de-=d>>>31,de}static toHexString(d){return d.toString(16)}static toBinaryString(d){return String(parseInt(String(d),2))}static bitCount(d){return d=d-(d>>>1&1431655765),d=(d&858993459)+(d>>>2&858993459),d=d+(d>>>4)&252645135,d=d+(d>>>8),d=d+(d>>>16),d&63}static truncDivision(d,de){return Math.trunc(d/de)}static parseInt(d,de=void 0){return parseInt(d,de)}}La.MIN_VALUE_32_BITS=-2147483648,La.MAX_VALUE=Number.MAX_SAFE_INTEGER;class sr{constructor(d,de){d===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=d,de==null?this.bits=sr.makeArray(d):this.bits=de)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(d){if(d>this.bits.length*32){let de=sr.makeArray(d);He.arraycopy(this.bits,0,de,0,this.bits.length),this.bits=de}}get(d){return(this.bits[Math.floor(d/32)]&1<<(d&31))!==0}set(d){this.bits[Math.floor(d/32)]|=1<<(d&31)}flip(d){this.bits[Math.floor(d/32)]^=1<<(d&31)}getNextSet(d){let de=this.size;if(d>=de)return de;let Se=this.bits,Ue=Math.floor(d/32),Ge=Se[Ue];Ge&=~((1<<(d&31))-1);let Qe=Se.length;for(;Ge===0;){if(++Ue===Qe)return de;Ge=Se[Ue]}let gn=Ue*32+La.numberOfTrailingZeros(Ge);return gn>de?de:gn}getNextUnset(d){let de=this.size;if(d>=de)return de;let Se=this.bits,Ue=Math.floor(d/32),Ge=~Se[Ue];Ge&=~((1<<(d&31))-1);let Qe=Se.length;for(;Ge===0;){if(++Ue===Qe)return de;Ge=~Se[Ue]}let gn=Ue*32+La.numberOfTrailingZeros(Ge);return gn>de?de:gn}setBulk(d,de){this.bits[Math.floor(d/32)]=de}setRange(d,de){if(de<d||d<0||de>this.size)throw new m;if(de===d)return;de--;let Se=Math.floor(d/32),Ue=Math.floor(de/32),Ge=this.bits;for(let Qe=Se;Qe<=Ue;Qe++){let gn=Qe>Se?0:d&31,Bi=Qe<Ue?31:de&31,Ks=(2<<Bi)-(1<<gn);Ge[Qe]|=Ks}}clear(){let d=this.bits.length,de=this.bits;for(let Se=0;Se<d;Se++)de[Se]=0}isRange(d,de,Se){if(de<d||d<0||de>this.size)throw new m;if(de===d)return!0;de--;let Ue=Math.floor(d/32),Ge=Math.floor(de/32),Qe=this.bits;for(let gn=Ue;gn<=Ge;gn++){let Bi=gn>Ue?0:d&31,Ks=gn<Ge?31:de&31,gy=(2<<Ks)-(1<<Bi)&4294967295;if((Qe[gn]&gy)!==(Se?gy:0))return!1}return!0}appendBit(d){this.ensureCapacity(this.size+1),d&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(d,de){if(de<0||de>32)throw new m("Num bits must be between 0 and 32");this.ensureCapacity(this.size+de);for(let Se=de;Se>0;Se--)this.appendBit((d>>Se-1&1)===1)}appendBitArray(d){let de=d.size;this.ensureCapacity(this.size+de);for(let Se=0;Se<de;Se++)this.appendBit(d.get(Se))}xor(d){if(this.size!==d.size)throw new m("Sizes don't match");let de=this.bits;for(let Se=0,Ue=de.length;Se<Ue;Se++)de[Se]^=d.bits[Se]}toBytes(d,de,Se,Ue){for(let Ge=0;Ge<Ue;Ge++){let Qe=0;for(let gn=0;gn<8;gn++)this.get(d)&&(Qe|=1<<7-gn),d++;de[Se+Ge]=Qe}}getBitArray(){return this.bits}reverse(){let d=new Int32Array(this.bits.length),de=Math.floor((this.size-1)/32),Se=de+1,Ue=this.bits;for(let Ge=0;Ge<Se;Ge++){let Qe=Ue[Ge];Qe=Qe>>1&1431655765|(Qe&1431655765)<<1,Qe=Qe>>2&858993459|(Qe&858993459)<<2,Qe=Qe>>4&252645135|(Qe&252645135)<<4,Qe=Qe>>8&16711935|(Qe&16711935)<<8,Qe=Qe>>16&65535|(Qe&65535)<<16,d[de-Ge]=Qe}if(this.size!==Se*32){let Ge=Se*32-this.size,Qe=d[0]>>>Ge;for(let gn=1;gn<Se;gn++){let Bi=d[gn];Qe|=Bi<<32-Ge,d[gn-1]=Qe,Qe=Bi>>>Ge}d[Se-1]=Qe}this.bits=d}static makeArray(d){return new Int32Array(Math.floor((d+31)/32))}equals(d){if(!(d instanceof sr))return!1;let de=d;return this.size===de.size&&vn.equals(this.bits,de.bits)}hashCode(){return 31*this.size+vn.hashCode(this.bits)}toString(){let d="";for(let de=0,Se=this.size;de<Se;de++)(de&7)===0&&(d+=" "),d+=this.get(de)?"X":".";return d}clone(){return new sr(this.size,this.bits.slice())}}var Zr;(function(by){by[by.OTHER=0]="OTHER",by[by.PURE_BARCODE=1]="PURE_BARCODE",by[by.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",by[by.TRY_HARDER=3]="TRY_HARDER",by[by.CHARACTER_SET=4]="CHARACTER_SET",by[by.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",by[by.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",by[by.ASSUME_GS1=7]="ASSUME_GS1",by[by.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",by[by.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",by[by.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(Zr||(Zr={}));var zs=Zr;class za extends l{static getFormatInstance(){return new za}}za.kind="FormatException";var Hs;(function(by){by[by.Cp437=0]="Cp437",by[by.ISO8859_1=1]="ISO8859_1",by[by.ISO8859_2=2]="ISO8859_2",by[by.ISO8859_3=3]="ISO8859_3",by[by.ISO8859_4=4]="ISO8859_4",by[by.ISO8859_5=5]="ISO8859_5",by[by.ISO8859_6=6]="ISO8859_6",by[by.ISO8859_7=7]="ISO8859_7",by[by.ISO8859_8=8]="ISO8859_8",by[by.ISO8859_9=9]="ISO8859_9",by[by.ISO8859_10=10]="ISO8859_10",by[by.ISO8859_11=11]="ISO8859_11",by[by.ISO8859_13=12]="ISO8859_13",by[by.ISO8859_14=13]="ISO8859_14",by[by.ISO8859_15=14]="ISO8859_15",by[by.ISO8859_16=15]="ISO8859_16",by[by.SJIS=16]="SJIS",by[by.Cp1250=17]="Cp1250",by[by.Cp1251=18]="Cp1251",by[by.Cp1252=19]="Cp1252",by[by.Cp1256=20]="Cp1256",by[by.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",by[by.UTF8=22]="UTF8",by[by.ASCII=23]="ASCII",by[by.Big5=24]="Big5",by[by.GB18030=25]="GB18030",by[by.EUC_KR=26]="EUC_KR"})(Hs||(Hs={}));class lc{constructor(d,de,Se,...Ue){this.valueIdentifier=d,this.name=Se,typeof de=="number"?this.values=Int32Array.from([de]):this.values=de,this.otherEncodingNames=Ue,lc.VALUE_IDENTIFIER_TO_ECI.set(d,this),lc.NAME_TO_ECI.set(Se,this);let Ge=this.values;for(let Qe=0,gn=Ge.length;Qe!==gn;Qe++){let Bi=Ge[Qe];lc.VALUES_TO_ECI.set(Bi,this)}for(let Qe of Ue)lc.NAME_TO_ECI.set(Qe,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(d){if(d<0||d>=900)throw new za("incorect value");let de=lc.VALUES_TO_ECI.get(d);if(de===void 0)throw new za("incorect value");return de}static getCharacterSetECIByName(d){let de=lc.NAME_TO_ECI.get(d);if(de===void 0)throw new za("incorect value");return de}equals(d){if(!(d instanceof lc))return!1;let de=d;return this.getName()===de.getName()}}lc.VALUE_IDENTIFIER_TO_ECI=new Map,lc.VALUES_TO_ECI=new Map,lc.NAME_TO_ECI=new Map,lc.Cp437=new lc(Hs.Cp437,Int32Array.from([0,2]),"Cp437"),lc.ISO8859_1=new lc(Hs.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),lc.ISO8859_2=new lc(Hs.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),lc.ISO8859_3=new lc(Hs.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),lc.ISO8859_4=new lc(Hs.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),lc.ISO8859_5=new lc(Hs.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),lc.ISO8859_6=new lc(Hs.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),lc.ISO8859_7=new lc(Hs.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),lc.ISO8859_8=new lc(Hs.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),lc.ISO8859_9=new lc(Hs.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),lc.ISO8859_10=new lc(Hs.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),lc.ISO8859_11=new lc(Hs.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),lc.ISO8859_13=new lc(Hs.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),lc.ISO8859_14=new lc(Hs.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),lc.ISO8859_15=new lc(Hs.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),lc.ISO8859_16=new lc(Hs.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),lc.SJIS=new lc(Hs.SJIS,20,"SJIS","Shift_JIS"),lc.Cp1250=new lc(Hs.Cp1250,21,"Cp1250","windows-1250"),lc.Cp1251=new lc(Hs.Cp1251,22,"Cp1251","windows-1251"),lc.Cp1252=new lc(Hs.Cp1252,23,"Cp1252","windows-1252"),lc.Cp1256=new lc(Hs.Cp1256,24,"Cp1256","windows-1256"),lc.UnicodeBigUnmarked=new lc(Hs.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),lc.UTF8=new lc(Hs.UTF8,26,"UTF8","UTF-8"),lc.ASCII=new lc(Hs.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),lc.Big5=new lc(Hs.Big5,28,"Big5"),lc.GB18030=new lc(Hs.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),lc.EUC_KR=new lc(Hs.EUC_KR,30,"EUC_KR","EUC-KR");class Ty extends l{}Ty.kind="UnsupportedOperationException";class _y{static decode(d,de){let Se=this.encodingName(de);return this.customDecoder?this.customDecoder(d,Se):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(Se)?this.decodeFallback(d,Se):new TextDecoder(Se).decode(d)}static shouldDecodeOnFallback(d){return!_y.isBrowser()&&d==="ISO-8859-1"}static encode(d,de){let Se=this.encodingName(de);return this.customEncoder?this.customEncoder(d,Se):typeof TextEncoder>"u"?this.encodeFallback(d):new TextEncoder().encode(d)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(d){return typeof d=="string"?d:d.getName()}static encodingCharacterSet(d){return d instanceof lc?d:lc.getCharacterSetECIByName(d)}static decodeFallback(d,de){let Se=this.encodingCharacterSet(de);if(_y.isDecodeFallbackSupported(Se)){let Ue="";for(let Ge=0,Qe=d.length;Ge<Qe;Ge++){let gn=d[Ge].toString(16);gn.length<2&&(gn="0"+gn),Ue+="%"+gn}return decodeURIComponent(Ue)}if(Se.equals(lc.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(d.buffer));throw new Ty(`Encoding ${this.encodingName(de)} not supported by fallback.`)}static isDecodeFallbackSupported(d){return d.equals(lc.UTF8)||d.equals(lc.ISO8859_1)||d.equals(lc.ASCII)}static encodeFallback(d){let de=btoa(unescape(encodeURIComponent(d))).split(""),Se=[];for(let Ue=0;Ue<de.length;Ue++)Se.push(de[Ue].charCodeAt(0));return new Uint8Array(Se)}}class xy{static castAsNonUtf8Char(d,de=null){let Se=de?de.getName():this.ISO88591;return _y.decode(new Uint8Array([d]),Se)}static guessEncoding(d,de){if(de!=null&&de.get(zs.CHARACTER_SET)!==void 0)return de.get(zs.CHARACTER_SET).toString();let Se=d.length,Ue=!0,Ge=!0,Qe=!0,gn=0,Bi=0,Ks=0,gy=0,Cy=0,Oy=0,Nb=0,qb=0,Ub=0,e2=0,c2=0,k2=d.length>3&&d[0]===239&&d[1]===187&&d[2]===191;for(let $2=0;$2<Se&&(Ue||Ge||Qe);$2++){let _2=d[$2]&255;Qe&&(gn>0?(_2&128)===0?Qe=!1:gn--:(_2&128)!==0&&((_2&64)===0?Qe=!1:(gn++,(_2&32)===0?Bi++:(gn++,(_2&16)===0?Ks++:(gn++,(_2&8)===0?gy++:Qe=!1))))),Ue&&(_2>127&&_2<160?Ue=!1:_2>159&&(_2<192||_2===215||_2===247)&&c2++),Ge&&(Cy>0?_2<64||_2===127||_2>252?Ge=!1:Cy--:_2===128||_2===160||_2>239?Ge=!1:_2>160&&_2<224?(Oy++,qb=0,Nb++,Nb>Ub&&(Ub=Nb)):_2>127?(Cy++,Nb=0,qb++,qb>e2&&(e2=qb)):(Nb=0,qb=0))}return Qe&&gn>0&&(Qe=!1),Ge&&Cy>0&&(Ge=!1),Qe&&(k2||Bi+Ks+gy>0)?xy.UTF8:Ge&&(xy.ASSUME_SHIFT_JIS||Ub>=3||e2>=3)?xy.SHIFT_JIS:Ue&&Ge?Ub===2&&Oy===2||c2*10>=Se?xy.SHIFT_JIS:xy.ISO88591:Ue?xy.ISO88591:Ge?xy.SHIFT_JIS:Qe?xy.UTF8:xy.PLATFORM_DEFAULT_ENCODING}static format(d,...de){let Se=-1;function Ue(Qe,gn,Bi,Ks,gy,Cy){if(Qe==="%%")return"%";if(de[++Se]===void 0)return;Qe=Ks?parseInt(Ks.substr(1)):void 0;let Oy=gy?parseInt(gy.substr(1)):void 0,Nb;switch(Cy){case"s":Nb=de[Se];break;case"c":Nb=de[Se][0];break;case"f":Nb=parseFloat(de[Se]).toFixed(Qe);break;case"p":Nb=parseFloat(de[Se]).toPrecision(Qe);break;case"e":Nb=parseFloat(de[Se]).toExponential(Qe);break;case"x":Nb=parseInt(de[Se]).toString(Oy||16);break;case"d":Nb=parseFloat(parseInt(de[Se],Oy||10).toPrecision(Qe)).toFixed(0);break}Nb=typeof Nb=="object"?JSON.stringify(Nb):(+Nb).toString(Oy);let qb=parseInt(Bi),Ub=Bi&&Bi[0]+""=="0"?"0":" ";for(;Nb.length<qb;)Nb=gn!==void 0?Nb+Ub:Ub+Nb;return Nb}let Ge=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return d.replace(Ge,Ue)}static getBytes(d,de){return _y.encode(d,de)}static getCharCode(d,de=0){return d.charCodeAt(de)}static getCharAt(d){return String.fromCharCode(d)}}xy.SHIFT_JIS=lc.SJIS.getName(),xy.GB2312="GB2312",xy.ISO88591=lc.ISO8859_1.getName(),xy.EUC_JP="EUC_JP",xy.UTF8=lc.UTF8.getName(),xy.PLATFORM_DEFAULT_ENCODING=xy.UTF8,xy.ASSUME_SHIFT_JIS=!1;class Bb{constructor(d=""){this.value=d}enableDecoding(d){return this.encoding=d,this}append(d){return typeof d=="string"?this.value+=d.toString():this.encoding?this.value+=xy.castAsNonUtf8Char(d,this.encoding):this.value+=String.fromCharCode(d),this}appendChars(d,de,Se){for(let Ue=de;de<de+Se;Ue++)this.append(d[Ue]);return this}length(){return this.value.length}charAt(d){return this.value.charAt(d)}deleteCharAt(d){this.value=this.value.substr(0,d)+this.value.substring(d+1)}setCharAt(d,de){this.value=this.value.substr(0,d)+de+this.value.substr(d+1)}substring(d,de){return this.value.substring(d,de)}setLengthToZero(){this.value=""}toString(){return this.value}insert(d,de){this.value=this.value.substr(0,d)+de+this.value.substr(d+de.length)}}class Dy{constructor(d,de,Se,Ue){if(this.width=d,this.height=de,this.rowSize=Se,this.bits=Ue,de==null&&(de=d),this.height=de,d<1||de<1)throw new m("Both dimensions must be greater than 0");Se==null&&(Se=Math.floor((d+31)/32)),this.rowSize=Se,Ue==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(d){let de=d.length,Se=d[0].length,Ue=new Dy(Se,de);for(let Ge=0;Ge<de;Ge++){let Qe=d[Ge];for(let gn=0;gn<Se;gn++)Qe[gn]&&Ue.set(gn,Ge)}return Ue}static parseFromString(d,de,Se){if(d===null)throw new m("stringRepresentation cannot be null");let Ue=new Array(d.length),Ge=0,Qe=0,gn=-1,Bi=0,Ks=0;for(;Ks<d.length;)if(d.charAt(Ks)===`
`||d.charAt(Ks)==="\r"){if(Ge>Qe){if(gn===-1)gn=Ge-Qe;else if(Ge-Qe!==gn)throw new m("row lengths do not match");Qe=Ge,Bi++}Ks++}else if(d.substring(Ks,Ks+de.length)===de)Ks+=de.length,Ue[Ge]=!0,Ge++;else if(d.substring(Ks,Ks+Se.length)===Se)Ks+=Se.length,Ue[Ge]=!1,Ge++;else throw new m("illegal character encountered: "+d.substring(Ks));if(Ge>Qe){if(gn===-1)gn=Ge-Qe;else if(Ge-Qe!==gn)throw new m("row lengths do not match");Bi++}let gy=new Dy(gn,Bi);for(let Cy=0;Cy<Ge;Cy++)Ue[Cy]&&gy.set(Math.floor(Cy%gn),Math.floor(Cy/gn));return gy}get(d,de){let Se=de*this.rowSize+Math.floor(d/32);return(this.bits[Se]>>>(d&31)&1)!==0}set(d,de){let Se=de*this.rowSize+Math.floor(d/32);this.bits[Se]|=1<<(d&31)&4294967295}unset(d,de){let Se=de*this.rowSize+Math.floor(d/32);this.bits[Se]&=~(1<<(d&31)&4294967295)}flip(d,de){let Se=de*this.rowSize+Math.floor(d/32);this.bits[Se]^=1<<(d&31)&4294967295}xor(d){if(this.width!==d.getWidth()||this.height!==d.getHeight()||this.rowSize!==d.getRowSize())throw new m("input matrix dimensions do not match");let de=new sr(Math.floor(this.width/32)+1),Se=this.rowSize,Ue=this.bits;for(let Ge=0,Qe=this.height;Ge<Qe;Ge++){let gn=Ge*Se,Bi=d.getRow(Ge,de).getBitArray();for(let Ks=0;Ks<Se;Ks++)Ue[gn+Ks]^=Bi[Ks]}}clear(){let d=this.bits,de=d.length;for(let Se=0;Se<de;Se++)d[Se]=0}setRegion(d,de,Se,Ue){if(de<0||d<0)throw new m("Left and top must be nonnegative");if(Ue<1||Se<1)throw new m("Height and width must be at least 1");let Ge=d+Se,Qe=de+Ue;if(Qe>this.height||Ge>this.width)throw new m("The region must fit inside the matrix");let gn=this.rowSize,Bi=this.bits;for(let Ks=de;Ks<Qe;Ks++){let gy=Ks*gn;for(let Cy=d;Cy<Ge;Cy++)Bi[gy+Math.floor(Cy/32)]|=1<<(Cy&31)&4294967295}}getRow(d,de){de==null||de.getSize()<this.width?de=new sr(this.width):de.clear();let Se=this.rowSize,Ue=this.bits,Ge=d*Se;for(let Qe=0;Qe<Se;Qe++)de.setBulk(Qe*32,Ue[Ge+Qe]);return de}setRow(d,de){He.arraycopy(de.getBitArray(),0,this.bits,d*this.rowSize,this.rowSize)}rotate180(){let d=this.getWidth(),de=this.getHeight(),Se=new sr(d),Ue=new sr(d);for(let Ge=0,Qe=Math.floor((de+1)/2);Ge<Qe;Ge++)Se=this.getRow(Ge,Se),Ue=this.getRow(de-1-Ge,Ue),Se.reverse(),Ue.reverse(),this.setRow(Ge,Ue),this.setRow(de-1-Ge,Se)}getEnclosingRectangle(){let d=this.width,de=this.height,Se=this.rowSize,Ue=this.bits,Ge=d,Qe=de,gn=-1,Bi=-1;for(let Ks=0;Ks<de;Ks++)for(let gy=0;gy<Se;gy++){let Cy=Ue[Ks*Se+gy];if(Cy!==0){if(Ks<Qe&&(Qe=Ks),Ks>Bi&&(Bi=Ks),gy*32<Ge){let Oy=0;for(;(Cy<<31-Oy&4294967295)===0;)Oy++;gy*32+Oy<Ge&&(Ge=gy*32+Oy)}if(gy*32+31>gn){let Oy=31;for(;Cy>>>Oy===0;)Oy--;gy*32+Oy>gn&&(gn=gy*32+Oy)}}}return gn<Ge||Bi<Qe?null:Int32Array.from([Ge,Qe,gn-Ge+1,Bi-Qe+1])}getTopLeftOnBit(){let d=this.rowSize,de=this.bits,Se=0;for(;Se<de.length&&de[Se]===0;)Se++;if(Se===de.length)return null;let Ue=Se/d,Ge=Se%d*32,Qe=de[Se],gn=0;for(;(Qe<<31-gn&4294967295)===0;)gn++;return Ge+=gn,Int32Array.from([Ge,Ue])}getBottomRightOnBit(){let d=this.rowSize,de=this.bits,Se=de.length-1;for(;Se>=0&&de[Se]===0;)Se--;if(Se<0)return null;let Ue=Math.floor(Se/d),Ge=Math.floor(Se%d)*32,Qe=de[Se],gn=31;for(;Qe>>>gn===0;)gn--;return Ge+=gn,Int32Array.from([Ge,Ue])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(d){if(!(d instanceof Dy))return!1;let de=d;return this.width===de.width&&this.height===de.height&&this.rowSize===de.rowSize&&vn.equals(this.bits,de.bits)}hashCode(){let d=this.width;return d=31*d+this.width,d=31*d+this.height,d=31*d+this.rowSize,d=31*d+vn.hashCode(this.bits),d}toString(d="X ",de="  ",Se=`
`){return this.buildToString(d,de,Se)}buildToString(d,de,Se){let Ue=new Bb;for(let Ge=0,Qe=this.height;Ge<Qe;Ge++){for(let gn=0,Bi=this.width;gn<Bi;gn++)Ue.append(this.get(gn,Ge)?d:de);Ue.append(Se)}return Ue.toString()}clone(){return new Dy(this.width,this.height,this.rowSize,this.bits.slice())}}class Bg extends l{static getNotFoundInstance(){return new Bg}}Bg.kind="NotFoundException";class yy extends Ne{constructor(d){super(d),this.luminances=yy.EMPTY,this.buckets=new Int32Array(yy.LUMINANCE_BUCKETS)}getBlackRow(d,de){let Se=this.getLuminanceSource(),Ue=Se.getWidth();de==null||de.getSize()<Ue?de=new sr(Ue):de.clear(),this.initArrays(Ue);let Ge=Se.getRow(d,this.luminances),Qe=this.buckets;for(let Bi=0;Bi<Ue;Bi++)Qe[(Ge[Bi]&255)>>yy.LUMINANCE_SHIFT]++;let gn=yy.estimateBlackPoint(Qe);if(Ue<3)for(let Bi=0;Bi<Ue;Bi++)(Ge[Bi]&255)<gn&&de.set(Bi);else{let Bi=Ge[0]&255,Ks=Ge[1]&255;for(let gy=1;gy<Ue-1;gy++){let Cy=Ge[gy+1]&255;(Ks*4-Bi-Cy)/2<gn&&de.set(gy),Bi=Ks,Ks=Cy}}return de}getBlackMatrix(){let d=this.getLuminanceSource(),de=d.getWidth(),Se=d.getHeight(),Ue=new Dy(de,Se);this.initArrays(de);let Ge=this.buckets;for(let Bi=1;Bi<5;Bi++){let Ks=Math.floor(Se*Bi/5),gy=d.getRow(Ks,this.luminances),Cy=Math.floor(de*4/5);for(let Oy=Math.floor(de/5);Oy<Cy;Oy++){let Nb=gy[Oy]&255;Ge[Nb>>yy.LUMINANCE_SHIFT]++}}let Qe=yy.estimateBlackPoint(Ge),gn=d.getMatrix();for(let Bi=0;Bi<Se;Bi++){let Ks=Bi*de;for(let gy=0;gy<de;gy++)(gn[Ks+gy]&255)<Qe&&Ue.set(gy,Bi)}return Ue}createBinarizer(d){return new yy(d)}initArrays(d){this.luminances.length<d&&(this.luminances=new Uint8ClampedArray(d));let de=this.buckets;for(let Se=0;Se<yy.LUMINANCE_BUCKETS;Se++)de[Se]=0}static estimateBlackPoint(d){let de=d.length,Se=0,Ue=0,Ge=0;for(let gy=0;gy<de;gy++)d[gy]>Ge&&(Ue=gy,Ge=d[gy]),d[gy]>Se&&(Se=d[gy]);let Qe=0,gn=0;for(let gy=0;gy<de;gy++){let Cy=gy-Ue,Oy=d[gy]*Cy*Cy;Oy>gn&&(Qe=gy,gn=Oy)}if(Ue>Qe){let gy=Ue;Ue=Qe,Qe=gy}if(Qe-Ue<=de/16)throw new Bg;let Bi=Qe-1,Ks=-1;for(let gy=Qe-1;gy>Ue;gy--){let Cy=gy-Ue,Oy=Cy*Cy*(Qe-gy)*(Se-d[gy]);Oy>Ks&&(Bi=gy,Ks=Oy)}return Bi<<yy.LUMINANCE_SHIFT}}yy.LUMINANCE_BITS=5,yy.LUMINANCE_SHIFT=8-yy.LUMINANCE_BITS,yy.LUMINANCE_BUCKETS=1<<yy.LUMINANCE_BITS,yy.EMPTY=Uint8ClampedArray.from([0]);class wy extends yy{constructor(d){super(d),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;let d=this.getLuminanceSource(),de=d.getWidth(),Se=d.getHeight();if(de>=wy.MINIMUM_DIMENSION&&Se>=wy.MINIMUM_DIMENSION){let Ue=d.getMatrix(),Ge=de>>wy.BLOCK_SIZE_POWER;(de&wy.BLOCK_SIZE_MASK)!==0&&Ge++;let Qe=Se>>wy.BLOCK_SIZE_POWER;(Se&wy.BLOCK_SIZE_MASK)!==0&&Qe++;let gn=wy.calculateBlackPoints(Ue,Ge,Qe,de,Se),Bi=new Dy(de,Se);wy.calculateThresholdForBlock(Ue,Ge,Qe,de,Se,gn,Bi),this.matrix=Bi}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(d){return new wy(d)}static calculateThresholdForBlock(d,de,Se,Ue,Ge,Qe,gn){let Bi=Ge-wy.BLOCK_SIZE,Ks=Ue-wy.BLOCK_SIZE;for(let gy=0;gy<Se;gy++){let Cy=gy<<wy.BLOCK_SIZE_POWER;Cy>Bi&&(Cy=Bi);let Oy=wy.cap(gy,2,Se-3);for(let Nb=0;Nb<de;Nb++){let qb=Nb<<wy.BLOCK_SIZE_POWER;qb>Ks&&(qb=Ks);let Ub=wy.cap(Nb,2,de-3),e2=0;for(let k2=-2;k2<=2;k2++){let $2=Qe[Oy+k2];e2+=$2[Ub-2]+$2[Ub-1]+$2[Ub]+$2[Ub+1]+$2[Ub+2]}let c2=e2/25;wy.thresholdBlock(d,qb,Cy,c2,Ue,gn)}}}static cap(d,de,Se){return d<de?de:d>Se?Se:d}static thresholdBlock(d,de,Se,Ue,Ge,Qe){for(let gn=0,Bi=Se*Ge+de;gn<wy.BLOCK_SIZE;gn++,Bi+=Ge)for(let Ks=0;Ks<wy.BLOCK_SIZE;Ks++)(d[Bi+Ks]&255)<=Ue&&Qe.set(de+Ks,Se+gn)}static calculateBlackPoints(d,de,Se,Ue,Ge){let Qe=Ge-wy.BLOCK_SIZE,gn=Ue-wy.BLOCK_SIZE,Bi=new Array(Se);for(let Ks=0;Ks<Se;Ks++){Bi[Ks]=new Int32Array(de);let gy=Ks<<wy.BLOCK_SIZE_POWER;gy>Qe&&(gy=Qe);for(let Cy=0;Cy<de;Cy++){let Oy=Cy<<wy.BLOCK_SIZE_POWER;Oy>gn&&(Oy=gn);let Nb=0,qb=255,Ub=0;for(let c2=0,k2=gy*Ue+Oy;c2<wy.BLOCK_SIZE;c2++,k2+=Ue){for(let $2=0;$2<wy.BLOCK_SIZE;$2++){let _2=d[k2+$2]&255;Nb+=_2,_2<qb&&(qb=_2),_2>Ub&&(Ub=_2)}if(Ub-qb>wy.MIN_DYNAMIC_RANGE)for(c2++,k2+=Ue;c2<wy.BLOCK_SIZE;c2++,k2+=Ue)for(let $2=0;$2<wy.BLOCK_SIZE;$2++)Nb+=d[k2+$2]&255}let e2=Nb>>wy.BLOCK_SIZE_POWER*2;if(Ub-qb<=wy.MIN_DYNAMIC_RANGE&&(e2=qb/2,Ks>0&&Cy>0)){let c2=(Bi[Ks-1][Cy]+2*Bi[Ks][Cy-1]+Bi[Ks-1][Cy-1])/4;qb<c2&&(e2=c2)}Bi[Ks][Cy]=e2}}return Bi}}wy.BLOCK_SIZE_POWER=3,wy.BLOCK_SIZE=1<<wy.BLOCK_SIZE_POWER,wy.BLOCK_SIZE_MASK=wy.BLOCK_SIZE-1,wy.MINIMUM_DIMENSION=wy.BLOCK_SIZE*5,wy.MIN_DYNAMIC_RANGE=24;class Ay{constructor(d,de){this.width=d,this.height=de}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(d,de,Se,Ue){throw new Ty("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new Ty("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new Ty("This luminance source does not support rotation by 45 degrees.")}toString(){let d=new Uint8ClampedArray(this.width),de=new Bb;for(let Se=0;Se<this.height;Se++){let Ue=this.getRow(Se,d);for(let Ge=0;Ge<this.width;Ge++){let Qe=Ue[Ge]&255,gn;Qe<64?gn="#":Qe<128?gn="+":Qe<192?gn=".":gn=" ",de.append(gn)}de.append(`
`)}return de.toString()}}class $b extends Ay{constructor(d){super(d.getWidth(),d.getHeight()),this.delegate=d}getRow(d,de){let Se=this.delegate.getRow(d,de),Ue=this.getWidth();for(let Ge=0;Ge<Ue;Ge++)Se[Ge]=255-(Se[Ge]&255);return Se}getMatrix(){let d=this.delegate.getMatrix(),de=this.getWidth()*this.getHeight(),Se=new Uint8ClampedArray(de);for(let Ue=0;Ue<de;Ue++)Se[Ue]=255-(d[Ue]&255);return Se}isCropSupported(){return this.delegate.isCropSupported()}crop(d,de,Se,Ue){return new $b(this.delegate.crop(d,de,Se,Ue))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new $b(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new $b(this.delegate.rotateCounterClockwise45())}}class e0 extends Ay{constructor(d){super(d.width,d.height),this.canvas=d,this.tempCanvasElement=null,this.buffer=e0.makeBufferFromCanvasImageData(d)}static makeBufferFromCanvasImageData(d){let de=d.getContext("2d").getImageData(0,0,d.width,d.height);return e0.toGrayscaleBuffer(de.data,d.width,d.height)}static toGrayscaleBuffer(d,de,Se){let Ue=new Uint8ClampedArray(de*Se);for(let Ge=0,Qe=0,gn=d.length;Ge<gn;Ge+=4,Qe++){let Bi;if(d[Ge+3]===0)Bi=255;else{let Ks=d[Ge],gy=d[Ge+1],Cy=d[Ge+2];Bi=306*Ks+601*gy+117*Cy+512>>10}Ue[Qe]=Bi}return Ue}getRow(d,de){if(d<0||d>=this.getHeight())throw new m("Requested row is outside the image: "+d);let Se=this.getWidth(),Ue=d*Se;return de===null?de=this.buffer.slice(Ue,Ue+Se):(de.length<Se&&(de=new Uint8ClampedArray(Se)),de.set(this.buffer.slice(Ue,Ue+Se))),de}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(d,de,Se,Ue){return super.crop(d,de,Se,Ue),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){let d=this.canvas.ownerDocument.createElement("canvas");d.width=this.canvas.width,d.height=this.canvas.height,this.tempCanvasElement=d}return this.tempCanvasElement}rotate(d){let de=this.getTempCanvasElement(),Se=de.getContext("2d"),Ue=d*e0.DEGREE_TO_RADIANS,Ge=this.canvas.width,Qe=this.canvas.height,gn=Math.ceil(Math.abs(Math.cos(Ue))*Ge+Math.abs(Math.sin(Ue))*Qe),Bi=Math.ceil(Math.abs(Math.sin(Ue))*Ge+Math.abs(Math.cos(Ue))*Qe);return de.width=gn,de.height=Bi,Se.translate(gn/2,Bi/2),Se.rotate(Ue),Se.drawImage(this.canvas,Ge/-2,Qe/-2),this.buffer=e0.makeBufferFromCanvasImageData(de),this}invert(){return new $b(this)}}e0.DEGREE_TO_RADIANS=Math.PI/180;class Hb{constructor(d,de,Se){this.deviceId=d,this.label=de,this.kind="videoinput",this.groupId=Se||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var Yb=(globalThis||global||self||window||void 0)&&(globalThis||global||self||window||void 0).__awaiter||function(by,d,de,Se){function Ue(Ge){return Ge instanceof de?Ge:new de(function(Qe){Qe(Ge)})}return new(de||(de=Promise))(function(Ge,Qe){function gn(gy){try{Ks(Se.next(gy))}catch(Cy){Qe(Cy)}}function Bi(gy){try{Ks(Se.throw(gy))}catch(Cy){Qe(Cy)}}function Ks(gy){gy.done?Ge(gy.value):Ue(gy.value).then(gn,Bi)}Ks((Se=Se.apply(by,d||[])).next())})};class Jb{constructor(d,de=500,Se){this.reader=d,this.timeBetweenScansMillis=de,this._hints=Se,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(d){this._timeBetweenDecodingAttempts=d<0?0:d}set hints(d){this._hints=d||null}get hints(){return this._hints}listVideoInputDevices(){return Yb(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");let d=yield navigator.mediaDevices.enumerateDevices(),de=[];for(let Se of d){let Ue=Se.kind==="video"?"videoinput":Se.kind;if(Ue!=="videoinput")continue;let Ge=Se.deviceId||Se.id,Qe=Se.label||`Video device ${de.length+1}`,gn=Se.groupId,Bi={deviceId:Ge,label:Qe,kind:Ue,groupId:gn};de.push(Bi)}return de})}getVideoInputDevices(){return Yb(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(d=>new Hb(d.deviceId,d.label))})}findDeviceById(d){return Yb(this,void 0,void 0,function*(){let de=yield this.listVideoInputDevices();return de?de.find(Se=>Se.deviceId===d):null})}decodeFromInputVideoDevice(d,de){return Yb(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(d,de)})}decodeOnceFromVideoDevice(d,de){return Yb(this,void 0,void 0,function*(){this.reset();let Se;d?Se={deviceId:{exact:d}}:Se={facingMode:"environment"};let Ue={video:Se};return yield this.decodeOnceFromConstraints(Ue,de)})}decodeOnceFromConstraints(d,de){return Yb(this,void 0,void 0,function*(){let Se=yield navigator.mediaDevices.getUserMedia(d);return yield this.decodeOnceFromStream(Se,de)})}decodeOnceFromStream(d,de){return Yb(this,void 0,void 0,function*(){this.reset();let Se=yield this.attachStreamToVideo(d,de);return yield this.decodeOnce(Se)})}decodeFromInputVideoDeviceContinuously(d,de,Se){return Yb(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(d,de,Se)})}decodeFromVideoDevice(d,de,Se){return Yb(this,void 0,void 0,function*(){let Ue;d?Ue={deviceId:{exact:d}}:Ue={facingMode:"environment"};let Ge={video:Ue};return yield this.decodeFromConstraints(Ge,de,Se)})}decodeFromConstraints(d,de,Se){return Yb(this,void 0,void 0,function*(){let Ue=yield navigator.mediaDevices.getUserMedia(d);return yield this.decodeFromStream(Ue,de,Se)})}decodeFromStream(d,de,Se){return Yb(this,void 0,void 0,function*(){this.reset();let Ue=yield this.attachStreamToVideo(d,de);return yield this.decodeContinuously(Ue,Se)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(d,de){return Yb(this,void 0,void 0,function*(){let Se=this.prepareVideoElement(de);return this.addVideoSource(Se,d),this.videoElement=Se,this.stream=d,yield this.playVideoOnLoadAsync(Se),Se})}playVideoOnLoadAsync(d){return new Promise((de,Se)=>this.playVideoOnLoad(d,()=>de()))}playVideoOnLoad(d,de){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(d),d.addEventListener("ended",this.videoEndedListener),d.addEventListener("canplay",this.videoCanPlayListener),d.addEventListener("playing",de),this.tryPlayVideo(d)}isVideoPlaying(d){return d.currentTime>0&&!d.paused&&!d.ended&&d.readyState>2}tryPlayVideo(d){return Yb(this,void 0,void 0,function*(){if(this.isVideoPlaying(d)){console.warn("Trying to play video that is already playing.");return}try{yield d.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(d,de){let Se=document.getElementById(d);if(!Se)throw new c(`element with id '${d}' not found`);if(Se.nodeName.toLowerCase()!==de.toLowerCase())throw new c(`element with id '${d}' must be an ${de} element`);return Se}decodeFromImage(d,de){if(!d&&!de)throw new c("either imageElement with a src set or an url must be provided");return de&&!d?this.decodeFromImageUrl(de):this.decodeFromImageElement(d)}decodeFromVideo(d,de){if(!d&&!de)throw new c("Either an element with a src set or an URL must be provided");return de&&!d?this.decodeFromVideoUrl(de):this.decodeFromVideoElement(d)}decodeFromVideoContinuously(d,de,Se){if(d===void 0&&de===void 0)throw new c("Either an element with a src set or an URL must be provided");return de&&!d?this.decodeFromVideoUrlContinuously(de,Se):this.decodeFromVideoElementContinuously(d,Se)}decodeFromImageElement(d){if(!d)throw new c("An image element must be provided.");this.reset();let de=this.prepareImageElement(d);this.imageElement=de;let Se;return this.isImageLoaded(de)?Se=this.decodeOnce(de,!1,!0):Se=this._decodeOnLoadImage(de),Se}decodeFromVideoElement(d){let de=this._decodeFromVideoElementSetup(d);return this._decodeOnLoadVideo(de)}decodeFromVideoElementContinuously(d,de){let Se=this._decodeFromVideoElementSetup(d);return this._decodeOnLoadVideoContinuously(Se,de)}_decodeFromVideoElementSetup(d){if(!d)throw new c("A video element must be provided.");this.reset();let de=this.prepareVideoElement(d);return this.videoElement=de,de}decodeFromImageUrl(d){if(!d)throw new c("An URL must be provided.");this.reset();let de=this.prepareImageElement();this.imageElement=de;let Se=this._decodeOnLoadImage(de);return de.src=d,Se}decodeFromVideoUrl(d){if(!d)throw new c("An URL must be provided.");this.reset();let de=this.prepareVideoElement(),Se=this.decodeFromVideoElement(de);return de.src=d,Se}decodeFromVideoUrlContinuously(d,de){if(!d)throw new c("An URL must be provided.");this.reset();let Se=this.prepareVideoElement(),Ue=this.decodeFromVideoElementContinuously(Se,de);return Se.src=d,Ue}_decodeOnLoadImage(d){return new Promise((de,Se)=>{this.imageLoadedListener=()=>this.decodeOnce(d,!1,!0).then(de,Se),d.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(d){return Yb(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(d),yield this.decodeOnce(d)})}_decodeOnLoadVideoContinuously(d,de){return Yb(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(d),this.decodeContinuously(d,de)})}isImageLoaded(d){return!(!d.complete||d.naturalWidth===0)}prepareImageElement(d){let de;return typeof d>"u"&&(de=document.createElement("img"),de.width=200,de.height=200),typeof d=="string"&&(de=this.getMediaElement(d,"img")),d instanceof HTMLImageElement&&(de=d),de}prepareVideoElement(d){let de;return!d&&typeof document<"u"&&(de=document.createElement("video"),de.width=200,de.height=200),typeof d=="string"&&(de=this.getMediaElement(d,"video")),d instanceof HTMLVideoElement&&(de=d),de.setAttribute("autoplay","true"),de.setAttribute("muted","true"),de.setAttribute("playsinline","true"),de}decodeOnce(d,de=!0,Se=!0){this._stopAsyncDecode=!1;let Ue=(Ge,Qe)=>{if(this._stopAsyncDecode){Qe(new Bg("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{let gn=this.decode(d);Ge(gn)}catch(gn){let Bi=de&&gn instanceof Bg,Ks=(gn instanceof xe||gn instanceof za)&&Se;if(Bi||Ks)return setTimeout(Ue,this._timeBetweenDecodingAttempts,Ge,Qe);Qe(gn)}};return new Promise((Ge,Qe)=>Ue(Ge,Qe))}decodeContinuously(d,de){this._stopContinuousDecode=!1;let Se=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{let Ue=this.decode(d);de(Ue,null),setTimeout(Se,this.timeBetweenScansMillis)}catch(Ue){de(null,Ue);let Ge=Ue instanceof xe||Ue instanceof za,Qe=Ue instanceof Bg;(Ge||Qe)&&setTimeout(Se,this._timeBetweenDecodingAttempts)}};Se()}decode(d){let de=this.createBinaryBitmap(d);return this.decodeBitmap(de)}createBinaryBitmap(d){let de=this.getCaptureCanvasContext(d);this.drawImageOnCanvas(de,d);let Se=this.getCaptureCanvas(d),Ue=new e0(Se),Ge=new wy(Ue);return new me(Ge)}getCaptureCanvasContext(d){if(!this.captureCanvasContext){let de=this.getCaptureCanvas(d).getContext("2d");this.captureCanvasContext=de}return this.captureCanvasContext}getCaptureCanvas(d){if(!this.captureCanvas){let de=this.createCaptureCanvas(d);this.captureCanvas=de}return this.captureCanvas}drawImageOnCanvas(d,de){d.drawImage(de,0,0)}decodeBitmap(d){return this.reader.decode(d,this._hints)}createCaptureCanvas(d){if(typeof document>"u")return this._destroyCaptureCanvas(),null;let de=document.createElement("canvas"),Se,Ue;return typeof d<"u"&&(d instanceof HTMLVideoElement?(Se=d.videoWidth,Ue=d.videoHeight):d instanceof HTMLImageElement&&(Se=d.naturalWidth||d.width,Ue=d.naturalHeight||d.height)),de.style.width=Se+"px",de.style.height=Ue+"px",de.width=Se,de.height=Ue,de}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(d=>d.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){!this.videoElement||(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){!this.imageElement||(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(d,de){try{d.srcObject=de}catch{d.src=URL.createObjectURL(de)}}cleanVideoSource(d){try{d.srcObject=null}catch{d.src=""}this.videoElement.removeAttribute("src")}}class l2{constructor(d,de,Se=de==null?0:8*de.length,Ue,Ge,Qe=He.currentTimeMillis()){this.text=d,this.rawBytes=de,this.numBits=Se,this.resultPoints=Ue,this.format=Ge,this.timestamp=Qe,this.text=d,this.rawBytes=de,Se==null?this.numBits=de==null?0:8*de.length:this.numBits=Se,this.resultPoints=Ue,this.format=Ge,this.resultMetadata=null,Qe==null?this.timestamp=He.currentTimeMillis():this.timestamp=Qe}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(d,de){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(d,de)}putAllMetadata(d){d!==null&&(this.resultMetadata===null?this.resultMetadata=d:this.resultMetadata=new Map(d))}addResultPoints(d){let de=this.resultPoints;if(de===null)this.resultPoints=d;else if(d!==null&&d.length>0){let Se=new Array(de.length+d.length);He.arraycopy(de,0,Se,0,de.length),He.arraycopy(d,0,Se,de.length,d.length),this.resultPoints=Se}}getTimestamp(){return this.timestamp}toString(){return this.text}}var y2;(function(by){by[by.AZTEC=0]="AZTEC",by[by.CODABAR=1]="CODABAR",by[by.CODE_39=2]="CODE_39",by[by.CODE_93=3]="CODE_93",by[by.CODE_128=4]="CODE_128",by[by.DATA_MATRIX=5]="DATA_MATRIX",by[by.EAN_8=6]="EAN_8",by[by.EAN_13=7]="EAN_13",by[by.ITF=8]="ITF",by[by.MAXICODE=9]="MAXICODE",by[by.PDF_417=10]="PDF_417",by[by.QR_CODE=11]="QR_CODE",by[by.RSS_14=12]="RSS_14",by[by.RSS_EXPANDED=13]="RSS_EXPANDED",by[by.UPC_A=14]="UPC_A",by[by.UPC_E=15]="UPC_E",by[by.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(y2||(y2={}));var Rb=y2,i2;(function(by){by[by.OTHER=0]="OTHER",by[by.ORIENTATION=1]="ORIENTATION",by[by.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",by[by.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",by[by.ISSUE_NUMBER=4]="ISSUE_NUMBER",by[by.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",by[by.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",by[by.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",by[by.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",by[by.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",by[by.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(i2||(i2={}));var s2=i2;class E2{constructor(d,de,Se,Ue,Ge=-1,Qe=-1){this.rawBytes=d,this.text=de,this.byteSegments=Se,this.ecLevel=Ue,this.structuredAppendSequenceNumber=Ge,this.structuredAppendParity=Qe,this.numBits=d==null?0:8*d.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(d){this.numBits=d}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(d){this.errorsCorrected=d}getErasures(){return this.erasures}setErasures(d){this.erasures=d}getOther(){return this.other}setOther(d){this.other=d}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class L2{exp(d){return this.expTable[d]}log(d){if(d===0)throw new m;return this.logTable[d]}static addOrSubtract(d,de){return d^de}}class T2{constructor(d,de){if(de.length===0)throw new m;this.field=d;let Se=de.length;if(Se>1&&de[0]===0){let Ue=1;for(;Ue<Se&&de[Ue]===0;)Ue++;Ue===Se?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(Se-Ue),He.arraycopy(de,Ue,this.coefficients,0,this.coefficients.length))}else this.coefficients=de}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(d){return this.coefficients[this.coefficients.length-1-d]}evaluateAt(d){if(d===0)return this.getCoefficient(0);let de=this.coefficients,Se;if(d===1){Se=0;for(let Qe=0,gn=de.length;Qe!==gn;Qe++){let Bi=de[Qe];Se=L2.addOrSubtract(Se,Bi)}return Se}Se=de[0];let Ue=de.length,Ge=this.field;for(let Qe=1;Qe<Ue;Qe++)Se=L2.addOrSubtract(Ge.multiply(d,Se),de[Qe]);return Se}addOrSubtract(d){if(!this.field.equals(d.field))throw new m("GenericGFPolys do not have same GenericGF field");if(this.isZero())return d;if(d.isZero())return this;let de=this.coefficients,Se=d.coefficients;if(de.length>Se.length){let Qe=de;de=Se,Se=Qe}let Ue=new Int32Array(Se.length),Ge=Se.length-de.length;He.arraycopy(Se,0,Ue,0,Ge);for(let Qe=Ge;Qe<Se.length;Qe++)Ue[Qe]=L2.addOrSubtract(de[Qe-Ge],Se[Qe]);return new T2(this.field,Ue)}multiply(d){if(!this.field.equals(d.field))throw new m("GenericGFPolys do not have same GenericGF field");if(this.isZero()||d.isZero())return this.field.getZero();let de=this.coefficients,Se=de.length,Ue=d.coefficients,Ge=Ue.length,Qe=new Int32Array(Se+Ge-1),gn=this.field;for(let Bi=0;Bi<Se;Bi++){let Ks=de[Bi];for(let gy=0;gy<Ge;gy++)Qe[Bi+gy]=L2.addOrSubtract(Qe[Bi+gy],gn.multiply(Ks,Ue[gy]))}return new T2(gn,Qe)}multiplyScalar(d){if(d===0)return this.field.getZero();if(d===1)return this;let de=this.coefficients.length,Se=this.field,Ue=new Int32Array(de),Ge=this.coefficients;for(let Qe=0;Qe<de;Qe++)Ue[Qe]=Se.multiply(Ge[Qe],d);return new T2(Se,Ue)}multiplyByMonomial(d,de){if(d<0)throw new m;if(de===0)return this.field.getZero();let Se=this.coefficients,Ue=Se.length,Ge=new Int32Array(Ue+d),Qe=this.field;for(let gn=0;gn<Ue;gn++)Ge[gn]=Qe.multiply(Se[gn],de);return new T2(Qe,Ge)}divide(d){if(!this.field.equals(d.field))throw new m("GenericGFPolys do not have same GenericGF field");if(d.isZero())throw new m("Divide by 0");let de=this.field,Se=de.getZero(),Ue=this,Ge=d.getCoefficient(d.getDegree()),Qe=de.inverse(Ge);for(;Ue.getDegree()>=d.getDegree()&&!Ue.isZero();){let gn=Ue.getDegree()-d.getDegree(),Bi=de.multiply(Ue.getCoefficient(Ue.getDegree()),Qe),Ks=d.multiplyByMonomial(gn,Bi),gy=de.buildMonomial(gn,Bi);Se=Se.addOrSubtract(gy),Ue=Ue.addOrSubtract(Ks)}return[Se,Ue]}toString(){let d="";for(let de=this.getDegree();de>=0;de--){let Se=this.getCoefficient(de);if(Se!==0){if(Se<0?(d+=" - ",Se=-Se):d.length>0&&(d+=" + "),de===0||Se!==1){let Ue=this.field.log(Se);Ue===0?d+="1":Ue===1?d+="a":(d+="a^",d+=Ue)}de!==0&&(de===1?d+="x":(d+="x^",d+=de))}}return d}}class A2 extends l{}A2.kind="ArithmeticException";class k_ extends L2{constructor(d,de,Se){super(),this.primitive=d,this.size=de,this.generatorBase=Se;let Ue=new Int32Array(de),Ge=1;for(let gn=0;gn<de;gn++)Ue[gn]=Ge,Ge*=2,Ge>=de&&(Ge^=d,Ge&=de-1);this.expTable=Ue;let Qe=new Int32Array(de);for(let gn=0;gn<de-1;gn++)Qe[Ue[gn]]=gn;this.logTable=Qe,this.zero=new T2(this,Int32Array.from([0])),this.one=new T2(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(d,de){if(d<0)throw new m;if(de===0)return this.zero;let Se=new Int32Array(d+1);return Se[0]=de,new T2(this,Se)}inverse(d){if(d===0)throw new A2;return this.expTable[this.size-this.logTable[d]-1]}multiply(d,de){return d===0||de===0?0:this.expTable[(this.logTable[d]+this.logTable[de])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+La.toHexString(this.primitive)+","+this.size+")"}equals(d){return d===this}}k_.AZTEC_DATA_12=new k_(4201,4096,1),k_.AZTEC_DATA_10=new k_(1033,1024,1),k_.AZTEC_DATA_6=new k_(67,64,1),k_.AZTEC_PARAM=new k_(19,16,1),k_.QR_CODE_FIELD_256=new k_(285,256,0),k_.DATA_MATRIX_FIELD_256=new k_(301,256,1),k_.AZTEC_DATA_8=k_.DATA_MATRIX_FIELD_256,k_.MAXICODE_FIELD_64=k_.AZTEC_DATA_6;class Vb extends l{}Vb.kind="ReedSolomonException";class Qb extends l{}Qb.kind="IllegalStateException";class zb{constructor(d){this.field=d}decode(d,de){let Se=this.field,Ue=new T2(Se,d),Ge=new Int32Array(de),Qe=!0;for(let Nb=0;Nb<de;Nb++){let qb=Ue.evaluateAt(Se.exp(Nb+Se.getGeneratorBase()));Ge[Ge.length-1-Nb]=qb,qb!==0&&(Qe=!1)}if(Qe)return;let gn=new T2(Se,Ge),Bi=this.runEuclideanAlgorithm(Se.buildMonomial(de,1),gn,de),Ks=Bi[0],gy=Bi[1],Cy=this.findErrorLocations(Ks),Oy=this.findErrorMagnitudes(gy,Cy);for(let Nb=0;Nb<Cy.length;Nb++){let qb=d.length-1-Se.log(Cy[Nb]);if(qb<0)throw new Vb("Bad error location");d[qb]=k_.addOrSubtract(d[qb],Oy[Nb])}}runEuclideanAlgorithm(d,de,Se){if(d.getDegree()<de.getDegree()){let Nb=d;d=de,de=Nb}let Ue=this.field,Ge=d,Qe=de,gn=Ue.getZero(),Bi=Ue.getOne();for(;Qe.getDegree()>=(Se/2|0);){let Nb=Ge,qb=gn;if(Ge=Qe,gn=Bi,Ge.isZero())throw new Vb("r_{i-1} was zero");Qe=Nb;let Ub=Ue.getZero(),e2=Ge.getCoefficient(Ge.getDegree()),c2=Ue.inverse(e2);for(;Qe.getDegree()>=Ge.getDegree()&&!Qe.isZero();){let k2=Qe.getDegree()-Ge.getDegree(),$2=Ue.multiply(Qe.getCoefficient(Qe.getDegree()),c2);Ub=Ub.addOrSubtract(Ue.buildMonomial(k2,$2)),Qe=Qe.addOrSubtract(Ge.multiplyByMonomial(k2,$2))}if(Bi=Ub.multiply(gn).addOrSubtract(qb),Qe.getDegree()>=Ge.getDegree())throw new Qb("Division algorithm failed to reduce polynomial?")}let Ks=Bi.getCoefficient(0);if(Ks===0)throw new Vb("sigmaTilde(0) was zero");let gy=Ue.inverse(Ks),Cy=Bi.multiplyScalar(gy),Oy=Qe.multiplyScalar(gy);return[Cy,Oy]}findErrorLocations(d){let de=d.getDegree();if(de===1)return Int32Array.from([d.getCoefficient(1)]);let Se=new Int32Array(de),Ue=0,Ge=this.field;for(let Qe=1;Qe<Ge.getSize()&&Ue<de;Qe++)d.evaluateAt(Qe)===0&&(Se[Ue]=Ge.inverse(Qe),Ue++);if(Ue!==de)throw new Vb("Error locator degree does not match number of roots");return Se}findErrorMagnitudes(d,de){let Se=de.length,Ue=new Int32Array(Se),Ge=this.field;for(let Qe=0;Qe<Se;Qe++){let gn=Ge.inverse(de[Qe]),Bi=1;for(let Ks=0;Ks<Se;Ks++)if(Qe!==Ks){let gy=Ge.multiply(de[Ks],gn),Cy=(gy&1)===0?gy|1:gy&-2;Bi=Ge.multiply(Bi,Cy)}Ue[Qe]=Ge.multiply(d.evaluateAt(gn),Ge.inverse(Bi)),Ge.getGeneratorBase()!==0&&(Ue[Qe]=Ge.multiply(Ue[Qe],gn))}return Ue}}var t2;(function(by){by[by.UPPER=0]="UPPER",by[by.LOWER=1]="LOWER",by[by.MIXED=2]="MIXED",by[by.DIGIT=3]="DIGIT",by[by.PUNCT=4]="PUNCT",by[by.BINARY=5]="BINARY"})(t2||(t2={}));class Zb{decode(d){this.ddata=d;let de=d.getBits(),Se=this.extractBits(de),Ue=this.correctBits(Se),Ge=Zb.convertBoolArrayToByteArray(Ue),Qe=Zb.getEncodedData(Ue),gn=new E2(Ge,Qe,null,null);return gn.setNumBits(Ue.length),gn}static highLevelDecode(d){return this.getEncodedData(d)}static getEncodedData(d){let de=d.length,Se=t2.UPPER,Ue=t2.UPPER,Ge="",Qe=0;for(;Qe<de;)if(Ue===t2.BINARY){if(de-Qe<5)break;let gn=Zb.readCode(d,Qe,5);if(Qe+=5,gn===0){if(de-Qe<11)break;gn=Zb.readCode(d,Qe,11)+31,Qe+=11}for(let Bi=0;Bi<gn;Bi++){if(de-Qe<8){Qe=de;break}let Ks=Zb.readCode(d,Qe,8);Ge+=xy.castAsNonUtf8Char(Ks),Qe+=8}Ue=Se}else{let gn=Ue===t2.DIGIT?4:5;if(de-Qe<gn)break;let Bi=Zb.readCode(d,Qe,gn);Qe+=gn;let Ks=Zb.getCharacter(Ue,Bi);Ks.startsWith("CTRL_")?(Se=Ue,Ue=Zb.getTable(Ks.charAt(5)),Ks.charAt(6)==="L"&&(Se=Ue)):(Ge+=Ks,Ue=Se)}return Ge}static getTable(d){switch(d){case"L":return t2.LOWER;case"P":return t2.PUNCT;case"M":return t2.MIXED;case"D":return t2.DIGIT;case"B":return t2.BINARY;case"U":default:return t2.UPPER}}static getCharacter(d,de){switch(d){case t2.UPPER:return Zb.UPPER_TABLE[de];case t2.LOWER:return Zb.LOWER_TABLE[de];case t2.MIXED:return Zb.MIXED_TABLE[de];case t2.PUNCT:return Zb.PUNCT_TABLE[de];case t2.DIGIT:return Zb.DIGIT_TABLE[de];default:throw new Qb("Bad table")}}correctBits(d){let de,Se;this.ddata.getNbLayers()<=2?(Se=6,de=k_.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(Se=8,de=k_.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(Se=10,de=k_.AZTEC_DATA_10):(Se=12,de=k_.AZTEC_DATA_12);let Ue=this.ddata.getNbDatablocks(),Ge=d.length/Se;if(Ge<Ue)throw new za;let Qe=d.length%Se,gn=new Int32Array(Ge);for(let Oy=0;Oy<Ge;Oy++,Qe+=Se)gn[Oy]=Zb.readCode(d,Qe,Se);try{new zb(de).decode(gn,Ge-Ue)}catch(Oy){throw new za(Oy)}let Bi=(1<<Se)-1,Ks=0;for(let Oy=0;Oy<Ue;Oy++){let Nb=gn[Oy];if(Nb===0||Nb===Bi)throw new za;(Nb===1||Nb===Bi-1)&&Ks++}let gy=new Array(Ue*Se-Ks),Cy=0;for(let Oy=0;Oy<Ue;Oy++){let Nb=gn[Oy];if(Nb===1||Nb===Bi-1)gy.fill(Nb>1,Cy,Cy+Se-1),Cy+=Se-1;else for(let qb=Se-1;qb>=0;--qb)gy[Cy++]=(Nb&1<<qb)!==0}return gy}extractBits(d){let de=this.ddata.isCompact(),Se=this.ddata.getNbLayers(),Ue=(de?11:14)+Se*4,Ge=new Int32Array(Ue),Qe=new Array(this.totalBitsInLayer(Se,de));if(de)for(let gn=0;gn<Ge.length;gn++)Ge[gn]=gn;else{let gn=Ue+1+2*La.truncDivision(La.truncDivision(Ue,2)-1,15),Bi=Ue/2,Ks=La.truncDivision(gn,2);for(let gy=0;gy<Bi;gy++){let Cy=gy+La.truncDivision(gy,15);Ge[Bi-gy-1]=Ks-Cy-1,Ge[Bi+gy]=Ks+Cy+1}}for(let gn=0,Bi=0;gn<Se;gn++){let Ks=(Se-gn)*4+(de?9:12),gy=gn*2,Cy=Ue-1-gy;for(let Oy=0;Oy<Ks;Oy++){let Nb=Oy*2;for(let qb=0;qb<2;qb++)Qe[Bi+Nb+qb]=d.get(Ge[gy+qb],Ge[gy+Oy]),Qe[Bi+2*Ks+Nb+qb]=d.get(Ge[gy+Oy],Ge[Cy-qb]),Qe[Bi+4*Ks+Nb+qb]=d.get(Ge[Cy-qb],Ge[Cy-Oy]),Qe[Bi+6*Ks+Nb+qb]=d.get(Ge[Cy-Oy],Ge[gy+qb])}Bi+=Ks*8}return Qe}static readCode(d,de,Se){let Ue=0;for(let Ge=de;Ge<de+Se;Ge++)Ue<<=1,d[Ge]&&(Ue|=1);return Ue}static readByte(d,de){let Se=d.length-de;return Se>=8?Zb.readCode(d,de,8):Zb.readCode(d,de,Se)<<8-Se}static convertBoolArrayToByteArray(d){let de=new Uint8Array((d.length+7)/8);for(let Se=0;Se<de.length;Se++)de[Se]=Zb.readByte(d,8*Se);return de}totalBitsInLayer(d,de){return((de?88:112)+16*d)*d}}Zb.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],Zb.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],Zb.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],Zb.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],Zb.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class h2{constructor(){}static round(d){return d===NaN?0:d<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:d>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:d+(d<0?-.5:.5)|0}static distance(d,de,Se,Ue){let Ge=d-Se,Qe=de-Ue;return Math.sqrt(Ge*Ge+Qe*Qe)}static sum(d){let de=0;for(let Se=0,Ue=d.length;Se!==Ue;Se++)de+=d[Se];return de}}class g2{static floatToIntBits(d){return d}}g2.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Wb{constructor(d,de){this.x=d,this.y=de}getX(){return this.x}getY(){return this.y}equals(d){if(d instanceof Wb){let de=d;return this.x===de.x&&this.y===de.y}return!1}hashCode(){return 31*g2.floatToIntBits(this.x)+g2.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(d){let de=this.distance(d[0],d[1]),Se=this.distance(d[1],d[2]),Ue=this.distance(d[0],d[2]),Ge,Qe,gn;if(Se>=de&&Se>=Ue?(Qe=d[0],Ge=d[1],gn=d[2]):Ue>=Se&&Ue>=de?(Qe=d[1],Ge=d[0],gn=d[2]):(Qe=d[2],Ge=d[0],gn=d[1]),this.crossProductZ(Ge,Qe,gn)<0){let Bi=Ge;Ge=gn,gn=Bi}d[0]=Ge,d[1]=Qe,d[2]=gn}static distance(d,de){return h2.distance(d.x,d.y,de.x,de.y)}static crossProductZ(d,de,Se){let Ue=de.x,Ge=de.y;return(Se.x-Ue)*(d.y-Ge)-(Se.y-Ge)*(d.x-Ue)}}class f2{constructor(d,de){this.bits=d,this.points=de}getBits(){return this.bits}getPoints(){return this.points}}class O2 extends f2{constructor(d,de,Se,Ue,Ge){super(d,de),this.compact=Se,this.nbDatablocks=Ue,this.nbLayers=Ge}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class C2{constructor(d,de,Se,Ue){this.image=d,this.height=d.getHeight(),this.width=d.getWidth(),de==null&&(de=C2.INIT_SIZE),Se==null&&(Se=d.getWidth()/2|0),Ue==null&&(Ue=d.getHeight()/2|0);let Ge=de/2|0;if(this.leftInit=Se-Ge,this.rightInit=Se+Ge,this.upInit=Ue-Ge,this.downInit=Ue+Ge,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new Bg}detect(){let d=this.leftInit,de=this.rightInit,Se=this.upInit,Ue=this.downInit,Ge=!1,Qe=!0,gn=!1,Bi=!1,Ks=!1,gy=!1,Cy=!1,Oy=this.width,Nb=this.height;for(;Qe;){Qe=!1;let qb=!0;for(;(qb||!Bi)&&de<Oy;)qb=this.containsBlackPoint(Se,Ue,de,!1),qb?(de++,Qe=!0,Bi=!0):Bi||de++;if(de>=Oy){Ge=!0;break}let Ub=!0;for(;(Ub||!Ks)&&Ue<Nb;)Ub=this.containsBlackPoint(d,de,Ue,!0),Ub?(Ue++,Qe=!0,Ks=!0):Ks||Ue++;if(Ue>=Nb){Ge=!0;break}let e2=!0;for(;(e2||!gy)&&d>=0;)e2=this.containsBlackPoint(Se,Ue,d,!1),e2?(d--,Qe=!0,gy=!0):gy||d--;if(d<0){Ge=!0;break}let c2=!0;for(;(c2||!Cy)&&Se>=0;)c2=this.containsBlackPoint(d,de,Se,!0),c2?(Se--,Qe=!0,Cy=!0):Cy||Se--;if(Se<0){Ge=!0;break}Qe&&(gn=!0)}if(!Ge&&gn){let qb=de-d,Ub=null;for(let $2=1;Ub===null&&$2<qb;$2++)Ub=this.getBlackPointOnSegment(d,Ue-$2,d+$2,Ue);if(Ub==null)throw new Bg;let e2=null;for(let $2=1;e2===null&&$2<qb;$2++)e2=this.getBlackPointOnSegment(d,Se+$2,d+$2,Se);if(e2==null)throw new Bg;let c2=null;for(let $2=1;c2===null&&$2<qb;$2++)c2=this.getBlackPointOnSegment(de,Se+$2,de-$2,Se);if(c2==null)throw new Bg;let k2=null;for(let $2=1;k2===null&&$2<qb;$2++)k2=this.getBlackPointOnSegment(de,Ue-$2,de-$2,Ue);if(k2==null)throw new Bg;return this.centerEdges(k2,Ub,c2,e2)}else throw new Bg}getBlackPointOnSegment(d,de,Se,Ue){let Ge=h2.round(h2.distance(d,de,Se,Ue)),Qe=(Se-d)/Ge,gn=(Ue-de)/Ge,Bi=this.image;for(let Ks=0;Ks<Ge;Ks++){let gy=h2.round(d+Ks*Qe),Cy=h2.round(de+Ks*gn);if(Bi.get(gy,Cy))return new Wb(gy,Cy)}return null}centerEdges(d,de,Se,Ue){let Ge=d.getX(),Qe=d.getY(),gn=de.getX(),Bi=de.getY(),Ks=Se.getX(),gy=Se.getY(),Cy=Ue.getX(),Oy=Ue.getY(),Nb=C2.CORR;return Ge<this.width/2?[new Wb(Cy-Nb,Oy+Nb),new Wb(gn+Nb,Bi+Nb),new Wb(Ks-Nb,gy-Nb),new Wb(Ge+Nb,Qe-Nb)]:[new Wb(Cy+Nb,Oy+Nb),new Wb(gn+Nb,Bi-Nb),new Wb(Ks-Nb,gy+Nb),new Wb(Ge-Nb,Qe-Nb)]}containsBlackPoint(d,de,Se,Ue){let Ge=this.image;if(Ue){for(let Qe=d;Qe<=de;Qe++)if(Ge.get(Qe,Se))return!0}else for(let Qe=d;Qe<=de;Qe++)if(Ge.get(Se,Qe))return!0;return!1}}C2.INIT_SIZE=10,C2.CORR=1;class x2{static checkAndNudgePoints(d,de){let Se=d.getWidth(),Ue=d.getHeight(),Ge=!0;for(let Qe=0;Qe<de.length&&Ge;Qe+=2){let gn=Math.floor(de[Qe]),Bi=Math.floor(de[Qe+1]);if(gn<-1||gn>Se||Bi<-1||Bi>Ue)throw new Bg;Ge=!1,gn===-1?(de[Qe]=0,Ge=!0):gn===Se&&(de[Qe]=Se-1,Ge=!0),Bi===-1?(de[Qe+1]=0,Ge=!0):Bi===Ue&&(de[Qe+1]=Ue-1,Ge=!0)}Ge=!0;for(let Qe=de.length-2;Qe>=0&&Ge;Qe-=2){let gn=Math.floor(de[Qe]),Bi=Math.floor(de[Qe+1]);if(gn<-1||gn>Se||Bi<-1||Bi>Ue)throw new Bg;Ge=!1,gn===-1?(de[Qe]=0,Ge=!0):gn===Se&&(de[Qe]=Se-1,Ge=!0),Bi===-1?(de[Qe+1]=0,Ge=!0):Bi===Ue&&(de[Qe+1]=Ue-1,Ge=!0)}}}class N2{constructor(d,de,Se,Ue,Ge,Qe,gn,Bi,Ks){this.a11=d,this.a21=de,this.a31=Se,this.a12=Ue,this.a22=Ge,this.a32=Qe,this.a13=gn,this.a23=Bi,this.a33=Ks}static quadrilateralToQuadrilateral(d,de,Se,Ue,Ge,Qe,gn,Bi,Ks,gy,Cy,Oy,Nb,qb,Ub,e2){let c2=N2.quadrilateralToSquare(d,de,Se,Ue,Ge,Qe,gn,Bi);return N2.squareToQuadrilateral(Ks,gy,Cy,Oy,Nb,qb,Ub,e2).times(c2)}transformPoints(d){let de=d.length,Se=this.a11,Ue=this.a12,Ge=this.a13,Qe=this.a21,gn=this.a22,Bi=this.a23,Ks=this.a31,gy=this.a32,Cy=this.a33;for(let Oy=0;Oy<de;Oy+=2){let Nb=d[Oy],qb=d[Oy+1],Ub=Ge*Nb+Bi*qb+Cy;d[Oy]=(Se*Nb+Qe*qb+Ks)/Ub,d[Oy+1]=(Ue*Nb+gn*qb+gy)/Ub}}transformPointsWithValues(d,de){let Se=this.a11,Ue=this.a12,Ge=this.a13,Qe=this.a21,gn=this.a22,Bi=this.a23,Ks=this.a31,gy=this.a32,Cy=this.a33,Oy=d.length;for(let Nb=0;Nb<Oy;Nb++){let qb=d[Nb],Ub=de[Nb],e2=Ge*qb+Bi*Ub+Cy;d[Nb]=(Se*qb+Qe*Ub+Ks)/e2,de[Nb]=(Ue*qb+gn*Ub+gy)/e2}}static squareToQuadrilateral(d,de,Se,Ue,Ge,Qe,gn,Bi){let Ks=d-Se+Ge-gn,gy=de-Ue+Qe-Bi;if(Ks===0&&gy===0)return new N2(Se-d,Ge-Se,d,Ue-de,Qe-Ue,de,0,0,1);{let Cy=Se-Ge,Oy=gn-Ge,Nb=Ue-Qe,qb=Bi-Qe,Ub=Cy*qb-Oy*Nb,e2=(Ks*qb-Oy*gy)/Ub,c2=(Cy*gy-Ks*Nb)/Ub;return new N2(Se-d+e2*Se,gn-d+c2*gn,d,Ue-de+e2*Ue,Bi-de+c2*Bi,de,e2,c2,1)}}static quadrilateralToSquare(d,de,Se,Ue,Ge,Qe,gn,Bi){return N2.squareToQuadrilateral(d,de,Se,Ue,Ge,Qe,gn,Bi).buildAdjoint()}buildAdjoint(){return new N2(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(d){return new N2(this.a11*d.a11+this.a21*d.a12+this.a31*d.a13,this.a11*d.a21+this.a21*d.a22+this.a31*d.a23,this.a11*d.a31+this.a21*d.a32+this.a31*d.a33,this.a12*d.a11+this.a22*d.a12+this.a32*d.a13,this.a12*d.a21+this.a22*d.a22+this.a32*d.a23,this.a12*d.a31+this.a22*d.a32+this.a32*d.a33,this.a13*d.a11+this.a23*d.a12+this.a33*d.a13,this.a13*d.a21+this.a23*d.a22+this.a33*d.a23,this.a13*d.a31+this.a23*d.a32+this.a33*d.a33)}}class U2 extends x2{sampleGrid(d,de,Se,Ue,Ge,Qe,gn,Bi,Ks,gy,Cy,Oy,Nb,qb,Ub,e2,c2,k2,$2){let _2=N2.quadrilateralToQuadrilateral(Ue,Ge,Qe,gn,Bi,Ks,gy,Cy,Oy,Nb,qb,Ub,e2,c2,k2,$2);return this.sampleGridWithTransform(d,de,Se,_2)}sampleGridWithTransform(d,de,Se,Ue){if(de<=0||Se<=0)throw new Bg;let Ge=new Dy(de,Se),Qe=new Float32Array(2*de);for(let gn=0;gn<Se;gn++){let Bi=Qe.length,Ks=gn+.5;for(let gy=0;gy<Bi;gy+=2)Qe[gy]=gy/2+.5,Qe[gy+1]=Ks;Ue.transformPoints(Qe),x2.checkAndNudgePoints(d,Qe);try{for(let gy=0;gy<Bi;gy+=2)d.get(Math.floor(Qe[gy]),Math.floor(Qe[gy+1]))&&Ge.set(gy/2,gn)}catch{throw new Bg}}return Ge}}class Q2{static setGridSampler(d){Q2.gridSampler=d}static getInstance(){return Q2.gridSampler}}Q2.gridSampler=new U2;class a2{constructor(d,de){this.x=d,this.y=de}toResultPoint(){return new Wb(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class S2{constructor(d){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=d}detect(){return this.detectMirror(!1)}detectMirror(d){let de=this.getMatrixCenter(),Se=this.getBullsEyeCorners(de);if(d){let Qe=Se[0];Se[0]=Se[2],Se[2]=Qe}this.extractParameters(Se);let Ue=this.sampleGrid(this.image,Se[this.shift%4],Se[(this.shift+1)%4],Se[(this.shift+2)%4],Se[(this.shift+3)%4]),Ge=this.getMatrixCornerPoints(Se);return new O2(Ue,Ge,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(d){if(!this.isValidPoint(d[0])||!this.isValidPoint(d[1])||!this.isValidPoint(d[2])||!this.isValidPoint(d[3]))throw new Bg;let de=2*this.nbCenterLayers,Se=new Int32Array([this.sampleLine(d[0],d[1],de),this.sampleLine(d[1],d[2],de),this.sampleLine(d[2],d[3],de),this.sampleLine(d[3],d[0],de)]);this.shift=this.getRotation(Se,de);let Ue=0;for(let Qe=0;Qe<4;Qe++){let gn=Se[(this.shift+Qe)%4];this.compact?(Ue<<=7,Ue+=gn>>1&127):(Ue<<=10,Ue+=(gn>>2&31<<5)+(gn>>1&31))}let Ge=this.getCorrectedParameterData(Ue,this.compact);this.compact?(this.nbLayers=(Ge>>6)+1,this.nbDataBlocks=(Ge&63)+1):(this.nbLayers=(Ge>>11)+1,this.nbDataBlocks=(Ge&2047)+1)}getRotation(d,de){let Se=0;d.forEach((Ue,Ge,Qe)=>{let gn=(Ue>>de-2<<1)+(Ue&1);Se=(Se<<3)+gn}),Se=((Se&1)<<11)+(Se>>1);for(let Ue=0;Ue<4;Ue++)if(La.bitCount(Se^this.EXPECTED_CORNER_BITS[Ue])<=2)return Ue;throw new Bg}getCorrectedParameterData(d,de){let Se,Ue;de?(Se=7,Ue=2):(Se=10,Ue=4);let Ge=Se-Ue,Qe=new Int32Array(Se);for(let Bi=Se-1;Bi>=0;--Bi)Qe[Bi]=d&15,d>>=4;try{new zb(k_.AZTEC_PARAM).decode(Qe,Ge)}catch{throw new Bg}let gn=0;for(let Bi=0;Bi<Ue;Bi++)gn=(gn<<4)+Qe[Bi];return gn}getBullsEyeCorners(d){let de=d,Se=d,Ue=d,Ge=d,Qe=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let Cy=this.getFirstDifferent(de,Qe,1,-1),Oy=this.getFirstDifferent(Se,Qe,1,1),Nb=this.getFirstDifferent(Ue,Qe,-1,1),qb=this.getFirstDifferent(Ge,Qe,-1,-1);if(this.nbCenterLayers>2){let Ub=this.distancePoint(qb,Cy)*this.nbCenterLayers/(this.distancePoint(Ge,de)*(this.nbCenterLayers+2));if(Ub<.75||Ub>1.25||!this.isWhiteOrBlackRectangle(Cy,Oy,Nb,qb))break}de=Cy,Se=Oy,Ue=Nb,Ge=qb,Qe=!Qe}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new Bg;this.compact=this.nbCenterLayers===5;let gn=new Wb(de.getX()+.5,de.getY()-.5),Bi=new Wb(Se.getX()+.5,Se.getY()+.5),Ks=new Wb(Ue.getX()-.5,Ue.getY()+.5),gy=new Wb(Ge.getX()-.5,Ge.getY()-.5);return this.expandSquare([gn,Bi,Ks,gy],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let d,de,Se,Ue;try{let gn=new C2(this.image).detect();d=gn[0],de=gn[1],Se=gn[2],Ue=gn[3]}catch{let gn=this.image.getWidth()/2,Bi=this.image.getHeight()/2;d=this.getFirstDifferent(new a2(gn+7,Bi-7),!1,1,-1).toResultPoint(),de=this.getFirstDifferent(new a2(gn+7,Bi+7),!1,1,1).toResultPoint(),Se=this.getFirstDifferent(new a2(gn-7,Bi+7),!1,-1,1).toResultPoint(),Ue=this.getFirstDifferent(new a2(gn-7,Bi-7),!1,-1,-1).toResultPoint()}let Ge=h2.round((d.getX()+Ue.getX()+de.getX()+Se.getX())/4),Qe=h2.round((d.getY()+Ue.getY()+de.getY()+Se.getY())/4);try{let gn=new C2(this.image,15,Ge,Qe).detect();d=gn[0],de=gn[1],Se=gn[2],Ue=gn[3]}catch{d=this.getFirstDifferent(new a2(Ge+7,Qe-7),!1,1,-1).toResultPoint(),de=this.getFirstDifferent(new a2(Ge+7,Qe+7),!1,1,1).toResultPoint(),Se=this.getFirstDifferent(new a2(Ge-7,Qe+7),!1,-1,1).toResultPoint(),Ue=this.getFirstDifferent(new a2(Ge-7,Qe-7),!1,-1,-1).toResultPoint()}return Ge=h2.round((d.getX()+Ue.getX()+de.getX()+Se.getX())/4),Qe=h2.round((d.getY()+Ue.getY()+de.getY()+Se.getY())/4),new a2(Ge,Qe)}getMatrixCornerPoints(d){return this.expandSquare(d,2*this.nbCenterLayers,this.getDimension())}sampleGrid(d,de,Se,Ue,Ge){let Qe=Q2.getInstance(),gn=this.getDimension(),Bi=gn/2-this.nbCenterLayers,Ks=gn/2+this.nbCenterLayers;return Qe.sampleGrid(d,gn,gn,Bi,Bi,Ks,Bi,Ks,Ks,Bi,Ks,de.getX(),de.getY(),Se.getX(),Se.getY(),Ue.getX(),Ue.getY(),Ge.getX(),Ge.getY())}sampleLine(d,de,Se){let Ue=0,Ge=this.distanceResultPoint(d,de),Qe=Ge/Se,gn=d.getX(),Bi=d.getY(),Ks=Qe*(de.getX()-d.getX())/Ge,gy=Qe*(de.getY()-d.getY())/Ge;for(let Cy=0;Cy<Se;Cy++)this.image.get(h2.round(gn+Cy*Ks),h2.round(Bi+Cy*gy))&&(Ue|=1<<Se-Cy-1);return Ue}isWhiteOrBlackRectangle(d,de,Se,Ue){let Ge=3;d=new a2(d.getX()-Ge,d.getY()+Ge),de=new a2(de.getX()-Ge,de.getY()-Ge),Se=new a2(Se.getX()+Ge,Se.getY()-Ge),Ue=new a2(Ue.getX()+Ge,Ue.getY()+Ge);let Qe=this.getColor(Ue,d);if(Qe===0)return!1;let gn=this.getColor(d,de);return gn!==Qe||(gn=this.getColor(de,Se),gn!==Qe)?!1:(gn=this.getColor(Se,Ue),gn===Qe)}getColor(d,de){let Se=this.distancePoint(d,de),Ue=(de.getX()-d.getX())/Se,Ge=(de.getY()-d.getY())/Se,Qe=0,gn=d.getX(),Bi=d.getY(),Ks=this.image.get(d.getX(),d.getY()),gy=Math.ceil(Se);for(let Oy=0;Oy<gy;Oy++)gn+=Ue,Bi+=Ge,this.image.get(h2.round(gn),h2.round(Bi))!==Ks&&Qe++;let Cy=Qe/Se;return Cy>.1&&Cy<.9?0:Cy<=.1===Ks?1:-1}getFirstDifferent(d,de,Se,Ue){let Ge=d.getX()+Se,Qe=d.getY()+Ue;for(;this.isValid(Ge,Qe)&&this.image.get(Ge,Qe)===de;)Ge+=Se,Qe+=Ue;for(Ge-=Se,Qe-=Ue;this.isValid(Ge,Qe)&&this.image.get(Ge,Qe)===de;)Ge+=Se;for(Ge-=Se;this.isValid(Ge,Qe)&&this.image.get(Ge,Qe)===de;)Qe+=Ue;return Qe-=Ue,new a2(Ge,Qe)}expandSquare(d,de,Se){let Ue=Se/(2*de),Ge=d[0].getX()-d[2].getX(),Qe=d[0].getY()-d[2].getY(),gn=(d[0].getX()+d[2].getX())/2,Bi=(d[0].getY()+d[2].getY())/2,Ks=new Wb(gn+Ue*Ge,Bi+Ue*Qe),gy=new Wb(gn-Ue*Ge,Bi-Ue*Qe);Ge=d[1].getX()-d[3].getX(),Qe=d[1].getY()-d[3].getY(),gn=(d[1].getX()+d[3].getX())/2,Bi=(d[1].getY()+d[3].getY())/2;let Cy=new Wb(gn+Ue*Ge,Bi+Ue*Qe),Oy=new Wb(gn-Ue*Ge,Bi-Ue*Qe);return[Ks,Cy,gy,Oy]}isValid(d,de){return d>=0&&d<this.image.getWidth()&&de>0&&de<this.image.getHeight()}isValidPoint(d){let de=h2.round(d.getX()),Se=h2.round(d.getY());return this.isValid(de,Se)}distancePoint(d,de){return h2.distance(d.getX(),d.getY(),de.getX(),de.getY())}distanceResultPoint(d,de){return h2.distance(d.getX(),d.getY(),de.getX(),de.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(La.truncDivision(this.nbLayers-4,8)+1)+15}}class n2{decode(d,de=null){let Se=null,Ue=new S2(d.getBlackMatrix()),Ge=null,Qe=null;try{let gy=Ue.detectMirror(!1);Ge=gy.getPoints(),this.reportFoundResultPoints(de,Ge),Qe=new Zb().decode(gy)}catch(gy){Se=gy}if(Qe==null)try{let gy=Ue.detectMirror(!0);Ge=gy.getPoints(),this.reportFoundResultPoints(de,Ge),Qe=new Zb().decode(gy)}catch(gy){throw Se!=null?Se:gy}let gn=new l2(Qe.getText(),Qe.getRawBytes(),Qe.getNumBits(),Ge,Rb.AZTEC,He.currentTimeMillis()),Bi=Qe.getByteSegments();Bi!=null&&gn.putMetadata(s2.BYTE_SEGMENTS,Bi);let Ks=Qe.getECLevel();return Ks!=null&&gn.putMetadata(s2.ERROR_CORRECTION_LEVEL,Ks),gn}reportFoundResultPoints(d,de){if(d!=null){let Se=d.get(zs.NEED_RESULT_POINT_CALLBACK);Se!=null&&de.forEach((Ue,Ge,Qe)=>{Se.foundPossibleResultPoint(Ue)})}}reset(){}}class F2 extends Jb{constructor(d=500){super(new n2,d)}}class M2{decode(d,de){try{return this.doDecode(d,de)}catch{if(de&&de.get(zs.TRY_HARDER)===!0&&d.isRotateSupported()){let Se=d.rotateCounterClockwise(),Ue=this.doDecode(Se,de),Ge=Ue.getResultMetadata(),Qe=270;Ge!==null&&Ge.get(s2.ORIENTATION)===!0&&(Qe=Qe+Ge.get(s2.ORIENTATION)%360),Ue.putMetadata(s2.ORIENTATION,Qe);let gn=Ue.getResultPoints();if(gn!==null){let Bi=Se.getHeight();for(let Ks=0;Ks<gn.length;Ks++)gn[Ks]=new Wb(Bi-gn[Ks].getY()-1,gn[Ks].getX())}return Ue}else throw new Bg}}reset(){}doDecode(d,de){let Se=d.getWidth(),Ue=d.getHeight(),Ge=new sr(Se),Qe=de&&de.get(zs.TRY_HARDER)===!0,gn=Math.max(1,Ue>>(Qe?8:5)),Bi;Qe?Bi=Ue:Bi=15;let Ks=Math.trunc(Ue/2);for(let gy=0;gy<Bi;gy++){let Cy=Math.trunc((gy+1)/2),Oy=(gy&1)===0,Nb=Ks+gn*(Oy?Cy:-Cy);if(Nb<0||Nb>=Ue)break;try{Ge=d.getBlackRow(Nb,Ge)}catch{continue}for(let qb=0;qb<2;qb++){if(qb===1&&(Ge.reverse(),de&&de.get(zs.NEED_RESULT_POINT_CALLBACK)===!0)){let Ub=new Map;de.forEach((e2,c2)=>Ub.set(c2,e2)),Ub.delete(zs.NEED_RESULT_POINT_CALLBACK),de=Ub}try{let Ub=this.decodeRow(Nb,Ge,de);if(qb===1){Ub.putMetadata(s2.ORIENTATION,180);let e2=Ub.getResultPoints();e2!==null&&(e2[0]=new Wb(Se-e2[0].getX()-1,e2[0].getY()),e2[1]=new Wb(Se-e2[1].getX()-1,e2[1].getY()))}return Ub}catch{}}}throw new Bg}static recordPattern(d,de,Se){let Ue=Se.length;for(let Ks=0;Ks<Ue;Ks++)Se[Ks]=0;let Ge=d.getSize();if(de>=Ge)throw new Bg;let Qe=!d.get(de),gn=0,Bi=de;for(;Bi<Ge;){if(d.get(Bi)!==Qe)Se[gn]++;else{if(++gn===Ue)break;Se[gn]=1,Qe=!Qe}Bi++}if(!(gn===Ue||gn===Ue-1&&Bi===Ge))throw new Bg}static recordPatternInReverse(d,de,Se){let Ue=Se.length,Ge=d.get(de);for(;de>0&&Ue>=0;)d.get(--de)!==Ge&&(Ue--,Ge=!Ge);if(Ue>=0)throw new Bg;M2.recordPattern(d,de+1,Se)}static patternMatchVariance(d,de,Se){let Ue=d.length,Ge=0,Qe=0;for(let Ks=0;Ks<Ue;Ks++)Ge+=d[Ks],Qe+=de[Ks];if(Ge<Qe)return Number.POSITIVE_INFINITY;let gn=Ge/Qe;Se*=gn;let Bi=0;for(let Ks=0;Ks<Ue;Ks++){let gy=d[Ks],Cy=de[Ks]*gn,Oy=gy>Cy?gy-Cy:Cy-gy;if(Oy>Se)return Number.POSITIVE_INFINITY;Bi+=Oy}return Bi/Ge}}class v2 extends M2{static findStartPattern(d){let de=d.getSize(),Se=d.getNextSet(0),Ue=0,Ge=Int32Array.from([0,0,0,0,0,0]),Qe=Se,gn=!1,Bi=6;for(let Ks=Se;Ks<de;Ks++)if(d.get(Ks)!==gn)Ge[Ue]++;else{if(Ue===Bi-1){let gy=v2.MAX_AVG_VARIANCE,Cy=-1;for(let Oy=v2.CODE_START_A;Oy<=v2.CODE_START_C;Oy++){let Nb=M2.patternMatchVariance(Ge,v2.CODE_PATTERNS[Oy],v2.MAX_INDIVIDUAL_VARIANCE);Nb<gy&&(gy=Nb,Cy=Oy)}if(Cy>=0&&d.isRange(Math.max(0,Qe-(Ks-Qe)/2),Qe,!1))return Int32Array.from([Qe,Ks,Cy]);Qe+=Ge[0]+Ge[1],Ge=Ge.slice(2,Ge.length-1),Ge[Ue-1]=0,Ge[Ue]=0,Ue--}else Ue++;Ge[Ue]=1,gn=!gn}throw new Bg}static decodeCode(d,de,Se){M2.recordPattern(d,Se,de);let Ue=v2.MAX_AVG_VARIANCE,Ge=-1;for(let Qe=0;Qe<v2.CODE_PATTERNS.length;Qe++){let gn=v2.CODE_PATTERNS[Qe],Bi=this.patternMatchVariance(de,gn,v2.MAX_INDIVIDUAL_VARIANCE);Bi<Ue&&(Ue=Bi,Ge=Qe)}if(Ge>=0)return Ge;throw new Bg}decodeRow(d,de,Se){let Ue=Se&&Se.get(zs.ASSUME_GS1)===!0,Ge=v2.findStartPattern(de),Qe=Ge[2],gn=0,Bi=new Uint8Array(20);Bi[gn++]=Qe;let Ks;switch(Qe){case v2.CODE_START_A:Ks=v2.CODE_CODE_A;break;case v2.CODE_START_B:Ks=v2.CODE_CODE_B;break;case v2.CODE_START_C:Ks=v2.CODE_CODE_C;break;default:throw new za}let gy=!1,Cy=!1,Oy="",Nb=Ge[0],qb=Ge[1],Ub=Int32Array.from([0,0,0,0,0,0]),e2=0,c2=0,k2=Qe,$2=0,_2=!0,X2=!1,J2=!1;for(;!gy;){let jO=Cy;switch(Cy=!1,e2=c2,c2=v2.decodeCode(de,Ub,qb),Bi[gn++]=c2,c2!==v2.CODE_STOP&&(_2=!0),c2!==v2.CODE_STOP&&($2++,k2+=$2*c2),Nb=qb,qb+=Ub.reduce((a5,A4)=>a5+A4,0),c2){case v2.CODE_START_A:case v2.CODE_START_B:case v2.CODE_START_C:throw new za}switch(Ks){case v2.CODE_CODE_A:if(c2<64)J2===X2?Oy+=String.fromCharCode(" ".charCodeAt(0)+c2):Oy+=String.fromCharCode(" ".charCodeAt(0)+c2+128),J2=!1;else if(c2<96)J2===X2?Oy+=String.fromCharCode(c2-64):Oy+=String.fromCharCode(c2+64),J2=!1;else switch(c2!==v2.CODE_STOP&&(_2=!1),c2){case v2.CODE_FNC_1:Ue&&(Oy.length===0?Oy+="]C1":Oy+=String.fromCharCode(29));break;case v2.CODE_FNC_2:case v2.CODE_FNC_3:break;case v2.CODE_FNC_4_A:!X2&&J2?(X2=!0,J2=!1):X2&&J2?(X2=!1,J2=!1):J2=!0;break;case v2.CODE_SHIFT:Cy=!0,Ks=v2.CODE_CODE_B;break;case v2.CODE_CODE_B:Ks=v2.CODE_CODE_B;break;case v2.CODE_CODE_C:Ks=v2.CODE_CODE_C;break;case v2.CODE_STOP:gy=!0;break}break;case v2.CODE_CODE_B:if(c2<96)J2===X2?Oy+=String.fromCharCode(" ".charCodeAt(0)+c2):Oy+=String.fromCharCode(" ".charCodeAt(0)+c2+128),J2=!1;else switch(c2!==v2.CODE_STOP&&(_2=!1),c2){case v2.CODE_FNC_1:Ue&&(Oy.length===0?Oy+="]C1":Oy+=String.fromCharCode(29));break;case v2.CODE_FNC_2:case v2.CODE_FNC_3:break;case v2.CODE_FNC_4_B:!X2&&J2?(X2=!0,J2=!1):X2&&J2?(X2=!1,J2=!1):J2=!0;break;case v2.CODE_SHIFT:Cy=!0,Ks=v2.CODE_CODE_A;break;case v2.CODE_CODE_A:Ks=v2.CODE_CODE_A;break;case v2.CODE_CODE_C:Ks=v2.CODE_CODE_C;break;case v2.CODE_STOP:gy=!0;break}break;case v2.CODE_CODE_C:if(c2<100)c2<10&&(Oy+="0"),Oy+=c2;else switch(c2!==v2.CODE_STOP&&(_2=!1),c2){case v2.CODE_FNC_1:Ue&&(Oy.length===0?Oy+="]C1":Oy+=String.fromCharCode(29));break;case v2.CODE_CODE_A:Ks=v2.CODE_CODE_A;break;case v2.CODE_CODE_B:Ks=v2.CODE_CODE_B;break;case v2.CODE_STOP:gy=!0;break}break}jO&&(Ks=Ks===v2.CODE_CODE_A?v2.CODE_CODE_B:v2.CODE_CODE_A)}let rO=qb-Nb;if(qb=de.getNextUnset(qb),!de.isRange(qb,Math.min(de.getSize(),qb+(qb-Nb)/2),!1))throw new Bg;if(k2-=$2*e2,k2%103!==e2)throw new xe;let OO=Oy.length;if(OO===0)throw new Bg;OO>0&&_2&&(Ks===v2.CODE_CODE_C?Oy=Oy.substring(0,OO-2):Oy=Oy.substring(0,OO-1));let iO=(Ge[1]+Ge[0])/2,AC=Nb+rO/2,hT=Bi.length,PA=new Uint8Array(hT);for(let jO=0;jO<hT;jO++)PA[jO]=Bi[jO];let O4=[new Wb(iO,d),new Wb(AC,d)];return new l2(Oy,PA,0,O4,Rb.CODE_128,new Date().getTime())}}v2.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],v2.MAX_AVG_VARIANCE=.25,v2.MAX_INDIVIDUAL_VARIANCE=.7,v2.CODE_SHIFT=98,v2.CODE_CODE_C=99,v2.CODE_CODE_B=100,v2.CODE_CODE_A=101,v2.CODE_FNC_1=102,v2.CODE_FNC_2=97,v2.CODE_FNC_3=96,v2.CODE_FNC_4_A=101,v2.CODE_FNC_4_B=100,v2.CODE_START_A=103,v2.CODE_START_B=104,v2.CODE_START_C=105,v2.CODE_STOP=106;class o2 extends M2{constructor(d=!1,de=!1){super(),this.usingCheckDigit=d,this.extendedMode=de,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(d,de,Se){let Ue=this.counters;Ue.fill(0),this.decodeRowResult="";let Ge=o2.findAsteriskPattern(de,Ue),Qe=de.getNextSet(Ge[1]),gn=de.getSize(),Bi,Ks;do{o2.recordPattern(de,Qe,Ue);let Ub=o2.toNarrowWidePattern(Ue);if(Ub<0)throw new Bg;Bi=o2.patternToChar(Ub),this.decodeRowResult+=Bi,Ks=Qe;for(let e2 of Ue)Qe+=e2;Qe=de.getNextSet(Qe)}while(Bi!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let gy=0;for(let Ub of Ue)gy+=Ub;let Cy=Qe-Ks-gy;if(Qe!==gn&&Cy*2<gy)throw new Bg;if(this.usingCheckDigit){let Ub=this.decodeRowResult.length-1,e2=0;for(let c2=0;c2<Ub;c2++)e2+=o2.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(c2));if(this.decodeRowResult.charAt(Ub)!==o2.ALPHABET_STRING.charAt(e2%43))throw new xe;this.decodeRowResult=this.decodeRowResult.substring(0,Ub)}if(this.decodeRowResult.length===0)throw new Bg;let Oy;this.extendedMode?Oy=o2.decodeExtended(this.decodeRowResult):Oy=this.decodeRowResult;let Nb=(Ge[1]+Ge[0])/2,qb=Ks+gy/2;return new l2(Oy,null,0,[new Wb(Nb,d),new Wb(qb,d)],Rb.CODE_39,new Date().getTime())}static findAsteriskPattern(d,de){let Se=d.getSize(),Ue=d.getNextSet(0),Ge=0,Qe=Ue,gn=!1,Bi=de.length;for(let Ks=Ue;Ks<Se;Ks++)if(d.get(Ks)!==gn)de[Ge]++;else{if(Ge===Bi-1){if(this.toNarrowWidePattern(de)===o2.ASTERISK_ENCODING&&d.isRange(Math.max(0,Qe-Math.floor((Ks-Qe)/2)),Qe,!1))return[Qe,Ks];Qe+=de[0]+de[1],de.copyWithin(0,2,2+Ge-1),de[Ge-1]=0,de[Ge]=0,Ge--}else Ge++;de[Ge]=1,gn=!gn}throw new Bg}static toNarrowWidePattern(d){let de=d.length,Se=0,Ue;do{let Ge=2147483647;for(let Bi of d)Bi<Ge&&Bi>Se&&(Ge=Bi);Se=Ge,Ue=0;let Qe=0,gn=0;for(let Bi=0;Bi<de;Bi++){let Ks=d[Bi];Ks>Se&&(gn|=1<<de-1-Bi,Ue++,Qe+=Ks)}if(Ue===3){for(let Bi=0;Bi<de&&Ue>0;Bi++){let Ks=d[Bi];if(Ks>Se&&(Ue--,Ks*2>=Qe))return-1}return gn}}while(Ue>3);return-1}static patternToChar(d){for(let de=0;de<o2.CHARACTER_ENCODINGS.length;de++)if(o2.CHARACTER_ENCODINGS[de]===d)return o2.ALPHABET_STRING.charAt(de);if(d===o2.ASTERISK_ENCODING)return"*";throw new Bg}static decodeExtended(d){let de=d.length,Se="";for(let Ue=0;Ue<de;Ue++){let Ge=d.charAt(Ue);if(Ge==="+"||Ge==="$"||Ge==="%"||Ge==="/"){let Qe=d.charAt(Ue+1),gn="\0";switch(Ge){case"+":if(Qe>="A"&&Qe<="Z")gn=String.fromCharCode(Qe.charCodeAt(0)+32);else throw new za;break;case"$":if(Qe>="A"&&Qe<="Z")gn=String.fromCharCode(Qe.charCodeAt(0)-64);else throw new za;break;case"%":if(Qe>="A"&&Qe<="E")gn=String.fromCharCode(Qe.charCodeAt(0)-38);else if(Qe>="F"&&Qe<="J")gn=String.fromCharCode(Qe.charCodeAt(0)-11);else if(Qe>="K"&&Qe<="O")gn=String.fromCharCode(Qe.charCodeAt(0)+16);else if(Qe>="P"&&Qe<="T")gn=String.fromCharCode(Qe.charCodeAt(0)+43);else if(Qe==="U")gn="\0";else if(Qe==="V")gn="@";else if(Qe==="W")gn="`";else if(Qe==="X"||Qe==="Y"||Qe==="Z")gn="\x7F";else throw new za;break;case"/":if(Qe>="A"&&Qe<="O")gn=String.fromCharCode(Qe.charCodeAt(0)-32);else if(Qe==="Z")gn=":";else throw new za;break}Se+=gn,Ue++}else Se+=Ge}return Se}}o2.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",o2.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],o2.ASTERISK_ENCODING=148;class b2 extends M2{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(d,de,Se){let Ue=this.decodeStart(de),Ge=this.decodeEnd(de),Qe=new Bb;b2.decodeMiddle(de,Ue[1],Ge[0],Qe);let gn=Qe.toString(),Bi=null;Se!=null&&(Bi=Se.get(zs.ALLOWED_LENGTHS)),Bi==null&&(Bi=b2.DEFAULT_ALLOWED_LENGTHS);let Ks=gn.length,gy=!1,Cy=0;for(let Nb of Bi){if(Ks===Nb){gy=!0;break}Nb>Cy&&(Cy=Nb)}if(!gy&&Ks>Cy&&(gy=!0),!gy)throw new za;let Oy=[new Wb(Ue[1],d),new Wb(Ge[0],d)];return new l2(gn,null,0,Oy,Rb.ITF,new Date().getTime())}static decodeMiddle(d,de,Se,Ue){let Ge=new Int32Array(10),Qe=new Int32Array(5),gn=new Int32Array(5);for(Ge.fill(0),Qe.fill(0),gn.fill(0);de<Se;){M2.recordPattern(d,de,Ge);for(let Ks=0;Ks<5;Ks++){let gy=2*Ks;Qe[Ks]=Ge[gy],gn[Ks]=Ge[gy+1]}let Bi=b2.decodeDigit(Qe);Ue.append(Bi.toString()),Bi=this.decodeDigit(gn),Ue.append(Bi.toString()),Ge.forEach(function(Ks){de+=Ks})}}decodeStart(d){let de=b2.skipWhiteSpace(d),Se=b2.findGuardPattern(d,de,b2.START_PATTERN);return this.narrowLineWidth=(Se[1]-Se[0])/4,this.validateQuietZone(d,Se[0]),Se}validateQuietZone(d,de){let Se=this.narrowLineWidth*10;Se=Se<de?Se:de;for(let Ue=de-1;Se>0&&Ue>=0&&!d.get(Ue);Ue--)Se--;if(Se!==0)throw new Bg}static skipWhiteSpace(d){let de=d.getSize(),Se=d.getNextSet(0);if(Se===de)throw new Bg;return Se}decodeEnd(d){d.reverse();try{let de=b2.skipWhiteSpace(d),Se;try{Se=b2.findGuardPattern(d,de,b2.END_PATTERN_REVERSED[0])}catch(Ge){Ge instanceof Bg&&(Se=b2.findGuardPattern(d,de,b2.END_PATTERN_REVERSED[1]))}this.validateQuietZone(d,Se[0]);let Ue=Se[0];return Se[0]=d.getSize()-Se[1],Se[1]=d.getSize()-Ue,Se}finally{d.reverse()}}static findGuardPattern(d,de,Se){let Ue=Se.length,Ge=new Int32Array(Ue),Qe=d.getSize(),gn=!1,Bi=0,Ks=de;Ge.fill(0);for(let gy=de;gy<Qe;gy++)if(d.get(gy)!==gn)Ge[Bi]++;else{if(Bi===Ue-1){if(M2.patternMatchVariance(Ge,Se,b2.MAX_INDIVIDUAL_VARIANCE)<b2.MAX_AVG_VARIANCE)return[Ks,gy];Ks+=Ge[0]+Ge[1],He.arraycopy(Ge,2,Ge,0,Bi-1),Ge[Bi-1]=0,Ge[Bi]=0,Bi--}else Bi++;Ge[Bi]=1,gn=!gn}throw new Bg}static decodeDigit(d){let de=b2.MAX_AVG_VARIANCE,Se=-1,Ue=b2.PATTERNS.length;for(let Ge=0;Ge<Ue;Ge++){let Qe=b2.PATTERNS[Ge],gn=M2.patternMatchVariance(d,Qe,b2.MAX_INDIVIDUAL_VARIANCE);gn<de?(de=gn,Se=Ge):gn===de&&(Se=-1)}if(Se>=0)return Se%10;throw new Bg}}b2.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],b2.MAX_AVG_VARIANCE=.38,b2.MAX_INDIVIDUAL_VARIANCE=.5,b2.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],b2.START_PATTERN=Int32Array.from([1,1,1,1]),b2.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class D2 extends M2{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(d){let de=!1,Se,Ue=0,Ge=Int32Array.from([0,0,0]);for(;!de;){Ge=Int32Array.from([0,0,0]),Se=D2.findGuardPattern(d,Ue,!1,this.START_END_PATTERN,Ge);let Qe=Se[0];Ue=Se[1];let gn=Qe-(Ue-Qe);gn>=0&&(de=d.isRange(gn,Qe,!1))}return Se}static checkChecksum(d){return D2.checkStandardUPCEANChecksum(d)}static checkStandardUPCEANChecksum(d){let de=d.length;if(de===0)return!1;let Se=parseInt(d.charAt(de-1),10);return D2.getStandardUPCEANChecksum(d.substring(0,de-1))===Se}static getStandardUPCEANChecksum(d){let de=d.length,Se=0;for(let Ue=de-1;Ue>=0;Ue-=2){let Ge=d.charAt(Ue).charCodeAt(0)-"0".charCodeAt(0);if(Ge<0||Ge>9)throw new za;Se+=Ge}Se*=3;for(let Ue=de-2;Ue>=0;Ue-=2){let Ge=d.charAt(Ue).charCodeAt(0)-"0".charCodeAt(0);if(Ge<0||Ge>9)throw new za;Se+=Ge}return(1e3-Se)%10}static decodeEnd(d,de){return D2.findGuardPattern(d,de,!1,D2.START_END_PATTERN,new Int32Array(D2.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(d,de,Se,Ue){return this.findGuardPattern(d,de,Se,Ue,new Int32Array(Ue.length))}static findGuardPattern(d,de,Se,Ue,Ge){let Qe=d.getSize();de=Se?d.getNextUnset(de):d.getNextSet(de);let gn=0,Bi=de,Ks=Ue.length,gy=Se;for(let Cy=de;Cy<Qe;Cy++)if(d.get(Cy)!==gy)Ge[gn]++;else{if(gn===Ks-1){if(M2.patternMatchVariance(Ge,Ue,D2.MAX_INDIVIDUAL_VARIANCE)<D2.MAX_AVG_VARIANCE)return Int32Array.from([Bi,Cy]);Bi+=Ge[0]+Ge[1];let Oy=Ge.slice(2,Ge.length-1);for(let Nb=0;Nb<gn-1;Nb++)Ge[Nb]=Oy[Nb];Ge[gn-1]=0,Ge[gn]=0,gn--}else gn++;Ge[gn]=1,gy=!gy}throw new Bg}static decodeDigit(d,de,Se,Ue){this.recordPattern(d,Se,de);let Ge=this.MAX_AVG_VARIANCE,Qe=-1,gn=Ue.length;for(let Bi=0;Bi<gn;Bi++){let Ks=Ue[Bi],gy=M2.patternMatchVariance(de,Ks,D2.MAX_INDIVIDUAL_VARIANCE);gy<Ge&&(Ge=gy,Qe=Bi)}if(Qe>=0)return Qe;throw new Bg}}D2.MAX_AVG_VARIANCE=.48,D2.MAX_INDIVIDUAL_VARIANCE=.7,D2.START_END_PATTERN=Int32Array.from([1,1,1]),D2.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),D2.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),D2.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class j2{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(d,de,Se){let Ue=this.decodeRowStringBuffer,Ge=this.decodeMiddle(de,Se,Ue),Qe=Ue.toString(),gn=j2.parseExtensionString(Qe),Bi=[new Wb((Se[0]+Se[1])/2,d),new Wb(Ge,d)],Ks=new l2(Qe,null,0,Bi,Rb.UPC_EAN_EXTENSION,new Date().getTime());return gn!=null&&Ks.putAllMetadata(gn),Ks}decodeMiddle(d,de,Se){let Ue=this.decodeMiddleCounters;Ue[0]=0,Ue[1]=0,Ue[2]=0,Ue[3]=0;let Ge=d.getSize(),Qe=de[1],gn=0;for(let Ks=0;Ks<5&&Qe<Ge;Ks++){let gy=D2.decodeDigit(d,Ue,Qe,D2.L_AND_G_PATTERNS);Se+=String.fromCharCode("0".charCodeAt(0)+gy%10);for(let Cy of Ue)Qe+=Cy;gy>=10&&(gn|=1<<4-Ks),Ks!==4&&(Qe=d.getNextSet(Qe),Qe=d.getNextUnset(Qe))}if(Se.length!==5)throw new Bg;let Bi=this.determineCheckDigit(gn);if(j2.extensionChecksum(Se.toString())!==Bi)throw new Bg;return Qe}static extensionChecksum(d){let de=d.length,Se=0;for(let Ue=de-2;Ue>=0;Ue-=2)Se+=d.charAt(Ue).charCodeAt(0)-"0".charCodeAt(0);Se*=3;for(let Ue=de-1;Ue>=0;Ue-=2)Se+=d.charAt(Ue).charCodeAt(0)-"0".charCodeAt(0);return Se*=3,Se%10}determineCheckDigit(d){for(let de=0;de<10;de++)if(d===this.CHECK_DIGIT_ENCODINGS[de])return de;throw new Bg}static parseExtensionString(d){if(d.length!==5)return null;let de=j2.parseExtension5String(d);return de==null?null:new Map([[s2.SUGGESTED_PRICE,de]])}static parseExtension5String(d){let de;switch(d.charAt(0)){case"0":de="\xA3";break;case"5":de="$";break;case"9":switch(d){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}de="";break;default:de="";break}let Se=parseInt(d.substring(1)),Ue=(Se/100).toString(),Ge=Se%100,Qe=Ge<10?"0"+Ge:Ge.toString();return de+Ue+"."+Qe}}class z2{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(d,de,Se){let Ue=this.decodeRowStringBuffer,Ge=this.decodeMiddle(de,Se,Ue),Qe=Ue.toString(),gn=z2.parseExtensionString(Qe),Bi=[new Wb((Se[0]+Se[1])/2,d),new Wb(Ge,d)],Ks=new l2(Qe,null,0,Bi,Rb.UPC_EAN_EXTENSION,new Date().getTime());return gn!=null&&Ks.putAllMetadata(gn),Ks}decodeMiddle(d,de,Se){let Ue=this.decodeMiddleCounters;Ue[0]=0,Ue[1]=0,Ue[2]=0,Ue[3]=0;let Ge=d.getSize(),Qe=de[1],gn=0;for(let Bi=0;Bi<2&&Qe<Ge;Bi++){let Ks=D2.decodeDigit(d,Ue,Qe,D2.L_AND_G_PATTERNS);Se+=String.fromCharCode("0".charCodeAt(0)+Ks%10);for(let gy of Ue)Qe+=gy;Ks>=10&&(gn|=1<<1-Bi),Bi!==1&&(Qe=d.getNextSet(Qe),Qe=d.getNextUnset(Qe))}if(Se.length!==2)throw new Bg;if(parseInt(Se.toString())%4!==gn)throw new Bg;return Qe}static parseExtensionString(d){return d.length!==2?null:new Map([[s2.ISSUE_NUMBER,parseInt(d)]])}}class fF{static decodeRow(d,de,Se){let Ue=D2.findGuardPattern(de,Se,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new j2().decodeRow(d,de,Ue)}catch{return new z2().decodeRow(d,de,Ue)}}}fF.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class d2 extends D2{constructor(){super(),this.decodeRowStringBuffer="",d2.L_AND_G_PATTERNS=d2.L_PATTERNS.map(d=>Int32Array.from(d));for(let d=10;d<20;d++){let de=d2.L_PATTERNS[d-10],Se=new Int32Array(de.length);for(let Ue=0;Ue<de.length;Ue++)Se[Ue]=de[de.length-Ue-1];d2.L_AND_G_PATTERNS[d]=Se}}decodeRow(d,de,Se){let Ue=d2.findStartGuardPattern(de),Ge=Se==null?null:Se.get(zs.NEED_RESULT_POINT_CALLBACK);if(Ge!=null){let _2=new Wb((Ue[0]+Ue[1])/2,d);Ge.foundPossibleResultPoint(_2)}let Qe=this.decodeMiddle(de,Ue,this.decodeRowStringBuffer),gn=Qe.rowOffset,Bi=Qe.resultString;if(Ge!=null){let _2=new Wb(gn,d);Ge.foundPossibleResultPoint(_2)}let Ks=d2.decodeEnd(de,gn);if(Ge!=null){let _2=new Wb((Ks[0]+Ks[1])/2,d);Ge.foundPossibleResultPoint(_2)}let gy=Ks[1],Cy=gy+(gy-Ks[0]);if(Cy>=de.getSize()||!de.isRange(gy,Cy,!1))throw new Bg;let Oy=Bi.toString();if(Oy.length<8)throw new za;if(!d2.checkChecksum(Oy))throw new xe;let Nb=(Ue[1]+Ue[0])/2,qb=(Ks[1]+Ks[0])/2,Ub=this.getBarcodeFormat(),e2=[new Wb(Nb,d),new Wb(qb,d)],c2=new l2(Oy,null,0,e2,Ub,new Date().getTime()),k2=0;try{let _2=fF.decodeRow(d,de,Ks[1]);c2.putMetadata(s2.UPC_EAN_EXTENSION,_2.getText()),c2.putAllMetadata(_2.getResultMetadata()),c2.addResultPoints(_2.getResultPoints()),k2=_2.getText().length}catch{}let $2=Se==null?null:Se.get(zs.ALLOWED_EAN_EXTENSIONS);if($2!=null){let _2=!1;for(let X2 in $2)if(k2.toString()===X2){_2=!0;break}if(!_2)throw new Bg}return Ub===Rb.EAN_13||Rb.UPC_A,c2}static checkChecksum(d){return d2.checkStandardUPCEANChecksum(d)}static checkStandardUPCEANChecksum(d){let de=d.length;if(de===0)return!1;let Se=parseInt(d.charAt(de-1),10);return d2.getStandardUPCEANChecksum(d.substring(0,de-1))===Se}static getStandardUPCEANChecksum(d){let de=d.length,Se=0;for(let Ue=de-1;Ue>=0;Ue-=2){let Ge=d.charAt(Ue).charCodeAt(0)-"0".charCodeAt(0);if(Ge<0||Ge>9)throw new za;Se+=Ge}Se*=3;for(let Ue=de-2;Ue>=0;Ue-=2){let Ge=d.charAt(Ue).charCodeAt(0)-"0".charCodeAt(0);if(Ge<0||Ge>9)throw new za;Se+=Ge}return(1e3-Se)%10}static decodeEnd(d,de){return d2.findGuardPattern(d,de,!1,d2.START_END_PATTERN,new Int32Array(d2.START_END_PATTERN.length).fill(0))}}class KC extends d2{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(d,de,Se){let Ue=this.decodeMiddleCounters;Ue[0]=0,Ue[1]=0,Ue[2]=0,Ue[3]=0;let Ge=d.getSize(),Qe=de[1],gn=0;for(let Bi=0;Bi<6&&Qe<Ge;Bi++){let Ks=d2.decodeDigit(d,Ue,Qe,d2.L_AND_G_PATTERNS);Se+=String.fromCharCode("0".charCodeAt(0)+Ks%10);for(let gy of Ue)Qe+=gy;Ks>=10&&(gn|=1<<5-Bi)}Se=KC.determineFirstDigit(Se,gn),Qe=d2.findGuardPattern(d,Qe,!0,d2.MIDDLE_PATTERN,new Int32Array(d2.MIDDLE_PATTERN.length).fill(0))[1];for(let Bi=0;Bi<6&&Qe<Ge;Bi++){let Ks=d2.decodeDigit(d,Ue,Qe,d2.L_PATTERNS);Se+=String.fromCharCode("0".charCodeAt(0)+Ks);for(let gy of Ue)Qe+=gy}return{rowOffset:Qe,resultString:Se}}getBarcodeFormat(){return Rb.EAN_13}static determineFirstDigit(d,de){for(let Se=0;Se<10;Se++)if(de===this.FIRST_DIGIT_ENCODINGS[Se])return d=String.fromCharCode("0".charCodeAt(0)+Se)+d,d;throw new Bg}}KC.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class mC extends d2{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(d,de,Se){let Ue=this.decodeMiddleCounters;Ue[0]=0,Ue[1]=0,Ue[2]=0,Ue[3]=0;let Ge=d.getSize(),Qe=de[1];for(let gn=0;gn<4&&Qe<Ge;gn++){let Bi=d2.decodeDigit(d,Ue,Qe,d2.L_PATTERNS);Se+=String.fromCharCode("0".charCodeAt(0)+Bi);for(let Ks of Ue)Qe+=Ks}Qe=d2.findGuardPattern(d,Qe,!0,d2.MIDDLE_PATTERN,new Int32Array(d2.MIDDLE_PATTERN.length).fill(0))[1];for(let gn=0;gn<4&&Qe<Ge;gn++){let Bi=d2.decodeDigit(d,Ue,Qe,d2.L_PATTERNS);Se+=String.fromCharCode("0".charCodeAt(0)+Bi);for(let Ks of Ue)Qe+=Ks}return{rowOffset:Qe,resultString:Se}}getBarcodeFormat(){return Rb.EAN_8}}class LO extends d2{constructor(){super(...arguments),this.ean13Reader=new KC}getBarcodeFormat(){return Rb.UPC_A}decode(d,de){return this.maybeReturnResult(this.ean13Reader.decode(d))}decodeRow(d,de,Se){return this.maybeReturnResult(this.ean13Reader.decodeRow(d,de,Se))}decodeMiddle(d,de,Se){return this.ean13Reader.decodeMiddle(d,de,Se)}maybeReturnResult(d){let de=d.getText();if(de.charAt(0)==="0"){let Se=new l2(de.substring(1),null,null,d.getResultPoints(),Rb.UPC_A);return d.getResultMetadata()!=null&&Se.putAllMetadata(d.getResultMetadata()),Se}else throw new Bg}reset(){this.ean13Reader.reset()}}class FC extends d2{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(d,de,Se){let Ue=this.decodeMiddleCounters.map(Bi=>Bi);Ue[0]=0,Ue[1]=0,Ue[2]=0,Ue[3]=0;let Ge=d.getSize(),Qe=de[1],gn=0;for(let Bi=0;Bi<6&&Qe<Ge;Bi++){let Ks=FC.decodeDigit(d,Ue,Qe,FC.L_AND_G_PATTERNS);Se+=String.fromCharCode("0".charCodeAt(0)+Ks%10);for(let gy of Ue)Qe+=gy;Ks>=10&&(gn|=1<<5-Bi)}return FC.determineNumSysAndCheckDigit(new Bb(Se),gn),Qe}decodeEnd(d,de){return FC.findGuardPatternWithoutCounters(d,de,!0,FC.MIDDLE_END_PATTERN)}checkChecksum(d){return d2.checkChecksum(FC.convertUPCEtoUPCA(d))}static determineNumSysAndCheckDigit(d,de){for(let Se=0;Se<=1;Se++)for(let Ue=0;Ue<10;Ue++)if(de===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[Se][Ue]){d.insert(0,"0"+Se),d.append("0"+Ue);return}throw Bg.getNotFoundInstance()}getBarcodeFormat(){return Rb.UPC_E}static convertUPCEtoUPCA(d){let de=d.slice(1,7).split("").map(Ge=>Ge.charCodeAt(0)),Se=new Bb;Se.append(d.charAt(0));let Ue=de[5];switch(Ue){case 0:case 1:case 2:Se.appendChars(de,0,2),Se.append(Ue),Se.append("0000"),Se.appendChars(de,2,3);break;case 3:Se.appendChars(de,0,3),Se.append("00000"),Se.appendChars(de,3,2);break;case 4:Se.appendChars(de,0,4),Se.append("00000"),Se.append(de[4]);break;default:Se.appendChars(de,0,5),Se.append("0000"),Se.append(Ue);break}return d.length>=8&&Se.append(d.charAt(7)),Se.toString()}}FC.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),FC.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])];class xO extends M2{constructor(d){super();let de=d==null?null:d.get(zs.POSSIBLE_FORMATS),Se=[];de!=null&&(de.indexOf(Rb.EAN_13)>-1?Se.push(new KC):de.indexOf(Rb.UPC_A)>-1&&Se.push(new LO),de.indexOf(Rb.EAN_8)>-1&&Se.push(new mC),de.indexOf(Rb.UPC_E)>-1&&Se.push(new FC)),Se.length===0&&(Se.push(new KC),Se.push(new mC),Se.push(new FC)),this.readers=Se}decodeRow(d,de,Se){for(let Ue of this.readers)try{let Ge=Ue.decodeRow(d,de,Se),Qe=Ge.getBarcodeFormat()===Rb.EAN_13&&Ge.getText().charAt(0)==="0",gn=Se==null?null:Se.get(zs.POSSIBLE_FORMATS),Bi=gn==null||gn.includes(Rb.UPC_A);if(Qe&&Bi){let Ks=Ge.getRawBytes(),gy=new l2(Ge.getText().substring(1),Ks,Ks.length,Ge.getResultPoints(),Rb.UPC_A);return gy.putAllMetadata(Ge.getResultMetadata()),gy}return Ge}catch{}throw new Bg}reset(){for(let d of this.readers)d.reset()}}class EC extends M2{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(d,de){for(let Se=0;Se<de.length;Se++)if(M2.patternMatchVariance(d,de[Se],EC.MAX_INDIVIDUAL_VARIANCE)<EC.MAX_AVG_VARIANCE)return Se;throw new Bg}static count(d){return h2.sum(new Int32Array(d))}static increment(d,de){let Se=0,Ue=de[0];for(let Ge=1;Ge<d.length;Ge++)de[Ge]>Ue&&(Ue=de[Ge],Se=Ge);d[Se]++}static decrement(d,de){let Se=0,Ue=de[0];for(let Ge=1;Ge<d.length;Ge++)de[Ge]<Ue&&(Ue=de[Ge],Se=Ge);d[Se]--}static isFinderPattern(d){let de=d[0]+d[1],Se=de+d[2]+d[3],Ue=de/Se;if(Ue>=EC.MIN_FINDER_PATTERN_RATIO&&Ue<=EC.MAX_FINDER_PATTERN_RATIO){let Ge=Number.MAX_SAFE_INTEGER,Qe=Number.MIN_SAFE_INTEGER;for(let gn of d)gn>Qe&&(Qe=gn),gn<Ge&&(Ge=gn);return Qe<10*Ge}return!1}}EC.MAX_AVG_VARIANCE=.2,EC.MAX_INDIVIDUAL_VARIANCE=.45,EC.MIN_FINDER_PATTERN_RATIO=9.5/12,EC.MAX_FINDER_PATTERN_RATIO=12.5/14;class gO{constructor(d,de){this.value=d,this.checksumPortion=de}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(d){if(!(d instanceof gO))return!1;let de=d;return this.value===de.value&&this.checksumPortion===de.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class YC{constructor(d,de,Se,Ue,Ge){this.value=d,this.startEnd=de,this.value=d,this.startEnd=de,this.resultPoints=new Array,this.resultPoints.push(new Wb(Se,Ge)),this.resultPoints.push(new Wb(Ue,Ge))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(d){if(!(d instanceof YC))return!1;let de=d;return this.value===de.value}hashCode(){return this.value}}class wO{constructor(){}static getRSSvalue(d,de,Se){let Ue=0;for(let Bi of d)Ue+=Bi;let Ge=0,Qe=0,gn=d.length;for(let Bi=0;Bi<gn-1;Bi++){let Ks;for(Ks=1,Qe|=1<<Bi;Ks<d[Bi];Ks++,Qe&=~(1<<Bi)){let gy=wO.combins(Ue-Ks-1,gn-Bi-2);if(Se&&Qe===0&&Ue-Ks-(gn-Bi-1)>=gn-Bi-1&&(gy-=wO.combins(Ue-Ks-(gn-Bi),gn-Bi-2)),gn-Bi-1>1){let Cy=0;for(let Oy=Ue-Ks-(gn-Bi-2);Oy>de;Oy--)Cy+=wO.combins(Ue-Ks-Oy-1,gn-Bi-3);gy-=Cy*(gn-1-Bi)}else Ue-Ks>de&&gy--;Ge+=gy}Ue-=Ks}return Ge}static combins(d,de){let Se,Ue;d-de>de?(Ue=de,Se=d-de):(Ue=d-de,Se=de);let Ge=1,Qe=1;for(let gn=d;gn>Se;gn--)Ge*=gn,Qe<=Ue&&(Ge/=Qe,Qe++);for(;Qe<=Ue;)Ge/=Qe,Qe++;return Ge}}class eT{static buildBitArray(d){let de=d.length*2-1;d[d.length-1].getRightChar()==null&&(de-=1);let Se=12*de,Ue=new sr(Se),Ge=0,Qe=d[0].getRightChar().getValue();for(let gn=11;gn>=0;--gn)(Qe&1<<gn)!=0&&Ue.set(Ge),Ge++;for(let gn=1;gn<d.length;++gn){let Bi=d[gn],Ks=Bi.getLeftChar().getValue();for(let gy=11;gy>=0;--gy)(Ks&1<<gy)!=0&&Ue.set(Ge),Ge++;if(Bi.getRightChar()!=null){let gy=Bi.getRightChar().getValue();for(let Cy=11;Cy>=0;--Cy)(gy&1<<Cy)!=0&&Ue.set(Ge),Ge++}}return Ue}}class rT{constructor(d,de){de?this.decodedInformation=null:(this.finished=d,this.decodedInformation=de)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class uO{constructor(d){this.newPosition=d}getNewPosition(){return this.newPosition}}class PC extends uO{constructor(d,de){super(d),this.value=de}getValue(){return this.value}isFNC1(){return this.value===PC.FNC1}}PC.FNC1="$";class iT extends uO{constructor(d,de,Se){super(d),Se?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=de}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class eO extends uO{constructor(d,de,Se){if(super(d),de<0||de>10||Se<0||Se>10)throw new za;this.firstDigit=de,this.secondDigit=Se}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===eO.FNC1}isSecondDigitFNC1(){return this.secondDigit===eO.FNC1}isAnyFNC1(){return this.firstDigit===eO.FNC1||this.secondDigit===eO.FNC1}}eO.FNC1=10;class I2{constructor(){}static parseFieldsInGeneralPurpose(d){if(!d)return null;if(d.length<2)throw new Bg;let de=d.substring(0,2);for(let Ge of I2.TWO_DIGIT_DATA_LENGTH)if(Ge[0]===de)return Ge[1]===I2.VARIABLE_LENGTH?I2.processVariableAI(2,Ge[2],d):I2.processFixedAI(2,Ge[1],d);if(d.length<3)throw new Bg;let Se=d.substring(0,3);for(let Ge of I2.THREE_DIGIT_DATA_LENGTH)if(Ge[0]===Se)return Ge[1]===I2.VARIABLE_LENGTH?I2.processVariableAI(3,Ge[2],d):I2.processFixedAI(3,Ge[1],d);for(let Ge of I2.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(Ge[0]===Se)return Ge[1]===I2.VARIABLE_LENGTH?I2.processVariableAI(4,Ge[2],d):I2.processFixedAI(4,Ge[1],d);if(d.length<4)throw new Bg;let Ue=d.substring(0,4);for(let Ge of I2.FOUR_DIGIT_DATA_LENGTH)if(Ge[0]===Ue)return Ge[1]===I2.VARIABLE_LENGTH?I2.processVariableAI(4,Ge[2],d):I2.processFixedAI(4,Ge[1],d);throw new Bg}static processFixedAI(d,de,Se){if(Se.length<d)throw new Bg;let Ue=Se.substring(0,d);if(Se.length<d+de)throw new Bg;let Ge=Se.substring(d,d+de),Qe=Se.substring(d+de),gn="("+Ue+")"+Ge,Bi=I2.parseFieldsInGeneralPurpose(Qe);return Bi==null?gn:gn+Bi}static processVariableAI(d,de,Se){let Ue=Se.substring(0,d),Ge;Se.length<d+de?Ge=Se.length:Ge=d+de;let Qe=Se.substring(d,Ge),gn=Se.substring(Ge),Bi="("+Ue+")"+Qe,Ks=I2.parseFieldsInGeneralPurpose(gn);return Ks==null?Bi:Bi+Ks}}I2.VARIABLE_LENGTH=[],I2.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",I2.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",I2.VARIABLE_LENGTH,20],["22",I2.VARIABLE_LENGTH,29],["30",I2.VARIABLE_LENGTH,8],["37",I2.VARIABLE_LENGTH,8],["90",I2.VARIABLE_LENGTH,30],["91",I2.VARIABLE_LENGTH,30],["92",I2.VARIABLE_LENGTH,30],["93",I2.VARIABLE_LENGTH,30],["94",I2.VARIABLE_LENGTH,30],["95",I2.VARIABLE_LENGTH,30],["96",I2.VARIABLE_LENGTH,30],["97",I2.VARIABLE_LENGTH,3],["98",I2.VARIABLE_LENGTH,30],["99",I2.VARIABLE_LENGTH,30]],I2.THREE_DIGIT_DATA_LENGTH=[["240",I2.VARIABLE_LENGTH,30],["241",I2.VARIABLE_LENGTH,30],["242",I2.VARIABLE_LENGTH,6],["250",I2.VARIABLE_LENGTH,30],["251",I2.VARIABLE_LENGTH,30],["253",I2.VARIABLE_LENGTH,17],["254",I2.VARIABLE_LENGTH,20],["400",I2.VARIABLE_LENGTH,30],["401",I2.VARIABLE_LENGTH,30],["402",17],["403",I2.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",I2.VARIABLE_LENGTH,20],["421",I2.VARIABLE_LENGTH,15],["422",3],["423",I2.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],I2.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",I2.VARIABLE_LENGTH,15],["391",I2.VARIABLE_LENGTH,18],["392",I2.VARIABLE_LENGTH,15],["393",I2.VARIABLE_LENGTH,18],["703",I2.VARIABLE_LENGTH,30]],I2.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",I2.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",I2.VARIABLE_LENGTH,20],["8003",I2.VARIABLE_LENGTH,30],["8004",I2.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",I2.VARIABLE_LENGTH,30],["8008",I2.VARIABLE_LENGTH,12],["8018",18],["8020",I2.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",I2.VARIABLE_LENGTH,70],["8200",I2.VARIABLE_LENGTH,70]];class EO{constructor(d){this.buffer=new Bb,this.information=d}decodeAllCodes(d,de){let Se=de,Ue=null;do{let Ge=this.decodeGeneralPurposeField(Se,Ue),Qe=I2.parseFieldsInGeneralPurpose(Ge.getNewString());if(Qe!=null&&d.append(Qe),Ge.isRemaining()?Ue=""+Ge.getRemainingValue():Ue=null,Se===Ge.getNewPosition())break;Se=Ge.getNewPosition()}while(!0);return d.toString()}isStillNumeric(d){if(d+7>this.information.getSize())return d+4<=this.information.getSize();for(let de=d;de<d+3;++de)if(this.information.get(de))return!0;return this.information.get(d+3)}decodeNumeric(d){if(d+7>this.information.getSize()){let Ge=this.extractNumericValueFromBitArray(d,4);return Ge===0?new eO(this.information.getSize(),eO.FNC1,eO.FNC1):new eO(this.information.getSize(),Ge-1,eO.FNC1)}let de=this.extractNumericValueFromBitArray(d,7),Se=(de-8)/11,Ue=(de-8)%11;return new eO(d+7,Se,Ue)}extractNumericValueFromBitArray(d,de){return EO.extractNumericValueFromBitArray(this.information,d,de)}static extractNumericValueFromBitArray(d,de,Se){let Ue=0;for(let Ge=0;Ge<Se;++Ge)d.get(de+Ge)&&(Ue|=1<<Se-Ge-1);return Ue}decodeGeneralPurposeField(d,de){this.buffer.setLengthToZero(),de!=null&&this.buffer.append(de),this.current.setPosition(d);let Se=this.parseBlocks();return Se!=null&&Se.isRemaining()?new iT(this.current.getPosition(),this.buffer.toString(),Se.getRemainingValue()):new iT(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let d,de;do{let Se=this.current.getPosition();if(this.current.isAlpha()?(de=this.parseAlphaBlock(),d=de.isFinished()):this.current.isIsoIec646()?(de=this.parseIsoIec646Block(),d=de.isFinished()):(de=this.parseNumericBlock(),d=de.isFinished()),Se===this.current.getPosition()&&!d)break}while(!d);return de.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let d=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(d.getNewPosition()),d.isFirstDigitFNC1()){let de;return d.isSecondDigitFNC1()?de=new iT(this.current.getPosition(),this.buffer.toString()):de=new iT(this.current.getPosition(),this.buffer.toString(),d.getSecondDigit()),new rT(!0,de)}if(this.buffer.append(d.getFirstDigit()),d.isSecondDigitFNC1()){let de=new iT(this.current.getPosition(),this.buffer.toString());return new rT(!0,de)}this.buffer.append(d.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new rT(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let d=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(d.getNewPosition()),d.isFNC1()){let de=new iT(this.current.getPosition(),this.buffer.toString());return new rT(!0,de)}this.buffer.append(d.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new rT(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let d=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(d.getNewPosition()),d.isFNC1()){let de=new iT(this.current.getPosition(),this.buffer.toString());return new rT(!0,de)}this.buffer.append(d.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new rT(!1)}isStillIsoIec646(d){if(d+5>this.information.getSize())return!1;let de=this.extractNumericValueFromBitArray(d,5);if(de>=5&&de<16)return!0;if(d+7>this.information.getSize())return!1;let Se=this.extractNumericValueFromBitArray(d,7);if(Se>=64&&Se<116)return!0;if(d+8>this.information.getSize())return!1;let Ue=this.extractNumericValueFromBitArray(d,8);return Ue>=232&&Ue<253}decodeIsoIec646(d){let de=this.extractNumericValueFromBitArray(d,5);if(de===15)return new PC(d+5,PC.FNC1);if(de>=5&&de<15)return new PC(d+5,"0"+(de-5));let Se=this.extractNumericValueFromBitArray(d,7);if(Se>=64&&Se<90)return new PC(d+7,""+(Se+1));if(Se>=90&&Se<116)return new PC(d+7,""+(Se+7));let Ue=this.extractNumericValueFromBitArray(d,8),Ge;switch(Ue){case 232:Ge="!";break;case 233:Ge='"';break;case 234:Ge="%";break;case 235:Ge="&";break;case 236:Ge="'";break;case 237:Ge="(";break;case 238:Ge=")";break;case 239:Ge="*";break;case 240:Ge="+";break;case 241:Ge=",";break;case 242:Ge="-";break;case 243:Ge=".";break;case 244:Ge="/";break;case 245:Ge=":";break;case 246:Ge=";";break;case 247:Ge="<";break;case 248:Ge="=";break;case 249:Ge=">";break;case 250:Ge="?";break;case 251:Ge="_";break;case 252:Ge=" ";break;default:throw new za}return new PC(d+8,Ge)}isStillAlpha(d){if(d+5>this.information.getSize())return!1;let de=this.extractNumericValueFromBitArray(d,5);if(de>=5&&de<16)return!0;if(d+6>this.information.getSize())return!1;let Se=this.extractNumericValueFromBitArray(d,6);return Se>=16&&Se<63}decodeAlphanumeric(d){let de=this.extractNumericValueFromBitArray(d,5);if(de===15)return new PC(d+5,PC.FNC1);if(de>=5&&de<15)return new PC(d+5,"0"+(de-5));let Se=this.extractNumericValueFromBitArray(d,6);if(Se>=32&&Se<58)return new PC(d+6,""+(Se+33));let Ue;switch(Se){case 58:Ue="*";break;case 59:Ue=",";break;case 60:Ue="-";break;case 61:Ue=".";break;case 62:Ue="/";break;default:throw new Qb("Decoding invalid alphanumeric value: "+Se)}return new PC(d+6,Ue)}isAlphaTo646ToAlphaLatch(d){if(d+1>this.information.getSize())return!1;for(let de=0;de<5&&de+d<this.information.getSize();++de)if(de===2){if(!this.information.get(d+2))return!1}else if(this.information.get(d+de))return!1;return!0}isAlphaOr646ToNumericLatch(d){if(d+3>this.information.getSize())return!1;for(let de=d;de<d+3;++de)if(this.information.get(de))return!1;return!0}isNumericToAlphaNumericLatch(d){if(d+1>this.information.getSize())return!1;for(let de=0;de<4&&de+d<this.information.getSize();++de)if(this.information.get(d+de))return!1;return!0}}class H4{constructor(d){this.information=d,this.generalDecoder=new EO(d)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class tO extends H4{constructor(d){super(d)}encodeCompressedGtin(d,de){d.append("(01)");let Se=d.length();d.append("9"),this.encodeCompressedGtinWithoutAI(d,de,Se)}encodeCompressedGtinWithoutAI(d,de,Se){for(let Ue=0;Ue<4;++Ue){let Ge=this.getGeneralDecoder().extractNumericValueFromBitArray(de+10*Ue,10);Ge/100===0&&d.append("0"),Ge/10===0&&d.append("0"),d.append(Ge)}tO.appendCheckDigit(d,Se)}static appendCheckDigit(d,de){let Se=0;for(let Ue=0;Ue<13;Ue++){let Ge=d.charAt(Ue+de).charCodeAt(0)-"0".charCodeAt(0);Se+=(Ue&1)===0?3*Ge:Ge}Se=10-Se%10,Se===10&&(Se=0),d.append(Se)}}tO.GTIN_SIZE=40;class E4 extends tO{constructor(d){super(d)}parseInformation(){let d=new Bb;d.append("(01)");let de=d.length(),Se=this.getGeneralDecoder().extractNumericValueFromBitArray(E4.HEADER_SIZE,4);return d.append(Se),this.encodeCompressedGtinWithoutAI(d,E4.HEADER_SIZE+4,de),this.getGeneralDecoder().decodeAllCodes(d,E4.HEADER_SIZE+44)}}E4.HEADER_SIZE=1+1+2;class HO extends H4{constructor(d){super(d)}parseInformation(){let d=new Bb;return this.getGeneralDecoder().decodeAllCodes(d,HO.HEADER_SIZE)}}HO.HEADER_SIZE=2+1+2;class K4 extends tO{constructor(d){super(d)}encodeCompressedWeight(d,de,Se){let Ue=this.getGeneralDecoder().extractNumericValueFromBitArray(de,Se);this.addWeightCode(d,Ue);let Ge=this.checkWeight(Ue),Qe=1e5;for(let gn=0;gn<5;++gn)Ge/Qe===0&&d.append("0"),Qe/=10;d.append(Ge)}}class AO extends K4{constructor(d){super(d)}parseInformation(){if(this.getInformation().getSize()!=AO.HEADER_SIZE+K4.GTIN_SIZE+AO.WEIGHT_SIZE)throw new Bg;let d=new Bb;return this.encodeCompressedGtin(d,AO.HEADER_SIZE),this.encodeCompressedWeight(d,AO.HEADER_SIZE+K4.GTIN_SIZE,AO.WEIGHT_SIZE),d.toString()}}AO.HEADER_SIZE=4+1,AO.WEIGHT_SIZE=15;class D6 extends AO{constructor(d){super(d)}addWeightCode(d,de){d.append("(3103)")}checkWeight(d){return d}}class G6 extends AO{constructor(d){super(d)}addWeightCode(d,de){de<1e4?d.append("(3202)"):d.append("(3203)")}checkWeight(d){return d<1e4?d:d-1e4}}class RO extends tO{constructor(d){super(d)}parseInformation(){if(this.getInformation().getSize()<RO.HEADER_SIZE+tO.GTIN_SIZE)throw new Bg;let d=new Bb;this.encodeCompressedGtin(d,RO.HEADER_SIZE);let de=this.getGeneralDecoder().extractNumericValueFromBitArray(RO.HEADER_SIZE+tO.GTIN_SIZE,RO.LAST_DIGIT_SIZE);d.append("(392"),d.append(de),d.append(")");let Se=this.getGeneralDecoder().decodeGeneralPurposeField(RO.HEADER_SIZE+tO.GTIN_SIZE+RO.LAST_DIGIT_SIZE,null);return d.append(Se.getNewString()),d.toString()}}RO.HEADER_SIZE=5+1+2,RO.LAST_DIGIT_SIZE=2;class wT extends tO{constructor(d){super(d)}parseInformation(){if(this.getInformation().getSize()<wT.HEADER_SIZE+tO.GTIN_SIZE)throw new Bg;let d=new Bb;this.encodeCompressedGtin(d,wT.HEADER_SIZE);let de=this.getGeneralDecoder().extractNumericValueFromBitArray(wT.HEADER_SIZE+tO.GTIN_SIZE,wT.LAST_DIGIT_SIZE);d.append("(393"),d.append(de),d.append(")");let Se=this.getGeneralDecoder().extractNumericValueFromBitArray(wT.HEADER_SIZE+tO.GTIN_SIZE+wT.LAST_DIGIT_SIZE,wT.FIRST_THREE_DIGITS_SIZE);Se/100==0&&d.append("0"),Se/10==0&&d.append("0"),d.append(Se);let Ue=this.getGeneralDecoder().decodeGeneralPurposeField(wT.HEADER_SIZE+tO.GTIN_SIZE+wT.LAST_DIGIT_SIZE+wT.FIRST_THREE_DIGITS_SIZE,null);return d.append(Ue.getNewString()),d.toString()}}wT.HEADER_SIZE=5+1+2,wT.LAST_DIGIT_SIZE=2,wT.FIRST_THREE_DIGITS_SIZE=10;class IC extends K4{constructor(d,de,Se){super(d),this.dateCode=Se,this.firstAIdigits=de}parseInformation(){if(this.getInformation().getSize()!=IC.HEADER_SIZE+IC.GTIN_SIZE+IC.WEIGHT_SIZE+IC.DATE_SIZE)throw new Bg;let d=new Bb;return this.encodeCompressedGtin(d,IC.HEADER_SIZE),this.encodeCompressedWeight(d,IC.HEADER_SIZE+IC.GTIN_SIZE,IC.WEIGHT_SIZE),this.encodeCompressedDate(d,IC.HEADER_SIZE+IC.GTIN_SIZE+IC.WEIGHT_SIZE),d.toString()}encodeCompressedDate(d,de){let Se=this.getGeneralDecoder().extractNumericValueFromBitArray(de,IC.DATE_SIZE);if(Se==38400)return;d.append("("),d.append(this.dateCode),d.append(")");let Ue=Se%32;Se/=32;let Ge=Se%12+1;Se/=12;let Qe=Se;Qe/10==0&&d.append("0"),d.append(Qe),Ge/10==0&&d.append("0"),d.append(Ge),Ue/10==0&&d.append("0"),d.append(Ue)}addWeightCode(d,de){d.append("("),d.append(this.firstAIdigits),d.append(de/1e5),d.append(")")}checkWeight(d){return d%1e5}}IC.HEADER_SIZE=7+1,IC.WEIGHT_SIZE=20,IC.DATE_SIZE=16;function H6(by){try{if(by.get(1))return new E4(by);if(!by.get(2))return new HO(by);switch(EO.extractNumericValueFromBitArray(by,1,4)){case 4:return new D6(by);case 5:return new G6(by)}switch(EO.extractNumericValueFromBitArray(by,1,5)){case 12:return new RO(by);case 13:return new wT(by)}switch(EO.extractNumericValueFromBitArray(by,1,7)){case 56:return new IC(by,"310","11");case 57:return new IC(by,"320","11");case 58:return new IC(by,"310","13");case 59:return new IC(by,"320","13");case 60:return new IC(by,"310","15");case 61:return new IC(by,"320","15");case 62:return new IC(by,"310","17");case 63:return new IC(by,"320","17")}}catch(d){throw console.log(d),new Qb("unknown decoder: "+by)}}class YO{constructor(d,de,Se,Ue){this.leftchar=d,this.rightchar=de,this.finderpattern=Se,this.maybeLast=Ue}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(d,de){return d instanceof YO?YO.equalsOrNull(d.leftchar,de.leftchar)&&YO.equalsOrNull(d.rightchar,de.rightchar)&&YO.equalsOrNull(d.finderpattern,de.finderpattern):!1}static equalsOrNull(d,de){return d===null?de===null:YO.equals(d,de)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class o6{constructor(d,de,Se){this.pairs=d,this.rowNumber=de,this.wasReversed=Se}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(d){return this.checkEqualitity(this,d)}toString(){return"{ "+this.pairs+" }"}equals(d,de){return d instanceof o6?this.checkEqualitity(d,de)&&d.wasReversed===de.wasReversed:!1}checkEqualitity(d,de){if(!d||!de)return;let Se;return d.forEach((Ue,Ge)=>{de.forEach(Qe=>{Ue.getLeftChar().getValue()===Qe.getLeftChar().getValue()&&Ue.getRightChar().getValue()===Qe.getRightChar().getValue()&&Ue.getFinderPatter().getValue()===Qe.getFinderPatter().getValue()&&(Se=!0)})}),Se}}class w2 extends EC{constructor(d){super(...arguments),this.pairs=new Array(w2.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=d===!0}decodeRow(d,de,Se){this.pairs.length=0,this.startFromEven=!1;try{return w2.constructResult(this.decodeRow2pairs(d,de))}catch(Ue){this.verbose&&console.log(Ue)}return this.pairs.length=0,this.startFromEven=!0,w2.constructResult(this.decodeRow2pairs(d,de))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(d,de){let Se=!1;for(;!Se;)try{this.pairs.push(this.retrieveNextPair(de,this.pairs,d))}catch(Ge){if(Ge instanceof Bg){if(!this.pairs.length)throw new Bg;Se=!0}}if(this.checkChecksum())return this.pairs;let Ue;if(this.rows.length?Ue=!0:Ue=!1,this.storeRow(d,!1),Ue){let Ge=this.checkRowsBoolean(!1);if(Ge!=null||(Ge=this.checkRowsBoolean(!0),Ge!=null))return Ge}throw new Bg}checkRowsBoolean(d){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,d&&(this.rows=this.rows.reverse());let de=null;try{de=this.checkRows(new Array,0)}catch(Se){this.verbose&&console.log(Se)}return d&&(this.rows=this.rows.reverse()),de}checkRows(d,de){for(let Se=de;Se<this.rows.length;Se++){let Ue=this.rows[Se];this.pairs.length=0;for(let Qe of d)this.pairs.push(Qe.getPairs());if(this.pairs.push(Ue.getPairs()),!w2.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let Ge=new Array(d);Ge.push(Ue);try{return this.checkRows(Ge,Se+1)}catch(Qe){this.verbose&&console.log(Qe)}}throw new Bg}static isValidSequence(d){for(let de of w2.FINDER_PATTERN_SEQUENCES){if(d.length>de.length)continue;let Se=!0;for(let Ue=0;Ue<d.length;Ue++)if(d[Ue].getFinderPattern().getValue()!=de[Ue]){Se=!1;break}if(Se)return!0}return!1}storeRow(d,de){let Se=0,Ue=!1,Ge=!1;for(;Se<this.rows.length;){let Qe=this.rows[Se];if(Qe.getRowNumber()>d){Ge=Qe.isEquivalent(this.pairs);break}Ue=Qe.isEquivalent(this.pairs),Se++}Ge||Ue||w2.isPartialRow(this.pairs,this.rows)||(this.rows.push(Se,new o6(this.pairs,d,de)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(d,de){for(let Se of de)if(Se.getPairs().length!==d.length){for(let Ue of Se.getPairs())for(let Ge of d)if(YO.equals(Ue,Ge))break}}static isPartialRow(d,de){for(let Se of de){let Ue=!0;for(let Ge of d){let Qe=!1;for(let gn of Se.getPairs())if(Ge.equals(gn)){Qe=!0;break}if(!Qe){Ue=!1;break}}if(Ue)return!0}return!1}getRows(){return this.rows}static constructResult(d){let de=eT.buildBitArray(d),Se=H6(de).parseInformation(),Ue=d[0].getFinderPattern().getResultPoints(),Ge=d[d.length-1].getFinderPattern().getResultPoints(),Qe=[Ue[0],Ue[1],Ge[0],Ge[1]];return new l2(Se,null,null,Qe,Rb.RSS_EXPANDED,null)}checkChecksum(){let d=this.pairs.get(0),de=d.getLeftChar(),Se=d.getRightChar();if(Se==null)return!1;let Ue=Se.getChecksumPortion(),Ge=2;for(let Qe=1;Qe<this.pairs.size();++Qe){let gn=this.pairs.get(Qe);Ue+=gn.getLeftChar().getChecksumPortion(),Ge++;let Bi=gn.getRightChar();Bi!=null&&(Ue+=Bi.getChecksumPortion(),Ge++)}return Ue%=211,211*(Ge-4)+Ue==de.getValue()}static getNextSecondBar(d,de){let Se;return d.get(de)?(Se=d.getNextUnset(de),Se=d.getNextSet(Se)):(Se=d.getNextSet(de),Se=d.getNextUnset(Se)),Se}retrieveNextPair(d,de,Se){let Ue=de.length%2==0;this.startFromEven&&(Ue=!Ue);let Ge,Qe=!0,gn=-1;do this.findNextPair(d,de,gn),Ge=this.parseFoundFinderPattern(d,Se,Ue),Ge==null?gn=w2.getNextSecondBar(d,this.startEnd[0]):Qe=!1;while(Qe);let Bi=this.decodeDataCharacter(d,Ge,Ue,!0);if(!this.isEmptyPair(de)&&de[de.length-1].mustBeLast())throw new Bg;let Ks;try{Ks=this.decodeDataCharacter(d,Ge,Ue,!1)}catch(gy){Ks=null,this.verbose&&console.log(gy)}return new YO(Bi,Ks,Ge,!0)}isEmptyPair(d){return d.length===0}findNextPair(d,de,Se){let Ue=this.getDecodeFinderCounters();Ue[0]=0,Ue[1]=0,Ue[2]=0,Ue[3]=0;let Ge=d.getSize(),Qe;Se>=0?Qe=Se:this.isEmptyPair(de)?Qe=0:Qe=de[de.length-1].getFinderPattern().getStartEnd()[1];let gn=de.length%2!=0;this.startFromEven&&(gn=!gn);let Bi=!1;for(;Qe<Ge&&(Bi=!d.get(Qe),!!Bi);)Qe++;let Ks=0,gy=Qe;for(let Cy=Qe;Cy<Ge;Cy++)if(d.get(Cy)!=Bi)Ue[Ks]++;else{if(Ks==3){if(gn&&w2.reverseCounters(Ue),w2.isFinderPattern(Ue)){this.startEnd[0]=gy,this.startEnd[1]=Cy;return}gn&&w2.reverseCounters(Ue),gy+=Ue[0]+Ue[1],Ue[0]=Ue[2],Ue[1]=Ue[3],Ue[2]=0,Ue[3]=0,Ks--}else Ks++;Ue[Ks]=1,Bi=!Bi}throw new Bg}static reverseCounters(d){let de=d.length;for(let Se=0;Se<de/2;++Se){let Ue=d[Se];d[Se]=d[de-Se-1],d[de-Se-1]=Ue}}parseFoundFinderPattern(d,de,Se){let Ue,Ge,Qe;if(Se){let Ks=this.startEnd[0]-1;for(;Ks>=0&&!d.get(Ks);)Ks--;Ks++,Ue=this.startEnd[0]-Ks,Ge=Ks,Qe=this.startEnd[1]}else Ge=this.startEnd[0],Qe=d.getNextUnset(this.startEnd[1]+1),Ue=Qe-this.startEnd[1];let gn=this.getDecodeFinderCounters();He.arraycopy(gn,0,gn,1,gn.length-1),gn[0]=Ue;let Bi;try{Bi=this.parseFinderValue(gn,w2.FINDER_PATTERNS)}catch{return null}return new YC(Bi,[Ge,Qe],Ge,Qe,de)}decodeDataCharacter(d,de,Se,Ue){let Ge=this.getDataCharacterCounters();for(let AC=0;AC<Ge.length;AC++)Ge[AC]=0;if(Ue)w2.recordPatternInReverse(d,de.getStartEnd()[0],Ge);else{w2.recordPattern(d,de.getStartEnd()[1],Ge);for(let AC=0,hT=Ge.length-1;AC<hT;AC++,hT--){let PA=Ge[AC];Ge[AC]=Ge[hT],Ge[hT]=PA}}let Qe=17,gn=h2.sum(new Int32Array(Ge))/Qe,Bi=(de.getStartEnd()[1]-de.getStartEnd()[0])/15;if(Math.abs(gn-Bi)/Bi>.3)throw new Bg;let Ks=this.getOddCounts(),gy=this.getEvenCounts(),Cy=this.getOddRoundingErrors(),Oy=this.getEvenRoundingErrors();for(let AC=0;AC<Ge.length;AC++){let hT=1*Ge[AC]/gn,PA=hT+.5;if(PA<1){if(hT<.3)throw new Bg;PA=1}else if(PA>8){if(hT>8.7)throw new Bg;PA=8}let O4=AC/2;(AC&1)==0?(Ks[O4]=PA,Cy[O4]=hT-PA):(gy[O4]=PA,Oy[O4]=hT-PA)}this.adjustOddEvenCounts(Qe);let Nb=4*de.getValue()+(Se?0:2)+(Ue?0:1)-1,qb=0,Ub=0;for(let AC=Ks.length-1;AC>=0;AC--){if(w2.isNotA1left(de,Se,Ue)){let hT=w2.WEIGHTS[Nb][2*AC];Ub+=Ks[AC]*hT}qb+=Ks[AC]}let e2=0;for(let AC=gy.length-1;AC>=0;AC--)if(w2.isNotA1left(de,Se,Ue)){let hT=w2.WEIGHTS[Nb][2*AC+1];e2+=gy[AC]*hT}let c2=Ub+e2;if((qb&1)!=0||qb>13||qb<4)throw new Bg;let k2=(13-qb)/2,$2=w2.SYMBOL_WIDEST[k2],_2=9-$2,X2=wO.getRSSvalue(Ks,$2,!0),J2=wO.getRSSvalue(gy,_2,!1),rO=w2.EVEN_TOTAL_SUBSET[k2],OO=w2.GSUM[k2],iO=X2*rO+J2+OO;return new gO(iO,c2)}static isNotA1left(d,de,Se){return!(d.getValue()==0&&de&&Se)}adjustOddEvenCounts(d){let de=h2.sum(new Int32Array(this.getOddCounts())),Se=h2.sum(new Int32Array(this.getEvenCounts())),Ue=!1,Ge=!1;de>13?Ge=!0:de<4&&(Ue=!0);let Qe=!1,gn=!1;Se>13?gn=!0:Se<4&&(Qe=!0);let Bi=de+Se-d,Ks=(de&1)==1,gy=(Se&1)==0;if(Bi==1)if(Ks){if(gy)throw new Bg;Ge=!0}else{if(!gy)throw new Bg;gn=!0}else if(Bi==-1)if(Ks){if(gy)throw new Bg;Ue=!0}else{if(!gy)throw new Bg;Qe=!0}else if(Bi==0){if(Ks){if(!gy)throw new Bg;de<Se?(Ue=!0,gn=!0):(Ge=!0,Qe=!0)}else if(gy)throw new Bg}else throw new Bg;if(Ue){if(Ge)throw new Bg;w2.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(Ge&&w2.decrement(this.getOddCounts(),this.getOddRoundingErrors()),Qe){if(gn)throw new Bg;w2.increment(this.getEvenCounts(),this.getOddRoundingErrors())}gn&&w2.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}w2.SYMBOL_WIDEST=[7,5,4,3,1],w2.EVEN_TOTAL_SUBSET=[4,20,52,104,204],w2.GSUM=[0,348,1388,2948,3988],w2.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],w2.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],w2.FINDER_PAT_A=0,w2.FINDER_PAT_B=1,w2.FINDER_PAT_C=2,w2.FINDER_PAT_D=3,w2.FINDER_PAT_E=4,w2.FINDER_PAT_F=5,w2.FINDER_PATTERN_SEQUENCES=[[w2.FINDER_PAT_A,w2.FINDER_PAT_A],[w2.FINDER_PAT_A,w2.FINDER_PAT_B,w2.FINDER_PAT_B],[w2.FINDER_PAT_A,w2.FINDER_PAT_C,w2.FINDER_PAT_B,w2.FINDER_PAT_D],[w2.FINDER_PAT_A,w2.FINDER_PAT_E,w2.FINDER_PAT_B,w2.FINDER_PAT_D,w2.FINDER_PAT_C],[w2.FINDER_PAT_A,w2.FINDER_PAT_E,w2.FINDER_PAT_B,w2.FINDER_PAT_D,w2.FINDER_PAT_D,w2.FINDER_PAT_F],[w2.FINDER_PAT_A,w2.FINDER_PAT_E,w2.FINDER_PAT_B,w2.FINDER_PAT_D,w2.FINDER_PAT_E,w2.FINDER_PAT_F,w2.FINDER_PAT_F],[w2.FINDER_PAT_A,w2.FINDER_PAT_A,w2.FINDER_PAT_B,w2.FINDER_PAT_B,w2.FINDER_PAT_C,w2.FINDER_PAT_C,w2.FINDER_PAT_D,w2.FINDER_PAT_D],[w2.FINDER_PAT_A,w2.FINDER_PAT_A,w2.FINDER_PAT_B,w2.FINDER_PAT_B,w2.FINDER_PAT_C,w2.FINDER_PAT_C,w2.FINDER_PAT_D,w2.FINDER_PAT_E,w2.FINDER_PAT_E],[w2.FINDER_PAT_A,w2.FINDER_PAT_A,w2.FINDER_PAT_B,w2.FINDER_PAT_B,w2.FINDER_PAT_C,w2.FINDER_PAT_C,w2.FINDER_PAT_D,w2.FINDER_PAT_E,w2.FINDER_PAT_F,w2.FINDER_PAT_F],[w2.FINDER_PAT_A,w2.FINDER_PAT_A,w2.FINDER_PAT_B,w2.FINDER_PAT_B,w2.FINDER_PAT_C,w2.FINDER_PAT_D,w2.FINDER_PAT_D,w2.FINDER_PAT_E,w2.FINDER_PAT_E,w2.FINDER_PAT_F,w2.FINDER_PAT_F]],w2.MAX_PAIRS=11;class K6 extends gO{constructor(d,de,Se){super(d,de),this.count=0,this.finderPattern=Se}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class BC extends EC{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(d,de,Se){let Ue=this.decodePair(de,!1,d,Se);BC.addOrTally(this.possibleLeftPairs,Ue),de.reverse();let Ge=this.decodePair(de,!0,d,Se);BC.addOrTally(this.possibleRightPairs,Ge),de.reverse();for(let Qe of this.possibleLeftPairs)if(Qe.getCount()>1){for(let gn of this.possibleRightPairs)if(gn.getCount()>1&&BC.checkChecksum(Qe,gn))return BC.constructResult(Qe,gn)}throw new Bg}static addOrTally(d,de){if(de==null)return;let Se=!1;for(let Ue of d)if(Ue.getValue()===de.getValue()){Ue.incrementCount(),Se=!0;break}Se||d.push(de)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(d,de){let Se=4537077*d.getValue()+de.getValue(),Ue=new String(Se).toString(),Ge=new Bb;for(let Ks=13-Ue.length;Ks>0;Ks--)Ge.append("0");Ge.append(Ue);let Qe=0;for(let Ks=0;Ks<13;Ks++){let gy=Ge.charAt(Ks).charCodeAt(0)-"0".charCodeAt(0);Qe+=(Ks&1)===0?3*gy:gy}Qe=10-Qe%10,Qe===10&&(Qe=0),Ge.append(Qe.toString());let gn=d.getFinderPattern().getResultPoints(),Bi=de.getFinderPattern().getResultPoints();return new l2(Ge.toString(),null,0,[gn[0],gn[1],Bi[0],Bi[1]],Rb.RSS_14,new Date().getTime())}static checkChecksum(d,de){let Se=(d.getChecksumPortion()+16*de.getChecksumPortion())%79,Ue=9*d.getFinderPattern().getValue()+de.getFinderPattern().getValue();return Ue>72&&Ue--,Ue>8&&Ue--,Se===Ue}decodePair(d,de,Se,Ue){try{let Ge=this.findFinderPattern(d,de),Qe=this.parseFoundFinderPattern(d,Se,de,Ge),gn=Ue==null?null:Ue.get(zs.NEED_RESULT_POINT_CALLBACK);if(gn!=null){let gy=(Ge[0]+Ge[1])/2;de&&(gy=d.getSize()-1-gy),gn.foundPossibleResultPoint(new Wb(gy,Se))}let Bi=this.decodeDataCharacter(d,Qe,!0),Ks=this.decodeDataCharacter(d,Qe,!1);return new K6(1597*Bi.getValue()+Ks.getValue(),Bi.getChecksumPortion()+4*Ks.getChecksumPortion(),Qe)}catch{return null}}decodeDataCharacter(d,de,Se){let Ue=this.getDataCharacterCounters();for(let e2=0;e2<Ue.length;e2++)Ue[e2]=0;if(Se)M2.recordPatternInReverse(d,de.getStartEnd()[0],Ue);else{M2.recordPattern(d,de.getStartEnd()[1]+1,Ue);for(let e2=0,c2=Ue.length-1;e2<c2;e2++,c2--){let k2=Ue[e2];Ue[e2]=Ue[c2],Ue[c2]=k2}}let Ge=Se?16:15,Qe=h2.sum(new Int32Array(Ue))/Ge,gn=this.getOddCounts(),Bi=this.getEvenCounts(),Ks=this.getOddRoundingErrors(),gy=this.getEvenRoundingErrors();for(let e2=0;e2<Ue.length;e2++){let c2=Ue[e2]/Qe,k2=Math.floor(c2+.5);k2<1?k2=1:k2>8&&(k2=8);let $2=Math.floor(e2/2);(e2&1)===0?(gn[$2]=k2,Ks[$2]=c2-k2):(Bi[$2]=k2,gy[$2]=c2-k2)}this.adjustOddEvenCounts(Se,Ge);let Cy=0,Oy=0;for(let e2=gn.length-1;e2>=0;e2--)Oy*=9,Oy+=gn[e2],Cy+=gn[e2];let Nb=0,qb=0;for(let e2=Bi.length-1;e2>=0;e2--)Nb*=9,Nb+=Bi[e2],qb+=Bi[e2];let Ub=Oy+3*Nb;if(Se){if((Cy&1)!==0||Cy>12||Cy<4)throw new Bg;let e2=(12-Cy)/2,c2=BC.OUTSIDE_ODD_WIDEST[e2],k2=9-c2,$2=wO.getRSSvalue(gn,c2,!1),_2=wO.getRSSvalue(Bi,k2,!0),X2=BC.OUTSIDE_EVEN_TOTAL_SUBSET[e2],J2=BC.OUTSIDE_GSUM[e2];return new gO($2*X2+_2+J2,Ub)}else{if((qb&1)!==0||qb>10||qb<4)throw new Bg;let e2=(10-qb)/2,c2=BC.INSIDE_ODD_WIDEST[e2],k2=9-c2,$2=wO.getRSSvalue(gn,c2,!0),_2=wO.getRSSvalue(Bi,k2,!1),X2=BC.INSIDE_ODD_TOTAL_SUBSET[e2],J2=BC.INSIDE_GSUM[e2];return new gO(_2*X2+$2+J2,Ub)}}findFinderPattern(d,de){let Se=this.getDecodeFinderCounters();Se[0]=0,Se[1]=0,Se[2]=0,Se[3]=0;let Ue=d.getSize(),Ge=!1,Qe=0;for(;Qe<Ue&&(Ge=!d.get(Qe),de!==Ge);)Qe++;let gn=0,Bi=Qe;for(let Ks=Qe;Ks<Ue;Ks++)if(d.get(Ks)!==Ge)Se[gn]++;else{if(gn===3){if(EC.isFinderPattern(Se))return[Bi,Ks];Bi+=Se[0]+Se[1],Se[0]=Se[2],Se[1]=Se[3],Se[2]=0,Se[3]=0,gn--}else gn++;Se[gn]=1,Ge=!Ge}throw new Bg}parseFoundFinderPattern(d,de,Se,Ue){let Ge=d.get(Ue[0]),Qe=Ue[0]-1;for(;Qe>=0&&Ge!==d.get(Qe);)Qe--;Qe++;let gn=Ue[0]-Qe,Bi=this.getDecodeFinderCounters(),Ks=new Int32Array(Bi.length);He.arraycopy(Bi,0,Ks,1,Bi.length-1),Ks[0]=gn;let gy=this.parseFinderValue(Ks,BC.FINDER_PATTERNS),Cy=Qe,Oy=Ue[1];return Se&&(Cy=d.getSize()-1-Cy,Oy=d.getSize()-1-Oy),new YC(gy,[Qe,Ue[1]],Cy,Oy,de)}adjustOddEvenCounts(d,de){let Se=h2.sum(new Int32Array(this.getOddCounts())),Ue=h2.sum(new Int32Array(this.getEvenCounts())),Ge=!1,Qe=!1,gn=!1,Bi=!1;d?(Se>12?Qe=!0:Se<4&&(Ge=!0),Ue>12?Bi=!0:Ue<4&&(gn=!0)):(Se>11?Qe=!0:Se<5&&(Ge=!0),Ue>10?Bi=!0:Ue<4&&(gn=!0));let Ks=Se+Ue-de,gy=(Se&1)===(d?1:0),Cy=(Ue&1)===1;if(Ks===1)if(gy){if(Cy)throw new Bg;Qe=!0}else{if(!Cy)throw new Bg;Bi=!0}else if(Ks===-1)if(gy){if(Cy)throw new Bg;Ge=!0}else{if(!Cy)throw new Bg;gn=!0}else if(Ks===0){if(gy){if(!Cy)throw new Bg;Se<Ue?(Ge=!0,Bi=!0):(Qe=!0,gn=!0)}else if(Cy)throw new Bg}else throw new Bg;if(Ge){if(Qe)throw new Bg;EC.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(Qe&&EC.decrement(this.getOddCounts(),this.getOddRoundingErrors()),gn){if(Bi)throw new Bg;EC.increment(this.getEvenCounts(),this.getOddRoundingErrors())}Bi&&EC.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}BC.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],BC.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],BC.OUTSIDE_GSUM=[0,161,961,2015,2715],BC.INSIDE_GSUM=[0,336,1036,1516],BC.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],BC.INSIDE_ODD_WIDEST=[2,4,6,8],BC.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class xT extends M2{constructor(d,de){super(),this.readers=[],this.verbose=de===!0;let Se=d?d.get(zs.POSSIBLE_FORMATS):null,Ue=d&&d.get(zs.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;Se&&((Se.includes(Rb.EAN_13)||Se.includes(Rb.UPC_A)||Se.includes(Rb.EAN_8)||Se.includes(Rb.UPC_E))&&this.readers.push(new xO(d)),Se.includes(Rb.CODE_39)&&this.readers.push(new o2(Ue)),Se.includes(Rb.CODE_128)&&this.readers.push(new v2),Se.includes(Rb.ITF)&&this.readers.push(new b2),Se.includes(Rb.RSS_14)&&this.readers.push(new BC),Se.includes(Rb.RSS_EXPANDED)&&this.readers.push(new w2(this.verbose))),this.readers.length===0&&(this.readers.push(new xO(d)),this.readers.push(new o2),this.readers.push(new xO(d)),this.readers.push(new v2),this.readers.push(new b2),this.readers.push(new BC),this.readers.push(new w2(this.verbose)))}decodeRow(d,de,Se){for(let Ue=0;Ue<this.readers.length;Ue++)try{return this.readers[Ue].decodeRow(d,de,Se)}catch{}throw new Bg}reset(){this.readers.forEach(d=>d.reset())}}class FO extends Jb{constructor(d=500,de){super(new xT(de),d,de)}}class gC{constructor(d,de,Se){this.ecCodewords=d,this.ecBlocks=[de],Se&&this.ecBlocks.push(Se)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Z2{constructor(d,de){this.count=d,this.dataCodewords=de}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class hC{constructor(d,de,Se,Ue,Ge,Qe){this.versionNumber=d,this.symbolSizeRows=de,this.symbolSizeColumns=Se,this.dataRegionSizeRows=Ue,this.dataRegionSizeColumns=Ge,this.ecBlocks=Qe;let gn=0,Bi=Qe.getECCodewords(),Ks=Qe.getECBlocks();for(let gy of Ks)gn+=gy.getCount()*(gy.getDataCodewords()+Bi);this.totalCodewords=gn}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(d,de){if((d&1)!==0||(de&1)!==0)throw new za;for(let Se of hC.VERSIONS)if(Se.symbolSizeRows===d&&Se.symbolSizeColumns===de)return Se;throw new za}toString(){return""+this.versionNumber}static buildVersions(){return[new hC(1,10,10,8,8,new gC(5,new Z2(1,3))),new hC(2,12,12,10,10,new gC(7,new Z2(1,5))),new hC(3,14,14,12,12,new gC(10,new Z2(1,8))),new hC(4,16,16,14,14,new gC(12,new Z2(1,12))),new hC(5,18,18,16,16,new gC(14,new Z2(1,18))),new hC(6,20,20,18,18,new gC(18,new Z2(1,22))),new hC(7,22,22,20,20,new gC(20,new Z2(1,30))),new hC(8,24,24,22,22,new gC(24,new Z2(1,36))),new hC(9,26,26,24,24,new gC(28,new Z2(1,44))),new hC(10,32,32,14,14,new gC(36,new Z2(1,62))),new hC(11,36,36,16,16,new gC(42,new Z2(1,86))),new hC(12,40,40,18,18,new gC(48,new Z2(1,114))),new hC(13,44,44,20,20,new gC(56,new Z2(1,144))),new hC(14,48,48,22,22,new gC(68,new Z2(1,174))),new hC(15,52,52,24,24,new gC(42,new Z2(2,102))),new hC(16,64,64,14,14,new gC(56,new Z2(2,140))),new hC(17,72,72,16,16,new gC(36,new Z2(4,92))),new hC(18,80,80,18,18,new gC(48,new Z2(4,114))),new hC(19,88,88,20,20,new gC(56,new Z2(4,144))),new hC(20,96,96,22,22,new gC(68,new Z2(4,174))),new hC(21,104,104,24,24,new gC(56,new Z2(6,136))),new hC(22,120,120,18,18,new gC(68,new Z2(6,175))),new hC(23,132,132,20,20,new gC(62,new Z2(8,163))),new hC(24,144,144,22,22,new gC(62,new Z2(8,156),new Z2(2,155))),new hC(25,8,18,6,16,new gC(7,new Z2(1,5))),new hC(26,8,32,6,14,new gC(11,new Z2(1,10))),new hC(27,12,26,10,24,new gC(14,new Z2(1,16))),new hC(28,12,36,10,16,new gC(18,new Z2(1,22))),new hC(29,16,36,14,16,new gC(24,new Z2(1,32))),new hC(30,16,48,14,22,new gC(28,new Z2(1,49)))]}}hC.VERSIONS=hC.buildVersions();class a6{constructor(d){let de=d.getHeight();if(de<8||de>144||(de&1)!==0)throw new za;this.version=a6.readVersion(d),this.mappingBitMatrix=this.extractDataRegion(d),this.readMappingMatrix=new Dy(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(d){let de=d.getHeight(),Se=d.getWidth();return hC.getVersionForDimensions(de,Se)}readCodewords(){let d=new Int8Array(this.version.getTotalCodewords()),de=0,Se=4,Ue=0,Ge=this.mappingBitMatrix.getHeight(),Qe=this.mappingBitMatrix.getWidth(),gn=!1,Bi=!1,Ks=!1,gy=!1;do if(Se===Ge&&Ue===0&&!gn)d[de++]=this.readCorner1(Ge,Qe)&255,Se-=2,Ue+=2,gn=!0;else if(Se===Ge-2&&Ue===0&&(Qe&3)!==0&&!Bi)d[de++]=this.readCorner2(Ge,Qe)&255,Se-=2,Ue+=2,Bi=!0;else if(Se===Ge+4&&Ue===2&&(Qe&7)===0&&!Ks)d[de++]=this.readCorner3(Ge,Qe)&255,Se-=2,Ue+=2,Ks=!0;else if(Se===Ge-2&&Ue===0&&(Qe&7)===4&&!gy)d[de++]=this.readCorner4(Ge,Qe)&255,Se-=2,Ue+=2,gy=!0;else{do Se<Ge&&Ue>=0&&!this.readMappingMatrix.get(Ue,Se)&&(d[de++]=this.readUtah(Se,Ue,Ge,Qe)&255),Se-=2,Ue+=2;while(Se>=0&&Ue<Qe);Se+=1,Ue+=3;do Se>=0&&Ue<Qe&&!this.readMappingMatrix.get(Ue,Se)&&(d[de++]=this.readUtah(Se,Ue,Ge,Qe)&255),Se+=2,Ue-=2;while(Se<Ge&&Ue>=0);Se+=3,Ue+=1}while(Se<Ge||Ue<Qe);if(de!==this.version.getTotalCodewords())throw new za;return d}readModule(d,de,Se,Ue){return d<0&&(d+=Se,de+=4-(Se+4&7)),de<0&&(de+=Ue,d+=4-(Ue+4&7)),this.readMappingMatrix.set(de,d),this.mappingBitMatrix.get(de,d)}readUtah(d,de,Se,Ue){let Ge=0;return this.readModule(d-2,de-2,Se,Ue)&&(Ge|=1),Ge<<=1,this.readModule(d-2,de-1,Se,Ue)&&(Ge|=1),Ge<<=1,this.readModule(d-1,de-2,Se,Ue)&&(Ge|=1),Ge<<=1,this.readModule(d-1,de-1,Se,Ue)&&(Ge|=1),Ge<<=1,this.readModule(d-1,de,Se,Ue)&&(Ge|=1),Ge<<=1,this.readModule(d,de-2,Se,Ue)&&(Ge|=1),Ge<<=1,this.readModule(d,de-1,Se,Ue)&&(Ge|=1),Ge<<=1,this.readModule(d,de,Se,Ue)&&(Ge|=1),Ge}readCorner1(d,de){let Se=0;return this.readModule(d-1,0,d,de)&&(Se|=1),Se<<=1,this.readModule(d-1,1,d,de)&&(Se|=1),Se<<=1,this.readModule(d-1,2,d,de)&&(Se|=1),Se<<=1,this.readModule(0,de-2,d,de)&&(Se|=1),Se<<=1,this.readModule(0,de-1,d,de)&&(Se|=1),Se<<=1,this.readModule(1,de-1,d,de)&&(Se|=1),Se<<=1,this.readModule(2,de-1,d,de)&&(Se|=1),Se<<=1,this.readModule(3,de-1,d,de)&&(Se|=1),Se}readCorner2(d,de){let Se=0;return this.readModule(d-3,0,d,de)&&(Se|=1),Se<<=1,this.readModule(d-2,0,d,de)&&(Se|=1),Se<<=1,this.readModule(d-1,0,d,de)&&(Se|=1),Se<<=1,this.readModule(0,de-4,d,de)&&(Se|=1),Se<<=1,this.readModule(0,de-3,d,de)&&(Se|=1),Se<<=1,this.readModule(0,de-2,d,de)&&(Se|=1),Se<<=1,this.readModule(0,de-1,d,de)&&(Se|=1),Se<<=1,this.readModule(1,de-1,d,de)&&(Se|=1),Se}readCorner3(d,de){let Se=0;return this.readModule(d-1,0,d,de)&&(Se|=1),Se<<=1,this.readModule(d-1,de-1,d,de)&&(Se|=1),Se<<=1,this.readModule(0,de-3,d,de)&&(Se|=1),Se<<=1,this.readModule(0,de-2,d,de)&&(Se|=1),Se<<=1,this.readModule(0,de-1,d,de)&&(Se|=1),Se<<=1,this.readModule(1,de-3,d,de)&&(Se|=1),Se<<=1,this.readModule(1,de-2,d,de)&&(Se|=1),Se<<=1,this.readModule(1,de-1,d,de)&&(Se|=1),Se}readCorner4(d,de){let Se=0;return this.readModule(d-3,0,d,de)&&(Se|=1),Se<<=1,this.readModule(d-2,0,d,de)&&(Se|=1),Se<<=1,this.readModule(d-1,0,d,de)&&(Se|=1),Se<<=1,this.readModule(0,de-2,d,de)&&(Se|=1),Se<<=1,this.readModule(0,de-1,d,de)&&(Se|=1),Se<<=1,this.readModule(1,de-1,d,de)&&(Se|=1),Se<<=1,this.readModule(2,de-1,d,de)&&(Se|=1),Se<<=1,this.readModule(3,de-1,d,de)&&(Se|=1),Se}extractDataRegion(d){let de=this.version.getSymbolSizeRows(),Se=this.version.getSymbolSizeColumns();if(d.getHeight()!==de)throw new m("Dimension of bitMatrix must match the version size");let Ue=this.version.getDataRegionSizeRows(),Ge=this.version.getDataRegionSizeColumns(),Qe=de/Ue|0,gn=Se/Ge|0,Bi=Qe*Ue,Ks=gn*Ge,gy=new Dy(Ks,Bi);for(let Cy=0;Cy<Qe;++Cy){let Oy=Cy*Ue;for(let Nb=0;Nb<gn;++Nb){let qb=Nb*Ge;for(let Ub=0;Ub<Ue;++Ub){let e2=Cy*(Ue+2)+1+Ub,c2=Oy+Ub;for(let k2=0;k2<Ge;++k2){let $2=Nb*(Ge+2)+1+k2;if(d.get($2,e2)){let _2=qb+k2;gy.set(_2,c2)}}}}}return gy}}class s6{constructor(d,de){this.numDataCodewords=d,this.codewords=de}static getDataBlocks(d,de){let Se=de.getECBlocks(),Ue=0,Ge=Se.getECBlocks();for(let qb of Ge)Ue+=qb.getCount();let Qe=new Array(Ue),gn=0;for(let qb of Ge)for(let Ub=0;Ub<qb.getCount();Ub++){let e2=qb.getDataCodewords(),c2=Se.getECCodewords()+e2;Qe[gn++]=new s6(e2,new Uint8Array(c2))}let Bi=Qe[0].codewords.length-Se.getECCodewords(),Ks=Bi-1,gy=0;for(let qb=0;qb<Ks;qb++)for(let Ub=0;Ub<gn;Ub++)Qe[Ub].codewords[qb]=d[gy++];let Cy=de.getVersionNumber()===24,Oy=Cy?8:gn;for(let qb=0;qb<Oy;qb++)Qe[qb].codewords[Bi-1]=d[gy++];let Nb=Qe[0].codewords.length;for(let qb=Bi;qb<Nb;qb++)for(let Ub=0;Ub<gn;Ub++){let e2=Cy?(Ub+8)%gn:Ub,c2=Cy&&e2>7?qb-1:qb;Qe[e2].codewords[c2]=d[gy++]}if(gy!==d.length)throw new m;return Qe}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class u6{constructor(d){this.bytes=d,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(d){if(d<1||d>32||d>this.available())throw new m(""+d);let de=0,Se=this.bitOffset,Ue=this.byteOffset,Ge=this.bytes;if(Se>0){let Qe=8-Se,gn=d<Qe?d:Qe,Bi=Qe-gn,Ks=255>>8-gn<<Bi;de=(Ge[Ue]&Ks)>>Bi,d-=gn,Se+=gn,Se===8&&(Se=0,Ue++)}if(d>0){for(;d>=8;)de=de<<8|Ge[Ue]&255,Ue++,d-=8;if(d>0){let Qe=8-d,gn=255>>Qe<<Qe;de=de<<d|(Ge[Ue]&gn)>>Qe,Se+=d}}return this.bitOffset=Se,this.byteOffset=Ue,de}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var SC;(function(by){by[by.PAD_ENCODE=0]="PAD_ENCODE",by[by.ASCII_ENCODE=1]="ASCII_ENCODE",by[by.C40_ENCODE=2]="C40_ENCODE",by[by.TEXT_ENCODE=3]="TEXT_ENCODE",by[by.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",by[by.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",by[by.BASE256_ENCODE=6]="BASE256_ENCODE"})(SC||(SC={}));class cO{static decode(d){let de=new u6(d),Se=new Bb,Ue=new Bb,Ge=new Array,Qe=SC.ASCII_ENCODE;do if(Qe===SC.ASCII_ENCODE)Qe=this.decodeAsciiSegment(de,Se,Ue);else{switch(Qe){case SC.C40_ENCODE:this.decodeC40Segment(de,Se);break;case SC.TEXT_ENCODE:this.decodeTextSegment(de,Se);break;case SC.ANSIX12_ENCODE:this.decodeAnsiX12Segment(de,Se);break;case SC.EDIFACT_ENCODE:this.decodeEdifactSegment(de,Se);break;case SC.BASE256_ENCODE:this.decodeBase256Segment(de,Se,Ge);break;default:throw new za}Qe=SC.ASCII_ENCODE}while(Qe!==SC.PAD_ENCODE&&de.available()>0);return Ue.length()>0&&Se.append(Ue.toString()),new E2(d,Se.toString(),Ge.length===0?null:Ge,null)}static decodeAsciiSegment(d,de,Se){let Ue=!1;do{let Ge=d.readBits(8);if(Ge===0)throw new za;if(Ge<=128)return Ue&&(Ge+=128),de.append(String.fromCharCode(Ge-1)),SC.ASCII_ENCODE;if(Ge===129)return SC.PAD_ENCODE;if(Ge<=229){let Qe=Ge-130;Qe<10&&de.append("0"),de.append(""+Qe)}else switch(Ge){case 230:return SC.C40_ENCODE;case 231:return SC.BASE256_ENCODE;case 232:de.append(String.fromCharCode(29));break;case 233:case 234:break;case 235:Ue=!0;break;case 236:de.append("[)>05"),Se.insert(0,"");break;case 237:de.append("[)>06"),Se.insert(0,"");break;case 238:return SC.ANSIX12_ENCODE;case 239:return SC.TEXT_ENCODE;case 240:return SC.EDIFACT_ENCODE;case 241:break;default:if(Ge!==254||d.available()!==0)throw new za;break}}while(d.available()>0);return SC.ASCII_ENCODE}static decodeC40Segment(d,de){let Se=!1,Ue=[],Ge=0;do{if(d.available()===8)return;let Qe=d.readBits(8);if(Qe===254)return;this.parseTwoBytes(Qe,d.readBits(8),Ue);for(let gn=0;gn<3;gn++){let Bi=Ue[gn];switch(Ge){case 0:if(Bi<3)Ge=Bi+1;else if(Bi<this.C40_BASIC_SET_CHARS.length){let Ks=this.C40_BASIC_SET_CHARS[Bi];Se?(de.append(String.fromCharCode(Ks.charCodeAt(0)+128)),Se=!1):de.append(Ks)}else throw new za;break;case 1:Se?(de.append(String.fromCharCode(Bi+128)),Se=!1):de.append(String.fromCharCode(Bi)),Ge=0;break;case 2:if(Bi<this.C40_SHIFT2_SET_CHARS.length){let Ks=this.C40_SHIFT2_SET_CHARS[Bi];Se?(de.append(String.fromCharCode(Ks.charCodeAt(0)+128)),Se=!1):de.append(Ks)}else switch(Bi){case 27:de.append(String.fromCharCode(29));break;case 30:Se=!0;break;default:throw new za}Ge=0;break;case 3:Se?(de.append(String.fromCharCode(Bi+224)),Se=!1):de.append(String.fromCharCode(Bi+96)),Ge=0;break;default:throw new za}}}while(d.available()>0)}static decodeTextSegment(d,de){let Se=!1,Ue=[],Ge=0;do{if(d.available()===8)return;let Qe=d.readBits(8);if(Qe===254)return;this.parseTwoBytes(Qe,d.readBits(8),Ue);for(let gn=0;gn<3;gn++){let Bi=Ue[gn];switch(Ge){case 0:if(Bi<3)Ge=Bi+1;else if(Bi<this.TEXT_BASIC_SET_CHARS.length){let Ks=this.TEXT_BASIC_SET_CHARS[Bi];Se?(de.append(String.fromCharCode(Ks.charCodeAt(0)+128)),Se=!1):de.append(Ks)}else throw new za;break;case 1:Se?(de.append(String.fromCharCode(Bi+128)),Se=!1):de.append(String.fromCharCode(Bi)),Ge=0;break;case 2:if(Bi<this.TEXT_SHIFT2_SET_CHARS.length){let Ks=this.TEXT_SHIFT2_SET_CHARS[Bi];Se?(de.append(String.fromCharCode(Ks.charCodeAt(0)+128)),Se=!1):de.append(Ks)}else switch(Bi){case 27:de.append(String.fromCharCode(29));break;case 30:Se=!0;break;default:throw new za}Ge=0;break;case 3:if(Bi<this.TEXT_SHIFT3_SET_CHARS.length){let Ks=this.TEXT_SHIFT3_SET_CHARS[Bi];Se?(de.append(String.fromCharCode(Ks.charCodeAt(0)+128)),Se=!1):de.append(Ks),Ge=0}else throw new za;break;default:throw new za}}}while(d.available()>0)}static decodeAnsiX12Segment(d,de){let Se=[];do{if(d.available()===8)return;let Ue=d.readBits(8);if(Ue===254)return;this.parseTwoBytes(Ue,d.readBits(8),Se);for(let Ge=0;Ge<3;Ge++){let Qe=Se[Ge];switch(Qe){case 0:de.append("\r");break;case 1:de.append("*");break;case 2:de.append(">");break;case 3:de.append(" ");break;default:if(Qe<14)de.append(String.fromCharCode(Qe+44));else if(Qe<40)de.append(String.fromCharCode(Qe+51));else throw new za;break}}}while(d.available()>0)}static parseTwoBytes(d,de,Se){let Ue=(d<<8)+de-1,Ge=Math.floor(Ue/1600);Se[0]=Ge,Ue-=Ge*1600,Ge=Math.floor(Ue/40),Se[1]=Ge,Se[2]=Ue-Ge*40}static decodeEdifactSegment(d,de){do{if(d.available()<=16)return;for(let Se=0;Se<4;Se++){let Ue=d.readBits(6);if(Ue===31){let Ge=8-d.getBitOffset();Ge!==8&&d.readBits(Ge);return}(Ue&32)===0&&(Ue|=64),de.append(String.fromCharCode(Ue))}}while(d.available()>0)}static decodeBase256Segment(d,de,Se){let Ue=1+d.getByteOffset(),Ge=this.unrandomize255State(d.readBits(8),Ue++),Qe;if(Ge===0?Qe=d.available()/8|0:Ge<250?Qe=Ge:Qe=250*(Ge-249)+this.unrandomize255State(d.readBits(8),Ue++),Qe<0)throw new za;let gn=new Uint8Array(Qe);for(let Bi=0;Bi<Qe;Bi++){if(d.available()<8)throw new za;gn[Bi]=this.unrandomize255State(d.readBits(8),Ue++)}Se.push(gn);try{de.append(_y.decode(gn,xy.ISO88591))}catch(Bi){throw new Qb("Platform does not support required encoding: "+Bi.message)}}static unrandomize255State(d,de){let Se=149*de%255+1,Ue=d-Se;return Ue>=0?Ue:Ue+256}}cO.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],cO.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],cO.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],cO.TEXT_SHIFT2_SET_CHARS=cO.C40_SHIFT2_SET_CHARS,cO.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",String.fromCharCode(127)];class l6{constructor(){this.rsDecoder=new zb(k_.DATA_MATRIX_FIELD_256)}decode(d){let de=new a6(d),Se=de.getVersion(),Ue=de.readCodewords(),Ge=s6.getDataBlocks(Ue,Se),Qe=0;for(let Ks of Ge)Qe+=Ks.getNumDataCodewords();let gn=new Uint8Array(Qe),Bi=Ge.length;for(let Ks=0;Ks<Bi;Ks++){let gy=Ge[Ks],Cy=gy.getCodewords(),Oy=gy.getNumDataCodewords();this.correctErrors(Cy,Oy);for(let Nb=0;Nb<Oy;Nb++)gn[Nb*Bi+Ks]=Cy[Nb]}return cO.decode(gn)}correctErrors(d,de){let Se=new Int32Array(d);try{this.rsDecoder.decode(Se,d.length-de)}catch{throw new xe}for(let Ue=0;Ue<de;Ue++)d[Ue]=Se[Ue]}}class VC{constructor(d){this.image=d,this.rectangleDetector=new C2(this.image)}detect(){let d=this.rectangleDetector.detect(),de=this.detectSolid1(d);if(de=this.detectSolid2(de),de[3]=this.correctTopRight(de),!de[3])throw new Bg;de=this.shiftToModuleCenter(de);let Se=de[0],Ue=de[1],Ge=de[2],Qe=de[3],gn=this.transitionsBetween(Se,Qe)+1,Bi=this.transitionsBetween(Ge,Qe)+1;(gn&1)===1&&(gn+=1),(Bi&1)===1&&(Bi+=1),4*gn<7*Bi&&4*Bi<7*gn&&(gn=Bi=Math.max(gn,Bi));let Ks=VC.sampleGrid(this.image,Se,Ue,Ge,Qe,gn,Bi);return new f2(Ks,[Se,Ue,Ge,Qe])}static shiftPoint(d,de,Se){let Ue=(de.getX()-d.getX())/(Se+1),Ge=(de.getY()-d.getY())/(Se+1);return new Wb(d.getX()+Ue,d.getY()+Ge)}static moveAway(d,de,Se){let Ue=d.getX(),Ge=d.getY();return Ue<de?Ue-=1:Ue+=1,Ge<Se?Ge-=1:Ge+=1,new Wb(Ue,Ge)}detectSolid1(d){let de=d[0],Se=d[1],Ue=d[3],Ge=d[2],Qe=this.transitionsBetween(de,Se),gn=this.transitionsBetween(Se,Ue),Bi=this.transitionsBetween(Ue,Ge),Ks=this.transitionsBetween(Ge,de),gy=Qe,Cy=[Ge,de,Se,Ue];return gy>gn&&(gy=gn,Cy[0]=de,Cy[1]=Se,Cy[2]=Ue,Cy[3]=Ge),gy>Bi&&(gy=Bi,Cy[0]=Se,Cy[1]=Ue,Cy[2]=Ge,Cy[3]=de),gy>Ks&&(Cy[0]=Ue,Cy[1]=Ge,Cy[2]=de,Cy[3]=Se),Cy}detectSolid2(d){let de=d[0],Se=d[1],Ue=d[2],Ge=d[3],Qe=this.transitionsBetween(de,Ge),gn=VC.shiftPoint(Se,Ue,(Qe+1)*4),Bi=VC.shiftPoint(Ue,Se,(Qe+1)*4),Ks=this.transitionsBetween(gn,de),gy=this.transitionsBetween(Bi,Ge);return Ks<gy?(d[0]=de,d[1]=Se,d[2]=Ue,d[3]=Ge):(d[0]=Se,d[1]=Ue,d[2]=Ge,d[3]=de),d}correctTopRight(d){let de=d[0],Se=d[1],Ue=d[2],Ge=d[3],Qe=this.transitionsBetween(de,Ge),gn=this.transitionsBetween(Se,Ge),Bi=VC.shiftPoint(de,Se,(gn+1)*4),Ks=VC.shiftPoint(Ue,Se,(Qe+1)*4);Qe=this.transitionsBetween(Bi,Ge),gn=this.transitionsBetween(Ks,Ge);let gy=new Wb(Ge.getX()+(Ue.getX()-Se.getX())/(Qe+1),Ge.getY()+(Ue.getY()-Se.getY())/(Qe+1)),Cy=new Wb(Ge.getX()+(de.getX()-Se.getX())/(gn+1),Ge.getY()+(de.getY()-Se.getY())/(gn+1));if(!this.isValid(gy))return this.isValid(Cy)?Cy:null;if(!this.isValid(Cy))return gy;let Oy=this.transitionsBetween(Bi,gy)+this.transitionsBetween(Ks,gy),Nb=this.transitionsBetween(Bi,Cy)+this.transitionsBetween(Ks,Cy);return Oy>Nb?gy:Cy}shiftToModuleCenter(d){let de=d[0],Se=d[1],Ue=d[2],Ge=d[3],Qe=this.transitionsBetween(de,Ge)+1,gn=this.transitionsBetween(Ue,Ge)+1,Bi=VC.shiftPoint(de,Se,gn*4),Ks=VC.shiftPoint(Ue,Se,Qe*4);Qe=this.transitionsBetween(Bi,Ge)+1,gn=this.transitionsBetween(Ks,Ge)+1,(Qe&1)===1&&(Qe+=1),(gn&1)===1&&(gn+=1);let gy=(de.getX()+Se.getX()+Ue.getX()+Ge.getX())/4,Cy=(de.getY()+Se.getY()+Ue.getY()+Ge.getY())/4;de=VC.moveAway(de,gy,Cy),Se=VC.moveAway(Se,gy,Cy),Ue=VC.moveAway(Ue,gy,Cy),Ge=VC.moveAway(Ge,gy,Cy);let Oy,Nb;return Bi=VC.shiftPoint(de,Se,gn*4),Bi=VC.shiftPoint(Bi,Ge,Qe*4),Oy=VC.shiftPoint(Se,de,gn*4),Oy=VC.shiftPoint(Oy,Ue,Qe*4),Ks=VC.shiftPoint(Ue,Ge,gn*4),Ks=VC.shiftPoint(Ks,Se,Qe*4),Nb=VC.shiftPoint(Ge,Ue,gn*4),Nb=VC.shiftPoint(Nb,de,Qe*4),[Bi,Oy,Ks,Nb]}isValid(d){return d.getX()>=0&&d.getX()<this.image.getWidth()&&d.getY()>0&&d.getY()<this.image.getHeight()}static sampleGrid(d,de,Se,Ue,Ge,Qe,gn){return Q2.getInstance().sampleGrid(d,Qe,gn,.5,.5,Qe-.5,.5,Qe-.5,gn-.5,.5,gn-.5,de.getX(),de.getY(),Ge.getX(),Ge.getY(),Ue.getX(),Ue.getY(),Se.getX(),Se.getY())}transitionsBetween(d,de){let Se=Math.trunc(d.getX()),Ue=Math.trunc(d.getY()),Ge=Math.trunc(de.getX()),Qe=Math.trunc(de.getY()),gn=Math.abs(Qe-Ue)>Math.abs(Ge-Se);if(gn){let Ub=Se;Se=Ue,Ue=Ub,Ub=Ge,Ge=Qe,Qe=Ub}let Bi=Math.abs(Ge-Se),Ks=Math.abs(Qe-Ue),gy=-Bi/2,Cy=Ue<Qe?1:-1,Oy=Se<Ge?1:-1,Nb=0,qb=this.image.get(gn?Ue:Se,gn?Se:Ue);for(let Ub=Se,e2=Ue;Ub!==Ge;Ub+=Oy){let c2=this.image.get(gn?e2:Ub,gn?Ub:e2);if(c2!==qb&&(Nb++,qb=c2),gy+=Ks,gy>0){if(e2===Qe)break;e2+=Cy,gy-=Bi}}return Nb}}class vT{constructor(){this.decoder=new l6}decode(d,de=null){let Se,Ue;if(de!=null&&de.has(zs.PURE_BARCODE)){let Ks=vT.extractPureBits(d.getBlackMatrix());Se=this.decoder.decode(Ks),Ue=vT.NO_POINTS}else{let Ks=new VC(d.getBlackMatrix()).detect();Se=this.decoder.decode(Ks.getBits()),Ue=Ks.getPoints()}let Ge=Se.getRawBytes(),Qe=new l2(Se.getText(),Ge,8*Ge.length,Ue,Rb.DATA_MATRIX,He.currentTimeMillis()),gn=Se.getByteSegments();gn!=null&&Qe.putMetadata(s2.BYTE_SEGMENTS,gn);let Bi=Se.getECLevel();return Bi!=null&&Qe.putMetadata(s2.ERROR_CORRECTION_LEVEL,Bi),Qe}reset(){}static extractPureBits(d){let de=d.getTopLeftOnBit(),Se=d.getBottomRightOnBit();if(de==null||Se==null)throw new Bg;let Ue=this.moduleSize(de,d),Ge=de[1],Qe=Se[1],gn=de[0],Bi=(Se[0]-gn+1)/Ue,Ks=(Qe-Ge+1)/Ue;if(Bi<=0||Ks<=0)throw new Bg;let gy=Ue/2;Ge+=gy,gn+=gy;let Cy=new Dy(Bi,Ks);for(let Oy=0;Oy<Ks;Oy++){let Nb=Ge+Oy*Ue;for(let qb=0;qb<Bi;qb++)d.get(gn+qb*Ue,Nb)&&Cy.set(qb,Oy)}return Cy}static moduleSize(d,de){let Se=de.getWidth(),Ue=d[0],Ge=d[1];for(;Ue<Se&&de.get(Ue,Ge);)Ue++;if(Ue===Se)throw new Bg;let Qe=Ue-d[0];if(Qe===0)throw new Bg;return Qe}}vT.NO_POINTS=[];class W6 extends Jb{constructor(d=500){super(new vT,d)}}var pO;(function(by){by[by.L=0]="L",by[by.M=1]="M",by[by.Q=2]="Q",by[by.H=3]="H"})(pO||(pO={}));class wC{constructor(d,de,Se){this.value=d,this.stringValue=de,this.bits=Se,wC.FOR_BITS.set(Se,this),wC.FOR_VALUE.set(d,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(d){switch(d){case"L":return wC.L;case"M":return wC.M;case"Q":return wC.Q;case"H":return wC.H;default:throw new c(d+"not available")}}toString(){return this.stringValue}equals(d){if(!(d instanceof wC))return!1;let de=d;return this.value===de.value}static forBits(d){if(d<0||d>=wC.FOR_BITS.size)throw new m;return wC.FOR_BITS.get(d)}}wC.FOR_BITS=new Map,wC.FOR_VALUE=new Map,wC.L=new wC(pO.L,"L",1),wC.M=new wC(pO.M,"M",0),wC.Q=new wC(pO.Q,"Q",3),wC.H=new wC(pO.H,"H",2);class uT{constructor(d){this.errorCorrectionLevel=wC.forBits(d>>3&3),this.dataMask=d&7}static numBitsDiffering(d,de){return La.bitCount(d^de)}static decodeFormatInformation(d,de){let Se=uT.doDecodeFormatInformation(d,de);return Se!==null?Se:uT.doDecodeFormatInformation(d^uT.FORMAT_INFO_MASK_QR,de^uT.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(d,de){let Se=Number.MAX_SAFE_INTEGER,Ue=0;for(let Ge of uT.FORMAT_INFO_DECODE_LOOKUP){let Qe=Ge[0];if(Qe===d||Qe===de)return new uT(Ge[1]);let gn=uT.numBitsDiffering(d,Qe);gn<Se&&(Ue=Ge[1],Se=gn),d!==de&&(gn=uT.numBitsDiffering(de,Qe),gn<Se&&(Ue=Ge[1],Se=gn))}return Se<=3?new uT(Ue):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(d){if(!(d instanceof uT))return!1;let de=d;return this.errorCorrectionLevel===de.errorCorrectionLevel&&this.dataMask===de.dataMask}}uT.FORMAT_INFO_MASK_QR=21522,uT.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class Xb{constructor(d,...de){this.ecCodewordsPerBlock=d,this.ecBlocks=de}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let d=0,de=this.ecBlocks;for(let Se of de)d+=Se.getCount();return d}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class Fb{constructor(d,de){this.count=d,this.dataCodewords=de}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class V2{constructor(d,de,...Se){this.versionNumber=d,this.alignmentPatternCenters=de,this.ecBlocks=Se;let Ue=0,Ge=Se[0].getECCodewordsPerBlock(),Qe=Se[0].getECBlocks();for(let gn of Qe)Ue+=gn.getCount()*(gn.getDataCodewords()+Ge);this.totalCodewords=Ue}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(d){return this.ecBlocks[d.getValue()]}static getProvisionalVersionForDimension(d){if(d%4!==1)throw new za;try{return this.getVersionForNumber((d-17)/4)}catch{throw new za}}static getVersionForNumber(d){if(d<1||d>40)throw new m;return V2.VERSIONS[d-1]}static decodeVersionInformation(d){let de=Number.MAX_SAFE_INTEGER,Se=0;for(let Ue=0;Ue<V2.VERSION_DECODE_INFO.length;Ue++){let Ge=V2.VERSION_DECODE_INFO[Ue];if(Ge===d)return V2.getVersionForNumber(Ue+7);let Qe=uT.numBitsDiffering(d,Ge);Qe<de&&(Se=Ue+7,de=Qe)}return de<=3?V2.getVersionForNumber(Se):null}buildFunctionPattern(){let d=this.getDimensionForVersion(),de=new Dy(d);de.setRegion(0,0,9,9),de.setRegion(d-8,0,8,9),de.setRegion(0,d-8,9,8);let Se=this.alignmentPatternCenters.length;for(let Ue=0;Ue<Se;Ue++){let Ge=this.alignmentPatternCenters[Ue]-2;for(let Qe=0;Qe<Se;Qe++)Ue===0&&(Qe===0||Qe===Se-1)||Ue===Se-1&&Qe===0||de.setRegion(this.alignmentPatternCenters[Qe]-2,Ge,5,5)}return de.setRegion(6,9,1,d-17),de.setRegion(9,6,d-17,1),this.versionNumber>6&&(de.setRegion(d-11,0,3,6),de.setRegion(0,d-11,6,3)),de}toString(){return""+this.versionNumber}}V2.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),V2.VERSIONS=[new V2(1,new Int32Array(0),new Xb(7,new Fb(1,19)),new Xb(10,new Fb(1,16)),new Xb(13,new Fb(1,13)),new Xb(17,new Fb(1,9))),new V2(2,Int32Array.from([6,18]),new Xb(10,new Fb(1,34)),new Xb(16,new Fb(1,28)),new Xb(22,new Fb(1,22)),new Xb(28,new Fb(1,16))),new V2(3,Int32Array.from([6,22]),new Xb(15,new Fb(1,55)),new Xb(26,new Fb(1,44)),new Xb(18,new Fb(2,17)),new Xb(22,new Fb(2,13))),new V2(4,Int32Array.from([6,26]),new Xb(20,new Fb(1,80)),new Xb(18,new Fb(2,32)),new Xb(26,new Fb(2,24)),new Xb(16,new Fb(4,9))),new V2(5,Int32Array.from([6,30]),new Xb(26,new Fb(1,108)),new Xb(24,new Fb(2,43)),new Xb(18,new Fb(2,15),new Fb(2,16)),new Xb(22,new Fb(2,11),new Fb(2,12))),new V2(6,Int32Array.from([6,34]),new Xb(18,new Fb(2,68)),new Xb(16,new Fb(4,27)),new Xb(24,new Fb(4,19)),new Xb(28,new Fb(4,15))),new V2(7,Int32Array.from([6,22,38]),new Xb(20,new Fb(2,78)),new Xb(18,new Fb(4,31)),new Xb(18,new Fb(2,14),new Fb(4,15)),new Xb(26,new Fb(4,13),new Fb(1,14))),new V2(8,Int32Array.from([6,24,42]),new Xb(24,new Fb(2,97)),new Xb(22,new Fb(2,38),new Fb(2,39)),new Xb(22,new Fb(4,18),new Fb(2,19)),new Xb(26,new Fb(4,14),new Fb(2,15))),new V2(9,Int32Array.from([6,26,46]),new Xb(30,new Fb(2,116)),new Xb(22,new Fb(3,36),new Fb(2,37)),new Xb(20,new Fb(4,16),new Fb(4,17)),new Xb(24,new Fb(4,12),new Fb(4,13))),new V2(10,Int32Array.from([6,28,50]),new Xb(18,new Fb(2,68),new Fb(2,69)),new Xb(26,new Fb(4,43),new Fb(1,44)),new Xb(24,new Fb(6,19),new Fb(2,20)),new Xb(28,new Fb(6,15),new Fb(2,16))),new V2(11,Int32Array.from([6,30,54]),new Xb(20,new Fb(4,81)),new Xb(30,new Fb(1,50),new Fb(4,51)),new Xb(28,new Fb(4,22),new Fb(4,23)),new Xb(24,new Fb(3,12),new Fb(8,13))),new V2(12,Int32Array.from([6,32,58]),new Xb(24,new Fb(2,92),new Fb(2,93)),new Xb(22,new Fb(6,36),new Fb(2,37)),new Xb(26,new Fb(4,20),new Fb(6,21)),new Xb(28,new Fb(7,14),new Fb(4,15))),new V2(13,Int32Array.from([6,34,62]),new Xb(26,new Fb(4,107)),new Xb(22,new Fb(8,37),new Fb(1,38)),new Xb(24,new Fb(8,20),new Fb(4,21)),new Xb(22,new Fb(12,11),new Fb(4,12))),new V2(14,Int32Array.from([6,26,46,66]),new Xb(30,new Fb(3,115),new Fb(1,116)),new Xb(24,new Fb(4,40),new Fb(5,41)),new Xb(20,new Fb(11,16),new Fb(5,17)),new Xb(24,new Fb(11,12),new Fb(5,13))),new V2(15,Int32Array.from([6,26,48,70]),new Xb(22,new Fb(5,87),new Fb(1,88)),new Xb(24,new Fb(5,41),new Fb(5,42)),new Xb(30,new Fb(5,24),new Fb(7,25)),new Xb(24,new Fb(11,12),new Fb(7,13))),new V2(16,Int32Array.from([6,26,50,74]),new Xb(24,new Fb(5,98),new Fb(1,99)),new Xb(28,new Fb(7,45),new Fb(3,46)),new Xb(24,new Fb(15,19),new Fb(2,20)),new Xb(30,new Fb(3,15),new Fb(13,16))),new V2(17,Int32Array.from([6,30,54,78]),new Xb(28,new Fb(1,107),new Fb(5,108)),new Xb(28,new Fb(10,46),new Fb(1,47)),new Xb(28,new Fb(1,22),new Fb(15,23)),new Xb(28,new Fb(2,14),new Fb(17,15))),new V2(18,Int32Array.from([6,30,56,82]),new Xb(30,new Fb(5,120),new Fb(1,121)),new Xb(26,new Fb(9,43),new Fb(4,44)),new Xb(28,new Fb(17,22),new Fb(1,23)),new Xb(28,new Fb(2,14),new Fb(19,15))),new V2(19,Int32Array.from([6,30,58,86]),new Xb(28,new Fb(3,113),new Fb(4,114)),new Xb(26,new Fb(3,44),new Fb(11,45)),new Xb(26,new Fb(17,21),new Fb(4,22)),new Xb(26,new Fb(9,13),new Fb(16,14))),new V2(20,Int32Array.from([6,34,62,90]),new Xb(28,new Fb(3,107),new Fb(5,108)),new Xb(26,new Fb(3,41),new Fb(13,42)),new Xb(30,new Fb(15,24),new Fb(5,25)),new Xb(28,new Fb(15,15),new Fb(10,16))),new V2(21,Int32Array.from([6,28,50,72,94]),new Xb(28,new Fb(4,116),new Fb(4,117)),new Xb(26,new Fb(17,42)),new Xb(28,new Fb(17,22),new Fb(6,23)),new Xb(30,new Fb(19,16),new Fb(6,17))),new V2(22,Int32Array.from([6,26,50,74,98]),new Xb(28,new Fb(2,111),new Fb(7,112)),new Xb(28,new Fb(17,46)),new Xb(30,new Fb(7,24),new Fb(16,25)),new Xb(24,new Fb(34,13))),new V2(23,Int32Array.from([6,30,54,78,102]),new Xb(30,new Fb(4,121),new Fb(5,122)),new Xb(28,new Fb(4,47),new Fb(14,48)),new Xb(30,new Fb(11,24),new Fb(14,25)),new Xb(30,new Fb(16,15),new Fb(14,16))),new V2(24,Int32Array.from([6,28,54,80,106]),new Xb(30,new Fb(6,117),new Fb(4,118)),new Xb(28,new Fb(6,45),new Fb(14,46)),new Xb(30,new Fb(11,24),new Fb(16,25)),new Xb(30,new Fb(30,16),new Fb(2,17))),new V2(25,Int32Array.from([6,32,58,84,110]),new Xb(26,new Fb(8,106),new Fb(4,107)),new Xb(28,new Fb(8,47),new Fb(13,48)),new Xb(30,new Fb(7,24),new Fb(22,25)),new Xb(30,new Fb(22,15),new Fb(13,16))),new V2(26,Int32Array.from([6,30,58,86,114]),new Xb(28,new Fb(10,114),new Fb(2,115)),new Xb(28,new Fb(19,46),new Fb(4,47)),new Xb(28,new Fb(28,22),new Fb(6,23)),new Xb(30,new Fb(33,16),new Fb(4,17))),new V2(27,Int32Array.from([6,34,62,90,118]),new Xb(30,new Fb(8,122),new Fb(4,123)),new Xb(28,new Fb(22,45),new Fb(3,46)),new Xb(30,new Fb(8,23),new Fb(26,24)),new Xb(30,new Fb(12,15),new Fb(28,16))),new V2(28,Int32Array.from([6,26,50,74,98,122]),new Xb(30,new Fb(3,117),new Fb(10,118)),new Xb(28,new Fb(3,45),new Fb(23,46)),new Xb(30,new Fb(4,24),new Fb(31,25)),new Xb(30,new Fb(11,15),new Fb(31,16))),new V2(29,Int32Array.from([6,30,54,78,102,126]),new Xb(30,new Fb(7,116),new Fb(7,117)),new Xb(28,new Fb(21,45),new Fb(7,46)),new Xb(30,new Fb(1,23),new Fb(37,24)),new Xb(30,new Fb(19,15),new Fb(26,16))),new V2(30,Int32Array.from([6,26,52,78,104,130]),new Xb(30,new Fb(5,115),new Fb(10,116)),new Xb(28,new Fb(19,47),new Fb(10,48)),new Xb(30,new Fb(15,24),new Fb(25,25)),new Xb(30,new Fb(23,15),new Fb(25,16))),new V2(31,Int32Array.from([6,30,56,82,108,134]),new Xb(30,new Fb(13,115),new Fb(3,116)),new Xb(28,new Fb(2,46),new Fb(29,47)),new Xb(30,new Fb(42,24),new Fb(1,25)),new Xb(30,new Fb(23,15),new Fb(28,16))),new V2(32,Int32Array.from([6,34,60,86,112,138]),new Xb(30,new Fb(17,115)),new Xb(28,new Fb(10,46),new Fb(23,47)),new Xb(30,new Fb(10,24),new Fb(35,25)),new Xb(30,new Fb(19,15),new Fb(35,16))),new V2(33,Int32Array.from([6,30,58,86,114,142]),new Xb(30,new Fb(17,115),new Fb(1,116)),new Xb(28,new Fb(14,46),new Fb(21,47)),new Xb(30,new Fb(29,24),new Fb(19,25)),new Xb(30,new Fb(11,15),new Fb(46,16))),new V2(34,Int32Array.from([6,34,62,90,118,146]),new Xb(30,new Fb(13,115),new Fb(6,116)),new Xb(28,new Fb(14,46),new Fb(23,47)),new Xb(30,new Fb(44,24),new Fb(7,25)),new Xb(30,new Fb(59,16),new Fb(1,17))),new V2(35,Int32Array.from([6,30,54,78,102,126,150]),new Xb(30,new Fb(12,121),new Fb(7,122)),new Xb(28,new Fb(12,47),new Fb(26,48)),new Xb(30,new Fb(39,24),new Fb(14,25)),new Xb(30,new Fb(22,15),new Fb(41,16))),new V2(36,Int32Array.from([6,24,50,76,102,128,154]),new Xb(30,new Fb(6,121),new Fb(14,122)),new Xb(28,new Fb(6,47),new Fb(34,48)),new Xb(30,new Fb(46,24),new Fb(10,25)),new Xb(30,new Fb(2,15),new Fb(64,16))),new V2(37,Int32Array.from([6,28,54,80,106,132,158]),new Xb(30,new Fb(17,122),new Fb(4,123)),new Xb(28,new Fb(29,46),new Fb(14,47)),new Xb(30,new Fb(49,24),new Fb(10,25)),new Xb(30,new Fb(24,15),new Fb(46,16))),new V2(38,Int32Array.from([6,32,58,84,110,136,162]),new Xb(30,new Fb(4,122),new Fb(18,123)),new Xb(28,new Fb(13,46),new Fb(32,47)),new Xb(30,new Fb(48,24),new Fb(14,25)),new Xb(30,new Fb(42,15),new Fb(32,16))),new V2(39,Int32Array.from([6,26,54,82,110,138,166]),new Xb(30,new Fb(20,117),new Fb(4,118)),new Xb(28,new Fb(40,47),new Fb(7,48)),new Xb(30,new Fb(43,24),new Fb(22,25)),new Xb(30,new Fb(10,15),new Fb(67,16))),new V2(40,Int32Array.from([6,30,58,86,114,142,170]),new Xb(30,new Fb(19,118),new Fb(6,119)),new Xb(28,new Fb(18,47),new Fb(31,48)),new Xb(30,new Fb(34,24),new Fb(34,25)),new Xb(30,new Fb(20,15),new Fb(61,16)))];var OC;(function(by){by[by.DATA_MASK_000=0]="DATA_MASK_000",by[by.DATA_MASK_001=1]="DATA_MASK_001",by[by.DATA_MASK_010=2]="DATA_MASK_010",by[by.DATA_MASK_011=3]="DATA_MASK_011",by[by.DATA_MASK_100=4]="DATA_MASK_100",by[by.DATA_MASK_101=5]="DATA_MASK_101",by[by.DATA_MASK_110=6]="DATA_MASK_110",by[by.DATA_MASK_111=7]="DATA_MASK_111"})(OC||(OC={}));class bT{constructor(d,de){this.value=d,this.isMasked=de}unmaskBitMatrix(d,de){for(let Se=0;Se<de;Se++)for(let Ue=0;Ue<de;Ue++)this.isMasked(Se,Ue)&&d.flip(Ue,Se)}}bT.values=new Map([[OC.DATA_MASK_000,new bT(OC.DATA_MASK_000,(by,d)=>(by+d&1)===0)],[OC.DATA_MASK_001,new bT(OC.DATA_MASK_001,(by,d)=>(by&1)===0)],[OC.DATA_MASK_010,new bT(OC.DATA_MASK_010,(by,d)=>d%3===0)],[OC.DATA_MASK_011,new bT(OC.DATA_MASK_011,(by,d)=>(by+d)%3===0)],[OC.DATA_MASK_100,new bT(OC.DATA_MASK_100,(by,d)=>(Math.floor(by/2)+Math.floor(d/3)&1)===0)],[OC.DATA_MASK_101,new bT(OC.DATA_MASK_101,(by,d)=>by*d%6===0)],[OC.DATA_MASK_110,new bT(OC.DATA_MASK_110,(by,d)=>by*d%6<3)],[OC.DATA_MASK_111,new bT(OC.DATA_MASK_111,(by,d)=>(by+d+by*d%3&1)===0)]]);class W4{constructor(d){let de=d.getHeight();if(de<21||(de&3)!==1)throw new za;this.bitMatrix=d}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let d=0;for(let Ge=0;Ge<6;Ge++)d=this.copyBit(Ge,8,d);d=this.copyBit(7,8,d),d=this.copyBit(8,8,d),d=this.copyBit(8,7,d);for(let Ge=5;Ge>=0;Ge--)d=this.copyBit(8,Ge,d);let de=this.bitMatrix.getHeight(),Se=0,Ue=de-7;for(let Ge=de-1;Ge>=Ue;Ge--)Se=this.copyBit(8,Ge,Se);for(let Ge=de-8;Ge<de;Ge++)Se=this.copyBit(Ge,8,Se);if(this.parsedFormatInfo=uT.decodeFormatInformation(d,Se),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new za}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;let d=this.bitMatrix.getHeight(),de=Math.floor((d-17)/4);if(de<=6)return V2.getVersionForNumber(de);let Se=0,Ue=d-11;for(let Qe=5;Qe>=0;Qe--)for(let gn=d-9;gn>=Ue;gn--)Se=this.copyBit(gn,Qe,Se);let Ge=V2.decodeVersionInformation(Se);if(Ge!==null&&Ge.getDimensionForVersion()===d)return this.parsedVersion=Ge,Ge;Se=0;for(let Qe=5;Qe>=0;Qe--)for(let gn=d-9;gn>=Ue;gn--)Se=this.copyBit(Qe,gn,Se);if(Ge=V2.decodeVersionInformation(Se),Ge!==null&&Ge.getDimensionForVersion()===d)return this.parsedVersion=Ge,Ge;throw new za}copyBit(d,de,Se){return(this.isMirror?this.bitMatrix.get(de,d):this.bitMatrix.get(d,de))?Se<<1|1:Se<<1}readCodewords(){let d=this.readFormatInformation(),de=this.readVersion(),Se=bT.values.get(d.getDataMask()),Ue=this.bitMatrix.getHeight();Se.unmaskBitMatrix(this.bitMatrix,Ue);let Ge=de.buildFunctionPattern(),Qe=!0,gn=new Uint8Array(de.getTotalCodewords()),Bi=0,Ks=0,gy=0;for(let Cy=Ue-1;Cy>0;Cy-=2){Cy===6&&Cy--;for(let Oy=0;Oy<Ue;Oy++){let Nb=Qe?Ue-1-Oy:Oy;for(let qb=0;qb<2;qb++)Ge.get(Cy-qb,Nb)||(gy++,Ks<<=1,this.bitMatrix.get(Cy-qb,Nb)&&(Ks|=1),gy===8&&(gn[Bi++]=Ks,gy=0,Ks=0))}Qe=!Qe}if(Bi!==de.getTotalCodewords())throw new za;return gn}remask(){if(this.parsedFormatInfo===null)return;let d=bT.values[this.parsedFormatInfo.getDataMask()],de=this.bitMatrix.getHeight();d.unmaskBitMatrix(this.bitMatrix,de)}setMirror(d){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=d}mirror(){let d=this.bitMatrix;for(let de=0,Se=d.getWidth();de<Se;de++)for(let Ue=de+1,Ge=d.getHeight();Ue<Ge;Ue++)d.get(de,Ue)!==d.get(Ue,de)&&(d.flip(Ue,de),d.flip(de,Ue))}}class D4{constructor(d,de){this.numDataCodewords=d,this.codewords=de}static getDataBlocks(d,de,Se){if(d.length!==de.getTotalCodewords())throw new m;let Ue=de.getECBlocksForLevel(Se),Ge=0,Qe=Ue.getECBlocks();for(let qb of Qe)Ge+=qb.getCount();let gn=new Array(Ge),Bi=0;for(let qb of Qe)for(let Ub=0;Ub<qb.getCount();Ub++){let e2=qb.getDataCodewords(),c2=Ue.getECCodewordsPerBlock()+e2;gn[Bi++]=new D4(e2,new Uint8Array(c2))}let Ks=gn[0].codewords.length,gy=gn.length-1;for(;gy>=0&&gn[gy].codewords.length!==Ks;)gy--;gy++;let Cy=Ks-Ue.getECCodewordsPerBlock(),Oy=0;for(let qb=0;qb<Cy;qb++)for(let Ub=0;Ub<Bi;Ub++)gn[Ub].codewords[qb]=d[Oy++];for(let qb=gy;qb<Bi;qb++)gn[qb].codewords[Cy]=d[Oy++];let Nb=gn[0].codewords.length;for(let qb=Cy;qb<Nb;qb++)for(let Ub=0;Ub<Bi;Ub++){let e2=Ub<gy?qb:qb+1;gn[Ub].codewords[e2]=d[Oy++]}return gn}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var hO;(function(by){by[by.TERMINATOR=0]="TERMINATOR",by[by.NUMERIC=1]="NUMERIC",by[by.ALPHANUMERIC=2]="ALPHANUMERIC",by[by.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",by[by.BYTE=4]="BYTE",by[by.ECI=5]="ECI",by[by.KANJI=6]="KANJI",by[by.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",by[by.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",by[by.HANZI=9]="HANZI"})(hO||(hO={}));class G2{constructor(d,de,Se,Ue){this.value=d,this.stringValue=de,this.characterCountBitsForVersions=Se,this.bits=Ue,G2.FOR_BITS.set(Ue,this),G2.FOR_VALUE.set(d,this)}static forBits(d){let de=G2.FOR_BITS.get(d);if(de===void 0)throw new m;return de}getCharacterCountBits(d){let de=d.getVersionNumber(),Se;return de<=9?Se=0:de<=26?Se=1:Se=2,this.characterCountBitsForVersions[Se]}getValue(){return this.value}getBits(){return this.bits}equals(d){if(!(d instanceof G2))return!1;let de=d;return this.value===de.value}toString(){return this.stringValue}}G2.FOR_BITS=new Map,G2.FOR_VALUE=new Map,G2.TERMINATOR=new G2(hO.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),G2.NUMERIC=new G2(hO.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),G2.ALPHANUMERIC=new G2(hO.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),G2.STRUCTURED_APPEND=new G2(hO.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),G2.BYTE=new G2(hO.BYTE,"BYTE",Int32Array.from([8,16,16]),4),G2.ECI=new G2(hO.ECI,"ECI",Int32Array.from([0,0,0]),7),G2.KANJI=new G2(hO.KANJI,"KANJI",Int32Array.from([8,10,12]),8),G2.FNC1_FIRST_POSITION=new G2(hO.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),G2.FNC1_SECOND_POSITION=new G2(hO.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),G2.HANZI=new G2(hO.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class RC{static decode(d,de,Se,Ue){let Ge=new u6(d),Qe=new Bb,gn=new Array,Bi=-1,Ks=-1;try{let gy=null,Cy=!1,Oy;do{if(Ge.available()<4)Oy=G2.TERMINATOR;else{let Nb=Ge.readBits(4);Oy=G2.forBits(Nb)}switch(Oy){case G2.TERMINATOR:break;case G2.FNC1_FIRST_POSITION:case G2.FNC1_SECOND_POSITION:Cy=!0;break;case G2.STRUCTURED_APPEND:if(Ge.available()<16)throw new za;Bi=Ge.readBits(8),Ks=Ge.readBits(8);break;case G2.ECI:let Nb=RC.parseECIValue(Ge);if(gy=lc.getCharacterSetECIByValue(Nb),gy===null)throw new za;break;case G2.HANZI:let qb=Ge.readBits(4),Ub=Ge.readBits(Oy.getCharacterCountBits(de));qb===RC.GB2312_SUBSET&&RC.decodeHanziSegment(Ge,Qe,Ub);break;default:let e2=Ge.readBits(Oy.getCharacterCountBits(de));switch(Oy){case G2.NUMERIC:RC.decodeNumericSegment(Ge,Qe,e2);break;case G2.ALPHANUMERIC:RC.decodeAlphanumericSegment(Ge,Qe,e2,Cy);break;case G2.BYTE:RC.decodeByteSegment(Ge,Qe,e2,gy,gn,Ue);break;case G2.KANJI:RC.decodeKanjiSegment(Ge,Qe,e2);break;default:throw new za}break}}while(Oy!==G2.TERMINATOR)}catch{throw new za}return new E2(d,Qe.toString(),gn.length===0?null:gn,Se===null?null:Se.toString(),Bi,Ks)}static decodeHanziSegment(d,de,Se){if(Se*13>d.available())throw new za;let Ue=new Uint8Array(2*Se),Ge=0;for(;Se>0;){let Qe=d.readBits(13),gn=Qe/96<<8&4294967295|Qe%96;gn<959?gn+=41377:gn+=42657,Ue[Ge]=gn>>8&255,Ue[Ge+1]=gn&255,Ge+=2,Se--}try{de.append(_y.decode(Ue,xy.GB2312))}catch(Qe){throw new za(Qe)}}static decodeKanjiSegment(d,de,Se){if(Se*13>d.available())throw new za;let Ue=new Uint8Array(2*Se),Ge=0;for(;Se>0;){let Qe=d.readBits(13),gn=Qe/192<<8&4294967295|Qe%192;gn<7936?gn+=33088:gn+=49472,Ue[Ge]=gn>>8,Ue[Ge+1]=gn,Ge+=2,Se--}try{de.append(_y.decode(Ue,xy.SHIFT_JIS))}catch(Qe){throw new za(Qe)}}static decodeByteSegment(d,de,Se,Ue,Ge,Qe){if(8*Se>d.available())throw new za;let gn=new Uint8Array(Se);for(let Ks=0;Ks<Se;Ks++)gn[Ks]=d.readBits(8);let Bi;Ue===null?Bi=xy.guessEncoding(gn,Qe):Bi=Ue.getName();try{de.append(_y.decode(gn,Bi))}catch(Ks){throw new za(Ks)}Ge.push(gn)}static toAlphaNumericChar(d){if(d>=RC.ALPHANUMERIC_CHARS.length)throw new za;return RC.ALPHANUMERIC_CHARS[d]}static decodeAlphanumericSegment(d,de,Se,Ue){let Ge=de.length();for(;Se>1;){if(d.available()<11)throw new za;let Qe=d.readBits(11);de.append(RC.toAlphaNumericChar(Math.floor(Qe/45))),de.append(RC.toAlphaNumericChar(Qe%45)),Se-=2}if(Se===1){if(d.available()<6)throw new za;de.append(RC.toAlphaNumericChar(d.readBits(6)))}if(Ue)for(let Qe=Ge;Qe<de.length();Qe++)de.charAt(Qe)==="%"&&(Qe<de.length()-1&&de.charAt(Qe+1)==="%"?de.deleteCharAt(Qe+1):de.setCharAt(Qe,String.fromCharCode(29)))}static decodeNumericSegment(d,de,Se){for(;Se>=3;){if(d.available()<10)throw new za;let Ue=d.readBits(10);if(Ue>=1e3)throw new za;de.append(RC.toAlphaNumericChar(Math.floor(Ue/100))),de.append(RC.toAlphaNumericChar(Math.floor(Ue/10)%10)),de.append(RC.toAlphaNumericChar(Ue%10)),Se-=3}if(Se===2){if(d.available()<7)throw new za;let Ue=d.readBits(7);if(Ue>=100)throw new za;de.append(RC.toAlphaNumericChar(Math.floor(Ue/10))),de.append(RC.toAlphaNumericChar(Ue%10))}else if(Se===1){if(d.available()<4)throw new za;let Ue=d.readBits(4);if(Ue>=10)throw new za;de.append(RC.toAlphaNumericChar(Ue))}}static parseECIValue(d){let de=d.readBits(8);if((de&128)===0)return de&127;if((de&192)===128){let Se=d.readBits(8);return(de&63)<<8&4294967295|Se}if((de&224)===192){let Se=d.readBits(16);return(de&31)<<16&4294967295|Se}throw new za}}RC.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",RC.GB2312_SUBSET=1;class T6{constructor(d){this.mirrored=d}isMirrored(){return this.mirrored}applyMirroredCorrection(d){if(!this.mirrored||d===null||d.length<3)return;let de=d[0];d[0]=d[2],d[2]=de}}class Q6{constructor(){this.rsDecoder=new zb(k_.QR_CODE_FIELD_256)}decodeBooleanArray(d,de){return this.decodeBitMatrix(Dy.parseFromBooleanArray(d),de)}decodeBitMatrix(d,de){let Se=new W4(d),Ue=null;try{return this.decodeBitMatrixParser(Se,de)}catch(Ge){Ue=Ge}try{Se.remask(),Se.setMirror(!0),Se.readVersion(),Se.readFormatInformation(),Se.mirror();let Ge=this.decodeBitMatrixParser(Se,de);return Ge.setOther(new T6(!0)),Ge}catch(Ge){throw Ue!==null?Ue:Ge}}decodeBitMatrixParser(d,de){let Se=d.readVersion(),Ue=d.readFormatInformation().getErrorCorrectionLevel(),Ge=d.readCodewords(),Qe=D4.getDataBlocks(Ge,Se,Ue),gn=0;for(let gy of Qe)gn+=gy.getNumDataCodewords();let Bi=new Uint8Array(gn),Ks=0;for(let gy of Qe){let Cy=gy.getCodewords(),Oy=gy.getNumDataCodewords();this.correctErrors(Cy,Oy);for(let Nb=0;Nb<Oy;Nb++)Bi[Ks++]=Cy[Nb]}return RC.decode(Bi,Se,Ue,de)}correctErrors(d,de){let Se=new Int32Array(d);try{this.rsDecoder.decode(Se,d.length-de)}catch{throw new xe}for(let Ue=0;Ue<de;Ue++)d[Ue]=Se[Ue]}}class c6 extends Wb{constructor(d,de,Se){super(d,de),this.estimatedModuleSize=Se}aboutEquals(d,de,Se){if(Math.abs(de-this.getY())<=d&&Math.abs(Se-this.getX())<=d){let Ue=Math.abs(d-this.estimatedModuleSize);return Ue<=1||Ue<=this.estimatedModuleSize}return!1}combineEstimate(d,de,Se){let Ue=(this.getX()+de)/2,Ge=(this.getY()+d)/2,Qe=(this.estimatedModuleSize+Se)/2;return new c6(Ue,Ge,Qe)}}class Q4{constructor(d,de,Se,Ue,Ge,Qe,gn){this.image=d,this.startX=de,this.startY=Se,this.width=Ue,this.height=Ge,this.moduleSize=Qe,this.resultPointCallback=gn,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){let d=this.startX,de=this.height,Se=this.width,Ue=d+Se,Ge=this.startY+de/2,Qe=new Int32Array(3),gn=this.image;for(let Bi=0;Bi<de;Bi++){let Ks=Ge+((Bi&1)===0?Math.floor((Bi+1)/2):-Math.floor((Bi+1)/2));Qe[0]=0,Qe[1]=0,Qe[2]=0;let gy=d;for(;gy<Ue&&!gn.get(gy,Ks);)gy++;let Cy=0;for(;gy<Ue;){if(gn.get(gy,Ks))if(Cy===1)Qe[1]++;else if(Cy===2){if(this.foundPatternCross(Qe)){let Oy=this.handlePossibleCenter(Qe,Ks,gy);if(Oy!==null)return Oy}Qe[0]=Qe[2],Qe[1]=1,Qe[2]=0,Cy=1}else Qe[++Cy]++;else Cy===1&&Cy++,Qe[Cy]++;gy++}if(this.foundPatternCross(Qe)){let Oy=this.handlePossibleCenter(Qe,Ks,Ue);if(Oy!==null)return Oy}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new Bg}static centerFromEnd(d,de){return de-d[2]-d[1]/2}foundPatternCross(d){let de=this.moduleSize,Se=de/2;for(let Ue=0;Ue<3;Ue++)if(Math.abs(de-d[Ue])>=Se)return!1;return!0}crossCheckVertical(d,de,Se,Ue){let Ge=this.image,Qe=Ge.getHeight(),gn=this.crossCheckStateCount;gn[0]=0,gn[1]=0,gn[2]=0;let Bi=d;for(;Bi>=0&&Ge.get(de,Bi)&&gn[1]<=Se;)gn[1]++,Bi--;if(Bi<0||gn[1]>Se)return NaN;for(;Bi>=0&&!Ge.get(de,Bi)&&gn[0]<=Se;)gn[0]++,Bi--;if(gn[0]>Se)return NaN;for(Bi=d+1;Bi<Qe&&Ge.get(de,Bi)&&gn[1]<=Se;)gn[1]++,Bi++;if(Bi===Qe||gn[1]>Se)return NaN;for(;Bi<Qe&&!Ge.get(de,Bi)&&gn[2]<=Se;)gn[2]++,Bi++;if(gn[2]>Se)return NaN;let Ks=gn[0]+gn[1]+gn[2];return 5*Math.abs(Ks-Ue)>=2*Ue?NaN:this.foundPatternCross(gn)?Q4.centerFromEnd(gn,Bi):NaN}handlePossibleCenter(d,de,Se){let Ue=d[0]+d[1]+d[2],Ge=Q4.centerFromEnd(d,Se),Qe=this.crossCheckVertical(de,Ge,2*d[1],Ue);if(!isNaN(Qe)){let gn=(d[0]+d[1]+d[2])/3;for(let Ks of this.possibleCenters)if(Ks.aboutEquals(gn,Qe,Ge))return Ks.combineEstimate(Qe,Ge,gn);let Bi=new c6(Ge,Qe,gn);this.possibleCenters.push(Bi),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(Bi)}return null}}class d6 extends Wb{constructor(d,de,Se,Ue){super(d,de),this.estimatedModuleSize=Se,this.count=Ue,Ue===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(d,de,Se){if(Math.abs(de-this.getY())<=d&&Math.abs(Se-this.getX())<=d){let Ue=Math.abs(d-this.estimatedModuleSize);return Ue<=1||Ue<=this.estimatedModuleSize}return!1}combineEstimate(d,de,Se){let Ue=this.count+1,Ge=(this.count*this.getX()+de)/Ue,Qe=(this.count*this.getY()+d)/Ue,gn=(this.count*this.estimatedModuleSize+Se)/Ue;return new d6(Ge,Qe,gn,Ue)}}class Y6{constructor(d){this.bottomLeft=d[0],this.topLeft=d[1],this.topRight=d[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class XC{constructor(d,de){this.image=d,this.resultPointCallback=de,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=de}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(d){let de=d!=null&&d.get(zs.TRY_HARDER)!==void 0,Se=d!=null&&d.get(zs.PURE_BARCODE)!==void 0,Ue=this.image,Ge=Ue.getHeight(),Qe=Ue.getWidth(),gn=Math.floor(3*Ge/(4*XC.MAX_MODULES));(gn<XC.MIN_SKIP||de)&&(gn=XC.MIN_SKIP);let Bi=!1,Ks=new Int32Array(5);for(let Cy=gn-1;Cy<Ge&&!Bi;Cy+=gn){Ks[0]=0,Ks[1]=0,Ks[2]=0,Ks[3]=0,Ks[4]=0;let Oy=0;for(let Nb=0;Nb<Qe;Nb++)if(Ue.get(Nb,Cy))(Oy&1)===1&&Oy++,Ks[Oy]++;else if((Oy&1)===0)if(Oy===4)if(XC.foundPatternCross(Ks)){if(this.handlePossibleCenter(Ks,Cy,Nb,Se)===!0)if(gn=2,this.hasSkipped===!0)Bi=this.haveMultiplyConfirmedCenters();else{let qb=this.findRowSkip();qb>Ks[2]&&(Cy+=qb-Ks[2]-gn,Nb=Qe-1)}else{Ks[0]=Ks[2],Ks[1]=Ks[3],Ks[2]=Ks[4],Ks[3]=1,Ks[4]=0,Oy=3;continue}Oy=0,Ks[0]=0,Ks[1]=0,Ks[2]=0,Ks[3]=0,Ks[4]=0}else Ks[0]=Ks[2],Ks[1]=Ks[3],Ks[2]=Ks[4],Ks[3]=1,Ks[4]=0,Oy=3;else Ks[++Oy]++;else Ks[Oy]++;XC.foundPatternCross(Ks)&&this.handlePossibleCenter(Ks,Cy,Qe,Se)===!0&&(gn=Ks[0],this.hasSkipped&&(Bi=this.haveMultiplyConfirmedCenters()))}let gy=this.selectBestPatterns();return Wb.orderBestPatterns(gy),new Y6(gy)}static centerFromEnd(d,de){return de-d[4]-d[3]-d[2]/2}static foundPatternCross(d){let de=0;for(let Ge=0;Ge<5;Ge++){let Qe=d[Ge];if(Qe===0)return!1;de+=Qe}if(de<7)return!1;let Se=de/7,Ue=Se/2;return Math.abs(Se-d[0])<Ue&&Math.abs(Se-d[1])<Ue&&Math.abs(3*Se-d[2])<3*Ue&&Math.abs(Se-d[3])<Ue&&Math.abs(Se-d[4])<Ue}getCrossCheckStateCount(){let d=this.crossCheckStateCount;return d[0]=0,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d}crossCheckDiagonal(d,de,Se,Ue){let Ge=this.getCrossCheckStateCount(),Qe=0,gn=this.image;for(;d>=Qe&&de>=Qe&&gn.get(de-Qe,d-Qe);)Ge[2]++,Qe++;if(d<Qe||de<Qe)return!1;for(;d>=Qe&&de>=Qe&&!gn.get(de-Qe,d-Qe)&&Ge[1]<=Se;)Ge[1]++,Qe++;if(d<Qe||de<Qe||Ge[1]>Se)return!1;for(;d>=Qe&&de>=Qe&&gn.get(de-Qe,d-Qe)&&Ge[0]<=Se;)Ge[0]++,Qe++;if(Ge[0]>Se)return!1;let Bi=gn.getHeight(),Ks=gn.getWidth();for(Qe=1;d+Qe<Bi&&de+Qe<Ks&&gn.get(de+Qe,d+Qe);)Ge[2]++,Qe++;if(d+Qe>=Bi||de+Qe>=Ks)return!1;for(;d+Qe<Bi&&de+Qe<Ks&&!gn.get(de+Qe,d+Qe)&&Ge[3]<Se;)Ge[3]++,Qe++;if(d+Qe>=Bi||de+Qe>=Ks||Ge[3]>=Se)return!1;for(;d+Qe<Bi&&de+Qe<Ks&&gn.get(de+Qe,d+Qe)&&Ge[4]<Se;)Ge[4]++,Qe++;if(Ge[4]>=Se)return!1;let gy=Ge[0]+Ge[1]+Ge[2]+Ge[3]+Ge[4];return Math.abs(gy-Ue)<2*Ue&&XC.foundPatternCross(Ge)}crossCheckVertical(d,de,Se,Ue){let Ge=this.image,Qe=Ge.getHeight(),gn=this.getCrossCheckStateCount(),Bi=d;for(;Bi>=0&&Ge.get(de,Bi);)gn[2]++,Bi--;if(Bi<0)return NaN;for(;Bi>=0&&!Ge.get(de,Bi)&&gn[1]<=Se;)gn[1]++,Bi--;if(Bi<0||gn[1]>Se)return NaN;for(;Bi>=0&&Ge.get(de,Bi)&&gn[0]<=Se;)gn[0]++,Bi--;if(gn[0]>Se)return NaN;for(Bi=d+1;Bi<Qe&&Ge.get(de,Bi);)gn[2]++,Bi++;if(Bi===Qe)return NaN;for(;Bi<Qe&&!Ge.get(de,Bi)&&gn[3]<Se;)gn[3]++,Bi++;if(Bi===Qe||gn[3]>=Se)return NaN;for(;Bi<Qe&&Ge.get(de,Bi)&&gn[4]<Se;)gn[4]++,Bi++;if(gn[4]>=Se)return NaN;let Ks=gn[0]+gn[1]+gn[2]+gn[3]+gn[4];return 5*Math.abs(Ks-Ue)>=2*Ue?NaN:XC.foundPatternCross(gn)?XC.centerFromEnd(gn,Bi):NaN}crossCheckHorizontal(d,de,Se,Ue){let Ge=this.image,Qe=Ge.getWidth(),gn=this.getCrossCheckStateCount(),Bi=d;for(;Bi>=0&&Ge.get(Bi,de);)gn[2]++,Bi--;if(Bi<0)return NaN;for(;Bi>=0&&!Ge.get(Bi,de)&&gn[1]<=Se;)gn[1]++,Bi--;if(Bi<0||gn[1]>Se)return NaN;for(;Bi>=0&&Ge.get(Bi,de)&&gn[0]<=Se;)gn[0]++,Bi--;if(gn[0]>Se)return NaN;for(Bi=d+1;Bi<Qe&&Ge.get(Bi,de);)gn[2]++,Bi++;if(Bi===Qe)return NaN;for(;Bi<Qe&&!Ge.get(Bi,de)&&gn[3]<Se;)gn[3]++,Bi++;if(Bi===Qe||gn[3]>=Se)return NaN;for(;Bi<Qe&&Ge.get(Bi,de)&&gn[4]<Se;)gn[4]++,Bi++;if(gn[4]>=Se)return NaN;let Ks=gn[0]+gn[1]+gn[2]+gn[3]+gn[4];return 5*Math.abs(Ks-Ue)>=Ue?NaN:XC.foundPatternCross(gn)?XC.centerFromEnd(gn,Bi):NaN}handlePossibleCenter(d,de,Se,Ue){let Ge=d[0]+d[1]+d[2]+d[3]+d[4],Qe=XC.centerFromEnd(d,Se),gn=this.crossCheckVertical(de,Math.floor(Qe),d[2],Ge);if(!isNaN(gn)&&(Qe=this.crossCheckHorizontal(Math.floor(Qe),Math.floor(gn),d[2],Ge),!isNaN(Qe)&&(!Ue||this.crossCheckDiagonal(Math.floor(gn),Math.floor(Qe),d[2],Ge)))){let Bi=Ge/7,Ks=!1,gy=this.possibleCenters;for(let Cy=0,Oy=gy.length;Cy<Oy;Cy++){let Nb=gy[Cy];if(Nb.aboutEquals(Bi,gn,Qe)){gy[Cy]=Nb.combineEstimate(gn,Qe,Bi),Ks=!0;break}}if(!Ks){let Cy=new d6(Qe,gn,Bi);gy.push(Cy),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(Cy)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let d=null;for(let de of this.possibleCenters)if(de.getCount()>=XC.CENTER_QUORUM)if(d==null)d=de;else return this.hasSkipped=!0,Math.floor((Math.abs(d.getX()-de.getX())-Math.abs(d.getY()-de.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let d=0,de=0,Se=this.possibleCenters.length;for(let Qe of this.possibleCenters)Qe.getCount()>=XC.CENTER_QUORUM&&(d++,de+=Qe.getEstimatedModuleSize());if(d<3)return!1;let Ue=de/Se,Ge=0;for(let Qe of this.possibleCenters)Ge+=Math.abs(Qe.getEstimatedModuleSize()-Ue);return Ge<=.05*de}selectBestPatterns(){let d=this.possibleCenters.length;if(d<3)throw new Bg;let de=this.possibleCenters,Se;if(d>3){let Ue=0,Ge=0;for(let Bi of this.possibleCenters){let Ks=Bi.getEstimatedModuleSize();Ue+=Ks,Ge+=Ks*Ks}Se=Ue/d;let Qe=Math.sqrt(Ge/d-Se*Se);de.sort((Bi,Ks)=>{let gy=Math.abs(Ks.getEstimatedModuleSize()-Se),Cy=Math.abs(Bi.getEstimatedModuleSize()-Se);return gy<Cy?-1:gy>Cy?1:0});let gn=Math.max(.2*Se,Qe);for(let Bi=0;Bi<de.length&&de.length>3;Bi++){let Ks=de[Bi];Math.abs(Ks.getEstimatedModuleSize()-Se)>gn&&(de.splice(Bi,1),Bi--)}}if(de.length>3){let Ue=0;for(let Ge of de)Ue+=Ge.getEstimatedModuleSize();Se=Ue/de.length,de.sort((Ge,Qe)=>{if(Qe.getCount()===Ge.getCount()){let gn=Math.abs(Qe.getEstimatedModuleSize()-Se),Bi=Math.abs(Ge.getEstimatedModuleSize()-Se);return gn<Bi?1:gn>Bi?-1:0}else return Qe.getCount()-Ge.getCount()}),de.splice(3)}return[de[0],de[1],de[2]]}}XC.CENTER_QUORUM=2,XC.MIN_SKIP=3,XC.MAX_MODULES=57;class R4{constructor(d){this.image=d}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(d){this.resultPointCallback=d==null?null:d.get(zs.NEED_RESULT_POINT_CALLBACK);let de=new XC(this.image,this.resultPointCallback).find(d);return this.processFinderPatternInfo(de)}processFinderPatternInfo(d){let de=d.getTopLeft(),Se=d.getTopRight(),Ue=d.getBottomLeft(),Ge=this.calculateModuleSize(de,Se,Ue);if(Ge<1)throw new Bg("No pattern found in proccess finder.");let Qe=R4.computeDimension(de,Se,Ue,Ge),gn=V2.getProvisionalVersionForDimension(Qe),Bi=gn.getDimensionForVersion()-7,Ks=null;if(gn.getAlignmentPatternCenters().length>0){let Nb=Se.getX()-de.getX()+Ue.getX(),qb=Se.getY()-de.getY()+Ue.getY(),Ub=1-3/Bi,e2=Math.floor(de.getX()+Ub*(Nb-de.getX())),c2=Math.floor(de.getY()+Ub*(qb-de.getY()));for(let k2=4;k2<=16;k2<<=1)try{Ks=this.findAlignmentInRegion(Ge,e2,c2,k2);break}catch($2){if(!($2 instanceof Bg))throw $2}}let gy=R4.createTransform(de,Se,Ue,Ks,Qe),Cy=R4.sampleGrid(this.image,gy,Qe),Oy;return Ks===null?Oy=[Ue,de,Se]:Oy=[Ue,de,Se,Ks],new f2(Cy,Oy)}static createTransform(d,de,Se,Ue,Ge){let Qe=Ge-3.5,gn,Bi,Ks,gy;return Ue!==null?(gn=Ue.getX(),Bi=Ue.getY(),Ks=Qe-3,gy=Ks):(gn=de.getX()-d.getX()+Se.getX(),Bi=de.getY()-d.getY()+Se.getY(),Ks=Qe,gy=Qe),N2.quadrilateralToQuadrilateral(3.5,3.5,Qe,3.5,Ks,gy,3.5,Qe,d.getX(),d.getY(),de.getX(),de.getY(),gn,Bi,Se.getX(),Se.getY())}static sampleGrid(d,de,Se){return Q2.getInstance().sampleGridWithTransform(d,Se,Se,de)}static computeDimension(d,de,Se,Ue){let Ge=h2.round(Wb.distance(d,de)/Ue),Qe=h2.round(Wb.distance(d,Se)/Ue),gn=Math.floor((Ge+Qe)/2)+7;switch(gn&3){case 0:gn++;break;case 2:gn--;break;case 3:throw new Bg("Dimensions could be not found.")}return gn}calculateModuleSize(d,de,Se){return(this.calculateModuleSizeOneWay(d,de)+this.calculateModuleSizeOneWay(d,Se))/2}calculateModuleSizeOneWay(d,de){let Se=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(d.getX()),Math.floor(d.getY()),Math.floor(de.getX()),Math.floor(de.getY())),Ue=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(de.getX()),Math.floor(de.getY()),Math.floor(d.getX()),Math.floor(d.getY()));return isNaN(Se)?Ue/7:isNaN(Ue)?Se/7:(Se+Ue)/14}sizeOfBlackWhiteBlackRunBothWays(d,de,Se,Ue){let Ge=this.sizeOfBlackWhiteBlackRun(d,de,Se,Ue),Qe=1,gn=d-(Se-d);gn<0?(Qe=d/(d-gn),gn=0):gn>=this.image.getWidth()&&(Qe=(this.image.getWidth()-1-d)/(gn-d),gn=this.image.getWidth()-1);let Bi=Math.floor(de-(Ue-de)*Qe);return Qe=1,Bi<0?(Qe=de/(de-Bi),Bi=0):Bi>=this.image.getHeight()&&(Qe=(this.image.getHeight()-1-de)/(Bi-de),Bi=this.image.getHeight()-1),gn=Math.floor(d+(gn-d)*Qe),Ge+=this.sizeOfBlackWhiteBlackRun(d,de,gn,Bi),Ge-1}sizeOfBlackWhiteBlackRun(d,de,Se,Ue){let Ge=Math.abs(Ue-de)>Math.abs(Se-d);if(Ge){let Nb=d;d=de,de=Nb,Nb=Se,Se=Ue,Ue=Nb}let Qe=Math.abs(Se-d),gn=Math.abs(Ue-de),Bi=-Qe/2,Ks=d<Se?1:-1,gy=de<Ue?1:-1,Cy=0,Oy=Se+Ks;for(let Nb=d,qb=de;Nb!==Oy;Nb+=Ks){let Ub=Ge?qb:Nb,e2=Ge?Nb:qb;if(Cy===1===this.image.get(Ub,e2)){if(Cy===2)return h2.distance(Nb,qb,d,de);Cy++}if(Bi+=gn,Bi>0){if(qb===Ue)break;qb+=gy,Bi-=Qe}}return Cy===2?h2.distance(Se+Ks,Ue,d,de):NaN}findAlignmentInRegion(d,de,Se,Ue){let Ge=Math.floor(Ue*d),Qe=Math.max(0,de-Ge),gn=Math.min(this.image.getWidth()-1,de+Ge);if(gn-Qe<d*3)throw new Bg("Alignment top exceeds estimated module size.");let Bi=Math.max(0,Se-Ge),Ks=Math.min(this.image.getHeight()-1,Se+Ge);if(Ks-Bi<d*3)throw new Bg("Alignment bottom exceeds estimated module size.");return new Q4(this.image,Qe,Bi,gn-Qe,Ks-Bi,d,this.resultPointCallback).find()}}class XO{constructor(){this.decoder=new Q6}getDecoder(){return this.decoder}decode(d,de){let Se,Ue;if(de!=null&&de.get(zs.PURE_BARCODE)!==void 0){let Bi=XO.extractPureBits(d.getBlackMatrix());Se=this.decoder.decodeBitMatrix(Bi,de),Ue=XO.NO_POINTS}else{let Bi=new R4(d.getBlackMatrix()).detect(de);Se=this.decoder.decodeBitMatrix(Bi.getBits(),de),Ue=Bi.getPoints()}Se.getOther()instanceof T6&&Se.getOther().applyMirroredCorrection(Ue);let Ge=new l2(Se.getText(),Se.getRawBytes(),void 0,Ue,Rb.QR_CODE,void 0),Qe=Se.getByteSegments();Qe!==null&&Ge.putMetadata(s2.BYTE_SEGMENTS,Qe);let gn=Se.getECLevel();return gn!==null&&Ge.putMetadata(s2.ERROR_CORRECTION_LEVEL,gn),Se.hasStructuredAppend()&&(Ge.putMetadata(s2.STRUCTURED_APPEND_SEQUENCE,Se.getStructuredAppendSequenceNumber()),Ge.putMetadata(s2.STRUCTURED_APPEND_PARITY,Se.getStructuredAppendParity())),Ge}reset(){}static extractPureBits(d){let de=d.getTopLeftOnBit(),Se=d.getBottomRightOnBit();if(de===null||Se===null)throw new Bg;let Ue=this.moduleSize(de,d),Ge=de[1],Qe=Se[1],gn=de[0],Bi=Se[0];if(gn>=Bi||Ge>=Qe)throw new Bg;if(Qe-Ge!==Bi-gn&&(Bi=gn+(Qe-Ge),Bi>=d.getWidth()))throw new Bg;let Ks=Math.round((Bi-gn+1)/Ue),gy=Math.round((Qe-Ge+1)/Ue);if(Ks<=0||gy<=0)throw new Bg;if(gy!==Ks)throw new Bg;let Cy=Math.floor(Ue/2);Ge+=Cy,gn+=Cy;let Oy=gn+Math.floor((Ks-1)*Ue)-Bi;if(Oy>0){if(Oy>Cy)throw new Bg;gn-=Oy}let Nb=Ge+Math.floor((gy-1)*Ue)-Qe;if(Nb>0){if(Nb>Cy)throw new Bg;Ge-=Nb}let qb=new Dy(Ks,gy);for(let Ub=0;Ub<gy;Ub++){let e2=Ge+Math.floor(Ub*Ue);for(let c2=0;c2<Ks;c2++)d.get(gn+Math.floor(c2*Ue),e2)&&qb.set(c2,Ub)}return qb}static moduleSize(d,de){let Se=de.getHeight(),Ue=de.getWidth(),Ge=d[0],Qe=d[1],gn=!0,Bi=0;for(;Ge<Ue&&Qe<Se;){if(gn!==de.get(Ge,Qe)){if(++Bi===5)break;gn=!gn}Ge++,Qe++}if(Ge===Ue||Qe===Se)throw new Bg;return(Ge-d[0])/7}}XO.NO_POINTS=new Array;class H2{PDF417Common(){}static getBitCountSum(d){return h2.sum(d)}static toIntArray(d){if(d==null||!d.length)return H2.EMPTY_INT_ARRAY;let de=new Int32Array(d.length),Se=0;for(let Ue of d)de[Se++]=Ue;return de}static getCodeword(d){let de=vn.binarySearch(H2.SYMBOL_TABLE,d&262143);return de<0?-1:(H2.CODEWORD_TABLE[de]-1)%H2.NUMBER_OF_CODEWORDS}}H2.NUMBER_OF_CODEWORDS=929,H2.MAX_CODEWORDS_IN_BARCODE=H2.NUMBER_OF_CODEWORDS-1,H2.MIN_ROWS_IN_BARCODE=3,H2.MAX_ROWS_IN_BARCODE=90,H2.MODULES_IN_CODEWORD=17,H2.MODULES_IN_STOP_PATTERN=18,H2.BARS_IN_MODULE=8,H2.EMPTY_INT_ARRAY=new Int32Array([]),H2.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),H2.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class X6{constructor(d,de){this.bits=d,this.points=de}getBits(){return this.bits}getPoints(){return this.points}}class cC{static detectMultiple(d,de,Se){let Ue=d.getBlackMatrix(),Ge=cC.detect(Se,Ue);return Ge.length||(Ue=Ue.clone(),Ue.rotate180(),Ge=cC.detect(Se,Ue)),new X6(Ue,Ge)}static detect(d,de){let Se=new Array,Ue=0,Ge=0,Qe=!1;for(;Ue<de.getHeight();){let gn=cC.findVertices(de,Ue,Ge);if(gn[0]==null&&gn[3]==null){if(!Qe)break;Qe=!1,Ge=0;for(let Bi of Se)Bi[1]!=null&&(Ue=Math.trunc(Math.max(Ue,Bi[1].getY()))),Bi[3]!=null&&(Ue=Math.max(Ue,Math.trunc(Bi[3].getY())));Ue+=cC.ROW_STEP;continue}if(Qe=!0,Se.push(gn),!d)break;gn[2]!=null?(Ge=Math.trunc(gn[2].getX()),Ue=Math.trunc(gn[2].getY())):(Ge=Math.trunc(gn[4].getX()),Ue=Math.trunc(gn[4].getY()))}return Se}static findVertices(d,de,Se){let Ue=d.getHeight(),Ge=d.getWidth(),Qe=new Array(8);return cC.copyToResult(Qe,cC.findRowsWithPattern(d,Ue,Ge,de,Se,cC.START_PATTERN),cC.INDEXES_START_PATTERN),Qe[4]!=null&&(Se=Math.trunc(Qe[4].getX()),de=Math.trunc(Qe[4].getY())),cC.copyToResult(Qe,cC.findRowsWithPattern(d,Ue,Ge,de,Se,cC.STOP_PATTERN),cC.INDEXES_STOP_PATTERN),Qe}static copyToResult(d,de,Se){for(let Ue=0;Ue<Se.length;Ue++)d[Se[Ue]]=de[Ue]}static findRowsWithPattern(d,de,Se,Ue,Ge,Qe){let gn=new Array(4),Bi=!1,Ks=new Int32Array(Qe.length);for(;Ue<de;Ue+=cC.ROW_STEP){let Cy=cC.findGuardPattern(d,Ge,Ue,Se,!1,Qe,Ks);if(Cy!=null){for(;Ue>0;){let Oy=cC.findGuardPattern(d,Ge,--Ue,Se,!1,Qe,Ks);if(Oy!=null)Cy=Oy;else{Ue++;break}}gn[0]=new Wb(Cy[0],Ue),gn[1]=new Wb(Cy[1],Ue),Bi=!0;break}}let gy=Ue+1;if(Bi){let Cy=0,Oy=Int32Array.from([Math.trunc(gn[0].getX()),Math.trunc(gn[1].getX())]);for(;gy<de;gy++){let Nb=cC.findGuardPattern(d,Oy[0],gy,Se,!1,Qe,Ks);if(Nb!=null&&Math.abs(Oy[0]-Nb[0])<cC.MAX_PATTERN_DRIFT&&Math.abs(Oy[1]-Nb[1])<cC.MAX_PATTERN_DRIFT)Oy=Nb,Cy=0;else{if(Cy>cC.SKIPPED_ROW_COUNT_MAX)break;Cy++}}gy-=Cy+1,gn[2]=new Wb(Oy[0],gy),gn[3]=new Wb(Oy[1],gy)}return gy-Ue<cC.BARCODE_MIN_HEIGHT&&vn.fill(gn,null),gn}static findGuardPattern(d,de,Se,Ue,Ge,Qe,gn){vn.fillWithin(gn,0,gn.length,0);let Bi=de,Ks=0;for(;d.get(Bi,Se)&&Bi>0&&Ks++<cC.MAX_PIXEL_DRIFT;)Bi--;let gy=Bi,Cy=0,Oy=Qe.length;for(let Nb=Ge;gy<Ue;gy++)if(d.get(gy,Se)!==Nb)gn[Cy]++;else{if(Cy===Oy-1){if(cC.patternMatchVariance(gn,Qe,cC.MAX_INDIVIDUAL_VARIANCE)<cC.MAX_AVG_VARIANCE)return new Int32Array([Bi,gy]);Bi+=gn[0]+gn[1],He.arraycopy(gn,2,gn,0,Cy-1),gn[Cy-1]=0,gn[Cy]=0,Cy--}else Cy++;gn[Cy]=1,Nb=!Nb}return Cy===Oy-1&&cC.patternMatchVariance(gn,Qe,cC.MAX_INDIVIDUAL_VARIANCE)<cC.MAX_AVG_VARIANCE?new Int32Array([Bi,gy-1]):null}static patternMatchVariance(d,de,Se){let Ue=d.length,Ge=0,Qe=0;for(let Ks=0;Ks<Ue;Ks++)Ge+=d[Ks],Qe+=de[Ks];if(Ge<Qe)return 1/0;let gn=Ge/Qe;Se*=gn;let Bi=0;for(let Ks=0;Ks<Ue;Ks++){let gy=d[Ks],Cy=de[Ks]*gn,Oy=gy>Cy?gy-Cy:Cy-gy;if(Oy>Se)return 1/0;Bi+=Oy}return Bi/Ge}}cC.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),cC.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),cC.MAX_AVG_VARIANCE=.42,cC.MAX_INDIVIDUAL_VARIANCE=.8,cC.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),cC.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),cC.MAX_PIXEL_DRIFT=3,cC.MAX_PATTERN_DRIFT=5,cC.SKIPPED_ROW_COUNT_MAX=25,cC.ROW_STEP=5,cC.BARCODE_MIN_HEIGHT=10;class cT{constructor(d,de){if(de.length===0)throw new m;this.field=d;let Se=de.length;if(Se>1&&de[0]===0){let Ue=1;for(;Ue<Se&&de[Ue]===0;)Ue++;Ue===Se?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(Se-Ue),He.arraycopy(de,Ue,this.coefficients,0,this.coefficients.length))}else this.coefficients=de}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(d){return this.coefficients[this.coefficients.length-1-d]}evaluateAt(d){if(d===0)return this.getCoefficient(0);if(d===1){let Ue=0;for(let Ge of this.coefficients)Ue=this.field.add(Ue,Ge);return Ue}let de=this.coefficients[0],Se=this.coefficients.length;for(let Ue=1;Ue<Se;Ue++)de=this.field.add(this.field.multiply(d,de),this.coefficients[Ue]);return de}add(d){if(!this.field.equals(d.field))throw new m("ModulusPolys do not have same ModulusGF field");if(this.isZero())return d;if(d.isZero())return this;let de=this.coefficients,Se=d.coefficients;if(de.length>Se.length){let Qe=de;de=Se,Se=Qe}let Ue=new Int32Array(Se.length),Ge=Se.length-de.length;He.arraycopy(Se,0,Ue,0,Ge);for(let Qe=Ge;Qe<Se.length;Qe++)Ue[Qe]=this.field.add(de[Qe-Ge],Se[Qe]);return new cT(this.field,Ue)}subtract(d){if(!this.field.equals(d.field))throw new m("ModulusPolys do not have same ModulusGF field");return d.isZero()?this:this.add(d.negative())}multiply(d){return d instanceof cT?this.multiplyOther(d):this.multiplyScalar(d)}multiplyOther(d){if(!this.field.equals(d.field))throw new m("ModulusPolys do not have same ModulusGF field");if(this.isZero()||d.isZero())return new cT(this.field,new Int32Array([0]));let de=this.coefficients,Se=de.length,Ue=d.coefficients,Ge=Ue.length,Qe=new Int32Array(Se+Ge-1);for(let gn=0;gn<Se;gn++){let Bi=de[gn];for(let Ks=0;Ks<Ge;Ks++)Qe[gn+Ks]=this.field.add(Qe[gn+Ks],this.field.multiply(Bi,Ue[Ks]))}return new cT(this.field,Qe)}negative(){let d=this.coefficients.length,de=new Int32Array(d);for(let Se=0;Se<d;Se++)de[Se]=this.field.subtract(0,this.coefficients[Se]);return new cT(this.field,de)}multiplyScalar(d){if(d===0)return new cT(this.field,new Int32Array([0]));if(d===1)return this;let de=this.coefficients.length,Se=new Int32Array(de);for(let Ue=0;Ue<de;Ue++)Se[Ue]=this.field.multiply(this.coefficients[Ue],d);return new cT(this.field,Se)}multiplyByMonomial(d,de){if(d<0)throw new m;if(de===0)return new cT(this.field,new Int32Array([0]));let Se=this.coefficients.length,Ue=new Int32Array(Se+d);for(let Ge=0;Ge<Se;Ge++)Ue[Ge]=this.field.multiply(this.coefficients[Ge],de);return new cT(this.field,Ue)}toString(){let d=new Bb;for(let de=this.getDegree();de>=0;de--){let Se=this.getCoefficient(de);Se!==0&&(Se<0?(d.append(" - "),Se=-Se):d.length()>0&&d.append(" + "),(de===0||Se!==1)&&d.append(Se),de!==0&&(de===1?d.append("x"):(d.append("x^"),d.append(de))))}return d.toString()}}class Y4{add(d,de){return(d+de)%this.modulus}subtract(d,de){return(this.modulus+d-de)%this.modulus}exp(d){return this.expTable[d]}log(d){if(d===0)throw new m;return this.logTable[d]}inverse(d){if(d===0)throw new A2;return this.expTable[this.modulus-this.logTable[d]-1]}multiply(d,de){return d===0||de===0?0:this.expTable[(this.logTable[d]+this.logTable[de])%(this.modulus-1)]}getSize(){return this.modulus}equals(d){return d===this}}class p6 extends Y4{constructor(d,de){super(),this.modulus=d,this.expTable=new Int32Array(d),this.logTable=new Int32Array(d);let Se=1;for(let Ue=0;Ue<d;Ue++)this.expTable[Ue]=Se,Se=Se*de%d;for(let Ue=0;Ue<d-1;Ue++)this.logTable[this.expTable[Ue]]=Ue;this.zero=new cT(this,new Int32Array([0])),this.one=new cT(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(d,de){if(d<0)throw new m;if(de===0)return this.zero;let Se=new Int32Array(d+1);return Se[0]=de,new cT(this,Se)}}p6.PDF417_GF=new p6(H2.NUMBER_OF_CODEWORDS,3);class h6{constructor(){this.field=p6.PDF417_GF}decode(d,de,Se){let Ue=new cT(this.field,d),Ge=new Int32Array(de),Qe=!1;for(let qb=de;qb>0;qb--){let Ub=Ue.evaluateAt(this.field.exp(qb));Ge[de-qb]=Ub,Ub!==0&&(Qe=!0)}if(!Qe)return 0;let gn=this.field.getOne();if(Se!=null)for(let qb of Se){let Ub=this.field.exp(d.length-1-qb),e2=new cT(this.field,new Int32Array([this.field.subtract(0,Ub),1]));gn=gn.multiply(e2)}let Bi=new cT(this.field,Ge),Ks=this.runEuclideanAlgorithm(this.field.buildMonomial(de,1),Bi,de),gy=Ks[0],Cy=Ks[1],Oy=this.findErrorLocations(gy),Nb=this.findErrorMagnitudes(Cy,gy,Oy);for(let qb=0;qb<Oy.length;qb++){let Ub=d.length-1-this.field.log(Oy[qb]);if(Ub<0)throw xe.getChecksumInstance();d[Ub]=this.field.subtract(d[Ub],Nb[qb])}return Oy.length}runEuclideanAlgorithm(d,de,Se){if(d.getDegree()<de.getDegree()){let Oy=d;d=de,de=Oy}let Ue=d,Ge=de,Qe=this.field.getZero(),gn=this.field.getOne();for(;Ge.getDegree()>=Math.round(Se/2);){let Oy=Ue,Nb=Qe;if(Ue=Ge,Qe=gn,Ue.isZero())throw xe.getChecksumInstance();Ge=Oy;let qb=this.field.getZero(),Ub=Ue.getCoefficient(Ue.getDegree()),e2=this.field.inverse(Ub);for(;Ge.getDegree()>=Ue.getDegree()&&!Ge.isZero();){let c2=Ge.getDegree()-Ue.getDegree(),k2=this.field.multiply(Ge.getCoefficient(Ge.getDegree()),e2);qb=qb.add(this.field.buildMonomial(c2,k2)),Ge=Ge.subtract(Ue.multiplyByMonomial(c2,k2))}gn=qb.multiply(Qe).subtract(Nb).negative()}let Bi=gn.getCoefficient(0);if(Bi===0)throw xe.getChecksumInstance();let Ks=this.field.inverse(Bi),gy=gn.multiply(Ks),Cy=Ge.multiply(Ks);return[gy,Cy]}findErrorLocations(d){let de=d.getDegree(),Se=new Int32Array(de),Ue=0;for(let Ge=1;Ge<this.field.getSize()&&Ue<de;Ge++)d.evaluateAt(Ge)===0&&(Se[Ue]=this.field.inverse(Ge),Ue++);if(Ue!==de)throw xe.getChecksumInstance();return Se}findErrorMagnitudes(d,de,Se){let Ue=de.getDegree(),Ge=new Int32Array(Ue);for(let Ks=1;Ks<=Ue;Ks++)Ge[Ue-Ks]=this.field.multiply(Ks,de.getCoefficient(Ks));let Qe=new cT(this.field,Ge),gn=Se.length,Bi=new Int32Array(gn);for(let Ks=0;Ks<gn;Ks++){let gy=this.field.inverse(Se[Ks]),Cy=this.field.subtract(0,d.evaluateAt(gy)),Oy=this.field.inverse(Qe.evaluateAt(gy));Bi[Ks]=this.field.multiply(Cy,Oy)}return Bi}}class BO{constructor(d,de,Se,Ue,Ge){d instanceof BO?this.constructor_2(d):this.constructor_1(d,de,Se,Ue,Ge)}constructor_1(d,de,Se,Ue,Ge){let Qe=de==null||Se==null,gn=Ue==null||Ge==null;if(Qe&&gn)throw new Bg;Qe?(de=new Wb(0,Ue.getY()),Se=new Wb(0,Ge.getY())):gn&&(Ue=new Wb(d.getWidth()-1,de.getY()),Ge=new Wb(d.getWidth()-1,Se.getY())),this.image=d,this.topLeft=de,this.bottomLeft=Se,this.topRight=Ue,this.bottomRight=Ge,this.minX=Math.trunc(Math.min(de.getX(),Se.getX())),this.maxX=Math.trunc(Math.max(Ue.getX(),Ge.getX())),this.minY=Math.trunc(Math.min(de.getY(),Ue.getY())),this.maxY=Math.trunc(Math.max(Se.getY(),Ge.getY()))}constructor_2(d){this.image=d.image,this.topLeft=d.getTopLeft(),this.bottomLeft=d.getBottomLeft(),this.topRight=d.getTopRight(),this.bottomRight=d.getBottomRight(),this.minX=d.getMinX(),this.maxX=d.getMaxX(),this.minY=d.getMinY(),this.maxY=d.getMaxY()}static merge(d,de){return d==null?de:de==null?d:new BO(d.image,d.topLeft,d.bottomLeft,de.topRight,de.bottomRight)}addMissingRows(d,de,Se){let Ue=this.topLeft,Ge=this.bottomLeft,Qe=this.topRight,gn=this.bottomRight;if(d>0){let Bi=Se?this.topLeft:this.topRight,Ks=Math.trunc(Bi.getY()-d);Ks<0&&(Ks=0);let gy=new Wb(Bi.getX(),Ks);Se?Ue=gy:Qe=gy}if(de>0){let Bi=Se?this.bottomLeft:this.bottomRight,Ks=Math.trunc(Bi.getY()+de);Ks>=this.image.getHeight()&&(Ks=this.image.getHeight()-1);let gy=new Wb(Bi.getX(),Ks);Se?Ge=gy:gn=gy}return new BO(this.image,Ue,Ge,Qe,gn)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class f6{constructor(d,de,Se,Ue){this.columnCount=d,this.errorCorrectionLevel=Ue,this.rowCountUpperPart=de,this.rowCountLowerPart=Se,this.rowCount=de+Se}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class N4{constructor(){this.buffer=""}static form(d,de){let Se=-1;function Ue(Qe,gn,Bi,Ks,gy,Cy){if(Qe==="%%")return"%";if(de[++Se]===void 0)return;Qe=Ks?parseInt(Ks.substr(1)):void 0;let Oy=gy?parseInt(gy.substr(1)):void 0,Nb;switch(Cy){case"s":Nb=de[Se];break;case"c":Nb=de[Se][0];break;case"f":Nb=parseFloat(de[Se]).toFixed(Qe);break;case"p":Nb=parseFloat(de[Se]).toPrecision(Qe);break;case"e":Nb=parseFloat(de[Se]).toExponential(Qe);break;case"x":Nb=parseInt(de[Se]).toString(Oy||16);break;case"d":Nb=parseFloat(parseInt(de[Se],Oy||10).toPrecision(Qe)).toFixed(0);break}Nb=typeof Nb=="object"?JSON.stringify(Nb):(+Nb).toString(Oy);let qb=parseInt(Bi),Ub=Bi&&Bi[0]+""=="0"?"0":" ";for(;Nb.length<qb;)Nb=gn!==void 0?Nb+Ub:Ub+Nb;return Nb}let Ge=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return d.replace(Ge,Ue)}format(d,...de){this.buffer+=N4.form(d,de)}toString(){return this.buffer}}class M4{constructor(d){this.boundingBox=new BO(d),this.codewords=new Array(d.getMaxY()-d.getMinY()+1)}getCodewordNearby(d){let de=this.getCodeword(d);if(de!=null)return de;for(let Se=1;Se<M4.MAX_NEARBY_DISTANCE;Se++){let Ue=this.imageRowToCodewordIndex(d)-Se;if(Ue>=0&&(de=this.codewords[Ue],de!=null)||(Ue=this.imageRowToCodewordIndex(d)+Se,Ue<this.codewords.length&&(de=this.codewords[Ue],de!=null)))return de}return null}imageRowToCodewordIndex(d){return d-this.boundingBox.getMinY()}setCodeword(d,de){this.codewords[this.imageRowToCodewordIndex(d)]=de}getCodeword(d){return this.codewords[this.imageRowToCodewordIndex(d)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){let d=new N4,de=0;for(let Se of this.codewords){if(Se==null){d.format("%3d:    |   %n",de++);continue}d.format("%3d: %3d|%3d%n",de++,Se.getRowNumber(),Se.getValue())}return d.toString()}}M4.MAX_NEARBY_DISTANCE=5;class S4{constructor(){this.values=new Map}setValue(d){d=Math.trunc(d);let de=this.values.get(d);de==null&&(de=0),de++,this.values.set(d,de)}getValue(){let d=-1,de=new Array;for(let[Se,Ue]of this.values.entries()){let Ge={getKey:()=>Se,getValue:()=>Ue};Ge.getValue()>d?(d=Ge.getValue(),de=[],de.push(Ge.getKey())):Ge.getValue()===d&&de.push(Ge.getKey())}return H2.toIntArray(de)}getConfidence(d){return this.values.get(d)}}class m6 extends M4{constructor(d,de){super(d),this._isLeft=de}setRowNumbers(){for(let d of this.getCodewords())d==null||d.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(d){let de=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(de,d);let Se=this.getBoundingBox(),Ue=this._isLeft?Se.getTopLeft():Se.getTopRight(),Ge=this._isLeft?Se.getBottomLeft():Se.getBottomRight(),Qe=this.imageRowToCodewordIndex(Math.trunc(Ue.getY())),gn=this.imageRowToCodewordIndex(Math.trunc(Ge.getY())),Bi=-1,Ks=1,gy=0;for(let Cy=Qe;Cy<gn;Cy++){if(de[Cy]==null)continue;let Oy=de[Cy],Nb=Oy.getRowNumber()-Bi;if(Nb===0)gy++;else if(Nb===1)Ks=Math.max(Ks,gy),gy=1,Bi=Oy.getRowNumber();else if(Nb<0||Oy.getRowNumber()>=d.getRowCount()||Nb>Cy)de[Cy]=null;else{let qb;Ks>2?qb=(Ks-2)*Nb:qb=Nb;let Ub=qb>=Cy;for(let e2=1;e2<=qb&&!Ub;e2++)Ub=de[Cy-e2]!=null;Ub?de[Cy]=null:(Bi=Oy.getRowNumber(),gy=1)}}}getRowHeights(){let d=this.getBarcodeMetadata();if(d==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(d);let de=new Int32Array(d.getRowCount());for(let Se of this.getCodewords())if(Se!=null){let Ue=Se.getRowNumber();if(Ue>=de.length)continue;de[Ue]++}return de}adjustIncompleteIndicatorColumnRowNumbers(d){let de=this.getBoundingBox(),Se=this._isLeft?de.getTopLeft():de.getTopRight(),Ue=this._isLeft?de.getBottomLeft():de.getBottomRight(),Ge=this.imageRowToCodewordIndex(Math.trunc(Se.getY())),Qe=this.imageRowToCodewordIndex(Math.trunc(Ue.getY())),gn=this.getCodewords(),Bi=-1;for(let Ks=Ge;Ks<Qe;Ks++){if(gn[Ks]==null)continue;let gy=gn[Ks];gy.setRowNumberAsRowIndicatorColumn();let Cy=gy.getRowNumber()-Bi;Cy===0||(Cy===1?Bi=gy.getRowNumber():gy.getRowNumber()>=d.getRowCount()?gn[Ks]=null:Bi=gy.getRowNumber())}}getBarcodeMetadata(){let d=this.getCodewords(),de=new S4,Se=new S4,Ue=new S4,Ge=new S4;for(let gn of d){if(gn==null)continue;gn.setRowNumberAsRowIndicatorColumn();let Bi=gn.getValue()%30,Ks=gn.getRowNumber();switch(this._isLeft||(Ks+=2),Ks%3){case 0:Se.setValue(Bi*3+1);break;case 1:Ge.setValue(Bi/3),Ue.setValue(Bi%3);break;case 2:de.setValue(Bi+1);break}}if(de.getValue().length===0||Se.getValue().length===0||Ue.getValue().length===0||Ge.getValue().length===0||de.getValue()[0]<1||Se.getValue()[0]+Ue.getValue()[0]<H2.MIN_ROWS_IN_BARCODE||Se.getValue()[0]+Ue.getValue()[0]>H2.MAX_ROWS_IN_BARCODE)return null;let Qe=new f6(de.getValue()[0],Se.getValue()[0],Ue.getValue()[0],Ge.getValue()[0]);return this.removeIncorrectCodewords(d,Qe),Qe}removeIncorrectCodewords(d,de){for(let Se=0;Se<d.length;Se++){let Ue=d[Se];if(d[Se]==null)continue;let Ge=Ue.getValue()%30,Qe=Ue.getRowNumber();if(Qe>de.getRowCount()){d[Se]=null;continue}switch(this._isLeft||(Qe+=2),Qe%3){case 0:Ge*3+1!==de.getRowCountUpperPart()&&(d[Se]=null);break;case 1:(Math.trunc(Ge/3)!==de.getErrorCorrectionLevel()||Ge%3!==de.getRowCountLowerPart())&&(d[Se]=null);break;case 2:Ge+1!==de.getColumnCount()&&(d[Se]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class qO{constructor(d,de){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=d,this.barcodeColumnCount=d.getColumnCount(),this.boundingBox=de,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let d=H2.MAX_CODEWORDS_IN_BARCODE,de;do de=d,d=this.adjustRowNumbersAndGetCount();while(d>0&&d<de);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(d){d==null||d.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let d=this.adjustRowNumbersByRow();if(d===0)return 0;for(let de=1;de<this.barcodeColumnCount+1;de++){let Se=this.detectionResultColumns[de].getCodewords();for(let Ue=0;Ue<Se.length;Ue++)Se[Ue]!=null&&(Se[Ue].hasValidRowNumber()||this.adjustRowNumbers(de,Ue,Se))}return d}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let d=this.detectionResultColumns[0].getCodewords(),de=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let Se=0;Se<d.length;Se++)if(d[Se]!=null&&de[Se]!=null&&d[Se].getRowNumber()===de[Se].getRowNumber())for(let Ue=1;Ue<=this.barcodeColumnCount;Ue++){let Ge=this.detectionResultColumns[Ue].getCodewords()[Se];Ge!=null&&(Ge.setRowNumber(d[Se].getRowNumber()),Ge.hasValidRowNumber()||(this.detectionResultColumns[Ue].getCodewords()[Se]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let d=0,de=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let Se=0;Se<de.length;Se++){if(de[Se]==null)continue;let Ue=de[Se].getRowNumber(),Ge=0;for(let Qe=this.barcodeColumnCount+1;Qe>0&&Ge<this.ADJUST_ROW_NUMBER_SKIP;Qe--){let gn=this.detectionResultColumns[Qe].getCodewords()[Se];gn!=null&&(Ge=qO.adjustRowNumberIfValid(Ue,Ge,gn),gn.hasValidRowNumber()||d++)}}return d}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let d=0,de=this.detectionResultColumns[0].getCodewords();for(let Se=0;Se<de.length;Se++){if(de[Se]==null)continue;let Ue=de[Se].getRowNumber(),Ge=0;for(let Qe=1;Qe<this.barcodeColumnCount+1&&Ge<this.ADJUST_ROW_NUMBER_SKIP;Qe++){let gn=this.detectionResultColumns[Qe].getCodewords()[Se];gn!=null&&(Ge=qO.adjustRowNumberIfValid(Ue,Ge,gn),gn.hasValidRowNumber()||d++)}}return d}static adjustRowNumberIfValid(d,de,Se){return Se==null||Se.hasValidRowNumber()||(Se.isValidRowNumber(d)?(Se.setRowNumber(d),de=0):++de),de}adjustRowNumbers(d,de,Se){let Ue=Se[de],Ge=this.detectionResultColumns[d-1].getCodewords(),Qe=Ge;this.detectionResultColumns[d+1]!=null&&(Qe=this.detectionResultColumns[d+1].getCodewords());let gn=new Array(14);gn[2]=Ge[de],gn[3]=Qe[de],de>0&&(gn[0]=Se[de-1],gn[4]=Ge[de-1],gn[5]=Qe[de-1]),de>1&&(gn[8]=Se[de-2],gn[10]=Ge[de-2],gn[11]=Qe[de-2]),de<Se.length-1&&(gn[1]=Se[de+1],gn[6]=Ge[de+1],gn[7]=Qe[de+1]),de<Se.length-2&&(gn[9]=Se[de+2],gn[12]=Ge[de+2],gn[13]=Qe[de+2]);for(let Bi of gn)if(qO.adjustRowNumber(Ue,Bi))return}static adjustRowNumber(d,de){return de==null?!1:de.hasValidRowNumber()&&de.getBucket()===d.getBucket()?(d.setRowNumber(de.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(d){this.boundingBox=d}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(d,de){this.detectionResultColumns[d]=de}getDetectionResultColumn(d){return this.detectionResultColumns[d]}toString(){let d=this.detectionResultColumns[0];d==null&&(d=this.detectionResultColumns[this.barcodeColumnCount+1]);let de=new N4;for(let Se=0;Se<d.getCodewords().length;Se++){de.format("CW %3d:",Se);for(let Ue=0;Ue<this.barcodeColumnCount+2;Ue++){if(this.detectionResultColumns[Ue]==null){de.format("    |   ");continue}let Ge=this.detectionResultColumns[Ue].getCodewords()[Se];if(Ge==null){de.format("    |   ");continue}de.format(" %3d|%3d",Ge.getRowNumber(),Ge.getValue())}de.format("%n")}return de.toString()}}class C4{constructor(d,de,Se,Ue){this.rowNumber=C4.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(d),this.endX=Math.trunc(de),this.bucket=Math.trunc(Se),this.value=Math.trunc(Ue)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(d){return d!==C4.BARCODE_ROW_UNKNOWN&&this.bucket===d%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(d){this.rowNumber=d}toString(){return this.rowNumber+"|"+this.value}}C4.BARCODE_ROW_UNKNOWN=-1;class nO{static initialize(){for(let d=0;d<H2.SYMBOL_TABLE.length;d++){let de=H2.SYMBOL_TABLE[d],Se=de&1;for(let Ue=0;Ue<H2.BARS_IN_MODULE;Ue++){let Ge=0;for(;(de&1)===Se;)Ge+=1,de>>=1;Se=de&1,nO.RATIOS_TABLE[d]||(nO.RATIOS_TABLE[d]=new Array(H2.BARS_IN_MODULE)),nO.RATIOS_TABLE[d][H2.BARS_IN_MODULE-Ue-1]=Math.fround(Ge/H2.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(d){let de=nO.getDecodedCodewordValue(nO.sampleBitCounts(d));return de!==-1?de:nO.getClosestDecodedValue(d)}static sampleBitCounts(d){let de=h2.sum(d),Se=new Int32Array(H2.BARS_IN_MODULE),Ue=0,Ge=0;for(let Qe=0;Qe<H2.MODULES_IN_CODEWORD;Qe++){let gn=de/(2*H2.MODULES_IN_CODEWORD)+Qe*de/H2.MODULES_IN_CODEWORD;Ge+d[Ue]<=gn&&(Ge+=d[Ue],Ue++),Se[Ue]++}return Se}static getDecodedCodewordValue(d){let de=nO.getBitValue(d);return H2.getCodeword(de)===-1?-1:de}static getBitValue(d){let de=0;for(let Se=0;Se<d.length;Se++)for(let Ue=0;Ue<d[Se];Ue++)de=de<<1|(Se%2===0?1:0);return Math.trunc(de)}static getClosestDecodedValue(d){let de=h2.sum(d),Se=new Array(H2.BARS_IN_MODULE);if(de>1)for(let Qe=0;Qe<Se.length;Qe++)Se[Qe]=Math.fround(d[Qe]/de);let Ue=g2.MAX_VALUE,Ge=-1;this.bSymbolTableReady||nO.initialize();for(let Qe=0;Qe<nO.RATIOS_TABLE.length;Qe++){let gn=0,Bi=nO.RATIOS_TABLE[Qe];for(let Ks=0;Ks<H2.BARS_IN_MODULE;Ks++){let gy=Math.fround(Bi[Ks]-Se[Ks]);if(gn+=Math.fround(gy*gy),gn>=Ue)break}gn<Ue&&(Ue=gn,Ge=H2.SYMBOL_TABLE[Qe])}return Ge}}nO.bSymbolTableReady=!1,nO.RATIOS_TABLE=new Array(H2.SYMBOL_TABLE.length).map(by=>new Array(H2.BARS_IN_MODULE));class g6{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(d){this.segmentIndex=d}getFileId(){return this.fileId}setFileId(d){this.fileId=d}getOptionalData(){return this.optionalData}setOptionalData(d){this.optionalData=d}isLastSegment(){return this.lastSegment}setLastSegment(d){this.lastSegment=d}getSegmentCount(){return this.segmentCount}setSegmentCount(d){this.segmentCount=d}getSender(){return this.sender||null}setSender(d){this.sender=d}getAddressee(){return this.addressee||null}setAddressee(d){this.addressee=d}getFileName(){return this.fileName}setFileName(d){this.fileName=d}getFileSize(){return this.fileSize}setFileSize(d){this.fileSize=d}getChecksum(){return this.checksum}setChecksum(d){this.checksum=d}getTimestamp(){return this.timestamp}setTimestamp(d){this.timestamp=d}}class O6{static parseLong(d,de=void 0){return parseInt(d,de)}}class x6 extends l{}x6.kind="NullPointerException";class j4{writeBytes(d){this.writeBytesOffset(d,0,d.length)}writeBytesOffset(d,de,Se){if(d==null)throw new x6;if(de<0||de>d.length||Se<0||de+Se>d.length||de+Se<0)throw new Ye;if(Se!==0)for(let Ue=0;Ue<Se;Ue++)this.write(d[de+Ue])}flush(){}close(){}}class P6 extends l{}class L4 extends j4{constructor(d=32){if(super(),this.count=0,d<0)throw new m("Negative initial size: "+d);this.buf=new Uint8Array(d)}ensureCapacity(d){d-this.buf.length>0&&this.grow(d)}grow(d){let de=this.buf.length<<1;if(de-d<0&&(de=d),de<0){if(d<0)throw new P6;de=La.MAX_VALUE}this.buf=vn.copyOfUint8Array(this.buf,de)}write(d){this.ensureCapacity(this.count+1),this.buf[this.count]=d,this.count+=1}writeBytesOffset(d,de,Se){if(de<0||de>d.length||Se<0||de+Se-d.length>0)throw new Ye;this.ensureCapacity(this.count+Se),He.arraycopy(d,de,this.buf,this.count,Se),this.count+=Se}writeTo(d){d.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return vn.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(d){return d?typeof d=="string"?this.toString_string(d):this.toString_number(d):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(d){return new String(this.buf).toString()}toString_number(d){return new String(this.buf).toString()}close(){}}var CC;(function(by){by[by.ALPHA=0]="ALPHA",by[by.LOWER=1]="LOWER",by[by.MIXED=2]="MIXED",by[by.PUNCT=3]="PUNCT",by[by.ALPHA_SHIFT=4]="ALPHA_SHIFT",by[by.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(CC||(CC={}));function I6(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let X4;function ZO(by){if(typeof X4>"u"&&(X4=I6()),X4===null)throw new Error("BigInt is not supported!");return X4(by)}function R6(){let by=[];by[0]=ZO(1);let d=ZO(900);by[1]=d;for(let de=2;de<16;de++)by[de]=by[de-1]*d;return by}class u2{static decode(d,de){let Se=new Bb(""),Ue=lc.ISO8859_1;Se.enableDecoding(Ue);let Ge=1,Qe=d[Ge++],gn=new g6;for(;Ge<d[0];){switch(Qe){case u2.TEXT_COMPACTION_MODE_LATCH:Ge=u2.textCompaction(d,Ge,Se);break;case u2.BYTE_COMPACTION_MODE_LATCH:case u2.BYTE_COMPACTION_MODE_LATCH_6:Ge=u2.byteCompaction(Qe,d,Ue,Ge,Se);break;case u2.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:Se.append(d[Ge++]);break;case u2.NUMERIC_COMPACTION_MODE_LATCH:Ge=u2.numericCompaction(d,Ge,Se);break;case u2.ECI_CHARSET:lc.getCharacterSetECIByValue(d[Ge++]);break;case u2.ECI_GENERAL_PURPOSE:Ge+=2;break;case u2.ECI_USER_DEFINED:Ge++;break;case u2.BEGIN_MACRO_PDF417_CONTROL_BLOCK:Ge=u2.decodeMacroBlock(d,Ge,gn);break;case u2.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case u2.MACRO_PDF417_TERMINATOR:throw new za;default:Ge--,Ge=u2.textCompaction(d,Ge,Se);break}if(Ge<d.length)Qe=d[Ge++];else throw za.getFormatInstance()}if(Se.length()===0)throw za.getFormatInstance();let Bi=new E2(null,Se.toString(),null,de);return Bi.setOther(gn),Bi}static decodeMacroBlock(d,de,Se){if(de+u2.NUMBER_OF_SEQUENCE_CODEWORDS>d[0])throw za.getFormatInstance();let Ue=new Int32Array(u2.NUMBER_OF_SEQUENCE_CODEWORDS);for(let gn=0;gn<u2.NUMBER_OF_SEQUENCE_CODEWORDS;gn++,de++)Ue[gn]=d[de];Se.setSegmentIndex(La.parseInt(u2.decodeBase900toBase10(Ue,u2.NUMBER_OF_SEQUENCE_CODEWORDS)));let Ge=new Bb;de=u2.textCompaction(d,de,Ge),Se.setFileId(Ge.toString());let Qe=-1;for(d[de]===u2.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(Qe=de+1);de<d[0];)switch(d[de]){case u2.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(de++,d[de]){case u2.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let gn=new Bb;de=u2.textCompaction(d,de+1,gn),Se.setFileName(gn.toString());break;case u2.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let Bi=new Bb;de=u2.textCompaction(d,de+1,Bi),Se.setSender(Bi.toString());break;case u2.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let Ks=new Bb;de=u2.textCompaction(d,de+1,Ks),Se.setAddressee(Ks.toString());break;case u2.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let gy=new Bb;de=u2.numericCompaction(d,de+1,gy),Se.setSegmentCount(La.parseInt(gy.toString()));break;case u2.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let Cy=new Bb;de=u2.numericCompaction(d,de+1,Cy),Se.setTimestamp(O6.parseLong(Cy.toString()));break;case u2.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let Oy=new Bb;de=u2.numericCompaction(d,de+1,Oy),Se.setChecksum(La.parseInt(Oy.toString()));break;case u2.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let Nb=new Bb;de=u2.numericCompaction(d,de+1,Nb),Se.setFileSize(O6.parseLong(Nb.toString()));break;default:throw za.getFormatInstance()}break;case u2.MACRO_PDF417_TERMINATOR:de++,Se.setLastSegment(!0);break;default:throw za.getFormatInstance()}if(Qe!==-1){let gn=de-Qe;Se.isLastSegment()&&gn--,Se.setOptionalData(vn.copyOfRange(d,Qe,Qe+gn))}return de}static textCompaction(d,de,Se){let Ue=new Int32Array((d[0]-de)*2),Ge=new Int32Array((d[0]-de)*2),Qe=0,gn=!1;for(;de<d[0]&&!gn;){let Bi=d[de++];if(Bi<u2.TEXT_COMPACTION_MODE_LATCH)Ue[Qe]=Bi/30,Ue[Qe+1]=Bi%30,Qe+=2;else switch(Bi){case u2.TEXT_COMPACTION_MODE_LATCH:Ue[Qe++]=u2.TEXT_COMPACTION_MODE_LATCH;break;case u2.BYTE_COMPACTION_MODE_LATCH:case u2.BYTE_COMPACTION_MODE_LATCH_6:case u2.NUMERIC_COMPACTION_MODE_LATCH:case u2.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case u2.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case u2.MACRO_PDF417_TERMINATOR:de--,gn=!0;break;case u2.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:Ue[Qe]=u2.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,Bi=d[de++],Ge[Qe]=Bi,Qe++;break}}return u2.decodeTextCompaction(Ue,Ge,Qe,Se),de}static decodeTextCompaction(d,de,Se,Ue){let Ge=CC.ALPHA,Qe=CC.ALPHA,gn=0;for(;gn<Se;){let Bi=d[gn],Ks="";switch(Ge){case CC.ALPHA:if(Bi<26)Ks=String.fromCharCode(65+Bi);else switch(Bi){case 26:Ks=" ";break;case u2.LL:Ge=CC.LOWER;break;case u2.ML:Ge=CC.MIXED;break;case u2.PS:Qe=Ge,Ge=CC.PUNCT_SHIFT;break;case u2.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:Ue.append(de[gn]);break;case u2.TEXT_COMPACTION_MODE_LATCH:Ge=CC.ALPHA;break}break;case CC.LOWER:if(Bi<26)Ks=String.fromCharCode(97+Bi);else switch(Bi){case 26:Ks=" ";break;case u2.AS:Qe=Ge,Ge=CC.ALPHA_SHIFT;break;case u2.ML:Ge=CC.MIXED;break;case u2.PS:Qe=Ge,Ge=CC.PUNCT_SHIFT;break;case u2.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:Ue.append(de[gn]);break;case u2.TEXT_COMPACTION_MODE_LATCH:Ge=CC.ALPHA;break}break;case CC.MIXED:if(Bi<u2.PL)Ks=u2.MIXED_CHARS[Bi];else switch(Bi){case u2.PL:Ge=CC.PUNCT;break;case 26:Ks=" ";break;case u2.LL:Ge=CC.LOWER;break;case u2.AL:Ge=CC.ALPHA;break;case u2.PS:Qe=Ge,Ge=CC.PUNCT_SHIFT;break;case u2.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:Ue.append(de[gn]);break;case u2.TEXT_COMPACTION_MODE_LATCH:Ge=CC.ALPHA;break}break;case CC.PUNCT:if(Bi<u2.PAL)Ks=u2.PUNCT_CHARS[Bi];else switch(Bi){case u2.PAL:Ge=CC.ALPHA;break;case u2.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:Ue.append(de[gn]);break;case u2.TEXT_COMPACTION_MODE_LATCH:Ge=CC.ALPHA;break}break;case CC.ALPHA_SHIFT:if(Ge=Qe,Bi<26)Ks=String.fromCharCode(65+Bi);else switch(Bi){case 26:Ks=" ";break;case u2.TEXT_COMPACTION_MODE_LATCH:Ge=CC.ALPHA;break}break;case CC.PUNCT_SHIFT:if(Ge=Qe,Bi<u2.PAL)Ks=u2.PUNCT_CHARS[Bi];else switch(Bi){case u2.PAL:Ge=CC.ALPHA;break;case u2.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:Ue.append(de[gn]);break;case u2.TEXT_COMPACTION_MODE_LATCH:Ge=CC.ALPHA;break}break}Ks!==""&&Ue.append(Ks),gn++}}static byteCompaction(d,de,Se,Ue,Ge){let Qe=new L4,gn=0,Bi=0,Ks=!1;switch(d){case u2.BYTE_COMPACTION_MODE_LATCH:let gy=new Int32Array(6),Cy=de[Ue++];for(;Ue<de[0]&&!Ks;)switch(gy[gn++]=Cy,Bi=900*Bi+Cy,Cy=de[Ue++],Cy){case u2.TEXT_COMPACTION_MODE_LATCH:case u2.BYTE_COMPACTION_MODE_LATCH:case u2.NUMERIC_COMPACTION_MODE_LATCH:case u2.BYTE_COMPACTION_MODE_LATCH_6:case u2.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case u2.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case u2.MACRO_PDF417_TERMINATOR:Ue--,Ks=!0;break;default:if(gn%5===0&&gn>0){for(let Oy=0;Oy<6;++Oy)Qe.write(Number(ZO(Bi)>>ZO(8*(5-Oy))));Bi=0,gn=0}break}Ue===de[0]&&Cy<u2.TEXT_COMPACTION_MODE_LATCH&&(gy[gn++]=Cy);for(let Oy=0;Oy<gn;Oy++)Qe.write(gy[Oy]);break;case u2.BYTE_COMPACTION_MODE_LATCH_6:for(;Ue<de[0]&&!Ks;){let Oy=de[Ue++];if(Oy<u2.TEXT_COMPACTION_MODE_LATCH)gn++,Bi=900*Bi+Oy;else switch(Oy){case u2.TEXT_COMPACTION_MODE_LATCH:case u2.BYTE_COMPACTION_MODE_LATCH:case u2.NUMERIC_COMPACTION_MODE_LATCH:case u2.BYTE_COMPACTION_MODE_LATCH_6:case u2.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case u2.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case u2.MACRO_PDF417_TERMINATOR:Ue--,Ks=!0;break}if(gn%5===0&&gn>0){for(let Nb=0;Nb<6;++Nb)Qe.write(Number(ZO(Bi)>>ZO(8*(5-Nb))));Bi=0,gn=0}}break}return Ge.append(_y.decode(Qe.toByteArray(),Se)),Ue}static numericCompaction(d,de,Se){let Ue=0,Ge=!1,Qe=new Int32Array(u2.MAX_NUMERIC_CODEWORDS);for(;de<d[0]&&!Ge;){let gn=d[de++];if(de===d[0]&&(Ge=!0),gn<u2.TEXT_COMPACTION_MODE_LATCH)Qe[Ue]=gn,Ue++;else switch(gn){case u2.TEXT_COMPACTION_MODE_LATCH:case u2.BYTE_COMPACTION_MODE_LATCH:case u2.BYTE_COMPACTION_MODE_LATCH_6:case u2.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case u2.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case u2.MACRO_PDF417_TERMINATOR:de--,Ge=!0;break}(Ue%u2.MAX_NUMERIC_CODEWORDS===0||gn===u2.NUMERIC_COMPACTION_MODE_LATCH||Ge)&&Ue>0&&(Se.append(u2.decodeBase900toBase10(Qe,Ue)),Ue=0)}return de}static decodeBase900toBase10(d,de){let Se=ZO(0);for(let Ge=0;Ge<de;Ge++)Se+=u2.EXP900[de-Ge-1]*ZO(d[Ge]);let Ue=Se.toString();if(Ue.charAt(0)!=="1")throw new za;return Ue.substring(1)}}u2.TEXT_COMPACTION_MODE_LATCH=900,u2.BYTE_COMPACTION_MODE_LATCH=901,u2.NUMERIC_COMPACTION_MODE_LATCH=902,u2.BYTE_COMPACTION_MODE_LATCH_6=924,u2.ECI_USER_DEFINED=925,u2.ECI_GENERAL_PURPOSE=926,u2.ECI_CHARSET=927,u2.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,u2.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,u2.MACRO_PDF417_TERMINATOR=922,u2.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,u2.MAX_NUMERIC_CODEWORDS=15,u2.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,u2.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,u2.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,u2.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,u2.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,u2.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,u2.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,u2.PL=25,u2.LL=27,u2.AS=27,u2.ML=28,u2.AL=28,u2.PS=29,u2.PAL=29,u2.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,u2.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",u2.EXP900=I6()?R6():[],u2.NUMBER_OF_SEQUENCE_CODEWORDS=2;class pC{constructor(){}static decode(d,de,Se,Ue,Ge,Qe,gn){let Bi=new BO(d,de,Se,Ue,Ge),Ks=null,gy=null,Cy;for(let qb=!0;;qb=!1){if(de!=null&&(Ks=pC.getRowIndicatorColumn(d,Bi,de,!0,Qe,gn)),Ue!=null&&(gy=pC.getRowIndicatorColumn(d,Bi,Ue,!1,Qe,gn)),Cy=pC.merge(Ks,gy),Cy==null)throw Bg.getNotFoundInstance();let Ub=Cy.getBoundingBox();if(qb&&Ub!=null&&(Ub.getMinY()<Bi.getMinY()||Ub.getMaxY()>Bi.getMaxY()))Bi=Ub;else break}Cy.setBoundingBox(Bi);let Oy=Cy.getBarcodeColumnCount()+1;Cy.setDetectionResultColumn(0,Ks),Cy.setDetectionResultColumn(Oy,gy);let Nb=Ks!=null;for(let qb=1;qb<=Oy;qb++){let Ub=Nb?qb:Oy-qb;if(Cy.getDetectionResultColumn(Ub)!==void 0)continue;let e2;Ub===0||Ub===Oy?e2=new m6(Bi,Ub===0):e2=new M4(Bi),Cy.setDetectionResultColumn(Ub,e2);let c2=-1,k2=c2;for(let $2=Bi.getMinY();$2<=Bi.getMaxY();$2++){if(c2=pC.getStartColumn(Cy,Ub,$2,Nb),c2<0||c2>Bi.getMaxX()){if(k2===-1)continue;c2=k2}let _2=pC.detectCodeword(d,Bi.getMinX(),Bi.getMaxX(),Nb,c2,$2,Qe,gn);_2!=null&&(e2.setCodeword($2,_2),k2=c2,Qe=Math.min(Qe,_2.getWidth()),gn=Math.max(gn,_2.getWidth()))}}return pC.createDecoderResult(Cy)}static merge(d,de){if(d==null&&de==null)return null;let Se=pC.getBarcodeMetadata(d,de);if(Se==null)return null;let Ue=BO.merge(pC.adjustBoundingBox(d),pC.adjustBoundingBox(de));return new qO(Se,Ue)}static adjustBoundingBox(d){if(d==null)return null;let de=d.getRowHeights();if(de==null)return null;let Se=pC.getMax(de),Ue=0;for(let gn of de)if(Ue+=Se-gn,gn>0)break;let Ge=d.getCodewords();for(let gn=0;Ue>0&&Ge[gn]==null;gn++)Ue--;let Qe=0;for(let gn=de.length-1;gn>=0&&(Qe+=Se-de[gn],!(de[gn]>0));gn--);for(let gn=Ge.length-1;Qe>0&&Ge[gn]==null;gn--)Qe--;return d.getBoundingBox().addMissingRows(Ue,Qe,d.isLeft())}static getMax(d){let de=-1;for(let Se of d)de=Math.max(de,Se);return de}static getBarcodeMetadata(d,de){let Se;if(d==null||(Se=d.getBarcodeMetadata())==null)return de==null?null:de.getBarcodeMetadata();let Ue;return de==null||(Ue=de.getBarcodeMetadata())==null?Se:Se.getColumnCount()!==Ue.getColumnCount()&&Se.getErrorCorrectionLevel()!==Ue.getErrorCorrectionLevel()&&Se.getRowCount()!==Ue.getRowCount()?null:Se}static getRowIndicatorColumn(d,de,Se,Ue,Ge,Qe){let gn=new m6(de,Ue);for(let Bi=0;Bi<2;Bi++){let Ks=Bi===0?1:-1,gy=Math.trunc(Math.trunc(Se.getX()));for(let Cy=Math.trunc(Math.trunc(Se.getY()));Cy<=de.getMaxY()&&Cy>=de.getMinY();Cy+=Ks){let Oy=pC.detectCodeword(d,0,d.getWidth(),Ue,gy,Cy,Ge,Qe);Oy!=null&&(gn.setCodeword(Cy,Oy),Ue?gy=Oy.getStartX():gy=Oy.getEndX())}}return gn}static adjustCodewordCount(d,de){let Se=de[0][1],Ue=Se.getValue(),Ge=d.getBarcodeColumnCount()*d.getBarcodeRowCount()-pC.getNumberOfECCodeWords(d.getBarcodeECLevel());if(Ue.length===0){if(Ge<1||Ge>H2.MAX_CODEWORDS_IN_BARCODE)throw Bg.getNotFoundInstance();Se.setValue(Ge)}else Ue[0]!==Ge&&Se.setValue(Ge)}static createDecoderResult(d){let de=pC.createBarcodeMatrix(d);pC.adjustCodewordCount(d,de);let Se=new Array,Ue=new Int32Array(d.getBarcodeRowCount()*d.getBarcodeColumnCount()),Ge=[],Qe=new Array;for(let Bi=0;Bi<d.getBarcodeRowCount();Bi++)for(let Ks=0;Ks<d.getBarcodeColumnCount();Ks++){let gy=de[Bi][Ks+1].getValue(),Cy=Bi*d.getBarcodeColumnCount()+Ks;gy.length===0?Se.push(Cy):gy.length===1?Ue[Cy]=gy[0]:(Qe.push(Cy),Ge.push(gy))}let gn=new Array(Ge.length);for(let Bi=0;Bi<gn.length;Bi++)gn[Bi]=Ge[Bi];return pC.createDecoderResultFromAmbiguousValues(d.getBarcodeECLevel(),Ue,H2.toIntArray(Se),H2.toIntArray(Qe),gn)}static createDecoderResultFromAmbiguousValues(d,de,Se,Ue,Ge){let Qe=new Int32Array(Ue.length),gn=100;for(;gn-- >0;){for(let Bi=0;Bi<Qe.length;Bi++)de[Ue[Bi]]=Ge[Bi][Qe[Bi]];try{return pC.decodeCodewords(de,d,Se)}catch(Bi){if(!(Bi instanceof xe))throw Bi}if(Qe.length===0)throw xe.getChecksumInstance();for(let Bi=0;Bi<Qe.length;Bi++)if(Qe[Bi]<Ge[Bi].length-1){Qe[Bi]++;break}else if(Qe[Bi]=0,Bi===Qe.length-1)throw xe.getChecksumInstance()}throw xe.getChecksumInstance()}static createBarcodeMatrix(d){let de=Array.from({length:d.getBarcodeRowCount()},()=>new Array(d.getBarcodeColumnCount()+2));for(let Ue=0;Ue<de.length;Ue++)for(let Ge=0;Ge<de[Ue].length;Ge++)de[Ue][Ge]=new S4;let Se=0;for(let Ue of d.getDetectionResultColumns()){if(Ue!=null){for(let Ge of Ue.getCodewords())if(Ge!=null){let Qe=Ge.getRowNumber();if(Qe>=0){if(Qe>=de.length)continue;de[Qe][Se].setValue(Ge.getValue())}}}Se++}return de}static isValidBarcodeColumn(d,de){return de>=0&&de<=d.getBarcodeColumnCount()+1}static getStartColumn(d,de,Se,Ue){let Ge=Ue?1:-1,Qe=null;if(pC.isValidBarcodeColumn(d,de-Ge)&&(Qe=d.getDetectionResultColumn(de-Ge).getCodeword(Se)),Qe!=null)return Ue?Qe.getEndX():Qe.getStartX();if(Qe=d.getDetectionResultColumn(de).getCodewordNearby(Se),Qe!=null)return Ue?Qe.getStartX():Qe.getEndX();if(pC.isValidBarcodeColumn(d,de-Ge)&&(Qe=d.getDetectionResultColumn(de-Ge).getCodewordNearby(Se)),Qe!=null)return Ue?Qe.getEndX():Qe.getStartX();let gn=0;for(;pC.isValidBarcodeColumn(d,de-Ge);){de-=Ge;for(let Bi of d.getDetectionResultColumn(de).getCodewords())if(Bi!=null)return(Ue?Bi.getEndX():Bi.getStartX())+Ge*gn*(Bi.getEndX()-Bi.getStartX());gn++}return Ue?d.getBoundingBox().getMinX():d.getBoundingBox().getMaxX()}static detectCodeword(d,de,Se,Ue,Ge,Qe,gn,Bi){Ge=pC.adjustCodewordStartColumn(d,de,Se,Ue,Ge,Qe);let Ks=pC.getModuleBitCount(d,de,Se,Ue,Ge,Qe);if(Ks==null)return null;let gy,Cy=h2.sum(Ks);if(Ue)gy=Ge+Cy;else{for(let qb=0;qb<Ks.length/2;qb++){let Ub=Ks[qb];Ks[qb]=Ks[Ks.length-1-qb],Ks[Ks.length-1-qb]=Ub}gy=Ge,Ge=gy-Cy}if(!pC.checkCodewordSkew(Cy,gn,Bi))return null;let Oy=nO.getDecodedValue(Ks),Nb=H2.getCodeword(Oy);return Nb===-1?null:new C4(Ge,gy,pC.getCodewordBucketNumber(Oy),Nb)}static getModuleBitCount(d,de,Se,Ue,Ge,Qe){let gn=Ge,Bi=new Int32Array(8),Ks=0,gy=Ue?1:-1,Cy=Ue;for(;(Ue?gn<Se:gn>=de)&&Ks<Bi.length;)d.get(gn,Qe)===Cy?(Bi[Ks]++,gn+=gy):(Ks++,Cy=!Cy);return Ks===Bi.length||gn===(Ue?Se:de)&&Ks===Bi.length-1?Bi:null}static getNumberOfECCodeWords(d){return 2<<d}static adjustCodewordStartColumn(d,de,Se,Ue,Ge,Qe){let gn=Ge,Bi=Ue?-1:1;for(let Ks=0;Ks<2;Ks++){for(;(Ue?gn>=de:gn<Se)&&Ue===d.get(gn,Qe);){if(Math.abs(Ge-gn)>pC.CODEWORD_SKEW_SIZE)return Ge;gn+=Bi}Bi=-Bi,Ue=!Ue}return gn}static checkCodewordSkew(d,de,Se){return de-pC.CODEWORD_SKEW_SIZE<=d&&d<=Se+pC.CODEWORD_SKEW_SIZE}static decodeCodewords(d,de,Se){if(d.length===0)throw za.getFormatInstance();let Ue=1<<de+1,Ge=pC.correctErrors(d,Se,Ue);pC.verifyCodewordCount(d,Ue);let Qe=u2.decode(d,""+de);return Qe.setErrorsCorrected(Ge),Qe.setErasures(Se.length),Qe}static correctErrors(d,de,Se){if(de!=null&&de.length>Se/2+pC.MAX_ERRORS||Se<0||Se>pC.MAX_EC_CODEWORDS)throw xe.getChecksumInstance();return pC.errorCorrection.decode(d,Se,de)}static verifyCodewordCount(d,de){if(d.length<4)throw za.getFormatInstance();let Se=d[0];if(Se>d.length)throw za.getFormatInstance();if(Se===0)if(de<d.length)d[0]=d.length-de;else throw za.getFormatInstance()}static getBitCountForCodeword(d){let de=new Int32Array(8),Se=0,Ue=de.length-1;for(;!((d&1)!==Se&&(Se=d&1,Ue--,Ue<0));)de[Ue]++,d>>=1;return de}static getCodewordBucketNumber(d){return d instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(d):this.getCodewordBucketNumber_number(d)}static getCodewordBucketNumber_number(d){return pC.getCodewordBucketNumber(pC.getBitCountForCodeword(d))}static getCodewordBucketNumber_Int32Array(d){return(d[0]-d[2]+d[4]-d[6]+9)%9}static toString(d){let de=new N4;for(let Se=0;Se<d.length;Se++){de.format("Row %2d: ",Se);for(let Ue=0;Ue<d[Se].length;Ue++){let Ge=d[Se][Ue];Ge.getValue().length===0?de.format("        ",null):de.format("%4d(%2d)",Ge.getValue()[0],Ge.getConfidence(Ge.getValue()[0]))}de.format("%n")}return de.toString()}}pC.CODEWORD_SKEW_SIZE=2,pC.MAX_ERRORS=3,pC.MAX_EC_CODEWORDS=512,pC.errorCorrection=new h6;class pT{decode(d,de=null){let Se=pT.decode(d,de,!1);if(Se==null||Se.length===0||Se[0]==null)throw Bg.getNotFoundInstance();return Se[0]}decodeMultiple(d,de=null){try{return pT.decode(d,de,!0)}catch(Se){throw Se instanceof za||Se instanceof xe?Bg.getNotFoundInstance():Se}}static decode(d,de,Se){let Ue=new Array,Ge=cC.detectMultiple(d,de,Se);for(let Qe of Ge.getPoints()){let gn=pC.decode(Ge.getBits(),Qe[4],Qe[5],Qe[6],Qe[7],pT.getMinCodewordWidth(Qe),pT.getMaxCodewordWidth(Qe)),Bi=new l2(gn.getText(),gn.getRawBytes(),void 0,Qe,Rb.PDF_417);Bi.putMetadata(s2.ERROR_CORRECTION_LEVEL,gn.getECLevel());let Ks=gn.getOther();Ks!=null&&Bi.putMetadata(s2.PDF417_EXTRA_METADATA,Ks),Ue.push(Bi)}return Ue.map(Qe=>Qe)}static getMaxWidth(d,de){return d==null||de==null?0:Math.trunc(Math.abs(d.getX()-de.getX()))}static getMinWidth(d,de){return d==null||de==null?La.MAX_VALUE:Math.trunc(Math.abs(d.getX()-de.getX()))}static getMaxCodewordWidth(d){return Math.floor(Math.max(Math.max(pT.getMaxWidth(d[0],d[4]),pT.getMaxWidth(d[6],d[2])*H2.MODULES_IN_CODEWORD/H2.MODULES_IN_STOP_PATTERN),Math.max(pT.getMaxWidth(d[1],d[5]),pT.getMaxWidth(d[7],d[3])*H2.MODULES_IN_CODEWORD/H2.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(d){return Math.floor(Math.min(Math.min(pT.getMinWidth(d[0],d[4]),pT.getMinWidth(d[6],d[2])*H2.MODULES_IN_CODEWORD/H2.MODULES_IN_STOP_PATTERN),Math.min(pT.getMinWidth(d[1],d[5]),pT.getMinWidth(d[7],d[3])*H2.MODULES_IN_CODEWORD/H2.MODULES_IN_STOP_PATTERN)))}reset(){}}class J4 extends l{}J4.kind="ReaderException";class N6{constructor(d,de){this.verbose=d===!0,de&&this.setHints(de)}decode(d,de){return de&&this.setHints(de),this.decodeInternal(d)}decodeWithState(d){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(d)}setHints(d){this.hints=d;let de=d!=null&&d.get(zs.TRY_HARDER)!==void 0,Se=d==null?null:d.get(zs.POSSIBLE_FORMATS),Ue=new Array;if(Se!=null){let Ge=Se.some(Qe=>Qe===Rb.UPC_A||Qe===Rb.UPC_E||Qe===Rb.EAN_13||Qe===Rb.EAN_8||Qe===Rb.CODABAR||Qe===Rb.CODE_39||Qe===Rb.CODE_93||Qe===Rb.CODE_128||Qe===Rb.ITF||Qe===Rb.RSS_14||Qe===Rb.RSS_EXPANDED);Ge&&!de&&Ue.push(new xT(d,this.verbose)),Se.includes(Rb.QR_CODE)&&Ue.push(new XO),Se.includes(Rb.DATA_MATRIX)&&Ue.push(new vT),Se.includes(Rb.AZTEC)&&Ue.push(new n2),Se.includes(Rb.PDF_417)&&Ue.push(new pT),Ge&&de&&Ue.push(new xT(d,this.verbose))}Ue.length===0&&(de||Ue.push(new xT(d,this.verbose)),Ue.push(new XO),Ue.push(new vT),Ue.push(new n2),Ue.push(new pT),de&&Ue.push(new xT(d,this.verbose))),this.readers=Ue}reset(){if(this.readers!==null)for(let d of this.readers)d.reset()}decodeInternal(d){if(this.readers===null)throw new J4("No readers where selected, nothing can be read.");for(let de of this.readers)try{return de.decode(d,this.hints)}catch(Se){if(Se instanceof J4)continue}throw new Bg("No MultiFormat Readers were able to detect the code.")}}class J6 extends Jb{constructor(d=null,de=500){let Se=new N6;Se.setHints(d),super(Se,de)}decodeBitmap(d){return this.reader.decodeWithState(d)}}class Z6 extends Jb{constructor(d=500){super(new pT,d)}}class e5 extends Jb{constructor(d=500){super(new XO,d)}}var v6;(function(by){by[by.ERROR_CORRECTION=0]="ERROR_CORRECTION",by[by.CHARACTER_SET=1]="CHARACTER_SET",by[by.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",by[by.MIN_SIZE=3]="MIN_SIZE",by[by.MAX_SIZE=4]="MAX_SIZE",by[by.MARGIN=5]="MARGIN",by[by.PDF417_COMPACT=6]="PDF417_COMPACT",by[by.PDF417_COMPACTION=7]="PDF417_COMPACTION",by[by.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",by[by.AZTEC_LAYERS=9]="AZTEC_LAYERS",by[by.QR_VERSION=10]="QR_VERSION"})(v6||(v6={}));var JC=v6;class y6{constructor(d){this.field=d,this.cachedGenerators=[],this.cachedGenerators.push(new T2(d,Int32Array.from([1])))}buildGenerator(d){let de=this.cachedGenerators;if(d>=de.length){let Se=de[de.length-1],Ue=this.field;for(let Ge=de.length;Ge<=d;Ge++){let Qe=Se.multiply(new T2(Ue,Int32Array.from([1,Ue.exp(Ge-1+Ue.getGeneratorBase())])));de.push(Qe),Se=Qe}}return de[d]}encode(d,de){if(de===0)throw new m("No error correction bytes");let Se=d.length-de;if(Se<=0)throw new m("No data bytes provided");let Ue=this.buildGenerator(de),Ge=new Int32Array(Se);He.arraycopy(d,0,Ge,0,Se);let Qe=new T2(this.field,Ge);Qe=Qe.multiplyByMonomial(de,1);let gn=Qe.divide(Ue)[1].getCoefficients(),Bi=de-gn.length;for(let Ks=0;Ks<Bi;Ks++)d[Se+Ks]=0;He.arraycopy(gn,0,d,Se+Bi,gn.length)}}class UC{constructor(){}static applyMaskPenaltyRule1(d){return UC.applyMaskPenaltyRule1Internal(d,!0)+UC.applyMaskPenaltyRule1Internal(d,!1)}static applyMaskPenaltyRule2(d){let de=0,Se=d.getArray(),Ue=d.getWidth(),Ge=d.getHeight();for(let Qe=0;Qe<Ge-1;Qe++){let gn=Se[Qe];for(let Bi=0;Bi<Ue-1;Bi++){let Ks=gn[Bi];Ks===gn[Bi+1]&&Ks===Se[Qe+1][Bi]&&Ks===Se[Qe+1][Bi+1]&&de++}}return UC.N2*de}static applyMaskPenaltyRule3(d){let de=0,Se=d.getArray(),Ue=d.getWidth(),Ge=d.getHeight();for(let Qe=0;Qe<Ge;Qe++)for(let gn=0;gn<Ue;gn++){let Bi=Se[Qe];gn+6<Ue&&Bi[gn]===1&&Bi[gn+1]===0&&Bi[gn+2]===1&&Bi[gn+3]===1&&Bi[gn+4]===1&&Bi[gn+5]===0&&Bi[gn+6]===1&&(UC.isWhiteHorizontal(Bi,gn-4,gn)||UC.isWhiteHorizontal(Bi,gn+7,gn+11))&&de++,Qe+6<Ge&&Se[Qe][gn]===1&&Se[Qe+1][gn]===0&&Se[Qe+2][gn]===1&&Se[Qe+3][gn]===1&&Se[Qe+4][gn]===1&&Se[Qe+5][gn]===0&&Se[Qe+6][gn]===1&&(UC.isWhiteVertical(Se,gn,Qe-4,Qe)||UC.isWhiteVertical(Se,gn,Qe+7,Qe+11))&&de++}return de*UC.N3}static isWhiteHorizontal(d,de,Se){de=Math.max(de,0),Se=Math.min(Se,d.length);for(let Ue=de;Ue<Se;Ue++)if(d[Ue]===1)return!1;return!0}static isWhiteVertical(d,de,Se,Ue){Se=Math.max(Se,0),Ue=Math.min(Ue,d.length);for(let Ge=Se;Ge<Ue;Ge++)if(d[Ge][de]===1)return!1;return!0}static applyMaskPenaltyRule4(d){let de=0,Se=d.getArray(),Ue=d.getWidth(),Ge=d.getHeight();for(let gn=0;gn<Ge;gn++){let Bi=Se[gn];for(let Ks=0;Ks<Ue;Ks++)Bi[Ks]===1&&de++}let Qe=d.getHeight()*d.getWidth();return Math.floor(Math.abs(de*2-Qe)*10/Qe)*UC.N4}static getDataMaskBit(d,de,Se){let Ue,Ge;switch(d){case 0:Ue=Se+de&1;break;case 1:Ue=Se&1;break;case 2:Ue=de%3;break;case 3:Ue=(Se+de)%3;break;case 4:Ue=Math.floor(Se/2)+Math.floor(de/3)&1;break;case 5:Ge=Se*de,Ue=(Ge&1)+Ge%3;break;case 6:Ge=Se*de,Ue=(Ge&1)+Ge%3&1;break;case 7:Ge=Se*de,Ue=Ge%3+(Se+de&1)&1;break;default:throw new m("Invalid mask pattern: "+d)}return Ue===0}static applyMaskPenaltyRule1Internal(d,de){let Se=0,Ue=de?d.getHeight():d.getWidth(),Ge=de?d.getWidth():d.getHeight(),Qe=d.getArray();for(let gn=0;gn<Ue;gn++){let Bi=0,Ks=-1;for(let gy=0;gy<Ge;gy++){let Cy=de?Qe[gn][gy]:Qe[gy][gn];Cy===Ks?Bi++:(Bi>=5&&(Se+=UC.N1+(Bi-5)),Bi=1,Ks=Cy)}Bi>=5&&(Se+=UC.N1+(Bi-5))}return Se}}UC.N1=3,UC.N2=3,UC.N3=40,UC.N4=10;class Z4{constructor(d,de){this.width=d,this.height=de;let Se=new Array(de);for(let Ue=0;Ue!==de;Ue++)Se[Ue]=new Uint8Array(d);this.bytes=Se}getHeight(){return this.height}getWidth(){return this.width}get(d,de){return this.bytes[de][d]}getArray(){return this.bytes}setNumber(d,de,Se){this.bytes[de][d]=Se}setBoolean(d,de,Se){this.bytes[de][d]=Se?1:0}clear(d){for(let de of this.bytes)vn.fill(de,d)}equals(d){if(!(d instanceof Z4))return!1;let de=d;if(this.width!==de.width||this.height!==de.height)return!1;for(let Se=0,Ue=this.height;Se<Ue;++Se){let Ge=this.bytes[Se],Qe=de.bytes[Se];for(let gn=0,Bi=this.width;gn<Bi;++gn)if(Ge[gn]!==Qe[gn])return!1}return!0}toString(){let d=new Bb;for(let de=0,Se=this.height;de<Se;++de){let Ue=this.bytes[de];for(let Ge=0,Qe=this.width;Ge<Qe;++Ge)switch(Ue[Ge]){case 0:d.append(" 0");break;case 1:d.append(" 1");break;default:d.append("  ");break}d.append(`
`)}return d.toString()}}class $4{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){let d=new Bb;return d.append(`<<
`),d.append(" mode: "),d.append(this.mode?this.mode.toString():"null"),d.append(`
 ecLevel: `),d.append(this.ecLevel?this.ecLevel.toString():"null"),d.append(`
 version: `),d.append(this.version?this.version.toString():"null"),d.append(`
 maskPattern: `),d.append(this.maskPattern.toString()),this.matrix?(d.append(`
 matrix:
`),d.append(this.matrix.toString())):d.append(`
 matrix: null
`),d.append(`>>
`),d.toString()}setMode(d){this.mode=d}setECLevel(d){this.ecLevel=d}setVersion(d){this.version=d}setMaskPattern(d){this.maskPattern=d}setMatrix(d){this.matrix=d}static isValidMaskPattern(d){return d>=0&&d<$4.NUM_MASK_PATTERNS}}$4.NUM_MASK_PATTERNS=8;class kC extends l{}kC.kind="WriterException";class K2{constructor(){}static clearMatrix(d){d.clear(255)}static buildMatrix(d,de,Se,Ue,Ge){K2.clearMatrix(Ge),K2.embedBasicPatterns(Se,Ge),K2.embedTypeInfo(de,Ue,Ge),K2.maybeEmbedVersionInfo(Se,Ge),K2.embedDataBits(d,Ue,Ge)}static embedBasicPatterns(d,de){K2.embedPositionDetectionPatternsAndSeparators(de),K2.embedDarkDotAtLeftBottomCorner(de),K2.maybeEmbedPositionAdjustmentPatterns(d,de),K2.embedTimingPatterns(de)}static embedTypeInfo(d,de,Se){let Ue=new sr;K2.makeTypeInfoBits(d,de,Ue);for(let Ge=0,Qe=Ue.getSize();Ge<Qe;++Ge){let gn=Ue.get(Ue.getSize()-1-Ge),Bi=K2.TYPE_INFO_COORDINATES[Ge],Ks=Bi[0],gy=Bi[1];if(Se.setBoolean(Ks,gy,gn),Ge<8){let Cy=Se.getWidth()-Ge-1,Oy=8;Se.setBoolean(Cy,Oy,gn)}else{let Cy=Se.getHeight()-7+(Ge-8);Se.setBoolean(8,Cy,gn)}}}static maybeEmbedVersionInfo(d,de){if(d.getVersionNumber()<7)return;let Se=new sr;K2.makeVersionInfoBits(d,Se);let Ue=6*3-1;for(let Ge=0;Ge<6;++Ge)for(let Qe=0;Qe<3;++Qe){let gn=Se.get(Ue);Ue--,de.setBoolean(Ge,de.getHeight()-11+Qe,gn),de.setBoolean(de.getHeight()-11+Qe,Ge,gn)}}static embedDataBits(d,de,Se){let Ue=0,Ge=-1,Qe=Se.getWidth()-1,gn=Se.getHeight()-1;for(;Qe>0;){for(Qe===6&&(Qe-=1);gn>=0&&gn<Se.getHeight();){for(let Bi=0;Bi<2;++Bi){let Ks=Qe-Bi;if(!K2.isEmpty(Se.get(Ks,gn)))continue;let gy;Ue<d.getSize()?(gy=d.get(Ue),++Ue):gy=!1,de!==255&&UC.getDataMaskBit(de,Ks,gn)&&(gy=!gy),Se.setBoolean(Ks,gn,gy)}gn+=Ge}Ge=-Ge,gn+=Ge,Qe-=2}if(Ue!==d.getSize())throw new kC("Not all bits consumed: "+Ue+"/"+d.getSize())}static findMSBSet(d){return 32-La.numberOfLeadingZeros(d)}static calculateBCHCode(d,de){if(de===0)throw new m("0 polynomial");let Se=K2.findMSBSet(de);for(d<<=Se-1;K2.findMSBSet(d)>=Se;)d^=de<<K2.findMSBSet(d)-Se;return d}static makeTypeInfoBits(d,de,Se){if(!$4.isValidMaskPattern(de))throw new kC("Invalid mask pattern");let Ue=d.getBits()<<3|de;Se.appendBits(Ue,5);let Ge=K2.calculateBCHCode(Ue,K2.TYPE_INFO_POLY);Se.appendBits(Ge,10);let Qe=new sr;if(Qe.appendBits(K2.TYPE_INFO_MASK_PATTERN,15),Se.xor(Qe),Se.getSize()!==15)throw new kC("should not happen but we got: "+Se.getSize())}static makeVersionInfoBits(d,de){de.appendBits(d.getVersionNumber(),6);let Se=K2.calculateBCHCode(d.getVersionNumber(),K2.VERSION_INFO_POLY);if(de.appendBits(Se,12),de.getSize()!==18)throw new kC("should not happen but we got: "+de.getSize())}static isEmpty(d){return d===255}static embedTimingPatterns(d){for(let de=8;de<d.getWidth()-8;++de){let Se=(de+1)%2;K2.isEmpty(d.get(de,6))&&d.setNumber(de,6,Se),K2.isEmpty(d.get(6,de))&&d.setNumber(6,de,Se)}}static embedDarkDotAtLeftBottomCorner(d){if(d.get(8,d.getHeight()-8)===0)throw new kC;d.setNumber(8,d.getHeight()-8,1)}static embedHorizontalSeparationPattern(d,de,Se){for(let Ue=0;Ue<8;++Ue){if(!K2.isEmpty(Se.get(d+Ue,de)))throw new kC;Se.setNumber(d+Ue,de,0)}}static embedVerticalSeparationPattern(d,de,Se){for(let Ue=0;Ue<7;++Ue){if(!K2.isEmpty(Se.get(d,de+Ue)))throw new kC;Se.setNumber(d,de+Ue,0)}}static embedPositionAdjustmentPattern(d,de,Se){for(let Ue=0;Ue<5;++Ue){let Ge=K2.POSITION_ADJUSTMENT_PATTERN[Ue];for(let Qe=0;Qe<5;++Qe)Se.setNumber(d+Qe,de+Ue,Ge[Qe])}}static embedPositionDetectionPattern(d,de,Se){for(let Ue=0;Ue<7;++Ue){let Ge=K2.POSITION_DETECTION_PATTERN[Ue];for(let Qe=0;Qe<7;++Qe)Se.setNumber(d+Qe,de+Ue,Ge[Qe])}}static embedPositionDetectionPatternsAndSeparators(d){let de=K2.POSITION_DETECTION_PATTERN[0].length;K2.embedPositionDetectionPattern(0,0,d),K2.embedPositionDetectionPattern(d.getWidth()-de,0,d),K2.embedPositionDetectionPattern(0,d.getWidth()-de,d);let Se=8;K2.embedHorizontalSeparationPattern(0,Se-1,d),K2.embedHorizontalSeparationPattern(d.getWidth()-Se,Se-1,d),K2.embedHorizontalSeparationPattern(0,d.getWidth()-Se,d);let Ue=7;K2.embedVerticalSeparationPattern(Ue,0,d),K2.embedVerticalSeparationPattern(d.getHeight()-Ue-1,0,d),K2.embedVerticalSeparationPattern(Ue,d.getHeight()-Ue,d)}static maybeEmbedPositionAdjustmentPatterns(d,de){if(d.getVersionNumber()<2)return;let Se=d.getVersionNumber()-1,Ue=K2.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[Se];for(let Ge=0,Qe=Ue.length;Ge!==Qe;Ge++){let gn=Ue[Ge];if(gn>=0)for(let Bi=0;Bi!==Qe;Bi++){let Ks=Ue[Bi];Ks>=0&&K2.isEmpty(de.get(Ks,gn))&&K2.embedPositionAdjustmentPattern(Ks-2,gn-2,de)}}}}K2.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),K2.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),K2.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),K2.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),K2.VERSION_INFO_POLY=7973,K2.TYPE_INFO_POLY=1335,K2.TYPE_INFO_MASK_PATTERN=21522;class t5{constructor(d,de){this.dataBytes=d,this.errorCorrectionBytes=de}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class xC{constructor(){}static calculateMaskPenalty(d){return UC.applyMaskPenaltyRule1(d)+UC.applyMaskPenaltyRule2(d)+UC.applyMaskPenaltyRule3(d)+UC.applyMaskPenaltyRule4(d)}static encode(d,de,Se=null){let Ue=xC.DEFAULT_BYTE_MODE_ENCODING,Ge=Se!==null&&Se.get(JC.CHARACTER_SET)!==void 0;Ge&&(Ue=Se.get(JC.CHARACTER_SET).toString());let Qe=this.chooseMode(d,Ue),gn=new sr;if(Qe===G2.BYTE&&(Ge||xC.DEFAULT_BYTE_MODE_ENCODING!==Ue)){let $2=lc.getCharacterSetECIByName(Ue);$2!==void 0&&this.appendECI($2,gn)}this.appendModeInfo(Qe,gn);let Bi=new sr;this.appendBytes(d,Qe,Bi,Ue);let Ks;if(Se!==null&&Se.get(JC.QR_VERSION)!==void 0){let $2=Number.parseInt(Se.get(JC.QR_VERSION).toString(),10);Ks=V2.getVersionForNumber($2);let _2=this.calculateBitsNeeded(Qe,gn,Bi,Ks);if(!this.willFit(_2,Ks,de))throw new kC("Data too big for requested version")}else Ks=this.recommendVersion(de,Qe,gn,Bi);let gy=new sr;gy.appendBitArray(gn);let Cy=Qe===G2.BYTE?Bi.getSizeInBytes():d.length;this.appendLengthInfo(Cy,Ks,Qe,gy),gy.appendBitArray(Bi);let Oy=Ks.getECBlocksForLevel(de),Nb=Ks.getTotalCodewords()-Oy.getTotalECCodewords();this.terminateBits(Nb,gy);let qb=this.interleaveWithECBytes(gy,Ks.getTotalCodewords(),Nb,Oy.getNumBlocks()),Ub=new $4;Ub.setECLevel(de),Ub.setMode(Qe),Ub.setVersion(Ks);let e2=Ks.getDimensionForVersion(),c2=new Z4(e2,e2),k2=this.chooseMaskPattern(qb,de,Ks,c2);return Ub.setMaskPattern(k2),K2.buildMatrix(qb,de,Ks,k2,c2),Ub.setMatrix(c2),Ub}static recommendVersion(d,de,Se,Ue){let Ge=this.calculateBitsNeeded(de,Se,Ue,V2.getVersionForNumber(1)),Qe=this.chooseVersion(Ge,d),gn=this.calculateBitsNeeded(de,Se,Ue,Qe);return this.chooseVersion(gn,d)}static calculateBitsNeeded(d,de,Se,Ue){return de.getSize()+d.getCharacterCountBits(Ue)+Se.getSize()}static getAlphanumericCode(d){return d<xC.ALPHANUMERIC_TABLE.length?xC.ALPHANUMERIC_TABLE[d]:-1}static chooseMode(d,de=null){if(lc.SJIS.getName()===de&&this.isOnlyDoubleByteKanji(d))return G2.KANJI;let Se=!1,Ue=!1;for(let Ge=0,Qe=d.length;Ge<Qe;++Ge){let gn=d.charAt(Ge);if(xC.isDigit(gn))Se=!0;else if(this.getAlphanumericCode(gn.charCodeAt(0))!==-1)Ue=!0;else return G2.BYTE}return Ue?G2.ALPHANUMERIC:Se?G2.NUMERIC:G2.BYTE}static isOnlyDoubleByteKanji(d){let de;try{de=_y.encode(d,lc.SJIS)}catch{return!1}let Se=de.length;if(Se%2!==0)return!1;for(let Ue=0;Ue<Se;Ue+=2){let Ge=de[Ue]&255;if((Ge<129||Ge>159)&&(Ge<224||Ge>235))return!1}return!0}static chooseMaskPattern(d,de,Se,Ue){let Ge=Number.MAX_SAFE_INTEGER,Qe=-1;for(let gn=0;gn<$4.NUM_MASK_PATTERNS;gn++){K2.buildMatrix(d,de,Se,gn,Ue);let Bi=this.calculateMaskPenalty(Ue);Bi<Ge&&(Ge=Bi,Qe=gn)}return Qe}static chooseVersion(d,de){for(let Se=1;Se<=40;Se++){let Ue=V2.getVersionForNumber(Se);if(xC.willFit(d,Ue,de))return Ue}throw new kC("Data too big")}static willFit(d,de,Se){let Ue=de.getTotalCodewords(),Ge=de.getECBlocksForLevel(Se).getTotalECCodewords(),Qe=Ue-Ge,gn=(d+7)/8;return Qe>=gn}static terminateBits(d,de){let Se=d*8;if(de.getSize()>Se)throw new kC("data bits cannot fit in the QR Code"+de.getSize()+" > "+Se);for(let Qe=0;Qe<4&&de.getSize()<Se;++Qe)de.appendBit(!1);let Ue=de.getSize()&7;if(Ue>0)for(let Qe=Ue;Qe<8;Qe++)de.appendBit(!1);let Ge=d-de.getSizeInBytes();for(let Qe=0;Qe<Ge;++Qe)de.appendBits((Qe&1)===0?236:17,8);if(de.getSize()!==Se)throw new kC("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(d,de,Se,Ue,Ge,Qe){if(Ue>=Se)throw new kC("Block ID too large");let gn=d%Se,Bi=Se-gn,Ks=Math.floor(d/Se),gy=Ks+1,Cy=Math.floor(de/Se),Oy=Cy+1,Nb=Ks-Cy,qb=gy-Oy;if(Nb!==qb)throw new kC("EC bytes mismatch");if(Se!==Bi+gn)throw new kC("RS blocks mismatch");if(d!==(Cy+Nb)*Bi+(Oy+qb)*gn)throw new kC("Total bytes mismatch");Ue<Bi?(Ge[0]=Cy,Qe[0]=Nb):(Ge[0]=Oy,Qe[0]=qb)}static interleaveWithECBytes(d,de,Se,Ue){if(d.getSizeInBytes()!==Se)throw new kC("Number of bits and data bytes does not match");let Ge=0,Qe=0,gn=0,Bi=new Array;for(let gy=0;gy<Ue;++gy){let Cy=new Int32Array(1),Oy=new Int32Array(1);xC.getNumDataBytesAndNumECBytesForBlockID(de,Se,Ue,gy,Cy,Oy);let Nb=Cy[0],qb=new Uint8Array(Nb);d.toBytes(8*Ge,qb,0,Nb);let Ub=xC.generateECBytes(qb,Oy[0]);Bi.push(new t5(qb,Ub)),Qe=Math.max(Qe,Nb),gn=Math.max(gn,Ub.length),Ge+=Cy[0]}if(Se!==Ge)throw new kC("Data bytes does not match offset");let Ks=new sr;for(let gy=0;gy<Qe;++gy)for(let Cy of Bi){let Oy=Cy.getDataBytes();gy<Oy.length&&Ks.appendBits(Oy[gy],8)}for(let gy=0;gy<gn;++gy)for(let Cy of Bi){let Oy=Cy.getErrorCorrectionBytes();gy<Oy.length&&Ks.appendBits(Oy[gy],8)}if(de!==Ks.getSizeInBytes())throw new kC("Interleaving error: "+de+" and "+Ks.getSizeInBytes()+" differ.");return Ks}static generateECBytes(d,de){let Se=d.length,Ue=new Int32Array(Se+de);for(let Qe=0;Qe<Se;Qe++)Ue[Qe]=d[Qe]&255;new y6(k_.QR_CODE_FIELD_256).encode(Ue,de);let Ge=new Uint8Array(de);for(let Qe=0;Qe<de;Qe++)Ge[Qe]=Ue[Se+Qe];return Ge}static appendModeInfo(d,de){de.appendBits(d.getBits(),4)}static appendLengthInfo(d,de,Se,Ue){let Ge=Se.getCharacterCountBits(de);if(d>=1<<Ge)throw new kC(d+" is bigger than "+((1<<Ge)-1));Ue.appendBits(d,Ge)}static appendBytes(d,de,Se,Ue){switch(de){case G2.NUMERIC:xC.appendNumericBytes(d,Se);break;case G2.ALPHANUMERIC:xC.appendAlphanumericBytes(d,Se);break;case G2.BYTE:xC.append8BitBytes(d,Se,Ue);break;case G2.KANJI:xC.appendKanjiBytes(d,Se);break;default:throw new kC("Invalid mode: "+de)}}static getDigit(d){return d.charCodeAt(0)-48}static isDigit(d){let de=xC.getDigit(d);return de>=0&&de<=9}static appendNumericBytes(d,de){let Se=d.length,Ue=0;for(;Ue<Se;){let Ge=xC.getDigit(d.charAt(Ue));if(Ue+2<Se){let Qe=xC.getDigit(d.charAt(Ue+1)),gn=xC.getDigit(d.charAt(Ue+2));de.appendBits(Ge*100+Qe*10+gn,10),Ue+=3}else if(Ue+1<Se){let Qe=xC.getDigit(d.charAt(Ue+1));de.appendBits(Ge*10+Qe,7),Ue+=2}else de.appendBits(Ge,4),Ue++}}static appendAlphanumericBytes(d,de){let Se=d.length,Ue=0;for(;Ue<Se;){let Ge=xC.getAlphanumericCode(d.charCodeAt(Ue));if(Ge===-1)throw new kC;if(Ue+1<Se){let Qe=xC.getAlphanumericCode(d.charCodeAt(Ue+1));if(Qe===-1)throw new kC;de.appendBits(Ge*45+Qe,11),Ue+=2}else de.appendBits(Ge,6),Ue++}}static append8BitBytes(d,de,Se){let Ue;try{Ue=_y.encode(d,Se)}catch(Ge){throw new kC(Ge)}for(let Ge=0,Qe=Ue.length;Ge!==Qe;Ge++){let gn=Ue[Ge];de.appendBits(gn,8)}}static appendKanjiBytes(d,de){let Se;try{Se=_y.encode(d,lc.SJIS)}catch(Ge){throw new kC(Ge)}let Ue=Se.length;for(let Ge=0;Ge<Ue;Ge+=2){let Qe=Se[Ge]&255,gn=Se[Ge+1]&255,Bi=Qe<<8&4294967295|gn,Ks=-1;if(Bi>=33088&&Bi<=40956?Ks=Bi-33088:Bi>=57408&&Bi<=60351&&(Ks=Bi-49472),Ks===-1)throw new kC("Invalid byte sequence");let gy=(Ks>>8)*192+(Ks&255);de.appendBits(gy,13)}}static appendECI(d,de){de.appendBits(G2.ECI.getBits(),4),de.appendBits(d.getValue(),8)}}xC.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),xC.DEFAULT_BYTE_MODE_ENCODING=lc.UTF8.getName();class g4{write(d,de,Se,Ue=null){if(d.length===0)throw new m("Found empty contents");if(de<0||Se<0)throw new m("Requested dimensions are too small: "+de+"x"+Se);let Ge=wC.L,Qe=g4.QUIET_ZONE_SIZE;Ue!==null&&(Ue.get(JC.ERROR_CORRECTION)!==void 0&&(Ge=wC.fromString(Ue.get(JC.ERROR_CORRECTION).toString())),Ue.get(JC.MARGIN)!==void 0&&(Qe=Number.parseInt(Ue.get(JC.MARGIN).toString(),10)));let gn=xC.encode(d,Ge,Ue);return this.renderResult(gn,de,Se,Qe)}writeToDom(d,de,Se,Ue,Ge=null){typeof d=="string"&&(d=document.querySelector(d));let Qe=this.write(de,Se,Ue,Ge);d&&d.appendChild(Qe)}renderResult(d,de,Se,Ue){let Ge=d.getMatrix();if(Ge===null)throw new Qb;let Qe=Ge.getWidth(),gn=Ge.getHeight(),Bi=Qe+Ue*2,Ks=gn+Ue*2,gy=Math.max(de,Bi),Cy=Math.max(Se,Ks),Oy=Math.min(Math.floor(gy/Bi),Math.floor(Cy/Ks)),Nb=Math.floor((gy-Qe*Oy)/2),qb=Math.floor((Cy-gn*Oy)/2),Ub=this.createSVGElement(gy,Cy);for(let e2=0,c2=qb;e2<gn;e2++,c2+=Oy)for(let k2=0,$2=Nb;k2<Qe;k2++,$2+=Oy)if(Ge.get(k2,e2)===1){let _2=this.createSvgRectElement($2,c2,Oy,Oy);Ub.appendChild(_2)}return Ub}createSVGElement(d,de){let Se=document.createElementNS(g4.SVG_NS,"svg");return Se.setAttributeNS(null,"height",d.toString()),Se.setAttributeNS(null,"width",de.toString()),Se}createSvgRectElement(d,de,Se,Ue){let Ge=document.createElementNS(g4.SVG_NS,"rect");return Ge.setAttributeNS(null,"x",d.toString()),Ge.setAttributeNS(null,"y",de.toString()),Ge.setAttributeNS(null,"height",Se.toString()),Ge.setAttributeNS(null,"width",Ue.toString()),Ge.setAttributeNS(null,"fill","#000000"),Ge}}g4.QUIET_ZONE_SIZE=4,g4.SVG_NS="http://www.w3.org/2000/svg";class k4{encode(d,de,Se,Ue,Ge){if(d.length===0)throw new m("Found empty contents");if(de!==Rb.QR_CODE)throw new m("Can only encode QR_CODE, but got "+de);if(Se<0||Ue<0)throw new m(`Requested dimensions are too small: ${Se}x${Ue}`);let Qe=wC.L,gn=k4.QUIET_ZONE_SIZE;Ge!==null&&(Ge.get(JC.ERROR_CORRECTION)!==void 0&&(Qe=wC.fromString(Ge.get(JC.ERROR_CORRECTION).toString())),Ge.get(JC.MARGIN)!==void 0&&(gn=Number.parseInt(Ge.get(JC.MARGIN).toString(),10)));let Bi=xC.encode(d,Qe,Ge);return k4.renderResult(Bi,Se,Ue,gn)}static renderResult(d,de,Se,Ue){let Ge=d.getMatrix();if(Ge===null)throw new Qb;let Qe=Ge.getWidth(),gn=Ge.getHeight(),Bi=Qe+Ue*2,Ks=gn+Ue*2,gy=Math.max(de,Bi),Cy=Math.max(Se,Ks),Oy=Math.min(Math.floor(gy/Bi),Math.floor(Cy/Ks)),Nb=Math.floor((gy-Qe*Oy)/2),qb=Math.floor((Cy-gn*Oy)/2),Ub=new Dy(gy,Cy);for(let e2=0,c2=qb;e2<gn;e2++,c2+=Oy)for(let k2=0,$2=Nb;k2<Qe;k2++,$2+=Oy)Ge.get(k2,e2)===1&&Ub.setRegion($2,c2,Oy,Oy);return Ub}}k4.QUIET_ZONE_SIZE=4;class n5{encode(d,de,Se,Ue,Ge){let Qe;switch(de){case Rb.QR_CODE:Qe=new k4;break;default:throw new m("No encoder available for format "+de)}return Qe.encode(d,de,Se,Ue,Ge)}}class MO extends Ay{constructor(d,de,Se,Ue,Ge,Qe,gn,Bi){if(super(Qe,gn),this.yuvData=d,this.dataWidth=de,this.dataHeight=Se,this.left=Ue,this.top=Ge,Ue+Qe>de||Ge+gn>Se)throw new m("Crop rectangle does not fit within image data.");Bi&&this.reverseHorizontal(Qe,gn)}getRow(d,de){if(d<0||d>=this.getHeight())throw new m("Requested row is outside the image: "+d);let Se=this.getWidth();(de==null||de.length<Se)&&(de=new Uint8ClampedArray(Se));let Ue=(d+this.top)*this.dataWidth+this.left;return He.arraycopy(this.yuvData,Ue,de,0,Se),de}getMatrix(){let d=this.getWidth(),de=this.getHeight();if(d===this.dataWidth&&de===this.dataHeight)return this.yuvData;let Se=d*de,Ue=new Uint8ClampedArray(Se),Ge=this.top*this.dataWidth+this.left;if(d===this.dataWidth)return He.arraycopy(this.yuvData,Ge,Ue,0,Se),Ue;for(let Qe=0;Qe<de;Qe++){let gn=Qe*d;He.arraycopy(this.yuvData,Ge,Ue,gn,d),Ge+=this.dataWidth}return Ue}isCropSupported(){return!0}crop(d,de,Se,Ue){return new MO(this.yuvData,this.dataWidth,this.dataHeight,this.left+d,this.top+de,Se,Ue,!1)}renderThumbnail(){let d=this.getWidth()/MO.THUMBNAIL_SCALE_FACTOR,de=this.getHeight()/MO.THUMBNAIL_SCALE_FACTOR,Se=new Int32Array(d*de),Ue=this.yuvData,Ge=this.top*this.dataWidth+this.left;for(let Qe=0;Qe<de;Qe++){let gn=Qe*d;for(let Bi=0;Bi<d;Bi++){let Ks=Ue[Ge+Bi*MO.THUMBNAIL_SCALE_FACTOR]&255;Se[gn+Bi]=4278190080|Ks*65793}Ge+=this.dataWidth*MO.THUMBNAIL_SCALE_FACTOR}return Se}getThumbnailWidth(){return this.getWidth()/MO.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/MO.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(d,de){let Se=this.yuvData;for(let Ue=0,Ge=this.top*this.dataWidth+this.left;Ue<de;Ue++,Ge+=this.dataWidth){let Qe=Ge+d/2;for(let gn=Ge,Bi=Ge+d-1;gn<Qe;gn++,Bi--){let Ks=Se[gn];Se[gn]=Se[Bi],Se[Bi]=Ks}}}invert(){return new $b(this)}}MO.THUMBNAIL_SCALE_FACTOR=2;class B4 extends Ay{constructor(d,de,Se,Ue,Ge,Qe,gn){if(super(de,Se),this.dataWidth=Ue,this.dataHeight=Ge,this.left=Qe,this.top=gn,d.BYTES_PER_ELEMENT===4){let Bi=de*Se,Ks=new Uint8ClampedArray(Bi);for(let gy=0;gy<Bi;gy++){let Cy=d[gy],Oy=Cy>>16&255,Nb=Cy>>7&510,qb=Cy&255;Ks[gy]=(Oy+Nb+qb)/4&255}this.luminances=Ks}else this.luminances=d;if(Ue===void 0&&(this.dataWidth=de),Ge===void 0&&(this.dataHeight=Se),Qe===void 0&&(this.left=0),gn===void 0&&(this.top=0),this.left+de>this.dataWidth||this.top+Se>this.dataHeight)throw new m("Crop rectangle does not fit within image data.")}getRow(d,de){if(d<0||d>=this.getHeight())throw new m("Requested row is outside the image: "+d);let Se=this.getWidth();(de==null||de.length<Se)&&(de=new Uint8ClampedArray(Se));let Ue=(d+this.top)*this.dataWidth+this.left;return He.arraycopy(this.luminances,Ue,de,0,Se),de}getMatrix(){let d=this.getWidth(),de=this.getHeight();if(d===this.dataWidth&&de===this.dataHeight)return this.luminances;let Se=d*de,Ue=new Uint8ClampedArray(Se),Ge=this.top*this.dataWidth+this.left;if(d===this.dataWidth)return He.arraycopy(this.luminances,Ge,Ue,0,Se),Ue;for(let Qe=0;Qe<de;Qe++){let gn=Qe*d;He.arraycopy(this.luminances,Ge,Ue,gn,d),Ge+=this.dataWidth}return Ue}isCropSupported(){return!0}crop(d,de,Se,Ue){return new B4(this.luminances,Se,Ue,this.dataWidth,this.dataHeight,this.left+d,this.top+de)}invert(){return new $b(this)}}class _6 extends lc{static forName(d){return this.getCharacterSetECIByName(d)}}class b6{}b6.ISO_8859_1=lc.ISO8859_1;class VO{isCompact(){return this.compact}setCompact(d){this.compact=d}getSize(){return this.size}setSize(d){this.size=d}getLayers(){return this.layers}setLayers(d){this.layers=d}getCodeWords(){return this.codeWords}setCodeWords(d){this.codeWords=d}getMatrix(){return this.matrix}setMatrix(d){this.matrix=d}}class M6{static singletonList(d){return[d]}static min(d,de){return d.sort(de)[0]}}class w6{constructor(d){this.previous=d}getPrevious(){return this.previous}}class T4 extends w6{constructor(d,de,Se){super(d),this.value=de,this.bitCount=Se}appendTo(d,de){d.appendBits(this.value,this.bitCount)}add(d,de){return new T4(this,d,de)}addBinaryShift(d,de){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new T4(this,d,de)}toString(){let d=this.value&(1<<this.bitCount)-1;return d|=1<<this.bitCount,"<"+La.toBinaryString(d|1<<this.bitCount).substring(1)+">"}}class y4 extends T4{constructor(d,de,Se){super(d,0,0),this.binaryShiftStart=de,this.binaryShiftByteCount=Se}appendTo(d,de){for(let Se=0;Se<this.binaryShiftByteCount;Se++)(Se===0||Se===31&&this.binaryShiftByteCount<=62)&&(d.appendBits(31,5),this.binaryShiftByteCount>62?d.appendBits(this.binaryShiftByteCount-31,16):Se===0?d.appendBits(Math.min(this.binaryShiftByteCount,31),5):d.appendBits(this.binaryShiftByteCount-31,5)),d.appendBits(de[this.binaryShiftStart+Se],8)}addBinaryShift(d,de){return new y4(this,d,de)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function r5(by,d,de){return new y4(by,d,de)}function DO(by,d,de){return new T4(by,d,de)}let i5=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],_4=0,PI=1,vO=2,j6=3,yO=4,E6=new T4(null,0,0),S6=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,(10<<16)+(29<<5)+30]),Int32Array.from([(9<<16)+(30<<4)+14,0,(5<<16)+30,(5<<16)+29,(10<<16)+(29<<5)+30]),Int32Array.from([(4<<16)+14,(9<<16)+(14<<5)+28,0,(9<<16)+(14<<5)+29,(14<<16)+(14<<10)+(29<<5)+30]),Int32Array.from([(5<<16)+29,(5<<16)+28,(10<<16)+(29<<5)+30,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,(10<<16)+(31<<5)+28,(10<<16)+(31<<5)+30,(10<<16)+(31<<5)+29,0])];function q4(by){for(let d of by)vn.fill(d,-1);return by[_4][yO]=0,by[PI][yO]=0,by[PI][_4]=28,by[j6][yO]=0,by[vO][yO]=0,by[vO][_4]=15,by}let C6=q4(vn.createInt32Array(6,6));class _O{constructor(d,de,Se,Ue){this.token=d,this.mode=de,this.binaryShiftByteCount=Se,this.bitCount=Ue}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(d,de){let Se=this.bitCount,Ue=this.token;if(d!==this.mode){let Qe=S6[this.mode][d];Ue=DO(Ue,Qe&65535,Qe>>16),Se+=Qe>>16}let Ge=d===vO?4:5;return Ue=DO(Ue,de,Ge),new _O(Ue,d,0,Se+Ge)}shiftAndAppend(d,de){let Se=this.token,Ue=this.mode===vO?4:5;return Se=DO(Se,C6[this.mode][d],Ue),Se=DO(Se,de,5),new _O(Se,this.mode,0,this.bitCount+Ue+5)}addBinaryShiftChar(d){let de=this.token,Se=this.mode,Ue=this.bitCount;if(this.mode===yO||this.mode===vO){let gn=S6[Se][_4];de=DO(de,gn&65535,gn>>16),Ue+=gn>>16,Se=_4}let Ge=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,Qe=new _O(de,Se,this.binaryShiftByteCount+1,Ue+Ge);return Qe.binaryShiftByteCount===2047+31&&(Qe=Qe.endBinaryShift(d+1)),Qe}endBinaryShift(d){if(this.binaryShiftByteCount===0)return this;let de=this.token;return de=r5(de,d-this.binaryShiftByteCount,this.binaryShiftByteCount),new _O(de,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(d){let de=this.bitCount+(S6[this.mode][d.mode]>>16);return this.binaryShiftByteCount<d.binaryShiftByteCount?de+=_O.calculateBinaryShiftCost(d)-_O.calculateBinaryShiftCost(this):this.binaryShiftByteCount>d.binaryShiftByteCount&&d.binaryShiftByteCount>0&&(de+=10),de<=d.bitCount}toBitArray(d){let de=[];for(let Ue=this.endBinaryShift(d.length).token;Ue!==null;Ue=Ue.getPrevious())de.unshift(Ue);let Se=new sr;for(let Ue of de)Ue.appendTo(Se,d);return Se}toString(){return xy.format("%s bits=%d bytes=%d",i5[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(d){return d.binaryShiftByteCount>62?21:d.binaryShiftByteCount>31?20:d.binaryShiftByteCount>0?10:0}}_O.INITIAL_STATE=new _O(E6,_4,0,0);function o5(by){let d=xy.getCharCode(" "),de=xy.getCharCode("."),Se=xy.getCharCode(",");by[_4][d]=1;let Ue=xy.getCharCode("Z"),Ge=xy.getCharCode("A");for(let Oy=Ge;Oy<=Ue;Oy++)by[_4][Oy]=Oy-Ge+2;by[PI][d]=1;let Qe=xy.getCharCode("z"),gn=xy.getCharCode("a");for(let Oy=gn;Oy<=Qe;Oy++)by[PI][Oy]=Oy-gn+2;by[vO][d]=1;let Bi=xy.getCharCode("9"),Ks=xy.getCharCode("0");for(let Oy=Ks;Oy<=Bi;Oy++)by[vO][Oy]=Oy-Ks+2;by[vO][Se]=12,by[vO][de]=13;let gy=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~","\x7F"];for(let Oy=0;Oy<gy.length;Oy++)by[j6][xy.getCharCode(gy[Oy])]=Oy;let Cy=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let Oy=0;Oy<Cy.length;Oy++)xy.getCharCode(Cy[Oy])>0&&(by[yO][xy.getCharCode(Cy[Oy])]=Oy);return by}let $6=o5(vn.createInt32Array(5,256));class UO{constructor(d){this.text=d}encode(){let d=xy.getCharCode(" "),de=xy.getCharCode(`
`),Se=M6.singletonList(_O.INITIAL_STATE);for(let Ue=0;Ue<this.text.length;Ue++){let Ge,Qe=Ue+1<this.text.length?this.text[Ue+1]:0;switch(this.text[Ue]){case xy.getCharCode("\r"):Ge=Qe===de?2:0;break;case xy.getCharCode("."):Ge=Qe===d?3:0;break;case xy.getCharCode(","):Ge=Qe===d?4:0;break;case xy.getCharCode(":"):Ge=Qe===d?5:0;break;default:Ge=0}Ge>0?(Se=UO.updateStateListForPair(Se,Ue,Ge),Ue++):Se=this.updateStateListForChar(Se,Ue)}return M6.min(Se,(Ue,Ge)=>Ue.getBitCount()-Ge.getBitCount()).toBitArray(this.text)}updateStateListForChar(d,de){let Se=[];for(let Ue of d)this.updateStateForChar(Ue,de,Se);return UO.simplifyStates(Se)}updateStateForChar(d,de,Se){let Ue=this.text[de]&255,Ge=$6[d.getMode()][Ue]>0,Qe=null;for(let gn=0;gn<=yO;gn++){let Bi=$6[gn][Ue];if(Bi>0){if(Qe==null&&(Qe=d.endBinaryShift(de)),!Ge||gn===d.getMode()||gn===vO){let Ks=Qe.latchAndAppend(gn,Bi);Se.push(Ks)}if(!Ge&&C6[d.getMode()][gn]>=0){let Ks=Qe.shiftAndAppend(gn,Bi);Se.push(Ks)}}}if(d.getBinaryShiftByteCount()>0||$6[d.getMode()][Ue]===0){let gn=d.addBinaryShiftChar(de);Se.push(gn)}}static updateStateListForPair(d,de,Se){let Ue=[];for(let Ge of d)this.updateStateForPair(Ge,de,Se,Ue);return this.simplifyStates(Ue)}static updateStateForPair(d,de,Se,Ue){let Ge=d.endBinaryShift(de);if(Ue.push(Ge.latchAndAppend(yO,Se)),d.getMode()!==yO&&Ue.push(Ge.shiftAndAppend(yO,Se)),Se===3||Se===4){let Qe=Ge.latchAndAppend(vO,16-Se).latchAndAppend(vO,1);Ue.push(Qe)}if(d.getBinaryShiftByteCount()>0){let Qe=d.addBinaryShiftChar(de).addBinaryShiftChar(de+1);Ue.push(Qe)}}static simplifyStates(d){let de=[];for(let Se of d){let Ue=!0;for(let Ge of de){if(Ge.isBetterThanOrEqualTo(Se)){Ue=!1;break}Se.isBetterThanOrEqualTo(Ge)&&(de=de.filter(Qe=>Qe!==Ge))}Ue&&de.push(Se)}return de}}class yC{constructor(){}static encodeBytes(d){return yC.encode(d,yC.DEFAULT_EC_PERCENT,yC.DEFAULT_AZTEC_LAYERS)}static encode(d,de,Se){let Ue=new UO(d).encode(),Ge=La.truncDivision(Ue.getSize()*de,100)+11,Qe=Ue.getSize()+Ge,gn,Bi,Ks,gy,Cy;if(Se!==yC.DEFAULT_AZTEC_LAYERS){if(gn=Se<0,Bi=Math.abs(Se),Bi>(gn?yC.MAX_NB_BITS_COMPACT:yC.MAX_NB_BITS))throw new m(xy.format("Illegal value %s for layers",Se));Ks=yC.totalBitsInLayer(Bi,gn),gy=yC.WORD_SIZE[Bi];let _2=Ks-Ks%gy;if(Cy=yC.stuffBits(Ue,gy),Cy.getSize()+Ge>_2)throw new m("Data to large for user specified layer");if(gn&&Cy.getSize()>gy*64)throw new m("Data to large for user specified layer")}else{gy=0,Cy=null;for(let _2=0;;_2++){if(_2>yC.MAX_NB_BITS)throw new m("Data too large for an Aztec code");if(gn=_2<=3,Bi=gn?_2+1:_2,Ks=yC.totalBitsInLayer(Bi,gn),Qe>Ks)continue;(Cy==null||gy!==yC.WORD_SIZE[Bi])&&(gy=yC.WORD_SIZE[Bi],Cy=yC.stuffBits(Ue,gy));let X2=Ks-Ks%gy;if(!(gn&&Cy.getSize()>gy*64)&&Cy.getSize()+Ge<=X2)break}}let Oy=yC.generateCheckWords(Cy,Ks,gy),Nb=Cy.getSize()/gy,qb=yC.generateModeMessage(gn,Bi,Nb),Ub=(gn?11:14)+Bi*4,e2=new Int32Array(Ub),c2;if(gn){c2=Ub;for(let _2=0;_2<e2.length;_2++)e2[_2]=_2}else{c2=Ub+1+2*La.truncDivision(La.truncDivision(Ub,2)-1,15);let _2=La.truncDivision(Ub,2),X2=La.truncDivision(c2,2);for(let J2=0;J2<_2;J2++){let rO=J2+La.truncDivision(J2,15);e2[_2-J2-1]=X2-rO-1,e2[_2+J2]=X2+rO+1}}let k2=new Dy(c2);for(let _2=0,X2=0;_2<Bi;_2++){let J2=(Bi-_2)*4+(gn?9:12);for(let rO=0;rO<J2;rO++){let OO=rO*2;for(let iO=0;iO<2;iO++)Oy.get(X2+OO+iO)&&k2.set(e2[_2*2+iO],e2[_2*2+rO]),Oy.get(X2+J2*2+OO+iO)&&k2.set(e2[_2*2+rO],e2[Ub-1-_2*2-iO]),Oy.get(X2+J2*4+OO+iO)&&k2.set(e2[Ub-1-_2*2-iO],e2[Ub-1-_2*2-rO]),Oy.get(X2+J2*6+OO+iO)&&k2.set(e2[Ub-1-_2*2-rO],e2[_2*2+iO])}X2+=J2*8}if(yC.drawModeMessage(k2,gn,c2,qb),gn)yC.drawBullsEye(k2,La.truncDivision(c2,2),5);else{yC.drawBullsEye(k2,La.truncDivision(c2,2),7);for(let _2=0,X2=0;_2<La.truncDivision(Ub,2)-1;_2+=15,X2+=16)for(let J2=La.truncDivision(c2,2)&1;J2<c2;J2+=2)k2.set(La.truncDivision(c2,2)-X2,J2),k2.set(La.truncDivision(c2,2)+X2,J2),k2.set(J2,La.truncDivision(c2,2)-X2),k2.set(J2,La.truncDivision(c2,2)+X2)}let $2=new VO;return $2.setCompact(gn),$2.setSize(c2),$2.setLayers(Bi),$2.setCodeWords(Nb),$2.setMatrix(k2),$2}static drawBullsEye(d,de,Se){for(let Ue=0;Ue<Se;Ue+=2)for(let Ge=de-Ue;Ge<=de+Ue;Ge++)d.set(Ge,de-Ue),d.set(Ge,de+Ue),d.set(de-Ue,Ge),d.set(de+Ue,Ge);d.set(de-Se,de-Se),d.set(de-Se+1,de-Se),d.set(de-Se,de-Se+1),d.set(de+Se,de-Se),d.set(de+Se,de-Se+1),d.set(de+Se,de+Se-1)}static generateModeMessage(d,de,Se){let Ue=new sr;return d?(Ue.appendBits(de-1,2),Ue.appendBits(Se-1,6),Ue=yC.generateCheckWords(Ue,28,4)):(Ue.appendBits(de-1,5),Ue.appendBits(Se-1,11),Ue=yC.generateCheckWords(Ue,40,4)),Ue}static drawModeMessage(d,de,Se,Ue){let Ge=La.truncDivision(Se,2);if(de)for(let Qe=0;Qe<7;Qe++){let gn=Ge-3+Qe;Ue.get(Qe)&&d.set(gn,Ge-5),Ue.get(Qe+7)&&d.set(Ge+5,gn),Ue.get(20-Qe)&&d.set(gn,Ge+5),Ue.get(27-Qe)&&d.set(Ge-5,gn)}else for(let Qe=0;Qe<10;Qe++){let gn=Ge-5+Qe+La.truncDivision(Qe,5);Ue.get(Qe)&&d.set(gn,Ge-7),Ue.get(Qe+10)&&d.set(Ge+7,gn),Ue.get(29-Qe)&&d.set(gn,Ge+7),Ue.get(39-Qe)&&d.set(Ge-7,gn)}}static generateCheckWords(d,de,Se){let Ue=d.getSize()/Se,Ge=new y6(yC.getGF(Se)),Qe=La.truncDivision(de,Se),gn=yC.bitsToWords(d,Se,Qe);Ge.encode(gn,Qe-Ue);let Bi=de%Se,Ks=new sr;Ks.appendBits(0,Bi);for(let gy of Array.from(gn))Ks.appendBits(gy,Se);return Ks}static bitsToWords(d,de,Se){let Ue=new Int32Array(Se),Ge,Qe;for(Ge=0,Qe=d.getSize()/de;Ge<Qe;Ge++){let gn=0;for(let Bi=0;Bi<de;Bi++)gn|=d.get(Ge*de+Bi)?1<<de-Bi-1:0;Ue[Ge]=gn}return Ue}static getGF(d){switch(d){case 4:return k_.AZTEC_PARAM;case 6:return k_.AZTEC_DATA_6;case 8:return k_.AZTEC_DATA_8;case 10:return k_.AZTEC_DATA_10;case 12:return k_.AZTEC_DATA_12;default:throw new m("Unsupported word size "+d)}}static stuffBits(d,de){let Se=new sr,Ue=d.getSize(),Ge=(1<<de)-2;for(let Qe=0;Qe<Ue;Qe+=de){let gn=0;for(let Bi=0;Bi<de;Bi++)(Qe+Bi>=Ue||d.get(Qe+Bi))&&(gn|=1<<de-1-Bi);(gn&Ge)===Ge?(Se.appendBits(gn&Ge,de),Qe--):(gn&Ge)===0?(Se.appendBits(gn|1,de),Qe--):Se.appendBits(gn,de)}return Se}static totalBitsInLayer(d,de){return((de?88:112)+16*d)*d}}yC.DEFAULT_EC_PERCENT=33,yC.DEFAULT_AZTEC_LAYERS=0,yC.MAX_NB_BITS=32,yC.MAX_NB_BITS_COMPACT=4,yC.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class V4{encode(d,de,Se,Ue){return this.encodeWithHints(d,de,Se,Ue,null)}encodeWithHints(d,de,Se,Ue,Ge){let Qe=b6.ISO_8859_1,gn=yC.DEFAULT_EC_PERCENT,Bi=yC.DEFAULT_AZTEC_LAYERS;return Ge!=null&&(Ge.has(JC.CHARACTER_SET)&&(Qe=_6.forName(Ge.get(JC.CHARACTER_SET).toString())),Ge.has(JC.ERROR_CORRECTION)&&(gn=La.parseInt(Ge.get(JC.ERROR_CORRECTION).toString())),Ge.has(JC.AZTEC_LAYERS)&&(Bi=La.parseInt(Ge.get(JC.AZTEC_LAYERS).toString()))),V4.encodeLayers(d,de,Se,Ue,Qe,gn,Bi)}static encodeLayers(d,de,Se,Ue,Ge,Qe,gn){if(de!==Rb.AZTEC)throw new m("Can only encode AZTEC, but got "+de);let Bi=yC.encode(xy.getBytes(d,Ge),Qe,gn);return V4.renderResult(Bi,Se,Ue)}static renderResult(d,de,Se){let Ue=d.getMatrix();if(Ue==null)throw new Qb;let Ge=Ue.getWidth(),Qe=Ue.getHeight(),gn=Math.max(de,Ge),Bi=Math.max(Se,Qe),Ks=Math.min(gn/Ge,Bi/Qe),gy=(gn-Ge*Ks)/2,Cy=(Bi-Qe*Ks)/2,Oy=new Dy(gn,Bi);for(let Nb=0,qb=Cy;Nb<Qe;Nb++,qb+=Ks)for(let Ub=0,e2=gy;Ub<Ge;Ub++,e2+=Ks)Ue.get(Ub,Nb)&&Oy.setRegion(e2,qb,Ks,Ks);return Oy}}n.ArgumentException=c,n.ArithmeticException=A2,n.AztecCode=VO,n.AztecCodeReader=n2,n.AztecCodeWriter=V4,n.AztecDecoder=Zb,n.AztecDetector=S2,n.AztecDetectorResult=O2,n.AztecEncoder=yC,n.AztecHighLevelEncoder=UO,n.AztecPoint=a2,n.BarcodeFormat=Rb,n.Binarizer=Ne,n.BinaryBitmap=me,n.BitArray=sr,n.BitMatrix=Dy,n.BitSource=u6,n.BrowserAztecCodeReader=F2,n.BrowserBarcodeReader=FO,n.BrowserCodeReader=Jb,n.BrowserDatamatrixCodeReader=W6,n.BrowserMultiFormatReader=J6,n.BrowserPDF417Reader=Z6,n.BrowserQRCodeReader=e5,n.BrowserQRCodeSvgWriter=g4,n.CharacterSetECI=lc,n.ChecksumException=xe,n.Code128Reader=v2,n.Code39Reader=o2,n.DataMatrixDecodedBitStreamParser=cO,n.DataMatrixReader=vT,n.DecodeHintType=zs,n.DecoderResult=E2,n.DefaultGridSampler=U2,n.DetectorResult=f2,n.EAN13Reader=KC,n.EncodeHintType=JC,n.Exception=l,n.FormatException=za,n.GenericGF=k_,n.GenericGFPoly=T2,n.GlobalHistogramBinarizer=yy,n.GridSampler=x2,n.GridSamplerInstance=Q2,n.HTMLCanvasElementLuminanceSource=e0,n.HybridBinarizer=wy,n.ITFReader=b2,n.IllegalArgumentException=m,n.IllegalStateException=Qb,n.InvertedLuminanceSource=$b,n.LuminanceSource=Ay,n.MathUtils=h2,n.MultiFormatOneDReader=xT,n.MultiFormatReader=N6,n.MultiFormatWriter=n5,n.NotFoundException=Bg,n.OneDReader=M2,n.PDF417DecodedBitStreamParser=u2,n.PDF417DecoderErrorCorrection=h6,n.PDF417Reader=pT,n.PDF417ResultMetadata=g6,n.PerspectiveTransform=N2,n.PlanarYUVLuminanceSource=MO,n.QRCodeByteMatrix=Z4,n.QRCodeDataMask=bT,n.QRCodeDecodedBitStreamParser=RC,n.QRCodeDecoderErrorCorrectionLevel=wC,n.QRCodeDecoderFormatInformation=uT,n.QRCodeEncoder=xC,n.QRCodeEncoderQRCode=$4,n.QRCodeMaskUtil=UC,n.QRCodeMatrixUtil=K2,n.QRCodeMode=G2,n.QRCodeReader=XO,n.QRCodeVersion=V2,n.QRCodeWriter=k4,n.RGBLuminanceSource=B4,n.RSS14Reader=BC,n.RSSExpandedReader=w2,n.ReaderException=J4,n.ReedSolomonDecoder=zb,n.ReedSolomonEncoder=y6,n.ReedSolomonException=Vb,n.Result=l2,n.ResultMetadataType=s2,n.ResultPoint=Wb,n.StringUtils=xy,n.UnsupportedOperationException=Ty,n.VideoInputDevice=Hb,n.WhiteRectangleDetector=C2,n.WriterException=kC,n.ZXingArrays=vn,n.ZXingCharset=_6,n.ZXingInteger=La,n.ZXingStandardCharsets=b6,n.ZXingStringBuilder=Bb,n.ZXingStringEncoding=_y,n.ZXingSystem=He,Object.defineProperty(n,"__esModule",{value:!0})})}),qi$1=window,Gi$1=qi$1.ShadowRoot&&(qi$1.ShadyCSS===void 0||qi$1.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,no$1=Symbol(),mc$1=new WeakMap,ii$1=class{constructor(e,t,n){if(this._$cssResult$=!0,n!==no$1)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=t}get styleSheet(){let e=this.o,t=this.t;if(Gi$1&&e===void 0){let n=t!==void 0&&t.length===1;n&&(e=mc$1.get(t)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),n&&mc$1.set(t,e))}return e}toString(){return this.cssText}},yc=e=>new ii$1(typeof e=="string"?e:e+"",void 0,no$1),io$1=(e,...t)=>{let n=e.length===1?e[0]:t.reduce((r,o,a)=>r+(s=>{if(s._$cssResult$===!0)return s.cssText;if(typeof s=="number")return s;throw Error("Value passed to 'css' function must be a 'css' function result: "+s+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(o)+e[a+1],e[0]);return new ii$1(n,e,no$1)},ao$1=(e,t)=>{Gi$1?e.adoptedStyleSheets=t.map(n=>n instanceof CSSStyleSheet?n:n.styleSheet):t.forEach(n=>{let r=document.createElement("style"),o=qi$1.litNonce;o!==void 0&&r.setAttribute("nonce",o),r.textContent=n.cssText,e.appendChild(r)})},Qi$1=Gi$1?e=>e:e=>e instanceof CSSStyleSheet?(t=>{let n="";for(let r of t.cssRules)n+=r.cssText;return yc(n)})(e):e,oo$1,zi$1=window,vc$1=zi$1.trustedTypes,Jf$1=vc$1?vc$1.emptyScript:"",_c=zi$1.reactiveElementPolyfillSupport,co={toAttribute(e,t){switch(t){case Boolean:e=e?Jf$1:null;break;case Object:case Array:e=e==null?e:JSON.stringify(e)}return e},fromAttribute(e,t){let n=e;switch(t){case Boolean:n=e!==null;break;case Number:n=e===null?null:Number(e);break;case Object:case Array:try{n=JSON.parse(e)}catch{n=null}}return n}},bc$1=(e,t)=>t!==e&&(t==t||e==e),so$1={attribute:!0,type:String,converter:co,reflect:!1,hasChanged:bc$1},xr$1=class extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this.u()}static addInitializer(e){var t;(t=this.h)!==null&&t!==void 0||(this.h=[]),this.h.push(e)}static get observedAttributes(){this.finalize();let e=[];return this.elementProperties.forEach((t,n)=>{let r=this._$Ep(n,t);r!==void 0&&(this._$Ev.set(r,n),e.push(r))}),e}static createProperty(e,t=so$1){if(t.state&&(t.attribute=!1),this.finalize(),this.elementProperties.set(e,t),!t.noAccessor&&!this.prototype.hasOwnProperty(e)){let n=typeof e=="symbol"?Symbol():"__"+e,r=this.getPropertyDescriptor(e,n,t);r!==void 0&&Object.defineProperty(this.prototype,e,r)}}static getPropertyDescriptor(e,t,n){return{get(){return this[t]},set(r){let o=this[e];this[t]=r,this.requestUpdate(e,o,n)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)||so$1}static finalize(){if(this.hasOwnProperty("finalized"))return!1;this.finalized=!0;let e=Object.getPrototypeOf(this);if(e.finalize(),this.elementProperties=new Map(e.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){let t=this.properties,n=[...Object.getOwnPropertyNames(t),...Object.getOwnPropertySymbols(t)];for(let r of n)this.createProperty(r,t[r])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(e){let t=[];if(Array.isArray(e)){let n=new Set(e.flat(1/0).reverse());for(let r of n)t.unshift(Qi$1(r))}else e!==void 0&&t.push(Qi$1(e));return t}static _$Ep(e,t){let n=t.attribute;return n===!1?void 0:typeof n=="string"?n:typeof e=="string"?e.toLowerCase():void 0}u(){var e;this._$E_=new Promise(t=>this.enableUpdating=t),this._$AL=new Map,this._$Eg(),this.requestUpdate(),(e=this.constructor.h)===null||e===void 0||e.forEach(t=>t(this))}addController(e){var t,n;((t=this._$ES)!==null&&t!==void 0?t:this._$ES=[]).push(e),this.renderRoot!==void 0&&this.isConnected&&((n=e.hostConnected)===null||n===void 0||n.call(e))}removeController(e){var t;(t=this._$ES)===null||t===void 0||t.splice(this._$ES.indexOf(e)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach((e,t)=>{this.hasOwnProperty(t)&&(this._$Ei.set(t,this[t]),delete this[t])})}createRenderRoot(){var e;let t=(e=this.shadowRoot)!==null&&e!==void 0?e:this.attachShadow(this.constructor.shadowRootOptions);return ao$1(t,this.constructor.elementStyles),t}connectedCallback(){var e;this.renderRoot===void 0&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$ES)===null||e===void 0||e.forEach(t=>{var n;return(n=t.hostConnected)===null||n===void 0?void 0:n.call(t)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$ES)===null||e===void 0||e.forEach(t=>{var n;return(n=t.hostDisconnected)===null||n===void 0?void 0:n.call(t)})}attributeChangedCallback(e,t,n){this._$AK(e,n)}_$EO(e,t,n=so$1){var r;let o=this.constructor._$Ep(e,n);if(o!==void 0&&n.reflect===!0){let a=(((r=n.converter)===null||r===void 0?void 0:r.toAttribute)!==void 0?n.converter:co).toAttribute(t,n.type);this._$El=e,a==null?this.removeAttribute(o):this.setAttribute(o,a),this._$El=null}}_$AK(e,t){var n;let r=this.constructor,o=r._$Ev.get(e);if(o!==void 0&&this._$El!==o){let a=r.getPropertyOptions(o),s=typeof a.converter=="function"?{fromAttribute:a.converter}:((n=a.converter)===null||n===void 0?void 0:n.fromAttribute)!==void 0?a.converter:co;this._$El=o,this[o]=s.fromAttribute(t,a.type),this._$El=null}}requestUpdate(e,t,n){let r=!0;e!==void 0&&(((n=n||this.constructor.getPropertyOptions(e)).hasChanged||bc$1)(this[e],t)?(this._$AL.has(e)||this._$AL.set(e,t),n.reflect===!0&&this._$El!==e&&(this._$EC===void 0&&(this._$EC=new Map),this._$EC.set(e,n))):r=!1),!this.isUpdatePending&&r&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(t){Promise.reject(t)}let e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var e;if(!this.isUpdatePending)return;this.hasUpdated,this._$Ei&&(this._$Ei.forEach((r,o)=>this[o]=r),this._$Ei=void 0);let t=!1,n=this._$AL;try{t=this.shouldUpdate(n),t?(this.willUpdate(n),(e=this._$ES)===null||e===void 0||e.forEach(r=>{var o;return(o=r.hostUpdate)===null||o===void 0?void 0:o.call(r)}),this.update(n)):this._$Ek()}catch(r){throw t=!1,this._$Ek(),r}t&&this._$AE(n)}willUpdate(e){}_$AE(e){var t;(t=this._$ES)===null||t===void 0||t.forEach(n=>{var r;return(r=n.hostUpdated)===null||r===void 0?void 0:r.call(n)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(e){return!0}update(e){this._$EC!==void 0&&(this._$EC.forEach((t,n)=>this._$EO(n,this[n],t)),this._$EC=void 0),this._$Ek()}updated(e){}firstUpdated(e){}};xr$1.finalized=!0,xr$1.elementProperties=new Map,xr$1.elementStyles=[],xr$1.shadowRootOptions={mode:"open"},_c==null||_c({ReactiveElement:xr$1}),((oo$1=zi$1.reactiveElementVersions)!==null&&oo$1!==void 0?oo$1:zi$1.reactiveElementVersions=[]).push("1.4.1");var lo$1,Hi$1=window,Sn$1=Hi$1.trustedTypes,xc$1=Sn$1?Sn$1.createPolicy("lit-html",{createHTML:e=>e}):void 0,Fr$1=`lit$${(Math.random()+"").slice(9)}$`,Tc="?"+Fr$1,ed$1=`<${Tc}>`,An$1=document,oi$1=(e="")=>An$1.createComment(e),si=e=>e===null||typeof e!="object"&&typeof e!="function",Oc=Array.isArray,td$1=e=>Oc(e)||typeof(e==null?void 0:e[Symbol.iterator])=="function",ai$1=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,wc$1=/-->/g,Cc$1=/>/g,en$1=RegExp(`>|[ 	
\f\r](?:([^\\s"'>=/]+)([ 	
\f\r]*=[ 	
\f\r]*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),Ec$1=/'/g,Sc$1=/"/g,Dc$1=/^(?:script|style|textarea|title)$/i,Nc$1=e=>(t,...n)=>({_$litType$:e,strings:t,values:n}),ze$1=Nc$1(1),tn$1=Symbol.for("lit-noChange"),pt$2=Symbol.for("lit-nothing"),Ac=new WeakMap,Rc$1=(e,t,n)=>{var r,o;let a=(r=n==null?void 0:n.renderBefore)!==null&&r!==void 0?r:t,s=a._$litPart$;if(s===void 0){let u=(o=n==null?void 0:n.renderBefore)!==null&&o!==void 0?o:null;a._$litPart$=s=new nn$1(t.insertBefore(oi$1(),u),u,void 0,n!=null?n:{})}return s._$AI(e),s},En$1=An$1.createTreeWalker(An$1,129,null,!1),rd$1=(e,t)=>{let n=e.length-1,r=[],o,a=t===2?"<svg>":"",s=ai$1;for(let l=0;l<n;l++){let c=e[l],m,me,xe=-1,Ne=0;for(;Ne<c.length&&(s.lastIndex=Ne,me=s.exec(c),me!==null);)Ne=s.lastIndex,s===ai$1?me[1]==="!--"?s=wc$1:me[1]!==void 0?s=Cc$1:me[2]!==void 0?(Dc$1.test(me[2])&&(o=RegExp("</"+me[2],"g")),s=en$1):me[3]!==void 0&&(s=en$1):s===en$1?me[0]===">"?(s=o!=null?o:ai$1,xe=-1):me[1]===void 0?xe=-2:(xe=s.lastIndex-me[2].length,m=me[1],s=me[3]===void 0?en$1:me[3]==='"'?Sc$1:Ec$1):s===Sc$1||s===Ec$1?s=en$1:s===wc$1||s===Cc$1?s=ai$1:(s=en$1,o=void 0);let He=s===en$1&&e[l+1].startsWith("/>")?" ":"";a+=s===ai$1?c+ed$1:xe>=0?(r.push(m),c.slice(0,xe)+"$lit$"+c.slice(xe)+Fr$1+He):c+Fr$1+(xe===-2?(r.push(void 0),l):He)}let u=a+(e[n]||"<?>")+(t===2?"</svg>":"");if(!Array.isArray(e)||!e.hasOwnProperty("raw"))throw Error("invalid template strings array");return[xc$1!==void 0?xc$1.createHTML(u):u,r]},rn$1=class{constructor({strings:e,_$litType$:t},n){let r;this.parts=[];let o=0,a=0,s=e.length-1,u=this.parts,[l,c]=rd$1(e,t);if(this.el=rn$1.createElement(l,n),En$1.currentNode=this.el.content,t===2){let m=this.el.content,me=m.firstChild;me.remove(),m.append(...me.childNodes)}for(;(r=En$1.nextNode())!==null&&u.length<s;){if(r.nodeType===1){if(r.hasAttributes()){let m=[];for(let me of r.getAttributeNames())if(me.endsWith("$lit$")||me.startsWith(Fr$1)){let xe=c[a++];if(m.push(me),xe!==void 0){let Ne=r.getAttribute(xe.toLowerCase()+"$lit$").split(Fr$1),He=/([.?@])?(.*)/.exec(xe);u.push({type:1,index:o,name:He[2],strings:Ne,ctor:He[1]==="."?fo$1:He[1]==="?"?ho$1:He[1]==="@"?po$1:Tn$1})}else u.push({type:6,index:o})}for(let me of m)r.removeAttribute(me)}if(Dc$1.test(r.tagName)){let m=r.textContent.split(Fr$1),me=m.length-1;if(me>0){r.textContent=Sn$1?Sn$1.emptyScript:"";for(let xe=0;xe<me;xe++)r.append(m[xe],oi$1()),En$1.nextNode(),u.push({type:2,index:++o});r.append(m[me],oi$1())}}}else if(r.nodeType===8)if(r.data===Tc)u.push({type:2,index:o});else{let m=-1;for(;(m=r.data.indexOf(Fr$1,m+1))!==-1;)u.push({type:7,index:o}),m+=Fr$1.length-1}o++}}static createElement(e,t){let n=An$1.createElement("template");return n.innerHTML=e,n}};function In$1(e,t,n=e,r){var o,a,s,u;if(t===tn$1)return t;let l=r!==void 0?(o=n._$Cl)===null||o===void 0?void 0:o[r]:n._$Cu,c=si(t)?void 0:t._$litDirective$;return(l==null?void 0:l.constructor)!==c&&((a=l==null?void 0:l._$AO)===null||a===void 0||a.call(l,!1),c===void 0?l=void 0:(l=new c(e),l._$AT(e,n,r)),r!==void 0?((s=(u=n)._$Cl)!==null&&s!==void 0?s:u._$Cl=[])[r]=l:n._$Cu=l),l!==void 0&&(t=In$1(e,l._$AS(e,t.values),l,r)),t}var uo$1=class{constructor(e,t){this.v=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}p(e){var t;let{el:{content:n},parts:r}=this._$AD,o=((t=e==null?void 0:e.creationScope)!==null&&t!==void 0?t:An$1).importNode(n,!0);En$1.currentNode=o;let a=En$1.nextNode(),s=0,u=0,l=r[0];for(;l!==void 0;){if(s===l.index){let c;l.type===2?c=new nn$1(a,a.nextSibling,this,e):l.type===1?c=new l.ctor(a,l.name,l.strings,this,e):l.type===6&&(c=new go$1(a,this,e)),this.v.push(c),l=r[++u]}s!==(l==null?void 0:l.index)&&(a=En$1.nextNode(),s++)}return o}m(e){let t=0;for(let n of this.v)n!==void 0&&(n.strings!==void 0?(n._$AI(e,n,t),t+=n.strings.length-2):n._$AI(e[t])),t++}},nn$1=class{constructor(e,t,n,r){var o;this.type=2,this._$AH=pt$2,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=n,this.options=r,this._$C_=(o=r==null?void 0:r.isConnected)===null||o===void 0||o}get _$AU(){var e,t;return(t=(e=this._$AM)===null||e===void 0?void 0:e._$AU)!==null&&t!==void 0?t:this._$C_}get parentNode(){let e=this._$AA.parentNode,t=this._$AM;return t!==void 0&&e.nodeType===11&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){e=In$1(this,e,t),si(e)?e===pt$2||e==null||e===""?(this._$AH!==pt$2&&this._$AR(),this._$AH=pt$2):e!==this._$AH&&e!==tn$1&&this.$(e):e._$litType$!==void 0?this.T(e):e.nodeType!==void 0?this.k(e):td$1(e)?this.O(e):this.$(e)}S(e,t=this._$AB){return this._$AA.parentNode.insertBefore(e,t)}k(e){this._$AH!==e&&(this._$AR(),this._$AH=this.S(e))}$(e){this._$AH!==pt$2&&si(this._$AH)?this._$AA.nextSibling.data=e:this.k(An$1.createTextNode(e)),this._$AH=e}T(e){var t;let{values:n,_$litType$:r}=e,o=typeof r=="number"?this._$AC(e):(r.el===void 0&&(r.el=rn$1.createElement(r.h,this.options)),r);if(((t=this._$AH)===null||t===void 0?void 0:t._$AD)===o)this._$AH.m(n);else{let a=new uo$1(o,this),s=a.p(this.options);a.m(n),this.k(s),this._$AH=a}}_$AC(e){let t=Ac.get(e.strings);return t===void 0&&Ac.set(e.strings,t=new rn$1(e)),t}O(e){Oc(this._$AH)||(this._$AH=[],this._$AR());let t=this._$AH,n,r=0;for(let o of e)r===t.length?t.push(n=new nn$1(this.S(oi$1()),this.S(oi$1()),this,this.options)):n=t[r],n._$AI(o),r++;r<t.length&&(this._$AR(n&&n._$AB.nextSibling,r),t.length=r)}_$AR(e=this._$AA.nextSibling,t){var n;for((n=this._$AP)===null||n===void 0||n.call(this,!1,!0,t);e&&e!==this._$AB;){let r=e.nextSibling;e.remove(),e=r}}setConnected(e){var t;this._$AM===void 0&&(this._$C_=e,(t=this._$AP)===null||t===void 0||t.call(this,e))}},Tn$1=class{constructor(e,t,n,r,o){this.type=1,this._$AH=pt$2,this._$AN=void 0,this.element=e,this.name=t,this._$AM=r,this.options=o,n.length>2||n[0]!==""||n[1]!==""?(this._$AH=Array(n.length-1).fill(new String),this.strings=n):this._$AH=pt$2}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(e,t=this,n,r){let o=this.strings,a=!1;if(o===void 0)e=In$1(this,e,t,0),a=!si(e)||e!==this._$AH&&e!==tn$1,a&&(this._$AH=e);else{let s=e,u,l;for(e=o[0],u=0;u<o.length-1;u++)l=In$1(this,s[n+u],t,u),l===tn$1&&(l=this._$AH[u]),a||(a=!si(l)||l!==this._$AH[u]),l===pt$2?e=pt$2:e!==pt$2&&(e+=(l!=null?l:"")+o[u+1]),this._$AH[u]=l}a&&!r&&this.P(e)}P(e){e===pt$2?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e!=null?e:"")}},fo$1=class extends Tn$1{constructor(){super(...arguments),this.type=3}P(e){this.element[this.name]=e===pt$2?void 0:e}},nd=Sn$1?Sn$1.emptyScript:"",ho$1=class extends Tn$1{constructor(){super(...arguments),this.type=4}P(e){e&&e!==pt$2?this.element.setAttribute(this.name,nd):this.element.removeAttribute(this.name)}},po$1=class extends Tn$1{constructor(e,t,n,r,o){super(e,t,n,r,o),this.type=5}_$AI(e,t=this){var n;if((e=(n=In$1(this,e,t,0))!==null&&n!==void 0?n:pt$2)===tn$1)return;let r=this._$AH,o=e===pt$2&&r!==pt$2||e.capture!==r.capture||e.once!==r.once||e.passive!==r.passive,a=e!==pt$2&&(r===pt$2||o);o&&this.element.removeEventListener(this.name,this,r),a&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var t,n;typeof this._$AH=="function"?this._$AH.call((n=(t=this.options)===null||t===void 0?void 0:t.host)!==null&&n!==void 0?n:this.element,e):this._$AH.handleEvent(e)}},go$1=class{constructor(e,t,n){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=n}get _$AU(){return this._$AM._$AU}_$AI(e){In$1(this,e)}},Ic$1=Hi$1.litHtmlPolyfillSupport;Ic$1==null||Ic$1(rn$1,nn$1),((lo$1=Hi$1.litHtmlVersions)!==null&&lo$1!==void 0?lo$1:Hi$1.litHtmlVersions=[]).push("2.3.1");var mo$1,yo$1,Br$1=class extends xr$1{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var e,t;let n=super.createRenderRoot();return(e=(t=this.renderOptions).renderBefore)!==null&&e!==void 0||(t.renderBefore=n.firstChild),n}update(e){let t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=Rc$1(t,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)===null||e===void 0||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)===null||e===void 0||e.setConnected(!1)}render(){return tn$1}};Br$1.finalized=!0,Br$1._$litElement$=!0,(mo$1=globalThis.litElementHydrateSupport)===null||mo$1===void 0||mo$1.call(globalThis,{LitElement:Br$1});var Mc$1=globalThis.litElementPolyfillSupport;Mc$1==null||Mc$1({LitElement:Br$1});((yo$1=globalThis.litElementVersions)!==null&&yo$1!==void 0?yo$1:globalThis.litElementVersions=[]).push("3.2.2");var Pc$1=e=>t=>typeof t=="function"?((n,r)=>(customElements.define(n,r),r))(e,t):((n,r)=>{let{kind:o,elements:a}=r;return{kind:o,elements:a,finisher(s){customElements.define(n,s)}}})(e,t),id$1=(e,t)=>t.kind==="method"&&t.descriptor&&!("value"in t.descriptor)?{...t,finisher(n){n.createProperty(t.key,e)}}:{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:t.key,initializer(){typeof t.initializer=="function"&&(this[t.key]=t.initializer.call(this))},finisher(n){n.createProperty(t.key,e)}};function Gt$2(e){return(t,n)=>n!==void 0?((r,o,a)=>{o.constructor.createProperty(a,r)})(e,t,n):id$1(e,t)}function On$1(e){return Gt$2({...e,state:!0})}var vo$1;((vo$1=window.HTMLSlotElement)===null||vo$1===void 0?void 0:vo$1.prototype.assignedElements)!=null;var nl$1=ro$1(rl$1(),1),{__extends:st$2,__assign:j$2,__rest:dr$1,__decorate:H1$1,__param:W1$1,__metadata:K1$1,__awaiter:wr$1,__generator:Cr$1,__exportStar:Y1$1,__createBinding:X1$1,__values:Z1$1,__read:J1$1,__spread:ep$1,__spreadArrays:tp$1,__spreadArray:$r$1,__await:rp$1,__asyncGenerator:np$1,__asyncDelegator:ip$1,__asyncValues:ap$1,__makeTemplateObject:op$1,__importStar:sp$1,__importDefault:cp$1,__classPrivateFieldGet:lp$1,__classPrivateFieldSet:up$1,__classPrivateFieldIn:fp$1}=nl$1.default,bo$1="Invariant Violation",il$1=Object.setPrototypeOf,ad$1=il$1===void 0?function(e,t){return e.__proto__=t,e}:il$1,_e$1=function(e){st$2(t,e);function t(n){n===void 0&&(n=bo$1);var r=e.call(this,typeof n=="number"?bo$1+": "+n+" (see https://github.com/apollographql/invariant-packages)":n)||this;return r.framesToPop=1,r.name=bo$1,ad$1(r,t.prototype),r}return t}(Error);function ee$2(e,t){if(!e)throw new _e$1(t)}var Zi$1=["debug","log","warn","error","silent"],xo$1=Zi$1.indexOf("log");function Xi$1(e){return function(){if(Zi$1.indexOf(e)>=xo$1){var t=console[e]||console.log;return t.apply(console,arguments)}}}(function(e){e.debug=Xi$1("debug"),e.log=Xi$1("log"),e.warn=Xi$1("warn"),e.error=Xi$1("error")})(ee$2||(ee$2={}));function al$1(e){var t=Zi$1[xo$1];return xo$1=Math.max(0,Zi$1.indexOf(e)),t}function gt$2(e){try{return e()}catch{}}var Ji$1=gt$2(function(){return globalThis})||gt$2(function(){return window})||gt$2(function(){return self})||gt$2(function(){return global})||gt$2(function(){return gt$2.constructor("return this")()}),ol$1="__",sl$1=[ol$1,ol$1].join("DEV");function od$1(){try{return Boolean(__DEV__)}catch{return Object.defineProperty(Ji$1,sl$1,{value:gt$2(function(){return"production"})!=="production",enumerable:!1,configurable:!0,writable:!0}),Ji$1[sl$1]}}var an$1=od$1();function jr$1(e){try{return e()}catch{}}var wo$1=jr$1(function(){return globalThis})||jr$1(function(){return window})||jr$1(function(){return self})||jr$1(function(){return global})||jr$1(function(){return jr$1.constructor("return this")()}),Co$1=!1;function sd$1(){wo$1&&!jr$1(function(){return"production"})&&!jr$1(function(){return process})&&(Object.defineProperty(wo$1,"process",{value:{env:{NODE_ENV:"production"}},configurable:!0,enumerable:!1,writable:!0}),Co$1=!0)}sd$1();function Eo$1(){Co$1&&(delete wo$1.process,Co$1=!1)}var cl$1=typeof Symbol=="function"&&Symbol.toStringTag!=null?Symbol.toStringTag:"@@toStringTag";function So$1(e,t){var n=Boolean(e);if(!n)throw new Error(t!=null?t:"Unexpected invariant triggered.")}var cd$1=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):void 0,li$1=cd$1;function ea$1(e){var t=e.prototype.toJSON;typeof t=="function"||So$1(0),e.prototype.inspect=t,li$1&&(e.prototype[li$1]=t)}var ll$1=function(){function e(n,r,o){this.start=n.start,this.end=r.end,this.startToken=n,this.endToken=r,this.source=o}var t=e.prototype;return t.toJSON=function(){return{start:this.start,end:this.end}},e}();ea$1(ll$1);var ul$1=function(){function e(n,r,o,a,s,u,l){this.kind=n,this.start=r,this.end=o,this.line=a,this.column=s,this.value=l,this.prev=u,this.next=null}var t=e.prototype;return t.toJSON=function(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}},e}();ea$1(ul$1);function Ao$1(e){return e!=null&&typeof e.kind=="string"}function ta$1(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ta$1=function(t){return typeof t}:ta$1=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ta$1(e)}var ld$1=10,fl$1=2;function ui(e){return ra$1(e,[])}function ra$1(e,t){switch(ta$1(e)){case"string":return JSON.stringify(e);case"function":return e.name?"[function ".concat(e.name,"]"):"[function]";case"object":return e===null?"null":ud$1(e,t);default:return String(e)}}function ud$1(e,t){if(t.indexOf(e)!==-1)return"[Circular]";var n=[].concat(t,[e]),r=hd$1(e);if(r!==void 0){var o=r.call(e);if(o!==e)return typeof o=="string"?o:ra$1(o,n)}else if(Array.isArray(e))return dd$1(e,n);return fd$1(e,n)}function fd$1(e,t){var n=Object.keys(e);if(n.length===0)return"{}";if(t.length>fl$1)return"["+pd$1(e)+"]";var r=n.map(function(o){var a=ra$1(e[o],t);return o+": "+a});return"{ "+r.join(", ")+" }"}function dd$1(e,t){if(e.length===0)return"[]";if(t.length>fl$1)return"[Array]";for(var n=Math.min(ld$1,e.length),r=e.length-n,o=[],a=0;a<n;++a)o.push(ra$1(e[a],t));return r===1?o.push("... 1 more item"):r>1&&o.push("... ".concat(r," more items")),"["+o.join(", ")+"]"}function hd$1(e){var t=e[String(li$1)];if(typeof t=="function")return t;if(typeof e.inspect=="function")return e.inspect}function pd$1(e){var t=Object.prototype.toString.call(e).replace(/^\[object /,"").replace(/]$/,"");if(t==="Object"&&typeof e.constructor=="function"){var n=e.constructor.name;if(typeof n=="string"&&n!=="")return n}return t}function fi$1(e,t){var n=Boolean(e);if(!n)throw new Error(t)}function dl$1(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function gd$1(e,t,n){return t&&dl$1(e.prototype,t),n&&dl$1(e,n),e}var na$1=function(){function e(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"GraphQL request",r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{line:1,column:1};typeof t=="string"||fi$1(0,"Body must be a string. Received: ".concat(ui(t),".")),this.body=t,this.name=n,this.locationOffset=r,this.locationOffset.line>0||fi$1(0,"line in locationOffset is 1-indexed and must be positive."),this.locationOffset.column>0||fi$1(0,"column in locationOffset is 1-indexed and must be positive.")}return gd$1(e,[{key:cl$1,get:function(){return"Source"}}]),e}();function hl$1(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=e.indexOf(`
`)===-1,o=e[0]===" "||e[0]==="	",a=e[e.length-1]==='"',s=e[e.length-1]==="\\",u=!r||a||s||n,l="";return u&&!(r&&o)&&(l+=`
`+t),l+=t?e.replace(/\n/g,`
`+t):e,u&&(l+=`
`),'"""'+l.replace(/"""/g,'\\"""')+'"""'}var md$1={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},di$1=Object.freeze({});function bt$2(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:md$1,r=void 0,o=Array.isArray(e),a=[e],s=-1,u=[],l=void 0,c=void 0,m=void 0,me=[],xe=[],Ne=e;do{s++;var He=s===a.length,Ye=He&&u.length!==0;if(He){if(c=xe.length===0?void 0:me[me.length-1],l=m,m=xe.pop(),Ye){if(o)l=l.slice();else{for(var Je={},vn=0,La=Object.keys(l);vn<La.length;vn++){var sr=La[vn];Je[sr]=l[sr]}l=Je}for(var Zr=0,zs=0;zs<u.length;zs++){var za=u[zs][0],Hs=u[zs][1];o&&(za-=Zr),o&&Hs===null?(l.splice(za,1),Zr++):l[za]=Hs}}s=r.index,a=r.keys,u=r.edits,o=r.inArray,r=r.prev}else{if(c=m?o?s:a[s]:void 0,l=m?m[c]:Ne,l==null)continue;m&&me.push(c)}var lc=void 0;if(!Array.isArray(l)){if(!Ao$1(l))throw new Error("Invalid AST Node: ".concat(ui(l),"."));var Ty=Io$1(t,l.kind,He);if(Ty){if(lc=Ty.call(t,l,c,m,me,xe),lc===di$1)break;if(lc===!1){if(!He){me.pop();continue}}else if(lc!==void 0&&(u.push([c,lc]),!He))if(Ao$1(lc))l=lc;else{me.pop();continue}}}if(lc===void 0&&Ye&&u.push([c,l]),He)me.pop();else{var _y;r={inArray:o,index:s,keys:a,edits:u,prev:r},o=Array.isArray(l),a=o?l:(_y=n[l.kind])!==null&&_y!==void 0?_y:[],s=-1,u=[],m&&xe.push(m),m=l}}while(r!==void 0);return u.length!==0&&(Ne=u[u.length-1][1]),Ne}function Io$1(e,t,n){var r=e[t];if(r){if(!n&&typeof r=="function")return r;var o=n?r.leave:r.enter;if(typeof o=="function")return o}else{var a=n?e.leave:e.enter;if(a){if(typeof a=="function")return a;var s=a[t];if(typeof s=="function")return s}}}function Nn$1(e){return bt$2(e,{leave:vd$1})}var yd$1=80,vd$1={Name:function(e){return e.value},Variable:function(e){return"$"+e.name},Document:function(e){return oe$1(e.definitions,`

`)+`
`},OperationDefinition:function(e){var t=e.operation,n=e.name,r=Ze("(",oe$1(e.variableDefinitions,", "),")"),o=oe$1(e.directives," "),a=e.selectionSet;return!n&&!o&&!r&&t==="query"?a:oe$1([t,oe$1([n,r]),o,a]," ")},VariableDefinition:function(e){var t=e.variable,n=e.type,r=e.defaultValue,o=e.directives;return t+": "+n+Ze(" = ",r)+Ze(" ",oe$1(o," "))},SelectionSet:function(e){var t=e.selections;return tr$1(t)},Field:function(e){var t=e.alias,n=e.name,r=e.arguments,o=e.directives,a=e.selectionSet,s=Ze("",t,": ")+n,u=s+Ze("(",oe$1(r,", "),")");return u.length>yd$1&&(u=s+Ze(`(
`,ia$1(oe$1(r,`
`)),`
)`)),oe$1([u,oe$1(o," "),a]," ")},Argument:function(e){var t=e.name,n=e.value;return t+": "+n},FragmentSpread:function(e){var t=e.name,n=e.directives;return"..."+t+Ze(" ",oe$1(n," "))},InlineFragment:function(e){var t=e.typeCondition,n=e.directives,r=e.selectionSet;return oe$1(["...",Ze("on ",t),oe$1(n," "),r]," ")},FragmentDefinition:function(e){var t=e.name,n=e.typeCondition,r=e.variableDefinitions,o=e.directives,a=e.selectionSet;return"fragment ".concat(t).concat(Ze("(",oe$1(r,", "),")")," ")+"on ".concat(n," ").concat(Ze("",oe$1(o," ")," "))+a},IntValue:function(e){var t=e.value;return t},FloatValue:function(e){var t=e.value;return t},StringValue:function(e,t){var n=e.value,r=e.block;return r?hl$1(n,t==="description"?"":"  "):JSON.stringify(n)},BooleanValue:function(e){var t=e.value;return t?"true":"false"},NullValue:function(){return"null"},EnumValue:function(e){var t=e.value;return t},ListValue:function(e){var t=e.values;return"["+oe$1(t,", ")+"]"},ObjectValue:function(e){var t=e.fields;return"{"+oe$1(t,", ")+"}"},ObjectField:function(e){var t=e.name,n=e.value;return t+": "+n},Directive:function(e){var t=e.name,n=e.arguments;return"@"+t+Ze("(",oe$1(n,", "),")")},NamedType:function(e){var t=e.name;return t},ListType:function(e){var t=e.type;return"["+t+"]"},NonNullType:function(e){var t=e.type;return t+"!"},SchemaDefinition:er(function(e){var t=e.directives,n=e.operationTypes;return oe$1(["schema",oe$1(t," "),tr$1(n)]," ")}),OperationTypeDefinition:function(e){var t=e.operation,n=e.type;return t+": "+n},ScalarTypeDefinition:er(function(e){var t=e.name,n=e.directives;return oe$1(["scalar",t,oe$1(n," ")]," ")}),ObjectTypeDefinition:er(function(e){var t=e.name,n=e.interfaces,r=e.directives,o=e.fields;return oe$1(["type",t,Ze("implements ",oe$1(n," & ")),oe$1(r," "),tr$1(o)]," ")}),FieldDefinition:er(function(e){var t=e.name,n=e.arguments,r=e.type,o=e.directives;return t+(pl$1(n)?Ze(`(
`,ia$1(oe$1(n,`
`)),`
)`):Ze("(",oe$1(n,", "),")"))+": "+r+Ze(" ",oe$1(o," "))}),InputValueDefinition:er(function(e){var t=e.name,n=e.type,r=e.defaultValue,o=e.directives;return oe$1([t+": "+n,Ze("= ",r),oe$1(o," ")]," ")}),InterfaceTypeDefinition:er(function(e){var t=e.name,n=e.interfaces,r=e.directives,o=e.fields;return oe$1(["interface",t,Ze("implements ",oe$1(n," & ")),oe$1(r," "),tr$1(o)]," ")}),UnionTypeDefinition:er(function(e){var t=e.name,n=e.directives,r=e.types;return oe$1(["union",t,oe$1(n," "),r&&r.length!==0?"= "+oe$1(r," | "):""]," ")}),EnumTypeDefinition:er(function(e){var t=e.name,n=e.directives,r=e.values;return oe$1(["enum",t,oe$1(n," "),tr$1(r)]," ")}),EnumValueDefinition:er(function(e){var t=e.name,n=e.directives;return oe$1([t,oe$1(n," ")]," ")}),InputObjectTypeDefinition:er(function(e){var t=e.name,n=e.directives,r=e.fields;return oe$1(["input",t,oe$1(n," "),tr$1(r)]," ")}),DirectiveDefinition:er(function(e){var t=e.name,n=e.arguments,r=e.repeatable,o=e.locations;return"directive @"+t+(pl$1(n)?Ze(`(
`,ia$1(oe$1(n,`
`)),`
)`):Ze("(",oe$1(n,", "),")"))+(r?" repeatable":"")+" on "+oe$1(o," | ")}),SchemaExtension:function(e){var t=e.directives,n=e.operationTypes;return oe$1(["extend schema",oe$1(t," "),tr$1(n)]," ")},ScalarTypeExtension:function(e){var t=e.name,n=e.directives;return oe$1(["extend scalar",t,oe$1(n," ")]," ")},ObjectTypeExtension:function(e){var t=e.name,n=e.interfaces,r=e.directives,o=e.fields;return oe$1(["extend type",t,Ze("implements ",oe$1(n," & ")),oe$1(r," "),tr$1(o)]," ")},InterfaceTypeExtension:function(e){var t=e.name,n=e.interfaces,r=e.directives,o=e.fields;return oe$1(["extend interface",t,Ze("implements ",oe$1(n," & ")),oe$1(r," "),tr$1(o)]," ")},UnionTypeExtension:function(e){var t=e.name,n=e.directives,r=e.types;return oe$1(["extend union",t,oe$1(n," "),r&&r.length!==0?"= "+oe$1(r," | "):""]," ")},EnumTypeExtension:function(e){var t=e.name,n=e.directives,r=e.values;return oe$1(["extend enum",t,oe$1(n," "),tr$1(r)]," ")},InputObjectTypeExtension:function(e){var t=e.name,n=e.directives,r=e.fields;return oe$1(["extend input",t,oe$1(n," "),tr$1(r)]," ")}};function er(e){return function(t){return oe$1([t.description,e(t)],`
`)}}function oe$1(e){var t,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return(t=e==null?void 0:e.filter(function(r){return r}).join(n))!==null&&t!==void 0?t:""}function tr$1(e){return Ze(`{
`,ia$1(oe$1(e,`
`)),`
}`)}function Ze(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";return t!=null&&t!==""?e+t+n:""}function ia$1(e){return Ze("  ",e.replace(/\n/g,`
  `))}function _d$1(e){return e.indexOf(`
`)!==-1}function pl$1(e){return e!=null&&e.some(_d$1)}function gl$1(){return Eo$1()}function xd$1(){__DEV__?ee$2(typeof an$1=="boolean",an$1):ee$2(typeof an$1=="boolean",36)}gl$1();xd$1();function Er$1(e,t){var n=e.directives;return!n||!n.length?!0:yl$1(n).every(function(r){var o=r.directive,a=r.ifArgument,s=!1;return a.value.kind==="Variable"?(s=t&&t[a.value.name.value],__DEV__?ee$2(s!==void 0,"Invalid variable referenced in @".concat(o.name.value," directive.")):ee$2(s!==void 0,37)):s=a.value.value,o.name.value==="skip"?!s:s})}function ml$1(e){var t=[];return bt$2(e,{Directive:function(n){t.push(n.name.value)}}),t}function hi$1(e,t){return ml$1(t).some(function(n){return e.indexOf(n)>-1})}function To$1(e){return e&&hi$1(["client"],e)&&hi$1(["export"],e)}function wd$1(e){var t=e.name.value;return t==="skip"||t==="include"}function yl$1(e){var t=[];return e&&e.length&&e.forEach(function(n){if(wd$1(n)){var r=n.arguments,o=n.name.value;__DEV__?ee$2(r&&r.length===1,"Incorrect number of arguments for the @".concat(o," directive.")):ee$2(r&&r.length===1,38);var a=r[0];__DEV__?ee$2(a.name&&a.name.value==="if","Invalid argument for the @".concat(o," directive.")):ee$2(a.name&&a.name.value==="if",39);var s=a.value;__DEV__?ee$2(s&&(s.kind==="Variable"||s.kind==="BooleanValue"),"Argument for the @".concat(o," directive must be a variable or a boolean value.")):ee$2(s&&(s.kind==="Variable"||s.kind==="BooleanValue"),40),t.push({directive:n,ifArgument:a})}}),t}function Oo$1(e,t){var n=t,r=[];e.definitions.forEach(function(a){if(a.kind==="OperationDefinition")throw __DEV__?new _e$1("Found a ".concat(a.operation," operation").concat(a.name?" named '".concat(a.name.value,"'"):"",". ")+"No operations are allowed when using a fragment as a query. Only fragments are allowed."):new _e$1(41);a.kind==="FragmentDefinition"&&r.push(a)}),typeof n>"u"&&(__DEV__?ee$2(r.length===1,"Found ".concat(r.length," fragments. `fragmentName` must be provided when there is not exactly 1 fragment.")):ee$2(r.length===1,42),n=r[0].name.value);var o=j$2(j$2({},e),{definitions:$r$1([{kind:"OperationDefinition",operation:"query",selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:n}}]}}],e.definitions,!0)});return o}function Sr$1(e){e===void 0&&(e=[]);var t={};return e.forEach(function(n){t[n.name.value]=n}),t}function on$1(e,t){switch(e.kind){case"InlineFragment":return e;case"FragmentSpread":{var n=t&&t[e.name.value];return __DEV__?ee$2(n,"No fragment named ".concat(e.name.value,".")):ee$2(n,43),n}default:return null}}function Ae$1(e){return e!==null&&typeof e=="object"}function hr$1(e){return{__ref:String(e)}}function Ce$1(e){return Boolean(e&&typeof e=="object"&&typeof e.__ref=="string")}function Do$1(e){return Ae$1(e)&&e.kind==="Document"&&Array.isArray(e.definitions)}function Cd$1(e){return e.kind==="StringValue"}function Ed$1(e){return e.kind==="BooleanValue"}function Sd$1(e){return e.kind==="IntValue"}function Ad$1(e){return e.kind==="FloatValue"}function Id$1(e){return e.kind==="Variable"}function Td$1(e){return e.kind==="ObjectValue"}function Od$1(e){return e.kind==="ListValue"}function Dd$1(e){return e.kind==="EnumValue"}function Nd$1(e){return e.kind==="NullValue"}function Ur$1(e,t,n,r){if(Sd$1(n)||Ad$1(n))e[t.value]=Number(n.value);else if(Ed$1(n)||Cd$1(n))e[t.value]=n.value;else if(Td$1(n)){var o={};n.fields.map(function(s){return Ur$1(o,s.name,s.value,r)}),e[t.value]=o}else if(Id$1(n)){var a=(r||{})[n.name.value];e[t.value]=a}else if(Od$1(n))e[t.value]=n.values.map(function(s){var u={};return Ur$1(u,t,s,r),u[t.value]});else if(Dd$1(n))e[t.value]=n.value;else if(Nd$1(n))e[t.value]=null;else throw __DEV__?new _e$1('The inline argument "'.concat(t.value,'" of kind "').concat(n.kind,'"')+"is not supported. Use variables instead of inline arguments to overcome this limitation."):new _e$1(52)}function No$1(e,t){var n=null;e.directives&&(n={},e.directives.forEach(function(o){n[o.name.value]={},o.arguments&&o.arguments.forEach(function(a){var s=a.name,u=a.value;return Ur$1(n[o.name.value],s,u,t)})}));var r=null;return e.arguments&&e.arguments.length&&(r={},e.arguments.forEach(function(o){var a=o.name,s=o.value;return Ur$1(r,a,s,t)})),gi$1(e.name.value,r,n)}var Rd$1=["connection","include","skip","client","rest","export"],gi$1=Object.assign(function(e,t,n){if(t&&n&&n.connection&&n.connection.key)if(n.connection.filter&&n.connection.filter.length>0){var r=n.connection.filter?n.connection.filter:[];r.sort();var o={};return r.forEach(function(u){o[u]=t[u]}),"".concat(n.connection.key,"(").concat(pi$1(o),")")}else return n.connection.key;var a=e;if(t){var s=pi$1(t);a+="(".concat(s,")")}return n&&Object.keys(n).forEach(function(u){Rd$1.indexOf(u)===-1&&(n[u]&&Object.keys(n[u]).length?a+="@".concat(u,"(").concat(pi$1(n[u]),")"):a+="@".concat(u))}),a},{setStringify:function(e){var t=pi$1;return pi$1=e,t}}),pi$1=function(e){return JSON.stringify(e,Md$1)};function Md$1(e,t){return Ae$1(t)&&!Array.isArray(t)&&(t=Object.keys(t).sort().reduce(function(n,r){return n[r]=t[r],n},{})),t}function Ar(e,t){if(e.arguments&&e.arguments.length){var n={};return e.arguments.forEach(function(r){var o=r.name,a=r.value;return Ur$1(n,o,a,t)}),n}return null}function Qt$2(e){return e.alias?e.alias.value:e.name.value}function mi$1(e,t,n){if(typeof e.__typename=="string")return e.__typename;for(var r=0,o=t.selections;r<o.length;r++){var a=o[r];if(Tt$1(a)){if(a.name.value==="__typename")return e[Qt$2(a)]}else{var s=mi$1(e,on$1(a,n).selectionSet,n);if(typeof s=="string")return s}}}function Tt$1(e){return e.kind==="Field"}function yi$1(e){return e.kind==="InlineFragment"}function Rn$1(e){__DEV__?ee$2(e&&e.kind==="Document",'Expecting a parsed GraphQL document. Perhaps you need to wrap the query string in a "gql" tag? http://docs.apollostack.com/apollo-client/core.html#gql'):ee$2(e&&e.kind==="Document",44);var t=e.definitions.filter(function(n){return n.kind!=="FragmentDefinition"}).map(function(n){if(n.kind!=="OperationDefinition")throw __DEV__?new _e$1('Schema type definitions not allowed in queries. Found: "'.concat(n.kind,'"')):new _e$1(45);return n});return __DEV__?ee$2(t.length<=1,"Ambiguous GraphQL document: contains ".concat(t.length," operations")):ee$2(t.length<=1,46),e}function pr$1(e){return Rn$1(e),e.definitions.filter(function(t){return t.kind==="OperationDefinition"})[0]}function Mn$1(e){return e.definitions.filter(function(t){return t.kind==="OperationDefinition"&&t.name}).map(function(t){return t.name.value})[0]||null}function Ir(e){return e.definitions.filter(function(t){return t.kind==="FragmentDefinition"})}function vi$1(e){var t=pr$1(e);return __DEV__?ee$2(t&&t.operation==="query","Must contain a query definition."):ee$2(t&&t.operation==="query",47),t}function Ro(e){__DEV__?ee$2(e.kind==="Document",'Expecting a parsed GraphQL document. Perhaps you need to wrap the query string in a "gql" tag? http://docs.apollostack.com/apollo-client/core.html#gql'):ee$2(e.kind==="Document",48),__DEV__?ee$2(e.definitions.length<=1,"Fragment must have exactly one definition."):ee$2(e.definitions.length<=1,49);var t=e.definitions[0];return __DEV__?ee$2(t.kind==="FragmentDefinition","Must be a fragment definition."):ee$2(t.kind==="FragmentDefinition",50),t}function sn$1(e){Rn$1(e);for(var t,n=0,r=e.definitions;n<r.length;n++){var o=r[n];if(o.kind==="OperationDefinition"){var a=o.operation;if(a==="query"||a==="mutation"||a==="subscription")return o}o.kind==="FragmentDefinition"&&!t&&(t=o)}if(t)return t;throw __DEV__?new _e$1("Expected a parsed GraphQL query with a query, mutation, subscription, or a fragment."):new _e$1(51)}function cn$1(e){var t=Object.create(null),n=e&&e.variableDefinitions;return n&&n.length&&n.forEach(function(r){r.defaultValue&&Ur$1(t,r.variable.name,r.defaultValue)}),t}function Mo$1(e,t,n){var r=0;return e.forEach(function(o,a){t.call(this,o,a,e)&&(e[r++]=o)},n),e.length=r,e}var vl$1={kind:"Field",name:{kind:"Name",value:"__typename"}};function bl$1(e,t){return e.selectionSet.selections.every(function(n){return n.kind==="FragmentSpread"&&bl$1(t[n.name.value],t)})}function Po$1(e){return bl$1(pr$1(e)||Ro(e),Sr$1(Ir(e)))?null:e}function _l$1(e){return function(t){return e.some(function(n){return n.name&&n.name===t.name.value||n.test&&n.test(t)})}}function ko$1(e,t){var n=Object.create(null),r=[],o=Object.create(null),a=[],s=Po$1(bt$2(t,{Variable:{enter:function(u,l,c){c.kind!=="VariableDefinition"&&(n[u.name.value]=!0)}},Field:{enter:function(u){if(e&&u.directives){var l=e.some(function(c){return c.remove});if(l&&u.directives&&u.directives.some(_l$1(e)))return u.arguments&&u.arguments.forEach(function(c){c.value.kind==="Variable"&&r.push({name:c.value.name.value})}),u.selectionSet&&Cl$1(u.selectionSet).forEach(function(c){a.push({name:c.name.value})}),null}}},FragmentSpread:{enter:function(u){o[u.name.value]=!0}},Directive:{enter:function(u){if(_l$1(e)(u))return null}}}));return s&&Mo$1(r,function(u){return!!u.name&&!n[u.name]}).length&&(s=xl$1(r,s)),s&&Mo$1(a,function(u){return!!u.name&&!o[u.name]}).length&&(s=wl$1(a,s)),s}var ln$1=Object.assign(function(e){return bt$2(e,{SelectionSet:{enter:function(t,n,r){if(!(r&&r.kind==="OperationDefinition")){var o=t.selections;if(o){var a=o.some(function(u){return Tt$1(u)&&(u.name.value==="__typename"||u.name.value.lastIndexOf("__",0)===0)});if(!a){var s=r;if(!(Tt$1(s)&&s.directives&&s.directives.some(function(u){return u.name.value==="export"})))return j$2(j$2({},t),{selections:$r$1($r$1([],o,!0),[vl$1],!1)})}}}}}})},{added:function(e){return e===vl$1}}),Pd$1={test:function(e){var t=e.name.value==="connection";return t&&(!e.arguments||!e.arguments.some(function(n){return n.name.value==="key"}))&&__DEV__&&ee$2.warn("Removing an @connection directive even though it does not have a key. You may want to use the key parameter to specify a store key."),t}};function Lo$1(e){return ko$1([Pd$1],Rn$1(e))}function kd$1(e){return function(t){return e.some(function(n){return t.value&&t.value.kind==="Variable"&&t.value.name&&(n.name===t.value.name.value||n.test&&n.test(t))})}}function xl$1(e,t){var n=kd$1(e);return Po$1(bt$2(t,{OperationDefinition:{enter:function(r){return j$2(j$2({},r),{variableDefinitions:r.variableDefinitions?r.variableDefinitions.filter(function(o){return!e.some(function(a){return a.name===o.variable.name.value})}):[]})}},Field:{enter:function(r){var o=e.some(function(s){return s.remove});if(o){var a=0;if(r.arguments&&r.arguments.forEach(function(s){n(s)&&(a+=1)}),a===1)return null}}},Argument:{enter:function(r){if(n(r))return null}}}))}function wl$1(e,t){function n(r){if(e.some(function(o){return o.name===r.name.value}))return null}return Po$1(bt$2(t,{FragmentSpread:{enter:n},FragmentDefinition:{enter:n}}))}function Cl$1(e){var t=[];return e.selections.forEach(function(n){(Tt$1(n)||yi$1(n))&&n.selectionSet?Cl$1(n.selectionSet).forEach(function(r){return t.push(r)}):n.kind==="FragmentSpread"&&t.push(n)}),t}function Fo$1(e){var t=sn$1(e),n=t.operation;if(n==="query")return e;var r=bt$2(e,{OperationDefinition:{enter:function(o){return j$2(j$2({},o),{operation:"query"})}}});return r}function Bo$1(e){Rn$1(e);var t=ko$1([{test:function(n){return n.name.value==="client"},remove:!0}],e);return t&&(t=bt$2(t,{FragmentDefinition:{enter:function(n){if(n.selectionSet){var r=n.selectionSet.selections.every(function(o){return Tt$1(o)&&o.name.value==="__typename"});if(r)return null}}}})),t}var Ld$1=Object.prototype.hasOwnProperty;function $o$1(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return _i$1(e)}function _i$1(e){var t=e[0]||{},n=e.length;if(n>1)for(var r=new gr$1,o=1;o<n;++o)t=r.merge(t,e[o]);return t}var Fd$1=function(e,t,n){return this.merge(e[n],t[n])},gr$1=function(){function e(t){t===void 0&&(t=Fd$1),this.reconciler=t,this.isObject=Ae$1,this.pastCopies=new Set}return e.prototype.merge=function(t,n){for(var r=this,o=[],a=2;a<arguments.length;a++)o[a-2]=arguments[a];return Ae$1(n)&&Ae$1(t)?(Object.keys(n).forEach(function(s){if(Ld$1.call(t,s)){var u=t[s];if(n[s]!==u){var l=r.reconciler.apply(r,$r$1([t,n,s],o,!1));l!==u&&(t=r.shallowCopyForMerge(t),t[s]=l)}}else t=r.shallowCopyForMerge(t),t[s]=n[s]}),t):n},e.prototype.shallowCopyForMerge=function(t){return Ae$1(t)&&(this.pastCopies.has(t)||(Array.isArray(t)?t=t.slice(0):t=j$2({__proto__:Object.getPrototypeOf(t)},t),this.pastCopies.add(t))),t},e}();function Bd(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=$d$1(e))||t&&e&&typeof e.length=="number"){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $d$1(e,t){if(e){if(typeof e=="string")return El$1(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return El$1(e,t)}}function El$1(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Sl$1(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qo$1(e,t,n){return t&&Sl$1(e.prototype,t),n&&Sl$1(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var Go$1=function(){return typeof Symbol=="function"},Qo$1=function(e){return Go$1()&&Boolean(Symbol[e])},zo$1=function(e){return Qo$1(e)?Symbol[e]:"@@"+e};Go$1()&&!Qo$1("observable")&&(Symbol.observable=Symbol("observable"));var jd$1=zo$1("iterator"),Uo$1=zo$1("observable"),Al$1=zo$1("species");function oa$1(e,t){var n=e[t];if(n!=null){if(typeof n!="function")throw new TypeError(n+" is not a function");return n}}function bi$1(e){var t=e.constructor;return t!==void 0&&(t=t[Al$1],t===null&&(t=void 0)),t!==void 0?t:be$2}function Ud$1(e){return e instanceof be$2}function Pn$1(e){Pn$1.log?Pn$1.log(e):setTimeout(function(){throw e})}function aa$1(e){Promise.resolve().then(function(){try{e()}catch(t){Pn$1(t)}})}function Il$1(e){var t=e._cleanup;if(t!==void 0&&(e._cleanup=void 0,!!t))try{if(typeof t=="function")t();else{var n=oa$1(t,"unsubscribe");n&&n.call(t)}}catch(r){Pn$1(r)}}function Vo$1(e){e._observer=void 0,e._queue=void 0,e._state="closed"}function Vd$1(e){var t=e._queue;if(t){e._queue=void 0,e._state="ready";for(var n=0;n<t.length&&(Tl$1(e,t[n].type,t[n].value),e._state!=="closed");++n);}}function Tl$1(e,t,n){e._state="running";var r=e._observer;try{var o=oa$1(r,t);switch(t){case"next":o&&o.call(r,n);break;case"error":if(Vo$1(e),o)o.call(r,n);else throw n;break;case"complete":Vo$1(e),o&&o.call(r);break}}catch(a){Pn$1(a)}e._state==="closed"?Il$1(e):e._state==="running"&&(e._state="ready")}function jo$1(e,t,n){if(e._state!=="closed"){if(e._state==="buffering"){e._queue.push({type:t,value:n});return}if(e._state!=="ready"){e._state="buffering",e._queue=[{type:t,value:n}],aa$1(function(){return Vd$1(e)});return}Tl$1(e,t,n)}}var qd=function(){function e(n,r){this._cleanup=void 0,this._observer=n,this._queue=void 0,this._state="initializing";var o=new Gd$1(this);try{this._cleanup=r.call(void 0,o)}catch(a){o.error(a)}this._state==="initializing"&&(this._state="ready")}var t=e.prototype;return t.unsubscribe=function(){this._state!=="closed"&&(Vo$1(this),Il$1(this))},qo$1(e,[{key:"closed",get:function(){return this._state==="closed"}}]),e}(),Gd$1=function(){function e(n){this._subscription=n}var t=e.prototype;return t.next=function(n){jo$1(this._subscription,"next",n)},t.error=function(n){jo$1(this._subscription,"error",n)},t.complete=function(){jo$1(this._subscription,"complete")},qo$1(e,[{key:"closed",get:function(){return this._subscription._state==="closed"}}]),e}(),be$2=function(){function e(n){if(!(this instanceof e))throw new TypeError("Observable cannot be called as a function");if(typeof n!="function")throw new TypeError("Observable initializer must be a function");this._subscriber=n}var t=e.prototype;return t.subscribe=function(n){return(typeof n!="object"||n===null)&&(n={next:n,error:arguments[1],complete:arguments[2]}),new qd(n,this._subscriber)},t.forEach=function(n){var r=this;return new Promise(function(o,a){if(typeof n!="function"){a(new TypeError(n+" is not a function"));return}function s(){u.unsubscribe(),o()}var u=r.subscribe({next:function(l){try{n(l,s)}catch(c){a(c),u.unsubscribe()}},error:a,complete:o})})},t.map=function(n){var r=this;if(typeof n!="function")throw new TypeError(n+" is not a function");var o=bi$1(this);return new o(function(a){return r.subscribe({next:function(s){try{s=n(s)}catch(u){return a.error(u)}a.next(s)},error:function(s){a.error(s)},complete:function(){a.complete()}})})},t.filter=function(n){var r=this;if(typeof n!="function")throw new TypeError(n+" is not a function");var o=bi$1(this);return new o(function(a){return r.subscribe({next:function(s){try{if(!n(s))return}catch(u){return a.error(u)}a.next(s)},error:function(s){a.error(s)},complete:function(){a.complete()}})})},t.reduce=function(n){var r=this;if(typeof n!="function")throw new TypeError(n+" is not a function");var o=bi$1(this),a=arguments.length>1,s=!1,u=arguments[1],l=u;return new o(function(c){return r.subscribe({next:function(m){var me=!s;if(s=!0,!me||a)try{l=n(l,m)}catch(xe){return c.error(xe)}else l=m},error:function(m){c.error(m)},complete:function(){if(!s&&!a)return c.error(new TypeError("Cannot reduce an empty sequence"));c.next(l),c.complete()}})})},t.concat=function(){for(var n=this,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];var s=bi$1(this);return new s(function(u){var l,c=0;function m(me){l=me.subscribe({next:function(xe){u.next(xe)},error:function(xe){u.error(xe)},complete:function(){c===o.length?(l=void 0,u.complete()):m(s.from(o[c++]))}})}return m(n),function(){l&&(l.unsubscribe(),l=void 0)}})},t.flatMap=function(n){var r=this;if(typeof n!="function")throw new TypeError(n+" is not a function");var o=bi$1(this);return new o(function(a){var s=[],u=r.subscribe({next:function(c){if(n)try{c=n(c)}catch(me){return a.error(me)}var m=o.from(c).subscribe({next:function(me){a.next(me)},error:function(me){a.error(me)},complete:function(){var me=s.indexOf(m);me>=0&&s.splice(me,1),l()}});s.push(m)},error:function(c){a.error(c)},complete:function(){l()}});function l(){u.closed&&s.length===0&&a.complete()}return function(){s.forEach(function(c){return c.unsubscribe()}),u.unsubscribe()}})},t[Uo$1]=function(){return this},e.from=function(n){var r=typeof this=="function"?this:e;if(n==null)throw new TypeError(n+" is not an object");var o=oa$1(n,Uo$1);if(o){var a=o.call(n);if(Object(a)!==a)throw new TypeError(a+" is not an object");return Ud$1(a)&&a.constructor===r?a:new r(function(s){return a.subscribe(s)})}if(Qo$1("iterator")&&(o=oa$1(n,jd$1),o))return new r(function(s){aa$1(function(){if(!s.closed){for(var u=Bd(o.call(n)),l;!(l=u()).done;){var c=l.value;if(s.next(c),s.closed)return}s.complete()}})});if(Array.isArray(n))return new r(function(s){aa$1(function(){if(!s.closed){for(var u=0;u<n.length;++u)if(s.next(n[u]),s.closed)return;s.complete()}})});throw new TypeError(n+" is not observable")},e.of=function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];var a=typeof this=="function"?this:e;return new a(function(s){aa$1(function(){if(!s.closed){for(var u=0;u<r.length;++u)if(s.next(r[u]),s.closed)return;s.complete()}})})},qo$1(e,null,[{key:Al$1,get:function(){return this}}]),e}();Go$1()&&Object.defineProperty(be$2,Symbol("extensions"),{value:{symbol:Uo$1,hostReportError:Pn$1},configurable:!0});function Ho$1(e){var t,n=e.Symbol;if(typeof n=="function")if(n.observable)t=n.observable;else{typeof n.for=="function"?t=n.for("https://github.com/benlesh/symbol-observable"):t=n("https://github.com/benlesh/symbol-observable");try{n.observable=t}catch{}}else t="@@observable";return t}var kn$1;typeof self<"u"?kn$1=self:typeof window<"u"?kn$1=window:typeof global<"u"?kn$1=global:typeof module<"u"?kn$1=module:kn$1=Function("return this")();Ho$1(kn$1);var Ol$1=be$2.prototype,Dl$1="@@observable";Ol$1[Dl$1]||(Ol$1[Dl$1]=function(){return this});var Qd$1=Object.prototype.toString;function sa$1(e){return Wo$1(e)}function Wo$1(e,t){switch(Qd$1.call(e)){case"[object Array]":{if(t=t||new Map,t.has(e))return t.get(e);var n=e.slice(0);return t.set(e,n),n.forEach(function(o,a){n[a]=Wo$1(o,t)}),n}case"[object Object]":{if(t=t||new Map,t.has(e))return t.get(e);var r=Object.create(Object.getPrototypeOf(e));return t.set(e,r),Object.keys(e).forEach(function(o){r[o]=Wo$1(e[o],t)}),r}default:return e}}function zd$1(e){var t=new Set([e]);return t.forEach(function(n){Ae$1(n)&&Hd$1(n)===n&&Object.getOwnPropertyNames(n).forEach(function(r){Ae$1(n[r])&&t.add(n[r])})}),e}function Hd$1(e){if(__DEV__&&!Object.isFrozen(e))try{Object.freeze(e)}catch(t){if(t instanceof TypeError)return null;throw t}return e}function xi$1(e){return __DEV__&&zd$1(e),e}function un$1(e,t,n){var r=[];e.forEach(function(o){return o[t]&&r.push(o)}),r.forEach(function(o){return o[t](n)})}function ca$1(e,t,n){return new be$2(function(r){var o=r.next,a=r.error,s=r.complete,u=0,l=!1,c={then:function(Ne){return new Promise(function(He){return He(Ne())})}};function m(Ne,He){return Ne?function(Ye){++u;var Je=function(){return Ne(Ye)};c=c.then(Je,Je).then(function(vn){--u,o&&o.call(r,vn),l&&me.complete()},function(vn){throw--u,vn}).catch(function(vn){a&&a.call(r,vn)})}:function(Ye){return He&&He.call(r,Ye)}}var me={next:m(t,o),error:m(n,a),complete:function(){l=!0,u||s&&s.call(r)}},xe=e.subscribe(me);return function(){return xe.unsubscribe()}})}var zt$2=typeof WeakMap=="function"&&gt$2(function(){return navigator.product})!=="ReactNative",Nl$1=typeof WeakSet=="function",Rl$1=typeof Symbol=="function"&&typeof Symbol.for=="function";gt$2(function(){return window.document.createElement});gt$2(function(){return navigator.userAgent.indexOf("jsdom")>=0});function la$1(e){function t(n){Object.defineProperty(e,n,{value:be$2})}return Rl$1&&Symbol.species&&t(Symbol.species),t("@@species"),e}function Ml$1(e){return e&&typeof e.then=="function"}var Ln$1=function(e){st$2(t,e);function t(n){var r=e.call(this,function(o){return r.addObserver(o),function(){return r.removeObserver(o)}})||this;return r.observers=new Set,r.addCount=0,r.promise=new Promise(function(o,a){r.resolve=o,r.reject=a}),r.handlers={next:function(o){r.sub!==null&&(r.latest=["next",o],un$1(r.observers,"next",o))},error:function(o){var a=r.sub;a!==null&&(a&&setTimeout(function(){return a.unsubscribe()}),r.sub=null,r.latest=["error",o],r.reject(o),un$1(r.observers,"error",o))},complete:function(){var o=r.sub;if(o!==null){var a=r.sources.shift();a?Ml$1(a)?a.then(function(s){return r.sub=s.subscribe(r.handlers)}):r.sub=a.subscribe(r.handlers):(o&&setTimeout(function(){return o.unsubscribe()}),r.sub=null,r.latest&&r.latest[0]==="next"?r.resolve(r.latest[1]):r.resolve(),un$1(r.observers,"complete"))}}},r.cancel=function(o){r.reject(o),r.sources=[],r.handlers.complete()},r.promise.catch(function(o){}),typeof n=="function"&&(n=[new be$2(n)]),Ml$1(n)?n.then(function(o){return r.start(o)},r.handlers.error):r.start(n),r}return t.prototype.start=function(n){this.sub===void 0&&(this.sources=Array.from(n),this.handlers.complete())},t.prototype.deliverLastMessage=function(n){if(this.latest){var r=this.latest[0],o=n[r];o&&o.call(n,this.latest[1]),this.sub===null&&r==="next"&&n.complete&&n.complete()}},t.prototype.addObserver=function(n){this.observers.has(n)||(this.deliverLastMessage(n),this.observers.add(n),++this.addCount)},t.prototype.removeObserver=function(n,r){this.observers.delete(n)&&--this.addCount<1&&!r&&this.handlers.complete()},t.prototype.cleanup=function(n){var r=this,o=!1,a=function(){o||(o=!0,r.observers.delete(s),n())},s={next:a,error:a,complete:a},u=this.addCount;this.addObserver(s),this.addCount=u},t}(be$2);la$1(Ln$1);function Ft$2(e){return Array.isArray(e)&&e.length>0}function Fn$1(e){return e.errors&&e.errors.length>0||!1}function Vr$1(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Object.create(null);return e.forEach(function(r){!r||Object.keys(r).forEach(function(o){var a=r[o];a!==void 0&&(n[o]=a)})}),n}var Pl$1=new Map;function wi$1(e){var t=Pl$1.get(e)||1;return Pl$1.set(e,t+1),"".concat(e,":").concat(t,":").concat(Math.random().toString(36).slice(2))}function kl$1(e){var t=wi$1("stringifyForDisplay");return JSON.stringify(e,function(n,r){return r===void 0?t:r}).split(JSON.stringify(t)).join("<undefined>")}function Ci$1(e,t){return Vr$1(e,t,t.variables&&{variables:j$2(j$2({},e&&e.variables),t.variables)})}function ua$1(e){return new be$2(function(t){t.error(e)})}var fa$1=function(e,t,n){var r=new Error(n);throw r.name="ServerError",r.response=e,r.statusCode=e.status,r.result=t,r};function Ko$1(e){for(var t=["query","operationName","variables","extensions","context"],n=0,r=Object.keys(e);n<r.length;n++){var o=r[n];if(t.indexOf(o)<0)throw __DEV__?new _e$1("illegal argument: ".concat(o)):new _e$1(24)}return e}function Yo$1(e,t){var n=j$2({},e),r=function(a){typeof a=="function"?n=j$2(j$2({},n),a(n)):n=j$2(j$2({},n),a)},o=function(){return j$2({},n)};return Object.defineProperty(t,"setContext",{enumerable:!1,value:r}),Object.defineProperty(t,"getContext",{enumerable:!1,value:o}),t}function Xo$1(e){var t={variables:e.variables||{},extensions:e.extensions||{},operationName:e.operationName,query:e.query};return t.operationName||(t.operationName=typeof t.query!="string"?Mn$1(t.query)||void 0:""),t}function Ll$1(e,t){return t?t(e):be$2.of()}function Ei$1(e){return typeof e=="function"?new Ht$2(e):e}function da$1(e){return e.request.length<=1}var Wd$1=function(e){st$2(t,e);function t(n,r){var o=e.call(this,n)||this;return o.link=r,o}return t}(Error),Ht$2=function(){function e(t){t&&(this.request=t)}return e.empty=function(){return new e(function(){return be$2.of()})},e.from=function(t){return t.length===0?e.empty():t.map(Ei$1).reduce(function(n,r){return n.concat(r)})},e.split=function(t,n,r){var o=Ei$1(n),a=Ei$1(r||new e(Ll$1));return da$1(o)&&da$1(a)?new e(function(s){return t(s)?o.request(s)||be$2.of():a.request(s)||be$2.of()}):new e(function(s,u){return t(s)?o.request(s,u)||be$2.of():a.request(s,u)||be$2.of()})},e.execute=function(t,n){return t.request(Yo$1(n.context,Xo$1(Ko$1(n))))||be$2.of()},e.concat=function(t,n){var r=Ei$1(t);if(da$1(r))return __DEV__&&ee$2.warn(new Wd$1("You are calling concat on a terminating link, which will have no effect",r)),r;var o=Ei$1(n);return da$1(o)?new e(function(a){return r.request(a,function(s){return o.request(s)||be$2.of()})||be$2.of()}):new e(function(a,s){return r.request(a,function(u){return o.request(u,s)||be$2.of()})||be$2.of()})},e.prototype.split=function(t,n,r){return this.concat(e.split(t,n,r||new e(Ll$1)))},e.prototype.concat=function(t){return e.concat(this,t)},e.prototype.request=function(t,n){throw __DEV__?new _e$1("request is not implemented"):new _e$1(19)},e.prototype.onError=function(t,n){if(n&&n.error)return n.error(t),!1;throw t},e.prototype.setOnError=function(t){return this.onError=t,this},e}(),Bn$1=Ht$2.execute,Fl$1="3.6.9",Bl$1=Object.prototype.hasOwnProperty;function $l$1(e){return function(t){return t.text().then(function(n){try{return JSON.parse(n)}catch(o){var r=o;throw r.name="ServerParseError",r.response=t,r.statusCode=t.status,r.bodyText=n,r}}).then(function(n){return t.status>=300&&fa$1(t,n,"Response not successful: Received status code ".concat(t.status)),!Array.isArray(n)&&!Bl$1.call(n,"data")&&!Bl$1.call(n,"errors")&&fa$1(t,n,"Server response was missing for query '".concat(Array.isArray(e)?e.map(function(r){return r.operationName}):e.operationName,"'.")),n})}}var Si$1=function(e,t){var n;try{n=JSON.stringify(e)}catch(o){var r=__DEV__?new _e$1("Network request failed. ".concat(t," is not serializable: ").concat(o.message)):new _e$1(21);throw r.parseError=o,r}return n},Kd$1={includeQuery:!0,includeExtensions:!1},Yd$1={accept:"*/*","content-type":"application/json"},Xd={method:"POST"},jl$1={http:Kd$1,headers:Yd$1,options:Xd},Ul=function(e,t){return t(e)};function Vl(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var o={},a={};n.forEach(function(me){o=j$2(j$2(j$2({},o),me.options),{headers:j$2(j$2({},o.headers),Zd$1(me.headers))}),me.credentials&&(o.credentials=me.credentials),a=j$2(j$2({},a),me.http)});var s=e.operationName,u=e.extensions,l=e.variables,c=e.query,m={operationName:s,variables:l};return a.includeExtensions&&(m.extensions=u),a.includeQuery&&(m.query=t(c,Nn$1)),{options:o,body:m}}function Zd$1(e){if(e){var t=Object.create(null);return Object.keys(Object(e)).forEach(function(n){t[n.toLowerCase()]=e[n]}),t}return e}var ql$1=function(e){if(!e&&typeof fetch>"u")throw __DEV__?new _e$1(`
"fetch" has not been found globally and no fetcher has been configured. To fix this, install a fetch package (like https://www.npmjs.com/package/cross-fetch), instantiate the fetcher, and pass it into your HttpLink constructor. For example:

import fetch from 'cross-fetch';
import { ApolloClient, HttpLink } from '@apollo/client';
const client = new ApolloClient({
  link: new HttpLink({ uri: '/graphql', fetch })
});
    `):new _e$1(20)},Gl$1=function(){if(typeof AbortController>"u")return{controller:!1,signal:!1};var e=new AbortController,t=e.signal;return{controller:e,signal:t}},Ql$1=function(e,t){var n=e.getContext(),r=n.uri;return r||(typeof t=="function"?t(e):t||"/graphql")};function zl$1(e,t){var n=[],r=function(me,xe){n.push("".concat(me,"=").concat(encodeURIComponent(xe)))};if("query"in t&&r("query",t.query),t.operationName&&r("operationName",t.operationName),t.variables){var o=void 0;try{o=Si$1(t.variables,"Variables map")}catch(me){return{parseError:me}}r("variables",o)}if(t.extensions){var a=void 0;try{a=Si$1(t.extensions,"Extensions map")}catch(me){return{parseError:me}}r("extensions",a)}var s="",u=e,l=e.indexOf("#");l!==-1&&(s=e.substr(l),u=e.substr(0,l));var c=u.indexOf("?")===-1?"?":"&",m=u+c+n.join("&")+s;return{newURI:m}}var Hl=gt$2(function(){return fetch}),Wl=function(e){e===void 0&&(e={});var t=e.uri,n=t===void 0?"/graphql":t,r=e.fetch,o=e.print,a=o===void 0?Ul:o,s=e.includeExtensions,u=e.useGETForQueries,l=e.includeUnusedVariables,c=l===void 0?!1:l,m=dr$1(e,["uri","fetch","print","includeExtensions","useGETForQueries","includeUnusedVariables"]);__DEV__&&ql$1(r||Hl);var me={http:{includeExtensions:s},options:m.fetchOptions,credentials:m.credentials,headers:m.headers};return new Ht$2(function(xe){var Ne=Ql$1(xe,n),He=xe.getContext(),Ye={};if(He.clientAwareness){var Je=He.clientAwareness,vn=Je.name,La=Je.version;vn&&(Ye["apollographql-client-name"]=vn),La&&(Ye["apollographql-client-version"]=La)}var sr=j$2(j$2({},Ye),He.headers),Zr={http:He.http,options:He.fetchOptions,credentials:He.credentials,headers:sr},zs=Vl(xe,a,jl$1,me,Zr),za=zs.options,Hs=zs.body;if(Hs.variables&&!c){var lc=new Set(Object.keys(Hs.variables));bt$2(xe.query,{Variable:function(Ay,$b,e0){e0&&e0.kind!=="VariableDefinition"&&lc.delete(Ay.name.value)}}),lc.size&&(Hs.variables=j$2({},Hs.variables),lc.forEach(function(Ay){delete Hs.variables[Ay]}))}var Ty;if(!za.signal){var _y=Gl$1(),xy=_y.controller,Bb=_y.signal;Ty=xy,Ty&&(za.signal=Bb)}var Dy=function(Ay){return Ay.kind==="OperationDefinition"&&Ay.operation==="mutation"};if(u&&!xe.query.definitions.some(Dy)&&(za.method="GET"),za.method==="GET"){var Bg=zl$1(Ne,Hs),yy=Bg.newURI,wy=Bg.parseError;if(wy)return ua$1(wy);Ne=yy}else try{za.body=Si$1(Hs,"Payload")}catch(Ay){return ua$1(Ay)}return new be$2(function(Ay){var $b=r||gt$2(function(){return fetch})||Hl;return $b(Ne,za).then(function(e0){return xe.setContext({response:e0}),e0}).then($l$1(xe)).then(function(e0){return Ay.next(e0),Ay.complete(),e0}).catch(function(e0){e0.name!=="AbortError"&&(e0.result&&e0.result.errors&&e0.result.data&&Ay.next(e0.result),Ay.error(e0))}),function(){Ty&&Ty.abort()}})})},Zo$1=function(e){st$2(t,e);function t(n){n===void 0&&(n={});var r=e.call(this,Wl(n).request)||this;return r.options=n,r}return t}(Ht$2),Jl$1=Object.prototype,Kl$1=Jl$1.toString,Jd$1=Jl$1.hasOwnProperty,Yl$1=Function.prototype.toString,Jo$1=new Map;function We$1(e,t){try{return es$1(e,t)}finally{Jo$1.clear()}}function es$1(e,t){if(e===t)return!0;var n=Kl$1.call(e),r=Kl$1.call(t);if(n!==r)return!1;switch(n){case"[object Array]":if(e.length!==t.length)return!1;case"[object Object]":{if(Zl$1(e,t))return!0;var o=Xl$1(e),a=Xl$1(t),s=o.length;if(s!==a.length)return!1;for(var u=0;u<s;++u)if(!Jd$1.call(t,o[u]))return!1;for(var u=0;u<s;++u){var l=o[u];if(!es$1(e[l],t[l]))return!1}return!0}case"[object Error]":return e.name===t.name&&e.message===t.message;case"[object Number]":if(e!==e)return t!==t;case"[object Boolean]":case"[object Date]":return+e==+t;case"[object RegExp]":case"[object String]":return e==""+t;case"[object Map]":case"[object Set]":{if(e.size!==t.size)return!1;if(Zl$1(e,t))return!0;for(var c=e.entries(),m=n==="[object Map]";;){var me=c.next();if(me.done)break;var xe=me.value,Ne=xe[0],He=xe[1];if(!t.has(Ne)||m&&!es$1(He,t.get(Ne)))return!1}return!0}case"[object Uint16Array]":case"[object Uint8Array]":case"[object Uint32Array]":case"[object Int32Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object ArrayBuffer]":e=new Uint8Array(e),t=new Uint8Array(t);case"[object DataView]":{var Ye=e.byteLength;if(Ye===t.byteLength)for(;Ye--&&e[Ye]===t[Ye];);return Ye===-1}case"[object AsyncFunction]":case"[object GeneratorFunction]":case"[object AsyncGeneratorFunction]":case"[object Function]":{var Je=Yl$1.call(e);return Je!==Yl$1.call(t)?!1:!rh$1(Je,th$1)}}return!1}function Xl$1(e){return Object.keys(e).filter(eh$1,e)}function eh$1(e){return this[e]!==void 0}var th$1="{ [native code] }";function rh$1(e,t){var n=e.length-t.length;return n>=0&&e.indexOf(t,n)===n}function Zl$1(e,t){var n=Jo$1.get(e);if(n){if(n.has(t))return!0}else Jo$1.set(e,n=new Set);return n.add(t),!1}var nh$1=function(){return Object.create(null)},eu$1=Array.prototype,ih$1=eu$1.forEach,ah$1=eu$1.slice,mr$1=function(){function e(t,n){t===void 0&&(t=!0),n===void 0&&(n=nh$1),this.weakness=t,this.makeData=n}return e.prototype.lookup=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return this.lookupArray(t)},e.prototype.lookupArray=function(t){var n=this;return ih$1.call(t,function(r){return n=n.getChildTrie(r)}),n.data||(n.data=this.makeData(ah$1.call(t)))},e.prototype.getChildTrie=function(t){var n=this.weakness&&oh$1(t)?this.weak||(this.weak=new WeakMap):this.strong||(this.strong=new Map),r=n.get(t);return r||n.set(t,r=new e(this.weakness,this.makeData)),r},e}();function oh$1(e){switch(typeof e){case"object":if(e===null)break;case"function":return!0}return!1}var xt$2=null,tu$1={},sh$1=1,ch$1=function(){return function(){function e(){this.id=["slot",sh$1++,Date.now(),Math.random().toString(36).slice(2)].join(":")}return e.prototype.hasValue=function(){for(var t=xt$2;t;t=t.parent)if(this.id in t.slots){var n=t.slots[this.id];if(n===tu$1)break;return t!==xt$2&&(xt$2.slots[this.id]=n),!0}return xt$2&&(xt$2.slots[this.id]=tu$1),!1},e.prototype.getValue=function(){if(this.hasValue())return xt$2.slots[this.id]},e.prototype.withValue=function(t,n,r,o){var a,s=(a={__proto__:null},a[this.id]=t,a),u=xt$2;xt$2={parent:u,slots:s};try{return n.apply(o,r)}finally{xt$2=u}},e.bind=function(t){var n=xt$2;return function(){var r=xt$2;try{return xt$2=n,t.apply(this,arguments)}finally{xt$2=r}}},e.noContext=function(t,n,r){if(xt$2){var o=xt$2;try{return xt$2=null,t.apply(r,n)}finally{xt$2=o}}else return t.apply(r,n)},e}()},ts$1="@wry/context:Slot",rs$1=Array,$n$1=rs$1[ts$1]||function(){var e=ch$1();try{Object.defineProperty(rs$1,ts$1,{value:rs$1[ts$1]=e,enumerable:!1,writable:!1,configurable:!1})}finally{return e}}();$n$1.bind;$n$1.noContext;function fh$1(){}var dh$1=function(){function e(t,n){t===void 0&&(t=1/0),n===void 0&&(n=fh$1),this.max=t,this.dispose=n,this.map=new Map,this.newest=null,this.oldest=null}return e.prototype.has=function(t){return this.map.has(t)},e.prototype.get=function(t){var n=this.getNode(t);return n&&n.value},e.prototype.getNode=function(t){var n=this.map.get(t);if(n&&n!==this.newest){var r=n.older,o=n.newer;o&&(o.older=r),r&&(r.newer=o),n.older=this.newest,n.older.newer=n,n.newer=null,this.newest=n,n===this.oldest&&(this.oldest=o)}return n},e.prototype.set=function(t,n){var r=this.getNode(t);return r?r.value=n:(r={key:t,value:n,newer:null,older:this.newest},this.newest&&(this.newest.newer=r),this.newest=r,this.oldest=this.oldest||r,this.map.set(t,r),r.value)},e.prototype.clean=function(){for(;this.oldest&&this.map.size>this.max;)this.delete(this.oldest.key)},e.prototype.delete=function(t){var n=this.map.get(t);return n?(n===this.newest&&(this.newest=n.older),n===this.oldest&&(this.oldest=n.newer),n.newer&&(n.newer.older=n.older),n.older&&(n.older.newer=n.newer),this.map.delete(t),this.dispose(n.value,t),!0):!1},e}(),pa$1=new $n$1,ns$1,hh$1=Object.prototype.hasOwnProperty,as$1=(ns$1=Array.from,ns$1===void 0?function(e){var t=[];return e.forEach(function(n){return t.push(n)}),t}:ns$1);function ha$1(e){var t=e.unsubscribe;typeof t=="function"&&(e.unsubscribe=void 0,t())}var Ai$1=[],ph$1=100;function jn(e,t){if(!e)throw new Error(t||"assertion failure")}function gh$1(e,t){var n=e.length;return n>0&&n===t.length&&e[n-1]===t[n-1]}function nu$1(e){switch(e.length){case 0:throw new Error("unknown value");case 1:return e[0];case 2:throw e[1]}}function mh$1(e){return e.slice(0)}var yh$1=function(){function e(t){this.fn=t,this.parents=new Set,this.childValues=new Map,this.dirtyChildren=null,this.dirty=!0,this.recomputing=!1,this.value=[],this.deps=null,++e.count}return e.prototype.peek=function(){if(this.value.length===1&&!qr(this))return ru$1(this),this.value[0]},e.prototype.recompute=function(t){return jn(!this.recomputing,"already recomputing"),ru$1(this),qr(this)?vh$1(this,t):nu$1(this.value)},e.prototype.setDirty=function(){this.dirty||(this.dirty=!0,this.value.length=0,iu$1(this),ha$1(this))},e.prototype.dispose=function(){var t=this;this.setDirty(),lu$1(this),os$1(this,function(n,r){n.setDirty(),uu$1(n,t)})},e.prototype.forget=function(){this.dispose()},e.prototype.dependOn=function(t){t.add(this),this.deps||(this.deps=Ai$1.pop()||new Set),this.deps.add(t)},e.prototype.forgetDeps=function(){var t=this;this.deps&&(as$1(this.deps).forEach(function(n){return n.delete(t)}),this.deps.clear(),Ai$1.push(this.deps),this.deps=null)},e.count=0,e}();function ru$1(e){var t=pa$1.getValue();if(t)return e.parents.add(t),t.childValues.has(e)||t.childValues.set(e,[]),qr(e)?ou$1(t,e):su$1(t,e),t}function vh$1(e,t){return lu$1(e),pa$1.withValue(e,_h$1,[e,t]),xh$1(e,t)&&bh$1(e),nu$1(e.value)}function _h$1(e,t){e.recomputing=!0,e.value.length=0;try{e.value[0]=e.fn.apply(null,t)}catch(n){e.value[1]=n}e.recomputing=!1}function qr(e){return e.dirty||!!(e.dirtyChildren&&e.dirtyChildren.size)}function bh$1(e){e.dirty=!1,!qr(e)&&au$1(e)}function iu$1(e){os$1(e,ou$1)}function au$1(e){os$1(e,su$1)}function os$1(e,t){var n=e.parents.size;if(n)for(var r=as$1(e.parents),o=0;o<n;++o)t(r[o],e)}function ou$1(e,t){jn(e.childValues.has(t)),jn(qr(t));var n=!qr(e);if(!e.dirtyChildren)e.dirtyChildren=Ai$1.pop()||new Set;else if(e.dirtyChildren.has(t))return;e.dirtyChildren.add(t),n&&iu$1(e)}function su$1(e,t){jn(e.childValues.has(t)),jn(!qr(t));var n=e.childValues.get(t);n.length===0?e.childValues.set(t,mh$1(t.value)):gh$1(n,t.value)||e.setDirty(),cu$1(e,t),!qr(e)&&au$1(e)}function cu$1(e,t){var n=e.dirtyChildren;n&&(n.delete(t),n.size===0&&(Ai$1.length<ph$1&&Ai$1.push(n),e.dirtyChildren=null))}function lu$1(e){e.childValues.size>0&&e.childValues.forEach(function(t,n){uu$1(e,n)}),e.forgetDeps(),jn(e.dirtyChildren===null)}function uu$1(e,t){t.parents.delete(e),e.childValues.delete(t),cu$1(e,t)}function xh$1(e,t){if(typeof e.subscribe=="function")try{ha$1(e),e.unsubscribe=e.subscribe.apply(null,t)}catch{return e.setDirty(),!1}return!0}var wh$1={setDirty:!0,dispose:!0,forget:!0};function ga$1(e){var t=new Map,n=e&&e.subscribe;function r(o){var a=pa$1.getValue();if(a){var s=t.get(o);s||t.set(o,s=new Set),a.dependOn(s),typeof n=="function"&&(ha$1(s),s.unsubscribe=n(o))}}return r.dirty=function(o,a){var s=t.get(o);if(s){var u=a&&hh$1.call(wh$1,a)?a:"setDirty";as$1(s).forEach(function(l){return l[u]()}),t.delete(o),ha$1(s)}},r}function fu$1(){var e=new mr$1(typeof WeakMap=="function");return function(){return e.lookupArray(arguments)}}fu$1();var is$1=new Set;function fn$1(e,t){t===void 0&&(t=Object.create(null));var n=new dh$1(t.max||Math.pow(2,16),function(c){return c.dispose()}),r=t.keyArgs,o=t.makeCacheKey||fu$1(),a=function(){var c=o.apply(null,r?r.apply(null,arguments):arguments);if(c===void 0)return e.apply(null,arguments);var m=n.get(c);m||(n.set(c,m=new yh$1(e)),m.subscribe=t.subscribe,m.forget=function(){return n.delete(c)});var me=m.recompute(Array.prototype.slice.call(arguments));return n.set(c,m),is$1.add(n),pa$1.hasValue()||(is$1.forEach(function(xe){return xe.clean()}),is$1.clear()),me};Object.defineProperty(a,"size",{get:function(){return n.map.size},configurable:!1,enumerable:!1});function s(c){var m=n.get(c);m&&m.setDirty()}a.dirtyKey=s,a.dirty=function(){s(o.apply(null,arguments))};function u(c){var m=n.get(c);if(m)return m.peek()}a.peekKey=u,a.peek=function(){return u(o.apply(null,arguments))};function l(c){return n.delete(c)}return a.forgetKey=l,a.forget=function(){return l(o.apply(null,arguments))},a.makeCacheKey=o,a.getKey=r?function(){return o.apply(null,r.apply(null,arguments))}:o,Object.freeze(a)}var ss$1=function(){function e(){this.getFragmentDoc=fn$1(Oo$1)}return e.prototype.batch=function(t){var n=this,r=typeof t.optimistic=="string"?t.optimistic:t.optimistic===!1?null:void 0,o;return this.performTransaction(function(){return o=t.update(n)},r),o},e.prototype.recordOptimisticTransaction=function(t,n){this.performTransaction(t,n)},e.prototype.transformDocument=function(t){return t},e.prototype.identify=function(t){},e.prototype.gc=function(){return[]},e.prototype.modify=function(t){return!1},e.prototype.transformForLink=function(t){return t},e.prototype.readQuery=function(t,n){return n===void 0&&(n=!!t.optimistic),this.read(j$2(j$2({},t),{rootId:t.id||"ROOT_QUERY",optimistic:n}))},e.prototype.readFragment=function(t,n){return n===void 0&&(n=!!t.optimistic),this.read(j$2(j$2({},t),{query:this.getFragmentDoc(t.fragment,t.fragmentName),rootId:t.id,optimistic:n}))},e.prototype.writeQuery=function(t){var n=t.id,r=t.data,o=dr$1(t,["id","data"]);return this.write(Object.assign(o,{dataId:n||"ROOT_QUERY",result:r}))},e.prototype.writeFragment=function(t){var n=t.id,r=t.data,o=t.fragment,a=t.fragmentName,s=dr$1(t,["id","data","fragment","fragmentName"]);return this.write(Object.assign(s,{query:this.getFragmentDoc(o,a),dataId:n,result:r}))},e.prototype.updateQuery=function(t,n){return this.batch({update:function(r){var o=r.readQuery(t),a=n(o);return a==null?o:(r.writeQuery(j$2(j$2({},t),{data:a})),a)}})},e.prototype.updateFragment=function(t,n){return this.batch({update:function(r){var o=r.readFragment(t),a=n(o);return a==null?o:(r.writeFragment(j$2(j$2({},t),{data:a})),a)}})},e}(),Ii$1=function(){function e(t,n,r,o){this.message=t,this.path=n,this.query=r,this.variables=o}return e}(),nt$1=Object.prototype.hasOwnProperty;function ya$1(e,t){var n=e.__typename,r=e.id,o=e._id;if(typeof n=="string"&&(t&&(t.keyObject=r!==void 0?{id:r}:o!==void 0?{_id:o}:void 0),r===void 0&&(r=o),r!==void 0))return"".concat(n,":").concat(typeof r=="number"||typeof r=="string"?r:JSON.stringify(r))}var du$1={dataIdFromObject:ya$1,addTypename:!0,resultCaching:!0,canonizeResults:!1};function hu$1(e){return Vr$1(du$1,e)}function va$1(e){var t=e.canonizeResults;return t===void 0?du$1.canonizeResults:t}function pu$1(e,t){return Ce$1(t)?e.get(t.__ref,"__typename"):t&&t.__typename}var cs$1=/^[_a-z][_0-9a-z]*/i;function rr$1(e){var t=e.match(cs$1);return t?t[0]:e}function ma$1(e,t,n){return Ae$1(t)?qe$1(t)?t.every(function(r){return ma$1(e,r,n)}):e.selections.every(function(r){if(Tt$1(r)&&Er$1(r,n)){var o=Qt$2(r);return nt$1.call(t,o)&&(!r.selectionSet||ma$1(r.selectionSet,t[o],n))}return!0}):!1}function Gr$1(e){return Ae$1(e)&&!Ce$1(e)&&!qe$1(e)}function gu$1(){return new gr$1}var qe$1=function(e){return Array.isArray(e)},ba$1=Object.create(null),ls$1=function(){return ba$1},mu$1=Object.create(null),Un$1=function(){function e(t,n){var r=this;this.policies=t,this.group=n,this.data=Object.create(null),this.rootIds=Object.create(null),this.refs=Object.create(null),this.getFieldValue=function(o,a){return xi$1(Ce$1(o)?r.get(o.__ref,a):o&&o[a])},this.canRead=function(o){return Ce$1(o)?r.has(o.__ref):typeof o=="object"},this.toReference=function(o,a){if(typeof o=="string")return hr$1(o);if(Ce$1(o))return o;var s=r.policies.identify(o)[0];if(s){var u=hr$1(s);return a&&r.merge(s,o),u}}}return e.prototype.toObject=function(){return j$2({},this.data)},e.prototype.has=function(t){return this.lookup(t,!0)!==void 0},e.prototype.get=function(t,n){if(this.group.depend(t,n),nt$1.call(this.data,t)){var r=this.data[t];if(r&&nt$1.call(r,n))return r[n]}if(n==="__typename"&&nt$1.call(this.policies.rootTypenamesById,t))return this.policies.rootTypenamesById[t];if(this instanceof Qr$1)return this.parent.get(t,n)},e.prototype.lookup=function(t,n){if(n&&this.group.depend(t,"__exists"),nt$1.call(this.data,t))return this.data[t];if(this instanceof Qr$1)return this.parent.lookup(t,n);if(this.policies.rootTypenamesById[t])return Object.create(null)},e.prototype.merge=function(t,n){var r=this,o;Ce$1(t)&&(t=t.__ref),Ce$1(n)&&(n=n.__ref);var a=typeof t=="string"?this.lookup(o=t):t,s=typeof n=="string"?this.lookup(o=n):n;if(s){__DEV__?ee$2(typeof o=="string","store.merge expects a string ID"):ee$2(typeof o=="string",1);var u=new gr$1(Eh$1).merge(a,s);if(this.data[o]=u,u!==a&&(delete this.refs[o],this.group.caching)){var l=Object.create(null);a||(l.__exists=1),Object.keys(s).forEach(function(c){if(!a||a[c]!==u[c]){l[c]=1;var m=rr$1(c);m!==c&&!r.policies.hasKeyArgs(u.__typename,m)&&(l[m]=1),u[c]===void 0&&!(r instanceof Qr$1)&&delete u[c]}}),l.__typename&&!(a&&a.__typename)&&this.policies.rootTypenamesById[o]===u.__typename&&delete l.__typename,Object.keys(l).forEach(function(c){return r.group.dirty(o,c)})}}},e.prototype.modify=function(t,n){var r=this,o=this.lookup(t);if(o){var a=Object.create(null),s=!1,u=!0,l={DELETE:ba$1,INVALIDATE:mu$1,isReference:Ce$1,toReference:this.toReference,canRead:this.canRead,readField:function(c,m){return r.policies.readField(typeof c=="string"?{fieldName:c,from:m||hr$1(t)}:c,{store:r})}};if(Object.keys(o).forEach(function(c){var m=rr$1(c),me=o[c];if(me!==void 0){var xe=typeof n=="function"?n:n[c]||n[m];if(xe){var Ne=xe===ls$1?ba$1:xe(xi$1(me),j$2(j$2({},l),{fieldName:m,storeFieldName:c,storage:r.getStorage(t,c)}));Ne===mu$1?r.group.dirty(t,c):(Ne===ba$1&&(Ne=void 0),Ne!==me&&(a[c]=Ne,s=!0,me=Ne))}me!==void 0&&(u=!1)}}),s)return this.merge(t,a),u&&(this instanceof Qr$1?this.data[t]=void 0:delete this.data[t],this.group.dirty(t,"__exists")),!0}return!1},e.prototype.delete=function(t,n,r){var o,a=this.lookup(t);if(a){var s=this.getFieldValue(a,"__typename"),u=n&&r?this.policies.getStoreFieldName({typename:s,fieldName:n,args:r}):n;return this.modify(t,u?(o={},o[u]=ls$1,o):ls$1)}return!1},e.prototype.evict=function(t,n){var r=!1;return t.id&&(nt$1.call(this.data,t.id)&&(r=this.delete(t.id,t.fieldName,t.args)),this instanceof Qr$1&&this!==n&&(r=this.parent.evict(t,n)||r),(t.fieldName||r)&&this.group.dirty(t.id,t.fieldName||"__exists")),r},e.prototype.clear=function(){this.replace(null)},e.prototype.extract=function(){var t=this,n=this.toObject(),r=[];return this.getRootIdSet().forEach(function(o){nt$1.call(t.policies.rootTypenamesById,o)||r.push(o)}),r.length&&(n.__META={extraRootIds:r.sort()}),n},e.prototype.replace=function(t){var n=this;if(Object.keys(this.data).forEach(function(a){t&&nt$1.call(t,a)||n.delete(a)}),t){var r=t.__META,o=dr$1(t,["__META"]);Object.keys(o).forEach(function(a){n.merge(a,o[a])}),r&&r.extraRootIds.forEach(this.retain,this)}},e.prototype.retain=function(t){return this.rootIds[t]=(this.rootIds[t]||0)+1},e.prototype.release=function(t){if(this.rootIds[t]>0){var n=--this.rootIds[t];return n||delete this.rootIds[t],n}return 0},e.prototype.getRootIdSet=function(t){return t===void 0&&(t=new Set),Object.keys(this.rootIds).forEach(t.add,t),this instanceof Qr$1?this.parent.getRootIdSet(t):Object.keys(this.policies.rootTypenamesById).forEach(t.add,t),t},e.prototype.gc=function(){var t=this,n=this.getRootIdSet(),r=this.toObject();n.forEach(function(s){nt$1.call(r,s)&&(Object.keys(t.findChildRefIds(s)).forEach(n.add,n),delete r[s])});var o=Object.keys(r);if(o.length){for(var a=this;a instanceof Qr$1;)a=a.parent;o.forEach(function(s){return a.delete(s)})}return o},e.prototype.findChildRefIds=function(t){if(!nt$1.call(this.refs,t)){var n=this.refs[t]=Object.create(null),r=this.data[t];if(!r)return n;var o=new Set([r]);o.forEach(function(a){Ce$1(a)&&(n[a.__ref]=!0),Ae$1(a)&&Object.keys(a).forEach(function(s){var u=a[s];Ae$1(u)&&o.add(u)})})}return this.refs[t]},e.prototype.makeCacheKey=function(){return this.group.keyMaker.lookupArray(arguments)},e}(),yu$1=function(){function e(t,n){n===void 0&&(n=null),this.caching=t,this.parent=n,this.d=null,this.resetCaching()}return e.prototype.resetCaching=function(){this.d=this.caching?ga$1():null,this.keyMaker=new mr$1(zt$2)},e.prototype.depend=function(t,n){if(this.d){this.d(us$1(t,n));var r=rr$1(n);r!==n&&this.d(us$1(t,r)),this.parent&&this.parent.depend(t,n)}},e.prototype.dirty=function(t,n){this.d&&this.d.dirty(us$1(t,n),n==="__exists"?"forget":"setDirty")},e}();function us$1(e,t){return t+"#"+e}function fs$1(e,t){dn$1(e)&&e.group.depend(t,"__exists")}(function(e){var t=function(n){st$2(r,n);function r(o){var a=o.policies,s=o.resultCaching,u=s===void 0?!0:s,l=o.seed,c=n.call(this,a,new yu$1(u))||this;return c.stump=new Ch$1(c),c.storageTrie=new mr$1(zt$2),l&&c.replace(l),c}return r.prototype.addLayer=function(o,a){return this.stump.addLayer(o,a)},r.prototype.removeLayer=function(){return this},r.prototype.getStorage=function(){return this.storageTrie.lookupArray(arguments)},r}(e);e.Root=t})(Un$1||(Un$1={}));var Qr$1=function(e){st$2(t,e);function t(n,r,o,a){var s=e.call(this,r.policies,a)||this;return s.id=n,s.parent=r,s.replay=o,s.group=a,o(s),s}return t.prototype.addLayer=function(n,r){return new t(n,this,r,this.group)},t.prototype.removeLayer=function(n){var r=this,o=this.parent.removeLayer(n);return n===this.id?(this.group.caching&&Object.keys(this.data).forEach(function(a){var s=r.data[a],u=o.lookup(a);u?s?s!==u&&Object.keys(s).forEach(function(l){We$1(s[l],u[l])||r.group.dirty(a,l)}):(r.group.dirty(a,"__exists"),Object.keys(u).forEach(function(l){r.group.dirty(a,l)})):r.delete(a)}),o):o===this.parent?this:o.addLayer(this.id,this.replay)},t.prototype.toObject=function(){return j$2(j$2({},this.parent.toObject()),this.data)},t.prototype.findChildRefIds=function(n){var r=this.parent.findChildRefIds(n);return nt$1.call(this.data,n)?j$2(j$2({},r),e.prototype.findChildRefIds.call(this,n)):r},t.prototype.getStorage=function(){for(var n=this.parent;n.parent;)n=n.parent;return n.getStorage.apply(n,arguments)},t}(Un$1),Ch$1=function(e){st$2(t,e);function t(n){return e.call(this,"EntityStore.Stump",n,function(){},new yu$1(n.group.caching,n.group))||this}return t.prototype.removeLayer=function(){return this},t.prototype.merge=function(){return this.parent.merge.apply(this.parent,arguments)},t}(Qr$1);function Eh$1(e,t,n){var r=e[n],o=t[n];return We$1(r,o)?r:o}function dn$1(e){return!!(e instanceof Un$1&&e.group.caching)}function Sh$1(e){return Ae$1(e)?qe$1(e)?e.slice(0):j$2({__proto__:Object.getPrototypeOf(e)},e):e}var xa$1=function(){function e(){this.known=new(Nl$1?WeakSet:Set),this.pool=new mr$1(zt$2),this.passes=new WeakMap,this.keysByJSON=new Map,this.empty=this.admit({})}return e.prototype.isKnown=function(t){return Ae$1(t)&&this.known.has(t)},e.prototype.pass=function(t){if(Ae$1(t)){var n=Sh$1(t);return this.passes.set(n,t),n}return t},e.prototype.admit=function(t){var n=this;if(Ae$1(t)){var r=this.passes.get(t);if(r)return r;var o=Object.getPrototypeOf(t);switch(o){case Array.prototype:{if(this.known.has(t))return t;var a=t.map(this.admit,this),s=this.pool.lookupArray(a);return s.array||(this.known.add(s.array=a),__DEV__&&Object.freeze(a)),s.array}case null:case Object.prototype:{if(this.known.has(t))return t;var u=Object.getPrototypeOf(t),l=[u],c=this.sortedKeys(t);l.push(c.json);var m=l.length;c.sorted.forEach(function(Ne){l.push(n.admit(t[Ne]))});var s=this.pool.lookupArray(l);if(!s.object){var me=s.object=Object.create(u);this.known.add(me),c.sorted.forEach(function(Ne,He){me[Ne]=l[m+He]}),__DEV__&&Object.freeze(me)}return s.object}}}return t},e.prototype.sortedKeys=function(t){var n=Object.keys(t),r=this.pool.lookupArray(n);if(!r.keys){n.sort();var o=JSON.stringify(n);(r.keys=this.keysByJSON.get(o))||this.keysByJSON.set(o,r.keys={sorted:n,json:o})}return r.keys},e}(),Bt$2=Object.assign(function(e){if(Ae$1(e)){ds$1===void 0&&vu$1();var t=ds$1.admit(e),n=hs$1.get(t);return n===void 0&&hs$1.set(t,n=JSON.stringify(t)),n}return JSON.stringify(e)},{reset:vu$1}),ds$1,hs$1;function vu$1(){ds$1=new xa$1,hs$1=new(zt$2?WeakMap:Map)}function _u$1(e){return[e.selectionSet,e.objectOrReference,e.context,e.context.canonizeResults]}var bu$1=function(){function e(t){var n=this;this.knownResults=new(zt$2?WeakMap:Map),this.config=Vr$1(t,{addTypename:t.addTypename!==!1,canonizeResults:va$1(t)}),this.canon=t.canon||new xa$1,this.executeSelectionSet=fn$1(function(r){var o,a=r.context.canonizeResults,s=_u$1(r);s[3]=!a;var u=(o=n.executeSelectionSet).peek.apply(o,s);return u?a?j$2(j$2({},u),{result:n.canon.admit(u.result)}):u:(fs$1(r.context.store,r.enclosingRef.__ref),n.execSelectionSetImpl(r))},{max:this.config.resultCacheMaxSize,keyArgs:_u$1,makeCacheKey:function(r,o,a,s){if(dn$1(a.store))return a.store.makeCacheKey(r,Ce$1(o)?o.__ref:o,a.varString,s)}}),this.executeSubSelectedArray=fn$1(function(r){return fs$1(r.context.store,r.enclosingRef.__ref),n.execSubSelectedArrayImpl(r)},{max:this.config.resultCacheMaxSize,makeCacheKey:function(r){var o=r.field,a=r.array,s=r.context;if(dn$1(s.store))return s.store.makeCacheKey(o,a,s.varString)}})}return e.prototype.resetCanon=function(){this.canon=new xa$1},e.prototype.diffQueryAgainstStore=function(t){var n=t.store,r=t.query,o=t.rootId,a=o===void 0?"ROOT_QUERY":o,s=t.variables,u=t.returnPartialData,l=u===void 0?!0:u,c=t.canonizeResults,m=c===void 0?this.config.canonizeResults:c,me=this.config.cache.policies;s=j$2(j$2({},cn$1(vi$1(r))),s);var xe=hr$1(a),Ne=this.executeSelectionSet({selectionSet:sn$1(r).selectionSet,objectOrReference:xe,enclosingRef:xe,context:{store:n,query:r,policies:me,variables:s,varString:Bt$2(s),canonizeResults:m,fragmentMap:Sr$1(Ir(r))}}),He;if(Ne.missing&&(He=[new Ii$1(Ah$1(Ne.missing),Ne.missing,r,s)],!l))throw He[0];return{result:Ne.result,complete:!He,missing:He}},e.prototype.isFresh=function(t,n,r,o){if(dn$1(o.store)&&this.knownResults.get(t)===r){var a=this.executeSelectionSet.peek(r,n,o,this.canon.isKnown(t));if(a&&t===a.result)return!0}return!1},e.prototype.execSelectionSetImpl=function(t){var n=this,r=t.selectionSet,o=t.objectOrReference,a=t.enclosingRef,s=t.context;if(Ce$1(o)&&!s.policies.rootTypenamesById[o.__ref]&&!s.store.has(o.__ref))return{result:this.canon.empty,missing:"Dangling reference to missing ".concat(o.__ref," object")};var u=s.variables,l=s.policies,c=s.store,m=c.getFieldValue(o,"__typename"),me=[],xe,Ne=new gr$1;this.config.addTypename&&typeof m=="string"&&!l.rootIdsByTypename[m]&&me.push({__typename:m});function He(sr,Zr){var zs;return sr.missing&&(xe=Ne.merge(xe,(zs={},zs[Zr]=sr.missing,zs))),sr.result}var Ye=new Set(r.selections);Ye.forEach(function(sr){var Zr,zs;if(Er$1(sr,u))if(Tt$1(sr)){var za=l.readField({fieldName:sr.name.value,field:sr,variables:s.variables,from:o},s),Hs=Qt$2(sr);za===void 0?ln$1.added(sr)||(xe=Ne.merge(xe,(Zr={},Zr[Hs]="Can't find field '".concat(sr.name.value,"' on ").concat(Ce$1(o)?o.__ref+" object":"object "+JSON.stringify(o,null,2)),Zr))):qe$1(za)?za=He(n.executeSubSelectedArray({field:sr,array:za,enclosingRef:a,context:s}),Hs):sr.selectionSet?za!=null&&(za=He(n.executeSelectionSet({selectionSet:sr.selectionSet,objectOrReference:za,enclosingRef:Ce$1(za)?za:a,context:s}),Hs)):s.canonizeResults&&(za=n.canon.pass(za)),za!==void 0&&me.push((zs={},zs[Hs]=za,zs))}else{var lc=on$1(sr,s.fragmentMap);lc&&l.fragmentMatches(lc,m)&&lc.selectionSet.selections.forEach(Ye.add,Ye)}});var Je=_i$1(me),vn={result:Je,missing:xe},La=s.canonizeResults?this.canon.admit(vn):xi$1(vn);return La.result&&this.knownResults.set(La.result,r),La},e.prototype.execSubSelectedArrayImpl=function(t){var n=this,r=t.field,o=t.array,a=t.enclosingRef,s=t.context,u,l=new gr$1;function c(m,me){var xe;return m.missing&&(u=l.merge(u,(xe={},xe[me]=m.missing,xe))),m.result}return r.selectionSet&&(o=o.filter(s.store.canRead)),o=o.map(function(m,me){return m===null?null:qe$1(m)?c(n.executeSubSelectedArray({field:r,array:m,enclosingRef:a,context:s}),me):r.selectionSet?c(n.executeSelectionSet({selectionSet:r.selectionSet,objectOrReference:m,enclosingRef:Ce$1(m)?m:a,context:s}),me):(__DEV__&&Ih$1(s.store,r,m),m)}),{result:s.canonizeResults?this.canon.admit(o):o,missing:u}},e}();function Ah$1(e){try{JSON.stringify(e,function(t,n){if(typeof n=="string")throw n;return n})}catch(t){return t}}function Ih$1(e,t,n){if(!t.selectionSet){var r=new Set([n]);r.forEach(function(o){Ae$1(o)&&(__DEV__?ee$2(!Ce$1(o),"Missing selection set for object of type ".concat(pu$1(e,o)," returned for query field ").concat(t.name.value)):ee$2(!Ce$1(o),5),Object.values(o).forEach(r.add,r))})}}var Vn$1=new $n$1,xu$1=new WeakMap;function Ti$1(e){var t=xu$1.get(e);return t||xu$1.set(e,t={vars:new Set,dep:ga$1()}),t}function ps$1(e){Ti$1(e).vars.forEach(function(t){return t.forgetCache(e)})}function wu$1(e){Ti$1(e).vars.forEach(function(t){return t.attachCache(e)})}function wa$1(e){var t=new Set,n=new Set,r=function(a){if(arguments.length>0){if(e!==a){e=a,t.forEach(function(l){Ti$1(l).dep.dirty(r),Th$1(l)});var s=Array.from(n);n.clear(),s.forEach(function(l){return l(e)})}}else{var u=Vn$1.getValue();u&&(o(u),Ti$1(u).dep(r))}return e};r.onNextChange=function(a){return n.add(a),function(){n.delete(a)}};var o=r.attachCache=function(a){return t.add(a),Ti$1(a).vars.add(r),r};return r.forgetCache=function(a){return t.delete(a)},r}function Th$1(e){e.broadcastWatches&&e.broadcastWatches()}var Cu$1=Object.create(null);function gs$1(e){var t=JSON.stringify(e);return Cu$1[t]||(Cu$1[t]=Object.create(null))}function ms$1(e){var t=gs$1(e);return t.keyFieldsFn||(t.keyFieldsFn=function(n,r){var o=function(s,u){return r.readField(u,s)},a=r.keyObject=vs$1(e,function(s){var u=qn$1(r.storeObject,s,o);return u===void 0&&n!==r.storeObject&&nt$1.call(n,s[0])&&(u=qn$1(n,s,Su$1)),__DEV__?ee$2(u!==void 0,"Missing field '".concat(s.join("."),"' while extracting keyFields from ").concat(JSON.stringify(n))):ee$2(u!==void 0,2),u});return"".concat(r.typename,":").concat(JSON.stringify(a))})}function ys$1(e){var t=gs$1(e);return t.keyArgsFn||(t.keyArgsFn=function(n,r){var o=r.field,a=r.variables,s=r.fieldName,u=vs$1(e,function(c){var m=c[0],me=m.charAt(0);if(me==="@"){if(o&&Ft$2(o.directives)){var xe=m.slice(1),Ne=o.directives.find(function(vn){return vn.name.value===xe}),He=Ne&&Ar(Ne,a);return He&&qn$1(He,c.slice(1))}return}if(me==="$"){var Ye=m.slice(1);if(a&&nt$1.call(a,Ye)){var Je=c.slice(0);return Je[0]=Ye,qn$1(a,Je)}return}if(n)return qn$1(n,c)}),l=JSON.stringify(u);return(n||l!=="{}")&&(s+=":"+l),s})}function vs$1(e,t){var n=new gr$1;return Eu$1(e).reduce(function(r,o){var a,s=t(o);if(s!==void 0){for(var u=o.length-1;u>=0;--u)s=(a={},a[o[u]]=s,a);r=n.merge(r,s)}return r},Object.create(null))}function Eu$1(e){var t=gs$1(e);if(!t.paths){var n=t.paths=[],r=[];e.forEach(function(o,a){qe$1(o)?(Eu$1(o).forEach(function(s){return n.push(r.concat(s))}),r.length=0):(r.push(o),qe$1(e[a+1])||(n.push(r.slice(0)),r.length=0))})}return t.paths}function Su$1(e,t){return e[t]}function qn$1(e,t,n){return n=n||Su$1,Au$1(t.reduce(function r(o,a){return qe$1(o)?o.map(function(s){return r(s,a)}):o&&n(o,a)},e))}function Au$1(e){return Ae$1(e)?qe$1(e)?e.map(Au$1):vs$1(Object.keys(e).sort(),function(t){return qn$1(e,t)}):e}gi$1.setStringify(Bt$2);function _s$1(e){return e.args!==void 0?e.args:e.field?Ar(e.field,e.variables):null}var Oh$1=function(){},Iu$1=function(e,t){return t.fieldName},Tu$1=function(e,t,n){var r=n.mergeObjects;return r(e,t)},Ou$1=function(e,t){return t},Nu$1=function(){function e(t){this.config=t,this.typePolicies=Object.create(null),this.toBeAdded=Object.create(null),this.supertypeMap=new Map,this.fuzzySubtypes=new Map,this.rootIdsByTypename=Object.create(null),this.rootTypenamesById=Object.create(null),this.usingPossibleTypes=!1,this.config=j$2({dataIdFromObject:ya$1},t),this.cache=this.config.cache,this.setRootTypename("Query"),this.setRootTypename("Mutation"),this.setRootTypename("Subscription"),t.possibleTypes&&this.addPossibleTypes(t.possibleTypes),t.typePolicies&&this.addTypePolicies(t.typePolicies)}return e.prototype.identify=function(t,n){var r,o=this,a=n&&(n.typename||((r=n.storeObject)===null||r===void 0?void 0:r.__typename))||t.__typename;if(a===this.rootTypenamesById.ROOT_QUERY)return["ROOT_QUERY"];for(var s=n&&n.storeObject||t,u=j$2(j$2({},n),{typename:a,storeObject:s,readField:n&&n.readField||function(){var xe=Ca(arguments,s);return o.readField(xe,{store:o.cache.data,variables:xe.variables})}}),l,c=a&&this.getTypePolicy(a),m=c&&c.keyFn||this.config.dataIdFromObject;m;){var me=m(t,u);if(qe$1(me))m=ms$1(me);else{l=me;break}}return l=l?String(l):void 0,u.keyObject?[l,u.keyObject]:[l]},e.prototype.addTypePolicies=function(t){var n=this;Object.keys(t).forEach(function(r){var o=t[r],a=o.queryType,s=o.mutationType,u=o.subscriptionType,l=dr$1(o,["queryType","mutationType","subscriptionType"]);a&&n.setRootTypename("Query",r),s&&n.setRootTypename("Mutation",r),u&&n.setRootTypename("Subscription",r),nt$1.call(n.toBeAdded,r)?n.toBeAdded[r].push(l):n.toBeAdded[r]=[l]})},e.prototype.updateTypePolicy=function(t,n){var r=this,o=this.getTypePolicy(t),a=n.keyFields,s=n.fields;function u(l,c){l.merge=typeof c=="function"?c:c===!0?Tu$1:c===!1?Ou$1:l.merge}u(o,n.merge),o.keyFn=a===!1?Oh$1:qe$1(a)?ms$1(a):typeof a=="function"?a:o.keyFn,s&&Object.keys(s).forEach(function(l){var c=r.getFieldPolicy(t,l,!0),m=s[l];if(typeof m=="function")c.read=m;else{var me=m.keyArgs,xe=m.read,Ne=m.merge;c.keyFn=me===!1?Iu$1:qe$1(me)?ys$1(me):typeof me=="function"?me:c.keyFn,typeof xe=="function"&&(c.read=xe),u(c,Ne)}c.read&&c.merge&&(c.keyFn=c.keyFn||Iu$1)})},e.prototype.setRootTypename=function(t,n){n===void 0&&(n=t);var r="ROOT_"+t.toUpperCase(),o=this.rootTypenamesById[r];n!==o&&(__DEV__?ee$2(!o||o===t,"Cannot change root ".concat(t," __typename more than once")):ee$2(!o||o===t,3),o&&delete this.rootIdsByTypename[o],this.rootIdsByTypename[n]=r,this.rootTypenamesById[r]=n)},e.prototype.addPossibleTypes=function(t){var n=this;this.usingPossibleTypes=!0,Object.keys(t).forEach(function(r){n.getSupertypeSet(r,!0),t[r].forEach(function(o){n.getSupertypeSet(o,!0).add(r);var a=o.match(cs$1);(!a||a[0]!==o)&&n.fuzzySubtypes.set(o,new RegExp(o))})})},e.prototype.getTypePolicy=function(t){var n=this;if(!nt$1.call(this.typePolicies,t)){var r=this.typePolicies[t]=Object.create(null);r.fields=Object.create(null);var o=this.supertypeMap.get(t);o&&o.size&&o.forEach(function(s){var u=n.getTypePolicy(s),l=u.fields,c=dr$1(u,["fields"]);Object.assign(r,c),Object.assign(r.fields,l)})}var a=this.toBeAdded[t];return a&&a.length&&a.splice(0).forEach(function(s){n.updateTypePolicy(t,s)}),this.typePolicies[t]},e.prototype.getFieldPolicy=function(t,n,r){if(t){var o=this.getTypePolicy(t).fields;return o[n]||r&&(o[n]=Object.create(null))}},e.prototype.getSupertypeSet=function(t,n){var r=this.supertypeMap.get(t);return!r&&n&&this.supertypeMap.set(t,r=new Set),r},e.prototype.fragmentMatches=function(t,n,r,o){var a=this;if(!t.typeCondition)return!0;if(!n)return!1;var s=t.typeCondition.name.value;if(n===s)return!0;if(this.usingPossibleTypes&&this.supertypeMap.has(s))for(var u=this.getSupertypeSet(n,!0),l=[u],c=function(He){var Ye=a.getSupertypeSet(He,!1);Ye&&Ye.size&&l.indexOf(Ye)<0&&l.push(Ye)},m=!!(r&&this.fuzzySubtypes.size),me=!1,xe=0;xe<l.length;++xe){var Ne=l[xe];if(Ne.has(s))return u.has(s)||(me&&__DEV__&&ee$2.warn("Inferring subtype ".concat(n," of supertype ").concat(s)),u.add(s)),!0;Ne.forEach(c),m&&xe===l.length-1&&ma$1(t.selectionSet,r,o)&&(m=!1,me=!0,this.fuzzySubtypes.forEach(function(He,Ye){var Je=n.match(He);Je&&Je[0]===n&&c(Ye)}))}return!1},e.prototype.hasKeyArgs=function(t,n){var r=this.getFieldPolicy(t,n,!1);return!!(r&&r.keyFn)},e.prototype.getStoreFieldName=function(t){var n=t.typename,r=t.fieldName,o=this.getFieldPolicy(n,r,!1),a,s=o&&o.keyFn;if(s&&n)for(var u={typename:n,fieldName:r,field:t.field||null,variables:t.variables},l=_s$1(t);s;){var c=s(l,u);if(qe$1(c))s=ys$1(c);else{a=c||r;break}}return a===void 0&&(a=t.field?No$1(t.field,t.variables):gi$1(r,_s$1(t))),a===!1?r:r===rr$1(a)?a:r+":"+a},e.prototype.readField=function(t,n){var r=t.from;if(r){var o=t.field||t.fieldName;if(o){if(t.typename===void 0){var a=n.store.getFieldValue(r,"__typename");a&&(t.typename=a)}var s=this.getStoreFieldName(t),u=rr$1(s),l=n.store.getFieldValue(r,s),c=this.getFieldPolicy(t.typename,u,!1),m=c&&c.read;if(m){var me=Du$1(this,r,t,n,n.store.getStorage(Ce$1(r)?r.__ref:r,s));return Vn$1.withValue(this.cache,m,[l,me])}return l}}},e.prototype.getReadFunction=function(t,n){var r=this.getFieldPolicy(t,n,!1);return r&&r.read},e.prototype.getMergeFunction=function(t,n,r){var o=this.getFieldPolicy(t,n,!1),a=o&&o.merge;return!a&&r&&(o=this.getTypePolicy(r),a=o&&o.merge),a},e.prototype.runMergeFunction=function(t,n,r,o,a){var s=r.field,u=r.typename,l=r.merge;return l===Tu$1?Ru$1(o.store)(t,n):l===Ou$1?n:(o.overwrite&&(t=void 0),l(t,n,Du$1(this,void 0,{typename:u,fieldName:s.name.value,field:s,variables:o.variables},o,a||Object.create(null))))},e}();function Du$1(e,t,n,r,o){var a=e.getStoreFieldName(n),s=rr$1(a),u=n.variables||r.variables,l=r.store,c=l.toReference,m=l.canRead;return{args:_s$1(n),field:n.field||null,fieldName:s,storeFieldName:a,variables:u,isReference:Ce$1,toReference:c,storage:o,cache:e.cache,canRead:m,readField:function(){return e.readField(Ca(arguments,t,u),r)},mergeObjects:Ru$1(r.store)}}function Ca(e,t,n){var r=e[0],o=e[1],a=e.length,s;return typeof r=="string"?s={fieldName:r,from:a>1?o:t}:(s=j$2({},r),nt$1.call(s,"from")||(s.from=t)),__DEV__&&s.from===void 0&&__DEV__&&ee$2.warn("Undefined 'from' passed to readField with arguments ".concat(kl$1(Array.from(e)))),s.variables===void 0&&(s.variables=n),s}function Ru$1(e){return function(t,n){if(qe$1(t)||qe$1(n))throw __DEV__?new _e$1("Cannot automatically merge arrays"):new _e$1(4);if(Ae$1(t)&&Ae$1(n)){var r=e.getFieldValue(t,"__typename"),o=e.getFieldValue(n,"__typename"),a=r&&o&&r!==o;if(a)return n;if(Ce$1(t)&&Gr$1(n))return e.merge(t.__ref,n),t;if(Gr$1(t)&&Ce$1(n))return e.merge(t,n.__ref),n;if(Gr$1(t)&&Gr$1(n))return j$2(j$2({},t),n)}return n}}function bs$1(e,t,n){var r="".concat(t).concat(n),o=e.flavors.get(r);return o||e.flavors.set(r,o=e.clientOnly===t&&e.deferred===n?e:j$2(j$2({},e),{clientOnly:t,deferred:n})),o}var Lu$1=function(){function e(t,n){this.cache=t,this.reader=n}return e.prototype.writeToStore=function(t,n){var r=this,o=n.query,a=n.result,s=n.dataId,u=n.variables,l=n.overwrite,c=pr$1(o),m=gu$1();u=j$2(j$2({},cn$1(c)),u);var me={store:t,written:Object.create(null),merge:function(Ne,He){return m.merge(Ne,He)},variables:u,varString:Bt$2(u),fragmentMap:Sr$1(Ir(o)),overwrite:!!l,incomingById:new Map,clientOnly:!1,deferred:!1,flavors:new Map},xe=this.processSelectionSet({result:a||Object.create(null),dataId:s,selectionSet:c.selectionSet,mergeTree:{map:new Map},context:me});if(!Ce$1(xe))throw __DEV__?new _e$1("Could not identify object ".concat(JSON.stringify(a))):new _e$1(6);return me.incomingById.forEach(function(Ne,He){var Ye=Ne.storeObject,Je=Ne.mergeTree,vn=Ne.fieldNodeSet,La=hr$1(He);if(Je&&Je.map.size){var sr=r.applyMerges(Je,La,Ye,me);if(Ce$1(sr))return;Ye=sr}if(__DEV__&&!me.overwrite){var Zr=Object.create(null);vn.forEach(function(Hs){Hs.selectionSet&&(Zr[Hs.name.value]=!0)});var zs=function(Hs){return Zr[rr$1(Hs)]===!0},za=function(Hs){var lc=Je&&Je.map.get(Hs);return Boolean(lc&&lc.info&&lc.info.merge)};Object.keys(Ye).forEach(function(Hs){zs(Hs)&&!za(Hs)&&Dh$1(La,Ye,Hs,me.store)})}t.merge(He,Ye)}),t.retain(xe.__ref),xe},e.prototype.processSelectionSet=function(t){var n=this,r=t.dataId,o=t.result,a=t.selectionSet,s=t.context,u=t.mergeTree,l=this.cache.policies,c=Object.create(null),m=r&&l.rootTypenamesById[r]||mi$1(o,a,s.fragmentMap)||r&&s.store.get(r,"__typename");typeof m=="string"&&(c.__typename=m);var me=function(){var sr=Ca(arguments,c,s.variables);if(Ce$1(sr.from)){var Zr=s.incomingById.get(sr.from.__ref);if(Zr){var zs=l.readField(j$2(j$2({},sr),{from:Zr.storeObject}),s);if(zs!==void 0)return zs}}return l.readField(sr,s)},xe=new Set;this.flattenFields(a,o,s,m).forEach(function(sr,Zr){var zs,za=Qt$2(Zr),Hs=o[za];if(xe.add(Zr),Hs!==void 0){var lc=l.getStoreFieldName({typename:m,fieldName:Zr.name.value,field:Zr,variables:sr.variables}),Ty=Mu$1(u,lc),_y=n.processFieldValue(Hs,Zr,Zr.selectionSet?bs$1(sr,!1,!1):sr,Ty),xy=void 0;Zr.selectionSet&&(Ce$1(_y)||Gr$1(_y))&&(xy=me("__typename",_y));var Bb=l.getMergeFunction(m,Zr.name.value,xy);Bb?Ty.info={field:Zr,typename:m,merge:Bb}:Pu$1(u,lc),c=sr.merge(c,(zs={},zs[lc]=_y,zs))}else __DEV__&&!sr.clientOnly&&!sr.deferred&&!ln$1.added(Zr)&&!l.getReadFunction(m,Zr.name.value)&&__DEV__&&ee$2.error("Missing field '".concat(Qt$2(Zr),"' while writing result ").concat(JSON.stringify(o,null,2)).substring(0,1e3))});try{var Ne=l.identify(o,{typename:m,selectionSet:a,fragmentMap:s.fragmentMap,storeObject:c,readField:me}),He=Ne[0],Ye=Ne[1];r=r||He,Ye&&(c=s.merge(c,Ye))}catch(sr){if(!r)throw sr}if(typeof r=="string"){var Je=hr$1(r),vn=s.written[r]||(s.written[r]=[]);if(vn.indexOf(a)>=0||(vn.push(a),this.reader&&this.reader.isFresh(o,Je,a,s)))return Je;var La=s.incomingById.get(r);return La?(La.storeObject=s.merge(La.storeObject,c),La.mergeTree=xs$1(La.mergeTree,u),xe.forEach(function(sr){return La.fieldNodeSet.add(sr)})):s.incomingById.set(r,{storeObject:c,mergeTree:Ea$1(u)?void 0:u,fieldNodeSet:xe}),Je}return c},e.prototype.processFieldValue=function(t,n,r,o){var a=this;return!n.selectionSet||t===null?__DEV__?sa$1(t):t:qe$1(t)?t.map(function(s,u){var l=a.processFieldValue(s,n,r,Mu$1(o,u));return Pu$1(o,u),l}):this.processSelectionSet({result:t,selectionSet:n.selectionSet,context:r,mergeTree:o})},e.prototype.flattenFields=function(t,n,r,o){o===void 0&&(o=mi$1(n,t,r.fragmentMap));var a=new Map,s=this.cache.policies,u=new mr$1(!1);return function l(c,m){var me=u.lookup(c,m.clientOnly,m.deferred);me.visited||(me.visited=!0,c.selections.forEach(function(xe){if(Er$1(xe,r.variables)){var Ne=m.clientOnly,He=m.deferred;if(!(Ne&&He)&&Ft$2(xe.directives)&&xe.directives.forEach(function(vn){var La=vn.name.value;if(La==="client"&&(Ne=!0),La==="defer"){var sr=Ar(vn,r.variables);(!sr||sr.if!==!1)&&(He=!0)}}),Tt$1(xe)){var Ye=a.get(xe);Ye&&(Ne=Ne&&Ye.clientOnly,He=He&&Ye.deferred),a.set(xe,bs$1(r,Ne,He))}else{var Je=on$1(xe,r.fragmentMap);Je&&s.fragmentMatches(Je,o,n,r.variables)&&l(Je.selectionSet,bs$1(r,Ne,He))}}}))}(t,r),a},e.prototype.applyMerges=function(t,n,r,o,a){var s,u=this;if(t.map.size&&!Ce$1(r)){var l=!qe$1(r)&&(Ce$1(n)||Gr$1(n))?n:void 0,c=r;l&&!a&&(a=[Ce$1(l)?l.__ref:l]);var m,me=function(xe,Ne){return qe$1(xe)?typeof Ne=="number"?xe[Ne]:void 0:o.store.getFieldValue(xe,String(Ne))};t.map.forEach(function(xe,Ne){var He=me(l,Ne),Ye=me(c,Ne);if(Ye!==void 0){a&&a.push(Ne);var Je=u.applyMerges(xe,He,Ye,o,a);Je!==Ye&&(m=m||new Map,m.set(Ne,Je)),a&&ee$2(a.pop()===Ne)}}),m&&(r=qe$1(c)?c.slice(0):j$2({},c),m.forEach(function(xe,Ne){r[Ne]=xe}))}return t.info?this.cache.policies.runMergeFunction(n,r,t.info,o,a&&(s=o.store).getStorage.apply(s,a)):r},e}(),Fu$1=[];function Mu$1(e,t){var n=e.map;return n.has(t)||n.set(t,Fu$1.pop()||{map:new Map}),n.get(t)}function xs$1(e,t){if(e===t||!t||Ea$1(t))return e;if(!e||Ea$1(e))return t;var n=e.info&&t.info?j$2(j$2({},e.info),t.info):e.info||t.info,r=e.map.size&&t.map.size,o=r?new Map:e.map.size?e.map:t.map,a={info:n,map:o};if(r){var s=new Set(t.map.keys());e.map.forEach(function(u,l){a.map.set(l,xs$1(u,t.map.get(l))),s.delete(l)}),s.forEach(function(u){a.map.set(u,xs$1(t.map.get(u),e.map.get(u)))})}return a}function Ea$1(e){return!e||!(e.info||e.map.size)}function Pu$1(e,t){var n=e.map,r=n.get(t);r&&Ea$1(r)&&(Fu$1.push(r),n.delete(t))}var ku$1=new Set;function Dh$1(e,t,n,r){var o=function(me){var xe=r.getFieldValue(me,n);return typeof xe=="object"&&xe},a=o(e);if(a){var s=o(t);if(!!s&&!Ce$1(a)&&!We$1(a,s)&&!Object.keys(a).every(function(me){return r.getFieldValue(s,me)!==void 0})){var u=r.getFieldValue(e,"__typename")||r.getFieldValue(t,"__typename"),l=rr$1(n),c="".concat(u,".").concat(l);if(!ku$1.has(c)){ku$1.add(c);var m=[];!qe$1(a)&&!qe$1(s)&&[a,s].forEach(function(me){var xe=r.getFieldValue(me,"__typename");typeof xe=="string"&&!m.includes(xe)&&m.push(xe)}),__DEV__&&ee$2.warn("Cache data may be lost when replacing the ".concat(l," field of a ").concat(u,` object.

To address this problem (which is not a bug in Apollo Client), `).concat(m.length?"either ensure all objects of type "+m.join(" and ")+" have an ID or a custom merge function, or ":"","define a custom merge function for the ").concat(c,` field, so InMemoryCache can safely merge these objects:

  existing: `).concat(JSON.stringify(a).slice(0,1e3),`
  incoming: `).concat(JSON.stringify(s).slice(0,1e3),`

For more information about these options, please refer to the documentation:

  * Ensuring entity objects have IDs: https://go.apollo.dev/c/generating-unique-identifiers
  * Defining custom merge functions: https://go.apollo.dev/c/merging-non-normalized-objects
`))}}}}var Sa$1=function(e){st$2(t,e);function t(n){n===void 0&&(n={});var r=e.call(this)||this;return r.watches=new Set,r.typenameDocumentCache=new Map,r.makeVar=wa$1,r.txCount=0,r.config=hu$1(n),r.addTypename=!!r.config.addTypename,r.policies=new Nu$1({cache:r,dataIdFromObject:r.config.dataIdFromObject,possibleTypes:r.config.possibleTypes,typePolicies:r.config.typePolicies}),r.init(),r}return t.prototype.init=function(){var n=this.data=new Un$1.Root({policies:this.policies,resultCaching:this.config.resultCaching});this.optimisticData=n.stump,this.resetResultCache()},t.prototype.resetResultCache=function(n){var r=this,o=this.storeReader;this.storeWriter=new Lu$1(this,this.storeReader=new bu$1({cache:this,addTypename:this.addTypename,resultCacheMaxSize:this.config.resultCacheMaxSize,canonizeResults:va$1(this.config),canon:n?void 0:o&&o.canon})),this.maybeBroadcastWatch=fn$1(function(a,s){return r.broadcastWatch(a,s)},{max:this.config.resultCacheMaxSize,makeCacheKey:function(a){var s=a.optimistic?r.optimisticData:r.data;if(dn$1(s)){var u=a.optimistic,l=a.rootId,c=a.variables;return s.makeCacheKey(a.query,a.callback,Bt$2({optimistic:u,rootId:l,variables:c}))}}}),new Set([this.data.group,this.optimisticData.group]).forEach(function(a){return a.resetCaching()})},t.prototype.restore=function(n){return this.init(),n&&this.data.replace(n),this},t.prototype.extract=function(n){return n===void 0&&(n=!1),(n?this.optimisticData:this.data).extract()},t.prototype.read=function(n){var r=n.returnPartialData,o=r===void 0?!1:r;try{return this.storeReader.diffQueryAgainstStore(j$2(j$2({},n),{store:n.optimistic?this.optimisticData:this.data,config:this.config,returnPartialData:o})).result||null}catch(a){if(a instanceof Ii$1)return null;throw a}},t.prototype.write=function(n){try{return++this.txCount,this.storeWriter.writeToStore(this.data,n)}finally{!--this.txCount&&n.broadcast!==!1&&this.broadcastWatches()}},t.prototype.modify=function(n){if(nt$1.call(n,"id")&&!n.id)return!1;var r=n.optimistic?this.optimisticData:this.data;try{return++this.txCount,r.modify(n.id||"ROOT_QUERY",n.fields)}finally{!--this.txCount&&n.broadcast!==!1&&this.broadcastWatches()}},t.prototype.diff=function(n){return this.storeReader.diffQueryAgainstStore(j$2(j$2({},n),{store:n.optimistic?this.optimisticData:this.data,rootId:n.id||"ROOT_QUERY",config:this.config}))},t.prototype.watch=function(n){var r=this;return this.watches.size||wu$1(this),this.watches.add(n),n.immediate&&this.maybeBroadcastWatch(n),function(){r.watches.delete(n)&&!r.watches.size&&ps$1(r),r.maybeBroadcastWatch.forget(n)}},t.prototype.gc=function(n){Bt$2.reset();var r=this.optimisticData.gc();return n&&!this.txCount&&(n.resetResultCache?this.resetResultCache(n.resetResultIdentities):n.resetResultIdentities&&this.storeReader.resetCanon()),r},t.prototype.retain=function(n,r){return(r?this.optimisticData:this.data).retain(n)},t.prototype.release=function(n,r){return(r?this.optimisticData:this.data).release(n)},t.prototype.identify=function(n){if(Ce$1(n))return n.__ref;try{return this.policies.identify(n)[0]}catch(r){__DEV__&&ee$2.warn(r)}},t.prototype.evict=function(n){if(!n.id){if(nt$1.call(n,"id"))return!1;n=j$2(j$2({},n),{id:"ROOT_QUERY"})}try{return++this.txCount,this.optimisticData.evict(n,this.data)}finally{!--this.txCount&&n.broadcast!==!1&&this.broadcastWatches()}},t.prototype.reset=function(n){var r=this;return this.init(),Bt$2.reset(),n&&n.discardWatches?(this.watches.forEach(function(o){return r.maybeBroadcastWatch.forget(o)}),this.watches.clear(),ps$1(this)):this.broadcastWatches(),Promise.resolve()},t.prototype.removeOptimistic=function(n){var r=this.optimisticData.removeLayer(n);r!==this.optimisticData&&(this.optimisticData=r,this.broadcastWatches())},t.prototype.batch=function(n){var r=this,o=n.update,a=n.optimistic,s=a===void 0?!0:a,u=n.removeOptimistic,l=n.onWatchUpdated,c,m=function(xe){var Ne=r,He=Ne.data,Ye=Ne.optimisticData;++r.txCount,xe&&(r.data=r.optimisticData=xe);try{return c=o(r)}finally{--r.txCount,r.data=He,r.optimisticData=Ye}},me=new Set;return l&&!this.txCount&&this.broadcastWatches(j$2(j$2({},n),{onWatchUpdated:function(xe){return me.add(xe),!1}})),typeof s=="string"?this.optimisticData=this.optimisticData.addLayer(s,m):s===!1?m(this.data):m(),typeof u=="string"&&(this.optimisticData=this.optimisticData.removeLayer(u)),l&&me.size?(this.broadcastWatches(j$2(j$2({},n),{onWatchUpdated:function(xe,Ne){var He=l.call(this,xe,Ne);return He!==!1&&me.delete(xe),He}})),me.size&&me.forEach(function(xe){return r.maybeBroadcastWatch.dirty(xe)})):this.broadcastWatches(n),c},t.prototype.performTransaction=function(n,r){return this.batch({update:n,optimistic:r||r!==null})},t.prototype.transformDocument=function(n){if(this.addTypename){var r=this.typenameDocumentCache.get(n);return r||(r=ln$1(n),this.typenameDocumentCache.set(n,r),this.typenameDocumentCache.set(r,r)),r}return n},t.prototype.broadcastWatches=function(n){var r=this;this.txCount||this.watches.forEach(function(o){return r.maybeBroadcastWatch(o,n)})},t.prototype.broadcastWatch=function(n,r){var o=n.lastDiff,a=this.diff(n);r&&(n.optimistic&&typeof r.optimistic=="string"&&(a.fromOptimisticTransaction=!0),r.onWatchUpdated&&r.onWatchUpdated.call(this,n,a,o)===!1)||(!o||!We$1(o.result,a.result))&&n.callback(n.lastDiff=a,o)},t}(ss$1);function Bu$1(e){return e.hasOwnProperty("graphQLErrors")}var Nh$1=function(e){var t="";if(Ft$2(e.graphQLErrors)||Ft$2(e.clientErrors)){var n=(e.graphQLErrors||[]).concat(e.clientErrors||[]);n.forEach(function(r){var o=r?r.message:"Error message not found.";t+="".concat(o,`
`)})}return e.networkError&&(t+="".concat(e.networkError.message,`
`)),t=t.replace(/\n$/,""),t},Tr$1=function(e){st$2(t,e);function t(n){var r=n.graphQLErrors,o=n.clientErrors,a=n.networkError,s=n.errorMessage,u=n.extraInfo,l=e.call(this,s)||this;return l.graphQLErrors=r||[],l.clientErrors=o||[],l.networkError=a||null,l.message=s||Nh$1(l),l.extraInfo=u,l.__proto__=t.prototype,l}return t}(Error),Pe;(function(e){e[e.loading=1]="loading",e[e.setVariables=2]="setVariables",e[e.fetchMore=3]="fetchMore",e[e.refetch=4]="refetch",e[e.poll=6]="poll",e[e.ready=7]="ready",e[e.error=8]="error"})(Pe||(Pe={}));function zr$1(e){return e?e<7:!1}var Rh$1=Object.assign,Mh$1=Object.hasOwnProperty,Aa$1=function(e){st$2(t,e);function t(n){var r=n.queryManager,o=n.queryInfo,a=n.options,s=e.call(this,function(Je){try{var vn=Je._subscription._observer;vn&&!vn.error&&(vn.error=Ph$1)}catch{}var La=!s.observers.size;s.observers.add(Je);var sr=s.last;return sr&&sr.error?Je.error&&Je.error(sr.error):sr&&sr.result&&Je.next&&Je.next(sr.result),La&&s.reobserve().catch(function(){}),function(){s.observers.delete(Je)&&!s.observers.size&&s.tearDownQuery()}})||this;s.observers=new Set,s.subscriptions=new Set,s.queryInfo=o,s.queryManager=r,s.isTornDown=!1;var u=r.defaultOptions.watchQuery,l=u===void 0?{}:u,c=l.fetchPolicy,m=c===void 0?"cache-first":c,me=a.fetchPolicy,xe=me===void 0?m:me,Ne=a.initialFetchPolicy,He=Ne===void 0?xe==="standby"?m:xe:Ne;s.options=j$2(j$2({},a),{initialFetchPolicy:He,fetchPolicy:xe}),s.queryId=o.queryId||r.generateQueryId();var Ye=pr$1(s.query);return s.queryName=Ye&&Ye.name&&Ye.name.value,s}return Object.defineProperty(t.prototype,"query",{get:function(){return this.queryManager.transform(this.options.query).document},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"variables",{get:function(){return this.options.variables},enumerable:!1,configurable:!0}),t.prototype.result=function(){var n=this;return new Promise(function(r,o){var a={next:function(u){r(u),n.observers.delete(a),n.observers.size||n.queryManager.removeQuery(n.queryId),setTimeout(function(){s.unsubscribe()},0)},error:o},s=n.subscribe(a)})},t.prototype.getCurrentResult=function(n){n===void 0&&(n=!0);var r=this.getLastResult(!0),o=this.queryInfo.networkStatus||r&&r.networkStatus||Pe.ready,a=j$2(j$2({},r),{loading:zr$1(o),networkStatus:o}),s=this.options.fetchPolicy,u=s===void 0?"cache-first":s;if(!(u==="network-only"||u==="no-cache"||u==="standby"||this.queryManager.transform(this.options.query).hasForcedResolvers)){var l=this.queryInfo.getDiff();(l.complete||this.options.returnPartialData)&&(a.data=l.result),We$1(a.data,{})&&(a.data=void 0),l.complete?(delete a.partial,l.complete&&a.networkStatus===Pe.loading&&(u==="cache-first"||u==="cache-only")&&(a.networkStatus=Pe.ready,a.loading=!1)):a.partial=!0,__DEV__&&!l.complete&&!this.options.partialRefetch&&!a.loading&&!a.data&&!a.error&&Cs$1(l.missing)}return n&&this.updateLastResult(a),a},t.prototype.isDifferentFromLastResult=function(n){return!this.last||!We$1(this.last.result,n)},t.prototype.getLast=function(n,r){var o=this.last;if(o&&o[n]&&(!r||We$1(o.variables,this.variables)))return o[n]},t.prototype.getLastResult=function(n){return this.getLast("result",n)},t.prototype.getLastError=function(n){return this.getLast("error",n)},t.prototype.resetLastResults=function(){delete this.last,this.isTornDown=!1},t.prototype.resetQueryStoreErrors=function(){this.queryManager.resetErrors(this.queryId)},t.prototype.refetch=function(n){var r,o={pollInterval:0},a=this.options.fetchPolicy;if(a==="cache-and-network"?o.fetchPolicy=a:a==="no-cache"?o.fetchPolicy="no-cache":o.fetchPolicy="network-only",__DEV__&&n&&Mh$1.call(n,"variables")){var s=vi$1(this.query),u=s.variableDefinitions;(!u||!u.some(function(l){return l.variable.name.value==="variables"}))&&__DEV__&&ee$2.warn("Called refetch(".concat(JSON.stringify(n),") for query ").concat(((r=s.name)===null||r===void 0?void 0:r.value)||JSON.stringify(s),`, which does not declare a $variables variable.
Did you mean to call refetch(variables) instead of refetch({ variables })?`))}return n&&!We$1(this.options.variables,n)&&(o.variables=this.options.variables=j$2(j$2({},this.options.variables),n)),this.queryInfo.resetLastWrite(),this.reobserve(o,Pe.refetch)},t.prototype.fetchMore=function(n){var r=this,o=j$2(j$2({},n.query?n:j$2(j$2(j$2(j$2({},this.options),{query:this.query}),n),{variables:j$2(j$2({},this.options.variables),n.variables)})),{fetchPolicy:"no-cache"}),a=this.queryManager.generateQueryId(),s=this.queryInfo,u=s.networkStatus;s.networkStatus=Pe.fetchMore,o.notifyOnNetworkStatusChange&&this.observe();var l=new Set;return this.queryManager.fetchQuery(a,o,Pe.fetchMore).then(function(c){return r.queryManager.removeQuery(a),s.networkStatus===Pe.fetchMore&&(s.networkStatus=u),r.queryManager.cache.batch({update:function(m){var me=n.updateQuery;me?m.updateQuery({query:r.query,variables:r.variables,returnPartialData:!0,optimistic:!1},function(xe){return me(xe,{fetchMoreResult:c.data,variables:o.variables})}):m.writeQuery({query:o.query,variables:o.variables,data:c.data})},onWatchUpdated:function(m){l.add(m.query)}}),c}).finally(function(){l.has(r.query)||ws$1(r)})},t.prototype.subscribeToMore=function(n){var r=this,o=this.queryManager.startGraphQLSubscription({query:n.document,variables:n.variables,context:n.context}).subscribe({next:function(a){var s=n.updateQuery;s&&r.updateQuery(function(u,l){var c=l.variables;return s(u,{subscriptionData:a,variables:c})})},error:function(a){if(n.onError){n.onError(a);return}__DEV__&&ee$2.error("Unhandled GraphQL subscription error",a)}});return this.subscriptions.add(o),function(){r.subscriptions.delete(o)&&o.unsubscribe()}},t.prototype.setOptions=function(n){return this.reobserve(n)},t.prototype.setVariables=function(n){return We$1(this.variables,n)?this.observers.size?this.result():Promise.resolve():(this.options.variables=n,this.observers.size?this.reobserve({fetchPolicy:this.options.initialFetchPolicy,variables:n},Pe.setVariables):Promise.resolve())},t.prototype.updateQuery=function(n){var r=this.queryManager,o=r.cache.diff({query:this.options.query,variables:this.variables,returnPartialData:!0,optimistic:!1}).result,a=n(o,{variables:this.variables});a&&(r.cache.writeQuery({query:this.options.query,data:a,variables:this.variables}),r.broadcastQueries())},t.prototype.startPolling=function(n){this.options.pollInterval=n,this.updatePolling()},t.prototype.stopPolling=function(){this.options.pollInterval=0,this.updatePolling()},t.prototype.applyNextFetchPolicy=function(n,r){if(r.nextFetchPolicy){var o=r.fetchPolicy,a=o===void 0?"cache-first":o,s=r.initialFetchPolicy,u=s===void 0?a:s;a==="standby"||(typeof r.nextFetchPolicy=="function"?r.fetchPolicy=r.nextFetchPolicy(a,{reason:n,options:r,observable:this,initialFetchPolicy:u}):n==="variables-changed"?r.fetchPolicy=u:r.fetchPolicy=r.nextFetchPolicy)}return r.fetchPolicy},t.prototype.fetch=function(n,r){return this.queryManager.setObservableQuery(this),this.queryManager.fetchQueryObservable(this.queryId,n,r)},t.prototype.updatePolling=function(){var n=this;if(!this.queryManager.ssrMode){var r=this,o=r.pollingInfo,a=r.options.pollInterval;if(!a){o&&(clearTimeout(o.timeout),delete this.pollingInfo);return}if(!(o&&o.interval===a)){__DEV__?ee$2(a,"Attempted to start a polling query without a polling interval."):ee$2(a,10);var s=o||(this.pollingInfo={});s.interval=a;var u=function(){n.pollingInfo&&(zr$1(n.queryInfo.networkStatus)?l():n.reobserve({fetchPolicy:"network-only"},Pe.poll).then(l,l))},l=function(){var c=n.pollingInfo;c&&(clearTimeout(c.timeout),c.timeout=setTimeout(u,c.interval))};l()}}},t.prototype.updateLastResult=function(n,r){return r===void 0&&(r=this.variables),this.last=j$2(j$2({},this.last),{result:this.queryManager.assumeImmutableResults?n:sa$1(n),variables:r}),Ft$2(n.errors)||delete this.last.error,this.last},t.prototype.reobserve=function(n,r){var o=this;this.isTornDown=!1;var a=r===Pe.refetch||r===Pe.fetchMore||r===Pe.poll,s=this.options.variables,u=this.options.fetchPolicy,l=Vr$1(this.options,n||{}),c=a?l:Rh$1(this.options,l);a||(this.updatePolling(),n&&n.variables&&!We$1(n.variables,s)&&c.fetchPolicy!=="standby"&&c.fetchPolicy===u&&(this.applyNextFetchPolicy("variables-changed",c),r===void 0&&(r=Pe.setVariables)));var m=c.variables&&j$2({},c.variables),me=this.fetch(c,r),xe={next:function(Ne){o.reportResult(Ne,m)},error:function(Ne){o.reportError(Ne,m)}};return a||(this.concast&&this.observer&&this.concast.removeObserver(this.observer),this.concast=me,this.observer=xe),me.addObserver(xe),me.promise},t.prototype.observe=function(){this.reportResult(this.getCurrentResult(!1),this.variables)},t.prototype.reportResult=function(n,r){var o=this.getLastError();(o||this.isDifferentFromLastResult(n))&&((o||!n.partial||this.options.returnPartialData)&&this.updateLastResult(n,r),un$1(this.observers,"next",n))},t.prototype.reportError=function(n,r){var o=j$2(j$2({},this.getLastResult()),{error:n,errors:n.graphQLErrors,networkStatus:Pe.error,loading:!1});this.updateLastResult(o,r),un$1(this.observers,"error",this.last.error=n)},t.prototype.hasObservers=function(){return this.observers.size>0},t.prototype.tearDownQuery=function(){this.isTornDown||(this.concast&&this.observer&&(this.concast.removeObserver(this.observer),delete this.concast,delete this.observer),this.stopPolling(),this.subscriptions.forEach(function(n){return n.unsubscribe()}),this.subscriptions.clear(),this.queryManager.stopQuery(this.queryId),this.observers.clear(),this.isTornDown=!0)},t}(be$2);la$1(Aa$1);function ws$1(e){var t=e.options,n=t.fetchPolicy,r=t.nextFetchPolicy;return n==="cache-and-network"||n==="network-only"?e.reobserve({fetchPolicy:"cache-first",nextFetchPolicy:function(){return this.nextFetchPolicy=r,typeof r=="function"?r.apply(this,arguments):n}}):e.reobserve()}function Ph$1(e){__DEV__&&ee$2.error("Unhandled error",e.message,e.stack)}function Cs$1(e){__DEV__&&e&&__DEV__&&ee$2.debug("Missing cache result fields: ".concat(JSON.stringify(e)),e)}var Ia$1=function(){function e(t){var n=t.cache,r=t.client,o=t.resolvers,a=t.fragmentMatcher;this.cache=n,r&&(this.client=r),o&&this.addResolvers(o),a&&this.setFragmentMatcher(a)}return e.prototype.addResolvers=function(t){var n=this;this.resolvers=this.resolvers||{},Array.isArray(t)?t.forEach(function(r){n.resolvers=$o$1(n.resolvers,r)}):this.resolvers=$o$1(this.resolvers,t)},e.prototype.setResolvers=function(t){this.resolvers={},this.addResolvers(t)},e.prototype.getResolvers=function(){return this.resolvers||{}},e.prototype.runResolvers=function(t){var n=t.document,r=t.remoteResult,o=t.context,a=t.variables,s=t.onlyRunForcedResolvers,u=s===void 0?!1:s;return wr$1(this,void 0,void 0,function(){return Cr$1(this,function(l){return n?[2,this.resolveDocument(n,r.data,o,a,this.fragmentMatcher,u).then(function(c){return j$2(j$2({},r),{data:c.result})})]:[2,r]})})},e.prototype.setFragmentMatcher=function(t){this.fragmentMatcher=t},e.prototype.getFragmentMatcher=function(){return this.fragmentMatcher},e.prototype.clientQuery=function(t){return hi$1(["client"],t)&&this.resolvers?t:null},e.prototype.serverQuery=function(t){return Bo$1(t)},e.prototype.prepareContext=function(t){var n=this.cache;return j$2(j$2({},t),{cache:n,getCacheKey:function(r){return n.identify(r)}})},e.prototype.addExportedVariables=function(t,n,r){return n===void 0&&(n={}),r===void 0&&(r={}),wr$1(this,void 0,void 0,function(){return Cr$1(this,function(o){return t?[2,this.resolveDocument(t,this.buildRootValueFromCache(t,n)||{},this.prepareContext(r),n).then(function(a){return j$2(j$2({},n),a.exportedVariables)})]:[2,j$2({},n)]})})},e.prototype.shouldForceResolvers=function(t){var n=!1;return bt$2(t,{Directive:{enter:function(r){if(r.name.value==="client"&&r.arguments&&(n=r.arguments.some(function(o){return o.name.value==="always"&&o.value.kind==="BooleanValue"&&o.value.value===!0}),n))return di$1}}}),n},e.prototype.buildRootValueFromCache=function(t,n){return this.cache.diff({query:Fo$1(t),variables:n,returnPartialData:!0,optimistic:!1}).result},e.prototype.resolveDocument=function(t,n,r,o,a,s){return r===void 0&&(r={}),o===void 0&&(o={}),a===void 0&&(a=function(){return!0}),s===void 0&&(s=!1),wr$1(this,void 0,void 0,function(){var u,l,c,m,me,xe,Ne,He,Ye;return Cr$1(this,function(Je){return u=sn$1(t),l=Ir(t),c=Sr$1(l),m=u.operation,me=m?m.charAt(0).toUpperCase()+m.slice(1):"Query",xe=this,Ne=xe.cache,He=xe.client,Ye={fragmentMap:c,context:j$2(j$2({},r),{cache:Ne,client:He}),variables:o,fragmentMatcher:a,defaultOperationType:me,exportedVariables:{},onlyRunForcedResolvers:s},[2,this.resolveSelectionSet(u.selectionSet,n,Ye).then(function(vn){return{result:vn,exportedVariables:Ye.exportedVariables}})]})})},e.prototype.resolveSelectionSet=function(t,n,r){return wr$1(this,void 0,void 0,function(){var o,a,s,u,l,c=this;return Cr$1(this,function(m){return o=r.fragmentMap,a=r.context,s=r.variables,u=[n],l=function(me){return wr$1(c,void 0,void 0,function(){var xe,Ne;return Cr$1(this,function(He){return Er$1(me,s)?Tt$1(me)?[2,this.resolveField(me,n,r).then(function(Ye){var Je;typeof Ye<"u"&&u.push((Je={},Je[Qt$2(me)]=Ye,Je))})]:(yi$1(me)?xe=me:(xe=o[me.name.value],__DEV__?ee$2(xe,"No fragment named ".concat(me.name.value)):ee$2(xe,9)),xe&&xe.typeCondition&&(Ne=xe.typeCondition.name.value,r.fragmentMatcher(n,Ne,a))?[2,this.resolveSelectionSet(xe.selectionSet,n,r).then(function(Ye){u.push(Ye)})]:[2]):[2]})})},[2,Promise.all(t.selections.map(l)).then(function(){return _i$1(u)})]})})},e.prototype.resolveField=function(t,n,r){return wr$1(this,void 0,void 0,function(){var o,a,s,u,l,c,m,me,xe,Ne=this;return Cr$1(this,function(He){return o=r.variables,a=t.name.value,s=Qt$2(t),u=a!==s,l=n[s]||n[a],c=Promise.resolve(l),(!r.onlyRunForcedResolvers||this.shouldForceResolvers(t))&&(m=n.__typename||r.defaultOperationType,me=this.resolvers&&this.resolvers[m],me&&(xe=me[u?a:s],xe&&(c=Promise.resolve(Vn$1.withValue(this.cache,xe,[n,Ar(t,o),r.context,{field:t,fragmentMap:r.fragmentMap}]))))),[2,c.then(function(Ye){if(Ye===void 0&&(Ye=l),t.directives&&t.directives.forEach(function(Je){Je.name.value==="export"&&Je.arguments&&Je.arguments.forEach(function(vn){vn.name.value==="as"&&vn.value.kind==="StringValue"&&(r.exportedVariables[vn.value.value]=Ye)})}),!t.selectionSet||Ye==null)return Ye;if(Array.isArray(Ye))return Ne.resolveSubSelectedArray(t,Ye,r);if(t.selectionSet)return Ne.resolveSelectionSet(t.selectionSet,Ye,r)})]})})},e.prototype.resolveSubSelectedArray=function(t,n,r){var o=this;return Promise.all(n.map(function(a){if(a===null)return null;if(Array.isArray(a))return o.resolveSubSelectedArray(t,a,r);if(t.selectionSet)return o.resolveSelectionSet(t.selectionSet,a,r)}))},e}(),Gn$1=new(zt$2?WeakMap:Map);function Es$1(e,t){var n=e[t];typeof n=="function"&&(e[t]=function(){return Gn$1.set(e,(Gn$1.get(e)+1)%1e15),n.apply(this,arguments)})}function $u$1(e){e.notifyTimeout&&(clearTimeout(e.notifyTimeout),e.notifyTimeout=void 0)}var Ta$1=function(){function e(t,n){n===void 0&&(n=t.generateQueryId()),this.queryId=n,this.listeners=new Set,this.document=null,this.lastRequestId=1,this.subscriptions=new Set,this.stopped=!1,this.dirty=!1,this.observableQuery=null;var r=this.cache=t.cache;Gn$1.has(r)||(Gn$1.set(r,0),Es$1(r,"evict"),Es$1(r,"modify"),Es$1(r,"reset"))}return e.prototype.init=function(t){var n=t.networkStatus||Pe.loading;return this.variables&&this.networkStatus!==Pe.loading&&!We$1(this.variables,t.variables)&&(n=Pe.setVariables),We$1(t.variables,this.variables)||(this.lastDiff=void 0),Object.assign(this,{document:t.document,variables:t.variables,networkError:null,graphQLErrors:this.graphQLErrors||[],networkStatus:n}),t.observableQuery&&this.setObservableQuery(t.observableQuery),t.lastRequestId&&(this.lastRequestId=t.lastRequestId),this},e.prototype.reset=function(){$u$1(this),this.lastDiff=void 0,this.dirty=!1},e.prototype.getDiff=function(t){t===void 0&&(t=this.variables);var n=this.getDiffOptions(t);if(this.lastDiff&&We$1(n,this.lastDiff.options))return this.lastDiff.diff;this.updateWatch(this.variables=t);var r=this.observableQuery;if(r&&r.options.fetchPolicy==="no-cache")return{complete:!1};var o=this.cache.diff(n);return this.updateLastDiff(o,n),o},e.prototype.updateLastDiff=function(t,n){this.lastDiff=t?{diff:t,options:n||this.getDiffOptions()}:void 0},e.prototype.getDiffOptions=function(t){var n;return t===void 0&&(t=this.variables),{query:this.document,variables:t,returnPartialData:!0,optimistic:!0,canonizeResults:(n=this.observableQuery)===null||n===void 0?void 0:n.options.canonizeResults}},e.prototype.setDiff=function(t){var n=this,r=this.lastDiff&&this.lastDiff.diff;this.updateLastDiff(t),!this.dirty&&!We$1(r&&r.result,t&&t.result)&&(this.dirty=!0,this.notifyTimeout||(this.notifyTimeout=setTimeout(function(){return n.notify()},0)))},e.prototype.setObservableQuery=function(t){var n=this;t!==this.observableQuery&&(this.oqListener&&this.listeners.delete(this.oqListener),this.observableQuery=t,t?(t.queryInfo=this,this.listeners.add(this.oqListener=function(){var r=n.getDiff();r.fromOptimisticTransaction?t.observe():ws$1(t)})):delete this.oqListener)},e.prototype.notify=function(){var t=this;$u$1(this),this.shouldNotify()&&this.listeners.forEach(function(n){return n(t)}),this.dirty=!1},e.prototype.shouldNotify=function(){if(!this.dirty||!this.listeners.size)return!1;if(zr$1(this.networkStatus)&&this.observableQuery){var t=this.observableQuery.options.fetchPolicy;if(t!=="cache-only"&&t!=="cache-and-network")return!1}return!0},e.prototype.stop=function(){if(!this.stopped){this.stopped=!0,this.reset(),this.cancel(),this.cancel=e.prototype.cancel,this.subscriptions.forEach(function(n){return n.unsubscribe()});var t=this.observableQuery;t&&t.stopPolling()}},e.prototype.cancel=function(){},e.prototype.updateWatch=function(t){var n=this;t===void 0&&(t=this.variables);var r=this.observableQuery;if(!(r&&r.options.fetchPolicy==="no-cache")){var o=j$2(j$2({},this.getDiffOptions(t)),{watcher:this,callback:function(a){return n.setDiff(a)}});(!this.lastWatch||!We$1(o,this.lastWatch))&&(this.cancel(),this.cancel=this.cache.watch(this.lastWatch=o))}},e.prototype.resetLastWrite=function(){this.lastWrite=void 0},e.prototype.shouldWrite=function(t,n){var r=this.lastWrite;return!(r&&r.dmCount===Gn$1.get(this.cache)&&We$1(n,r.variables)&&We$1(t.data,r.result.data))},e.prototype.markResult=function(t,n,r){var o=this;this.graphQLErrors=Ft$2(t.errors)?t.errors:[],this.reset(),n.fetchPolicy==="no-cache"?this.updateLastDiff({result:t.data,complete:!0},this.getDiffOptions(n.variables)):r!==0&&(Oa$1(t,n.errorPolicy)?this.cache.performTransaction(function(a){if(o.shouldWrite(t,n.variables))a.writeQuery({query:o.document,data:t.data,variables:n.variables,overwrite:r===1}),o.lastWrite={result:t,variables:n.variables,dmCount:Gn$1.get(o.cache)};else if(o.lastDiff&&o.lastDiff.diff.complete){t.data=o.lastDiff.diff.result;return}var s=o.getDiffOptions(n.variables),u=a.diff(s);o.stopped||o.updateWatch(n.variables),o.updateLastDiff(u,s),u.complete&&(t.data=u.result)}):this.lastWrite=void 0)},e.prototype.markReady=function(){return this.networkError=null,this.networkStatus=Pe.ready},e.prototype.markError=function(t){return this.networkStatus=Pe.error,this.lastWrite=void 0,this.reset(),t.graphQLErrors&&(this.graphQLErrors=t.graphQLErrors),t.networkError&&(this.networkError=t.networkError),t},e}();function Oa$1(e,t){t===void 0&&(t="none");var n=t==="ignore"||t==="all",r=!Fn$1(e);return!r&&n&&e.data&&(r=!0),r}var kh$1=Object.prototype.hasOwnProperty,ju$1=function(){function e(t){var n=t.cache,r=t.link,o=t.defaultOptions,a=t.queryDeduplication,s=a===void 0?!1:a,u=t.onBroadcast,l=t.ssrMode,c=l===void 0?!1:l,m=t.clientAwareness,me=m===void 0?{}:m,xe=t.localState,Ne=t.assumeImmutableResults;this.clientAwareness={},this.queries=new Map,this.fetchCancelFns=new Map,this.transformCache=new(zt$2?WeakMap:Map),this.queryIdCounter=1,this.requestIdCounter=1,this.mutationIdCounter=1,this.inFlightLinkObservables=new Map,this.cache=n,this.link=r,this.defaultOptions=o||Object.create(null),this.queryDeduplication=s,this.clientAwareness=me,this.localState=xe||new Ia$1({cache:n}),this.ssrMode=c,this.assumeImmutableResults=!!Ne,(this.onBroadcast=u)&&(this.mutationStore=Object.create(null))}return e.prototype.stop=function(){var t=this;this.queries.forEach(function(n,r){t.stopQueryNoBroadcast(r)}),this.cancelPendingFetches(__DEV__?new _e$1("QueryManager stopped while query was in flight"):new _e$1(11))},e.prototype.cancelPendingFetches=function(t){this.fetchCancelFns.forEach(function(n){return n(t)}),this.fetchCancelFns.clear()},e.prototype.mutate=function(t){var n,r,o=t.mutation,a=t.variables,s=t.optimisticResponse,u=t.updateQueries,l=t.refetchQueries,c=l===void 0?[]:l,m=t.awaitRefetchQueries,me=m===void 0?!1:m,xe=t.update,Ne=t.onQueryUpdated,He=t.fetchPolicy,Ye=He===void 0?((n=this.defaultOptions.mutate)===null||n===void 0?void 0:n.fetchPolicy)||"network-only":He,Je=t.errorPolicy,vn=Je===void 0?((r=this.defaultOptions.mutate)===null||r===void 0?void 0:r.errorPolicy)||"none":Je,La=t.keepRootFields,sr=t.context;return wr$1(this,void 0,void 0,function(){var Zr,zs,za;return Cr$1(this,function(Hs){switch(Hs.label){case 0:return __DEV__?ee$2(o,"mutation option is required. You must specify your GraphQL document in the mutation option."):ee$2(o,12),__DEV__?ee$2(Ye==="network-only"||Ye==="no-cache","Mutations support only 'network-only' or 'no-cache' fetchPolicy strings. The default `network-only` behavior automatically writes mutation results to the cache. Passing `no-cache` skips the cache write."):ee$2(Ye==="network-only"||Ye==="no-cache",13),Zr=this.generateMutationId(),o=this.transform(o).document,a=this.getVariables(o,a),this.transform(o).hasClientExports?[4,this.localState.addExportedVariables(o,a,sr)]:[3,2];case 1:a=Hs.sent(),Hs.label=2;case 2:return zs=this.mutationStore&&(this.mutationStore[Zr]={mutation:o,variables:a,loading:!0,error:null}),s&&this.markMutationOptimistic(s,{mutationId:Zr,document:o,variables:a,fetchPolicy:Ye,errorPolicy:vn,context:sr,updateQueries:u,update:xe,keepRootFields:La}),this.broadcastQueries(),za=this,[2,new Promise(function(lc,Ty){return ca$1(za.getObservableFromLink(o,j$2(j$2({},sr),{optimisticResponse:s}),a,!1),function(_y){if(Fn$1(_y)&&vn==="none")throw new Tr$1({graphQLErrors:_y.errors});zs&&(zs.loading=!1,zs.error=null);var xy=j$2({},_y);return typeof c=="function"&&(c=c(xy)),vn==="ignore"&&Fn$1(xy)&&delete xy.errors,za.markMutationResult({mutationId:Zr,result:xy,document:o,variables:a,fetchPolicy:Ye,errorPolicy:vn,context:sr,update:xe,updateQueries:u,awaitRefetchQueries:me,refetchQueries:c,removeOptimistic:s?Zr:void 0,onQueryUpdated:Ne,keepRootFields:La})}).subscribe({next:function(_y){za.broadcastQueries(),lc(_y)},error:function(_y){zs&&(zs.loading=!1,zs.error=_y),s&&za.cache.removeOptimistic(Zr),za.broadcastQueries(),Ty(_y instanceof Tr$1?_y:new Tr$1({networkError:_y}))}})})]}})})},e.prototype.markMutationResult=function(t,n){var r=this;n===void 0&&(n=this.cache);var o=t.result,a=[],s=t.fetchPolicy==="no-cache";if(!s&&Oa$1(o,t.errorPolicy)){a.push({result:o.data,dataId:"ROOT_MUTATION",query:t.document,variables:t.variables});var u=t.updateQueries;u&&this.queries.forEach(function(c,m){var me=c.observableQuery,xe=me&&me.queryName;if(!(!xe||!kh$1.call(u,xe))){var Ne=u[xe],He=r.queries.get(m),Ye=He.document,Je=He.variables,vn=n.diff({query:Ye,variables:Je,returnPartialData:!0,optimistic:!1}),La=vn.result,sr=vn.complete;if(sr&&La){var Zr=Ne(La,{mutationResult:o,queryName:Ye&&Mn$1(Ye)||void 0,queryVariables:Je});Zr&&a.push({result:Zr,dataId:"ROOT_QUERY",query:Ye,variables:Je})}}})}if(a.length>0||t.refetchQueries||t.update||t.onQueryUpdated||t.removeOptimistic){var l=[];if(this.refetchQueries({updateCache:function(c){s||a.forEach(function(xe){return c.write(xe)});var m=t.update;if(m){if(!s){var me=c.diff({id:"ROOT_MUTATION",query:r.transform(t.document).asQuery,variables:t.variables,optimistic:!1,returnPartialData:!0});me.complete&&(o=j$2(j$2({},o),{data:me.result}))}m(c,o,{context:t.context,variables:t.variables})}!s&&!t.keepRootFields&&c.modify({id:"ROOT_MUTATION",fields:function(xe,Ne){var He=Ne.fieldName,Ye=Ne.DELETE;return He==="__typename"?xe:Ye}})},include:t.refetchQueries,optimistic:!1,removeOptimistic:t.removeOptimistic,onQueryUpdated:t.onQueryUpdated||null}).forEach(function(c){return l.push(c)}),t.awaitRefetchQueries||t.onQueryUpdated)return Promise.all(l).then(function(){return o})}return Promise.resolve(o)},e.prototype.markMutationOptimistic=function(t,n){var r=this,o=typeof t=="function"?t(n.variables):t;return this.cache.recordOptimisticTransaction(function(a){try{r.markMutationResult(j$2(j$2({},n),{result:{data:o}}),a)}catch(s){__DEV__&&ee$2.error(s)}},n.mutationId)},e.prototype.fetchQuery=function(t,n,r){return this.fetchQueryObservable(t,n,r).promise},e.prototype.getQueryStore=function(){var t=Object.create(null);return this.queries.forEach(function(n,r){t[r]={variables:n.variables,networkStatus:n.networkStatus,networkError:n.networkError,graphQLErrors:n.graphQLErrors}}),t},e.prototype.resetErrors=function(t){var n=this.queries.get(t);n&&(n.networkError=void 0,n.graphQLErrors=[])},e.prototype.transform=function(t){var n=this.transformCache;if(!n.has(t)){var r=this.cache.transformDocument(t),o=Lo$1(this.cache.transformForLink(r)),a=this.localState.clientQuery(r),s=o&&this.localState.serverQuery(o),u={document:r,hasClientExports:To$1(r),hasForcedResolvers:this.localState.shouldForceResolvers(r),clientQuery:a,serverQuery:s,defaultVars:cn$1(pr$1(r)),asQuery:j$2(j$2({},r),{definitions:r.definitions.map(function(c){return c.kind==="OperationDefinition"&&c.operation!=="query"?j$2(j$2({},c),{operation:"query"}):c})})},l=function(c){c&&!n.has(c)&&n.set(c,u)};l(t),l(r),l(a),l(s)}return n.get(t)},e.prototype.getVariables=function(t,n){return j$2(j$2({},this.transform(t).defaultVars),n)},e.prototype.watchQuery=function(t){t=j$2(j$2({},t),{variables:this.getVariables(t.query,t.variables)}),typeof t.notifyOnNetworkStatusChange>"u"&&(t.notifyOnNetworkStatusChange=!1);var n=new Ta$1(this),r=new Aa$1({queryManager:this,queryInfo:n,options:t});return this.queries.set(r.queryId,n),n.init({document:r.query,observableQuery:r,variables:r.variables}),r},e.prototype.query=function(t,n){var r=this;return n===void 0&&(n=this.generateQueryId()),__DEV__?ee$2(t.query,"query option is required. You must specify your GraphQL document in the query option."):ee$2(t.query,14),__DEV__?ee$2(t.query.kind==="Document",'You must wrap the query string in a "gql" tag.'):ee$2(t.query.kind==="Document",15),__DEV__?ee$2(!t.returnPartialData,"returnPartialData option only supported on watchQuery."):ee$2(!t.returnPartialData,16),__DEV__?ee$2(!t.pollInterval,"pollInterval option only supported on watchQuery."):ee$2(!t.pollInterval,17),this.fetchQuery(n,t).finally(function(){return r.stopQuery(n)})},e.prototype.generateQueryId=function(){return String(this.queryIdCounter++)},e.prototype.generateRequestId=function(){return this.requestIdCounter++},e.prototype.generateMutationId=function(){return String(this.mutationIdCounter++)},e.prototype.stopQueryInStore=function(t){this.stopQueryInStoreNoBroadcast(t),this.broadcastQueries()},e.prototype.stopQueryInStoreNoBroadcast=function(t){var n=this.queries.get(t);n&&n.stop()},e.prototype.clearStore=function(t){return t===void 0&&(t={discardWatches:!0}),this.cancelPendingFetches(__DEV__?new _e$1("Store reset while query was in flight (not completed in link chain)"):new _e$1(18)),this.queries.forEach(function(n){n.observableQuery?n.networkStatus=Pe.loading:n.stop()}),this.mutationStore&&(this.mutationStore=Object.create(null)),this.cache.reset(t)},e.prototype.getObservableQueries=function(t){var n=this;t===void 0&&(t="active");var r=new Map,o=new Map,a=new Set;return Array.isArray(t)&&t.forEach(function(s){typeof s=="string"?o.set(s,!1):Do$1(s)?o.set(n.transform(s).document,!1):Ae$1(s)&&s.query&&a.add(s)}),this.queries.forEach(function(s,u){var l=s.observableQuery,c=s.document;if(l){if(t==="all"){r.set(u,l);return}var m=l.queryName,me=l.options.fetchPolicy;if(me==="standby"||t==="active"&&!l.hasObservers())return;(t==="active"||m&&o.has(m)||c&&o.has(c))&&(r.set(u,l),m&&o.set(m,!0),c&&o.set(c,!0))}}),a.size&&a.forEach(function(s){var u=wi$1("legacyOneTimeQuery"),l=n.getQuery(u).init({document:s.query,variables:s.variables}),c=new Aa$1({queryManager:n,queryInfo:l,options:j$2(j$2({},s),{fetchPolicy:"network-only"})});ee$2(c.queryId===u),l.setObservableQuery(c),r.set(u,c)}),__DEV__&&o.size&&o.forEach(function(s,u){s||__DEV__&&ee$2.warn("Unknown query ".concat(typeof u=="string"?"named ":"").concat(JSON.stringify(u,null,2)," requested in refetchQueries options.include array"))}),r},e.prototype.reFetchObservableQueries=function(t){var n=this;t===void 0&&(t=!1);var r=[];return this.getObservableQueries(t?"all":"active").forEach(function(o,a){var s=o.options.fetchPolicy;o.resetLastResults(),(t||s!=="standby"&&s!=="cache-only")&&r.push(o.refetch()),n.getQuery(a).setDiff(null)}),this.broadcastQueries(),Promise.all(r)},e.prototype.setObservableQuery=function(t){this.getQuery(t.queryId).setObservableQuery(t)},e.prototype.startGraphQLSubscription=function(t){var n=this,r=t.query,o=t.fetchPolicy,a=t.errorPolicy,s=t.variables,u=t.context,l=u===void 0?{}:u;r=this.transform(r).document,s=this.getVariables(r,s);var c=function(me){return n.getObservableFromLink(r,l,me).map(function(xe){if(o!=="no-cache"&&(Oa$1(xe,a)&&n.cache.write({query:r,result:xe.data,dataId:"ROOT_SUBSCRIPTION",variables:me}),n.broadcastQueries()),Fn$1(xe))throw new Tr$1({graphQLErrors:xe.errors});return xe})};if(this.transform(r).hasClientExports){var m=this.localState.addExportedVariables(r,s,l).then(c);return new be$2(function(me){var xe=null;return m.then(function(Ne){return xe=Ne.subscribe(me)},me.error),function(){return xe&&xe.unsubscribe()}})}return c(s)},e.prototype.stopQuery=function(t){this.stopQueryNoBroadcast(t),this.broadcastQueries()},e.prototype.stopQueryNoBroadcast=function(t){this.stopQueryInStoreNoBroadcast(t),this.removeQuery(t)},e.prototype.removeQuery=function(t){this.fetchCancelFns.delete(t),this.queries.has(t)&&(this.getQuery(t).stop(),this.queries.delete(t))},e.prototype.broadcastQueries=function(){this.onBroadcast&&this.onBroadcast(),this.queries.forEach(function(t){return t.notify()})},e.prototype.getLocalState=function(){return this.localState},e.prototype.getObservableFromLink=function(t,n,r,o){var a=this,s;o===void 0&&(o=(s=n==null?void 0:n.queryDeduplication)!==null&&s!==void 0?s:this.queryDeduplication);var u,l=this.transform(t).serverQuery;if(l){var c=this,m=c.inFlightLinkObservables,me=c.link,xe={query:l,variables:r,operationName:Mn$1(l)||void 0,context:this.prepareContext(j$2(j$2({},n),{forceFetch:!o}))};if(n=xe.context,o){var Ne=m.get(l)||new Map;m.set(l,Ne);var He=Bt$2(r);if(u=Ne.get(He),!u){var Ye=new Ln$1([Bn$1(me,xe)]);Ne.set(He,u=Ye),Ye.cleanup(function(){Ne.delete(He)&&Ne.size<1&&m.delete(l)})}}else u=new Ln$1([Bn$1(me,xe)])}else u=new Ln$1([be$2.of({data:{}})]),n=this.prepareContext(n);var Je=this.transform(t).clientQuery;return Je&&(u=ca$1(u,function(vn){return a.localState.runResolvers({document:Je,remoteResult:vn,context:n,variables:r})})),u},e.prototype.getResultsFromLink=function(t,n,r){var o=t.lastRequestId=this.generateRequestId();return ca$1(this.getObservableFromLink(t.document,r.context,r.variables),function(a){var s=Ft$2(a.errors);if(o>=t.lastRequestId){if(s&&r.errorPolicy==="none")throw t.markError(new Tr$1({graphQLErrors:a.errors}));t.markResult(a,r,n),t.markReady()}var u={data:a.data,loading:!1,networkStatus:Pe.ready};return s&&r.errorPolicy!=="ignore"&&(u.errors=a.errors,u.networkStatus=Pe.error),u},function(a){var s=Bu$1(a)?a:new Tr$1({networkError:a});throw o>=t.lastRequestId&&t.markError(s),s})},e.prototype.fetchQueryObservable=function(t,n,r){var o=this;r===void 0&&(r=Pe.loading);var a=this.transform(n.query).document,s=this.getVariables(a,n.variables),u=this.getQuery(t),l=this.defaultOptions.watchQuery,c=n.fetchPolicy,m=c===void 0?l&&l.fetchPolicy||"cache-first":c,me=n.errorPolicy,xe=me===void 0?l&&l.errorPolicy||"none":me,Ne=n.returnPartialData,He=Ne===void 0?!1:Ne,Ye=n.notifyOnNetworkStatusChange,Je=Ye===void 0?!1:Ye,vn=n.context,La=vn===void 0?{}:vn,sr=Object.assign({},n,{query:a,variables:s,fetchPolicy:m,errorPolicy:xe,returnPartialData:He,notifyOnNetworkStatusChange:Je,context:La}),Zr=function(Hs){sr.variables=Hs;var lc=o.fetchQueryByPolicy(u,sr,r);return sr.fetchPolicy!=="standby"&&lc.length>0&&u.observableQuery&&u.observableQuery.applyNextFetchPolicy("after-fetch",n),lc},zs=function(){return o.fetchCancelFns.delete(t)};this.fetchCancelFns.set(t,function(Hs){zs(),setTimeout(function(){return za.cancel(Hs)})});var za=new Ln$1(this.transform(sr.query).hasClientExports?this.localState.addExportedVariables(sr.query,sr.variables,sr.context).then(Zr):Zr(sr.variables));return za.promise.then(zs,zs),za},e.prototype.refetchQueries=function(t){var n=this,r=t.updateCache,o=t.include,a=t.optimistic,s=a===void 0?!1:a,u=t.removeOptimistic,l=u===void 0?s?wi$1("refetchQueries"):void 0:u,c=t.onQueryUpdated,m=new Map;o&&this.getObservableQueries(o).forEach(function(xe,Ne){m.set(Ne,{oq:xe,lastDiff:n.getQuery(Ne).getDiff()})});var me=new Map;return r&&this.cache.batch({update:r,optimistic:s&&l||!1,removeOptimistic:l,onWatchUpdated:function(xe,Ne,He){var Ye=xe.watcher instanceof Ta$1&&xe.watcher.observableQuery;if(Ye){if(c){m.delete(Ye.queryId);var Je=c(Ye,Ne,He);return Je===!0&&(Je=Ye.refetch()),Je!==!1&&me.set(Ye,Je),Je}c!==null&&m.set(Ye.queryId,{oq:Ye,lastDiff:He,diff:Ne})}}}),m.size&&m.forEach(function(xe,Ne){var He=xe.oq,Ye=xe.lastDiff,Je=xe.diff,vn;if(c){if(!Je){var La=He.queryInfo;La.reset(),Je=La.getDiff()}vn=c(He,Je,Ye)}(!c||vn===!0)&&(vn=He.refetch()),vn!==!1&&me.set(He,vn),Ne.indexOf("legacyOneTimeQuery")>=0&&n.stopQueryNoBroadcast(Ne)}),l&&this.cache.removeOptimistic(l),me},e.prototype.fetchQueryByPolicy=function(t,n,r){var o=this,a=n.query,s=n.variables,u=n.fetchPolicy,l=n.refetchWritePolicy,c=n.errorPolicy,m=n.returnPartialData,me=n.context,xe=n.notifyOnNetworkStatusChange,Ne=t.networkStatus;t.init({document:this.transform(a).document,variables:s,networkStatus:r});var He=function(){return t.getDiff(s)},Ye=function(Zr,zs){zs===void 0&&(zs=t.networkStatus||Pe.loading);var za=Zr.result;__DEV__&&!m&&!We$1(za,{})&&Cs$1(Zr.missing);var Hs=function(lc){return be$2.of(j$2({data:lc,loading:zr$1(zs),networkStatus:zs},Zr.complete?null:{partial:!0}))};return za&&o.transform(a).hasForcedResolvers?o.localState.runResolvers({document:a,remoteResult:{data:za},context:me,variables:s,onlyRunForcedResolvers:!0}).then(function(lc){return Hs(lc.data||void 0)}):Hs(za)},Je=u==="no-cache"?0:r===Pe.refetch&&l!=="merge"?1:2,vn=function(){return o.getResultsFromLink(t,Je,{variables:s,context:me,fetchPolicy:u,errorPolicy:c})},La=xe&&typeof Ne=="number"&&Ne!==r&&zr$1(r);switch(u){default:case"cache-first":{var sr=He();return sr.complete?[Ye(sr,t.markReady())]:m||La?[Ye(sr),vn()]:[vn()]}case"cache-and-network":{var sr=He();return sr.complete||m||La?[Ye(sr),vn()]:[vn()]}case"cache-only":return[Ye(He(),t.markReady())];case"network-only":return La?[Ye(He()),vn()]:[vn()];case"no-cache":return La?[Ye(t.getDiff()),vn()]:[vn()];case"standby":return[]}},e.prototype.getQuery=function(t){return t&&!this.queries.has(t)&&this.queries.set(t,new Ta$1(this,t)),this.queries.get(t)},e.prototype.prepareContext=function(t){t===void 0&&(t={});var n=this.localState.prepareContext(t);return j$2(j$2({},n),{clientAwareness:this.clientAwareness})},e}(),Uu$1=!1,Ss$1=function(){function e(t){var n=this;this.resetStoreCallbacks=[],this.clearStoreCallbacks=[];var r=t.uri,o=t.credentials,a=t.headers,s=t.cache,u=t.ssrMode,l=u===void 0?!1:u,c=t.ssrForceFetchDelay,m=c===void 0?0:c,me=t.connectToDevTools,xe=me===void 0?typeof window=="object"&&!window.__APOLLO_CLIENT__&&__DEV__:me,Ne=t.queryDeduplication,He=Ne===void 0?!0:Ne,Ye=t.defaultOptions,Je=t.assumeImmutableResults,vn=Je===void 0?!1:Je,La=t.resolvers,sr=t.typeDefs,Zr=t.fragmentMatcher,zs=t.name,za=t.version,Hs=t.link;if(Hs||(Hs=r?new Zo$1({uri:r,credentials:o,headers:a}):Ht$2.empty()),!s)throw __DEV__?new _e$1(`To initialize Apollo Client, you must specify a 'cache' property in the options object. 
For more information, please visit: https://go.apollo.dev/c/docs`):new _e$1(7);if(this.link=Hs,this.cache=s,this.disableNetworkFetches=l||m>0,this.queryDeduplication=He,this.defaultOptions=Ye||Object.create(null),this.typeDefs=sr,m&&setTimeout(function(){return n.disableNetworkFetches=!1},m),this.watchQuery=this.watchQuery.bind(this),this.query=this.query.bind(this),this.mutate=this.mutate.bind(this),this.resetStore=this.resetStore.bind(this),this.reFetchObservableQueries=this.reFetchObservableQueries.bind(this),xe&&typeof window=="object"&&(window.__APOLLO_CLIENT__=this),!Uu$1&&__DEV__&&(Uu$1=!0,typeof window<"u"&&window.document&&window.top===window.self&&!window.__APOLLO_DEVTOOLS_GLOBAL_HOOK__)){var lc=window.navigator,Ty=lc&&lc.userAgent,_y=void 0;typeof Ty=="string"&&(Ty.indexOf("Chrome/")>-1?_y="https://chrome.google.com/webstore/detail/apollo-client-developer-t/jdkknkkbebbapilgoeccciglkfbmbnfm":Ty.indexOf("Firefox/")>-1&&(_y="https://addons.mozilla.org/en-US/firefox/addon/apollo-developer-tools/")),_y&&__DEV__&&ee$2.log("Download the Apollo DevTools for a better development experience: "+_y)}this.version=Fl$1,this.localState=new Ia$1({cache:s,client:this,resolvers:La,fragmentMatcher:Zr}),this.queryManager=new ju$1({cache:this.cache,link:this.link,defaultOptions:this.defaultOptions,queryDeduplication:He,ssrMode:l,clientAwareness:{name:zs,version:za},localState:this.localState,assumeImmutableResults:vn,onBroadcast:xe?function(){n.devToolsHookCb&&n.devToolsHookCb({action:{},state:{queries:n.queryManager.getQueryStore(),mutations:n.queryManager.mutationStore||{}},dataWithOptimisticResults:n.cache.extract(!0)})}:void 0})}return e.prototype.stop=function(){this.queryManager.stop()},e.prototype.watchQuery=function(t){return this.defaultOptions.watchQuery&&(t=Ci$1(this.defaultOptions.watchQuery,t)),this.disableNetworkFetches&&(t.fetchPolicy==="network-only"||t.fetchPolicy==="cache-and-network")&&(t=j$2(j$2({},t),{fetchPolicy:"cache-first"})),this.queryManager.watchQuery(t)},e.prototype.query=function(t){return this.defaultOptions.query&&(t=Ci$1(this.defaultOptions.query,t)),__DEV__?ee$2(t.fetchPolicy!=="cache-and-network","The cache-and-network fetchPolicy does not work with client.query, because client.query can only return a single result. Please use client.watchQuery to receive multiple results from the cache and the network, or consider using a different fetchPolicy, such as cache-first or network-only."):ee$2(t.fetchPolicy!=="cache-and-network",8),this.disableNetworkFetches&&t.fetchPolicy==="network-only"&&(t=j$2(j$2({},t),{fetchPolicy:"cache-first"})),this.queryManager.query(t)},e.prototype.mutate=function(t){return this.defaultOptions.mutate&&(t=Ci$1(this.defaultOptions.mutate,t)),this.queryManager.mutate(t)},e.prototype.subscribe=function(t){return this.queryManager.startGraphQLSubscription(t)},e.prototype.readQuery=function(t,n){return n===void 0&&(n=!1),this.cache.readQuery(t,n)},e.prototype.readFragment=function(t,n){return n===void 0&&(n=!1),this.cache.readFragment(t,n)},e.prototype.writeQuery=function(t){this.cache.writeQuery(t),this.queryManager.broadcastQueries()},e.prototype.writeFragment=function(t){this.cache.writeFragment(t),this.queryManager.broadcastQueries()},e.prototype.__actionHookForDevTools=function(t){this.devToolsHookCb=t},e.prototype.__requestRaw=function(t){return Bn$1(this.link,t)},e.prototype.resetStore=function(){var t=this;return Promise.resolve().then(function(){return t.queryManager.clearStore({discardWatches:!1})}).then(function(){return Promise.all(t.resetStoreCallbacks.map(function(n){return n()}))}).then(function(){return t.reFetchObservableQueries()})},e.prototype.clearStore=function(){var t=this;return Promise.resolve().then(function(){return t.queryManager.clearStore({discardWatches:!0})}).then(function(){return Promise.all(t.clearStoreCallbacks.map(function(n){return n()}))})},e.prototype.onResetStore=function(t){var n=this;return this.resetStoreCallbacks.push(t),function(){n.resetStoreCallbacks=n.resetStoreCallbacks.filter(function(r){return r!==t})}},e.prototype.onClearStore=function(t){var n=this;return this.clearStoreCallbacks.push(t),function(){n.clearStoreCallbacks=n.clearStoreCallbacks.filter(function(r){return r!==t})}},e.prototype.reFetchObservableQueries=function(t){return this.queryManager.reFetchObservableQueries(t)},e.prototype.refetchQueries=function(t){var n=this.queryManager.refetchQueries(t),r=[],o=[];n.forEach(function(s,u){r.push(u),o.push(s)});var a=Promise.all(o);return a.queries=r,a.results=o,a.catch(function(s){__DEV__&&ee$2.debug("In client.refetchQueries, Promise.all promise rejected with error ".concat(s))}),a},e.prototype.getObservableQueries=function(t){return t===void 0&&(t="active"),this.queryManager.getObservableQueries(t)},e.prototype.extract=function(t){return this.cache.extract(t)},e.prototype.restore=function(t){return this.cache.restore(t)},e.prototype.addResolvers=function(t){this.localState.addResolvers(t)},e.prototype.setResolvers=function(t){this.localState.setResolvers(t)},e.prototype.getResolvers=function(){return this.localState.getResolvers()},e.prototype.setLocalStateFragmentMatcher=function(t){this.localState.setFragmentMatcher(t)},e.prototype.setLink=function(t){this.link=this.queryManager.link=t},e}();al$1(an$1?"log":"silent");function Ot$1(e){return e===null?"null":Array.isArray(e)?"array":typeof e}function Or$1(e){return Ot$1(e)==="object"}function Vu$1(e){return Array.isArray(e)&&e.length>0&&e.every(t=>"message"in t)}function As$1(e,t){return e.length<124?e:t}var qu$1="graphql-transport-ws",kt$2;(function(e){e[e.InternalServerError=4500]="InternalServerError",e[e.InternalClientError=4005]="InternalClientError",e[e.BadRequest=4400]="BadRequest",e[e.BadResponse=4004]="BadResponse",e[e.Unauthorized=4401]="Unauthorized",e[e.Forbidden=4403]="Forbidden",e[e.SubprotocolNotAcceptable=4406]="SubprotocolNotAcceptable",e[e.ConnectionInitialisationTimeout=4408]="ConnectionInitialisationTimeout",e[e.ConnectionAcknowledgementTimeout=4504]="ConnectionAcknowledgementTimeout",e[e.SubscriberAlreadyExists=4409]="SubscriberAlreadyExists",e[e.TooManyInitialisationRequests=4429]="TooManyInitialisationRequests"})(kt$2||(kt$2={}));var it$1;(function(e){e.ConnectionInit="connection_init",e.ConnectionAck="connection_ack",e.Ping="ping",e.Pong="pong",e.Subscribe="subscribe",e.Next="next",e.Error="error",e.Complete="complete"})(it$1||(it$1={}));function Gu$1(e){if(!Or$1(e))throw new Error(`Message is expected to be an object, but got ${Ot$1(e)}`);if(!e.type)throw new Error("Message is missing the 'type' property");if(typeof e.type!="string")throw new Error(`Message is expects the 'type' property to be a string, but got ${Ot$1(e.type)}`);switch(e.type){case it$1.ConnectionInit:case it$1.ConnectionAck:case it$1.Ping:case it$1.Pong:{if("payload"in e&&!Or$1(e.payload))throw new Error(`"${e.type}" message expects the 'payload' property to be an object or missing, but got "${e.payload}"`);break}case it$1.Subscribe:{if(typeof e.id!="string")throw new Error(`"${e.type}" message expects the 'id' property to be a string, but got ${Ot$1(e.id)}`);if(!e.id)throw new Error(`"${e.type}" message requires a non-empty 'id' property`);if(!Or$1(e.payload))throw new Error(`"${e.type}" message expects the 'payload' property to be an object, but got ${Ot$1(e.payload)}`);if(typeof e.payload.query!="string")throw new Error(`"${e.type}" message payload expects the 'query' property to be a string, but got ${Ot$1(e.payload.query)}`);if(e.payload.variables!=null&&!Or$1(e.payload.variables))throw new Error(`"${e.type}" message payload expects the 'variables' property to be a an object or nullish or missing, but got ${Ot$1(e.payload.variables)}`);if(e.payload.operationName!=null&&Ot$1(e.payload.operationName)!=="string")throw new Error(`"${e.type}" message payload expects the 'operationName' property to be a string or nullish or missing, but got ${Ot$1(e.payload.operationName)}`);if(e.payload.extensions!=null&&!Or$1(e.payload.extensions))throw new Error(`"${e.type}" message payload expects the 'extensions' property to be a an object or nullish or missing, but got ${Ot$1(e.payload.extensions)}`);break}case it$1.Next:{if(typeof e.id!="string")throw new Error(`"${e.type}" message expects the 'id' property to be a string, but got ${Ot$1(e.id)}`);if(!e.id)throw new Error(`"${e.type}" message requires a non-empty 'id' property`);if(!Or$1(e.payload))throw new Error(`"${e.type}" message expects the 'payload' property to be an object, but got ${Ot$1(e.payload)}`);break}case it$1.Error:{if(typeof e.id!="string")throw new Error(`"${e.type}" message expects the 'id' property to be a string, but got ${Ot$1(e.id)}`);if(!e.id)throw new Error(`"${e.type}" message requires a non-empty 'id' property`);if(!Vu$1(e.payload))throw new Error(`"${e.type}" message expects the 'payload' property to be an array of GraphQL errors, but got ${JSON.stringify(e.payload)}`);break}case it$1.Complete:{if(typeof e.id!="string")throw new Error(`"${e.type}" message expects the 'id' property to be a string, but got ${Ot$1(e.id)}`);if(!e.id)throw new Error(`"${e.type}" message requires a non-empty 'id' property`);break}default:throw new Error(`Invalid message 'type' property "${e.type}"`)}return e}function Qu$1(e,t){return Gu$1(typeof e=="string"?JSON.parse(e,t):e)}function Qn$1(e,t){return Gu$1(e),JSON.stringify(e,t)}function zu$1(e){let{url:t,connectionParams:n,lazy:r=!0,onNonLazyError:o=console.error,lazyCloseTimeout:a=0,keepAlive:s=0,disablePong:u,connectionAckWaitTimeout:l=0,retryAttempts:c=5,retryWait:m=async function(Bg){let yy=1e3;for(let wy=0;wy<Bg;wy++)yy*=2;await new Promise(wy=>setTimeout(wy,yy+Math.floor(Math.random()*(3e3-300)+300)))},shouldRetry:me=Da$1,isFatalConnectionProblem:xe,on:Ne,webSocketImpl:He,generateID:Ye=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,Bg=>{let yy=Math.random()*16|0;return(Bg=="x"?yy:yy&3|8).toString(16)})},jsonMessageReplacer:Je,jsonMessageReviver:vn}=e,La;if(He){if(!Fh$1(He))throw new Error("Invalid WebSocket implementation provided");La=He}else typeof WebSocket<"u"?La=WebSocket:typeof global<"u"?La=global.WebSocket||global.MozWebSocket:typeof window<"u"&&(La=window.WebSocket||window.MozWebSocket);if(!La)throw new Error("WebSocket implementation missing; on Node you can `import WebSocket from 'ws';` and pass `webSocketImpl: WebSocket` to `createClient`");let sr=La,Zr=(()=>{let Bg=(()=>{let wy={};return{on(Ay,$b){return wy[Ay]=$b,()=>{delete wy[Ay]}},emit(Ay){var $b;"id"in Ay&&(($b=wy[Ay.id])===null||$b===void 0||$b.call(wy,Ay))}}})(),yy={connecting:Ne!=null&&Ne.connecting?[Ne.connecting]:[],opened:Ne!=null&&Ne.opened?[Ne.opened]:[],connected:Ne!=null&&Ne.connected?[Ne.connected]:[],ping:Ne!=null&&Ne.ping?[Ne.ping]:[],pong:Ne!=null&&Ne.pong?[Ne.pong]:[],message:Ne!=null&&Ne.message?[Bg.emit,Ne.message]:[Bg.emit],closed:Ne!=null&&Ne.closed?[Ne.closed]:[],error:Ne!=null&&Ne.error?[Ne.error]:[]};return{onMessage:Bg.on,on(wy,Ay){let $b=yy[wy];return $b.push(Ay),()=>{$b.splice($b.indexOf(Ay),1)}},emit(wy,...Ay){for(let $b of[...yy[wy]])$b(...Ay)}}})();function zs(Bg){let yy=[Zr.on("error",wy=>{yy.forEach(Ay=>Ay()),Bg(wy)}),Zr.on("closed",wy=>{yy.forEach(Ay=>Ay()),Bg(wy)})]}let za,Hs=0,lc,Ty=!1,_y=0,xy=!1;async function Bb(){clearTimeout(lc);let[Bg,yy]=await(za!=null?za:za=new Promise(($b,e0)=>(async()=>{if(Ty){if(await m(_y),!Hs)return za=void 0,e0({code:1e3,reason:"All Subscriptions Gone"});_y++}Zr.emit("connecting");let Hb=new sr(typeof t=="function"?await t():t,qu$1),Yb,Jb;function l2(){isFinite(s)&&s>0&&(clearTimeout(Jb),Jb=setTimeout(()=>{Hb.readyState===sr.OPEN&&(Hb.send(Qn$1({type:it$1.Ping})),Zr.emit("ping",!1,void 0))},s))}zs(Rb=>{za=void 0,clearTimeout(Yb),clearTimeout(Jb),e0(Rb),Da$1(Rb)&&Rb.code===4499&&(Hb.close(4499,"Terminated"),Hb.onerror=null,Hb.onclose=null)}),Hb.onerror=Rb=>Zr.emit("error",Rb),Hb.onclose=Rb=>Zr.emit("closed",Rb),Hb.onopen=async()=>{try{Zr.emit("opened",Hb);let Rb=typeof n=="function"?await n():n;if(Hb.readyState!==sr.OPEN)return;Hb.send(Qn$1(Rb?{type:it$1.ConnectionInit,payload:Rb}:{type:it$1.ConnectionInit},Je)),isFinite(l)&&l>0&&(Yb=setTimeout(()=>{Hb.close(kt$2.ConnectionAcknowledgementTimeout,"Connection acknowledgement timeout")},l)),l2()}catch(Rb){Zr.emit("error",Rb),Hb.close(kt$2.InternalClientError,As$1(Rb instanceof Error?Rb.message:new Error(Rb).message,"Internal client error"))}};let y2=!1;Hb.onmessage=({data:Rb})=>{try{let i2=Qu$1(Rb,vn);if(Zr.emit("message",i2),i2.type==="ping"||i2.type==="pong"){Zr.emit(i2.type,!0,i2.payload),i2.type==="pong"?l2():u||(Hb.send(Qn$1(i2.payload?{type:it$1.Pong,payload:i2.payload}:{type:it$1.Pong})),Zr.emit("pong",!1,i2.payload));return}if(y2)return;if(i2.type!==it$1.ConnectionAck)throw new Error(`First message cannot be of type ${i2.type}`);clearTimeout(Yb),y2=!0,Zr.emit("connected",Hb,i2.payload),Ty=!1,_y=0,$b([Hb,new Promise((s2,E2)=>zs(E2))])}catch(i2){Hb.onmessage=null,Zr.emit("error",i2),Hb.close(kt$2.BadResponse,As$1(i2 instanceof Error?i2.message:new Error(i2).message,"Bad response"))}}})()));Bg.readyState===sr.CLOSING&&await yy;let wy=()=>{},Ay=new Promise($b=>wy=$b);return[Bg,wy,Promise.race([Ay.then(()=>{if(!Hs){let $b=()=>Bg.close(1e3,"Normal Closure");isFinite(a)&&a>0?lc=setTimeout(()=>{Bg.readyState===sr.OPEN&&$b()},a):$b()}}),yy])]}function Dy(Bg){if(Da$1(Bg)&&(Lh$1(Bg.code)||[kt$2.InternalServerError,kt$2.InternalClientError,kt$2.BadRequest,kt$2.BadResponse,kt$2.Unauthorized,kt$2.SubprotocolNotAcceptable,kt$2.SubscriberAlreadyExists,kt$2.TooManyInitialisationRequests].includes(Bg.code)))throw Bg;if(xy)return!1;if(Da$1(Bg)&&Bg.code===1e3)return Hs>0;if(!c||_y>=c||!me(Bg)||(xe==null?void 0:xe(Bg)))throw Bg;return Ty=!0}return r||(async()=>{for(Hs++;;)try{let[,,Bg]=await Bb();await Bg}catch(Bg){try{if(!Dy(Bg))return}catch(yy){return o==null?void 0:o(yy)}}})(),{on:Zr.on,subscribe(Bg,yy){let wy=Ye(Bg),Ay=!1,$b=!1,e0=()=>{Hs--,Ay=!0};return(async()=>{for(Hs++;;)try{let[Hb,Yb,Jb]=await Bb();if(Ay)return Yb();let l2=Zr.onMessage(wy,y2=>{switch(y2.type){case it$1.Next:{yy.next(y2.payload);return}case it$1.Error:{$b=!0,Ay=!0,yy.error(y2.payload),e0();return}case it$1.Complete:{Ay=!0,e0();return}}});Hb.send(Qn$1({id:wy,type:it$1.Subscribe,payload:Bg},Je)),e0=()=>{!Ay&&Hb.readyState===sr.OPEN&&Hb.send(Qn$1({id:wy,type:it$1.Complete},Je)),Hs--,Ay=!0,Yb()},await Jb.finally(l2);return}catch(Hb){if(!Dy(Hb))return}})().then(()=>{$b||yy.complete()}).catch(Hb=>{yy.error(Hb)}),()=>{Ay||e0()}},async dispose(){if(xy=!0,za){let[Bg]=await za;Bg.close(1e3,"Normal Closure")}},terminate(){za&&Zr.emit("closed",{code:4499,reason:"Terminated",wasClean:!1})}}}function Da$1(e){return Or$1(e)&&"code"in e&&"reason"in e}function Lh$1(e){return[1e3,1001,1006,1005,1012,1013,1013].includes(e)?!1:e>=1e3&&e<=1999}function Fh$1(e){return typeof e=="function"&&"constructor"in e&&"CLOSED"in e&&"CLOSING"in e&&"CONNECTING"in e&&"OPEN"in e}function Bh$1(e){return Ae$1(e)&&"code"in e&&"reason"in e}var Hu$1=function(e){st$2(t,e);function t(n){var r=e.call(this)||this;return r.client=n,r}return t.prototype.request=function(n){var r=this;return new be$2(function(o){return r.client.subscribe(j$2(j$2({},n),{query:Nn$1(n.query)}),{next:o.next.bind(o),complete:o.complete.bind(o),error:function(a){return a instanceof Error?o.error(a):Bh$1(a)?o.error(new Error("Socket closed with event ".concat(a.code," ").concat(a.reason||""))):o.error(new Tr$1({graphQLErrors:Array.isArray(a)?a:[a]}))}})})},t}(Ht$2),Ku$1=ro$1(Wu$1());function $h$1(){let e=new AbortController;return setTimeout(()=>e.abort(),20),e}function Is$1(e){return br$1(this,null,function*(){try{return(yield fetch(`http://localhost:${e}/graphql/`,{signal:$h$1().signal,mode:"no-cors"})).status===0?e:null}catch(t){throw t}})}function jh$1(e){let t=e.port||parseInt(localStorage.getItem("ad4minPort")||"12000"),n=e.token||localStorage.getItem("ad4minToken")||"",r=e.url||localStorage.getItem("ad4minURL")||"";return new Ts$1(gc$1(pc$1({},e),{port:t,token:n,url:r}))}var Ts$1=class{constructor({appName:e,appDesc:t,appDomain:n,capabilities:r,port:o,token:a,url:s}){this.isFullyInitialized=!1,this.port=12e3,this.portSearchState="na",this.listeners={},this.appName=e,this.appDesc=t,this.appDomain=n,this.capabilities=r,o&&(this.port=o),s&&(this.url=s),a&&a.length>0&&this.setToken(a),localStorage.getItem("ad4minURL")&&a.length>0?(setTimeout(()=>{this.callListener("loading")},0),setInterval(()=>{this.checkConnection()},1e4),this.buildClient(),this.checkConnection()):setTimeout(()=>{this.callListener("init")},500)}connectRemote(e){return br$1(this,null,function*(){this.url=e,localStorage.setItem("ad4minToken",""),localStorage.setItem("ad4minURL",e),this.callListener("loading"),this.buildClient(),yield this.checkConnection()})}connectToPort(){return br$1(this,null,function*(){try{this.callListener("loading");let e=yield Is$1(this.port);if(e)this.callListener("port_found",e),this.setPort(e),yield this.checkConnection();else{this.setPortSearchState("searching");let t=yield this.findPort();t&&(this.callListener("port_found",t),this.setPort(t),yield this.checkConnection())}}catch(e){this.handleErrorMessage(e.message)}})}addEventListener(e,t){this.listeners[e]?this.listeners[e].push(t):this.listeners[e]=[t]}handleErrorMessage(e){console.log("error message",e),e.includes("Capability is not matched, you have capabilities:")?this.callListener("capabilties_not_matched",!this.isFullyInitialized):e==="Cannot extractByTags from a ciphered wallet. You must unlock first."?this.callListener("agent_locked"):e.includes("signature verification failed")?this.callListener("capabilties_not_matched",!this.isFullyInitialized):e==="Couldn't find an open port"?(this.setPortSearchState("not_found"),this.callListener("port_notfound"),this.callListener("not_connected")):this.isFullyInitialized?this.callListener("capabilties_not_matched",!1):this.callListener("not_connected")}callListener(e,...t){this.listeners[e]&&this.listeners[e].forEach(n=>n(...t))}findPort(){return br$1(this,null,function*(){this.callListener("port_searching");for(let e=12e3;e<=12010;e++)try{let t=yield Is$1(e);if(t)return this.setPort(t),t;continue}catch(t){this.handleErrorMessage(t.message)}throw this.setPortSearchState("not_found"),Error("Couldn't find an open port")})}setPort(e){console.warn("Setting client port to",e),this.portSearchState="found",this.port=e,localStorage.setItem("ad4minPort",e.toString()),this.url=`ws://localhost:${this.port}/graphql`,localStorage.setItem("ad4minURL",this.url),this.buildClient()}setToken(e){localStorage.setItem("ad4minToken",e),this.buildClient()}token(){return localStorage.getItem("ad4minToken")||""}setPortSearchState(e){this.portSearchState=e}buildClient(){let e=new Hu$1(zu$1({url:this.url,connectionParams:()=>({headers:{authorization:this.token()}})}));this.apolloClient=new Ss$1({link:e,cache:new Sa$1({resultCaching:!1,addTypename:!1}),defaultOptions:{watchQuery:{fetchPolicy:"no-cache"},query:{fetchPolicy:"no-cache"}}}),this.ad4mClient=new Ku$1.Ad4mClient(this.apolloClient)}checkConnection(){return br$1(this,null,function*(){var e;try{yield(e=this.ad4mClient)==null?void 0:e.agent.status(),this.callListener("connected_with_capabilities"),this.isFullyInitialized=!0}catch(t){this.handleErrorMessage(t.message)}})}requestCapability(e=!1){return br$1(this,null,function*(){var t;if(e||!this.token()){localStorage.removeItem("ad4minToken"),this.buildClient();try{this.requestId=yield(t=this.ad4mClient)==null?void 0:t.agent.requestCapability(this.appName,this.appDesc,this.appDomain,JSON.stringify(this.capabilities)),this.callListener("request_capability",this.requestId)}catch(n){this.handleErrorMessage(n.message)}return!0}else return!1})}verifyCode(e){return br$1(this,null,function*(){var t;console.log("verifyCode",this.requestId,e);try{let n=yield(t=this.ad4mClient)==null?void 0:t.agent.generateJwt(this.requestId,e);this.setToken(n),this.isFullyInitialized=!0,this.callListener("connected_with_capabilities",{executorUrl:this.url,capabilityToken:this.token,client:this.ad4mClient})}catch(n){this.handleErrorMessage(n.message)}})}};function Yu$1(e){if(window===void 0)console.log("Running ad4m-connect in node.js");else return console.log("Running ad4m-connect in browser"),jh$1(e)}var ne$1;(function(e){e[e.QR_CODE=0]="QR_CODE",e[e.AZTEC=1]="AZTEC",e[e.CODABAR=2]="CODABAR",e[e.CODE_39=3]="CODE_39",e[e.CODE_93=4]="CODE_93",e[e.CODE_128=5]="CODE_128",e[e.DATA_MATRIX=6]="DATA_MATRIX",e[e.MAXICODE=7]="MAXICODE",e[e.ITF=8]="ITF",e[e.EAN_13=9]="EAN_13",e[e.EAN_8=10]="EAN_8",e[e.PDF_417=11]="PDF_417",e[e.RSS_14=12]="RSS_14",e[e.RSS_EXPANDED=13]="RSS_EXPANDED",e[e.UPC_A=14]="UPC_A",e[e.UPC_E=15]="UPC_E",e[e.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(ne$1||(ne$1={}));var Xu$1=new Map([[ne$1.QR_CODE,"QR_CODE"],[ne$1.AZTEC,"AZTEC"],[ne$1.CODABAR,"CODABAR"],[ne$1.CODE_39,"CODE_39"],[ne$1.CODE_93,"CODE_93"],[ne$1.CODE_128,"CODE_128"],[ne$1.DATA_MATRIX,"DATA_MATRIX"],[ne$1.MAXICODE,"MAXICODE"],[ne$1.ITF,"ITF"],[ne$1.EAN_13,"EAN_13"],[ne$1.EAN_8,"EAN_8"],[ne$1.PDF_417,"PDF_417"],[ne$1.RSS_14,"RSS_14"],[ne$1.RSS_EXPANDED,"RSS_EXPANDED"],[ne$1.UPC_A,"UPC_A"],[ne$1.UPC_E,"UPC_E"],[ne$1.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),Zu$1;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.URL=1]="URL"})(Zu$1||(Zu$1={}));function Ju$1(e){return Object.values(ne$1).includes(e)}var nr$1;(function(e){e[e.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",e[e.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(nr$1||(nr$1={}));var $t$2=function(){function e(){}return e.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",e.SCAN_DEFAULT_FPS=2,e.DEFAULT_DISABLE_FLIP=!1,e.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,e.DEFAULT_SUPPORTED_SCAN_TYPE=[nr$1.SCAN_TYPE_CAMERA,nr$1.SCAN_TYPE_FILE],e}(),Na$1=function(){function e(t,n){this.format=t,this.formatName=n}return e.prototype.toString=function(){return this.formatName},e.create=function(t){if(!Xu$1.has(t))throw t+" not in html5QrcodeSupportedFormatsTextMap";return new e(t,Xu$1.get(t))},e}(),Ds$1=function(){function e(){}return e.createFromText=function(t){var n={text:t};return{decodedText:t,result:n}},e.createFromQrcodeResult=function(t){return{decodedText:t.text,result:t}},e}(),Os$1;(function(e){e[e.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",e[e.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",e[e.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(Os$1||(Os$1={}));var Ra$1=function(){function e(){}return e.createFrom=function(t){return{errorMessage:t,type:Os$1.UNKWOWN_ERROR}},e}(),Ma$1=function(){function e(t){this.verbose=t}return e.prototype.log=function(t){this.verbose&&console.log(t)},e.prototype.warn=function(t){this.verbose&&console.warn(t)},e.prototype.logError=function(t,n){(this.verbose||n===!0)&&console.error(t)},e.prototype.logErrors=function(t){if(t.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(t)},e}();function Hr$1(e){return typeof e>"u"||e===null}var zn$1=function(){function e(){}return e.codeParseError=function(t){return"QR code parse error, error = "+t},e.errorGettingUserMedia=function(t){return"Error getting userMedia, error = "+t},e.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},e.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},e.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},e.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},e}(),Rs$1=function(){function e(){}return e.isMediaStreamConstraintsValid=function(t,n){if(typeof t!="object"){var r=typeof t;return n.logError("videoConstraints should be of type object, the "+("object passed is of type "+r+"."),!0),!1}for(var o=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],a=new Set(o),s=Object.keys(t),u=0,l=s;u<l.length;u++){var c=l[u];if(a.has(c))return n.logError(c+" is not supported videoConstaints.",!0),!1}return!0},e}(),Le$1=ro$1(tf$1()),rf$1=function(){function e(t,n,r){if(this.formatMap=new Map([[ne$1.QR_CODE,Le$1.BarcodeFormat.QR_CODE],[ne$1.AZTEC,Le$1.BarcodeFormat.AZTEC],[ne$1.CODABAR,Le$1.BarcodeFormat.CODABAR],[ne$1.CODE_39,Le$1.BarcodeFormat.CODE_39],[ne$1.CODE_93,Le$1.BarcodeFormat.CODE_93],[ne$1.CODE_128,Le$1.BarcodeFormat.CODE_128],[ne$1.DATA_MATRIX,Le$1.BarcodeFormat.DATA_MATRIX],[ne$1.MAXICODE,Le$1.BarcodeFormat.MAXICODE],[ne$1.ITF,Le$1.BarcodeFormat.ITF],[ne$1.EAN_13,Le$1.BarcodeFormat.EAN_13],[ne$1.EAN_8,Le$1.BarcodeFormat.EAN_8],[ne$1.PDF_417,Le$1.BarcodeFormat.PDF_417],[ne$1.RSS_14,Le$1.BarcodeFormat.RSS_14],[ne$1.RSS_EXPANDED,Le$1.BarcodeFormat.RSS_EXPANDED],[ne$1.UPC_A,Le$1.BarcodeFormat.UPC_A],[ne$1.UPC_E,Le$1.BarcodeFormat.UPC_E],[ne$1.UPC_EAN_EXTENSION,Le$1.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!Le$1)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=n,this.logger=r;var o=this.createZXingFormats(t),a=new Map;a.set(Le$1.DecodeHintType.POSSIBLE_FORMATS,o),this.hints=a}return e.prototype.decodeAsync=function(t){var n=this;return new Promise(function(r,o){try{r(n.decode(t))}catch(a){o(a)}})},e.prototype.decode=function(t){var n=new Le$1.MultiFormatReader(this.verbose,this.hints),r=new Le$1.HTMLCanvasElementLuminanceSource(t),o=new Le$1.BinaryBitmap(new Le$1.HybridBinarizer(r)),a=n.decode(o);return{text:a.text,format:Na$1.create(this.toHtml5QrcodeSupportedFormats(a.format))}},e.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(n,r,o){t.set(n,r)}),t},e.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have "+t;return this.reverseFormatMap.get(t)},e.prototype.createZXingFormats=function(t){for(var n=[],r=0,o=t;r<o.length;r++){var a=o[r];this.formatMap.has(a)?n.push(this.formatMap.get(a)):this.logger.logError(a+" is not supported byZXingHtml5QrcodeShim")}return n},e}(),Uh$1=function(e,t,n,r){function o(a){return a instanceof n?a:new n(function(s){s(a)})}return new(n||(n=Promise))(function(a,s){function u(m){try{c(r.next(m))}catch(me){s(me)}}function l(m){try{c(r.throw(m))}catch(me){s(me)}}function c(m){m.done?a(m.value):o(m.value).then(u,l)}c((r=r.apply(e,t||[])).next())})},Vh$1=function(e,t){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,o,a,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(c){return function(m){return l([c,m])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,o&&(a=c[0]&2?o.return:c[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,c[1])).done)return a;switch(o=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,o=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){n.label=c[1];break}if(c[0]===6&&n.label<a[1]){n.label=a[1],a=c;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(c);break}a[2]&&n.ops.pop(),n.trys.pop();continue}c=t.call(e,n)}catch(m){c=[6,m],o=0}finally{r=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},Ms$1=function(){function e(t,n,r){if(this.formatMap=new Map([[ne$1.QR_CODE,"qr_code"],[ne$1.AZTEC,"aztec"],[ne$1.CODABAR,"codabar"],[ne$1.CODE_39,"code_39"],[ne$1.CODE_93,"code_93"],[ne$1.CODE_128,"code_128"],[ne$1.DATA_MATRIX,"data_matrix"],[ne$1.ITF,"itf"],[ne$1.EAN_13,"ean_13"],[ne$1.EAN_8,"ean_8"],[ne$1.PDF_417,"pdf417"],[ne$1.UPC_A,"upc_a"],[ne$1.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!e.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=r;var o=this.createBarcodeDetectorFormats(t);if(this.detector=new BarcodeDetector(o),!this.detector)throw"BarcodeDetector detector not supported"}return e.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var t=new BarcodeDetector({formats:["qr_code"]});return typeof t<"u"},e.prototype.decodeAsync=function(t){return Uh$1(this,void 0,void 0,function(){var n,r;return Vh$1(this,function(o){switch(o.label){case 0:return[4,this.detector.detect(t)];case 1:if(n=o.sent(),!n||n.length===0)throw"No barcode or QR code detected.";return r=this.selectLargestBarcode(n),[2,{text:r.rawValue,format:Na$1.create(this.toHtml5QrcodeSupportedFormats(r.format))}]}})})},e.prototype.selectLargestBarcode=function(t){for(var n=null,r=0,o=0,a=t;o<a.length;o++){var s=a[o],u=s.boundingBox.width*s.boundingBox.height;u>r&&(r=u,n=s)}if(!n)throw"No largest barcode found";return n},e.prototype.createBarcodeDetectorFormats=function(t){for(var n=[],r=0,o=t;r<o.length;r++){var a=o[r];this.formatMap.has(a)?n.push(this.formatMap.get(a)):this.logger.warn(a+" is not supported byBarcodeDetectorDelegate")}return{formats:n}},e.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have "+t;return this.reverseFormatMap.get(t)},e.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(n,r,o){t.set(n,r)}),t},e}(),nf$1=function(){function e(t,n,r,o){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.verbose=n,o.useBarCodeDetectorIfSupported===!0&&Ms$1.isSupported()?this.decoder=new Ms$1(t,n,r):this.decoder=new rf$1(t,n,r)}return e.prototype.decodeAsync=function(t){var n=this,r=performance.now();return this.decoder.decodeAsync(t).finally(function(){if(n.verbose){var o=performance.now()-r;n.executionResults.push(o),n.executions++,n.possiblyFlushPerformanceReport()}})},e.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var t=0,n=0,r=this.executionResults;n<r.length;n++){var o=r[n];t+=o}var a=t/this.executionResults.length;console.log(a+" ms for "+this.executionResults.length+" last runs."),this.executions=0,this.executionResults=[]}},e}(),af$1=function(){function e(){}return e.createExperimentalFeaturesConfig=function(t){return t?(t.useBarCodeDetectorIfSupported!==!0&&(t.useBarCodeDetectorIfSupported=!1),t):{useBarCodeDetectorIfSupported:!1}},e}(),Ke$1;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.NOT_STARTED=1]="NOT_STARTED",e[e.SCANNING=2]="SCANNING",e[e.PAUSED=3]="PAUSED"})(Ke$1||(Ke$1={}));var qh$1=function(){function e(){this.state=Ke$1.NOT_STARTED,this.onGoingTransactionNewState=Ke$1.UNKNOWN}return e.prototype.directTransition=function(t){this.failIfTransitionOngoing(),this.validateTransition(t),this.state=t},e.prototype.startTransition=function(t){return this.failIfTransitionOngoing(),this.validateTransition(t),this.onGoingTransactionNewState=t,this},e.prototype.execute=function(){if(this.onGoingTransactionNewState===Ke$1.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var t=this.onGoingTransactionNewState;this.onGoingTransactionNewState=Ke$1.UNKNOWN,this.directTransition(t)},e.prototype.cancel=function(){if(this.onGoingTransactionNewState===Ke$1.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=Ke$1.UNKNOWN},e.prototype.getState=function(){return this.state},e.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==Ke$1.UNKNOWN)throw"Cannnot transition to a new state, already under transition"},e.prototype.validateTransition=function(t){switch(this.state){case Ke$1.UNKNOWN:throw"Transition from unknown is not allowed";case Ke$1.NOT_STARTED:this.failIfNewStateIs(t,[Ke$1.PAUSED]);break;case Ke$1.SCANNING:break;case Ke$1.PAUSED:break}},e.prototype.failIfNewStateIs=function(t,n){for(var r=0,o=n;r<o.length;r++){var a=o[r];if(t===a)throw"Cannot transition from "+this.state+" to "+t}},e}(),Gh$1=function(){function e(t){this.stateManager=t}return e.prototype.startTransition=function(t){return this.stateManager.startTransition(t)},e.prototype.directTransition=function(t){this.stateManager.directTransition(t)},e.prototype.getState=function(){return this.stateManager.getState()},e.prototype.canScanFile=function(){return this.stateManager.getState()===Ke$1.NOT_STARTED},e.prototype.isScanning=function(){return this.stateManager.getState()!==Ke$1.NOT_STARTED},e.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===Ke$1.SCANNING},e.prototype.isPaused=function(){return this.stateManager.getState()===Ke$1.PAUSED},e}(),of$1=function(){function e(){}return e.create=function(){return new Gh$1(new qh$1)},e}(),Qh$1=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(r[a]=o[a])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Kt$2=function(e){Qh$1(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.DEFAULT_WIDTH=300,t.DEFAULT_WIDTH_OFFSET=2,t.FILE_SCAN_MIN_HEIGHT=300,t.MIN_QR_BOX_SIZE=50,t.SHADED_LEFT=1,t.SHADED_RIGHT=2,t.SHADED_TOP=3,t.SHADED_BOTTOM=4,t.SHADED_REGION_ELEMENT_ID="qr-shaded-region",t.VERBOSE=!1,t.BORDER_SHADER_DEFAULT_COLOR="#ffffff",t.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",t}($t$2),zh$1=function(){function e(t,n){this.logger=n,this.fps=Kt$2.SCAN_DEFAULT_FPS,t?(t.fps&&(this.fps=t.fps),this.disableFlip=t.disableFlip===!0,this.qrbox=t.qrbox,this.aspectRatio=t.aspectRatio,this.videoConstraints=t.videoConstraints):this.disableFlip=Kt$2.DEFAULT_DISABLE_FLIP}return e.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?Rs$1.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},e.prototype.isShadedBoxEnabled=function(){return!Hr$1(this.qrbox)},e.create=function(t,n){return new e(t,n)},e}(),Hn$1=function(){function e(t,n){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.videoElement=null,this.localMediaStream=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(t))throw"HTML Element with id="+t+" not found";this.elementId=t,this.verbose=!1;var r;typeof n=="boolean"?this.verbose=n===!0:n&&(this.verbose=n.verbose===!0,r=n.experimentalFeatures),this.logger=new Ma$1(this.verbose),this.qrcode=new nf$1(this.getSupportedFormats(n),this.verbose,this.logger,af$1.createExperimentalFeaturesConfig(r)),this.foreverScanTimeout,this.localMediaStream,this.shouldScan=!0,this.stateManagerProxy=of$1.create()}return e.prototype.start=function(t,n,r,o){if(!t)throw"cameraIdOrConfig is required";if(!r||typeof r!="function")throw"qrCodeSuccessCallback is required and should be a function.";o||(o=this.verbose?this.logger.log:function(){});var a=zh$1.create(n,this.logger);this.clearElement();var s=!1;a.videoConstraints&&(a.isMediaStreamConstraintsValid()?s=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var u=s;a.isShadedBoxEnabled();var l=document.getElementById(this.elementId),c=l.clientWidth?l.clientWidth:Kt$2.DEFAULT_WIDTH;l.style.position="relative",this.shouldScan=!0,this.element=l;var m=this,me=this.stateManagerProxy.startTransition(Ke$1.SCANNING);return new Promise(function(xe,Ne){var He=u?a.videoConstraints:m.createVideoConstraints(t);if(!He){me.cancel(),Ne("videoConstraints should be defined");return}navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia({audio:!1,video:He}).then(function(Ye){m.onMediaStreamReceived(Ye,a,u,c,r,o).then(function(Je){me.execute(),m.isScanning=!0,xe(null)}).catch(function(Je){me.cancel(),Ne(Je)})}).catch(function(Ye){me.cancel(),Ne(zn$1.errorGettingUserMedia(Ye))}):(me.cancel(),Ne(zn$1.cameraStreamingNotSupported()))})},e.prototype.pause=function(t){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(Ke$1.PAUSED),this.showPausedState(),(Hr$1(t)||t!==!0)&&(t=!1),t&&this.videoElement&&this.videoElement.pause()},e.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.videoElement)throw"VideoElement doesn't exist while trying resume()";var t=this,n=function(){t.stateManagerProxy.directTransition(Ke$1.SCANNING),t.hidePausedState()},r=this.videoElement.paused;if(!r){n();return}var o=function(){var a;setTimeout(n,200),(a=t.videoElement)===null||a===void 0||a.removeEventListener("playing",o)};this.videoElement.addEventListener("playing",o),this.videoElement.play()},e.prototype.getState=function(){return this.stateManagerProxy.getState()},e.prototype.stop=function(){var t=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var n=this.stateManagerProxy.startTransition(Ke$1.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var r=function(){if(t.element){var o=document.getElementById(Kt$2.SHADED_REGION_ELEMENT_ID);o&&t.element.removeChild(o)}};return new Promise(function(o,a){var s=function(){t.localMediaStream=null,t.element&&(t.element.removeChild(t.videoElement),t.element.removeChild(t.canvasElement)),r(),t.qrRegion&&(t.qrRegion=null),t.context&&(t.context=null),n.execute(),t.hidePausedState(),t.isScanning=!1,o()};t.localMediaStream||s();var u=t.localMediaStream.getVideoTracks().length,l=0;t.localMediaStream.getVideoTracks().forEach(function(c){t.localMediaStream.removeTrack(c),c.stop(),++l,l>=u&&s()})})},e.prototype.scanFile=function(t,n){return this.scanFileV2(t,n).then(function(r){return r.decodedText})},e.prototype.scanFileV2=function(t,n){var r=this;if(!t||!(t instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(Hr$1(n)&&(n=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(o,a){r.possiblyCloseLastScanImageFile(),r.clearElement(),r.lastScanImageFile=URL.createObjectURL(t);var s=new Image;s.onload=function(){var u=s.width,l=s.height,c=document.getElementById(r.elementId),m=c.clientWidth?c.clientWidth:Kt$2.DEFAULT_WIDTH,me=Math.max(c.clientHeight?c.clientHeight:l,Kt$2.FILE_SCAN_MIN_HEIGHT),xe=r.computeCanvasDrawConfig(u,l,m,me);if(n){var Ne=r.createCanvasElement(m,me,"qr-canvas-visible");Ne.style.display="inline-block",c.appendChild(Ne);var He=Ne.getContext("2d");if(!He)throw"Unable to get 2d context from canvas";He.canvas.width=m,He.canvas.height=me,He.drawImage(s,0,0,u,l,xe.x,xe.y,xe.width,xe.height)}var Ye=r.createCanvasElement(xe.width,xe.height);c.appendChild(Ye);var Je=Ye.getContext("2d");if(!Je)throw"Unable to get 2d context from canvas";Je.canvas.width=xe.width,Je.canvas.height=xe.height,Je.drawImage(s,0,0,u,l,0,0,xe.width,xe.height);try{r.qrcode.decodeAsync(Ye).then(function(vn){o(Ds$1.createFromQrcodeResult(vn))}).catch(a)}catch(vn){a("QR code parse error, error = "+vn)}},s.onerror=a,s.onabort=a,s.onstalled=a,s.onsuspend=a,s.src=URL.createObjectURL(t)})},e.prototype.clear=function(){this.clearElement()},e.getCameras=function(){if(navigator.mediaDevices)return e.getCamerasFromMediaDevices();var t=MediaStreamTrack;if(MediaStreamTrack&&t.getSources)return e.getCamerasFromMediaStreamTrack();var n=function(){if(location.protocol==="https:")return!0;var o=location.host.split(":")[0];return o==="127.0.0.1"||o==="localhost"},r=zn$1.unableToQuerySupportedDevices();return n()||(r=zn$1.insecureContextCameraQueryError()),Promise.reject(r)},e.prototype.getRunningTrackCapabilities=function(){if(this.localMediaStream==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";if(this.localMediaStream.getVideoTracks().length===0)throw"No video tracks found";var t=this.localMediaStream.getVideoTracks()[0];return t.getCapabilities()},e.prototype.applyVideoConstraints=function(t){var n=this;if(t){if(!Rs$1.isMediaStreamConstraintsValid(t,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";if(this.localMediaStream===null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";if(this.localMediaStream.getVideoTracks().length===0)throw"No video tracks found";return new Promise(function(r,o){if("aspectRatio"in t){o("Chaning 'aspectRatio' in run-time is not yet supported.");return}var a=n.localMediaStream.getVideoTracks()[0];a.applyConstraints(t).then(function(s){r(s)}).catch(function(s){o(s)})})},e.getCamerasFromMediaDevices=function(){return new Promise(function(t,n){navigator.mediaDevices.getUserMedia({audio:!1,video:!0}).then(function(r){var o=function(a){for(var s=a.getVideoTracks(),u=0,l=s;u<l.length;u++){var c=l[u];c.enabled=!1,c.stop(),a.removeTrack(c)}};navigator.mediaDevices.enumerateDevices().then(function(a){for(var s=[],u=0,l=a;u<l.length;u++){var c=l[u];c.kind==="videoinput"&&s.push({id:c.deviceId,label:c.label})}o(r),t(s)}).catch(function(a){n(a.name+" : "+a.message)})}).catch(function(r){n(r.name+" : "+r.message)})})},e.getCamerasFromMediaStreamTrack=function(){return new Promise(function(t,n){var r=function(a){for(var s=[],u=0,l=a;u<l.length;u++){var c=l[u];c.kind==="video"&&s.push({id:c.id,label:c.label})}t(s)},o=MediaStreamTrack;o.getSources(r)})},e.prototype.getSupportedFormats=function(t){var n=[ne$1.QR_CODE,ne$1.AZTEC,ne$1.CODABAR,ne$1.CODE_39,ne$1.CODE_93,ne$1.CODE_128,ne$1.DATA_MATRIX,ne$1.MAXICODE,ne$1.ITF,ne$1.EAN_13,ne$1.EAN_8,ne$1.PDF_417,ne$1.RSS_14,ne$1.RSS_EXPANDED,ne$1.UPC_A,ne$1.UPC_E,ne$1.UPC_EAN_EXTENSION];if(!t||typeof t=="boolean"||!t.formatsToSupport)return n;if(!Array.isArray(t.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(t.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var r=[],o=0,a=t.formatsToSupport;o<a.length;o++){var s=a[o];Ju$1(s)?r.push(s):this.logger.warn("Invalid format: "+s+" passed in config, ignoring.")}if(r.length===0)throw"None of formatsToSupport match supported values.";return r},e.prototype.validateQrboxSize=function(t,n,r){var o=this,a=r.qrbox;this.validateQrboxConfig(a);var s=this.toQrdimensions(t,n,a),u=function(c){if(c<Kt$2.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+(" "+Kt$2.MIN_QR_BOX_SIZE+"px.")},l=function(c){return c>t&&(o.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),c=t),c};u(s.width),u(s.height),s.width=l(s.width)},e.prototype.validateQrboxConfig=function(t){if(typeof t!="number"&&typeof t!="function"&&(t.width===void 0||t.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},e.prototype.toQrdimensions=function(t,n,r){if(typeof r=="number")return{width:r,height:r};if(typeof r=="function")try{return r(t,n)}catch(o){throw new Error("qrbox config was passed as a function but it failed with unknown error"+o)}return r},e.prototype.setupUi=function(t,n,r){r.isShadedBoxEnabled()&&this.validateQrboxSize(t,n,r);var o=Hr$1(r.qrbox)?{width:t,height:n}:r.qrbox;this.validateQrboxConfig(o);var a=this.toQrdimensions(t,n,o);a.height>n&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var s=r.isShadedBoxEnabled()&&a.height<=n,u={x:0,y:0,width:t,height:n},l=s?this.getShadedRegionBounds(t,n,a):u,c=this.createCanvasElement(l.width,l.height),m=c.getContext("2d");m.canvas.width=l.width,m.canvas.height=l.height,this.element.append(c),s&&this.possiblyInsertShadingElement(this.element,t,n,a),this.createScannerPausedUiElement(this.element),this.qrRegion=l,this.context=m,this.canvasElement=c},e.prototype.createScannerPausedUiElement=function(t){var n=document.createElement("div");n.innerText="Scanner paused",n.style.display="none",n.style.position="absolute",n.style.top="0px",n.style.zIndex="1",n.style.background="yellow",n.style.textAlign="center",n.style.width="100%",t.appendChild(n),this.scannerPausedUiElement=n},e.prototype.scanContext=function(t,n){var r=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(o){return t(o.text,Ds$1.createFromQrcodeResult(o)),r.possiblyUpdateShaders(!0),!0}).catch(function(o){r.possiblyUpdateShaders(!1);var a=zn$1.codeParseError(o);return n(a,Ra$1.createFrom(a)),!1})},e.prototype.foreverScan=function(t,n,r){var o=this;if(!!this.shouldScan&&!!this.localMediaStream){var a=this.videoElement,s=a.videoWidth/a.clientWidth,u=a.videoHeight/a.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var l=this.qrRegion.width*s,c=this.qrRegion.height*u,m=this.qrRegion.x*s,me=this.qrRegion.y*u;this.context.drawImage(a,m,me,l,c,0,0,this.qrRegion.width,this.qrRegion.height);var xe=function(){o.foreverScanTimeout=setTimeout(function(){o.foreverScan(t,n,r)},o.getTimeoutFps(t.fps))};this.scanContext(n,r).then(function(Ne){!Ne&&t.disableFlip!==!0?(o.context.translate(o.context.canvas.width,0),o.context.scale(-1,1),o.scanContext(n,r).finally(function(){xe()})):xe()}).catch(function(Ne){o.logger.logError("Error happend while scanning context",Ne),xe()})}},e.prototype.onMediaStreamReceived=function(t,n,r,o,a,s){var u=this,l=this;return new Promise(function(c,m){var me=function(){var He=u.createVideoElement(o);l.element.append(He),He.onabort=m,He.onerror=m;var Ye=function(){var Je=He.clientWidth,vn=He.clientHeight;l.setupUi(Je,vn,n),l.foreverScan(n,a,s),He.removeEventListener("playing",Ye),c(null)};He.addEventListener("playing",Ye),He.srcObject=t,He.play(),l.videoElement=He};if(l.localMediaStream=t,r||!n.aspectRatio)me();else{var xe={aspectRatio:n.aspectRatio},Ne=t.getVideoTracks()[0];Ne.applyConstraints(xe).then(function(He){return me()}).catch(function(He){l.logger.logErrors(["[Html5Qrcode] Constriants could not be satisfied, ignoring constraints",He]),me()})}})},e.prototype.createVideoConstraints=function(t){if(typeof t=="string")return{deviceId:{exact:t}};if(typeof t=="object"){var n="facingMode",r="deviceId",o={user:!0,environment:!0},a="exact",s=function(He){if(He in o)return!0;throw"config has invalid 'facingMode' value = "+("'"+He+"'")},u=Object.keys(t);if(u.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+(" if passed as an object, found "+u.length+" keys");var l=Object.keys(t)[0];if(l!==n&&l!==r)throw"Only '"+n+"' and '"+r+"'  are supported for 'cameraIdOrConfig'";if(l===n){var c=t.facingMode;if(typeof c=="string"){if(s(c))return{facingMode:c}}else if(typeof c=="object")if(a in c){if(s(c[""+a]))return{facingMode:{exact:c[""+a]}}}else throw"'facingMode' should be string or object with"+(" "+a+" as key.");else{var m=typeof c;throw"Invalid type of 'facingMode' = "+m}}else{var me=t.deviceId;if(typeof me=="string")return{deviceId:me};if(typeof me=="object"){if(a in me)return{deviceId:{exact:me[""+a]}};throw"'deviceId' should be string or object with"+(" "+a+" as key.")}else{var xe=typeof me;throw"Invalid type of 'deviceId' = "+xe}}}var Ne=typeof t;throw"Invalid type of 'cameraIdOrConfig' = "+Ne},e.prototype.computeCanvasDrawConfig=function(t,n,r,o){if(t<=r&&n<=o){var a=(r-t)/2,s=(o-n)/2;return{x:a,y:s,width:t,height:n}}else{var u=t,l=n;return t>r&&(n=r/t*n,t=r),n>o&&(t=o/n*t,n=o),this.logger.log("Image downsampled from "+(u+"X"+l)+(" to "+t+"X"+n+".")),this.computeCanvasDrawConfig(t,n,r,o)}},e.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var t=document.getElementById(this.elementId);t&&(t.innerHTML="")},e.prototype.createVideoElement=function(t){var n=document.createElement("video");return n.style.width=t+"px",n.muted=!0,n.setAttribute("muted","true"),n.playsInline=!0,n},e.prototype.possiblyUpdateShaders=function(t){this.qrMatch!==t&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(n){n.style.backgroundColor=t?Kt$2.BORDER_SHADER_MATCH_COLOR:Kt$2.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=t)},e.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},e.prototype.createCanvasElement=function(t,n,r){var o=t,a=n,s=document.createElement("canvas");return s.style.width=o+"px",s.style.height=a+"px",s.style.display="none",s.id=Hr$1(r)?"qr-canvas":r,s},e.prototype.getShadedRegionBounds=function(t,n,r){if(r.width>t||r.height>n)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(t-r.width)/2,y:(n-r.height)/2,width:r.width,height:r.height}},e.prototype.possiblyInsertShadingElement=function(t,n,r,o){if(!(n-o.width<1||r-o.height<1)){var a=document.createElement("div");a.style.position="absolute";var s=(n-o.width)/2,u=(r-o.height)/2;if(a.style.borderLeft=s+"px solid #0000007a",a.style.borderRight=s+"px solid #0000007a",a.style.borderTop=u+"px solid #0000007a",a.style.borderBottom=u+"px solid #0000007a",a.style.boxSizing="border-box",a.style.top="0px",a.style.bottom="0px",a.style.left="0px",a.style.right="0px",a.id=""+Kt$2.SHADED_REGION_ELEMENT_ID,n-o.width<11||r-o.height<11)this.hasBorderShaders=!1;else{var l=5,c=40;this.insertShaderBorders(a,c,l,-l,0,!0),this.insertShaderBorders(a,c,l,-l,0,!1),this.insertShaderBorders(a,c,l,o.height+l,0,!0),this.insertShaderBorders(a,c,l,o.height+l,0,!1),this.insertShaderBorders(a,l,c+l,-l,-l,!0),this.insertShaderBorders(a,l,c+l,o.height+l-c,-l,!0),this.insertShaderBorders(a,l,c+l,-l,-l,!1),this.insertShaderBorders(a,l,c+l,o.height+l-c,-l,!1),this.hasBorderShaders=!0}t.append(a)}},e.prototype.insertShaderBorders=function(t,n,r,o,a,s){var u=document.createElement("div");u.style.position="absolute",u.style.backgroundColor=Kt$2.BORDER_SHADER_DEFAULT_COLOR,u.style.width=n+"px",u.style.height=r+"px",u.style.top=o+"px",s?u.style.left=a+"px":u.style.right=a+"px",this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(u),t.appendChild(u)},e.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},e.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},e.prototype.getTimeoutFps=function(t){return 1e3/t},e}(),Yt$2;(function(e){e[e.STATUS_DEFAULT=0]="STATUS_DEFAULT",e[e.STATUS_SUCCESS=1]="STATUS_SUCCESS",e[e.STATUS_WARNING=2]="STATUS_WARNING",e[e.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(Yt$2||(Yt$2={}));function ka$1(){return ze$1`
    <div>
      <div class="lds-ring">
        <div></div>
        <div></div>
        <div></div>
        <div></div>
      </div>
    </div>
  `}function Fs$1({url:e,connectRemote:t,changeState:n,changeUrl:r}){return console.log("reload"),ze$1`
    <div class="items">
      <div class="text-center">
        <h1 class="heading">Connect to a remote host</h1>
        <p class="body">Please enter the url you want to connect to</p>
      </div>
      <div class="input">
        <label class="input__label">URL</label>
        <input
          class="input__field"
          value=${e}
          @input=${o=>r(o.target.value)}
        />
      </div>

      <div class="buttons">
        <button
          class="button button--full button--secondary"
          @click=${()=>n("init")}
        >
          Back
        </button>
        <button class="button button--full" @click=${()=>t(e)}>
          Continue
        </button>
      </div>
    </div>
  `}function Bs$1({connectToPort:e,isMobile:t,changeState:n,scanQrcode:r}){return ze$1`
    <div class="items">
      <div class="text-center">
        <h1 class="heading">Connect to Ad4m</h1>
        <p class="body">
          Let's connect to your ad4m service, and start surfing the web
          completely decentralized and secure.
        </p>
      </div>
      <div>
        ${t?ze$1`<button
              class="button button--full"
              @click=${()=>r()}
            >
              Connect with QR
            </button> `:ze$1`<button
              class="button button--full"
              @click=${()=>e()}
            >
              Connect
            </button>`}
        <div class="text-center">
          or
          <button
            class="button button--link "
            @click=${()=>n("remote_url")}
          >
            Connect to a remote host
          </button>
        </div>
      </div>
    </div>
  `}function $s$1(){return ze$1`
    <div class="items">
      <div class="text-center">
        <h1 class="heading">Couldn't connect to Ad4m</h1>
        <div class="body">
          Are you sure you have A4dm downloaded and running?
          Download Ad4m, and we will automatically detect when it is
          running. If it doesn't, connect automatically refresh the page.
        </div>
      </div>

      <div class="buttons">
      <button class="button button--full button--secondary" @click=${()=>location.reload()}>
        Try again
      </button>
        <a
          class="button button--full"
          target="_blank"
          href="https://github.com/perspect3vism/ad4min/releases/latest"
        >
          Download Ad4m
        </a>
      </div>
      </div>
    </div>
  `}function js$1(){return ze$1`
    <div>
      <h1 class="heading">Agent locked</h1>
      <p class="body">
        Your agent is locked, please unlock it & refresh the page to continue.
      </p>
    </div>
  `}function Us(){return ze$1`
  <svg viewBox="0 0 692 670" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M339 0C340.4 0 343.8 1.29999 346.5 2.89999C349.3 4.49999 352.7 6.9 354.1 8.2C355.6 9.5 359.2 12.5 362.1 15C365 17.5 369.9 21.7 373 24.5C376 27.2 382.1 33 386.5 37.5C390.9 41.9 396.5 47.8 399.1 50.5C401.6 53.3 407 59.8 411.1 65C415.2 70.2 419.7 76.1 421 78C422.3 79.9 423.7 81.7 424 82C424.3 82.3 427.1 86.3 430.1 91C433.1 95.7 437.7 103.1 440.3 107.5C442.8 111.9 445.9 117.8 447 120.5C448.3 123.4 448.9 126.4 448.6 127.8C448.3 129 447.1 130.2 446 130.5C444.9 130.8 442.5 130.5 440.8 130C439 129.4 434.6 128 431 126.9C427.4 125.7 423.6 124.6 422.5 124.4C421.4 124.2 417.8 123.4 414.5 122.7C411.2 121.9 406.3 120.2 403.5 118.8C400.8 117.4 396.9 114.7 394.9 112.9C392.9 111 387.9 105 383.8 99.5C379.6 94 375.4 88.6 374.4 87.4C373.3 86.2 369.6 82 366 77.9C362.4 73.8 355.4 66.3 350.3 61.3C342.8 53.8 340.7 52.2 339.3 52.9C338.3 53.4 333.1 58.2 327.8 63.7C322.5 69.1 315.5 76.7 312.4 80.5C309.2 84.3 306.1 88 305.5 88.6C305 89.2 303.8 90.8 303 92C302.2 93.2 300.8 95.2 299.9 96.4C299 97.5 296 101.9 293.2 106C290.5 110.1 285.6 118 282.3 123.5C279.1 129 274.7 137.1 272.5 141.5C270.4 145.9 268.6 149.8 268.6 150.1C268.5 150.4 267.7 152.2 266.8 154.1C265.9 156 263.6 161.3 261.7 166C259.7 170.7 257.3 177.2 256.2 180.5C255.2 183.8 253.5 189 252.6 192C251.7 195 250.8 198.4 250.5 199.5C250.2 200.6 249.3 204.4 248.5 208C247.6 211.6 246.8 215.4 246.6 216.5C246.4 217.6 245.7 221 245.1 224C244.5 227 243.3 235.1 242.5 242C241.7 248.9 240.7 260.8 240.4 268.5C240.1 276.2 239.7 283.5 239.5 284.8C239.2 286 237.5 288 235.8 289.2C234 290.4 232.1 291.4 231.5 291.5C230.9 291.6 229.1 292.3 227.5 292.9C225.9 293.6 224.1 294.3 223.5 294.4C222.9 294.6 221.7 295 220.8 295.3C219.8 295.7 218.2 296.3 217.3 296.7C216.3 297 215.2 297.4 214.8 297.4C214.5 297.5 213.8 297.8 213.4 298.3C213 298.7 212 299 211.1 299C210.2 299 208.4 299.6 207 300.4C205.1 301.5 204 301.5 202.1 300.6C200.7 300 199.2 298.1 198.8 296.5C198.3 294.9 198.1 284.5 198.5 273.5C198.8 262.5 199.2 251.9 199.5 250C199.7 248.1 200.1 243.5 200.4 239.7C200.7 236 201.7 228.5 202.5 223C203.3 217.5 204.5 210.9 205.1 208.2C205.7 205.6 206.3 202.4 206.5 201C206.7 199.6 208.7 191.8 210.9 183.5C213.1 175.3 216.2 164.9 217.8 160.5C219.5 156.1 221.7 150 222.8 147C223.9 144 226.2 138.1 228.1 134C229.9 129.9 231.7 126.1 232.1 125.5C232.5 124.9 235.4 119.6 238.6 113.5C241.7 107.4 248.1 96.6 252.8 89.5C257.6 82.3 261.9 75.9 262.5 75.2C263 74.5 264 73.4 264.5 72.7C265 72 266.8 69.7 268.4 67.5C270.1 65.3 271.6 63.3 271.9 63C272.3 62.7 274.5 60 277 57C279.4 54 283.9 48.8 287 45.6C290 42.3 295.9 36.3 300.1 32.1C304.2 27.9 309.9 22.4 312.6 19.9C315.3 17.4 320.6 12.7 324.5 9.39999C328.4 6.09999 332.6 2.6 334 1.7C335.4 0.799997 337.6 0 339 0V0ZM348.3 125.6C358.8 125.8 369.1 126.1 371 126.3C372.9 126.6 377 127.1 380 127.5C383 127.9 386.2 128.3 387 128.5C387.8 128.6 390.5 129.1 393 129.5C395.5 129.9 398.2 130.4 399 130.6C399.8 130.8 403.2 131.6 406.5 132.4C409.8 133.2 414.2 134.4 416.3 134.9C418.3 135.5 421.5 136.4 423.3 136.9C425 137.4 428.5 138.5 431 139.3C433.5 140.2 439.1 142.2 443.5 143.8C447.9 145.4 454 147.9 457 149.3C460 150.8 466.8 154.2 472 157C477.2 159.8 483.1 163.2 485 164.4C486.9 165.6 491.2 168.4 494.5 170.6C497.8 172.7 501.1 174.9 501.8 175.5C502.5 176 503.6 176.9 504.3 177.5C505 178.1 508.2 180.5 511.5 183C514.8 185.5 519.5 189.3 522 191.5C524.4 193.7 530.3 199.3 535.1 204C539.9 208.7 545.7 214.8 548.1 217.5C550.5 220.3 554.1 224.5 556 226.9C557.9 229.3 560 231.7 560.6 232.4C561.2 233 564.8 238.2 568.7 244C572.6 249.8 578.5 259.4 581.9 265.5C585.3 271.6 590.7 282.8 593.9 290.5C597.2 298.2 601.2 308.8 602.9 314C604.7 319.2 607.1 327.8 608.4 333C609.8 338.2 611.1 344.3 611.4 346.5C611.8 348.7 612.5 353 613 356C613.6 359 614.2 364.2 614.5 367.5C614.8 370.8 615.2 375.3 615.4 377.5C615.6 379.7 615.4 382.6 614.9 384C614.5 385.4 613.4 386.8 612.5 387.3C611.7 387.7 610.3 387.8 609.5 387.5C608.7 387.2 608 386.5 608 386C608 385.5 603.8 381.1 598.8 376.3C593.7 371.4 584.8 362.8 579 357C569 347.1 568.3 346.1 566.6 340C565.6 336.4 563.5 329.4 561.9 324.5C560.2 319.6 556.4 309.9 553.3 303C550.2 296.1 546.1 287.8 544.2 284.5C542.2 281.2 538.9 275.8 536.7 272.5C534.5 269.2 530.2 263.1 527.1 259C524 254.9 519.9 249.7 518 247.5C516.1 245.3 510.7 239.6 506 234.9C501.3 230.2 493.9 223.5 489.5 219.9C485.1 216.4 481.3 213.2 481 212.9C480.7 212.6 475.8 209.3 470 205.5C464.2 201.7 454.5 196.1 448.5 193C442.5 189.9 434.1 186.1 430 184.6C425.9 183 420.9 181.2 419 180.5C417.1 179.8 413.9 178.8 412 178.1C410.1 177.5 407.6 176.8 406.5 176.5C405.4 176.3 402.7 175.6 400.5 175C398.3 174.4 395.4 173.7 394 173.4C392.6 173.2 389.3 172.5 386.5 172C383.8 171.5 379.7 170.8 377.5 170.4C375.3 170.1 372.8 169.7 372 169.5C371.2 169.2 366.7 168.7 362 168.4C357.3 168 347.6 167.7 340.5 167.8C333.4 167.9 325.3 168.2 322.5 168.5C319.8 168.7 315.3 169.4 312.5 169.9C309.8 170.4 305.3 171.2 302.5 171.6C299.8 171.9 296.5 172.6 295.3 173.1C294 173.6 293 173.8 293 173.5C293 173.2 291.2 173.7 289 174.5C286.8 175.3 285 175.8 285 175.5C285 175.2 283.3 175.6 281.3 176.3C279.2 177 276.9 177.5 276.3 177.3C275.6 177.1 274.5 177 274 177C273.5 177 272.5 176 271.9 174.8C270.9 172.8 271.9 170.1 279.5 154.5C284.3 144.6 288.6 136.4 289.1 136.3C289.6 136.1 290 135.3 290 134.5C290 133.7 291.5 132.1 293.3 131C295 129.9 299 128.8 302 128.5C305 128.2 308.2 127.7 309 127.4C309.8 127.1 314.5 126.6 319.5 126.3C324.5 126 328.6 125.7 328.8 125.5C328.9 125.4 337.7 125.5 348.3 125.6V125.6ZM198.9 170.8C200 171.7 200.7 173.4 200.5 174.5C200.3 175.6 198.5 183.7 196.5 192.5C194.5 201.3 192.3 211.2 191.8 214.5C191.2 217.8 189.7 222.6 188.4 225.3C187.1 227.9 185.2 231 184.3 232.1C183.3 233.3 180.7 236.1 178.5 238.4C176.3 240.6 172 245.4 169 249C165.9 252.6 162.5 256.7 161.5 258.1C160.4 259.6 158.8 261.8 158 263C157.2 264.2 156 265.8 155.5 266.4C154.9 267 153.1 269.8 151.6 272.5C150 275.3 148.3 277.7 147.9 278C147.5 278.3 144.7 283.4 141.6 289.5C138.5 295.6 135.6 301.1 135 301.8C134.5 302.4 134.2 303 134.5 303C134.8 303 133.2 307.1 131 312C128.8 316.9 127.1 321.3 127.2 321.8C127.3 322.2 126.8 323.9 126.1 325.5C125.4 327.1 124.6 329.4 124.4 330.5C124.2 331.6 123.6 333.6 123.1 335C122.6 336.4 121.4 341.1 120.4 345.5C119.4 349.9 118.5 354.2 118.4 355C118.2 355.8 117.8 358.1 117.4 360C117.1 361.9 116.6 364.6 116.4 366C116.2 367.4 115.7 371.9 115.3 376C114.8 380.1 114.5 391.8 114.6 402C114.7 416 115.2 423.4 116.8 432.5C118 439.1 120 448.8 121.4 454C122.8 459.2 124.6 465.8 125.5 468.5C126.5 471.3 129.2 478.5 131.6 484.5C134 490.5 138.3 500 141.1 505.5C143.9 511 149.6 520.5 153.8 526.5C157.9 532.5 163.8 540.4 166.9 544C170 547.6 176 554.2 180.2 558.8C184.6 563.4 188 567.9 188 569C188 570.1 187 571.5 185.8 572.2C184.5 572.8 181.9 573.4 180 573.5C178.1 573.6 171.6 574.1 165.5 574.6C159.4 575 151 575.4 146.8 575.5C140 575.5 138.9 575.2 136.5 573C135 571.6 130.5 566.2 126.6 561C122.6 555.8 117.6 548.8 115.5 545.5C113.4 542.2 110.3 537.3 108.7 534.5C107.1 531.8 102.9 523.9 99.5001 517C96.0001 510.1 91.8001 500.9 90.1001 496.5C88.5001 492.1 85.7001 484 84.0001 478.5C82.3001 473 80.5001 467.1 80.0001 465.5C79.5001 463.9 78.6001 459.8 78.0001 456.5C77.4001 453.2 76.7001 449.6 76.5001 448.5C76.3001 447.4 75.9001 444.7 75.5001 442.5C75.2001 440.3 74.5001 435.6 73.9001 432C73.3001 428.4 72.7001 413.8 72.5001 399.5C72.2001 378.1 72.5001 371.3 74.0001 361C75.0001 354.1 77.0001 343.1 78.4001 336.5C79.8001 329.9 82.1001 320.9 83.6001 316.5C85.0001 312.1 86.3001 308.1 86.4001 307.5C86.6001 306.9 87.2001 305.4 87.7001 304C88.3001 302.6 91.1001 296.1 94.0001 289.5C96.8001 282.9 100.8 274.6 102.7 271C104.7 267.4 107.6 262.3 109.3 259.5C110.9 256.8 114.4 251.4 116.9 247.5C119.4 243.7 122.1 239.9 122.8 239.3C123.4 238.6 124 237.7 124 237.3C124 236.8 125 235.4 126.3 234C127.5 232.6 129.9 229.7 131.5 227.5C133.2 225.3 135.9 222 137.5 220C139.1 218.1 145 212 150.5 206.5C156 200.9 163.4 193.8 167 190.8C170.6 187.7 174.9 184.1 176.5 182.9C178.1 181.6 179.7 180.3 180 180C180.3 179.6 182.5 178 185 176.3C187.5 174.6 191.2 172.3 193.2 171.2C196.8 169.3 197.1 169.3 198.9 170.8V170.8ZM440.7 202C442 202 445.7 203.9 449 206.3C452.3 208.6 455.8 211 456.8 211.5C457.7 212.1 459.9 213.4 461.5 214.5C463.1 215.6 465 216.8 465.5 217.3C466 217.7 470 220.5 474.2 223.5C478.5 226.5 482.3 230 482.7 231.3C483.1 232.5 483.5 234.2 483.7 235C483.8 235.8 484.2 239 484.6 242C484.9 245 485.5 248.4 485.7 249.5C486 250.6 486.4 263.4 486.6 278C486.8 292.6 486.5 307.4 486 311C485.6 314.6 484.9 321.1 484.6 325.5C484.2 329.9 483.5 335.1 483 337C482.5 338.9 481.8 342.5 481.5 345C481.1 347.5 480 353.3 478.9 358C477.8 362.7 476.7 367.4 476.5 368.5C476.3 369.6 475.8 371.6 475.2 373C474.7 374.4 474.2 375.8 474.1 376.3C474.1 376.7 473.7 378.2 473.4 379.8C473.1 381.3 471.7 385.9 470.3 390C468.9 394.1 467.6 398.2 467.5 399C467.3 399.8 466.1 403.2 464.7 406.5C463.3 409.8 460.5 416.7 458.4 421.8C456.2 426.9 454.2 431 453.7 431C453.3 431 453.1 431.3 453.2 431.8C453.3 432.2 451.8 435.6 449.8 439.5C447.9 443.4 445.1 448.5 443.8 451C442.4 453.5 439.8 458 438 461C436.2 464 432.2 470.3 429.1 475C426 479.7 423.1 484 422.5 484.6C422 485.2 420.8 486.8 420 488C419.2 489.2 416.7 492.5 414.5 495.4C412.3 498.3 409.8 501.3 409 502.2C408.2 503 406.1 505.5 404.5 507.6C402.9 509.7 398.8 514.3 395.5 517.7C390.9 522.4 388.9 523.8 387 523.6C385.6 523.5 379.1 519.4 372.5 514.5C365.9 509.7 359.5 504.6 358.2 503.3C357 502.1 356 500.3 356 499.5C356 498.7 357.4 496.5 359.1 494.8C360.8 493 364 489.3 366.3 486.6C368.6 484 371.3 480.8 372.4 479.6C373.4 478.5 375.9 475.5 377.9 473C379.9 470.5 382.1 467.9 382.8 467.3C383.4 466.6 384 465.7 384 465.3C384 464.8 384.8 463.6 385.7 462.5C386.7 461.4 389.4 457.6 391.8 454C394.1 450.4 396.5 446.8 397 446C397.6 445.2 399.9 441.4 402.3 437.5C404.6 433.6 407.7 428.3 409 425.5C410.3 422.8 411.6 420.3 412 420C412.3 419.7 414.7 414.8 417.2 409C419.8 403.2 423.4 394.5 425.3 389.5C427.2 384.5 429.7 377.1 430.9 373C432.2 368.9 433.8 363 434.6 360C435.5 357 436.5 352.9 437 351C437.5 349.1 438.1 345.9 438.5 344C438.8 342.1 439.3 339.6 439.4 338.5C439.6 337.4 440.1 334.9 440.5 333C440.9 331.1 442.1 323.4 443.1 316C444.5 305.3 444.8 297.7 444.5 279C444.2 266.1 443.8 253.9 443.6 252C443.3 250.1 442.8 246.7 442.5 244.5C442.2 242.3 441.7 238.5 441.4 236C441.1 233.5 440.2 228.1 439.4 224C438.5 219.9 437.4 214.9 436.9 213C436.4 211.1 435.9 208.4 435.8 206.9C435.7 205.5 436.2 203.9 437 203.2C437.8 202.5 439.4 202 440.7 202V202ZM349.7 284.6C359.5 284.7 370.6 285.1 374.5 285.4C378.4 285.8 383.5 286.3 386 286.5C388.5 286.7 392.8 287.2 395.5 287.5C398.3 287.9 400.7 288.4 401 288.5C401.3 288.7 403.5 289.1 406 289.4C408.5 289.7 414.3 290.8 419 291.8C423.7 292.9 428.5 294.2 429.8 294.8C431 295.5 432 296.4 432 297C432 297.6 432.1 298.6 432.2 299.3C432.3 299.9 432.1 303.9 431.6 308C431.2 312.1 430.7 317.5 430.4 320C430.1 322.5 429.3 325.4 428.6 326.5C427.8 327.6 425.8 330 424.1 331.8C421.3 334.7 420.6 334.9 416.7 334.4C414.4 334.1 410.5 333.4 408 332.9C405.5 332.3 401.7 331.7 399.5 331.4C397.3 331.2 394.4 330.7 393 330.4C391.6 330.1 389.4 329.7 388 329.5C386.6 329.3 381.7 328.9 377 328.5C372.3 328.1 366.9 327.6 365 327.4C363.1 327.2 355 327 347 326.9C339 326.8 329.1 327.1 325 327.5C320.9 327.9 316.4 328.3 315 328.5C313.6 328.6 309.4 329.1 305.5 329.5C301.6 329.9 295.4 330.9 291.5 331.7C287.6 332.5 283.6 333.3 282.5 333.6C281.4 333.8 279.1 334.3 277.5 334.6C275.9 334.9 274.3 335.3 274 335.5C273.7 335.7 272 336.1 270.2 336.4C268.5 336.7 262.6 338.4 257.2 340C251.9 341.7 246.7 343.5 245.7 344C244.8 344.6 243.4 345 242.7 345C242.1 345.1 239.7 345.9 237.5 347C235.3 348.1 233.1 348.9 232.5 349C231.9 349 228.9 350.3 225.7 352C222.6 353.6 220 354.8 220 354.5C220 354.2 216.3 355.9 211.7 358.3C207.2 360.7 200.4 364.4 196.5 366.5C192.6 368.6 185 373.3 179.5 377C174 380.6 165.9 386.2 161.5 389.5C157.1 392.7 153 395.9 152.4 396.5C151.7 397 149.5 398.9 147.4 400.5C145.4 402.1 141.6 405.4 139.1 407.7C136.6 410 133.5 412.5 132.2 413.2C130.3 414.3 129.7 414.3 128.5 413C127.4 411.8 127 407.3 126.9 392.5C126.7 376.8 126.9 372.5 128.3 368C129.4 364.5 131.8 360.5 134.8 357.1C137.8 353.5 144 348.7 152.2 343.3C159.3 338.7 165.4 335 166 335C166.6 335 167 334.4 167 333.8C167 333.1 167.3 332.8 167.7 333.2C168.1 333.6 169.6 333.1 171 332.1C172.4 331.1 176.9 328.5 181 326.4C185.1 324.3 188.7 322.2 189 321.7C189.3 321.2 189.7 320.9 190 321.1C190.3 321.2 193.9 319.7 198 317.8C202.1 315.8 207.5 313.3 210 312.2C212.5 311.1 218.1 308.8 222.5 307.1C226.9 305.4 235 302.6 240.5 300.9C246 299.2 253.9 296.9 258 295.8C262.1 294.7 266.6 293.6 268 293.4C269.4 293.1 270.7 292.7 271 292.5C271.3 292.3 273.1 291.9 275 291.6C276.9 291.2 280.8 290.5 283.5 290C286.3 289.5 290.1 288.8 292 288.5C293.9 288.2 297.8 287.7 300.5 287.4C303.3 287.1 306.6 286.7 308 286.5C309.4 286.2 315.2 285.7 321 285.4C326.8 285 331.6 284.7 331.7 284.6C331.9 284.5 340 284.5 349.7 284.6V284.6ZM509.8 324.7C514.6 327.3 520.5 330.6 523 332.1C525.5 333.6 529.5 336.1 532 337.6C534.5 339.1 539 342.2 542.1 344.4C545.2 346.7 548.7 349.2 550 350C551.2 350.8 552.8 352 553.4 352.5C554 353.1 557.2 355.6 560.5 358C563.8 360.5 566.7 362.7 567 363C567.3 363.3 570.9 366.4 575 369.9C579.1 373.5 588.4 382.2 595.5 389.4C602.6 396.6 611.4 406.1 615 410.5C618.5 414.9 621.7 418.7 622 419C622.3 419.3 624.3 422 626.6 425C628.8 428 632.3 432.9 634.3 435.8C636.3 438.6 640.8 445.6 644.3 451.3C647.7 456.9 653.1 466.5 656.2 472.5C659.3 478.5 663.6 487.8 665.8 493C668 498.2 671.4 506.8 673.3 512C675.2 517.2 678.4 526.9 680.3 533.5C682.3 540.1 685.2 551.6 686.9 559C688.5 566.4 690 574.1 690.3 576C690.6 577.9 691.2 581.5 691.5 584C692 587 691.8 589.3 690.9 591C690.2 592.4 689.2 594 688.6 594.6C688 595.1 684.9 596.8 681.8 598.3C678.6 599.8 675.9 601 675.8 601C675.6 601 673.7 601.7 671.5 602.7C669.3 603.6 667.3 604.4 667 604.5C666.7 604.5 662.7 605.9 658 607.5C653.3 609.1 649.2 610.6 648.8 610.7C648.3 610.9 647.9 611 647.8 611.1C647.6 611.1 646.8 611.3 646 611.5C645.2 611.6 642 612.5 639 613.4C636 614.3 632.4 615.2 631 615.5C629.6 615.8 627.8 616.2 627 616.5C626.2 616.8 624.4 617.2 623 617.5C621.6 617.8 619.4 618.2 618 618.5C616.6 618.8 614.4 619.2 613 619.5C611.6 619.9 607.8 620.5 604.5 621C601.2 621.5 596.5 622.2 594 622.6C591.5 622.9 588.4 623.3 587 623.5C585.6 623.8 579.8 624.3 574 624.7C568.2 625.1 555.1 625.5 544.9 625.5C527.6 625.5 526.1 625.4 524.1 623.5C522.9 622.4 521.9 621.2 522 620.8C522 620.3 524.6 617.6 527.8 614.8C530.9 611.9 537.8 605.2 543 599.9C548.2 594.6 554.3 589.1 556.5 587.7C558.7 586.4 562.5 584.7 565 584C567.5 583.3 570.4 582.6 571.5 582.5C572.6 582.3 575.3 581.9 577.5 581.6C579.7 581.3 582.9 580.8 584.5 580.5C586.1 580.2 590.9 579.3 595 578.5C599.1 577.7 611.5 575 622.5 572.5C633.5 570 643.1 567.8 643.8 567.5C644.4 567.2 645 566.2 645 565.3C645 564.3 643.9 559.7 642.5 555C641.1 550.3 639.7 545.6 639.5 544.5C639.2 543.4 638.3 540.3 637.4 537.5C636.5 534.8 635.2 530.9 634.5 529C633.8 527.1 631.8 521.9 630 517.5C628.2 513.1 624 503.9 620.7 497C617.4 490.1 612.7 481.1 610.2 477C607.7 472.9 603 465.5 599.7 460.5C596.4 455.5 590.2 447.2 586.1 442C581.9 436.8 575.4 429.1 571.5 425.1C567.7 421 561.8 415 558.5 411.9C555.2 408.8 551.1 405.1 549.5 403.9C547.9 402.6 545.6 400.6 544.5 399.5C543.4 398.4 536.6 393.2 529.5 388C522.4 382.8 514.3 377.1 511.6 375.3C508.8 373.6 504.3 370.8 501.5 369.2C498.8 367.6 495.5 364.8 494.3 362.9C493.1 361 492.1 357.9 492.1 356C492.1 354.1 492.5 350.6 493 348.3C493.6 345.9 494.7 339.4 495.5 333.8C496.7 325.8 497.5 323.1 499.1 321.8C501.1 320.1 501.5 320.2 509.8 324.7V324.7ZM247 356C247.8 356 249 356.5 249.6 357.2C250.3 357.9 252.4 363.2 254.3 369C256.2 374.8 259.9 384.9 262.5 391.5C265.1 398.1 270.4 409.8 274.4 417.5C278.3 425.2 285.8 438 291.1 446C296.4 454 303.1 463.4 306 467C308.9 470.6 314 476.6 317.4 480.4C320.7 484.2 326.4 490.3 330 493.9C333.6 497.5 338.6 502.3 341 504.5C343.5 506.7 347.7 510.3 350.4 512.5C353.1 514.7 356 517.2 357 518C358 518.8 359.8 520.2 361 521C362.2 521.8 366.8 525.1 371.1 528.3C375.4 531.4 381.5 535.5 384.5 537.3C387.5 539 392.2 541.7 394.8 543.2C397.4 544.7 403.7 548 408.8 550.5C413.8 553 418.5 555 419 555C419.5 555 420 555.5 420 556C420 556.5 420.7 557 421.5 557C422.3 557 423.8 557.4 424.8 557.9C425.7 558.5 430.3 560.5 435 562.4C439.7 564.4 444.4 566.2 445.5 566.4C446.6 566.6 449.2 567.5 451.3 568.4C453.3 569.3 455.1 569.8 455.3 569.6C455.4 569.4 457.5 570.1 459.9 571.3C462.4 572.5 464.8 574.3 465.4 575.3C466.2 576.4 466.2 577.5 465.5 578.6C465 579.5 461.4 581.9 457.5 583.9C453.6 585.9 450 587.7 449.5 587.9C449 588.1 443.5 590.6 437.5 593.5C431.5 596.3 425.2 599.2 423.5 599.8C421.9 600.5 419.1 600.9 417.5 600.6C415.9 600.4 409.1 597.8 402.5 594.7C395.9 591.7 385.1 586.2 378.5 582.5C371.9 578.8 365.6 575.3 364.5 574.6C363.4 574 359.1 571.3 355 568.5C350.9 565.8 342.5 559.8 336.5 555.3C330.5 550.9 324.3 546.1 322.9 544.8C321.5 543.6 317.7 540.3 314.5 537.5C311.2 534.8 303.9 527.8 298.1 522C292.2 516.2 285.4 509 282.9 506C280.4 503 275.6 497.1 272.4 493C269.1 488.9 262.9 480.4 258.7 474.3C254.5 468.1 251 462.8 251 462.5C251 462.2 250.2 460.8 249.1 459.3C248.1 457.7 246.2 454.7 245 452.5C243.7 450.3 239.4 441.9 235.4 433.8C231.3 425.6 228 418.8 228 418.5C228 418.2 226.8 415.4 225.4 412.3C224 409.1 221.7 403.6 220.3 400C219 396.4 216.6 389.6 215 384.8C213.3 379.9 212 375.2 212 374.3C212 373.3 213.1 371.5 214.5 370.3C215.9 369 217 368.2 217 368.5C217 368.8 219.4 367.8 222.3 366.3C225.1 364.8 227.7 363.5 228 363.5C228.3 363.5 229.4 362.9 230.5 362.3C231.6 361.7 232.7 361.2 233 361.2C233.3 361.2 234.6 360.7 236 360.2C237.4 359.7 240.1 358.5 242 357.7C243.9 356.9 246.2 356.1 247 356V356ZM59.2001 439C59.7001 439 60.7001 439.7 61.5001 440.5C62.3001 441.3 63.0001 442.6 63.1001 443.3C63.1001 443.9 63.3001 445.2 63.5001 446C63.7001 446.8 64.1001 449.3 64.5001 451.5C64.8001 453.7 65.8001 458 66.6001 461C67.4001 464 69.0001 469 70.2001 472C71.7001 476.1 72.2001 479.9 72.2001 486.5C72.2001 494 71.7001 496.8 69.2001 503.5C67.6001 507.9 64.7001 515.8 62.7001 521C60.8001 526.2 58.7001 532.5 58.0001 535C57.3001 537.5 55.6001 542.9 54.3001 547C53.0001 551.1 51.5001 555.9 51.0001 557.5C50.4001 559.1 49.8001 561.4 49.6001 562.5C49.4001 563.6 48.5001 566.3 47.8001 568.5C46.8001 571.4 46.7001 572.8 47.4001 573.6C48.0001 574.1 51.4001 575.4 55.0001 576.4C58.6001 577.4 62.4001 578.4 63.5001 578.7C64.6001 578.9 66.4001 579.3 67.5001 579.5C68.6001 579.8 71.5001 580.4 74.0001 581C76.5001 581.7 79.4001 582.3 80.5001 582.4C81.6001 582.6 83.6001 583 85.0001 583.3C86.4001 583.7 89.3001 584.2 91.5001 584.4C93.7001 584.7 96.6001 585.1 98.0001 585.4C99.4001 585.7 102.5 586.1 105 586.4C107.5 586.7 114.2 587.2 120 587.6C125.8 588 136.1 588.3 143 588.3C149.9 588.2 158.7 587.9 162.5 587.6C166.4 587.3 171.5 586.8 174 586.5C176.5 586.1 180.8 585.5 183.5 585C186.3 584.5 189.6 583.8 191 583.5C192.4 583.2 195.1 582.7 197 582.5C198.9 582.3 201.4 581.9 202.5 581.6C203.6 581.4 206.5 580.7 209 580.1C211.5 579.6 215.4 578.4 217.8 577.5C220.1 576.7 222 576.2 222 576.5C222 576.8 223.6 576.3 225.5 575.5C227.4 574.7 229 574.2 229 574.5C229 574.8 229.6 574.7 230.3 574.3C230.9 573.9 231.8 573.4 232.3 573.3C232.7 573.1 233.1 573 233.3 572.9C233.4 572.9 234.2 572.7 235 572.5C235.8 572.3 240.3 570.8 245 569C249.7 567.3 255.1 565.2 257 564.3C258.9 563.4 265.9 560.1 272.5 556.9C279.1 553.7 287.4 549.4 291 547.4C294.6 545.4 298.7 543.8 300.3 543.9C301.8 543.9 303.8 544.6 304.8 545.3C305.8 545.9 309 548.5 311.9 551C314.9 553.5 318.6 556.7 320.4 558.2C322.1 559.8 325.6 562.7 328.2 564.7C330.8 566.8 332.9 569.2 333 570C333 570.8 332.5 572.3 331.8 573.2C331.1 574.1 326 577.2 320.5 580.1C315 583 303.8 588.8 295.5 593C287.3 597.2 275.3 602.8 269 605.4C262.7 608 256.8 610.3 256 610.5C255.2 610.7 250.9 612.1 246.5 613.6C242.1 615 237.8 616.5 237 616.7C236.2 616.9 235.4 617.1 235.3 617.1C235.1 617 233.2 617.7 231 618.5C228.8 619.3 227 619.8 227 619.5C227 619.2 225.8 619.5 224.3 620.1C222.7 620.7 217.5 622 212.5 623C207.6 624 201.9 625.1 200 625.4C198.1 625.7 195.4 626.2 194 626.4C192.6 626.7 189.5 627.1 187 627.5C184.5 627.9 181.2 628.3 179.5 628.5C177.9 628.7 171.1 629.2 164.5 629.6C157.9 630 146.7 630.4 139.5 630.3C132.4 630.3 120.9 630 114 629.6C107.1 629.3 100.6 628.8 99.5001 628.6C98.4001 628.4 95.3001 627.9 92.5001 627.6C89.8001 627.2 86.2001 626.7 84.5001 626.4C82.9001 626.2 79.3001 625.5 76.5001 625C73.8001 624.5 70.2001 623.8 68.5001 623.5C66.9001 623.1 64.6001 622.7 63.5001 622.5C62.4001 622.3 57.2001 621 52.0001 619.6C46.8001 618.2 39.6001 616.2 36.0001 615.1C32.4001 614.1 27.3001 612.4 24.5001 611.4C21.8001 610.5 15.7001 608.1 11.1001 606.1C6.50011 604.1 2.1001 601.6 1.4001 600.5C0.500095 599.1 0.200107 596.6 0.600107 592.5C0.800107 589.2 1.2001 585.4 1.5001 584C1.7001 582.6 2.6001 577.3 3.4001 572.3C4.3001 567.2 5.9001 559.1 7.0001 554.3C8.1001 549.4 9.3001 544.6 9.5001 543.5C9.8001 542.4 10.7001 539 11.6001 536C12.6001 533 14.4001 527.4 15.6001 523.5C16.9001 519.6 18.8001 514 19.9001 511C21.0001 508 24.4001 499.6 27.5001 492.5C30.6001 485.4 35.1001 475.9 37.4001 471.5C39.8001 467.1 42.6001 462 43.6001 460.1C44.6001 458.3 47.7001 453.3 50.3001 449.1C53.0001 444.9 55.9001 440.9 56.8001 440.3C57.7001 439.6 58.8001 439 59.2001 439V439ZM570.8 447.4C571.2 447.7 572.6 448.2 574 448.5C575.4 448.8 576.5 449.1 576.6 449.3C576.6 449.4 580.9 455.6 586.2 463C591.4 470.4 596.7 478.1 597.9 480C599 481.9 600 485.1 600 487C600 488.9 599.1 493 597.9 496C596.7 499 595.1 503.1 594.3 505C593.5 506.9 591.2 511.6 589.3 515.5C587.4 519.4 583.7 526.2 581.2 530.8C578.6 535.4 576 539.9 575.5 540.8C575 541.8 572.3 545.9 569.5 550C566.8 554.1 564.1 558.1 563.5 558.8C563 559.5 562 560.6 561.5 561.3C561 562 558.7 564.8 556.5 567.5C554.4 570.3 551.7 573.6 550.5 574.9C549.4 576.3 542.6 583.3 535.5 590.4C528.3 597.6 521.1 604.6 519.4 606C517.7 607.4 514.8 609.7 512.9 611.2C511 612.7 505.5 616.8 500.5 620.3C495.5 623.8 488.1 628.6 484 631C479.9 633.4 470.9 638.2 464 641.7C457.1 645.2 451.4 648.1 451.3 648C451.1 648 449.5 648.6 447.8 649.3C446 650.1 441.6 651.7 438 653C434.4 654.2 430.9 655.4 430.3 655.6C429.6 655.8 428.8 655.9 428.7 655.8C428.5 655.6 427.7 656 426.9 656.7C426.1 657.3 423.7 658.1 421.5 658.5C419.3 658.9 416.9 659.8 416.2 660.4C415.5 661 414.9 661.2 415 660.8C415 660.3 413.2 660.7 411 661.5C408.8 662.3 406.8 663 406.5 663C406.2 663 404.8 663.2 403.3 663.5C401.7 663.7 399.1 664.2 397.5 664.5C395.9 664.8 393.6 665.2 392.5 665.4C391.4 665.6 388.5 666.1 386 666.5C383.5 666.8 380.4 667.3 379 667.5C377.6 667.7 372.9 668.2 368.5 668.6C364.1 669 352.9 669.3 343.5 669.3C334.1 669.3 323.1 669 319 668.6C314.9 668.2 310.4 667.8 309 667.5C307.6 667.3 304.7 666.9 302.5 666.6C300.3 666.2 297.4 665.8 296 665.5C294.6 665.3 292.1 664.8 290.5 664.4C288.9 664.1 286.6 663.7 285.5 663.5C284.4 663.3 279 662 273.5 660.5C268 659 263.3 657.7 263 657.5C262.7 657.2 261.6 656.9 260.5 656.6C259.4 656.3 255.1 654.9 251 653.4C246.9 652 239 648.8 233.5 646.3C228 643.9 222.5 641.2 221.3 640.4C220 639.7 219 638.2 219 637.3C218.9 636.3 219.5 634.9 220.2 634.3C220.9 633.6 222.6 632.8 224 632.5C225.4 632.2 227.9 631.6 229.5 631C231.1 630.4 233.6 629.8 235 629.5C236.4 629.2 239.1 628.5 241 627.9C242.9 627.3 245.2 626.6 246 626.3C246.8 625.9 247.7 625.6 248 625.5C248.3 625.4 250.3 624.5 252.5 623.5C254.7 622.5 259.6 621.2 263.5 620.6C267.4 619.9 273.4 619.5 277 619.7C280.6 619.8 285.3 620.1 287.5 620.4C289.7 620.7 292.9 621.2 294.5 621.5C296.1 621.8 301.1 622.8 305.5 623.7C309.9 624.6 314.6 625.4 316 625.6C317.4 625.8 321.2 626.3 324.5 626.7C327.8 627.1 337 627.5 345 627.5C353 627.5 362.9 627.1 367 626.7C371.1 626.2 374.7 625.7 375 625.5C375.3 625.3 377.9 624.9 380.8 624.6C383.6 624.3 386.3 623.8 386.8 623.6C387.2 623.3 388.9 622.9 390.5 622.6C392.1 622.3 394.6 621.8 396 621.5C397.4 621.3 400.4 620.4 402.8 619.5C405.1 618.7 407.1 618.1 407.3 618.2C407.4 618.3 410.6 617.3 414.5 616C418.4 614.6 421.7 613.5 422 613.5C422.3 613.4 424.3 612.6 426.5 611.7C428.7 610.7 430.5 610 430.5 610C430.5 610 432.1 609.4 434 608.6C435.9 607.8 437.7 607.2 438 607.2C438.3 607.2 441.4 605.6 445 603.7C448.6 601.8 454.2 598.8 457.5 597C460.8 595.2 468.2 590.6 474 586.7C479.8 582.8 484.7 579.4 485 579.1C485.3 578.8 487.3 577.1 489.5 575.5C491.7 573.8 498.5 567.5 504.5 561.5C510.6 555.5 516.9 548.9 518.6 547C520.2 545.1 524.5 539.5 528.2 534.5C531.8 529.5 535.3 524.4 536 523C536.7 521.6 537.6 520.3 538 520C538.3 519.7 541.6 514.1 545.2 507.5C548.8 500.9 553.1 492.4 554.8 488.5C556.5 484.6 560.2 474.5 563 466C565.8 457.5 568.6 449.7 569.2 448.7C569.7 447.7 570.5 447.2 570.8 447.4V447.4Z" fill="currentColor"/>
</svg>
`}function Vs$1({capabilities:e,appname:t,appiconpath:n,changeState:r,requestCapability:o}){return ze$1`
    <div class="items">
      <div class="text-center">
        <h1 class="heading">Authorize ${t}</h1>
        <p class="body">${t} want you to grant it these capabilities</p>
        <div>
          ${JSON.parse(e).map(a=>ze$1`<li>${a.can} => ${a.with.domain}.${a.with.pointers}</li>`)}
        </div>
      </div>
      ${n&&ze$1`<div class="dialog__connect">
        <img class="dialog__connect-app" src=${n} alt="Logo" />
        <div class="dialog__connect-check">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="30"
            height="30"
            fill="var(--success-color)"
            viewBox="0 0 16 16"
          >
            <path
              d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"
            />
          </svg>
        </div>
        <div class="dialog__connect-ad4m">${Us()}</div>
      </div>`}
      <div class="buttons">
        <button
          class="button button--full button--secondary"
          @click=${()=>r("init")}
        >
          Cancel
        </button>
        <button
          class="button button--full"
          @click=${()=>o(!0)}
        >
          Authorize
        </button>
      </div>
    </div>
  `}function qs$1({code:e,changeState:t,verifyCode:n,changeCode:r}){return ze$1`
    <div class="items">
      <div class="text-center">
        <div class="heading">Please check Ad4m</div>
        <p class="body">
          Please check AD4M, confirm the request there and enter the 6-digit
          security code below.
        </p>
      </div>
      <div class="input">
        <label class="input__label">Security code</label>

        <input
          placeholder="XXXXXX"
          class="input__field"
          value=${e}
          @change=${o=>r(o.target.value)}
        />
      </div>
      <div class="buttons">
        <button
          class="button button--full button--secondary"
          @click=${()=>t("capabilties_not_matched_first")}
        >
          Cancel
        </button>
        <button class="button button--full" @click=${()=>n(e)}>
          Continue
        </button>
      </div>
    </div>
  `}function Gs$1(){return ze$1`<header class="dialog__header">
    <div class="dialog__logo">
      <svg viewBox="0 0 214 35" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path
          d="M37.35 5.89999C36.15 2.34999 32.8 -1.40722e-05 29.05 -1.40722e-05H19C15.25 -1.40722e-05 11.9 2.34999 10.7 5.89999L0.5 35H5.7L14.95 8.54998C15.7 6.39999 17.7 4.99999 19.95 4.99999H28.1C30.35 4.99999 32.35 6.39999 33.1 8.54998L42.35 35H47.55L37.35 5.89999Z"
          fill="var(--primary-color)"
        />
        <path
          d="M53.5508 28.75C53.5508 32.5 56.0508 35 59.8008 35H79.5508C89.9508 35 97.3008 27.85 97.3008 17.7V17.25C97.3008 7.09999 89.9508 -0.0500134 79.5508 -1.40722e-05H59.8008C56.0508 -1.40722e-05 53.5508 2.49999 53.5508 6.24999V28.75ZM61.3008 30.15C59.6508 30.15 58.5508 29.05 58.5508 27.4V7.54999C58.5508 5.89999 59.6508 4.79999 61.3008 4.79999H79.5008C87.0008 4.79999 92.3508 9.94999 92.3508 17.25V17.7C92.3508 25 87.0008 30.2 79.5008 30.15H61.3008Z"
          fill="var(--primary-color)"
        />
        <path
          d="M137.557 35H142.557V30H147.557V25H142.557V-1.40722e-05H137.557V25H111.607L124.507 -1.40722e-05H118.807L103.307 30H137.557V35Z"
          fill="var(--primary-color)"
        />
        <path
          d="M161.576 4.99999C163.226 4.99999 164.826 5.99999 165.526 7.49999L176.326 30.1C177.726 33.05 180.876 35 184.126 35C187.476 35 190.626 33.05 192.026 30.1L202.826 7.49999C203.526 5.99999 205.126 4.99999 206.776 4.99999H208.676V35H213.676V-1.40722e-05H207.176C203.426 -1.40722e-05 199.826 2.24999 198.226 5.64999L187.576 27.85C186.976 29.15 185.626 30 184.226 30C182.726 30 181.376 29.15 180.776 27.85L170.126 5.64999C168.526 2.24999 164.926 -1.40722e-05 161.176 -1.40722e-05H154.626V35H159.626V4.99999H161.576Z"
          fill="var(--primary-color)"
        />
      </svg>
    </div>
  </header>`}function Zh$1(){return[/Android/i,/webOS/i,/iPhone/i,/iPad/i,/iPod/i,/BlackBerry/i,/Windows Phone/i].some(e=>navigator.userAgent.match(e))}var Jh$1=io$1`
  @import url("https://fonts.googleapis.com/css2?family=Comfortaa:wght@300;400;700&display=swap");

  :host {
    --primary-color: #0a33ff;
    --success-color: #52d652;
    --heading-color: #252525;
    --body-color: #707070;
    --background-color: white;
  }

  .wrapper {
    font-family: "Comfortaa", Helvetica, Arial, sans-serif;
    position: fixed;
    top: 0;
    left: 0;
    color: var(--body-color);
    height: 100vh;
    width: 100vw;
  }

  * {
    box-sizing: border-box;
  }

  .items {
    display: flex;
    flex-direction: column;
    gap: 50px;
  }

  .button {
    text-decoration: none;
    cursor: pointer;
    border: 0;
    background: var(--primary-color);
    height: 60px;
    padding: 0px 30px;
    border-radius: 8px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    color: white;
    text-align: center;
    font-family: inherit;
    font-size: 15px;
  }

  .heading {
    color: var(--heading-color);
    font-size: 18px;
    font-weight: 600;
    margin: 0;
    margin-bottom: 15px;
  }

  .body {
    padding: 0;
    margin: 0;
    font-size: 14px;
    line-height: 1.5;
  }

  .buttons {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
  }

  .button--full {
    width: 100%;
    display: flex;
  }

  .button--link {
    padding: 0;
    background: none;
    color: var(--primary-color);
    text-decoration: none;
  }

  .button--link:hover {
    text-decoration: underline;
  }

  .button--secondary {
    background: var(--background-color);
    border: 1px solid var(--primary-color);
    color: var(--primary-color);
  }

  .dialog {
    background-color: var(--background-color);
    position: absolute;
    top: 20vh;
    left: 50%;
    transform: translateX(-50%);
    z-index: 10;
    border-radius: 8px;
    width: 100%;
    max-width: 500px;
  }

  @media only screen and (max-width: 600px) {
    .dialog {
      width: 75%;
    }
  }

  .dialog__header {
    display: flex;
    align-items: center;
    justify-content: center;
    height: 100px;
    padding: 0 30px;
  }

  .dialog__connect {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 50px;
    position: relative;
  }

  .dialog__logo svg {
    margin: 0 auto;
    width: 100px;
    text-align: center;
  }

  .dialog__connect-ad4m {
    width: 100px;
    height: 100px;
    color: var(--primary-color);
    background: white;
    padding: 20px;
    box-shadow: 0px 4px 7px 0px rgb(0 0 0 / 8%);
    border-radius: 50%;
  }

  .dialog__connect-app {
    width: 80px;
    height: 80px;
  }

  .dialog__connect-check:before {
    content: "";
    display: block;
    width: 120px;
    border-bottom: 1px dashed rgba(0, 0, 0, 0.2);
    position: absolute;
    left: 50%;
    top: 50%;
    transform: translateY(-50%) translateX(-50%);
  }

  .dialog__connect-check svg {
    position: relative;
  }

  .text-center {
    text-align: center;
  }

  .dialog__content {
    padding-top: 0;
    padding-left: 30px;
    padding-right: 30px;
    padding-bottom: 30px;
  }

  .input {
    display: flex;
    flex-direction: column;
    gap: 10px;
  }

  .input__label {
    font-size: 12px;
  }

  .input__field {
    border-radius: 8px;
    outline: 0;
    height: 60px;
    padding: 0px 30px;
    font-size: 20px;
    border: 1px solid var(--body-color);
  }

  .input__field:focus {
    border: 1px solid var(--primary-color);
    box-shadow: 0px 0px 0px 1px var(--primary-color);
  }

  .ad4mConnect__backdrop {
    position: absolute;
    top: 0;
    left: 0;
    height: 100vh;
    width: 100vw;
    backdrop-filter: blur(6px);
    background-color: rgba(0, 0, 0, 0.05);
  }

  .ad4mConnect__locked {
    position: fixed;
    top: 0;
    left: 0;
    background: linear-gradient(
      90deg,
      rgba(2, 0, 36, 1) 0%,
      rgba(38, 3, 23, 1) 41%,
      rgba(51, 4, 31, 1) 100%
    );
    height: 100vh;
    width: 100vw;
    padding: 36px;
    display: flex;
    align-items: center;
    flex-direction: column;
    font-family: "Comfortaa", cursive;
  }

  .lds-ring {
    display: block;
    position: relative;
    width: 80px;
    height: 80px;
    margin: 0 auto;
    margin-top: 24px;
  }
  .lds-ring div {
    box-sizing: border-box;
    display: block;
    position: absolute;
    width: 64px;
    height: 64px;
    margin: 4px;
    border: 4px solid var(--primary-color);
    border-radius: 50%;
    animation: lds-ring 1.2s cubic-bezier(0.5, 0, 0.5, 1) infinite;
    border-color: var(--primary-color) transparent transparent transparent;
  }
  .lds-ring div:nth-child(1) {
    animation-delay: -0.45s;
  }
  .lds-ring div:nth-child(2) {
    animation-delay: -0.3s;
  }
  .lds-ring div:nth-child(3) {
    animation-delay: -0.15s;
  }
  @keyframes lds-ring {
    0% {
      transform: rotate(0deg);
    }
    100% {
      transform: rotate(360deg);
    }
  }

  .disconnected {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    padding: 10px 0;
    text-align: center;
    background: red;
  }
`,ct$2=class extends Br$1{constructor(){super(...arguments),this._client=null,this._state=null,this._code=null,this._url=null,this._isMobile=null,this.appname=null,this.appdesc=null,this.appdomain=null}connectedCallback(){super.connectedCallback(),this.changeUrl=this.changeUrl.bind(this),this.connectRemote=this.connectRemote.bind(this),this.scanQrcode=this.scanQrcode.bind(this),this.connectToPort=this.connectToPort.bind(this),this.changeState=this.changeState.bind(this),this.renderViews=this.renderViews.bind(this),this.requestCapability=this.requestCapability.bind(this),this.verifyCode=this.verifyCode.bind(this),this.changeCode=this.changeCode.bind(this),this._isMobile=Zh$1();let e=document.createElement("link");e.rel="stylesheet",e.type="text/css",e.crossOrigin="anonymous",e.href="https://fonts.googleapis.com/css2?family=Comfortaa:wght@300;400;700&display=swap",document.head.appendChild(e);let t=Yu$1({appName:this.appname,appDesc:this.appdesc,appDomain:this.appdomain,capabilities:JSON.parse(this.capabilities),port:this.port,token:this.token,url:this.url});this._client=t,t==null||t.addEventListener("loading",()=>{this._state="loading"}),t==null||t.addEventListener("not_connected",()=>{this._state="not_connected"}),t==null||t.addEventListener("agent_locked",()=>{this._state="agent_locked"}),t==null||t.addEventListener("init",()=>{this._state="init"}),t==null||t.addEventListener("capabilties_not_matched",o=>{o?this._state="capabilties_not_matched_first":this._state="capabilties_not_matched"}),t==null||t.addEventListener("request_capability",o=>{this._state="request_capability"}),t==null||t.addEventListener("connected_with_capabilities",()=>{this._state="connected_with_capabilities"}),document.addEventListener("fetch-ad4m-client",()=>{let o=new CustomEvent("return-fetch-ad4m-client",{detail:this._client});document.dispatchEvent(o)}),this.openonshortcut!==void 0&&document.addEventListener("keydown",o=>{o.ctrlKey&&o.altKey&&o.code==="KeyA"&&(this._state="init")});let n=document.createElement("div");n.id="camera-id",n.style.position="absolute",n.style.top="0",n.style.left="0",n.style.width="100vw",n.style.height="100vh",n.style.zIndex="10000",n.style.display="none";let r=document.createElement("div");r.id="reader",r.width="100%",r.style.height="100vh",n.appendChild(r),document.body.appendChild(n)}getClient(){return this._client}scanQrcode(){let e=new Hn$1("reader"),t=document.getElementById("camera-id");t.style.display="block";let n=(c,m)=>{this._client.connectRemote(`${c.replace("http","wss")}/graphql`),e.stop(),t.style.display="none"};function r(c){console.warn(`Code scan error = ${c}`)}let o=window.innerWidth,a=window.innerHeight,s=a/o,u=s>1.5?s+s*12/100:s,l={fps:20,qrbox:{width:250,height:250},videoConstraints:{facingMode:"environment",aspectRatio:u}};e.start({facingMode:"environment"},l,n,r)}changeUrl(e){this.setAttribute("url",e)}connectRemote(e){this._client.connectRemote(e)}requestCapability(e){this._client.requestCapability(e)}connectToPort(){this._client.connectToPort()}changeState(e){this._state=e}changeCode(e){this._code=e}verifyCode(e){this._client.verifyCode(e)}renderViews(){switch(this._state){case"loading":return ka$1();case"init":return Bs$1({scanQrcode:this.scanQrcode,connectToPort:this.connectToPort,isMobile:this._isMobile,changeState:this.changeState});case"remote_url":return Fs$1({url:this.url,changeState:this.changeState,changeUrl:this.changeUrl,connectRemote:this.connectRemote});case"not_connected":return $s$1();case"agent_locked":return js$1();case"capabilties_not_matched_first":return Vs$1({changeState:this.changeState,requestCapability:this.requestCapability,capabilities:this.capabilities,appname:this.appname,appiconpath:this.appiconpath});case"request_capability":return qs$1({code:this._code,changeCode:this.changeCode,changeState:this.changeState,verifyCode:this.verifyCode});default:return ka$1()}}render(){return this._state==="capabilties_not_matched"?ze$1`<div class="disconnected">
        Disconnected from Ad4min, please check if ad4min is still runnning.
      </div>`:this._state==="connected_with_capabilities"?null:ze$1`
        <div class="wrapper">
          <div class="dialog">
            ${Gs$1()}
            <main class="dialog__content">${this.renderViews()}</main>
          </div>
          <div class="ad4mConnect__backdrop" />
        </div>
      `}};ct$2.styles=[Jh$1],St$2([On$1()],ct$2.prototype,"_client",2),St$2([On$1()],ct$2.prototype,"_state",2),St$2([On$1()],ct$2.prototype,"_code",2),St$2([On$1()],ct$2.prototype,"_url",2),St$2([On$1()],ct$2.prototype,"_isMobile",2),St$2([Gt$2({type:String,reflect:!0})],ct$2.prototype,"appname",2),St$2([Gt$2({type:String,reflect:!0})],ct$2.prototype,"appdesc",2),St$2([Gt$2({type:String,reflect:!0})],ct$2.prototype,"appdomain",2),St$2([Gt$2({type:String,reflect:!0})],ct$2.prototype,"capabilities",2),St$2([Gt$2({type:String,reflect:!0})],ct$2.prototype,"token",2),St$2([Gt$2({type:String,reflect:!0})],ct$2.prototype,"url",2),St$2([Gt$2({type:String,reflect:!0})],ct$2.prototype,"port",2),St$2([Gt$2({type:String,reflect:!0})],ct$2.prototype,"appiconpath",2),St$2([Gt$2({type:String,reflect:!0})],ct$2.prototype,"openonshortcut",2),ct$2=St$2([Pc$1("ad4m-connect")],ct$2);function hb$1(){return new Promise((e,t)=>{document.addEventListener("return-fetch-ad4m-client",function r(o){this.removeEventListener("return-fetch-ad4m-client",r),e(o.detail.ad4mClient)});let n=new CustomEvent("fetch-ad4m-client");document.dispatchEvent(n),setTimeout(()=>{t("No Ad4mClient found")},5e3)})}function pb$1(){return new Promise((e,t)=>{document.addEventListener("return-fetch-ad4m-client",function r(o){o.detail.addEventListener("connected_with_capabilities",()=>{this.removeEventListener("return-fetch-ad4m-client",r),e(!0)})});let n=new CustomEvent("fetch-ad4m-client");document.dispatchEvent(n)})}/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** *//**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 *//**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 *//**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 *///! @fayeed - make it support node.js
async function createChannel$1({channelName:e,creatorDid:t,sourcePerspective:n}){const r=useDataStore(),o=useAppStore(),a=await hb$1(),s=r.channels[e];if(!s||s.sourcePerspective!==n.uuid){const l=await a.perspective.addLink(n.uuid,{source:SELF,target:e,predicate:CHANNEL}),c=await a.perspective.addLink(n.uuid,{source:e,target:e,predicate:CHANNEL_NAME}),m=await a.perspective.addLink(n.uuid,{source:e,target:FLUX_CHANNEL,predicate:AD4M_CLASS});return console.debug("Created new link on source social-context with result",l,c,m),{name:e,description:"",creatorDid:t,id:nanoid(),createdAt:new Date().toISOString(),sourcePerspective:n.uuid,hasNewMessages:!1,feedType:FeedType.Signaled,notifications:{mute:!1}}}const u="Channel with this name already exists";throw o.showDangerToast({message:u}),new Error(u)}var mutations={updateAgentStatus(e){const t=useUserStore();t.agent=e},updateAgentLockState(e){const t=useUserStore();t.agent.isUnlocked=e},setUserProfile(e){const t=useUserStore();t.profile=e},addAgentProfileProxyPerspectiveId(e){const t=useUserStore();t.agentProfileProxyPerspectiveId=e}},logIn=async({password:e})=>{const t=useUserStore(),n=useAppStore(),r=await hb$1();try{const o=await r.agent.unlock(e);return t.updateAgentStatus(o),o}catch(o){throw n.showDangerToast({message:o.message}),new Error(o)}};function removeTypeName(e){const t=JSON.parse(JSON.stringify(e));return t.__typename=void 0,t.data.__typename=void 0,t.proof.__typename=void 0,t}async function getAgentLinks(e,t){const n=await hb$1();let r=[];if(t){const{links:o}=await n.perspective.snapshotByUUID(t);r=o}else r=(await n.agent.byDID(e)).perspective.links;return r}const PERSPECTIVE_DIFF_SYNC="QmeBD9n9Z5yZsegxArToww5zmwtPpojXN6zXJsi7WwMUa8",NOTE_IPFS_EXPRESSION_OFFICIAL="QmYVsrMpiFmV9S7bTWNAkUzSqjRJskQ8g4TWKKwKrHAPqL",FLUX_PROFILE="flux://profile",HAS_PROFILE_IMAGE="sioc://has_profile_image",HAS_THUMBNAIL_IMAGE="sioc://has_profile_thumbnail_image",HAS_GIVEN_NAME="sioc://has_given_name",HAS_FAMILY_NAME="sioc://has_family_name",HAS_EMAIL="sioc://has_email",HAS_USERNAME="sioc://has_username",HAS_BIO="sioc://has_bio",HAS_BG_IMAGE="sioc://has_bg_image",HAS_POST="sioc://has_post",AREA_WEBLINK="flux://webLink",AREA_COMMUNITY="flux://community",AREA_SIMPLE_AREA="flux://simpleArea",AREA_HAS_NAME="sioc://has_name",AREA_HAS_DESCRIPTION="sioc://has_description",AREA_HAS_IMAGE="sioc://has_image",AREA_HAS_IMAGES="sioc://has_images",AREA_TYPE="flux://area_type",HAS_AREA="flux://has_aread",AD4M_PREDICATE_USERNAME="sioc://has_username",AD4M_PREDICATE_FIRSTNAME="sioc://has_firstname",AD4M_PREDICATE_LASTNAME="sioc://has_lastname",FLUX_PROXY_PROFILE_NAME="Flux Agent Profile Data",dataURItoBlob=e=>{const t=e.split(",")[0].indexOf("base64")>=0?atob(e.split(",")[1]):unescape(e.split(",")[1]),n=e.split(",")[0].split(":")[1].split(";")[0],r=t.length,o=new Uint8Array(r);for(let a=0;a<r;a+=1)o[a]=t.charCodeAt(a);return new Blob([o],{type:n})},blobToDataURL=e=>new Promise((t,n)=>{const r=new FileReader;r.onload=()=>t(r.result),r.onerror=()=>n(r.error),r.onabort=()=>n(new Error("Read aborted")),r.readAsDataURL(e)}),resizeImage=(e,t)=>{const n=new FileReader,r=new Image,o=document.createElement("canvas"),a=()=>{var c;let{width:s,height:u}=r;s>u?s>t&&(u*=t/s,s=t):u>t&&(s*=t/u,u=t),o.width=s,o.height=u,(c=o.getContext("2d"))==null||c.drawImage(r,0,0,s,u);const l=o.toDataURL("image/png");return dataURItoBlob(l)};return new Promise((s,u)=>{if(!e.type.match(/image.*/)){u(new Error("Not an image"));return}n.onload=l=>{var c;r.onload=()=>s(a()),r.src=(c=l.target)==null?void 0:c.result},n.onerror=l=>{r.onerror=()=>u(l)},n.readAsDataURL(e)})};async function getImage(e){return new Promise(async(t,n)=>{const r=await hb$1();setTimeout(()=>{t("")},1e3);try{const o=await r.expression.get(e);o&&t(o.data.slice(1,-1)),t("")}catch(o){console.error(o),t("")}})}async function getProfile(e,t=!1){const n=await getAgentLinks(e),r={username:"",bio:"",email:"",givenName:"",familyName:""};for(const o of n.filter(a=>a.data.source===FLUX_PROFILE)){let a;switch(o.data.predicate){case HAS_USERNAME:r.username=o.data.target;break;case HAS_BIO:r.bio=o.data.target;break;case HAS_GIVEN_NAME:r.givenName=o.data.target;break;case HAS_FAMILY_NAME:r.familyName=o.data.target;break;case HAS_PROFILE_IMAGE:a=o.data.target,r.profilePicture=t?a:await getImage(a);break;case HAS_THUMBNAIL_IMAGE:a=o.data.target,r.thumbnailPicture=t?a:await getImage(a);break;case HAS_BG_IMAGE:a=o.data.target,r.profileBg=t?a:await getImage(a);break;case HAS_EMAIL:r.email=o.data.target;break}}return{...r,did:e}}async function removeLink(e,t){const r=useUserStore().getAgentProfileProxyPerspectiveId,o=await hb$1(),a=e.find(s=>s.data.predicate===t.predicate);if(a){const s=removeTypeName(a);await o.perspective.removeLink(r,s)}}async function replaceLink(e,t){const r=useUserStore().getAgentProfileProxyPerspectiveId,o=await hb$1(),a=e.find(u=>u.data.predicate===t.predicate);if(a){const u=removeTypeName(a);await o.perspective.removeLink(r,u)}return await o.perspective.addLink(r,t)}var updateProfile=async e=>{var l,c;useDataStore();const t=useAppStore(),n=useUserStore(),r=await hb$1(),o=n.getProfile,a={username:e.username||(o==null?void 0:o.username),email:o==null?void 0:o.email,givenName:o==null?void 0:o.givenName,familyName:o==null?void 0:o.familyName,profilePicture:e.profilePicture||(o==null?void 0:o.profilePicture),thumbnailPicture:e.thumbnail||(o==null?void 0:o.thumbnailPicture),bio:e.bio||(o==null?void 0:o.bio)},u=(await r.perspective.all()).find(m=>m.name===FLUX_PROXY_PROFILE_NAME);if(u)n.addAgentProfileProxyPerspectiveId(u.uuid);else{const m="No user perspective found";throw t.showDangerToast({message:m}),new Error(m)}try{const m=await getAgentLinks(n.agent.did,u.uuid),me=[...m];if(e.bio){const vn=await replaceLink(m,new lib.exports.Link({source:FLUX_PROFILE,target:a.bio,predicate:HAS_BIO}));me.push(vn)}else removeLink(m,new lib.exports.Link({source:FLUX_PROFILE,target:a.bio,predicate:HAS_BIO}));const xe=await replaceLink(m,new lib.exports.Link({source:FLUX_PROFILE,target:a.username,predicate:HAS_USERNAME}));let Ne=null,He=null,Ye=null;if(e.profileBg){const vn=await r.expression.create(e.profileBg,NOTE_IPFS_EXPRESSION_OFFICIAL),La=await replaceLink(m,new lib.exports.Link({source:FLUX_PROFILE,target:vn,predicate:HAS_BG_IMAGE}));me.push(La)}if(e.profilePicture){const vn=e.profilePicture?await resizeImage(dataURItoBlob(e.profilePicture),100):void 0,La=e.profilePicture?await blobToDataURL(vn):void 0,sr=await r.expression.create(La,NOTE_IPFS_EXPRESSION_OFFICIAL),Zr=await r.expression.create(e.profilePicture,NOTE_IPFS_EXPRESSION_OFFICIAL);Ne=await replaceLink(m,new lib.exports.Link({source:FLUX_PROFILE,target:Zr,predicate:HAS_PROFILE_IMAGE})),He=await replaceLink(m,new lib.exports.Link({source:FLUX_PROFILE,target:sr,predicate:HAS_THUMBNAIL_IMAGE})),me.push(Ne,He)}const Je=[];for(const vn of[...me,xe])Je.push(removeTypeName(vn));n.setUserProfile({...a,profilePicture:((l=Ne==null?void 0:Ne.data)==null?void 0:l.target)||null,thumbnailPicture:((c=He==null?void 0:He.data)==null?void 0:c.target)||null,profileBg:Ye||null}),await r.agent.updatePublicPerspective({links:Je})}catch(m){throw t.showDangerToast({message:m.message}),new Error(m)}};const JUNTO_AGENT="did:key:zQ3sheV6m6sT83woZtVL2PHiz6J1qWRh4FWW2aiJvxy6d2o7S",AD4M_AGENT="did:key:zQ3shkkuZLvqeFgHdgZgFMUx8VGkgVWsLA83w2oekhZxoCW2n",KAICHAO_AGENT="did:key:zQ3shfhvaHzE81hZqLorVNDmq971EpGPXq3nhyLF1JRP18LM3";var createUser=async({givenName:e="",familyName:t="",email:n="",username:r,profilePicture:o})=>{var l,c,m;const a=useAppStore(),s=useUserStore(),u=await hb$1();try{await u.runtime.addTrustedAgents([AD4M_AGENT,KAICHAO_AGENT,JUNTO_AGENT]),await u.languages.byAddress(NOTE_IPFS_EXPRESSION_OFFICIAL);const me=o?await resizeImage(dataURItoBlob(o),100):void 0,xe=o?await blobToDataURL(me):void 0;let He=(await u.perspective.all()).find(Hs=>Hs.name===FLUX_PROXY_PROFILE_NAME),Ye=[];He?Ye=await getAgentLinks(s.agent.did,He==null?void 0:He.uuid):He=await u.perspective.add(FLUX_PROXY_PROFILE_NAME);const Je=[...Ye];let vn=null,La=null;if(o){const Hs=await u.expression.create(xe,NOTE_IPFS_EXPRESSION_OFFICIAL),lc=await u.expression.create(o,NOTE_IPFS_EXPRESSION_OFFICIAL);vn=await u.perspective.addLink(He.uuid,new lib.exports.Link({source:FLUX_PROFILE,target:lc,predicate:HAS_PROFILE_IMAGE})),La=await u.perspective.addLink(He.uuid,new lib.exports.Link({source:FLUX_PROFILE,target:Hs,predicate:HAS_THUMBNAIL_IMAGE})),Je.push(vn,La)}if(e){const Hs=await u.perspective.addLink(He.uuid,new lib.exports.Link({source:FLUX_PROFILE,target:e,predicate:HAS_GIVEN_NAME}));Je.push(Hs)}if(t){const Hs=await u.perspective.addLink(He.uuid,new lib.exports.Link({source:FLUX_PROFILE,target:t,predicate:HAS_FAMILY_NAME}));Je.push(Hs)}if(n){const Hs=await u.perspective.addLink(He.uuid,new lib.exports.Link({source:FLUX_PROFILE,target:n,predicate:HAS_EMAIL}));Je.push(Hs)}if(r){const Hs=await u.perspective.addLink(He.uuid,new lib.exports.Link({source:FLUX_PROFILE,target:r,predicate:HAS_USERNAME}));Je.push(Hs)}const sr=[];for(const Hs of Je)sr.push(removeTypeName(Hs));const zs=(l=(await u.agent.me()).perspective)==null?void 0:l.links;if(zs)for(const Hs of zs)sr.push(removeTypeName(Hs));await u.agent.updatePublicPerspective({links:sr}),s.setUserProfile({username:r,email:n,givenName:e,familyName:t,profilePicture:((c=vn==null?void 0:vn.data)==null?void 0:c.target)||null,thumbnailPicture:((m=La==null?void 0:La.data)==null?void 0:m.target)||null,bio:""});const za=await u.agent.status();s.updateAgentStatus(za),s.addAgentProfileProxyPerspectiveId(He==null?void 0:He.uuid)}catch(me){throw a.showDangerToast({message:me.message}),new Error(me)}},actions$2={logIn,createUser,updateProfile},getters$2={getProfile(){return useUserStore().profile},getUser(){return useUserStore()},getAgentProfileProxyPerspectiveId(){return useUserStore().agentProfileProxyPerspectiveId}};const useUserStore=defineStore("user",{state(){return{profile:null,agent:{isInitialized:!1,isUnlocked:!1,did:"",didDocument:""},agentProfileProxyPerspectiveId:void 0}},getters:getters$2,actions:{...mutations,...actions$2}});var createChannel=async e=>{const t=useDataStore(),n=useAppStore();useUserStore();try{const r=await hb$1(),o=t.getCommunity(e.communityId),s=(await r.agent.me()).did;if(o.neighbourhood!==void 0){const u=await createChannel$1({channelName:e.name,creatorDid:s,sourcePerspective:o.neighbourhood.perspective});return t.addChannel({communityId:o.neighbourhood.perspective.uuid,channel:u}),u}else{const u="Community does not exists";throw n.showDangerToast({message:u}),Error(u)}}catch(r){throw n.showDangerToast({message:r.message}),new Error(r)}},getRandomValues,rnds8=new Uint8Array(16);function rng(){if(!getRandomValues&&(getRandomValues=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!getRandomValues))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return getRandomValues(rnds8)}var REGEX=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function validate(e){return typeof e=="string"&&REGEX.test(e)}var byteToHex=[];for(var i=0;i<256;++i)byteToHex.push((i+256).toString(16).substr(1));function stringify(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(byteToHex[e[t+0]]+byteToHex[e[t+1]]+byteToHex[e[t+2]]+byteToHex[e[t+3]]+"-"+byteToHex[e[t+4]]+byteToHex[e[t+5]]+"-"+byteToHex[e[t+6]]+byteToHex[e[t+7]]+"-"+byteToHex[e[t+8]]+byteToHex[e[t+9]]+"-"+byteToHex[e[t+10]]+byteToHex[e[t+11]]+byteToHex[e[t+12]]+byteToHex[e[t+13]]+byteToHex[e[t+14]]+byteToHex[e[t+15]]).toLowerCase();if(!validate(n))throw TypeError("Stringified UUID is invalid");return n}function v4(e,t,n){e=e||{};var r=e.random||(e.rng||rng)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,t){n=n||0;for(var o=0;o<16;++o)t[n+o]=r[o];return t}return stringify(r)}async function createNeighbourhoodMeta(e,t,n){const r=await hb$1(),o=await r.perspective.add(`${e}-meta`),a=[];a.push(new lib.exports.Link({source:SELF,target:e,predicate:NAME})),a.push(new lib.exports.Link({source:SELF,target:n,predicate:CREATOR})),a.push(new lib.exports.Link({source:SELF,target:new Date().toISOString(),predicate:CREATED_AT})),t==""&&(t="-"),a.push(new lib.exports.Link({source:SELF,target:t,predicate:DESCRIPTION}));for(const l of a)await r.perspective.addLink(o.uuid,l);const s=await r.perspective.snapshotByUUID(o.uuid);await r.perspective.remove(o.uuid);const u=[];for(const l in s.links){const c=JSON.parse(JSON.stringify(s.links[l]));c.__typename=void 0,c.data.__typename=void 0,c.proof.__typename=void 0,u.push(c)}return u}var createCommunity=async({perspectiveName:e,description:t,thumbnail:n="",image:r="",perspective:o})=>{const a=useDataStore(),s=useAppStore();try{const u=await hb$1(),c=(await u.agent.me()).did,m=o||await u.perspective.add(e);console.log("Created source perspective",m);const me=v4().toString(),xe=await u.languages.applyTemplateAndPublish(PERSPECTIVE_DIFF_SYNC,JSON.stringify({uid:me,name:`${e}-link-language`}));console.log("Response from create social-context",xe);const Ne=await createNeighbourhoodMeta(e,t,c),He=new lib.exports.Perspective(Ne);let Ye=m.sharedUrl;if(!Ye){const lc=await u.neighbourhood.publishFromPerspective(m.uuid,xe.address,He);Ye=lc,console.log("Created neighbourhood with result",lc)}let Je=r,vn=n;if(r){const lc=r?await resizeImage(dataURItoBlob(r),100):void 0,Ty=r?await blobToDataURL(lc):void 0;Je=await u.expression.create(r,NOTE_IPFS_EXPRESSION_OFFICIAL),vn=await u.expression.create(Ty,NOTE_IPFS_EXPRESSION_OFFICIAL);const _y=await u.perspective.addLink(m.uuid,{source:SELF,target:Je,predicate:FLUX_GROUP_IMAGE}),xy=await u.perspective.addLink(m.uuid,{source:SELF,target:vn,predicate:FLUX_GROUP_THUMBNAIL})}const La=await u.perspective.addLink(m.uuid,{source:SELF,target:e,predicate:FLUX_GROUP_NAME}),sr=await u.perspective.addLink(m.uuid,{source:SELF,target:t||"-",predicate:FLUX_GROUP_DESCRIPTION}),Zr=await u.perspective.addLink(m.uuid,{source:SELF,target:c,predicate:MEMBER});console.log("Created profile expression link",Zr);let zs=lib.exports.Literal.from(`flux_message(Channel, Message, Timestamp, Author, Reactions, Replies):-
    link(Channel, "temp://directly_succeeded_by", Message, Timestamp, Author),
    findall((Reaction, ReactionTimestamp, ReactionAuthor), link(Message, "flux://has_reaction", Reaction, ReactionTimestamp, ReactionAuthor), Reactions),
    findall((Reply, ReplyTimestamp, ReplyAuthor), link(Reply, "flux://has_reply", Message, ReplyTimestamp, ReplyAuthor), Replies).`);const za=await u.perspective.addLink(m.uuid,{source:"ad4m://self",predicate:"ad4m://has_zome",target:zs.toUrl()});console.log("Created social dna link",za);const Hs={neighbourhood:{name:e,creatorDid:c,description:t,image:Je,thumbnail:vn,perspective:{uuid:m==null?void 0:m.uuid,name:m==null?void 0:m.name,sharedUrl:Ye,neighbourhood:m.neighbourhood},neighbourhoodUrl:Ye,membraneType:MembraneType.Unique,linkedPerspectives:[m.uuid],linkedNeighbourhoods:[m.uuid],members:[c],membraneRoot:m.uuid,createdAt:new Date().toISOString()},state:{perspectiveUuid:m.uuid,theme:{fontSize:"md",fontFamily:"Poppins",name:"light",hue:270,saturation:60},useLocalTheme:!1,hasNewMessages:!1,collapseChannelList:!1,currentChannelId:null,hideMutedChannels:!1,notifications:{mute:!1}}};return a.addCommunity(Hs),await a.createChannel({name:"Home",communityId:m.uuid}),Hs}catch(u){throw s.showDangerToast({message:u.message}),new Error(u)}};function getMetaFromNeighbourhood(e){return e.reduce((t,n)=>{const{predicate:r,target:o}=n.data;return{name:r===NAME?o:t.name,description:r===DESCRIPTION?o:t.description,creatorDid:r===CREATOR?o:t.creatorDid,createdAt:r===CREATED_AT?o:t.createdAt}},{name:"",description:"",createdAt:"",creatorDid:""})}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.
Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.
THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var __assign=function(){return __assign=Object.assign||function(t){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},__assign.apply(this,arguments)};function __spreadArray(e,t,n){if(n||arguments.length===2)for(var r=0,o=t.length,a;r<o;r++)(a||!(r in t))&&(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))}var _global=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:global,keys=Object.keys,isArray$1=Array.isArray;typeof Promise!="undefined"&&!_global.Promise&&(_global.Promise=Promise);function extend(e,t){return typeof t!="object"||keys(t).forEach(function(n){e[n]=t[n]}),e}var getProto=Object.getPrototypeOf,_hasOwn={}.hasOwnProperty;function hasOwn(e,t){return _hasOwn.call(e,t)}function props(e,t){typeof t=="function"&&(t=t(getProto(e))),(typeof Reflect=="undefined"?keys:Reflect.ownKeys)(t).forEach(function(n){setProp(e,n,t[n])})}var defineProperty=Object.defineProperty;function setProp(e,t,n,r){defineProperty(e,t,extend(n&&hasOwn(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function derive(e){return{from:function(t){return e.prototype=Object.create(t.prototype),setProp(e.prototype,"constructor",e),{extend:props.bind(null,e.prototype)}}}}var getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor;function getPropertyDescriptor(e,t){var n=getOwnPropertyDescriptor(e,t),r;return n||(r=getProto(e))&&getPropertyDescriptor(r,t)}var _slice=[].slice;function slice(e,t,n){return _slice.call(e,t,n)}function override(e,t){return t(e)}function assert(e){if(!e)throw new Error("Assertion Failed")}function asap$1(e){_global.setImmediate?setImmediate(e):setTimeout(e,0)}function arrayToObject(e,t){return e.reduce(function(n,r,o){var a=t(r,o);return a&&(n[a[0]]=a[1]),n},{})}function tryCatch(e,t,n){try{e.apply(null,n)}catch(r){t&&t(r)}}function getByKeyPath(e,t){if(hasOwn(e,t))return e[t];if(!t)return e;if(typeof t!="string"){for(var n=[],r=0,o=t.length;r<o;++r){var a=getByKeyPath(e,t[r]);n.push(a)}return n}var s=t.indexOf(".");if(s!==-1){var u=e[t.substr(0,s)];return u===void 0?void 0:getByKeyPath(u,t.substr(s+1))}}function setByKeyPath(e,t,n){if(!(!e||t===void 0)&&!("isFrozen"in Object&&Object.isFrozen(e)))if(typeof t!="string"&&"length"in t){assert(typeof n!="string"&&"length"in n);for(var r=0,o=t.length;r<o;++r)setByKeyPath(e,t[r],n[r])}else{var a=t.indexOf(".");if(a!==-1){var s=t.substr(0,a),u=t.substr(a+1);if(u==="")n===void 0?isArray$1(e)&&!isNaN(parseInt(s))?e.splice(s,1):delete e[s]:e[s]=n;else{var l=e[s];(!l||!hasOwn(e,s))&&(l=e[s]={}),setByKeyPath(l,u,n)}}else n===void 0?isArray$1(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function delByKeyPath(e,t){typeof t=="string"?setByKeyPath(e,t,void 0):"length"in t&&[].map.call(t,function(n){setByKeyPath(e,n,void 0)})}function shallowClone(e){var t={};for(var n in e)hasOwn(e,n)&&(t[n]=e[n]);return t}var concat=[].concat;function flatten(e){return concat.apply([],e)}var intrinsicTypeNames="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(flatten([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(t){return t+e+"Array"})}))).filter(function(e){return _global[e]}),intrinsicTypes=intrinsicTypeNames.map(function(e){return _global[e]});arrayToObject(intrinsicTypeNames,function(e){return[e,!0]});var circularRefs=null;function deepClone(e){circularRefs=typeof WeakMap!="undefined"&&new WeakMap;var t=innerDeepClone(e);return circularRefs=null,t}function innerDeepClone(e){if(!e||typeof e!="object")return e;var t=circularRefs&&circularRefs.get(e);if(t)return t;if(isArray$1(e)){t=[],circularRefs&&circularRefs.set(e,t);for(var n=0,r=e.length;n<r;++n)t.push(innerDeepClone(e[n]))}else if(intrinsicTypes.indexOf(e.constructor)>=0)t=e;else{var o=getProto(e);t=o===Object.prototype?{}:Object.create(o),circularRefs&&circularRefs.set(e,t);for(var a in e)hasOwn(e,a)&&(t[a]=innerDeepClone(e[a]))}return t}var toString$1={}.toString;function toStringTag(e){return toString$1.call(e).slice(8,-1)}var iteratorSymbol=typeof Symbol!="undefined"?Symbol.iterator:"@@iterator",getIteratorOf=typeof iteratorSymbol=="symbol"?function(e){var t;return e!=null&&(t=e[iteratorSymbol])&&t.apply(e)}:function(){return null},NO_CHAR_ARRAY={};function getArrayOf(e){var t,n,r,o;if(arguments.length===1){if(isArray$1(e))return e.slice();if(this===NO_CHAR_ARRAY&&typeof e=="string")return[e];if(o=getIteratorOf(e)){for(n=[];r=o.next(),!r.done;)n.push(r.value);return n}if(e==null)return[e];if(t=e.length,typeof t=="number"){for(n=new Array(t);t--;)n[t]=e[t];return n}return[e]}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}var isAsyncFunction=typeof Symbol!="undefined"?function(e){return e[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},debug=typeof location!="undefined"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function setDebug(e,t){debug=e,libraryFilter=t}var libraryFilter=function(){return!0},NEEDS_THROW_FOR_STACK=!new Error("").stack;function getErrorWithStack(){if(NEEDS_THROW_FOR_STACK)try{throw getErrorWithStack.arguments,new Error}catch(e){return e}return new Error}function prettyStack(e,t){var n=e.stack;return n?(t=t||0,n.indexOf(e.name)===0&&(t+=(e.name+e.message).split(`
`).length),n.split(`
`).slice(t).filter(libraryFilter).map(function(r){return`
`+r}).join("")):""}var dexieErrorNames=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"],idbDomErrorNames=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],errorList=dexieErrorNames.concat(idbDomErrorNames),defaultTexts={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function DexieError(e,t){this._e=getErrorWithStack(),this.name=e,this.message=t}derive(DexieError).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+prettyStack(this._e,2))}},toString:function(){return this.name+": "+this.message}});function getMultiErrorMessage(e,t){return e+". Errors: "+Object.keys(t).map(function(n){return t[n].toString()}).filter(function(n,r,o){return o.indexOf(n)===r}).join(`
`)}function ModifyError(e,t,n,r){this._e=getErrorWithStack(),this.failures=t,this.failedKeys=r,this.successCount=n,this.message=getMultiErrorMessage(e,t)}derive(ModifyError).from(DexieError);function BulkError(e,t){this._e=getErrorWithStack(),this.name="BulkError",this.failures=Object.keys(t).map(function(n){return t[n]}),this.failuresByPos=t,this.message=getMultiErrorMessage(e,t)}derive(BulkError).from(DexieError);var errnames=errorList.reduce(function(e,t){return e[t]=t+"Error",e},{}),BaseException=DexieError,exceptions=errorList.reduce(function(e,t){var n=t+"Error";function r(o,a){this._e=getErrorWithStack(),this.name=n,o?typeof o=="string"?(this.message=""+o+(a?`
 `+a:""),this.inner=a||null):typeof o=="object"&&(this.message=o.name+" "+o.message,this.inner=o):(this.message=defaultTexts[t]||n,this.inner=null)}return derive(r).from(BaseException),e[t]=r,e},{});exceptions.Syntax=SyntaxError;exceptions.Type=TypeError;exceptions.Range=RangeError;var exceptionMap=idbDomErrorNames.reduce(function(e,t){return e[t+"Error"]=exceptions[t],e},{});function mapError(e,t){if(!e||e instanceof DexieError||e instanceof TypeError||e instanceof SyntaxError||!e.name||!exceptionMap[e.name])return e;var n=new exceptionMap[e.name](t||e.message,e);return"stack"in e&&setProp(n,"stack",{get:function(){return this.inner.stack}}),n}var fullNameExceptions=errorList.reduce(function(e,t){return["Syntax","Type","Range"].indexOf(t)===-1&&(e[t+"Error"]=exceptions[t]),e},{});fullNameExceptions.ModifyError=ModifyError;fullNameExceptions.DexieError=DexieError;fullNameExceptions.BulkError=BulkError;function nop(){}function mirror(e){return e}function pureFunctionChain(e,t){return e==null||e===mirror?t:function(n){return t(e(n))}}function callBoth(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function hookCreatingChain(e,t){return e===nop?t:function(){var n=e.apply(this,arguments);n!==void 0&&(arguments[0]=n);var r=this.onsuccess,o=this.onerror;this.onsuccess=null,this.onerror=null;var a=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?callBoth(r,this.onsuccess):r),o&&(this.onerror=this.onerror?callBoth(o,this.onerror):o),a!==void 0?a:n}}function hookDeletingChain(e,t){return e===nop?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?callBoth(n,this.onsuccess):n),r&&(this.onerror=this.onerror?callBoth(r,this.onerror):r)}}function hookUpdatingChain(e,t){return e===nop?t:function(n){var r=e.apply(this,arguments);extend(n,r);var o=this.onsuccess,a=this.onerror;this.onsuccess=null,this.onerror=null;var s=t.apply(this,arguments);return o&&(this.onsuccess=this.onsuccess?callBoth(o,this.onsuccess):o),a&&(this.onerror=this.onerror?callBoth(a,this.onerror):a),r===void 0?s===void 0?void 0:s:extend(r,s)}}function reverseStoppableEventChain(e,t){return e===nop?t:function(){return t.apply(this,arguments)===!1?!1:e.apply(this,arguments)}}function promisableChain(e,t){return e===nop?t:function(){var n=e.apply(this,arguments);if(n&&typeof n.then=="function"){for(var r=this,o=arguments.length,a=new Array(o);o--;)a[o]=arguments[o];return n.then(function(){return t.apply(r,a)})}return t.apply(this,arguments)}}var INTERNAL={},LONG_STACKS_CLIP_LIMIT=100,MAX_LONG_STACKS=20,ZONE_ECHO_LIMIT=100,_a$1=typeof Promise=="undefined"?[]:function(){var e=Promise.resolve();if(typeof crypto=="undefined"||!crypto.subtle)return[e,getProto(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,getProto(t),e]}(),resolvedNativePromise=_a$1[0],nativePromiseProto=_a$1[1],resolvedGlobalPromise=_a$1[2],nativePromiseThen=nativePromiseProto&&nativePromiseProto.then,NativePromise=resolvedNativePromise&&resolvedNativePromise.constructor,patchGlobalPromise=!!resolvedGlobalPromise,stack_being_generated=!1,schedulePhysicalTick=resolvedGlobalPromise?function(){resolvedGlobalPromise.then(physicalTick)}:_global.setImmediate?setImmediate.bind(null,physicalTick):_global.MutationObserver?function(){var e=document.createElement("div");new MutationObserver(function(){physicalTick(),e=null}).observe(e,{attributes:!0}),e.setAttribute("i","1")}:function(){setTimeout(physicalTick,0)},asap=function(e,t){microtickQueue.push([e,t]),needsNewPhysicalTick&&(schedulePhysicalTick(),needsNewPhysicalTick=!1)},isOutsideMicroTick=!0,needsNewPhysicalTick=!0,unhandledErrors=[],rejectingErrors=[],currentFulfiller=null,rejectionMapper=mirror,globalPSD={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:globalError,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(function(e){try{globalError(e[0],e[1])}catch{}})}},PSD=globalPSD,microtickQueue=[],numScheduledCalls=0,tickFinalizers=[];function DexiePromise(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=nop,this._lib=!1;var t=this._PSD=PSD;if(debug&&(this._stackHolder=getErrorWithStack(),this._prev=null,this._numPrev=0),typeof e!="function"){if(e!==INTERNAL)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&handleRejection(this,this._value);return}this._state=null,this._value=null,++t.ref,executePromiseTask(this,e)}var thenProp={get:function(){var e=PSD,t=totalEchoes;function n(r,o){var a=this,s=!e.global&&(e!==PSD||t!==totalEchoes),u=s&&!decrementExpectedAwaits(),l=new DexiePromise(function(c,m){propagateToListener(a,new Listener(nativeAwaitCompatibleWrap(r,e,s,u),nativeAwaitCompatibleWrap(o,e,s,u),c,m,e))});return debug&&linkToPreviousPromise(l,this),l}return n.prototype=INTERNAL,n},set:function(e){setProp(this,"then",e&&e.prototype===INTERNAL?thenProp:{get:function(){return e},set:thenProp.set})}};props(DexiePromise.prototype,{then:thenProp,_then:function(e,t){propagateToListener(this,new Listener(null,null,e,t,PSD))},catch:function(e){if(arguments.length===1)return this.then(null,e);var t=arguments[0],n=arguments[1];return typeof t=="function"?this.then(null,function(r){return r instanceof t?n(r):PromiseReject(r)}):this.then(null,function(r){return r&&r.name===t?n(r):PromiseReject(r)})},finally:function(e){return this.then(function(t){return e(),t},function(t){return e(),PromiseReject(t)})},stack:{get:function(){if(this._stack)return this._stack;try{stack_being_generated=!0;var e=getStack(this,[],MAX_LONG_STACKS),t=e.join(`
From previous: `);return this._state!==null&&(this._stack=t),t}finally{stack_being_generated=!1}}},timeout:function(e,t){var n=this;return e<1/0?new DexiePromise(function(r,o){var a=setTimeout(function(){return o(new exceptions.Timeout(t))},e);n.then(r,o).finally(clearTimeout.bind(null,a))}):this}});typeof Symbol!="undefined"&&Symbol.toStringTag&&setProp(DexiePromise.prototype,Symbol.toStringTag,"Dexie.Promise");globalPSD.env=snapShot();function Listener(e,t,n,r,o){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.resolve=n,this.reject=r,this.psd=o}props(DexiePromise,{all:function(){var e=getArrayOf.apply(null,arguments).map(onPossibleParallellAsync);return new DexiePromise(function(t,n){e.length===0&&t([]);var r=e.length;e.forEach(function(o,a){return DexiePromise.resolve(o).then(function(s){e[a]=s,--r||t(e)},n)})})},resolve:function(e){if(e instanceof DexiePromise)return e;if(e&&typeof e.then=="function")return new DexiePromise(function(n,r){e.then(n,r)});var t=new DexiePromise(INTERNAL,!0,e);return linkToPreviousPromise(t,currentFulfiller),t},reject:PromiseReject,race:function(){var e=getArrayOf.apply(null,arguments).map(onPossibleParallellAsync);return new DexiePromise(function(t,n){e.map(function(r){return DexiePromise.resolve(r).then(t,n)})})},PSD:{get:function(){return PSD},set:function(e){return PSD=e}},totalEchoes:{get:function(){return totalEchoes}},newPSD:newScope,usePSD,scheduler:{get:function(){return asap},set:function(e){asap=e}},rejectionMapper:{get:function(){return rejectionMapper},set:function(e){rejectionMapper=e}},follow:function(e,t){return new DexiePromise(function(n,r){return newScope(function(o,a){var s=PSD;s.unhandleds=[],s.onunhandled=a,s.finalize=callBoth(function(){var u=this;run_at_end_of_this_or_next_physical_tick(function(){u.unhandleds.length===0?o():a(u.unhandleds[0])})},s.finalize),e()},t,n,r)})}});NativePromise&&(NativePromise.allSettled&&setProp(DexiePromise,"allSettled",function(){var e=getArrayOf.apply(null,arguments).map(onPossibleParallellAsync);return new DexiePromise(function(t){e.length===0&&t([]);var n=e.length,r=new Array(n);e.forEach(function(o,a){return DexiePromise.resolve(o).then(function(s){return r[a]={status:"fulfilled",value:s}},function(s){return r[a]={status:"rejected",reason:s}}).then(function(){return--n||t(r)})})})}),NativePromise.any&&typeof AggregateError!="undefined"&&setProp(DexiePromise,"any",function(){var e=getArrayOf.apply(null,arguments).map(onPossibleParallellAsync);return new DexiePromise(function(t,n){e.length===0&&n(new AggregateError([]));var r=e.length,o=new Array(r);e.forEach(function(a,s){return DexiePromise.resolve(a).then(function(u){return t(u)},function(u){o[s]=u,--r||n(new AggregateError(o))})})})}));function executePromiseTask(e,t){try{t(function(n){if(e._state===null){if(n===e)throw new TypeError("A promise cannot be resolved with itself.");var r=e._lib&&beginMicroTickScope();n&&typeof n.then=="function"?executePromiseTask(e,function(o,a){n instanceof DexiePromise?n._then(o,a):n.then(o,a)}):(e._state=!0,e._value=n,propagateAllListeners(e)),r&&endMicroTickScope()}},handleRejection.bind(null,e))}catch(n){handleRejection(e,n)}}function handleRejection(e,t){if(rejectingErrors.push(t),e._state===null){var n=e._lib&&beginMicroTickScope();t=rejectionMapper(t),e._state=!1,e._value=t,debug&&t!==null&&typeof t=="object"&&!t._promise&&tryCatch(function(){var r=getPropertyDescriptor(t,"stack");t._promise=e,setProp(t,"stack",{get:function(){return stack_being_generated?r&&(r.get?r.get.apply(t):r.value):e.stack}})}),addPossiblyUnhandledError(e),propagateAllListeners(e),n&&endMicroTickScope()}}function propagateAllListeners(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)propagateToListener(e,t[n]);var o=e._PSD;--o.ref||o.finalize(),numScheduledCalls===0&&(++numScheduledCalls,asap(function(){--numScheduledCalls===0&&finalizePhysicalTick()},[]))}function propagateToListener(e,t){if(e._state===null){e._listeners.push(t);return}var n=e._state?t.onFulfilled:t.onRejected;if(n===null)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++numScheduledCalls,asap(callListener,[n,e,t])}function callListener(e,t,n){try{currentFulfiller=t;var r,o=t._value;t._state?r=e(o):(rejectingErrors.length&&(rejectingErrors=[]),r=e(o),rejectingErrors.indexOf(o)===-1&&markErrorAsHandled(t)),n.resolve(r)}catch(a){n.reject(a)}finally{currentFulfiller=null,--numScheduledCalls===0&&finalizePhysicalTick(),--n.psd.ref||n.psd.finalize()}}function getStack(e,t,n){if(t.length===n)return t;var r="";if(e._state===!1){var o=e._value,a,s;o!=null?(a=o.name||"Error",s=o.message||o,r=prettyStack(o,0)):(a=o,s=""),t.push(a+(s?": "+s:"")+r)}return debug&&(r=prettyStack(e._stackHolder,2),r&&t.indexOf(r)===-1&&t.push(r),e._prev&&getStack(e._prev,t,n)),t}function linkToPreviousPromise(e,t){var n=t?t._numPrev+1:0;n<LONG_STACKS_CLIP_LIMIT&&(e._prev=t,e._numPrev=n)}function physicalTick(){beginMicroTickScope()&&endMicroTickScope()}function beginMicroTickScope(){var e=isOutsideMicroTick;return isOutsideMicroTick=!1,needsNewPhysicalTick=!1,e}function endMicroTickScope(){var e,t,n;do for(;microtickQueue.length>0;)for(e=microtickQueue,microtickQueue=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}while(microtickQueue.length>0);isOutsideMicroTick=!0,needsNewPhysicalTick=!0}function finalizePhysicalTick(){var e=unhandledErrors;unhandledErrors=[],e.forEach(function(r){r._PSD.onunhandled.call(null,r._value,r)});for(var t=tickFinalizers.slice(0),n=t.length;n;)t[--n]()}function run_at_end_of_this_or_next_physical_tick(e){function t(){e(),tickFinalizers.splice(tickFinalizers.indexOf(t),1)}tickFinalizers.push(t),++numScheduledCalls,asap(function(){--numScheduledCalls===0&&finalizePhysicalTick()},[])}function addPossiblyUnhandledError(e){unhandledErrors.some(function(t){return t._value===e._value})||unhandledErrors.push(e)}function markErrorAsHandled(e){for(var t=unhandledErrors.length;t;)if(unhandledErrors[--t]._value===e._value){unhandledErrors.splice(t,1);return}}function PromiseReject(e){return new DexiePromise(INTERNAL,!1,e)}function wrap(e,t){var n=PSD;return function(){var r=beginMicroTickScope(),o=PSD;try{return switchToZone(n,!0),e.apply(this,arguments)}catch(a){t&&t(a)}finally{switchToZone(o,!1),r&&endMicroTickScope()}}}var task={awaits:0,echoes:0,id:0},taskCounter=0,zoneStack=[],zoneEchoes=0,totalEchoes=0,zone_id_counter=0;function newScope(e,t,n,r){var o=PSD,a=Object.create(o);a.parent=o,a.ref=0,a.global=!1,a.id=++zone_id_counter;var s=globalPSD.env;a.env=patchGlobalPromise?{Promise:DexiePromise,PromiseProp:{value:DexiePromise,configurable:!0,writable:!0},all:DexiePromise.all,race:DexiePromise.race,allSettled:DexiePromise.allSettled,any:DexiePromise.any,resolve:DexiePromise.resolve,reject:DexiePromise.reject,nthen:getPatchedPromiseThen(s.nthen,a),gthen:getPatchedPromiseThen(s.gthen,a)}:{},t&&extend(a,t),++o.ref,a.finalize=function(){--this.parent.ref||this.parent.finalize()};var u=usePSD(a,e,n,r);return a.ref===0&&a.finalize(),u}function incrementExpectedAwaits(){return task.id||(task.id=++taskCounter),++task.awaits,task.echoes+=ZONE_ECHO_LIMIT,task.id}function decrementExpectedAwaits(){return task.awaits?(--task.awaits===0&&(task.id=0),task.echoes=task.awaits*ZONE_ECHO_LIMIT,!0):!1}(""+nativePromiseThen).indexOf("[native code]")===-1&&(incrementExpectedAwaits=decrementExpectedAwaits=nop);function onPossibleParallellAsync(e){return task.echoes&&e&&e.constructor===NativePromise?(incrementExpectedAwaits(),e.then(function(t){return decrementExpectedAwaits(),t},function(t){return decrementExpectedAwaits(),rejection(t)})):e}function zoneEnterEcho(e){++totalEchoes,(!task.echoes||--task.echoes===0)&&(task.echoes=task.id=0),zoneStack.push(PSD),switchToZone(e,!0)}function zoneLeaveEcho(){var e=zoneStack[zoneStack.length-1];zoneStack.pop(),switchToZone(e,!1)}function switchToZone(e,t){var n=PSD;if((t?task.echoes&&(!zoneEchoes++||e!==PSD):zoneEchoes&&(!--zoneEchoes||e!==PSD))&&enqueueNativeMicroTask(t?zoneEnterEcho.bind(null,e):zoneLeaveEcho),e!==PSD&&(PSD=e,n===globalPSD&&(globalPSD.env=snapShot()),patchGlobalPromise)){var r=globalPSD.env.Promise,o=e.env;nativePromiseProto.then=o.nthen,r.prototype.then=o.gthen,(n.global||e.global)&&(Object.defineProperty(_global,"Promise",o.PromiseProp),r.all=o.all,r.race=o.race,r.resolve=o.resolve,r.reject=o.reject,o.allSettled&&(r.allSettled=o.allSettled),o.any&&(r.any=o.any))}}function snapShot(){var e=_global.Promise;return patchGlobalPromise?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(_global,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject,nthen:nativePromiseProto.then,gthen:e.prototype.then}:{}}function usePSD(e,t,n,r,o){var a=PSD;try{return switchToZone(e,!0),t(n,r,o)}finally{switchToZone(a,!1)}}function enqueueNativeMicroTask(e){nativePromiseThen.call(resolvedNativePromise,e)}function nativeAwaitCompatibleWrap(e,t,n,r){return typeof e!="function"?e:function(){var o=PSD;n&&incrementExpectedAwaits(),switchToZone(t,!0);try{return e.apply(this,arguments)}finally{switchToZone(o,!1),r&&enqueueNativeMicroTask(decrementExpectedAwaits)}}}function getPatchedPromiseThen(e,t){return function(n,r){return e.call(this,nativeAwaitCompatibleWrap(n,t),nativeAwaitCompatibleWrap(r,t))}}var UNHANDLEDREJECTION="unhandledrejection";function globalError(e,t){var n;try{n=t.onuncatched(e)}catch{}if(n!==!1)try{var r,o={promise:t,reason:e};if(_global.document&&document.createEvent?(r=document.createEvent("Event"),r.initEvent(UNHANDLEDREJECTION,!0,!0),extend(r,o)):_global.CustomEvent&&(r=new CustomEvent(UNHANDLEDREJECTION,{detail:o}),extend(r,o)),r&&_global.dispatchEvent&&(dispatchEvent(r),!_global.PromiseRejectionEvent&&_global.onunhandledrejection))try{_global.onunhandledrejection(r)}catch{}debug&&r&&!r.defaultPrevented&&console.warn("Unhandled rejection: "+(e.stack||e))}catch{}}var rejection=DexiePromise.reject;function tempTransaction(e,t,n,r){if(!e.idbdb||!e._state.openComplete&&!PSD.letThrough&&!e._vip){if(e._state.openComplete)return rejection(new exceptions.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._options.autoOpen)return rejection(new exceptions.DatabaseClosed);e.open().catch(nop)}return e._state.dbReadyPromise.then(function(){return tempTransaction(e,t,n,r)})}else{var o=e._createTransaction(t,n,e._dbSchema);try{o.create(),e._state.PR1398_maxLoop=3}catch(a){return a.name===errnames.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then(function(){return tempTransaction(e,t,n,r)})):rejection(a)}return o._promise(t,function(a,s){return newScope(function(){return PSD.trans=o,r(a,s,o)})}).then(function(a){return o._completion.then(function(){return a})})}}var DEXIE_VERSION="3.2.2",maxString=String.fromCharCode(65535),minKey=-1/0,INVALID_KEY_ARGUMENT="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",STRING_EXPECTED="String expected.",connections=[],isIEOrEdge=typeof navigator!="undefined"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),hasIEDeleteObjectStoreBug=isIEOrEdge,hangsOnDeleteLargeKeyRange=isIEOrEdge,dexieStackFrameFilter=function(e){return!/(dexie\.js|dexie\.min\.js)/.test(e)},DBNAMES_DB="__dbnames",READONLY="readonly",READWRITE="readwrite";function combine(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var AnyRange={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function workaroundForUndefinedPrimKey(e){return typeof e=="string"&&!/\./.test(e)?function(t){return t[e]===void 0&&e in t&&(t=deepClone(t),delete t[e]),t}:function(t){return t}}var Table=function(){function e(){}return e.prototype._trans=function(t,n,r){var o=this._tx||PSD.trans,a=this.name;function s(l,c,m){if(!m.schema[a])throw new exceptions.NotFound("Table "+a+" not part of transaction");return n(m.idbtrans,m)}var u=beginMicroTickScope();try{return o&&o.db===this.db?o===PSD.trans?o._promise(t,s,r):newScope(function(){return o._promise(t,s,r)},{trans:o,transless:PSD.transless||PSD}):tempTransaction(this.db,t,[this.name],s)}finally{u&&endMicroTickScope()}},e.prototype.get=function(t,n){var r=this;return t&&t.constructor===Object?this.where(t).first(n):this._trans("readonly",function(o){return r.core.get({trans:o,key:t}).then(function(a){return r.hook.reading.fire(a)})}).then(n)},e.prototype.where=function(t){if(typeof t=="string")return new this.db.WhereClause(this,t);if(isArray$1(t))return new this.db.WhereClause(this,"["+t.join("+")+"]");var n=keys(t);if(n.length===1)return this.where(n[0]).equals(t[n[0]]);var r=this.schema.indexes.concat(this.schema.primKey).filter(function(m){return m.compound&&n.every(function(me){return m.keyPath.indexOf(me)>=0})&&m.keyPath.every(function(me){return n.indexOf(me)>=0})})[0];if(r&&this.db._maxKey!==maxString)return this.where(r.name).equals(r.keyPath.map(function(m){return t[m]}));!r&&debug&&console.warn("The query "+JSON.stringify(t)+" on "+this.name+" would benefit of a "+("compound index ["+n.join("+")+"]"));var o=this.schema.idxByName,a=this.db._deps.indexedDB;function s(m,me){try{return a.cmp(m,me)===0}catch{return!1}}var u=n.reduce(function(m,me){var xe=m[0],Ne=m[1],He=o[me],Ye=t[me];return[xe||He,xe||!He?combine(Ne,He&&He.multi?function(Je){var vn=getByKeyPath(Je,me);return isArray$1(vn)&&vn.some(function(La){return s(Ye,La)})}:function(Je){return s(Ye,getByKeyPath(Je,me))}):Ne]},[null,null]),l=u[0],c=u[1];return l?this.where(l.name).equals(t[l.keyPath]).filter(c):r?this.filter(c):this.where(n).equals("")},e.prototype.filter=function(t){return this.toCollection().and(t)},e.prototype.count=function(t){return this.toCollection().count(t)},e.prototype.offset=function(t){return this.toCollection().offset(t)},e.prototype.limit=function(t){return this.toCollection().limit(t)},e.prototype.each=function(t){return this.toCollection().each(t)},e.prototype.toArray=function(t){return this.toCollection().toArray(t)},e.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},e.prototype.orderBy=function(t){return new this.db.Collection(new this.db.WhereClause(this,isArray$1(t)?"["+t.join("+")+"]":t))},e.prototype.reverse=function(){return this.toCollection().reverse()},e.prototype.mapToClass=function(t){this.schema.mappedClass=t;var n=function(r){if(!r)return r;var o=Object.create(t.prototype);for(var a in r)if(hasOwn(r,a))try{o[a]=r[a]}catch{}return o};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=n,this.hook("reading",n),t},e.prototype.defineClass=function(){function t(n){extend(this,n)}return this.mapToClass(t)},e.prototype.add=function(t,n){var r=this,o=this.schema.primKey,a=o.auto,s=o.keyPath,u=t;return s&&a&&(u=workaroundForUndefinedPrimKey(s)(t)),this._trans("readwrite",function(l){return r.core.mutate({trans:l,type:"add",keys:n!=null?[n]:null,values:[u]})}).then(function(l){return l.numFailures?DexiePromise.reject(l.failures[0]):l.lastResult}).then(function(l){if(s)try{setByKeyPath(t,s,l)}catch{}return l})},e.prototype.update=function(t,n){if(typeof t=="object"&&!isArray$1(t)){var r=getByKeyPath(t,this.schema.primKey.keyPath);if(r===void 0)return rejection(new exceptions.InvalidArgument("Given object does not contain its primary key"));try{typeof n!="function"?keys(n).forEach(function(o){setByKeyPath(t,o,n[o])}):n(t,{value:t,primKey:r})}catch{}return this.where(":id").equals(r).modify(n)}else return this.where(":id").equals(t).modify(n)},e.prototype.put=function(t,n){var r=this,o=this.schema.primKey,a=o.auto,s=o.keyPath,u=t;return s&&a&&(u=workaroundForUndefinedPrimKey(s)(t)),this._trans("readwrite",function(l){return r.core.mutate({trans:l,type:"put",values:[u],keys:n!=null?[n]:null})}).then(function(l){return l.numFailures?DexiePromise.reject(l.failures[0]):l.lastResult}).then(function(l){if(s)try{setByKeyPath(t,s,l)}catch{}return l})},e.prototype.delete=function(t){var n=this;return this._trans("readwrite",function(r){return n.core.mutate({trans:r,type:"delete",keys:[t]})}).then(function(r){return r.numFailures?DexiePromise.reject(r.failures[0]):void 0})},e.prototype.clear=function(){var t=this;return this._trans("readwrite",function(n){return t.core.mutate({trans:n,type:"deleteRange",range:AnyRange})}).then(function(n){return n.numFailures?DexiePromise.reject(n.failures[0]):void 0})},e.prototype.bulkGet=function(t){var n=this;return this._trans("readonly",function(r){return n.core.getMany({keys:t,trans:r}).then(function(o){return o.map(function(a){return n.hook.reading.fire(a)})})})},e.prototype.bulkAdd=function(t,n,r){var o=this,a=Array.isArray(n)?n:void 0;r=r||(a?void 0:n);var s=r?r.allKeys:void 0;return this._trans("readwrite",function(u){var l=o.schema.primKey,c=l.auto,m=l.keyPath;if(m&&a)throw new exceptions.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(a&&a.length!==t.length)throw new exceptions.InvalidArgument("Arguments objects and keys must have the same length");var me=t.length,xe=m&&c?t.map(workaroundForUndefinedPrimKey(m)):t;return o.core.mutate({trans:u,type:"add",keys:a,values:xe,wantResults:s}).then(function(Ne){var He=Ne.numFailures,Ye=Ne.results,Je=Ne.lastResult,vn=Ne.failures,La=s?Ye:Je;if(He===0)return La;throw new BulkError(o.name+".bulkAdd(): "+He+" of "+me+" operations failed",vn)})})},e.prototype.bulkPut=function(t,n,r){var o=this,a=Array.isArray(n)?n:void 0;r=r||(a?void 0:n);var s=r?r.allKeys:void 0;return this._trans("readwrite",function(u){var l=o.schema.primKey,c=l.auto,m=l.keyPath;if(m&&a)throw new exceptions.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(a&&a.length!==t.length)throw new exceptions.InvalidArgument("Arguments objects and keys must have the same length");var me=t.length,xe=m&&c?t.map(workaroundForUndefinedPrimKey(m)):t;return o.core.mutate({trans:u,type:"put",keys:a,values:xe,wantResults:s}).then(function(Ne){var He=Ne.numFailures,Ye=Ne.results,Je=Ne.lastResult,vn=Ne.failures,La=s?Ye:Je;if(He===0)return La;throw new BulkError(o.name+".bulkPut(): "+He+" of "+me+" operations failed",vn)})})},e.prototype.bulkDelete=function(t){var n=this,r=t.length;return this._trans("readwrite",function(o){return n.core.mutate({trans:o,type:"delete",keys:t})}).then(function(o){var a=o.numFailures,s=o.lastResult,u=o.failures;if(a===0)return s;throw new BulkError(n.name+".bulkDelete(): "+a+" of "+r+" operations failed",u)})},e}();function Events(e){var t={},n=function(u,l){if(l){for(var c=arguments.length,m=new Array(c-1);--c;)m[c-1]=arguments[c];return t[u].subscribe.apply(null,m),e}else if(typeof u=="string")return t[u]};n.addEventType=a;for(var r=1,o=arguments.length;r<o;++r)a(arguments[r]);return n;function a(u,l,c){if(typeof u=="object")return s(u);l||(l=reverseStoppableEventChain),c||(c=nop);var m={subscribers:[],fire:c,subscribe:function(me){m.subscribers.indexOf(me)===-1&&(m.subscribers.push(me),m.fire=l(m.fire,me))},unsubscribe:function(me){m.subscribers=m.subscribers.filter(function(xe){return xe!==me}),m.fire=m.subscribers.reduce(l,c)}};return t[u]=n[u]=m,m}function s(u){keys(u).forEach(function(l){var c=u[l];if(isArray$1(c))a(l,u[l][0],u[l][1]);else if(c==="asap")var m=a(l,mirror,function(){for(var xe=arguments.length,Ne=new Array(xe);xe--;)Ne[xe]=arguments[xe];m.subscribers.forEach(function(He){asap$1(function(){He.apply(null,Ne)})})});else throw new exceptions.InvalidArgument("Invalid event config")})}}function makeClassConstructor(e,t){return derive(t).from({prototype:e}),t}function createTableConstructor(e){return makeClassConstructor(Table.prototype,function(n,r,o){this.db=e,this._tx=o,this.name=n,this.schema=r,this.hook=e._allTables[n]?e._allTables[n].hook:Events(null,{creating:[hookCreatingChain,nop],reading:[pureFunctionChain,mirror],updating:[hookUpdatingChain,nop],deleting:[hookDeletingChain,nop]})})}function isPlainKeyRange(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function addFilter(e,t){e.filter=combine(e.filter,t)}function addReplayFilter(e,t,n){var r=e.replayFilter;e.replayFilter=r?function(){return combine(r(),t())}:t,e.justLimit=n&&!r}function addMatchFilter(e,t){e.isMatch=combine(e.isMatch,t)}function getIndexOrStore(e,t){if(e.isPrimKey)return t.primaryKey;var n=t.getIndexByKeyPath(e.index);if(!n)throw new exceptions.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function openCursor(e,t,n){var r=getIndexOrStore(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:r,range:e.range}})}function iter(e,t,n,r){var o=e.replayFilter?combine(e.filter,e.replayFilter()):e.filter;if(e.or){var a={},s=function(u,l,c){if(!o||o(l,c,function(xe){return l.stop(xe)},function(xe){return l.fail(xe)})){var m=l.primaryKey,me=""+m;me==="[object ArrayBuffer]"&&(me=""+new Uint8Array(m)),hasOwn(a,me)||(a[me]=!0,t(u,l,c))}};return Promise.all([e.or._iterate(s,n),iterate(openCursor(e,r,n),e.algorithm,s,!e.keysOnly&&e.valueMapper)])}else return iterate(openCursor(e,r,n),combine(e.algorithm,o),t,!e.keysOnly&&e.valueMapper)}function iterate(e,t,n,r){var o=r?function(s,u,l){return n(r(s),u,l)}:n,a=wrap(o);return e.then(function(s){if(s)return s.start(function(){var u=function(){return s.continue()};(!t||t(s,function(l){return u=l},function(l){s.stop(l),u=nop},function(l){s.fail(l),u=nop}))&&a(s.value,s,function(l){return u=l}),u()})})}function cmp(e,t){try{var n=type(e),r=type(t);if(n!==r)return n==="Array"?1:r==="Array"?-1:n==="binary"?1:r==="binary"?-1:n==="string"?1:r==="string"?-1:n==="Date"?1:r!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return e>t?1:e<t?-1:0;case"binary":return compareUint8Arrays(getUint8Array(e),getUint8Array(t));case"Array":return compareArrays(e,t)}}catch{}return NaN}function compareArrays(e,t){for(var n=e.length,r=t.length,o=n<r?n:r,a=0;a<o;++a){var s=cmp(e[a],t[a]);if(s!==0)return s}return n===r?0:n<r?-1:1}function compareUint8Arrays(e,t){for(var n=e.length,r=t.length,o=n<r?n:r,a=0;a<o;++a)if(e[a]!==t[a])return e[a]<t[a]?-1:1;return n===r?0:n<r?-1:1}function type(e){var t=typeof e;if(t!=="object")return t;if(ArrayBuffer.isView(e))return"binary";var n=toStringTag(e);return n==="ArrayBuffer"?"binary":n}function getUint8Array(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var Collection=function(){function e(){}return e.prototype._read=function(t,n){var r=this._ctx;return r.error?r.table._trans(null,rejection.bind(null,r.error)):r.table._trans("readonly",t).then(n)},e.prototype._write=function(t){var n=this._ctx;return n.error?n.table._trans(null,rejection.bind(null,n.error)):n.table._trans("readwrite",t,"locked")},e.prototype._addAlgorithm=function(t){var n=this._ctx;n.algorithm=combine(n.algorithm,t)},e.prototype._iterate=function(t,n){return iter(this._ctx,t,n,this._ctx.table.core)},e.prototype.clone=function(t){var n=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return t&&extend(r,t),n._ctx=r,n},e.prototype.raw=function(){return this._ctx.valueMapper=null,this},e.prototype.each=function(t){var n=this._ctx;return this._read(function(r){return iter(n,t,r,n.table.core)})},e.prototype.count=function(t){var n=this;return this._read(function(r){var o=n._ctx,a=o.table.core;if(isPlainKeyRange(o,!0))return a.count({trans:r,query:{index:getIndexOrStore(o,a.schema),range:o.range}}).then(function(u){return Math.min(u,o.limit)});var s=0;return iter(o,function(){return++s,!1},r,a).then(function(){return s})}).then(t)},e.prototype.sortBy=function(t,n){var r=t.split(".").reverse(),o=r[0],a=r.length-1;function s(c,m){return m?s(c[r[m]],m-1):c[o]}var u=this._ctx.dir==="next"?1:-1;function l(c,m){var me=s(c,a),xe=s(m,a);return me<xe?-u:me>xe?u:0}return this.toArray(function(c){return c.sort(l)}).then(n)},e.prototype.toArray=function(t){var n=this;return this._read(function(r){var o=n._ctx;if(o.dir==="next"&&isPlainKeyRange(o,!0)&&o.limit>0){var a=o.valueMapper,s=getIndexOrStore(o,o.table.core.schema);return o.table.core.query({trans:r,limit:o.limit,values:!0,query:{index:s,range:o.range}}).then(function(l){var c=l.result;return a?c.map(a):c})}else{var u=[];return iter(o,function(l){return u.push(l)},r,o.table.core).then(function(){return u})}},t)},e.prototype.offset=function(t){var n=this._ctx;return t<=0?this:(n.offset+=t,isPlainKeyRange(n)?addReplayFilter(n,function(){var r=t;return function(o,a){return r===0?!0:r===1?(--r,!1):(a(function(){o.advance(r),r=0}),!1)}}):addReplayFilter(n,function(){var r=t;return function(){return--r<0}}),this)},e.prototype.limit=function(t){return this._ctx.limit=Math.min(this._ctx.limit,t),addReplayFilter(this._ctx,function(){var n=t;return function(r,o,a){return--n<=0&&o(a),n>=0}},!0),this},e.prototype.until=function(t,n){return addFilter(this._ctx,function(r,o,a){return t(r.value)?(o(a),n):!0}),this},e.prototype.first=function(t){return this.limit(1).toArray(function(n){return n[0]}).then(t)},e.prototype.last=function(t){return this.reverse().first(t)},e.prototype.filter=function(t){return addFilter(this._ctx,function(n){return t(n.value)}),addMatchFilter(this._ctx,t),this},e.prototype.and=function(t){return this.filter(t)},e.prototype.or=function(t){return new this.db.WhereClause(this._ctx.table,t,this)},e.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},e.prototype.desc=function(){return this.reverse()},e.prototype.eachKey=function(t){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,o){t(o.key,o)})},e.prototype.eachUniqueKey=function(t){return this._ctx.unique="unique",this.eachKey(t)},e.prototype.eachPrimaryKey=function(t){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,o){t(o.primaryKey,o)})},e.prototype.keys=function(t){var n=this._ctx;n.keysOnly=!n.isMatch;var r=[];return this.each(function(o,a){r.push(a.key)}).then(function(){return r}).then(t)},e.prototype.primaryKeys=function(t){var n=this._ctx;if(n.dir==="next"&&isPlainKeyRange(n,!0)&&n.limit>0)return this._read(function(o){var a=getIndexOrStore(n,n.table.core.schema);return n.table.core.query({trans:o,values:!1,limit:n.limit,query:{index:a,range:n.range}})}).then(function(o){var a=o.result;return a}).then(t);n.keysOnly=!n.isMatch;var r=[];return this.each(function(o,a){r.push(a.primaryKey)}).then(function(){return r}).then(t)},e.prototype.uniqueKeys=function(t){return this._ctx.unique="unique",this.keys(t)},e.prototype.firstKey=function(t){return this.limit(1).keys(function(n){return n[0]}).then(t)},e.prototype.lastKey=function(t){return this.reverse().firstKey(t)},e.prototype.distinct=function(){var t=this._ctx,n=t.index&&t.table.schema.idxByName[t.index];if(!n||!n.multi)return this;var r={};return addFilter(this._ctx,function(o){var a=o.primaryKey.toString(),s=hasOwn(r,a);return r[a]=!0,!s}),this},e.prototype.modify=function(t){var n=this,r=this._ctx;return this._write(function(o){var a;if(typeof t=="function")a=t;else{var s=keys(t),u=s.length;a=function(vn){for(var La=!1,sr=0;sr<u;++sr){var Zr=s[sr],zs=t[Zr];getByKeyPath(vn,Zr)!==zs&&(setByKeyPath(vn,Zr,zs),La=!0)}return La}}var l=r.table.core,c=l.schema.primaryKey,m=c.outbound,me=c.extractKey,xe=n.db._options.modifyChunkSize||200,Ne=[],He=0,Ye=[],Je=function(vn,La){var sr=La.failures,Zr=La.numFailures;He+=vn-Zr;for(var zs=0,za=keys(sr);zs<za.length;zs++){var Hs=za[zs];Ne.push(sr[Hs])}};return n.clone().primaryKeys().then(function(vn){var La=function(sr){var Zr=Math.min(xe,vn.length-sr);return l.getMany({trans:o,keys:vn.slice(sr,sr+Zr),cache:"immutable"}).then(function(zs){for(var za=[],Hs=[],lc=m?[]:null,Ty=[],_y=0;_y<Zr;++_y){var xy=zs[_y],Bb={value:deepClone(xy),primKey:vn[sr+_y]};a.call(Bb,Bb.value,Bb)!==!1&&(Bb.value==null?Ty.push(vn[sr+_y]):!m&&cmp(me(xy),me(Bb.value))!==0?(Ty.push(vn[sr+_y]),za.push(Bb.value)):(Hs.push(Bb.value),m&&lc.push(vn[sr+_y])))}var Dy=isPlainKeyRange(r)&&r.limit===1/0&&(typeof t!="function"||t===deleteCallback)&&{index:r.index,range:r.range};return Promise.resolve(za.length>0&&l.mutate({trans:o,type:"add",values:za}).then(function(Bg){for(var yy in Bg.failures)Ty.splice(parseInt(yy),1);Je(za.length,Bg)})).then(function(){return(Hs.length>0||Dy&&typeof t=="object")&&l.mutate({trans:o,type:"put",keys:lc,values:Hs,criteria:Dy,changeSpec:typeof t!="function"&&t}).then(function(Bg){return Je(Hs.length,Bg)})}).then(function(){return(Ty.length>0||Dy&&t===deleteCallback)&&l.mutate({trans:o,type:"delete",keys:Ty,criteria:Dy}).then(function(Bg){return Je(Ty.length,Bg)})}).then(function(){return vn.length>sr+Zr&&La(sr+xe)})})};return La(0).then(function(){if(Ne.length>0)throw new ModifyError("Error modifying one or more objects",Ne,He,Ye);return vn.length})})})},e.prototype.delete=function(){var t=this._ctx,n=t.range;return isPlainKeyRange(t)&&(t.isPrimKey&&!hangsOnDeleteLargeKeyRange||n.type===3)?this._write(function(r){var o=t.table.core.schema.primaryKey,a=n;return t.table.core.count({trans:r,query:{index:o,range:a}}).then(function(s){return t.table.core.mutate({trans:r,type:"deleteRange",range:a}).then(function(u){var l=u.failures;u.lastResult,u.results;var c=u.numFailures;if(c)throw new ModifyError("Could not delete some values",Object.keys(l).map(function(m){return l[m]}),s-c);return s-c})})}):this.modify(deleteCallback)},e}(),deleteCallback=function(e,t){return t.value=null};function createCollectionConstructor(e){return makeClassConstructor(Collection.prototype,function(n,r){this.db=e;var o=AnyRange,a=null;if(r)try{o=r()}catch(c){a=c}var s=n._ctx,u=s.table,l=u.hook.reading.fire;this._ctx={table:u,index:s.index,isPrimKey:!s.index||u.schema.primKey.keyPath&&s.index===u.schema.primKey.name,range:o,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:a,or:s.or,valueMapper:l!==mirror?l:null}})}function simpleCompare(e,t){return e<t?-1:e===t?0:1}function simpleCompareReverse(e,t){return e>t?-1:e===t?0:1}function fail(e,t,n){var r=e instanceof WhereClause?new e.Collection(e):e;return r._ctx.error=n?new n(t):new TypeError(t),r}function emptyCollection(e){return new e.Collection(e,function(){return rangeEqual("")}).limit(0)}function upperFactory(e){return e==="next"?function(t){return t.toUpperCase()}:function(t){return t.toLowerCase()}}function lowerFactory(e){return e==="next"?function(t){return t.toLowerCase()}:function(t){return t.toUpperCase()}}function nextCasing(e,t,n,r,o,a){for(var s=Math.min(e.length,r.length),u=-1,l=0;l<s;++l){var c=t[l];if(c!==r[l])return o(e[l],n[l])<0?e.substr(0,l)+n[l]+n.substr(l+1):o(e[l],r[l])<0?e.substr(0,l)+r[l]+n.substr(l+1):u>=0?e.substr(0,u)+t[u]+n.substr(u+1):null;o(e[l],c)<0&&(u=l)}return s<r.length&&a==="next"?e+n.substr(e.length):s<e.length&&a==="prev"?e.substr(0,n.length):u<0?null:e.substr(0,u)+r[u]+n.substr(u+1)}function addIgnoreCaseAlgorithm(e,t,n,r){var o,a,s,u,l,c,m,me=n.length;if(!n.every(function(Ye){return typeof Ye=="string"}))return fail(e,STRING_EXPECTED);function xe(Ye){o=upperFactory(Ye),a=lowerFactory(Ye),s=Ye==="next"?simpleCompare:simpleCompareReverse;var Je=n.map(function(vn){return{lower:a(vn),upper:o(vn)}}).sort(function(vn,La){return s(vn.lower,La.lower)});u=Je.map(function(vn){return vn.upper}),l=Je.map(function(vn){return vn.lower}),c=Ye,m=Ye==="next"?"":r}xe("next");var Ne=new e.Collection(e,function(){return createRange(u[0],l[me-1]+r)});Ne._ondirectionchange=function(Ye){xe(Ye)};var He=0;return Ne._addAlgorithm(function(Ye,Je,vn){var La=Ye.key;if(typeof La!="string")return!1;var sr=a(La);if(t(sr,l,He))return!0;for(var Zr=null,zs=He;zs<me;++zs){var za=nextCasing(La,sr,u[zs],l[zs],s,c);za===null&&Zr===null?He=zs+1:(Zr===null||s(Zr,za)>0)&&(Zr=za)}return Je(Zr!==null?function(){Ye.continue(Zr+m)}:vn),!1}),Ne}function createRange(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function rangeEqual(e){return{type:1,lower:e,upper:e}}var WhereClause=function(){function e(){}return Object.defineProperty(e.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),e.prototype.between=function(t,n,r,o){r=r!==!1,o=o===!0;try{return this._cmp(t,n)>0||this._cmp(t,n)===0&&(r||o)&&!(r&&o)?emptyCollection(this):new this.Collection(this,function(){return createRange(t,n,!r,!o)})}catch{return fail(this,INVALID_KEY_ARGUMENT)}},e.prototype.equals=function(t){return t==null?fail(this,INVALID_KEY_ARGUMENT):new this.Collection(this,function(){return rangeEqual(t)})},e.prototype.above=function(t){return t==null?fail(this,INVALID_KEY_ARGUMENT):new this.Collection(this,function(){return createRange(t,void 0,!0)})},e.prototype.aboveOrEqual=function(t){return t==null?fail(this,INVALID_KEY_ARGUMENT):new this.Collection(this,function(){return createRange(t,void 0,!1)})},e.prototype.below=function(t){return t==null?fail(this,INVALID_KEY_ARGUMENT):new this.Collection(this,function(){return createRange(void 0,t,!1,!0)})},e.prototype.belowOrEqual=function(t){return t==null?fail(this,INVALID_KEY_ARGUMENT):new this.Collection(this,function(){return createRange(void 0,t)})},e.prototype.startsWith=function(t){return typeof t!="string"?fail(this,STRING_EXPECTED):this.between(t,t+maxString,!0,!0)},e.prototype.startsWithIgnoreCase=function(t){return t===""?this.startsWith(t):addIgnoreCaseAlgorithm(this,function(n,r){return n.indexOf(r[0])===0},[t],maxString)},e.prototype.equalsIgnoreCase=function(t){return addIgnoreCaseAlgorithm(this,function(n,r){return n===r[0]},[t],"")},e.prototype.anyOfIgnoreCase=function(){var t=getArrayOf.apply(NO_CHAR_ARRAY,arguments);return t.length===0?emptyCollection(this):addIgnoreCaseAlgorithm(this,function(n,r){return r.indexOf(n)!==-1},t,"")},e.prototype.startsWithAnyOfIgnoreCase=function(){var t=getArrayOf.apply(NO_CHAR_ARRAY,arguments);return t.length===0?emptyCollection(this):addIgnoreCaseAlgorithm(this,function(n,r){return r.some(function(o){return n.indexOf(o)===0})},t,maxString)},e.prototype.anyOf=function(){var t=this,n=getArrayOf.apply(NO_CHAR_ARRAY,arguments),r=this._cmp;try{n.sort(r)}catch{return fail(this,INVALID_KEY_ARGUMENT)}if(n.length===0)return emptyCollection(this);var o=new this.Collection(this,function(){return createRange(n[0],n[n.length-1])});o._ondirectionchange=function(s){r=s==="next"?t._ascending:t._descending,n.sort(r)};var a=0;return o._addAlgorithm(function(s,u,l){for(var c=s.key;r(c,n[a])>0;)if(++a,a===n.length)return u(l),!1;return r(c,n[a])===0?!0:(u(function(){s.continue(n[a])}),!1)}),o},e.prototype.notEqual=function(t){return this.inAnyRange([[minKey,t],[t,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},e.prototype.noneOf=function(){var t=getArrayOf.apply(NO_CHAR_ARRAY,arguments);if(t.length===0)return new this.Collection(this);try{t.sort(this._ascending)}catch{return fail(this,INVALID_KEY_ARGUMENT)}var n=t.reduce(function(r,o){return r?r.concat([[r[r.length-1][1],o]]):[[minKey,o]]},null);return n.push([t[t.length-1],this.db._maxKey]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})},e.prototype.inAnyRange=function(t,n){var r=this,o=this._cmp,a=this._ascending,s=this._descending,u=this._min,l=this._max;if(t.length===0)return emptyCollection(this);if(!t.every(function(zs){return zs[0]!==void 0&&zs[1]!==void 0&&a(zs[0],zs[1])<=0}))return fail(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",exceptions.InvalidArgument);var c=!n||n.includeLowers!==!1,m=n&&n.includeUppers===!0;function me(zs,za){for(var Hs=0,lc=zs.length;Hs<lc;++Hs){var Ty=zs[Hs];if(o(za[0],Ty[1])<0&&o(za[1],Ty[0])>0){Ty[0]=u(Ty[0],za[0]),Ty[1]=l(Ty[1],za[1]);break}}return Hs===lc&&zs.push(za),zs}var xe=a;function Ne(zs,za){return xe(zs[0],za[0])}var He;try{He=t.reduce(me,[]),He.sort(Ne)}catch{return fail(this,INVALID_KEY_ARGUMENT)}var Ye=0,Je=m?function(zs){return a(zs,He[Ye][1])>0}:function(zs){return a(zs,He[Ye][1])>=0},vn=c?function(zs){return s(zs,He[Ye][0])>0}:function(zs){return s(zs,He[Ye][0])>=0};function La(zs){return!Je(zs)&&!vn(zs)}var sr=Je,Zr=new this.Collection(this,function(){return createRange(He[0][0],He[He.length-1][1],!c,!m)});return Zr._ondirectionchange=function(zs){zs==="next"?(sr=Je,xe=a):(sr=vn,xe=s),He.sort(Ne)},Zr._addAlgorithm(function(zs,za,Hs){for(var lc=zs.key;sr(lc);)if(++Ye,Ye===He.length)return za(Hs),!1;return La(lc)?!0:(r._cmp(lc,He[Ye][1])===0||r._cmp(lc,He[Ye][0])===0||za(function(){xe===a?zs.continue(He[Ye][0]):zs.continue(He[Ye][1])}),!1)}),Zr},e.prototype.startsWithAnyOf=function(){var t=getArrayOf.apply(NO_CHAR_ARRAY,arguments);return t.every(function(n){return typeof n=="string"})?t.length===0?emptyCollection(this):this.inAnyRange(t.map(function(n){return[n,n+maxString]})):fail(this,"startsWithAnyOf() only works with strings")},e}();function createWhereClauseConstructor(e){return makeClassConstructor(WhereClause.prototype,function(n,r,o){this.db=e,this._ctx={table:n,index:r===":id"?null:r,or:o};var a=e._deps.indexedDB;if(!a)throw new exceptions.MissingAPI;this._cmp=this._ascending=a.cmp.bind(a),this._descending=function(s,u){return a.cmp(u,s)},this._max=function(s,u){return a.cmp(s,u)>0?s:u},this._min=function(s,u){return a.cmp(s,u)<0?s:u},this._IDBKeyRange=e._deps.IDBKeyRange})}function eventRejectHandler(e){return wrap(function(t){return preventDefault(t),e(t.target.error),!1})}function preventDefault(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var DEXIE_STORAGE_MUTATED_EVENT_NAME="storagemutated",STORAGE_MUTATED_DOM_EVENT_NAME="x-storagemutated-1",globalEvents=Events(null,DEXIE_STORAGE_MUTATED_EVENT_NAME),Transaction=function(){function e(){}return e.prototype._lock=function(){return assert(!PSD.global),++this._reculock,this._reculock===1&&!PSD.global&&(PSD.lockOwnerFor=this),this},e.prototype._unlock=function(){if(assert(!PSD.global),--this._reculock===0)for(PSD.global||(PSD.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var t=this._blockedFuncs.shift();try{usePSD(t[1],t[0])}catch{}}return this},e.prototype._locked=function(){return this._reculock&&PSD.lockOwnerFor!==this},e.prototype.create=function(t){var n=this;if(!this.mode)return this;var r=this.db.idbdb,o=this.db._state.dbOpenError;if(assert(!this.idbtrans),!t&&!r)switch(o&&o.name){case"DatabaseClosedError":throw new exceptions.DatabaseClosed(o);case"MissingAPIError":throw new exceptions.MissingAPI(o.message,o);default:throw new exceptions.OpenFailed(o)}if(!this.active)throw new exceptions.TransactionInactive;return assert(this._completion._state===null),t=this.idbtrans=t||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):r.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})),t.onerror=wrap(function(a){preventDefault(a),n._reject(t.error)}),t.onabort=wrap(function(a){preventDefault(a),n.active&&n._reject(new exceptions.Abort(t.error)),n.active=!1,n.on("abort").fire(a)}),t.oncomplete=wrap(function(){n.active=!1,n._resolve(),"mutatedParts"in t&&globalEvents.storagemutated.fire(t.mutatedParts)}),this},e.prototype._promise=function(t,n,r){var o=this;if(t==="readwrite"&&this.mode!=="readwrite")return rejection(new exceptions.ReadOnly("Transaction is readonly"));if(!this.active)return rejection(new exceptions.TransactionInactive);if(this._locked())return new DexiePromise(function(s,u){o._blockedFuncs.push([function(){o._promise(t,n,r).then(s,u)},PSD])});if(r)return newScope(function(){var s=new DexiePromise(function(u,l){o._lock();var c=n(u,l,o);c&&c.then&&c.then(u,l)});return s.finally(function(){return o._unlock()}),s._lib=!0,s});var a=new DexiePromise(function(s,u){var l=n(s,u,o);l&&l.then&&l.then(s,u)});return a._lib=!0,a},e.prototype._root=function(){return this.parent?this.parent._root():this},e.prototype.waitFor=function(t){var n=this._root(),r=DexiePromise.resolve(t);if(n._waitingFor)n._waitingFor=n._waitingFor.then(function(){return r});else{n._waitingFor=r,n._waitingQueue=[];var o=n.idbtrans.objectStore(n.storeNames[0]);(function s(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(o.get(-1/0).onsuccess=s)})()}var a=n._waitingFor;return new DexiePromise(function(s,u){r.then(function(l){return n._waitingQueue.push(wrap(s.bind(null,l)))},function(l){return n._waitingQueue.push(wrap(u.bind(null,l)))}).finally(function(){n._waitingFor===a&&(n._waitingFor=null)})})},e.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new exceptions.Abort))},e.prototype.table=function(t){var n=this._memoizedTables||(this._memoizedTables={});if(hasOwn(n,t))return n[t];var r=this.schema[t];if(!r)throw new exceptions.NotFound("Table "+t+" not part of transaction");var o=new this.db.Table(t,r,this);return o.core=this.db.core.table(t),n[t]=o,o},e}();function createTransactionConstructor(e){return makeClassConstructor(Transaction.prototype,function(n,r,o,a,s){var u=this;this.db=e,this.mode=n,this.storeNames=r,this.schema=o,this.chromeTransactionDurability=a,this.idbtrans=null,this.on=Events(this,"complete","error","abort"),this.parent=s||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new DexiePromise(function(l,c){u._resolve=l,u._reject=c}),this._completion.then(function(){u.active=!1,u.on.complete.fire()},function(l){var c=u.active;return u.active=!1,u.on.error.fire(l),u.parent?u.parent._reject(l):c&&u.idbtrans&&u.idbtrans.abort(),rejection(l)})})}function createIndexSpec(e,t,n,r,o,a,s){return{name:e,keyPath:t,unique:n,multi:r,auto:o,compound:a,src:(n&&!s?"&":"")+(r?"*":"")+(o?"++":"")+nameFromKeyPath(t)}}function nameFromKeyPath(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function createTableSchema(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:arrayToObject(n,function(r){return[r.name,r]})}}function safariMultiStoreFix(e){return e.length===1?e[0]:e}var getMaxKey=function(e){try{return e.only([[]]),getMaxKey=function(){return[[]]},[[]]}catch{return getMaxKey=function(){return maxString},maxString}};function getKeyExtractor(e){return e==null?function(){}:typeof e=="string"?getSinglePathKeyExtractor(e):function(t){return getByKeyPath(t,e)}}function getSinglePathKeyExtractor(e){var t=e.split(".");return t.length===1?function(n){return n[e]}:function(n){return getByKeyPath(n,e)}}function arrayify(e){return[].slice.call(e)}var _id_counter=0;function getKeyPathAlias(e){return e==null?":id":typeof e=="string"?e:"["+e.join("+")+"]"}function createDBCore(e,t,n){function r(me,xe){var Ne=arrayify(me.objectStoreNames);return{schema:{name:me.name,tables:Ne.map(function(He){return xe.objectStore(He)}).map(function(He){var Ye=He.keyPath,Je=He.autoIncrement,vn=isArray$1(Ye),La=Ye==null,sr={},Zr={name:He.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:La,compound:vn,keyPath:Ye,autoIncrement:Je,unique:!0,extractKey:getKeyExtractor(Ye)},indexes:arrayify(He.indexNames).map(function(zs){return He.index(zs)}).map(function(zs){var za=zs.name,Hs=zs.unique,lc=zs.multiEntry,Ty=zs.keyPath,_y=isArray$1(Ty),xy={name:za,compound:_y,keyPath:Ty,unique:Hs,multiEntry:lc,extractKey:getKeyExtractor(Ty)};return sr[getKeyPathAlias(Ty)]=xy,xy}),getIndexByKeyPath:function(zs){return sr[getKeyPathAlias(zs)]}};return sr[":id"]=Zr.primaryKey,Ye!=null&&(sr[getKeyPathAlias(Ye)]=Zr.primaryKey),Zr})},hasGetAll:Ne.length>0&&"getAll"in xe.objectStore(Ne[0])&&!(typeof navigator!="undefined"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function o(me){if(me.type===3)return null;if(me.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var xe=me.lower,Ne=me.upper,He=me.lowerOpen,Ye=me.upperOpen,Je=xe===void 0?Ne===void 0?null:t.upperBound(Ne,!!Ye):Ne===void 0?t.lowerBound(xe,!!He):t.bound(xe,Ne,!!He,!!Ye);return Je}function a(me){var xe=me.name;function Ne(Je){var vn=Je.trans,La=Je.type,sr=Je.keys,Zr=Je.values,zs=Je.range;return new Promise(function(za,Hs){za=wrap(za);var lc=vn.objectStore(xe),Ty=lc.keyPath==null,_y=La==="put"||La==="add";if(!_y&&La!=="delete"&&La!=="deleteRange")throw new Error("Invalid operation type: "+La);var xy=(sr||Zr||{length:1}).length;if(sr&&Zr&&sr.length!==Zr.length)throw new Error("Given keys array must have same length as given values array.");if(xy===0)return za({numFailures:0,failures:{},results:[],lastResult:void 0});var Bb,Dy=[],Bg=[],yy=0,wy=function(Jb){++yy,preventDefault(Jb)};if(La==="deleteRange"){if(zs.type===4)return za({numFailures:yy,failures:Bg,results:[],lastResult:void 0});zs.type===3?Dy.push(Bb=lc.clear()):Dy.push(Bb=lc.delete(o(zs)))}else{var Ay=_y?Ty?[Zr,sr]:[Zr,null]:[sr,null],$b=Ay[0],e0=Ay[1];if(_y)for(var Hb=0;Hb<xy;++Hb)Dy.push(Bb=e0&&e0[Hb]!==void 0?lc[La]($b[Hb],e0[Hb]):lc[La]($b[Hb])),Bb.onerror=wy;else for(var Hb=0;Hb<xy;++Hb)Dy.push(Bb=lc[La]($b[Hb])),Bb.onerror=wy}var Yb=function(Jb){var l2=Jb.target.result;Dy.forEach(function(y2,Rb){return y2.error!=null&&(Bg[Rb]=y2.error)}),za({numFailures:yy,failures:Bg,results:La==="delete"?sr:Dy.map(function(y2){return y2.result}),lastResult:l2})};Bb.onerror=function(Jb){wy(Jb),Yb(Jb)},Bb.onsuccess=Yb})}function He(Je){var vn=Je.trans,La=Je.values,sr=Je.query,Zr=Je.reverse,zs=Je.unique;return new Promise(function(za,Hs){za=wrap(za);var lc=sr.index,Ty=sr.range,_y=vn.objectStore(xe),xy=lc.isPrimaryKey?_y:_y.index(lc.name),Bb=Zr?zs?"prevunique":"prev":zs?"nextunique":"next",Dy=La||!("openKeyCursor"in xy)?xy.openCursor(o(Ty),Bb):xy.openKeyCursor(o(Ty),Bb);Dy.onerror=eventRejectHandler(Hs),Dy.onsuccess=wrap(function(Bg){var yy=Dy.result;if(!yy){za(null);return}yy.___id=++_id_counter,yy.done=!1;var wy=yy.continue.bind(yy),Ay=yy.continuePrimaryKey;Ay&&(Ay=Ay.bind(yy));var $b=yy.advance.bind(yy),e0=function(){throw new Error("Cursor not started")},Hb=function(){throw new Error("Cursor not stopped")};yy.trans=vn,yy.stop=yy.continue=yy.continuePrimaryKey=yy.advance=e0,yy.fail=wrap(Hs),yy.next=function(){var Yb=this,Jb=1;return this.start(function(){return Jb--?Yb.continue():Yb.stop()}).then(function(){return Yb})},yy.start=function(Yb){var Jb=new Promise(function(y2,Rb){y2=wrap(y2),Dy.onerror=eventRejectHandler(Rb),yy.fail=Rb,yy.stop=function(i2){yy.stop=yy.continue=yy.continuePrimaryKey=yy.advance=Hb,y2(i2)}}),l2=function(){if(Dy.result)try{Yb()}catch(y2){yy.fail(y2)}else yy.done=!0,yy.start=function(){throw new Error("Cursor behind last entry")},yy.stop()};return Dy.onsuccess=wrap(function(y2){Dy.onsuccess=l2,l2()}),yy.continue=wy,yy.continuePrimaryKey=Ay,yy.advance=$b,l2(),Jb},za(yy)},Hs)})}function Ye(Je){return function(vn){return new Promise(function(La,sr){La=wrap(La);var Zr=vn.trans,zs=vn.values,za=vn.limit,Hs=vn.query,lc=za===1/0?void 0:za,Ty=Hs.index,_y=Hs.range,xy=Zr.objectStore(xe),Bb=Ty.isPrimaryKey?xy:xy.index(Ty.name),Dy=o(_y);if(za===0)return La({result:[]});if(Je){var Bg=zs?Bb.getAll(Dy,lc):Bb.getAllKeys(Dy,lc);Bg.onsuccess=function($b){return La({result:$b.target.result})},Bg.onerror=eventRejectHandler(sr)}else{var yy=0,wy=zs||!("openKeyCursor"in Bb)?Bb.openCursor(Dy):Bb.openKeyCursor(Dy),Ay=[];wy.onsuccess=function($b){var e0=wy.result;if(!e0)return La({result:Ay});if(Ay.push(zs?e0.value:e0.primaryKey),++yy===za)return La({result:Ay});e0.continue()},wy.onerror=eventRejectHandler(sr)}})}}return{name:xe,schema:me,mutate:Ne,getMany:function(Je){var vn=Je.trans,La=Je.keys;return new Promise(function(sr,Zr){sr=wrap(sr);for(var zs=vn.objectStore(xe),za=La.length,Hs=new Array(za),lc=0,Ty=0,_y,xy=function(yy){var wy=yy.target;(Hs[wy._pos]=wy.result)!=null,++Ty===lc&&sr(Hs)},Bb=eventRejectHandler(Zr),Dy=0;Dy<za;++Dy){var Bg=La[Dy];Bg!=null&&(_y=zs.get(La[Dy]),_y._pos=Dy,_y.onsuccess=xy,_y.onerror=Bb,++lc)}lc===0&&sr(Hs)})},get:function(Je){var vn=Je.trans,La=Je.key;return new Promise(function(sr,Zr){sr=wrap(sr);var zs=vn.objectStore(xe),za=zs.get(La);za.onsuccess=function(Hs){return sr(Hs.target.result)},za.onerror=eventRejectHandler(Zr)})},query:Ye(l),openCursor:He,count:function(Je){var vn=Je.query,La=Je.trans,sr=vn.index,Zr=vn.range;return new Promise(function(zs,za){var Hs=La.objectStore(xe),lc=sr.isPrimaryKey?Hs:Hs.index(sr.name),Ty=o(Zr),_y=Ty?lc.count(Ty):lc.count();_y.onsuccess=wrap(function(xy){return zs(xy.target.result)}),_y.onerror=eventRejectHandler(za)})}}}var s=r(e,n),u=s.schema,l=s.hasGetAll,c=u.tables.map(function(me){return a(me)}),m={};return c.forEach(function(me){return m[me.name]=me}),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(me){var xe=m[me];if(!xe)throw new Error("Table '"+me+"' not found");return m[me]},MIN_KEY:-1/0,MAX_KEY:getMaxKey(t),schema:u}}function createMiddlewareStack(e,t){return t.reduce(function(n,r){var o=r.create;return __assign(__assign({},n),o(n))},e)}function createMiddlewareStacks(e,t,n,r){var o=n.IDBKeyRange;n.indexedDB;var a=createMiddlewareStack(createDBCore(t,o,r),e.dbcore);return{dbcore:a}}function generateMiddlewareStacks(e,t){var n=e._novip,r=t.db,o=createMiddlewareStacks(n._middlewares,r,n._deps,t);n.core=o.dbcore,n.tables.forEach(function(a){var s=a.name;n.core.schema.tables.some(function(u){return u.name===s})&&(a.core=n.core.table(s),n[s]instanceof n.Table&&(n[s].core=a.core))})}function setApiOnPlace(e,t,n,r){var o=e._novip;n.forEach(function(a){var s=r[a];t.forEach(function(u){var l=getPropertyDescriptor(u,a);(!l||"value"in l&&l.value===void 0)&&(u===o.Transaction.prototype||u instanceof o.Transaction?setProp(u,a,{get:function(){return this.table(a)},set:function(c){defineProperty(this,a,{value:c,writable:!0,configurable:!0,enumerable:!0})}}):u[a]=new o.Table(a,s))})})}function removeTablesApi(e,t){var n=e._novip;t.forEach(function(r){for(var o in r)r[o]instanceof n.Table&&delete r[o]})}function lowerVersionFirst(e,t){return e._cfg.version-t._cfg.version}function runUpgraders(e,t,n,r){var o=e._dbSchema,a=e._createTransaction("readwrite",e._storeNames,o);a.create(n),a._completion.catch(r);var s=a._reject.bind(a),u=PSD.transless||PSD;newScope(function(){PSD.trans=a,PSD.transless=u,t===0?(keys(o).forEach(function(l){createTable(n,l,o[l].primKey,o[l].indexes)}),generateMiddlewareStacks(e,n),DexiePromise.follow(function(){return e.on.populate.fire(a)}).catch(s)):updateTablesAndIndexes(e,t,a,n).catch(s)})}function updateTablesAndIndexes(e,t,n,r){var o=e._novip,a=[],s=o._versions,u=o._dbSchema=buildGlobalSchema(o,o.idbdb,r),l=!1,c=s.filter(function(me){return me._cfg.version>=t});c.forEach(function(me){a.push(function(){var xe=u,Ne=me._cfg.dbschema;adjustToExistingIndexNames(o,xe,r),adjustToExistingIndexNames(o,Ne,r),u=o._dbSchema=Ne;var He=getSchemaDiff(xe,Ne);He.add.forEach(function(Zr){createTable(r,Zr[0],Zr[1].primKey,Zr[1].indexes)}),He.change.forEach(function(Zr){if(Zr.recreate)throw new exceptions.Upgrade("Not yet support for changing primary key");var zs=r.objectStore(Zr.name);Zr.add.forEach(function(za){return addIndex(zs,za)}),Zr.change.forEach(function(za){zs.deleteIndex(za.name),addIndex(zs,za)}),Zr.del.forEach(function(za){return zs.deleteIndex(za)})});var Ye=me._cfg.contentUpgrade;if(Ye&&me._cfg.version>t){generateMiddlewareStacks(o,r),n._memoizedTables={},l=!0;var Je=shallowClone(Ne);He.del.forEach(function(Zr){Je[Zr]=xe[Zr]}),removeTablesApi(o,[o.Transaction.prototype]),setApiOnPlace(o,[o.Transaction.prototype],keys(Je),Je),n.schema=Je;var vn=isAsyncFunction(Ye);vn&&incrementExpectedAwaits();var La,sr=DexiePromise.follow(function(){if(La=Ye(n),La&&vn){var Zr=decrementExpectedAwaits.bind(null,null);La.then(Zr,Zr)}});return La&&typeof La.then=="function"?DexiePromise.resolve(La):sr.then(function(){return La})}}),a.push(function(xe){if(!l||!hasIEDeleteObjectStoreBug){var Ne=me._cfg.dbschema;deleteRemovedTables(Ne,xe)}removeTablesApi(o,[o.Transaction.prototype]),setApiOnPlace(o,[o.Transaction.prototype],o._storeNames,o._dbSchema),n.schema=o._dbSchema})});function m(){return a.length?DexiePromise.resolve(a.shift()(n.idbtrans)).then(m):DexiePromise.resolve()}return m().then(function(){createMissingTables(u,r)})}function getSchemaDiff(e,t){var n={del:[],add:[],change:[]},r;for(r in e)t[r]||n.del.push(r);for(r in t){var o=e[r],a=t[r];if(!o)n.add.push([r,a]);else{var s={name:r,def:a,recreate:!1,del:[],add:[],change:[]};if(""+(o.primKey.keyPath||"")!=""+(a.primKey.keyPath||"")||o.primKey.auto!==a.primKey.auto&&!isIEOrEdge)s.recreate=!0,n.change.push(s);else{var u=o.idxByName,l=a.idxByName,c=void 0;for(c in u)l[c]||s.del.push(c);for(c in l){var m=u[c],me=l[c];m?m.src!==me.src&&s.change.push(me):s.add.push(me)}(s.del.length>0||s.add.length>0||s.change.length>0)&&n.change.push(s)}}}return n}function createTable(e,t,n,r){var o=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(function(a){return addIndex(o,a)}),o}function createMissingTables(e,t){keys(e).forEach(function(n){t.db.objectStoreNames.contains(n)||createTable(t,n,e[n].primKey,e[n].indexes)})}function deleteRemovedTables(e,t){[].slice.call(t.db.objectStoreNames).forEach(function(n){return e[n]==null&&t.db.deleteObjectStore(n)})}function addIndex(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function buildGlobalSchema(e,t,n){var r={},o=slice(t.objectStoreNames,0);return o.forEach(function(a){for(var s=n.objectStore(a),u=s.keyPath,l=createIndexSpec(nameFromKeyPath(u),u||"",!1,!1,!!s.autoIncrement,u&&typeof u!="string",!0),c=[],m=0;m<s.indexNames.length;++m){var me=s.index(s.indexNames[m]);u=me.keyPath;var xe=createIndexSpec(me.name,u,!!me.unique,!!me.multiEntry,!1,u&&typeof u!="string",!1);c.push(xe)}r[a]=createTableSchema(a,l,c)}),r}function readGlobalSchema(e,t,n){var r=e._novip;r.verno=t.version/10;var o=r._dbSchema=buildGlobalSchema(r,t,n);r._storeNames=slice(t.objectStoreNames,0),setApiOnPlace(r,[r._allTables],keys(o),o)}function verifyInstalledSchema(e,t){var n=buildGlobalSchema(e,e.idbdb,t),r=getSchemaDiff(n,e._dbSchema);return!(r.add.length||r.change.some(function(o){return o.add.length||o.change.length}))}function adjustToExistingIndexNames(e,t,n){for(var r=e._novip,o=n.db.objectStoreNames,a=0;a<o.length;++a){var s=o[a],u=n.objectStore(s);r._hasGetAll="getAll"in u;for(var l=0;l<u.indexNames.length;++l){var c=u.indexNames[l],m=u.index(c).keyPath,me=typeof m=="string"?m:"["+slice(m).join("+")+"]";if(t[s]){var xe=t[s].idxByName[me];xe&&(xe.name=c,delete t[s].idxByName[me],t[s].idxByName[c]=xe)}}}typeof navigator!="undefined"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&_global.WorkerGlobalScope&&_global instanceof _global.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(r._hasGetAll=!1)}function parseIndexSyntax(e){return e.split(",").map(function(t,n){t=t.trim();var r=t.replace(/([&*]|\+\+)/g,""),o=/^\[/.test(r)?r.match(/^\[(.*)\]$/)[1].split("+"):r;return createIndexSpec(r,o||null,/\&/.test(t),/\*/.test(t),/\+\+/.test(t),isArray$1(o),n===0)})}var Version=function(){function e(){}return e.prototype._parseStoresSpec=function(t,n){keys(t).forEach(function(r){if(t[r]!==null){var o=parseIndexSyntax(t[r]),a=o.shift();if(a.multi)throw new exceptions.Schema("Primary key cannot be multi-valued");o.forEach(function(s){if(s.auto)throw new exceptions.Schema("Only primary key can be marked as autoIncrement (++)");if(!s.keyPath)throw new exceptions.Schema("Index must have a name and cannot be an empty string")}),n[r]=createTableSchema(r,a,o)}})},e.prototype.stores=function(t){var n=this.db;this._cfg.storesSource=this._cfg.storesSource?extend(this._cfg.storesSource,t):t;var r=n._versions,o={},a={};return r.forEach(function(s){extend(o,s._cfg.storesSource),a=s._cfg.dbschema={},s._parseStoresSpec(o,a)}),n._dbSchema=a,removeTablesApi(n,[n._allTables,n,n.Transaction.prototype]),setApiOnPlace(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],keys(a),a),n._storeNames=keys(a),this},e.prototype.upgrade=function(t){return this._cfg.contentUpgrade=promisableChain(this._cfg.contentUpgrade||nop,t),this},e}();function createVersionConstructor(e){return makeClassConstructor(Version.prototype,function(n){this.db=e,this._cfg={version:n,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function getDbNamesTable(e,t){var n=e._dbNamesDB;return n||(n=e._dbNamesDB=new Dexie$1(DBNAMES_DB,{addons:[],indexedDB:e,IDBKeyRange:t}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function hasDatabasesNative(e){return e&&typeof e.databases=="function"}function getDatabaseNames(e){var t=e.indexedDB,n=e.IDBKeyRange;return hasDatabasesNative(t)?Promise.resolve(t.databases()).then(function(r){return r.map(function(o){return o.name}).filter(function(o){return o!==DBNAMES_DB})}):getDbNamesTable(t,n).toCollection().primaryKeys()}function _onDatabaseCreated(e,t){var n=e.indexedDB,r=e.IDBKeyRange;!hasDatabasesNative(n)&&t!==DBNAMES_DB&&getDbNamesTable(n,r).put({name:t}).catch(nop)}function _onDatabaseDeleted(e,t){var n=e.indexedDB,r=e.IDBKeyRange;!hasDatabasesNative(n)&&t!==DBNAMES_DB&&getDbNamesTable(n,r).delete(t).catch(nop)}function vip(e){return newScope(function(){return PSD.letThrough=!0,e()})}function idbReady(){var e=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!e||!indexedDB.databases)return Promise.resolve();var t;return new Promise(function(n){var r=function(){return indexedDB.databases().finally(n)};t=setInterval(r,100),r()}).finally(function(){return clearInterval(t)})}function dexieOpen(e){var t=e._state,n=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(function(){return t.dbOpenError?rejection(t.dbOpenError):e});debug&&(t.openCanceller._stackHolder=getErrorWithStack()),t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var r=t.openCanceller;function o(){if(t.openCanceller!==r)throw new exceptions.DatabaseClosed("db.open() was cancelled")}var a=t.dbReadyResolve,s=null,u=!1;return DexiePromise.race([r,(typeof navigator=="undefined"?DexiePromise.resolve():idbReady()).then(function(){return new DexiePromise(function(l,c){if(o(),!n)throw new exceptions.MissingAPI;var m=e.name,me=t.autoSchema?n.open(m):n.open(m,Math.round(e.verno*10));if(!me)throw new exceptions.MissingAPI;me.onerror=eventRejectHandler(c),me.onblocked=wrap(e._fireOnBlocked),me.onupgradeneeded=wrap(function(xe){if(s=me.transaction,t.autoSchema&&!e._options.allowEmptyDB){me.onerror=preventDefault,s.abort(),me.result.close();var Ne=n.deleteDatabase(m);Ne.onsuccess=Ne.onerror=wrap(function(){c(new exceptions.NoSuchDatabase("Database "+m+" doesnt exist"))})}else{s.onerror=eventRejectHandler(c);var He=xe.oldVersion>Math.pow(2,62)?0:xe.oldVersion;u=He<1,e._novip.idbdb=me.result,runUpgraders(e,He/10,s,c)}},c),me.onsuccess=wrap(function(){s=null;var xe=e._novip.idbdb=me.result,Ne=slice(xe.objectStoreNames);if(Ne.length>0)try{var He=xe.transaction(safariMultiStoreFix(Ne),"readonly");t.autoSchema?readGlobalSchema(e,xe,He):(adjustToExistingIndexNames(e,e._dbSchema,He),verifyInstalledSchema(e,He)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),generateMiddlewareStacks(e,He)}catch{}connections.push(e),xe.onversionchange=wrap(function(Ye){t.vcFired=!0,e.on("versionchange").fire(Ye)}),xe.onclose=wrap(function(Ye){e.on("close").fire(Ye)}),u&&_onDatabaseCreated(e._deps,m),l()},c)})})]).then(function(){return o(),t.onReadyBeingFired=[],DexiePromise.resolve(vip(function(){return e.on.ready.fire(e.vip)})).then(function l(){if(t.onReadyBeingFired.length>0){var c=t.onReadyBeingFired.reduce(promisableChain,nop);return t.onReadyBeingFired=[],DexiePromise.resolve(vip(function(){return c(e.vip)})).then(l)}})}).finally(function(){t.onReadyBeingFired=null,t.isBeingOpened=!1}).then(function(){return e}).catch(function(l){t.dbOpenError=l;try{s&&s.abort()}catch{}return r===t.openCanceller&&e._close(),rejection(l)}).finally(function(){t.openComplete=!0,a()})}function awaitIterator(e){var t=function(s){return e.next(s)},n=function(s){return e.throw(s)},r=a(t),o=a(n);function a(s){return function(u){var l=s(u),c=l.value;return l.done?c:!c||typeof c.then!="function"?isArray$1(c)?Promise.all(c).then(r,o):r(c):c.then(r,o)}}return a(t)()}function extractTransactionArgs(e,t,n){var r=arguments.length;if(r<2)throw new exceptions.InvalidArgument("Too few arguments");for(var o=new Array(r-1);--r;)o[r-1]=arguments[r];n=o.pop();var a=flatten(o);return[e,a,n]}function enterTransactionScope(e,t,n,r,o){return DexiePromise.resolve().then(function(){var a=PSD.transless||PSD,s=e._createTransaction(t,n,e._dbSchema,r),u={trans:s,transless:a};if(r)s.idbtrans=r.idbtrans;else try{s.create(),e._state.PR1398_maxLoop=3}catch(me){return me.name===errnames.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then(function(){return enterTransactionScope(e,t,n,null,o)})):rejection(me)}var l=isAsyncFunction(o);l&&incrementExpectedAwaits();var c,m=DexiePromise.follow(function(){if(c=o.call(s,s),c)if(l){var me=decrementExpectedAwaits.bind(null,null);c.then(me,me)}else typeof c.next=="function"&&typeof c.throw=="function"&&(c=awaitIterator(c))},u);return(c&&typeof c.then=="function"?DexiePromise.resolve(c).then(function(me){return s.active?me:rejection(new exceptions.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):m.then(function(){return c})).then(function(me){return r&&s._resolve(),s._completion.then(function(){return me})}).catch(function(me){return s._reject(me),rejection(me)})})}function pad(e,t,n){for(var r=isArray$1(e)?e.slice():[e],o=0;o<n;++o)r.push(t);return r}function createVirtualIndexMiddleware(e){return __assign(__assign({},e),{table:function(t){var n=e.table(t),r=n.schema,o={},a=[];function s(Ye,Je,vn){var La=getKeyPathAlias(Ye),sr=o[La]=o[La]||[],Zr=Ye==null?0:typeof Ye=="string"?1:Ye.length,zs=Je>0,za=__assign(__assign({},vn),{isVirtual:zs,keyTail:Je,keyLength:Zr,extractKey:getKeyExtractor(Ye),unique:!zs&&vn.unique});if(sr.push(za),za.isPrimaryKey||a.push(za),Zr>1){var Hs=Zr===2?Ye[0]:Ye.slice(0,Zr-1);s(Hs,Je+1,vn)}return sr.sort(function(lc,Ty){return lc.keyTail-Ty.keyTail}),za}var u=s(r.primaryKey.keyPath,0,r.primaryKey);o[":id"]=[u];for(var l=0,c=r.indexes;l<c.length;l++){var m=c[l];s(m.keyPath,0,m)}function me(Ye){var Je=o[getKeyPathAlias(Ye)];return Je&&Je[0]}function xe(Ye,Je){return{type:Ye.type===1?2:Ye.type,lower:pad(Ye.lower,Ye.lowerOpen?e.MAX_KEY:e.MIN_KEY,Je),lowerOpen:!0,upper:pad(Ye.upper,Ye.upperOpen?e.MIN_KEY:e.MAX_KEY,Je),upperOpen:!0}}function Ne(Ye){var Je=Ye.query.index;return Je.isVirtual?__assign(__assign({},Ye),{query:{index:Je,range:xe(Ye.query.range,Je.keyTail)}}):Ye}var He=__assign(__assign({},n),{schema:__assign(__assign({},r),{primaryKey:u,indexes:a,getIndexByKeyPath:me}),count:function(Ye){return n.count(Ne(Ye))},query:function(Ye){return n.query(Ne(Ye))},openCursor:function(Ye){var Je=Ye.query.index,vn=Je.keyTail,La=Je.isVirtual,sr=Je.keyLength;if(!La)return n.openCursor(Ye);function Zr(zs){function za(lc){lc!=null?zs.continue(pad(lc,Ye.reverse?e.MAX_KEY:e.MIN_KEY,vn)):Ye.unique?zs.continue(zs.key.slice(0,sr).concat(Ye.reverse?e.MIN_KEY:e.MAX_KEY,vn)):zs.continue()}var Hs=Object.create(zs,{continue:{value:za},continuePrimaryKey:{value:function(lc,Ty){zs.continuePrimaryKey(pad(lc,e.MAX_KEY,vn),Ty)}},primaryKey:{get:function(){return zs.primaryKey}},key:{get:function(){var lc=zs.key;return sr===1?lc[0]:lc.slice(0,sr)}},value:{get:function(){return zs.value}}});return Hs}return n.openCursor(Ne(Ye)).then(function(zs){return zs&&Zr(zs)})}});return He}})}var virtualIndexMiddleware={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:createVirtualIndexMiddleware};function getObjectDiff(e,t,n,r){return n=n||{},r=r||"",keys(e).forEach(function(o){if(!hasOwn(t,o))n[r+o]=void 0;else{var a=e[o],s=t[o];if(typeof a=="object"&&typeof s=="object"&&a&&s){var u=toStringTag(a),l=toStringTag(s);u!==l?n[r+o]=t[o]:u==="Object"?getObjectDiff(a,s,n,r+o+"."):a!==s&&(n[r+o]=t[o])}else a!==s&&(n[r+o]=t[o])}}),keys(t).forEach(function(o){hasOwn(e,o)||(n[r+o]=t[o])}),n}function getEffectiveKeys(e,t){return t.type==="delete"?t.keys:t.keys||t.values.map(e.extractKey)}var hooksMiddleware={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return __assign(__assign({},e),{table:function(t){var n=e.table(t),r=n.schema.primaryKey,o=__assign(__assign({},n),{mutate:function(a){var s=PSD.trans,u=s.table(t).hook,l=u.deleting,c=u.creating,m=u.updating;switch(a.type){case"add":if(c.fire===nop)break;return s._promise("readwrite",function(){return me(a)},!0);case"put":if(c.fire===nop&&m.fire===nop)break;return s._promise("readwrite",function(){return me(a)},!0);case"delete":if(l.fire===nop)break;return s._promise("readwrite",function(){return me(a)},!0);case"deleteRange":if(l.fire===nop)break;return s._promise("readwrite",function(){return xe(a)},!0)}return n.mutate(a);function me(He){var Ye=PSD.trans,Je=He.keys||getEffectiveKeys(r,He);if(!Je)throw new Error("Keys missing");return He=He.type==="add"||He.type==="put"?__assign(__assign({},He),{keys:Je}):__assign({},He),He.type!=="delete"&&(He.values=__spreadArray([],He.values,!0)),He.keys&&(He.keys=__spreadArray([],He.keys,!0)),getExistingValues(n,He,Je).then(function(vn){var La=Je.map(function(sr,Zr){var zs=vn[Zr],za={onerror:null,onsuccess:null};if(He.type==="delete")l.fire.call(za,sr,zs,Ye);else if(He.type==="add"||zs===void 0){var Hs=c.fire.call(za,sr,He.values[Zr],Ye);sr==null&&Hs!=null&&(sr=Hs,He.keys[Zr]=sr,r.outbound||setByKeyPath(He.values[Zr],r.keyPath,sr))}else{var lc=getObjectDiff(zs,He.values[Zr]),Ty=m.fire.call(za,lc,sr,zs,Ye);if(Ty){var _y=He.values[Zr];Object.keys(Ty).forEach(function(xy){hasOwn(_y,xy)?_y[xy]=Ty[xy]:setByKeyPath(_y,xy,Ty[xy])})}}return za});return n.mutate(He).then(function(sr){for(var Zr=sr.failures,zs=sr.results,za=sr.numFailures,Hs=sr.lastResult,lc=0;lc<Je.length;++lc){var Ty=zs?zs[lc]:Je[lc],_y=La[lc];Ty==null?_y.onerror&&_y.onerror(Zr[lc]):_y.onsuccess&&_y.onsuccess(He.type==="put"&&vn[lc]?He.values[lc]:Ty)}return{failures:Zr,results:zs,numFailures:za,lastResult:Hs}}).catch(function(sr){return La.forEach(function(Zr){return Zr.onerror&&Zr.onerror(sr)}),Promise.reject(sr)})})}function xe(He){return Ne(He.trans,He.range,1e4)}function Ne(He,Ye,Je){return n.query({trans:He,values:!1,query:{index:r,range:Ye},limit:Je}).then(function(vn){var La=vn.result;return me({type:"delete",keys:La,trans:He}).then(function(sr){return sr.numFailures>0?Promise.reject(sr.failures[0]):La.length<Je?{failures:[],numFailures:0,lastResult:void 0}:Ne(He,__assign(__assign({},Ye),{lower:La[La.length-1],lowerOpen:!0}),Je)})})}}});return o}})}};function getExistingValues(e,t,n){return t.type==="add"?Promise.resolve([]):e.getMany({trans:t.trans,keys:n,cache:"immutable"})}function getFromTransactionCache(e,t,n){try{if(!t||t.keys.length<e.length)return null;for(var r=[],o=0,a=0;o<t.keys.length&&a<e.length;++o)cmp(t.keys[o],e[a])===0&&(r.push(n?deepClone(t.values[o]):t.values[o]),++a);return r.length===e.length?r:null}catch{return null}}var cacheExistingValuesMiddleware={stack:"dbcore",level:-1,create:function(e){return{table:function(t){var n=e.table(t);return __assign(__assign({},n),{getMany:function(r){if(!r.cache)return n.getMany(r);var o=getFromTransactionCache(r.keys,r.trans._cache,r.cache==="clone");return o?DexiePromise.resolve(o):n.getMany(r).then(function(a){return r.trans._cache={keys:r.keys,values:r.cache==="clone"?deepClone(a):a},a})},mutate:function(r){return r.type!=="add"&&(r.trans._cache=null),n.mutate(r)}})}}}},_a;function isEmptyRange(e){return!("from"in e)}var RangeSet=function(e,t){if(this)extend(this,arguments.length?{d:1,from:e,to:arguments.length>1?t:e}:{d:0});else{var n=new RangeSet;return e&&"d"in e&&extend(n,e),n}};props(RangeSet.prototype,(_a={add:function(e){return mergeRanges(this,e),this},addKey:function(e){return addRange(this,e,e),this},addKeys:function(e){var t=this;return e.forEach(function(n){return addRange(t,n,n)}),this}},_a[iteratorSymbol]=function(){return getRangeSetIterator(this)},_a));function addRange(e,t,n){var r=cmp(t,n);if(!isNaN(r)){if(r>0)throw RangeError();if(isEmptyRange(e))return extend(e,{from:t,to:n,d:1});var o=e.l,a=e.r;if(cmp(n,e.from)<0)return o?addRange(o,t,n):e.l={from:t,to:n,d:1,l:null,r:null},rebalance(e);if(cmp(t,e.to)>0)return a?addRange(a,t,n):e.r={from:t,to:n,d:1,l:null,r:null},rebalance(e);cmp(t,e.from)<0&&(e.from=t,e.l=null,e.d=a?a.d+1:1),cmp(n,e.to)>0&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1);var s=!e.r;o&&!e.l&&mergeRanges(e,o),a&&s&&mergeRanges(e,a)}}function mergeRanges(e,t){function n(r,o){var a=o.from,s=o.to,u=o.l,l=o.r;addRange(r,a,s),u&&n(r,u),l&&n(r,l)}isEmptyRange(t)||n(e,t)}function rangesOverlap(e,t){var n=getRangeSetIterator(t),r=n.next();if(r.done)return!1;for(var o=r.value,a=getRangeSetIterator(e),s=a.next(o.from),u=s.value;!r.done&&!s.done;){if(cmp(u.from,o.to)<=0&&cmp(u.to,o.from)>=0)return!0;cmp(o.from,u.from)<0?o=(r=n.next(u.from)).value:u=(s=a.next(o.from)).value}return!1}function getRangeSetIterator(e){var t=isEmptyRange(e)?null:{s:0,n:e};return{next:function(n){for(var r=arguments.length>0;t;)switch(t.s){case 0:if(t.s=1,r)for(;t.n.l&&cmp(n,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!r||cmp(n,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function rebalance(e){var t,n,r=(((t=e.r)===null||t===void 0?void 0:t.d)||0)-(((n=e.l)===null||n===void 0?void 0:n.d)||0),o=r>1?"r":r<-1?"l":"";if(o){var a=o==="r"?"l":"r",s=__assign({},e),u=e[o];e.from=u.from,e.to=u.to,e[o]=u[o],s[o]=u[a],e[a]=s,s.d=computeDepth(s)}e.d=computeDepth(e)}function computeDepth(e){var t=e.r,n=e.l;return(t?n?Math.max(t.d,n.d):t.d:n?n.d:0)+1}var observabilityMiddleware={stack:"dbcore",level:0,create:function(e){var t=e.schema.name,n=new RangeSet(e.MIN_KEY,e.MAX_KEY);return __assign(__assign({},e),{table:function(r){var o=e.table(r),a=o.schema,s=a.primaryKey,u=s.extractKey,l=s.outbound,c=__assign(__assign({},o),{mutate:function(xe){var Ne=xe.trans,He=Ne.mutatedParts||(Ne.mutatedParts={}),Ye=function(Hs){var lc="idb://"+t+"/"+r+"/"+Hs;return He[lc]||(He[lc]=new RangeSet)},Je=Ye(""),vn=Ye(":dels"),La=xe.type,sr=xe.type==="deleteRange"?[xe.range]:xe.type==="delete"?[xe.keys]:xe.values.length<50?[[],xe.values]:[],Zr=sr[0],zs=sr[1],za=xe.trans._cache;return o.mutate(xe).then(function(Hs){if(isArray$1(Zr)){La!=="delete"&&(Zr=Hs.results),Je.addKeys(Zr);var lc=getFromTransactionCache(Zr,za);!lc&&La!=="add"&&vn.addKeys(Zr),(lc||zs)&&trackAffectedIndexes(Ye,a,lc,zs)}else if(Zr){var Ty={from:Zr.lower,to:Zr.upper};vn.add(Ty),Je.add(Ty)}else Je.add(n),vn.add(n),a.indexes.forEach(function(_y){return Ye(_y.name).add(n)});return Hs})}}),m=function(xe){var Ne,He,Ye=xe.query,Je=Ye.index,vn=Ye.range;return[Je,new RangeSet((Ne=vn.lower)!==null&&Ne!==void 0?Ne:e.MIN_KEY,(He=vn.upper)!==null&&He!==void 0?He:e.MAX_KEY)]},me={get:function(xe){return[s,new RangeSet(xe.key)]},getMany:function(xe){return[s,new RangeSet().addKeys(xe.keys)]},count:m,query:m,openCursor:m};return keys(me).forEach(function(xe){c[xe]=function(Ne){var He=PSD.subscr;if(He){var Ye=function(za){var Hs="idb://"+t+"/"+r+"/"+za;return He[Hs]||(He[Hs]=new RangeSet)},Je=Ye(""),vn=Ye(":dels"),La=me[xe](Ne),sr=La[0],Zr=La[1];if(Ye(sr.name||"").add(Zr),!sr.isPrimaryKey)if(xe==="count")vn.add(n);else{var zs=xe==="query"&&l&&Ne.values&&o.query(__assign(__assign({},Ne),{values:!1}));return o[xe].apply(this,arguments).then(function(za){if(xe==="query"){if(l&&Ne.values)return zs.then(function(_y){var xy=_y.result;return Je.addKeys(xy),za});var Hs=Ne.values?za.result.map(u):za.result;Ne.values?Je.addKeys(Hs):vn.addKeys(Hs)}else if(xe==="openCursor"){var lc=za,Ty=Ne.values;return lc&&Object.create(lc,{key:{get:function(){return vn.addKey(lc.primaryKey),lc.key}},primaryKey:{get:function(){var _y=lc.primaryKey;return vn.addKey(_y),_y}},value:{get:function(){return Ty&&Je.addKey(lc.primaryKey),lc.value}}})}return za})}}return o[xe].apply(this,arguments)}}),c}})}};function trackAffectedIndexes(e,t,n,r){function o(a){var s=e(a.name||"");function u(c){return c!=null?a.extractKey(c):null}var l=function(c){return a.multiEntry&&isArray$1(c)?c.forEach(function(m){return s.addKey(m)}):s.addKey(c)};(n||r).forEach(function(c,m){var me=n&&u(n[m]),xe=r&&u(r[m]);cmp(me,xe)!==0&&(me!=null&&l(me),xe!=null&&l(xe))})}t.indexes.forEach(o)}var Dexie$1=function(){function e(t,n){var r=this;this._middlewares={},this.verno=0;var o=e.dependencies;this._options=n=__assign({addons:e.addons,autoOpen:!0,indexedDB:o.indexedDB,IDBKeyRange:o.IDBKeyRange},n),this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};var a=n.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var s={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:nop,dbReadyPromise:null,cancelOpen:nop,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};s.dbReadyPromise=new DexiePromise(function(u){s.dbReadyResolve=u}),s.openCanceller=new DexiePromise(function(u,l){s.cancelOpen=l}),this._state=s,this.name=t,this.on=Events(this,"populate","blocked","versionchange","close",{ready:[promisableChain,nop]}),this.on.ready.subscribe=override(this.on.ready.subscribe,function(u){return function(l,c){e.vip(function(){var m=r._state;if(m.openComplete)m.dbOpenError||DexiePromise.resolve().then(l),c&&u(l);else if(m.onReadyBeingFired)m.onReadyBeingFired.push(l),c&&u(l);else{u(l);var me=r;c||u(function xe(){me.on.ready.unsubscribe(l),me.on.ready.unsubscribe(xe)})}})}}),this.Collection=createCollectionConstructor(this),this.Table=createTableConstructor(this),this.Transaction=createTransactionConstructor(this),this.Version=createVersionConstructor(this),this.WhereClause=createWhereClauseConstructor(this),this.on("versionchange",function(u){u.newVersion>0?console.warn("Another connection wants to upgrade database '"+r.name+"'. Closing db now to resume the upgrade."):console.warn("Another connection wants to delete database '"+r.name+"'. Closing db now to resume the delete request."),r.close()}),this.on("blocked",function(u){!u.newVersion||u.newVersion<u.oldVersion?console.warn("Dexie.delete('"+r.name+"') was blocked"):console.warn("Upgrade '"+r.name+"' blocked by other connection holding version "+u.oldVersion/10)}),this._maxKey=getMaxKey(n.IDBKeyRange),this._createTransaction=function(u,l,c,m){return new r.Transaction(u,l,c,r._options.chromeTransactionDurability,m)},this._fireOnBlocked=function(u){r.on("blocked").fire(u),connections.filter(function(l){return l.name===r.name&&l!==r&&!l._state.vcFired}).map(function(l){return l.on("versionchange").fire(u)})},this.use(virtualIndexMiddleware),this.use(hooksMiddleware),this.use(observabilityMiddleware),this.use(cacheExistingValuesMiddleware),this.vip=Object.create(this,{_vip:{value:!0}}),a.forEach(function(u){return u(r)})}return e.prototype.version=function(t){if(isNaN(t)||t<.1)throw new exceptions.Type("Given version is not a positive number");if(t=Math.round(t*10)/10,this.idbdb||this._state.isBeingOpened)throw new exceptions.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,t);var n=this._versions,r=n.filter(function(o){return o._cfg.version===t})[0];return r||(r=new this.Version(t),n.push(r),n.sort(lowerVersionFirst),r.stores({}),this._state.autoSchema=!1,r)},e.prototype._whenReady=function(t){var n=this;return this.idbdb&&(this._state.openComplete||PSD.letThrough||this._vip)?t():new DexiePromise(function(r,o){if(n._state.openComplete)return o(new exceptions.DatabaseClosed(n._state.dbOpenError));if(!n._state.isBeingOpened){if(!n._options.autoOpen){o(new exceptions.DatabaseClosed);return}n.open().catch(nop)}n._state.dbReadyPromise.then(r,o)}).then(t)},e.prototype.use=function(t){var n=t.stack,r=t.create,o=t.level,a=t.name;a&&this.unuse({stack:n,name:a});var s=this._middlewares[n]||(this._middlewares[n]=[]);return s.push({stack:n,create:r,level:o==null?10:o,name:a}),s.sort(function(u,l){return u.level-l.level}),this},e.prototype.unuse=function(t){var n=t.stack,r=t.name,o=t.create;return n&&this._middlewares[n]&&(this._middlewares[n]=this._middlewares[n].filter(function(a){return o?a.create!==o:r?a.name!==r:!1})),this},e.prototype.open=function(){return dexieOpen(this)},e.prototype._close=function(){var t=this._state,n=connections.indexOf(this);if(n>=0&&connections.splice(n,1),this.idbdb){try{this.idbdb.close()}catch{}this._novip.idbdb=null}t.dbReadyPromise=new DexiePromise(function(r){t.dbReadyResolve=r}),t.openCanceller=new DexiePromise(function(r,o){t.cancelOpen=o})},e.prototype.close=function(){this._close();var t=this._state;this._options.autoOpen=!1,t.dbOpenError=new exceptions.DatabaseClosed,t.isBeingOpened&&t.cancelOpen(t.dbOpenError)},e.prototype.delete=function(){var t=this,n=arguments.length>0,r=this._state;return new DexiePromise(function(o,a){var s=function(){t.close();var u=t._deps.indexedDB.deleteDatabase(t.name);u.onsuccess=wrap(function(){_onDatabaseDeleted(t._deps,t.name),o()}),u.onerror=eventRejectHandler(a),u.onblocked=t._fireOnBlocked};if(n)throw new exceptions.InvalidArgument("Arguments not allowed in db.delete()");r.isBeingOpened?r.dbReadyPromise.then(s):s()})},e.prototype.backendDB=function(){return this.idbdb},e.prototype.isOpen=function(){return this.idbdb!==null},e.prototype.hasBeenClosed=function(){var t=this._state.dbOpenError;return t&&t.name==="DatabaseClosed"},e.prototype.hasFailed=function(){return this._state.dbOpenError!==null},e.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(e.prototype,"tables",{get:function(){var t=this;return keys(this._allTables).map(function(n){return t._allTables[n]})},enumerable:!1,configurable:!0}),e.prototype.transaction=function(){var t=extractTransactionArgs.apply(this,arguments);return this._transaction.apply(this,t)},e.prototype._transaction=function(t,n,r){var o=this,a=PSD.trans;(!a||a.db!==this||t.indexOf("!")!==-1)&&(a=null);var s=t.indexOf("?")!==-1;t=t.replace("!","").replace("?","");var u,l;try{if(l=n.map(function(m){var me=m instanceof o.Table?m.name:m;if(typeof me!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return me}),t=="r"||t===READONLY)u=READONLY;else if(t=="rw"||t==READWRITE)u=READWRITE;else throw new exceptions.InvalidArgument("Invalid transaction mode: "+t);if(a){if(a.mode===READONLY&&u===READWRITE)if(s)a=null;else throw new exceptions.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");a&&l.forEach(function(m){if(a&&a.storeNames.indexOf(m)===-1)if(s)a=null;else throw new exceptions.SubTransaction("Table "+m+" not included in parent transaction.")}),s&&a&&!a.active&&(a=null)}}catch(m){return a?a._promise(null,function(me,xe){xe(m)}):rejection(m)}var c=enterTransactionScope.bind(null,this,u,l,a,r);return a?a._promise(u,c,"lock"):PSD.trans?usePSD(PSD.transless,function(){return o._whenReady(c)}):this._whenReady(c)},e.prototype.table=function(t){if(!hasOwn(this._allTables,t))throw new exceptions.InvalidTable("Table "+t+" does not exist");return this._allTables[t]},e}(),symbolObservable=typeof Symbol!="undefined"&&"observable"in Symbol?Symbol.observable:"@@observable",Observable=function(){function e(t){this._subscribe=t}return e.prototype.subscribe=function(t,n,r){return this._subscribe(!t||typeof t=="function"?{next:t,error:n,complete:r}:t)},e.prototype[symbolObservable]=function(){return this},e}();function extendObservabilitySet(e,t){return keys(t).forEach(function(n){var r=e[n]||(e[n]=new RangeSet);mergeRanges(r,t[n])}),e}function liveQuery(e){return new Observable(function(t){var n=isAsyncFunction(e);function r(Ne){n&&incrementExpectedAwaits();var He=function(){return newScope(e,{subscr:Ne,trans:null})},Ye=PSD.trans?usePSD(PSD.transless,He):He();return n&&Ye.then(decrementExpectedAwaits,decrementExpectedAwaits),Ye}var o=!1,a={},s={},u={get closed(){return o},unsubscribe:function(){o=!0,globalEvents.storagemutated.unsubscribe(me)}};t.start&&t.start(u);var l=!1,c=!1;function m(){return keys(s).some(function(Ne){return a[Ne]&&rangesOverlap(a[Ne],s[Ne])})}var me=function(Ne){extendObservabilitySet(a,Ne),m()&&xe()},xe=function(){if(!(l||o)){a={};var Ne={},He=r(Ne);c||(globalEvents(DEXIE_STORAGE_MUTATED_EVENT_NAME,me),c=!0),l=!0,Promise.resolve(He).then(function(Ye){l=!1,!o&&(m()?xe():(a={},s=Ne,t.next&&t.next(Ye)))},function(Ye){l=!1,t.error&&t.error(Ye),u.unsubscribe()})}};return xe(),u})}var domDeps;try{domDeps={indexedDB:_global.indexedDB||_global.mozIndexedDB||_global.webkitIndexedDB||_global.msIndexedDB,IDBKeyRange:_global.IDBKeyRange||_global.webkitIDBKeyRange}}catch(e){domDeps={indexedDB:null,IDBKeyRange:null}}var Dexie=Dexie$1;props(Dexie,__assign(__assign({},fullNameExceptions),{delete:function(e){var t=new Dexie(e,{addons:[]});return t.delete()},exists:function(e){return new Dexie(e,{addons:[]}).open().then(function(t){return t.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(e){try{return getDatabaseNames(Dexie.dependencies).then(e)}catch{return rejection(new exceptions.MissingAPI)}},defineClass:function(){function e(t){extend(this,t)}return e},ignoreTransaction:function(e){return PSD.trans?usePSD(PSD.transless,e):e()},vip,async:function(e){return function(){try{var t=awaitIterator(e.apply(this,arguments));return!t||typeof t.then!="function"?DexiePromise.resolve(t):t}catch(n){return rejection(n)}}},spawn:function(e,t,n){try{var r=awaitIterator(e.apply(n,t||[]));return!r||typeof r.then!="function"?DexiePromise.resolve(r):r}catch(o){return rejection(o)}},currentTransaction:{get:function(){return PSD.trans||null}},waitFor:function(e,t){var n=DexiePromise.resolve(typeof e=="function"?Dexie.ignoreTransaction(e):e).timeout(t||6e4);return PSD.trans?PSD.trans.waitFor(n):n},Promise:DexiePromise,debug:{get:function(){return debug},set:function(e){setDebug(e,e==="dexie"?function(){return!0}:dexieStackFrameFilter)}},derive,extend,props,override,Events,on:globalEvents,liveQuery,extendObservabilitySet,getByKeyPath,setByKeyPath,delByKeyPath,shallowClone,deepClone,getObjectDiff,cmp,asap:asap$1,minKey,addons:[],connections,errnames,dependencies:domDeps,semVer:DEXIE_VERSION,version:DEXIE_VERSION.split(".").map(function(e){return parseInt(e)}).reduce(function(e,t,n){return e+t/Math.pow(10,n*2)})}));Dexie.maxKey=getMaxKey(Dexie.dependencies.IDBKeyRange);typeof dispatchEvent!="undefined"&&typeof addEventListener!="undefined"&&(globalEvents(DEXIE_STORAGE_MUTATED_EVENT_NAME,function(e){if(!propagatingLocally){var t;isIEOrEdge?(t=document.createEvent("CustomEvent"),t.initCustomEvent(STORAGE_MUTATED_DOM_EVENT_NAME,!0,!0,e)):t=new CustomEvent(STORAGE_MUTATED_DOM_EVENT_NAME,{detail:e}),propagatingLocally=!0,dispatchEvent(t),propagatingLocally=!1}}),addEventListener(STORAGE_MUTATED_DOM_EVENT_NAME,function(e){var t=e.detail;propagatingLocally||propagateLocally(t)}));function propagateLocally(e){var t=propagatingLocally;try{propagatingLocally=!0,globalEvents.storagemutated.fire(e)}finally{propagatingLocally=t}}var propagatingLocally=!1;if(typeof BroadcastChannel!="undefined"){var bc_1=new BroadcastChannel(STORAGE_MUTATED_DOM_EVENT_NAME);globalEvents(DEXIE_STORAGE_MUTATED_EVENT_NAME,function(e){propagatingLocally||bc_1.postMessage(e)}),bc_1.onmessage=function(e){e.data&&propagateLocally(e.data)}}else if(typeof self!="undefined"&&typeof navigator!="undefined"){globalEvents(DEXIE_STORAGE_MUTATED_EVENT_NAME,function(e){try{propagatingLocally||(typeof localStorage!="undefined"&&localStorage.setItem(STORAGE_MUTATED_DOM_EVENT_NAME,JSON.stringify({trig:Math.random(),changedParts:e})),typeof self.clients=="object"&&__spreadArray([],self.clients.matchAll({includeUncontrolled:!0}),!0).forEach(function(t){return t.postMessage({type:STORAGE_MUTATED_DOM_EVENT_NAME,changedParts:e})}))}catch{}}),typeof addEventListener!="undefined"&&addEventListener("storage",function(e){if(e.key===STORAGE_MUTATED_DOM_EVENT_NAME){var t=JSON.parse(e.newValue);t&&propagateLocally(t.changedParts)}});var swContainer=self.document&&navigator.serviceWorker;swContainer&&swContainer.addEventListener("message",propagateMessageLocally)}function propagateMessageLocally(e){var t=e.data;t&&t.type===STORAGE_MUTATED_DOM_EVENT_NAME&&propagateLocally(t.changedParts)}DexiePromise.rejectionMapper=mapError;setDebug(debug,dexieStackFrameFilter);class DexieStorage extends Dexie$1{constructor(t,n=1){super(t),this.version(n).stores({ipfs:"id, data, timestamp"})}}class DexieIPFS{constructor(t,n=1){this.db=new DexieStorage(t,n)}async save(t,n){await this.db.ipfs.put({id:t,data:n,timestamp:new Date})}async get(t){const n=await this.db.ipfs.get(t);if(n)return n.data}}async function getGroupMetadata(e){const t=await hb$1(),n=new DexieIPFS(e),r=await t.perspective.queryProlog(e,`
  triple("${SELF}", "${FLUX_GROUP_NAME}", GN);
  triple("${SELF}", "${FLUX_GROUP_DESCRIPTION}", GD);
  triple("${SELF}", "${FLUX_GROUP_IMAGE}", GI);
  triple("${SELF}", "${FLUX_GROUP_THUMBNAIL}", GT).`),o={communityId:e,name:"",description:"",image:null,thumbnail:null};if(r){for(const a of r)if(typeof a.GN=="string")o.name=a.GN;else if(typeof a.GD=="string")o.description=a.GD;else if(typeof a.GI=="string"){const s=await getImage(a.GI);await n.save(a.GI,s),o.image=a.GI}else if(typeof a.GT=="string"){const s=await getImage(a.GT);await n.save(a.GT,s),o.thumbnail=a.GT}}return o}var fetchNeighbourhoodMetadata=async e=>{const t=useDataStore(),n=await getGroupMetadata(e);n&&t.updateCommunityMetadata(n)},joinCommunity=async({joiningLink:e})=>{const t=useDataStore(),n=useAppStore(),r=useUserStore(),o=await hb$1();try{const a=t.getCommunityNeighbourhoods;if(Object.values(a).find(u=>u.neighbourhoodUrl===e)){const u="You are already part of this group";throw n.showDangerToast({message:u}),new Error(u)}else{const u=await o.neighbourhood.joinFromUrl(e);console.log(new Date,"Installed neighbourhood with result",u);const l=await o.perspective.addLink(u.uuid,{source:SELF,target:r.agent.did,predicate:MEMBER});console.log("Created profile expression link",l);const{name:c,description:m,creatorDid:me,createdAt:xe}=getMetaFromNeighbourhood(u.neighbourhood.meta.links),Ne=await getGroupMetadata(u.uuid),He={neighbourhood:{createdAt:xe,name:(Ne==null?void 0:Ne.name)||c,description:(Ne==null?void 0:Ne.description)||m,image:(Ne==null?void 0:Ne.image)||"",thumbnail:(Ne==null?void 0:Ne.thumbnail)||"",creatorDid:me,perspective:u,neighbourhoodUrl:e,membraneType:MembraneType.Unique,linkedNeighbourhoods:[u.uuid],linkedPerspectives:[u.uuid],members:[r.getUser.agent.did],membraneRoot:u.uuid},state:{perspectiveUuid:u.uuid,useLocalTheme:!1,theme:{fontSize:"md",fontFamily:"Poppins",name:"light",hue:270,saturation:60},currentChannelId:null,hasNewMessages:!1,collapseChannelList:!1,hideMutedChannels:!1,notifications:{mute:!1}}};t.addCommunity(He),t.addChannel({communityId:u.uuid,channel:{id:nanoid(),name:"Home",creatorDid:me,sourcePerspective:u.uuid,hasNewMessages:!1,createdAt:new Date().toISOString(),feedType:FeedType.Signaled,notifications:{mute:!1}}})}}catch(a){throw n.showDangerToast({message:a.message}),new Error(a)}};async function deleteCommunityLinks(e){const t=await hb$1(),n=t.perspective.queryLinks(e,new lib.exports.LinkQuery({source:SELF,predicate:FLUX_GROUP_NAME})),r=t.perspective.queryLinks(e,new lib.exports.LinkQuery({source:SELF,predicate:FLUX_GROUP_DESCRIPTION})),o=t.perspective.queryLinks(e,new lib.exports.LinkQuery({source:SELF,predicate:FLUX_GROUP_IMAGE})),a=t.perspective.queryLinks(e,new lib.exports.LinkQuery({source:SELF,predicate:FLUX_GROUP_THUMBNAIL})),u=(await Promise.all([n,r,o,a])).flat();for(const l of u)await t.perspective.removeLink(e,l)}async function updateCommunity({communityId:e,name:t,description:n,image:r,thumbnail:o}){const a=useDataStore(),s=useAppStore(),u=await hb$1(),l=a.getCommunity(e);await deleteCommunityLinks(e);try{let c=r,m=o;if(r){const Ne=r?await resizeImage(dataURItoBlob(r),100):void 0,He=r?await blobToDataURL(Ne):void 0;c=await u.expression.create(r,NOTE_IPFS_EXPRESSION_OFFICIAL),m=await u.expression.create(He,NOTE_IPFS_EXPRESSION_OFFICIAL);const Ye=await u.perspective.addLink(e,{source:SELF,target:c,predicate:FLUX_GROUP_IMAGE}),Je=await u.perspective.addLink(e,{source:SELF,target:m,predicate:FLUX_GROUP_THUMBNAIL})}const me=await u.perspective.addLink(e,{source:SELF,target:t||"-",predicate:FLUX_GROUP_NAME}),xe=await u.perspective.addLink(e,{source:SELF,target:n||"-",predicate:FLUX_GROUP_DESCRIPTION});a.updateCommunityMetadata({communityId:l.neighbourhood.perspective.uuid,name:t||l.neighbourhood.name,description:n||l.neighbourhood.description,image:c||l.neighbourhood.image||"",thumbnail:m||l.neighbourhood.thumbnail||""})}catch(c){throw s.showDangerToast({message:c.message}),new Error(c)}}var showMessageNotification=async({router:e,route:t,perspectiveUuid:n,authorDid:r,message:o})=>{const a=useDataStore(),s=useUserStore(),{channelId:u,communityId:l}=t.params,c=o.replace(/(\s*<.*?>\s*)+/g," "),m=a.getCommunity(n),me=a.getChannel(n,"Home"),xe=document.hasFocus(),Ne=s.getUser;if(!xe&&!(me!=null&&me.notifications.mute)&&!(m!=null&&m.state.notifications.mute)||Ne.agent.did!==r&&((m==null?void 0:m.neighbourhood.perspective.uuid)===l?(me==null?void 0:me.id)!==u:!0)&&!(me!=null&&me.notifications.mute)&&!(m!=null&&m.state.notifications.mute)){const He=o.includes(Ne.agent.did.replace("did:key:",""));let Ye="",Je="";if(He){const vn=await getProfile(r);Ye=`${vn?vn.username:"Someone"} mentioned you in #${me==null?void 0:me.name}}`,Je=c}else Ye=`New message in ${m==null?void 0:m.neighbourhood.name}`,Je=`#${me==null?void 0:me.name}: ${c}`;if(Notification.permission==="granted"&&await Notification.requestPermission()==="granted"){const La=new Notification(Ye,{body:Je,icon:"/assets/images/logo.png"});return La.onclick=()=>{window.focus(),e.push({name:"channel",params:{communityId:m.neighbourhood.perspective.uuid,channelId:me.id}}),La.close()},La}}};async function fetchNeighbourhoodMembers(e){const t=useDataStore(),o=(await(await hb$1()).perspective.queryProlog(e,`triple("${SELF}", "${MEMBER}", M).`)).map(a=>{const s=a.M;return s.includes("://")?s.split("://")[1]:s});for(const a of o)t.setNeighbourhoodMember({member:a,perspectiveUuid:e})}var fetchNeighbourhoodChannels=async e=>{const t=useDataStore();try{const n=await hb$1(),r=t.getCommunity(e),o=await n.perspective.queryProlog(r.neighbourhood.perspective.uuid,`triple("${SELF}", "${CHANNEL}", C).`);for(let a=0;a<o.length;a++){const s=o[a].C;t.getChannel(r.neighbourhood.perspective.uuid,s)||(console.log("Found channel link not in local state, adding...",o[a]),t.addChannel({communityId:r.state.perspectiveUuid,channel:{id:s,name:s,creatorDid:o[a].author,sourcePerspective:r.state.perspectiveUuid,hasNewMessages:!1,createdAt:new Date().toISOString(),feedType:FeedType.Signaled,notifications:{mute:!1}}}))}}catch(n){throw new Error(n)}};async function removeCommunity({communityId:e}){const t=useDataStore(),n=useAppStore();try{await(await hb$1()).perspective.remove(e),delete t.communities[e],delete t.neighbourhoods[e];for(const o of Object.values(t.channels))o.sourcePerspective===e&&delete t.channels[o.id]}catch(r){throw n.showDangerToast({message:r.message}),new Error(r)}}var actions$1={createChannel,createCommunity,joinCommunity,updateCommunity,showMessageNotification,fetchNeighbourhoodMembers,fetchNeighbourhoodMetadata,fetchNeighbourhoodChannels,removeCommunity},getters$1={getNeighbourhood:e=>t=>e.neighbourhoods[t],getCommunity:e=>t=>{const n=e.neighbourhoods[t],r=e.communities[t];return{neighbourhood:n,state:r}},getCommunities(e){const t=[];for(const n of Object.values(e.communities))t.push({neighbourhood:e.neighbourhoods[n.perspectiveUuid],state:n});return t},getChannels(e){const t=[];for(const n of Object.values(e.channels))t.push(n);return t},getCommunityNeighbourhoods(e){return Object.values(e.communities).map(t=>e.neighbourhoods[t.perspectiveUuid])},getChannelByNeighbourhoodUrl:e=>t=>{const n=Object.values(e.neighbourhoods).filter(o=>o.neighbourhoodUrl==t).pop();return n==null?null:e.channels[n==null?void 0:n.perspective.uuid]},getCommunityState:e=>t=>e.communities[t],getChannel:e=>(t,n)=>Object.values(e.channels).find(o=>o.sourcePerspective===t&&o.name===n),getChannelNeighbourhoods:e=>t=>Object.values(e.neighbourhoods[t].linkedPerspectives).map(n=>e.neighbourhoods[n]),getChannelStates:e=>t=>Object.values(e.channels).filter(n=>n.sourcePerspective===t),getCommunityMembers:e=>t=>e.communities[t]?e.neighbourhoods[t].members:[]};const useDataStore=defineStore("data",{state(){return{communities:{},neighbourhoods:{},channels:{}}},getters:getters$1,actions:{...mutations$1,...actions$1}});async function updateGlobalTheme$1(e){const t=useDataStore(),n=useAppStore();if(e==="global")setTheme(n.globalTheme),n.setCurrentTheme("global");else{const r=t.getCommunity(e).state.theme;setTheme(r),n.setCurrentTheme(e)}}async function updateCommunityTheme(e){const t=useDataStore(),r=useAppStore().currentTheme===e.communityId,o={...t.getCommunity(e.communityId).state.theme,...e.theme};r&&setTheme(o),t.setCommunityTheme({communityId:e.communityId,theme:o})}async function updateGlobalTheme(e){const t=useAppStore(),n=t.currentTheme==="global",r={...t.globalTheme,...e};n&&setTheme(r),t.setGlobalTheme(r)}var actions={changeCurrentTheme:updateGlobalTheme$1,updateCommunityTheme,updateGlobalTheme},getters={getApplicationStartTime(e){return e.applicationStartTime},getWindowState(e){return e.windowState}};const useAppStore=defineStore("app",{state(){return{updateState:"not-available",windowState:"visible",applicationStartTime:new Date,modals:{showCreateCommunity:!1,showEditCommunity:!1,showCommunityMembers:!1,showCreateChannel:!1,showEditProfile:!1,showSettings:!1,showCommunitySettings:!1,showInviteCode:!1,showDisclaimer:!0,showCode:!1},showSidebar:!0,showMainSidebar:!0,sidebarWidth:330,showGlobalLoading:!1,globalTheme:{fontSize:"md",fontFamily:"DM Sans",name:"default",hue:270,saturation:60},currentTheme:"global",toast:{variant:"",message:"",open:!1},globalError:{show:!1,message:""}}},getters,actions:{...mutations$2,...actions}});/*!
  * vue-router v4.1.5
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */const isBrowser=typeof window!="undefined";function isESModule(e){return e.__esModule||e[Symbol.toStringTag]==="Module"}const assign=Object.assign;function applyToParams(e,t){const n={};for(const r in t){const o=t[r];n[r]=isArray(o)?o.map(e):e(o)}return n}const noop=()=>{},isArray=Array.isArray,TRAILING_SLASH_RE=/\/$/,removeTrailingSlash=e=>e.replace(TRAILING_SLASH_RE,"");function parseURL(e,t,n="/"){let r,o={},a="",s="";const u=t.indexOf("#");let l=t.indexOf("?");return u<l&&u>=0&&(l=-1),l>-1&&(r=t.slice(0,l),a=t.slice(l+1,u>-1?u:t.length),o=e(a)),u>-1&&(r=r||t.slice(0,u),s=t.slice(u,t.length)),r=resolveRelativePath(r!=null?r:t,n),{fullPath:r+(a&&"?")+a+s,path:r,query:o,hash:s}}function stringifyURL(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function stripBase(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function isSameRouteLocation(e,t,n){const r=t.matched.length-1,o=n.matched.length-1;return r>-1&&r===o&&isSameRouteRecord(t.matched[r],n.matched[o])&&isSameRouteLocationParams(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function isSameRouteRecord(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function isSameRouteLocationParams(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!isSameRouteLocationParamsValue(e[n],t[n]))return!1;return!0}function isSameRouteLocationParamsValue(e,t){return isArray(e)?isEquivalentArray(e,t):isArray(t)?isEquivalentArray(t,e):e===t}function isEquivalentArray(e,t){return isArray(t)?e.length===t.length&&e.every((n,r)=>n===t[r]):e.length===1&&e[0]===t}function resolveRelativePath(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),r=e.split("/");let o=n.length-1,a,s;for(a=0;a<r.length;a++)if(s=r[a],s!==".")if(s==="..")o>1&&o--;else break;return n.slice(0,o).join("/")+"/"+r.slice(a-(a===r.length?1:0)).join("/")}var NavigationType;(function(e){e.pop="pop",e.push="push"})(NavigationType||(NavigationType={}));var NavigationDirection;(function(e){e.back="back",e.forward="forward",e.unknown=""})(NavigationDirection||(NavigationDirection={}));function normalizeBase(e){if(!e)if(isBrowser){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),removeTrailingSlash(e)}const BEFORE_HASH_RE=/^[^#]+#/;function createHref(e,t){return e.replace(BEFORE_HASH_RE,"#")+t}function getElementPosition(e,t){const n=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect();return{behavior:t.behavior,left:r.left-n.left-(t.left||0),top:r.top-n.top-(t.top||0)}}const computeScrollPosition=()=>({left:window.pageXOffset,top:window.pageYOffset});function scrollToPosition(e){let t;if("el"in e){const n=e.el,r=typeof n=="string"&&n.startsWith("#"),o=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!o)return;t=getElementPosition(o,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.pageXOffset,t.top!=null?t.top:window.pageYOffset)}function getScrollKey(e,t){return(history.state?history.state.position-t:-1)+e}const scrollPositions=new Map;function saveScrollPosition(e,t){scrollPositions.set(e,t)}function getSavedScrollPosition(e){const t=scrollPositions.get(e);return scrollPositions.delete(e),t}let createBaseLocation=()=>location.protocol+"//"+location.host;function createCurrentLocation(e,t){const{pathname:n,search:r,hash:o}=t,a=e.indexOf("#");if(a>-1){let u=o.includes(e.slice(a))?e.slice(a).length:1,l=o.slice(u);return l[0]!=="/"&&(l="/"+l),stripBase(l,"")}return stripBase(n,e)+r+o}function useHistoryListeners(e,t,n,r){let o=[],a=[],s=null;const u=({state:xe})=>{const Ne=createCurrentLocation(e,location),He=n.value,Ye=t.value;let Je=0;if(xe){if(n.value=Ne,t.value=xe,s&&s===He){s=null;return}Je=Ye?xe.position-Ye.position:0}else r(Ne);o.forEach(vn=>{vn(n.value,He,{delta:Je,type:NavigationType.pop,direction:Je?Je>0?NavigationDirection.forward:NavigationDirection.back:NavigationDirection.unknown})})};function l(){s=n.value}function c(xe){o.push(xe);const Ne=()=>{const He=o.indexOf(xe);He>-1&&o.splice(He,1)};return a.push(Ne),Ne}function m(){const{history:xe}=window;!xe.state||xe.replaceState(assign({},xe.state,{scroll:computeScrollPosition()}),"")}function me(){for(const xe of a)xe();a=[],window.removeEventListener("popstate",u),window.removeEventListener("beforeunload",m)}return window.addEventListener("popstate",u),window.addEventListener("beforeunload",m),{pauseListeners:l,listen:c,destroy:me}}function buildState(e,t,n,r=!1,o=!1){return{back:e,current:t,forward:n,replaced:r,position:window.history.length,scroll:o?computeScrollPosition():null}}function useHistoryStateNavigation(e){const{history:t,location:n}=window,r={value:createCurrentLocation(e,n)},o={value:t.state};o.value||a(r.value,{back:null,current:r.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function a(l,c,m){const me=e.indexOf("#"),xe=me>-1?(n.host&&document.querySelector("base")?e:e.slice(me))+l:createBaseLocation()+e+l;try{t[m?"replaceState":"pushState"](c,"",xe),o.value=c}catch(Ne){console.error(Ne),n[m?"replace":"assign"](xe)}}function s(l,c){const m=assign({},t.state,buildState(o.value.back,l,o.value.forward,!0),c,{position:o.value.position});a(l,m,!0),r.value=l}function u(l,c){const m=assign({},o.value,t.state,{forward:l,scroll:computeScrollPosition()});a(m.current,m,!0);const me=assign({},buildState(r.value,l,null),{position:m.position+1},c);a(l,me,!1),r.value=l}return{location:r,state:o,push:u,replace:s}}function createWebHistory(e){e=normalizeBase(e);const t=useHistoryStateNavigation(e),n=useHistoryListeners(e,t.state,t.location,t.replace);function r(a,s=!0){s||n.pauseListeners(),history.go(a)}const o=assign({location:"",base:e,go:r,createHref:createHref.bind(null,e)},t,n);return Object.defineProperty(o,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(o,"state",{enumerable:!0,get:()=>t.state.value}),o}function createWebHashHistory(e){return e=location.host?e||location.pathname+location.search:"",e.includes("#")||(e+="#"),createWebHistory(e)}function isRouteLocation(e){return typeof e=="string"||e&&typeof e=="object"}function isRouteName(e){return typeof e=="string"||typeof e=="symbol"}const START_LOCATION_NORMALIZED={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},NavigationFailureSymbol=Symbol("");var NavigationFailureType;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(NavigationFailureType||(NavigationFailureType={}));function createRouterError(e,t){return assign(new Error,{type:e,[NavigationFailureSymbol]:!0},t)}function isNavigationFailure(e,t){return e instanceof Error&&NavigationFailureSymbol in e&&(t==null||!!(e.type&t))}const BASE_PARAM_PATTERN="[^/]+?",BASE_PATH_PARSER_OPTIONS={sensitive:!1,strict:!1,start:!0,end:!0},REGEX_CHARS_RE=/[.+*?^${}()[\]/\\]/g;function tokensToParser(e,t){const n=assign({},BASE_PATH_PARSER_OPTIONS,t),r=[];let o=n.start?"^":"";const a=[];for(const c of e){const m=c.length?[]:[90];n.strict&&!c.length&&(o+="/");for(let me=0;me<c.length;me++){const xe=c[me];let Ne=40+(n.sensitive?.25:0);if(xe.type===0)me||(o+="/"),o+=xe.value.replace(REGEX_CHARS_RE,"\\$&"),Ne+=40;else if(xe.type===1){const{value:He,repeatable:Ye,optional:Je,regexp:vn}=xe;a.push({name:He,repeatable:Ye,optional:Je});const La=vn||BASE_PARAM_PATTERN;if(La!==BASE_PARAM_PATTERN){Ne+=10;try{new RegExp(`(${La})`)}catch(Zr){throw new Error(`Invalid custom RegExp for param "${He}" (${La}): `+Zr.message)}}let sr=Ye?`((?:${La})(?:/(?:${La}))*)`:`(${La})`;me||(sr=Je&&c.length<2?`(?:/${sr})`:"/"+sr),Je&&(sr+="?"),o+=sr,Ne+=20,Je&&(Ne+=-8),Ye&&(Ne+=-20),La===".*"&&(Ne+=-50)}m.push(Ne)}r.push(m)}if(n.strict&&n.end){const c=r.length-1;r[c][r[c].length-1]+=.7000000000000001}n.strict||(o+="/?"),n.end?o+="$":n.strict&&(o+="(?:/|$)");const s=new RegExp(o,n.sensitive?"":"i");function u(c){const m=c.match(s),me={};if(!m)return null;for(let xe=1;xe<m.length;xe++){const Ne=m[xe]||"",He=a[xe-1];me[He.name]=Ne&&He.repeatable?Ne.split("/"):Ne}return me}function l(c){let m="",me=!1;for(const xe of e){(!me||!m.endsWith("/"))&&(m+="/"),me=!1;for(const Ne of xe)if(Ne.type===0)m+=Ne.value;else if(Ne.type===1){const{value:He,repeatable:Ye,optional:Je}=Ne,vn=He in c?c[He]:"";if(isArray(vn)&&!Ye)throw new Error(`Provided param "${He}" is an array but it is not repeatable (* or + modifiers)`);const La=isArray(vn)?vn.join("/"):vn;if(!La)if(Je)xe.length<2&&(m.endsWith("/")?m=m.slice(0,-1):me=!0);else throw new Error(`Missing required param "${He}"`);m+=La}}return m||"/"}return{re:s,score:r,keys:a,parse:u,stringify:l}}function compareScoreArray(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=t[n]-e[n];if(r)return r;n++}return e.length<t.length?e.length===1&&e[0]===40+40?-1:1:e.length>t.length?t.length===1&&t[0]===40+40?1:-1:0}function comparePathParserScore(e,t){let n=0;const r=e.score,o=t.score;for(;n<r.length&&n<o.length;){const a=compareScoreArray(r[n],o[n]);if(a)return a;n++}if(Math.abs(o.length-r.length)===1){if(isLastScoreNegative(r))return 1;if(isLastScoreNegative(o))return-1}return o.length-r.length}function isLastScoreNegative(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const ROOT_TOKEN={type:0,value:""},VALID_PARAM_RE=/[a-zA-Z0-9_]/;function tokenizePath(e){if(!e)return[[]];if(e==="/")return[[ROOT_TOKEN]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(Ne){throw new Error(`ERR (${n})/"${c}": ${Ne}`)}let n=0,r=n;const o=[];let a;function s(){a&&o.push(a),a=[]}let u=0,l,c="",m="";function me(){!c||(n===0?a.push({type:0,value:c}):n===1||n===2||n===3?(a.length>1&&(l==="*"||l==="+")&&t(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),a.push({type:1,value:c,regexp:m,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):t("Invalid state to consume buffer"),c="")}function xe(){c+=l}for(;u<e.length;){if(l=e[u++],l==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:l==="/"?(c&&me(),s()):l===":"?(me(),n=1):xe();break;case 4:xe(),n=r;break;case 1:l==="("?n=2:VALID_PARAM_RE.test(l)?xe():(me(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&u--);break;case 2:l===")"?m[m.length-1]=="\\"?m=m.slice(0,-1)+l:n=3:m+=l;break;case 3:me(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&u--,m="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${c}"`),me(),s(),o}function createRouteRecordMatcher(e,t,n){const r=tokensToParser(tokenizePath(e.path),n),o=assign(r,{record:e,parent:t,children:[],alias:[]});return t&&!o.record.aliasOf==!t.record.aliasOf&&t.children.push(o),o}function createRouterMatcher(e,t){const n=[],r=new Map;t=mergeOptions({strict:!1,end:!0,sensitive:!1},t);function o(m){return r.get(m)}function a(m,me,xe){const Ne=!xe,He=normalizeRouteRecord(m);He.aliasOf=xe&&xe.record;const Ye=mergeOptions(t,m),Je=[He];if("alias"in m){const sr=typeof m.alias=="string"?[m.alias]:m.alias;for(const Zr of sr)Je.push(assign({},He,{components:xe?xe.record.components:He.components,path:Zr,aliasOf:xe?xe.record:He}))}let vn,La;for(const sr of Je){const{path:Zr}=sr;if(me&&Zr[0]!=="/"){const zs=me.record.path,za=zs[zs.length-1]==="/"?"":"/";sr.path=me.record.path+(Zr&&za+Zr)}if(vn=createRouteRecordMatcher(sr,me,Ye),xe?xe.alias.push(vn):(La=La||vn,La!==vn&&La.alias.push(vn),Ne&&m.name&&!isAliasRecord(vn)&&s(m.name)),He.children){const zs=He.children;for(let za=0;za<zs.length;za++)a(zs[za],vn,xe&&xe.children[za])}xe=xe||vn,l(vn)}return La?()=>{s(La)}:noop}function s(m){if(isRouteName(m)){const me=r.get(m);me&&(r.delete(m),n.splice(n.indexOf(me),1),me.children.forEach(s),me.alias.forEach(s))}else{const me=n.indexOf(m);me>-1&&(n.splice(me,1),m.record.name&&r.delete(m.record.name),m.children.forEach(s),m.alias.forEach(s))}}function u(){return n}function l(m){let me=0;for(;me<n.length&&comparePathParserScore(m,n[me])>=0&&(m.record.path!==n[me].record.path||!isRecordChildOf(m,n[me]));)me++;n.splice(me,0,m),m.record.name&&!isAliasRecord(m)&&r.set(m.record.name,m)}function c(m,me){let xe,Ne={},He,Ye;if("name"in m&&m.name){if(xe=r.get(m.name),!xe)throw createRouterError(1,{location:m});Ye=xe.record.name,Ne=assign(paramsFromLocation(me.params,xe.keys.filter(La=>!La.optional).map(La=>La.name)),m.params&&paramsFromLocation(m.params,xe.keys.map(La=>La.name))),He=xe.stringify(Ne)}else if("path"in m)He=m.path,xe=n.find(La=>La.re.test(He)),xe&&(Ne=xe.parse(He),Ye=xe.record.name);else{if(xe=me.name?r.get(me.name):n.find(La=>La.re.test(me.path)),!xe)throw createRouterError(1,{location:m,currentLocation:me});Ye=xe.record.name,Ne=assign({},me.params,m.params),He=xe.stringify(Ne)}const Je=[];let vn=xe;for(;vn;)Je.unshift(vn.record),vn=vn.parent;return{name:Ye,path:He,params:Ne,matched:Je,meta:mergeMetaFields(Je)}}return e.forEach(m=>a(m)),{addRoute:a,resolve:c,removeRoute:s,getRoutes:u,getRecordMatcher:o}}function paramsFromLocation(e,t){const n={};for(const r of t)r in e&&(n[r]=e[r]);return n}function normalizeRouteRecord(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:normalizeRecordProps(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}}}function normalizeRecordProps(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const r in e.components)t[r]=typeof n=="boolean"?n:n[r];return t}function isAliasRecord(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function mergeMetaFields(e){return e.reduce((t,n)=>assign(t,n.meta),{})}function mergeOptions(e,t){const n={};for(const r in e)n[r]=r in t?t[r]:e[r];return n}function isRecordChildOf(e,t){return t.children.some(n=>n===e||isRecordChildOf(e,n))}const HASH_RE=/#/g,AMPERSAND_RE=/&/g,SLASH_RE=/\//g,EQUAL_RE=/=/g,IM_RE=/\?/g,PLUS_RE=/\+/g,ENC_BRACKET_OPEN_RE=/%5B/g,ENC_BRACKET_CLOSE_RE=/%5D/g,ENC_CARET_RE=/%5E/g,ENC_BACKTICK_RE=/%60/g,ENC_CURLY_OPEN_RE=/%7B/g,ENC_PIPE_RE=/%7C/g,ENC_CURLY_CLOSE_RE=/%7D/g,ENC_SPACE_RE=/%20/g;function commonEncode(e){return encodeURI(""+e).replace(ENC_PIPE_RE,"|").replace(ENC_BRACKET_OPEN_RE,"[").replace(ENC_BRACKET_CLOSE_RE,"]")}function encodeHash(e){return commonEncode(e).replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryValue(e){return commonEncode(e).replace(PLUS_RE,"%2B").replace(ENC_SPACE_RE,"+").replace(HASH_RE,"%23").replace(AMPERSAND_RE,"%26").replace(ENC_BACKTICK_RE,"`").replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryKey(e){return encodeQueryValue(e).replace(EQUAL_RE,"%3D")}function encodePath(e){return commonEncode(e).replace(HASH_RE,"%23").replace(IM_RE,"%3F")}function encodeParam(e){return e==null?"":encodePath(e).replace(SLASH_RE,"%2F")}function decode(e){try{return decodeURIComponent(""+e)}catch{}return""+e}function parseQuery(e){const t={};if(e===""||e==="?")return t;const r=(e[0]==="?"?e.slice(1):e).split("&");for(let o=0;o<r.length;++o){const a=r[o].replace(PLUS_RE," "),s=a.indexOf("="),u=decode(s<0?a:a.slice(0,s)),l=s<0?null:decode(a.slice(s+1));if(u in t){let c=t[u];isArray(c)||(c=t[u]=[c]),c.push(l)}else t[u]=l}return t}function stringifyQuery(e){let t="";for(let n in e){const r=e[n];if(n=encodeQueryKey(n),r==null){r!==void 0&&(t+=(t.length?"&":"")+n);continue}(isArray(r)?r.map(a=>a&&encodeQueryValue(a)):[r&&encodeQueryValue(r)]).forEach(a=>{a!==void 0&&(t+=(t.length?"&":"")+n,a!=null&&(t+="="+a))})}return t}function normalizeQuery(e){const t={};for(const n in e){const r=e[n];r!==void 0&&(t[n]=isArray(r)?r.map(o=>o==null?null:""+o):r==null?r:""+r)}return t}const matchedRouteKey=Symbol(""),viewDepthKey=Symbol(""),routerKey=Symbol(""),routeLocationKey=Symbol(""),routerViewLocationKey=Symbol("");function useCallbacks(){let e=[];function t(r){return e.push(r),()=>{const o=e.indexOf(r);o>-1&&e.splice(o,1)}}function n(){e=[]}return{add:t,list:()=>e,reset:n}}function guardToPromiseFn(e,t,n,r,o){const a=r&&(r.enterCallbacks[o]=r.enterCallbacks[o]||[]);return()=>new Promise((s,u)=>{const l=me=>{me===!1?u(createRouterError(4,{from:n,to:t})):me instanceof Error?u(me):isRouteLocation(me)?u(createRouterError(2,{from:t,to:me})):(a&&r.enterCallbacks[o]===a&&typeof me=="function"&&a.push(me),s())},c=e.call(r&&r.instances[o],t,n,l);let m=Promise.resolve(c);e.length<3&&(m=m.then(l)),m.catch(me=>u(me))})}function extractComponentsGuards(e,t,n,r){const o=[];for(const a of e)for(const s in a.components){let u=a.components[s];if(!(t!=="beforeRouteEnter"&&!a.instances[s]))if(isRouteComponent(u)){const c=(u.__vccOpts||u)[t];c&&o.push(guardToPromiseFn(c,n,r,a,s))}else{let l=u();o.push(()=>l.then(c=>{if(!c)return Promise.reject(new Error(`Couldn't resolve component "${s}" at "${a.path}"`));const m=isESModule(c)?c.default:c;a.components[s]=m;const xe=(m.__vccOpts||m)[t];return xe&&guardToPromiseFn(xe,n,r,a,s)()}))}}return o}function isRouteComponent(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function useLink(e){const t=inject(routerKey),n=inject(routeLocationKey),r=computed(()=>t.resolve(unref(e.to))),o=computed(()=>{const{matched:l}=r.value,{length:c}=l,m=l[c-1],me=n.matched;if(!m||!me.length)return-1;const xe=me.findIndex(isSameRouteRecord.bind(null,m));if(xe>-1)return xe;const Ne=getOriginalPath(l[c-2]);return c>1&&getOriginalPath(m)===Ne&&me[me.length-1].path!==Ne?me.findIndex(isSameRouteRecord.bind(null,l[c-2])):xe}),a=computed(()=>o.value>-1&&includesParams(n.params,r.value.params)),s=computed(()=>o.value>-1&&o.value===n.matched.length-1&&isSameRouteLocationParams(n.params,r.value.params));function u(l={}){return guardEvent(l)?t[unref(e.replace)?"replace":"push"](unref(e.to)).catch(noop):Promise.resolve()}return{route:r,href:computed(()=>r.value.href),isActive:a,isExactActive:s,navigate:u}}const RouterLinkImpl=defineComponent({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink,setup(e,{slots:t}){const n=reactive(useLink(e)),{options:r}=inject(routerKey),o=computed(()=>({[getLinkClass(e.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[getLinkClass(e.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const a=t.default&&t.default(n);return e.custom?a:h$1("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:o.value},a)}}}),RouterLink=RouterLinkImpl;function guardEvent(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function includesParams(e,t){for(const n in t){const r=t[n],o=e[n];if(typeof r=="string"){if(r!==o)return!1}else if(!isArray(o)||o.length!==r.length||r.some((a,s)=>a!==o[s]))return!1}return!0}function getOriginalPath(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const getLinkClass=(e,t,n)=>e!=null?e:t!=null?t:n,RouterViewImpl=defineComponent({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const r=inject(routerViewLocationKey),o=computed(()=>e.route||r.value),a=inject(viewDepthKey,0),s=computed(()=>{let c=unref(a);const{matched:m}=o.value;let me;for(;(me=m[c])&&!me.components;)c++;return c}),u=computed(()=>o.value.matched[s.value]);provide(viewDepthKey,computed(()=>s.value+1)),provide(matchedRouteKey,u),provide(routerViewLocationKey,o);const l=ref();return watch(()=>[l.value,u.value,e.name],([c,m,me],[xe,Ne,He])=>{m&&(m.instances[me]=c,Ne&&Ne!==m&&c&&c===xe&&(m.leaveGuards.size||(m.leaveGuards=Ne.leaveGuards),m.updateGuards.size||(m.updateGuards=Ne.updateGuards))),c&&m&&(!Ne||!isSameRouteRecord(m,Ne)||!xe)&&(m.enterCallbacks[me]||[]).forEach(Ye=>Ye(c))},{flush:"post"}),()=>{const c=o.value,m=e.name,me=u.value,xe=me&&me.components[m];if(!xe)return normalizeSlot(n.default,{Component:xe,route:c});const Ne=me.props[m],He=Ne?Ne===!0?c.params:typeof Ne=="function"?Ne(c):Ne:null,Je=h$1(xe,assign({},He,t,{onVnodeUnmounted:vn=>{vn.component.isUnmounted&&(me.instances[m]=null)},ref:l}));return normalizeSlot(n.default,{Component:Je,route:c})||Je}}});function normalizeSlot(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const RouterView=RouterViewImpl;function createRouter(e){const t=createRouterMatcher(e.routes,e),n=e.parseQuery||parseQuery,r=e.stringifyQuery||stringifyQuery,o=e.history,a=useCallbacks(),s=useCallbacks(),u=useCallbacks(),l=shallowRef(START_LOCATION_NORMALIZED);let c=START_LOCATION_NORMALIZED;isBrowser&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const m=applyToParams.bind(null,Rb=>""+Rb),me=applyToParams.bind(null,encodeParam),xe=applyToParams.bind(null,decode);function Ne(Rb,i2){let s2,E2;return isRouteName(Rb)?(s2=t.getRecordMatcher(Rb),E2=i2):E2=Rb,t.addRoute(E2,s2)}function He(Rb){const i2=t.getRecordMatcher(Rb);i2&&t.removeRoute(i2)}function Ye(){return t.getRoutes().map(Rb=>Rb.record)}function Je(Rb){return!!t.getRecordMatcher(Rb)}function vn(Rb,i2){if(i2=assign({},i2||l.value),typeof Rb=="string"){const k_=parseURL(n,Rb,i2.path),Vb=t.resolve({path:k_.path},i2),Qb=o.createHref(k_.fullPath);return assign(k_,Vb,{params:xe(Vb.params),hash:decode(k_.hash),redirectedFrom:void 0,href:Qb})}let s2;if("path"in Rb)s2=assign({},Rb,{path:parseURL(n,Rb.path,i2.path).path});else{const k_=assign({},Rb.params);for(const Vb in k_)k_[Vb]==null&&delete k_[Vb];s2=assign({},Rb,{params:me(Rb.params)}),i2.params=me(i2.params)}const E2=t.resolve(s2,i2),L2=Rb.hash||"";E2.params=m(xe(E2.params));const T2=stringifyURL(r,assign({},Rb,{hash:encodeHash(L2),path:E2.path})),A2=o.createHref(T2);return assign({fullPath:T2,hash:L2,query:r===stringifyQuery?normalizeQuery(Rb.query):Rb.query||{}},E2,{redirectedFrom:void 0,href:A2})}function La(Rb){return typeof Rb=="string"?parseURL(n,Rb,l.value.path):assign({},Rb)}function sr(Rb,i2){if(c!==Rb)return createRouterError(8,{from:i2,to:Rb})}function Zr(Rb){return Hs(Rb)}function zs(Rb){return Zr(assign(La(Rb),{replace:!0}))}function za(Rb){const i2=Rb.matched[Rb.matched.length-1];if(i2&&i2.redirect){const{redirect:s2}=i2;let E2=typeof s2=="function"?s2(Rb):s2;return typeof E2=="string"&&(E2=E2.includes("?")||E2.includes("#")?E2=La(E2):{path:E2},E2.params={}),assign({query:Rb.query,hash:Rb.hash,params:"path"in E2?{}:Rb.params},E2)}}function Hs(Rb,i2){const s2=c=vn(Rb),E2=l.value,L2=Rb.state,T2=Rb.force,A2=Rb.replace===!0,k_=za(s2);if(k_)return Hs(assign(La(k_),{state:typeof k_=="object"?assign({},L2,k_.state):L2,force:T2,replace:A2}),i2||s2);const Vb=s2;Vb.redirectedFrom=i2;let Qb;return!T2&&isSameRouteLocation(r,E2,s2)&&(Qb=createRouterError(16,{to:Vb,from:E2}),Hb(E2,E2,!0,!1)),(Qb?Promise.resolve(Qb):Ty(Vb,E2)).catch(zb=>isNavigationFailure(zb)?isNavigationFailure(zb,2)?zb:e0(zb):Ay(zb,Vb,E2)).then(zb=>{if(zb){if(isNavigationFailure(zb,2))return Hs(assign({replace:A2},La(zb.to),{state:typeof zb.to=="object"?assign({},L2,zb.to.state):L2,force:T2}),i2||Vb)}else zb=xy(Vb,E2,!0,A2,L2);return _y(Vb,E2,zb),zb})}function lc(Rb,i2){const s2=sr(Rb,i2);return s2?Promise.reject(s2):Promise.resolve()}function Ty(Rb,i2){let s2;const[E2,L2,T2]=extractChangingRecords(Rb,i2);s2=extractComponentsGuards(E2.reverse(),"beforeRouteLeave",Rb,i2);for(const k_ of E2)k_.leaveGuards.forEach(Vb=>{s2.push(guardToPromiseFn(Vb,Rb,i2))});const A2=lc.bind(null,Rb,i2);return s2.push(A2),runGuardQueue(s2).then(()=>{s2=[];for(const k_ of a.list())s2.push(guardToPromiseFn(k_,Rb,i2));return s2.push(A2),runGuardQueue(s2)}).then(()=>{s2=extractComponentsGuards(L2,"beforeRouteUpdate",Rb,i2);for(const k_ of L2)k_.updateGuards.forEach(Vb=>{s2.push(guardToPromiseFn(Vb,Rb,i2))});return s2.push(A2),runGuardQueue(s2)}).then(()=>{s2=[];for(const k_ of Rb.matched)if(k_.beforeEnter&&!i2.matched.includes(k_))if(isArray(k_.beforeEnter))for(const Vb of k_.beforeEnter)s2.push(guardToPromiseFn(Vb,Rb,i2));else s2.push(guardToPromiseFn(k_.beforeEnter,Rb,i2));return s2.push(A2),runGuardQueue(s2)}).then(()=>(Rb.matched.forEach(k_=>k_.enterCallbacks={}),s2=extractComponentsGuards(T2,"beforeRouteEnter",Rb,i2),s2.push(A2),runGuardQueue(s2))).then(()=>{s2=[];for(const k_ of s.list())s2.push(guardToPromiseFn(k_,Rb,i2));return s2.push(A2),runGuardQueue(s2)}).catch(k_=>isNavigationFailure(k_,8)?k_:Promise.reject(k_))}function _y(Rb,i2,s2){for(const E2 of u.list())E2(Rb,i2,s2)}function xy(Rb,i2,s2,E2,L2){const T2=sr(Rb,i2);if(T2)return T2;const A2=i2===START_LOCATION_NORMALIZED,k_=isBrowser?history.state:{};s2&&(E2||A2?o.replace(Rb.fullPath,assign({scroll:A2&&k_&&k_.scroll},L2)):o.push(Rb.fullPath,L2)),l.value=Rb,Hb(Rb,i2,s2,A2),e0()}let Bb;function Dy(){Bb||(Bb=o.listen((Rb,i2,s2)=>{if(!y2.listening)return;const E2=vn(Rb),L2=za(E2);if(L2){Hs(assign(L2,{replace:!0}),E2).catch(noop);return}c=E2;const T2=l.value;isBrowser&&saveScrollPosition(getScrollKey(T2.fullPath,s2.delta),computeScrollPosition()),Ty(E2,T2).catch(A2=>isNavigationFailure(A2,12)?A2:isNavigationFailure(A2,2)?(Hs(A2.to,E2).then(k_=>{isNavigationFailure(k_,20)&&!s2.delta&&s2.type===NavigationType.pop&&o.go(-1,!1)}).catch(noop),Promise.reject()):(s2.delta&&o.go(-s2.delta,!1),Ay(A2,E2,T2))).then(A2=>{A2=A2||xy(E2,T2,!1),A2&&(s2.delta&&!isNavigationFailure(A2,8)?o.go(-s2.delta,!1):s2.type===NavigationType.pop&&isNavigationFailure(A2,20)&&o.go(-1,!1)),_y(E2,T2,A2)}).catch(noop)}))}let Bg=useCallbacks(),yy=useCallbacks(),wy;function Ay(Rb,i2,s2){e0(Rb);const E2=yy.list();return E2.length?E2.forEach(L2=>L2(Rb,i2,s2)):console.error(Rb),Promise.reject(Rb)}function $b(){return wy&&l.value!==START_LOCATION_NORMALIZED?Promise.resolve():new Promise((Rb,i2)=>{Bg.add([Rb,i2])})}function e0(Rb){return wy||(wy=!Rb,Dy(),Bg.list().forEach(([i2,s2])=>Rb?s2(Rb):i2()),Bg.reset()),Rb}function Hb(Rb,i2,s2,E2){const{scrollBehavior:L2}=e;if(!isBrowser||!L2)return Promise.resolve();const T2=!s2&&getSavedScrollPosition(getScrollKey(Rb.fullPath,0))||(E2||!s2)&&history.state&&history.state.scroll||null;return nextTick().then(()=>L2(Rb,i2,T2)).then(A2=>A2&&scrollToPosition(A2)).catch(A2=>Ay(A2,Rb,i2))}const Yb=Rb=>o.go(Rb);let Jb;const l2=new Set,y2={currentRoute:l,listening:!0,addRoute:Ne,removeRoute:He,hasRoute:Je,getRoutes:Ye,resolve:vn,options:e,push:Zr,replace:zs,go:Yb,back:()=>Yb(-1),forward:()=>Yb(1),beforeEach:a.add,beforeResolve:s.add,afterEach:u.add,onError:yy.add,isReady:$b,install(Rb){const i2=this;Rb.component("RouterLink",RouterLink),Rb.component("RouterView",RouterView),Rb.config.globalProperties.$router=i2,Object.defineProperty(Rb.config.globalProperties,"$route",{enumerable:!0,get:()=>unref(l)}),isBrowser&&!Jb&&l.value===START_LOCATION_NORMALIZED&&(Jb=!0,Zr(o.location).catch(L2=>{}));const s2={};for(const L2 in START_LOCATION_NORMALIZED)s2[L2]=computed(()=>l.value[L2]);Rb.provide(routerKey,i2),Rb.provide(routeLocationKey,reactive(s2)),Rb.provide(routerViewLocationKey,l);const E2=Rb.unmount;l2.add(Rb),Rb.unmount=function(){l2.delete(Rb),l2.size<1&&(c=START_LOCATION_NORMALIZED,Bb&&Bb(),Bb=null,l.value=START_LOCATION_NORMALIZED,Jb=!1,wy=!1),E2()}}};return y2}function runGuardQueue(e){return e.reduce((t,n)=>t.then(()=>n()),Promise.resolve())}function extractChangingRecords(e,t){const n=[],r=[],o=[],a=Math.max(t.matched.length,e.matched.length);for(let s=0;s<a;s++){const u=t.matched[s];u&&(e.matched.find(c=>isSameRouteRecord(c,u))?r.push(u):n.push(u));const l=e.matched[s];l&&(t.matched.find(c=>isSameRouteRecord(c,l))||o.push(l))}return[n,r,o]}function useRouter(){return inject(routerKey)}function useRoute(){return inject(routeLocationKey)}function sleep(e){return new Promise(t=>setTimeout(t,e))}async function retry(e,{defaultValue:t=null,count:n=50,sleepDuration:r=200}){return new Promise(async(o,a)=>{const s=r*n;await sleep(r);try{const u=setTimeout(()=>{o(t)},s),l=await e();clearTimeout(u),l||(n>0&&o(await retry(e,{count:n-1})),o(t)),o(l)}catch{n>0&&o(await retry(e,{count:n-1})),o(t)}})}async function buildCommunity(e){var s,u;const n=useDataStore().getCommunity(e.uuid);let r={perspectiveUuid:e.uuid,theme:{fontSize:"md",fontFamily:"DM Sans",name:"default",hue:270,saturation:60},useLocalTheme:!1,currentChannelId:null,hideMutedChannels:!1,hasNewMessages:!1,collapseChannelList:!1,notifications:{mute:!1}};n&&n.state&&(r=n.state);const o=getMetaFromNeighbourhood((u=(s=e.neighbourhood)==null?void 0:s.meta)==null?void 0:u.links),a=await getGroupMetadata(e.uuid);return{neighbourhood:{name:(a==null?void 0:a.name)||o.name,creatorDid:o.creatorDid,description:(a==null?void 0:a.description)||o.description,image:(a==null?void 0:a.image)||"",thumbnail:(a==null?void 0:a.thumbnail)||"",perspective:{uuid:e.uuid,name:e.name,sharedUrl:e.sharedUrl,neighbourhood:e.neighbourhood},neighbourhoodUrl:e.sharedUrl,membraneType:MembraneType.Unique,linkedPerspectives:[e.uuid],linkedNeighbourhoods:[e.uuid],members:[o.creatorDid],membraneRoot:e.uuid,createdAt:new Date().toISOString()},state:r}}async function hydrateState(){const e=await hb$1(),t=useDataStore(),n=useUserStore(),r=await e.perspective.all(),o=await e.agent.status(),a=await getProfile(o.did,!0),s=await(await e.perspective.all()).filter(l=>l.name==FLUX_PROXY_PROFILE_NAME);s.length>0&&n.addAgentProfileProxyPerspectiveId(s[0].uuid),n.setUserProfile(a),n.updateAgentStatus(o);const u=t.getCommunities.filter(l=>!r.map(c=>c.uuid).includes(l.state.perspectiveUuid));for(const l of u)t.removeCommunity({communityId:l.state.perspectiveUuid}),t.clearChannels({communityId:l.state.perspectiveUuid});for(const l of r){const c=await e.perspective.queryProlog(l.uuid,`triple("${SELF}", "${CHANNEL}", C).`);if(c&&l.sharedUrl!==void 0){const m=await buildCommunity(l);t.addCommunity(m);const me=[...Object.values(t.channels)];for(const xe of c)me.find(He=>He.name===xe.C&&He.sourcePerspective===l.uuid)||t.addChannel({communityId:l.uuid,channel:{id:nanoid(),name:xe.C,creatorDid:xe.author,sourcePerspective:l.uuid,hasNewMessages:!1,createdAt:new Date().toISOString(),feedType:FeedType.Signaled,notifications:{mute:!1}}})}}}var App_vue_vue_type_style_index_0_lang="",_export_sfc=(e,t)=>{const n=e.__vccOpts||e;for(const[r,o]of t)n[r]=o;return n};const _sfc_main$F=defineComponent({name:"App",setup(){const e=useAppStore(),t=useRouter(),n=useRoute(),r=ref(0),o=useDataStore(),a=useUserStore(),s=ref(!1),u=ref(!1);return{appStore:e,componentKey:r,router:t,route:n,dataStore:o,userStore:a,watcherStarted:s,connected:u}},mounted(){pb$1().then(async()=>{this.connected=!0,this.appStore.setGlobalLoading(!0);const e=await hb$1(),{perspective:t}=await e.agent.me();(t==null?void 0:t.links.find(r=>r.data.source.startsWith("flux://")))?["unlock","connect","signup"].includes(this.router.currentRoute.value.name)&&await this.router.replace("/home"):await this.router.replace("/signup"),this.watcherStarted||(this.appStore.setGlobalLoading(!0),this.startWatcher(),this.watcherStarted=!0,await hydrateState()),this.appStore.setGlobalLoading(!1)})},computed:{modals(){return this.appStore.modals},ui(){return this.appStore.$state}},methods:{...mapActions(useAppStore,["setShowCode"]),async capabilitiesCreated(){this.setShowCode(!1),this.componentKey+=1,this.appStore.setGlobalLoading(!0),this.checkConnectionReroute()},async startWatcher(){const e=await hb$1(),t=this.router,n=this.route,r=[],o=async(s,u)=>{var l;if(console.debug("GOT INCOMING MESSAGE SIGNAL",s,u),s.data.predicate===EXPRESSION)try{const c=await retry(async()=>{const m=await e.expression.getRaw(s.data.target),me=JSON.parse(m);return m?{...me,data:me.data}:null},{});console.debug("FOUND EXPRESSION FOR SIGNAL",c),this.dataStore.showMessageNotification({router:t,route:n,perspectiveUuid:u,authorDid:c.author,message:c.data}),this.dataStore.setHasNewMessages({communityId:u,channelId:u,value:!0})}catch(c){throw new Error(c)}else if(s.data.predicate===MEMBER){const c=s.data.target;console.log("Got new member in signal! Parsed out did: ",c),c&&this.dataStore.setNeighbourhoodMember({member:c,perspectiveUuid:u})}else if(s.data.predicate===CHANNEL&&s.author!=((l=this.userStore.getUser)==null?void 0:l.agent.did))console.log("Joining channel via link signal!"),this.dataStore.addChannel({communityId:u,channel:{id:nanoid(),name:s.data.target,creatorDid:s.author,sourcePerspective:u,hasNewMessages:!1,createdAt:s.timestamp,feedType:FeedType.Signaled,notifications:{mute:!1}}});else if(s.data.predicate===FLUX_GROUP_NAME||s.data.predicate===FLUX_GROUP_DESCRIPTION||s.data.predicate===FLUX_GROUP_IMAGE||s.data.predicate===FLUX_GROUP_THUMBNAIL){console.log("Community update via link signal!");const c=await getGroupMetadata(u);this.dataStore.updateCommunityMetadata({communityId:u,name:c==null?void 0:c.name,description:c==null?void 0:c.description,image:(c==null?void 0:c.image)||"",thumbnail:(c==null?void 0:c.thumbnail)||""})}};watch(this.dataStore.neighbourhoods,async s=>{for(const[u,l]of Object.entries(s))if(r.filter(c=>c==u).length==0){console.log("Starting watcher on perspective",u),r.push(u);const c=await e.perspective.byUUID(u);c&&c.addListener("link-added",m=>{console.debug("Got new link with data",m.data,"and channel",l),o(m,l.perspective.uuid)})}},{immediate:!0,deep:!0}),e.perspective.addPerspectiveAddedListener(async s=>{const u=await e.perspective.byUUID(s.uuid);u.addListener("link-added",l=>{var c;l.data.predicate===CHANNEL&&l.data.target==="Home"&&l.author!=((c=this.userStore.getUser)==null?void 0:c.agent.did)&&(l.data.target==="Home"?buildCommunity(u).then(m=>{this.dataStore.addCommunity(m),this.dataStore.addChannel({communityId:s.uuid,channel:{id:nanoid(),name:"Home",creatorDid:l.author,sourcePerspective:s.uuid,hasNewMessages:!1,createdAt:new Date().toISOString(),feedType:FeedType.Signaled,notifications:{mute:!1}}})}):this.dataStore.addChannel({communityId:s.uuid,channel:{id:nanoid(),name:l.data.target,creatorDid:l.author,sourcePerspective:s.uuid,hasNewMessages:!1,createdAt:new Date().toISOString(),feedType:FeedType.Signaled,notifications:{mute:!1}}}))})}),e.perspective.addPerspectiveRemovedListener(s=>{const u=this.dataStore.getCommunity(s);u&&u.neighbourhood&&this.dataStore.removeCommunity({communityId:s})});const a=await e.perspective.all();for(const s of a)s.addListener("link-added",u=>{u.data.predicate===CHANNEL&&u.data.target==="Home"&&buildCommunity(s).then(l=>{this.dataStore.addCommunity(l),this.dataStore.addChannel({communityId:s.uuid,channel:{id:nanoid(),name:"Home",creatorDid:u.author,sourcePerspective:s.uuid,hasNewMessages:!1,createdAt:new Date().toISOString(),feedType:FeedType.Signaled,notifications:{mute:!1}}})})})}}}),_hoisted_1$E=["open"],_hoisted_2$B={key:1,class:"global-loading"},_hoisted_3$A=createBaseVNode("div",{class:"global-loading__backdrop"},null,-1),_hoisted_4$y=createBaseVNode("div",{class:"global-loading__content"},[createBaseVNode("j-flex",{a:"center",direction:"column",gap:"1000"},[createBaseVNode("j-spinner",{size:"lg"}),createBaseVNode("j-text",{size:"700"},"Please wait...")])],-1),_hoisted_5$q=[_hoisted_3$A,_hoisted_4$y],_hoisted_6$n=createBaseVNode("ad4m-connect",{appName:"Flux",appDesc:"Flux - A SOCIAL TOOLKIT FOR THE NEW INTERNET",appDomain:"https://www.fluxsocial.io/",capabilities:'[{"with":{"domain":"*","pointers":["*"]},"can": ["*"]}]',appiconpath:"https://i.ibb.co/GnqjPJP/icon.png",openonshortcut:""},null,-1);function _sfc_render$F(e,t,n,r,o,a){const s=resolveComponent("router-view");return openBlock(),createElementBlock(Fragment$1,null,[!e.ui.showGlobalLoading&&e.connected?(openBlock(),createBlock(s,{key:e.componentKey})):createCommentVNode("",!0),createBaseVNode("j-modal",{size:"sm",open:e.modals.showCode,onToggle:t[0]||(t[0]=u=>e.setShowCode(u.target.open))},null,40,_hoisted_1$E),e.ui.showGlobalLoading?(openBlock(),createElementBlock("div",_hoisted_2$B,_hoisted_5$q)):createCommentVNode("",!0),_hoisted_6$n],64)}var App=_export_sfc(_sfc_main$F,[["render",_sfc_render$F]]),AppLayout_vue_vue_type_style_index_0_lang="";const _sfc_main$E=defineComponent({setup(){return{appStore:useAppStore(),touchstartX:ref(0),touchendX:ref(0)}},methods:{handleTouchStart(e){this.touchstartX=e.changedTouches[0].screenX,console.log("start",this.touchstartX)},handleTouchEnd(e){this.touchendX=e.changedTouches[0].screenX,console.log("end",this.touchendX),this.checkDirection()},checkDirection(){this.touchendX+70<this.touchstartX&&(this.appStore.showMainSidebar?this.appStore.setMainSidebar(!1):this.appStore.setSidebar(!1)),this.touchendX>this.touchstartX+70&&(!this.appStore.showMainSidebar&&this.appStore.showSidebar?this.appStore.setMainSidebar(!0):this.appStore.setSidebar(!0))}}}),_hoisted_1$D={class:"app-layout__sidebar"},_hoisted_2$A={class:"app-layout__main"};function _sfc_render$E(e,t,n,r,o,a){return openBlock(),createElementBlock("div",{onTouchstart:t[0]||(t[0]=(...s)=>e.handleTouchStart&&e.handleTouchStart(...s)),onTouchend:t[1]||(t[1]=(...s)=>e.handleTouchEnd&&e.handleTouchEnd(...s)),class:normalizeClass(["app-layout",{"app-layout--show-sidebar":e.appStore.showMainSidebar}])},[createBaseVNode("div",_hoisted_1$D,[renderSlot(e.$slots,"sidebar")]),createBaseVNode("main",_hoisted_2$A,[renderSlot(e.$slots,"default")])],34)}var AppLayout=_export_sfc(_sfc_main$E,[["render",_sfc_render$E]]),CommunitiesList_vue_vue_type_style_index_0_scoped_true_lang="";const _sfc_main$D=defineComponent({setup(){const e=useAppStore(),t=useDataStore(),n=ref(t.getCommunityNeighbourhoods.map(r=>({...r,image:null})));return{appStore:e,dataStore:t,communities:n}},async mounted(){const e=async()=>{const t=this.dataStore.getCommunityNeighbourhoods,n=[];for(const r of t){const o={...r},a=new DexieIPFS(o.perspective.uuid);if(o.image){const s=await a.get(o.image);o.image=s}n.push({...o})}this.communities=n};e(),watch(this.dataStore.neighbourhoods,()=>setTimeout(()=>e(),500))},methods:{toggleHideMutedChannels(e){this.dataStore.toggleHideMutedChannels({communityId:e})},muteCommunity(e){this.dataStore.toggleCommunityMute({communityId:e})},removeCommunity(e){this.$router.push({name:"home"}).then(()=>{this.dataStore.removeCommunity({communityId:e})})},handleCommunityClick(e){this.communityIsActive(e)?this.appStore.toggleSidebar:(this.appStore.setSidebar(!0),this.$router.push({name:"community",params:{communityId:e}}))}},computed:{communityIsActive(){return e=>this.$route.params.communityId===e},hasNotification(){return e=>{var t,n;return(n=(t=this.dataStore.getCommunity(e))==null?void 0:t.state)==null?void 0:n.hasNewMessages}},getCommunityState(){return e=>this.dataStore.getCommunityState(e)}}}),_withScopeId$j=e=>(pushScopeId("data-v-100c43a1"),e=e(),popScopeId(),e),_hoisted_1$C={class:"left-nav__communities-list"},_hoisted_2$z=["title"],_hoisted_3$z={event:"contextmenu"},_hoisted_4$x=["selected","online","src","initials","onClick"],_hoisted_5$p={slot:"content"},_hoisted_6$m=["onClick"],_hoisted_7$i=["onClick"],_hoisted_8$g=["name"],_hoisted_9$e=["onClick"],_hoisted_10$e=["name"],_hoisted_11$a={title:"Create or join community"},_hoisted_12$7=_withScopeId$j(()=>createBaseVNode("j-icon",{size:"md",name:"plus"},null,-1)),_hoisted_13$7=[_hoisted_12$7];function _sfc_render$D(e,t,n,r,o,a){return openBlock(),createElementBlock("div",_hoisted_1$C,[(openBlock(!0),createElementBlock(Fragment$1,null,renderList(e.communities,s=>{var u,l;return openBlock(),createElementBlock("j-tooltip",{key:s.perspective.uuid,title:s.name},[createBaseVNode("j-popover",_hoisted_3$z,[createBaseVNode("j-avatar",{slot:"trigger",class:"left-nav__community-item",selected:e.communityIsActive(s.perspective.uuid),size:"lg",online:e.hasNotification(s.perspective.uuid),src:s.image||null,initials:s.name.charAt(0).toUpperCase(),onClick:()=>e.handleCommunityClick(s.perspective.uuid)},null,8,_hoisted_4$x),createBaseVNode("j-menu",_hoisted_5$p,[createBaseVNode("j-menu-item",{onClick:()=>e.removeCommunity(s.perspective.uuid)},"Remove community",8,_hoisted_6$m),createBaseVNode("j-menu-item",{onClick:()=>e.muteCommunity(s.perspective.uuid)},[createBaseVNode("j-icon",{size:"xs",slot:"start",name:(u=e.getCommunityState(s.perspective.uuid).notifications)!=null&&u.mute?"bell-slash":"bell"},null,8,_hoisted_8$g),createTextVNode(" "+toDisplayString(`${(l=e.getCommunityState(s.perspective.uuid).notifications)!=null&&l.mute?"Unmute":"Mute"} Community`),1)],8,_hoisted_7$i),createBaseVNode("j-menu-item",{onClick:()=>e.toggleHideMutedChannels(s.perspective.uuid)},[createBaseVNode("j-icon",{size:"xs",slot:"start",name:e.getCommunityState(s.perspective.uuid).hideMutedChannels?"toggle-on":"toggle-off"},null,8,_hoisted_10$e),createTextVNode(" Hide muted channels ")],8,_hoisted_9$e)])])],8,_hoisted_2$z)}),128)),createBaseVNode("j-tooltip",_hoisted_11$a,[createBaseVNode("j-button",{onClick:t[0]||(t[0]=()=>e.appStore.setShowCreateCommunity(!0)),square:"",circle:"",size:"lg",variant:"subtle"},_hoisted_13$7)])])}var CommunitiesList=_export_sfc(_sfc_main$D,[["render",_sfc_render$D],["__scopeId","data-v-100c43a1"]]),BottomSection_vue_vue_type_style_index_0_scoped_true_lang="";const _sfc_main$C=defineComponent({setup(){const e=useAppStore(),t=useUserStore();return{appStore:e,userStore:t}},data(){return{userProfileImage:"",showBottomOptions:!1}},watch:{userProfile:{async handler(){var e,t;(e=this.userStore.profile)!=null&&e.profilePicture?this.userProfileImage=await getImage((t=this.userStore.profile)==null?void 0:t.profilePicture):this.userProfileImage=""},immediate:!0}},methods:{...mapState(useUserStore,["profile","agent"]),...mapActions(useAppStore,["setShowEditProfile","setShowSettings"]),logOut(){this.$router.replace({name:"login"})},goToSettings(){this.$router.push({name:"settings"}),this.showBottomOptions=!1}}}),_withScopeId$i=e=>(pushScopeId("data-v-c13b06c0"),e=e(),popScopeId(),e),_hoisted_1$B={class:"left-nav__bottom-section"},_hoisted_2$y={id:"settings",title:"Settings"},_hoisted_3$y=_withScopeId$i(()=>createBaseVNode("j-icon",{size:"md",name:"gear"},null,-1)),_hoisted_4$w=[_hoisted_3$y],_hoisted_5$o={title:"Profile"},_hoisted_6$l=["hash","src","onClick"];function _sfc_render$C(e,t,n,r,o,a){const s=resolveComponent("router-link");return openBlock(),createElementBlock("div",_hoisted_1$B,[createBaseVNode("j-tooltip",_hoisted_2$y,[createBaseVNode("j-button",{size:"lg",circle:"",square:"",variant:"ghost",onClick:t[0]||(t[0]=(...u)=>e.goToSettings&&e.goToSettings(...u))},_hoisted_4$w)]),createVNode(s,{to:{name:"home"},custom:""},{default:withCtx(({navigate:u})=>[createBaseVNode("j-tooltip",_hoisted_5$o,[createBaseVNode("j-avatar",{class:"left-nav__profile-icon",size:"lg",hash:e.userStore.agent.did,src:e.userProfileImage,onClick:()=>u()},null,8,_hoisted_6$l)])]),_:1})])}var BottomSection=_export_sfc(_sfc_main$C,[["render",_sfc_render$C],["__scopeId","data-v-c13b06c0"]]),MainSidebar_vue_vue_type_style_index_0_scoped_true_lang="";const _sfc_main$B=defineComponent({components:{CommunitiesList,BottomSection}}),_hoisted_1$A={class:"sidebar-container"};function _sfc_render$B(e,t,n,r,o,a){const s=resolveComponent("communities-list"),u=resolveComponent("bottom-section");return openBlock(),createElementBlock("div",_hoisted_1$A,[createVNode(s),createVNode(u)])}var MainSidebar=_export_sfc(_sfc_main$B,[["render",_sfc_render$B],["__scopeId","data-v-d266ba40"]]);function isValid(e,t){return!checkValidation(e,t).error}function checkRule(e,t){return e.check(t)}function checkValidation(e,t){const n=e.find(r=>checkRule(r,t));return n?{message:n.message,error:!0}:{message:"No errors",error:!1}}function useValidation({initialValue:e="",rules:t=[]}){const n=ref(e),r=ref(!1),o=ref(""),a=ref(t);return{value:n,error:r,errorMessage:o,validate:()=>{const u=checkValidation(a.value,n.value);r.value=u.error,o.value=u.message},isValid:computed(()=>isValid(a.value,n.value))}}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?p(Object(n),!0).forEach(function(r){f(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v$1(e,t){if(e==null)return{};var n,r,o=function(s,u){if(s==null)return{};var l,c,m={},me=Object.keys(s);for(c=0;c<me.length;c++)l=me[c],u.indexOf(l)>=0||(m[l]=s[l]);return m}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function b(e){return function(t){if(Array.isArray(t))return w(t)}(e)||function(t){if(typeof Symbol!="undefined"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}(e)||function(t,n){if(!!t){if(typeof t=="string")return w(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return w(t,n)}}(e)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function w(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var y,z$1,R,A=(y=function(e){/*!
  Copyright (c) 2018 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/(function(){var t={}.hasOwnProperty;function n(){for(var r=[],o=0;o<arguments.length;o++){var a=arguments[o];if(a){var s=typeof a;if(s==="string"||s==="number")r.push(a);else if(Array.isArray(a)){if(a.length){var u=n.apply(null,a);u&&r.push(u)}}else if(s==="object")if(a.toString===Object.prototype.toString)for(var l in a)t.call(a,l)&&a[l]&&r.push(l);else r.push(a.toString())}}return r.join(" ")}e.exports?(n.default=n,e.exports=n):window.classNames=n})()},y(R={path:z$1,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(t==null&&R.path)}},R.exports),R.exports),M=function(e){return function(t,n){if(!t)return e;var r;typeof t=="string"?r=t:n=t;var o=e;return r&&(o+="__"+r),o+(n?Object.keys(n).reduce(function(a,s){var u=n[s];return u&&(a+=" "+(typeof u=="boolean"?o+"--"+s:o+"--"+s+"_"+u)),a},""):"")}};function S(e,t,n){var r,o,a,s,u;function l(){var m=Date.now()-s;m<t&&m>=0?r=setTimeout(l,t-m):(r=null,n||(u=e.apply(a,o),a=o=null))}t==null&&(t=100);var c=function(){a=this,o=arguments,s=Date.now();var m=n&&!r;return r||(r=setTimeout(l,t)),m&&(u=e.apply(a,o),a=o=null),u};return c.clear=function(){r&&(clearTimeout(r),r=null)},c.flush=function(){r&&(u=e.apply(a,o),a=o=null,clearTimeout(r),r=null)},c}S.debounce=S;var x=S,C=function(){return C=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},C.apply(this,arguments)};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function E(e,t){var n,r;return e&&t?(n=""+e+t[0].toUpperCase()+t.slice(1),r=e+"-"+t):(n=e||t,r=e||t),{name:n,classname:r}}function W$1(e){return/^blob:/.test(e)}function T(e){return W$1(e)||function(t){return/^data:/.test(t)}(e)}function O(e){return!!(e&&e.constructor&&e.call&&e.apply)}function D(e){return e===void 0}function H$1(e){return typeof e=="object"&&e!==null}function j$1(e,t,n){var r={};return H$1(e)?(Object.keys(t).forEach(function(o){D(e[o])?r[o]=t[o]:H$1(t[o])?H$1(e[o])?r[o]=j$1(e[o],t[o],n[o]):r[o]=e[o]?t[o]:n[o]:t[o]===!0||t[o]===!1?r[o]=Boolean(e[o]):r[o]=e[o]}),r):e?t:n}function L(e){var t=Number(e);return Number.isNaN(t)?e:t}function P$1(e){return typeof(e=="number"||function(t){return typeof t=="object"&&t!==null}(e)&&toString.call(e)=="[object Number]")&&!$(e)}function $(e){return e!=e}function I(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}var B=function(e,t){e===void 0&&(e={}),t===void 0&&(t={}),this.type="manipulateImage",this.move=e,this.scale=t},X=function(e,t){t===void 0&&(t={}),this.type="resize",this.directions=e,this.params=t},Y$1=function(e){this.type="move",this.directions=e},k=function(){function e(t,n,r,o,a){this.type="drag",this.nativeEvent=t,this.position=r,this.previousPosition=o,this.element=n,this.anchor=a}return e.prototype.shift=function(){var t=this,n=t.element,r=t.anchor,o=t.position;if(n){var a=n.getBoundingClientRect(),s=a.left,u=a.top;return{left:o.left-s-r.left,top:o.top-u-r.top}}return{left:0,top:0}},e}(),F={name:"DraggableElement",props:{classname:{type:String}},beforeMount:function(){window.addEventListener("mouseup",this.onMouseUp,{passive:!1}),window.addEventListener("mousemove",this.onMouseMove,{passive:!1}),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd,{passive:!1})},beforeUnmount:function(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd)},mounted:function(){if(!this.$refs.draggable)throw new Error('You should add ref "draggable" to your root element to use draggable mixin');this.touches=[],this.hovered=!1},methods:{onMouseOver:function(){this.hovered||(this.hovered=!0,this.$emit("enter"))},onMouseLeave:function(){this.hovered&&!this.touches.length&&(this.hovered=!1,this.$emit("leave"))},onTouchStart:function(e){e.cancelable&&!this.disabled&&e.touches.length===1&&(this.touches=b(e.touches),this.hovered||(this.$emit("enter"),this.hovered=!0),e.touches.length&&this.initAnchor(this.touches.reduce(function(t,n){return{clientX:t.clientX+n.clientX/e.touches.length,clientY:t.clientY+n.clientY/e.touches.length}},{clientX:0,clientY:0})),e.preventDefault&&e.preventDefault(),e.stopPropagation())},onTouchEnd:function(){this.processEnd()},onTouchMove:function(e){this.touches.length&&(this.processMove(e,e.touches),e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation())},onMouseDown:function(e){if(!this.disabled){var t={fake:!0,clientX:e.clientX,clientY:e.clientY};this.touches=[t],this.initAnchor(t),e.stopPropagation()}},onMouseMove:function(e){this.touches.length&&(this.processMove(e,[{fake:!0,clientX:e.clientX,clientY:e.clientY}]),e.preventDefault&&e.preventDefault())},onMouseUp:function(){this.processEnd()},initAnchor:function(e){var t=this.$refs.draggable.getBoundingClientRect(),n=t.left,r=t.right,o=t.bottom,a=t.top;this.anchor={left:e.clientX-n,top:e.clientY-a,bottom:o-e.clientY,right:r-e.clientX}},processMove:function(e,t){var n=b(t);if(this.touches.length){if(this.touches.length===1&&n.length===1){var r=this.$refs.draggable;this.$emit("drag",new k(e,r,{left:n[0].clientX,top:n[0].clientY},{left:this.touches[0].clientX,top:this.touches[0].clientY},this.anchor))}this.touches=n}},processEnd:function(){this.touches.length&&this.$emit("drag-end"),this.hovered&&(this.$emit("leave"),this.hovered=!1),this.touches=[]}},emits:["drag","drag-end","leave","enter"]};F.render=function(e,t,n,r,o,a){return openBlock(),createBlock("div",{ref:"draggable",class:n.classname,onTouchstart:t[1]||(t[1]=function(){return a.onTouchStart&&a.onTouchStart.apply(a,arguments)}),onMousedown:t[2]||(t[2]=function(){return a.onMouseDown&&a.onMouseDown.apply(a,arguments)}),onMouseover:t[3]||(t[3]=function(){return a.onMouseOver&&a.onMouseOver.apply(a,arguments)}),onMouseleave:t[4]||(t[4]=function(){return a.onMouseLeave&&a.onMouseLeave.apply(a,arguments)})},[renderSlot(e.$slots,"default")],34)};var U=M("vue-handler-wrapper"),N={name:"HandlerWrapper",components:{DraggableElement:F},props:{horizontalPosition:{type:String},verticalPosition:{type:String},disabled:{type:Boolean,default:!1}},computed:{classes:function(){var e;if(this.horizontalPosition||this.verticalPosition){var t,n=E(this.horizontalPosition,this.verticalPosition);e=U((f(t={},n.classname,!0),f(t,"disabled",this.disabled),t))}else e=U({disabled:this.disabled});return{root:e,draggable:U("draggable")}}},emits:["leave","enter","drag","drag-end"]};N.render=function(e,t,n,r,o,a){var s=resolveComponent("DraggableElement");return openBlock(),createBlock("div",{class:a.classes.root},[createVNode(s,{class:a.classes.draggable,onDrag:t[1]||(t[1]=function(u){return e.$emit("drag",u)}),onDragEnd:t[2]||(t[2]=function(u){return e.$emit("drag-end")}),onLeave:t[3]||(t[3]=function(u){return e.$emit("leave")}),onEnter:t[4]||(t[4]=function(u){return e.$emit("enter")})},{default:withCtx(function(){return[renderSlot(e.$slots,"default")]}),_:3},8,["class"])],2)};var Z=M("vue-line-wrapper"),q$1={name:"LineWrapper",components:{DraggableElement:F},props:{position:{type:String,required:!0},disabled:{type:Boolean,default:!1}},computed:{classname:function(){var e;return Z((f(e={},this.position,!0),f(e,"disabled",this.disabled),e))}},emits:["leave","enter","drag","drag-end"]};q$1.render=function(e,t,n,r,o,a){var s=resolveComponent("DraggableElement");return openBlock(),createBlock(s,{class:a.classname,onDrag:t[1]||(t[1]=function(u){return e.$emit("drag",u)}),onDragEnd:t[2]||(t[2]=function(u){return e.$emit("drag-end")}),onLeave:t[3]||(t[3]=function(u){return e.$emit("leave")}),onEnter:t[4]||(t[4]=function(u){return e.$emit("enter")})},{default:withCtx(function(){return[renderSlot(e.$slots,"default")]}),_:3},8,["class"])};var V=["left","right","top","bottom"],_=["left","right"],G$1=["top","bottom"],Q=["left","top"],K=["fill-area","fit-area","stencil","none"],J$1={left:0,top:0,width:0,height:0};function tt$1(e,t,n){return!(n=n||["width","height","left","top"]).some(function(r){return e[r]!==t[r]})}function et$1(e){return{left:e.left,top:e.top,right:e.left+e.width,bottom:e.top+e.height}}function it(e,t){return{left:e.left-t.left,top:e.top-t.top}}function nt(e){return{left:e.left+e.width/2,top:e.top+e.height/2}}function st$1(e,t){var n={left:0,top:0,right:0,bottom:0};return V.forEach(function(r){var o=t[r],a=et$1(e)[r];n[r]=o!==void 0&&a!==void 0?r==="left"||r==="top"?Math.max(0,o-a):Math.max(0,a-o):0}),n}function ot$1(e,t){return{left:e.left-t.left,top:e.top-t.top,width:e.width+t.left+t.right,height:e.height+t.top+t.bottom}}function rt(e){return{left:-e.left,top:-e.top}}function at$1(e,t){return C(C({},e),{left:e.left+t.left,top:e.top+t.top})}function ht$1(e,t,n,r){if(t!==1){if(n){var o=nt(e);return{width:e.width*t,height:e.height*t,left:e.left+e.width*(1-t)/2+(n.left-o.left)*(r||1-t),top:e.top+e.height*(1-t)/2+(n.top-o.top)*(r||1-t)}}return{width:e.width*t,height:e.height*t,left:e.left+e.width*(1-t)/2,top:e.top+e.height*(1-t)/2}}return e}function ct$1(e){return e.width/e.height}function lt$1(e,t){return Math.min(t.right!==void 0&&t.left!==void 0?(t.right-t.left)/e.width:1/0,t.bottom!==void 0&&t.top!==void 0?(t.bottom-t.top)/e.height:1/0)}function ut$1(e,t){var n={left:0,top:0},r=st$1(e,t);return r.left&&r.left>0?n.left=r.left:r.right&&r.right>0&&(n.left=-r.right),r.top&&r.top>0?n.top=r.top:r.bottom&&r.bottom>0&&(n.top=-r.bottom),n}function dt$1(e,t){var n;return t.minimum&&e<t.minimum?n=t.minimum:t.maximum&&e>t.maximum&&(n=t.maximum),n}function mt(e,t){var n=ct$1(e),r=ct$1(t);return t.width<1/0&&t.height<1/0?n>r?{width:t.width,height:t.width/n}:{width:t.height*n,height:t.height}:t.width<1/0?{width:t.width,height:t.width/n}:t.height<1/0?{width:t.height*n,height:t.height}:e}function pt$1(e,t){var n=t*Math.PI/180;return{width:Math.abs(e.width*Math.cos(n))+Math.abs(e.height*Math.sin(n)),height:Math.abs(e.width*Math.sin(n))+Math.abs(e.height*Math.cos(n))}}function gt$1(e,t){var n=t*Math.PI/180;return{left:e.left*Math.cos(n)-e.top*Math.sin(n),top:e.left*Math.sin(n)+e.top*Math.cos(n)}}function ft(e,t){var n=st$1(vt$1(e,t),t);return n.left+n.right+n.top+n.bottom?n.left+n.right>n.top+n.bottom?Math.min((e.width+n.left+n.right)/e.width,lt$1(e,t)):Math.min((e.height+n.top+n.bottom)/e.height,lt$1(e,t)):1}function vt$1(e,t,n){n===void 0&&(n=!1);var r=ut$1(e,t);return at$1(e,n?rt(r):r)}function bt$1(e){return{width:e.right!==void 0&&e.left!==void 0?e.right-e.left:1/0,height:e.bottom!==void 0&&e.top!==void 0?e.bottom-e.top:1/0}}function wt$1(e,t){return C(C({},e),{minWidth:Math.min(t.width,e.minWidth),minHeight:Math.min(t.height,e.minHeight),maxWidth:Math.min(t.width,e.maxWidth),maxHeight:Math.min(t.height,e.maxHeight)})}function yt$1(e,t,n){n===void 0&&(n=!0);var r={};return V.forEach(function(o){var a=e[o],s=t[o];a!==void 0&&s!==void 0?r[o]=o==="left"||o==="top"?n?Math.max(a,s):Math.min(a,s):n?Math.min(a,s):Math.max(a,s):s!==void 0?r[o]=s:a!==void 0&&(r[o]=a)}),r}function zt$1(e,t){return yt$1(e,t,!0)}function Rt$1(e){var t=e.size,n=e.aspectRatio,r=e.ignoreMinimum,o=e.sizeRestrictions;return Boolean((t.correctRatio||ct$1(t)>=n.minimum&&ct$1(t)<=n.maximum)&&t.height<=o.maxHeight&&t.width<=o.maxWidth&&t.width&&t.height&&(r||t.height>=o.minHeight&&t.width>=o.minWidth))}function At$1(e,t){return Math.pow(e.width-t.width,2)+Math.pow(e.height-t.height,2)}function Mt$1(e){var t=e.width,n=e.height,r=e.sizeRestrictions,o={minimum:e.aspectRatio&&e.aspectRatio.minimum||0,maximum:e.aspectRatio&&e.aspectRatio.maximum||1/0},a={width:Math.max(r.minWidth,Math.min(r.maxWidth,t)),height:Math.max(r.minHeight,Math.min(r.maxHeight,n))};function s(c,m){return m===void 0&&(m=!1),c.reduce(function(me,xe){return Rt$1({size:xe,aspectRatio:o,sizeRestrictions:r,ignoreMinimum:m})&&(!me||At$1(xe,{width:t,height:n})<At$1(me,{width:t,height:n}))?xe:me},null)}var u=[];o&&[o.minimum,o.maximum].forEach(function(c){c&&u.push({width:a.width,height:a.width/c,correctRatio:!0},{width:a.height*c,height:a.height,correctRatio:!0})}),Rt$1({size:a,aspectRatio:o,sizeRestrictions:r})&&u.push(a);var l=s(u)||s(u,!0);return l&&{width:l.width,height:l.height}}function St$1(e){var t=e.event,n=e.coordinates,r=e.positionRestrictions,o=r===void 0?{}:r,a=at$1(n,t.directions);return at$1(a,ut$1(a,o))}function xt$1(e){var t=e.coordinates,n=e.transform,r=e.imageSize,o=e.sizeRestrictions,a=e.positionRestrictions,s=e.aspectRatio,u=e.visibleArea,l=function(m,me){return St$1({coordinates:m,positionRestrictions:a,event:new Y$1({left:me.left-m.left,top:me.top-m.top})})},c=C({},t);return(Array.isArray(n)?n:[n]).forEach(function(m){var me={};D((me=typeof m=="function"?m({coordinates:c,imageSize:r,visibleArea:u}):m).width)&&D(me.height)||(c=function(xe,Ne){var He=C(C(C({},xe),Mt$1({width:Ne.width,height:Ne.height,sizeRestrictions:o,aspectRatio:s})),{left:0,top:0});return l(He,{left:xe.left,top:xe.top})}(c,C(C({},c),me))),D(me.left)&&D(me.top)||(c=l(c,C(C({},c),me)))}),c}function Ct(e){e.event;var t=e.getAreaRestrictions,n=e.boundaries,r=e.coordinates,o=e.visibleArea;e.aspectRatio;var a=e.stencilSize,s=e.sizeRestrictions,u=e.positionRestrictions;e.stencilReference;var l,c,m,me=C({},r),xe=C({},o),Ne=C({},a);l=ct$1(Ne),c=ct$1(me),m===void 0&&(m=.001),(l===0||c===0?Math.abs(c-l)<m:Math.abs(c/l)<1+m&&Math.abs(c/l)>1-m)||(me=C(C({},me),Mt$1({sizeRestrictions:s,width:me.width,height:me.height,aspectRatio:{minimum:ct$1(Ne),maximum:ct$1(Ne)}})));var He=ft(xe=ht$1(xe,me.width*n.width/(xe.width*Ne.width)),t({visibleArea:xe,type:"resize"}));return He!==1&&(xe=ht$1(xe,He),me=ht$1(me,He)),xe=vt$1(xe=at$1(xe,it(nt(me),nt(xe))),t({visibleArea:xe,type:"move"})),{coordinates:me=vt$1(me,zt$1(et$1(xe),u)),visibleArea:xe}}function Et$1(e){var t=e.event,n=e.getAreaRestrictions,r=e.boundaries,o=e.coordinates,a=e.visibleArea;e.aspectRatio,e.stencilSize,e.sizeRestrictions;var s=e.positionRestrictions;e.stencilReference;var u=C({},o),l=C({},a);if(o&&a&&t.type!=="manipulateImage"){var c={width:0,height:0};l.width,r.width,ct$1(r)>ct$1(u)?(c.height=.8*r.height,c.width=c.height*ct$1(u)):(c.width=.8*r.width,c.height=c.width*ct$1(u));var m=ft(l=ht$1(l,u.width*r.width/(l.width*c.width)),n({visibleArea:l,type:"resize"}));l=ht$1(l,m),m!==1&&(c.height/=m,c.width/=m),l=vt$1(l=at$1(l,it(nt(u),nt(l))),n({visibleArea:l,type:"move"})),u=vt$1(u,zt$1(et$1(l),s))}return{coordinates:u,visibleArea:l}}function Wt$1(e){var t=e.event,n=e.coordinates,r=e.visibleArea,o=e.getAreaRestrictions,a=C({},r),s=C({},n);if(t.type==="setCoordinates"){var u=Math.max(0,s.width-a.width),l=Math.max(0,s.height-a.height);u>l?a=ht$1(a,Math.min(s.width/a.width,lt$1(a,o({visibleArea:a,type:"resize"})))):l>u&&(a=ht$1(a,Math.min(s.height/a.height,lt$1(a,o({visibleArea:a,type:"resize"}))))),a=vt$1(a=at$1(a,rt(ut$1(s,et$1(a)))),o({visibleArea:a,type:"move"}))}return{visibleArea:a,coordinates:s}}function Tt(e){var t=e.imageSize,n=e.visibleArea,r=e.coordinates,o=n||t;return{left:(n?n.left:0)+o.width/2-r.width/2,top:(n?n.top:0)+o.height/2-r.height/2}}function Ot(e){var t=e.imageSize,n=e.visibleArea,r=e.aspectRatio,o=e.sizeRestrictions,a=n||t,s=Math.min(r.maximum||1/0,Math.max(r.minimum||0,ct$1(a))),u=a.width<a.height?{width:.8*a.width,height:.8*a.width/s}:{height:.8*a.height,width:.8*a.height*s};return Mt$1(C(C({},u),{aspectRatio:r,sizeRestrictions:o}))}function Dt$1(e){var t,n,r=e.imageSize,o=e.visibleArea,a=e.boundaries,s=e.aspectRatio,u=e.sizeRestrictions,l=e.stencilSize,c=o||r;return ct$1(c)>ct$1(a)?n=(t=l.height*c.height/a.height)*ct$1(l):t=(n=l.width*c.width/a.width)/ct$1(l),Mt$1({width:n,height:t,aspectRatio:s,sizeRestrictions:u})}function Ht$1(e){var t=e.getAreaRestrictions,n=e.coordinates,r=e.imageSize,o=ct$1(e.boundaries);if(n){var a={height:Math.max(n.height,r.height),width:Math.max(n.width,r.width)},s=mt({width:ct$1(a)>o?a.width:a.height*o,height:ct$1(a)>o?a.width/o:a.height},bt$1(t())),u={left:n.left+n.width/2-s.width/2,top:n.top+n.height/2-s.height/2,width:s.width,height:s.height},l=st$1(n,et$1(C({left:0,top:0},r))),c={};return!l.left&&!l.right&&u.width<=r.width&&(c.left=0,c.right=r.width),!l.top&&!l.bottom&&u.height<=r.height&&(c.top=0,c.bottom=r.height),vt$1(u,c)}var m=ct$1(r);return s={height:m>o?r.height:r.width/o,width:m>o?r.height*o:r.width},{left:r.width/2-s.width/2,top:r.height/2-s.height/2,width:s.width,height:s.height}}function jt$1(e,t){return yt$1(e,et$1(t))}function Lt$1(e){var t=e.event,n=e.coordinates,r=e.visibleArea,o=e.sizeRestrictions,a=e.getAreaRestrictions,s=e.positionRestrictions,u=e.adjustStencil,l=t.scale,c=t.move,m=C({},r),me=C({},n),xe=1,Ne=1,He=l.factor&&Math.abs(l.factor-1)>.001;m=at$1(m,{left:c.left||0,top:c.top||0});var Ye={stencil:{minimum:Math.max(o.minWidth?o.minWidth/me.width:0,o.minHeight?o.minHeight/me.height:0),maximum:Math.min(o.maxWidth?o.maxWidth/me.width:1/0,o.maxHeight?o.maxHeight/me.height:1/0,lt$1(me,s))},area:{maximum:lt$1(m,a({visibleArea:m,type:"resize"}))}};l.factor&&He&&(l.factor<1?(Ne=Math.max(l.factor,Ye.stencil.minimum))>1&&(Ne=1):l.factor>1&&(Ne=Math.min(l.factor,Math.min(Ye.area.maximum,Ye.stencil.maximum)))<1&&(Ne=1)),Ne&&(m=ht$1(m,Ne,l.center));var Je=n.left-r.left,vn=r.width+r.left-(n.width+n.left),La=n.top-r.top,sr=r.height+r.top-(n.height+n.top);return m=vt$1(m=at$1(m,ut$1(m,{left:s.left!==void 0?s.left-Je*Ne:void 0,top:s.top!==void 0?s.top-La*Ne:void 0,bottom:s.bottom!==void 0?s.bottom+sr*Ne:void 0,right:s.right!==void 0?s.right+vn*Ne:void 0})),a({visibleArea:m,type:"move"})),me.width=me.width*Ne,me.height=me.height*Ne,me.left=m.left+Je*Ne,me.top=m.top+La*Ne,me=vt$1(me,zt$1(et$1(m),s)),l.factor&&He&&u&&(l.factor>1?xe=Math.min(Ye.area.maximum,l.factor)/Ne:l.factor<1&&(xe=Math.max(me.height/m.height,me.width/m.width,l.factor/Ne)),xe!==1&&(m=at$1(m=vt$1(m=ht$1(m,xe,l.factor>1?l.center:nt(me)),a({visibleArea:m,type:"move"})),rt(ut$1(me,et$1(m)))))),{coordinates:me,visibleArea:m}}function Pt$1(e){var t=e.aspectRatio,n=e.getAreaRestrictions,r=e.coordinates,o=e.visibleArea,a=e.sizeRestrictions,s=e.positionRestrictions,u=e.imageSize,l=e.previousImageSize,c=e.angle,m=C({},r),me=C({},o),xe=gt$1(nt(C({left:0,top:0},l)),c);return(m=C(C({},Mt$1({sizeRestrictions:a,aspectRatio:t,width:m.width,height:m.height})),gt$1(nt(m),c))).left-=xe.left-u.width/2+m.width/2,m.top-=xe.top-u.height/2+m.height/2,me=ht$1(me,ft(me,n({visibleArea:me,type:"resize"}))),{coordinates:m=vt$1(m,s),visibleArea:me=vt$1(me=at$1(me,it(nt(m),nt(r))),n({visibleArea:me,type:"move"}))}}function $t$1(e){var t=e.flip,n=e.previousFlip,r=e.rotate;e.aspectRatio;var o=e.getAreaRestrictions,a=e.coordinates,s=e.visibleArea,u=e.imageSize,l=C({},a),c=C({},s),m=n.horizontal!==t.horizontal,me=n.vertical!==t.vertical;if(m||me){var xe=gt$1({left:u.width/2,top:u.height/2},-r),Ne=gt$1(nt(l),-r),He=gt$1({left:m?xe.left-(Ne.left-xe.left):Ne.left,top:me?xe.top-(Ne.top-xe.top):Ne.top},r);l=at$1(l,it(He,nt(l))),Ne=gt$1(nt(c),-r),c=vt$1(c=at$1(c,it(He=gt$1({left:m?xe.left-(Ne.left-xe.left):Ne.left,top:me?xe.top-(Ne.top-xe.top):Ne.top},r),nt(c))),o({visibleArea:c,type:"move"}))}return{coordinates:l,visibleArea:c}}function It(e){var t=e.directions,n=e.coordinates,r=e.positionRestrictions,o=r===void 0?{}:r,a=e.sizeRestrictions,s=e.preserveRatio,u=e.compensate,l=C({},t),c=ot$1(n,l).width,m=ot$1(n,l).height;c<0&&(l.left<0&&l.right<0?(l.left=-(n.width-a.minWidth)/(l.left/l.right),l.right=-(n.width-a.minWidth)/(l.right/l.left)):l.left<0?l.left=-(n.width-a.minWidth):l.right<0&&(l.right=-(n.width-a.minWidth))),m<0&&(l.top<0&&l.bottom<0?(l.top=-(n.height-a.minHeight)/(l.top/l.bottom),l.bottom=-(n.height-a.minHeight)/(l.bottom/l.top)):l.top<0?l.top=-(n.height-a.minHeight):l.bottom<0&&(l.bottom=-(n.height-a.minHeight)));var me=st$1(ot$1(n,l),o);u&&(me.left&&me.left>0&&me.right===0?(l.right+=me.left,l.left-=me.left):me.right&&me.right>0&&me.left===0&&(l.left+=me.right,l.right-=me.right),me.top&&me.top>0&&me.bottom===0?(l.bottom+=me.top,l.top-=me.top):me.bottom&&me.bottom>0&&me.top===0&&(l.top+=me.bottom,l.bottom-=me.bottom),me=st$1(ot$1(n,l),o));var xe={width:1/0,height:1/0,left:1/0,right:1/0,top:1/0,bottom:1/0};if(V.forEach(function(Ye){var Je=me[Ye];Je&&l[Ye]&&(xe[Ye]=Math.max(0,1-Je/l[Ye]))}),s){var Ne=Math.min.apply(null,V.map(function(Ye){return xe[Ye]}));Ne!==1/0&&V.forEach(function(Ye){l[Ye]*=Ne})}else V.forEach(function(Ye){xe[Ye]!==1/0&&(l[Ye]*=xe[Ye])});if(c=ot$1(n,l).width,m=ot$1(n,l).height,l.right+l.left&&(c>a.maxWidth?xe.width=(a.maxWidth-n.width)/(l.right+l.left):c<a.minWidth&&(xe.width=(a.minWidth-n.width)/(l.right+l.left))),l.bottom+l.top&&(m>a.maxHeight?xe.height=(a.maxHeight-n.height)/(l.bottom+l.top):m<a.minHeight&&(xe.height=(a.minHeight-n.height)/(l.bottom+l.top))),s){var He=Math.min(xe.width,xe.height);He!==1/0&&V.forEach(function(Ye){l[Ye]*=He})}else xe.width!==1/0&&_.forEach(function(Ye){l[Ye]*=xe.width}),xe.height!==1/0&&G$1.forEach(function(Ye){l[Ye]*=xe.height});return l}function Bt$1(e,t,n){return t==0&&n==0?e/2:t==0?0:n==0?e:e*Math.abs(t/(t+n))}var Xt$1=M("vue-simple-handler"),Yt$1=M("vue-simple-handler-wrapper"),kt$1={name:"SimpleHandler",components:{HandlerWrapper:N},props:{defaultClass:{type:String},hoverClass:{type:String},wrapperClass:{type:String},horizontalPosition:{type:String},verticalPosition:{type:String},disabled:{type:Boolean,default:!1}},data:function(){return{hover:!1}},computed:{classes:function(){var e,t=(f(e={},this.horizontalPosition,Boolean(this.horizontalPosition)),f(e,this.verticalPosition,Boolean(this.verticalPosition)),f(e,"".concat(this.horizontalPosition,"-").concat(this.verticalPosition),Boolean(this.verticalPosition&&this.horizontalPosition)),f(e,"hover",this.hover),e);return{default:A(Xt$1(t),this.defaultClass,this.hover&&this.hoverClass),wrapper:A(Yt$1(t),this.wrapperClass)}}},methods:{onDrag:function(e){this.$emit("drag",e)},onEnter:function(){this.hover=!0},onLeave:function(){this.hover=!1},onDragEnd:function(){this.$emit("drag-end")}},emits:["drag","drag-end"]};kt$1.render=function(e,t,n,r,o,a){var s=resolveComponent("HandlerWrapper");return openBlock(),createBlock(s,{class:a.classes.wrapper,"vertical-position":n.verticalPosition,"horizontal-position":n.horizontalPosition,disabled:n.disabled,onDrag:a.onDrag,onDragEnd:a.onDragEnd,onEnter:a.onEnter,onLeave:a.onLeave},{default:withCtx(function(){return[createVNode("div",{class:a.classes.default},null,2)]}),_:1},8,["class","vertical-position","horizontal-position","disabled","onDrag","onDragEnd","onEnter","onLeave"])};var Ft$1=M("vue-simple-line"),Ut$1=M("vue-simple-line-wrapper"),Nt$1={name:"SimpleLine",components:{LineWrapper:q$1},props:{defaultClass:{type:String},hoverClass:{type:String},wrapperClass:{type:String},position:{type:String},disabled:{type:Boolean,default:!1}},data:function(){return{hover:!1}},computed:{classes:function(){return{root:A(Ft$1(f({},this.position,!0)),this.defaultClass,this.hover&&this.hoverClass),wrapper:A(Ut$1(f({},this.position,!0)),this.wrapperClass)}}},methods:{onDrag:function(e){this.$emit("drag",e)},onEnter:function(){this.hover=!0},onLeave:function(){this.hover=!1},onDragEnd:function(){this.$emit("drag-end")}},emits:["drag","drag-end"]};Nt$1.render=function(e,t,n,r,o,a){var s=resolveComponent("LineWrapper");return openBlock(),createBlock(s,{class:a.classes.wrapper,position:n.position,disabled:n.disabled,onDrag:a.onDrag,onDragEnd:a.onDragEnd,onEnter:a.onEnter,onLeave:a.onLeave},{default:withCtx(function(){return[createVNode("div",{class:a.classes.root},null,2)]}),_:1},8,["class","position","disabled","onDrag","onDragEnd","onEnter","onLeave"])};var Zt$1=M("vue-bounding-box"),qt$1=["east","west",null],Vt$1=["south","north",null],_t={name:"BoundingBox",props:{width:{type:Number},height:{type:Number},transitions:{type:Object},handlers:{type:Object,default:function(){return{eastNorth:!0,north:!0,westNorth:!0,west:!0,westSouth:!0,south:!0,eastSouth:!0,east:!0}}},handlersComponent:{type:[Object,String],default:function(){return kt$1}},handlersClasses:{type:Object,default:function(){return{}}},handlersWrappersClasses:{type:Object,default:function(){return{}}},lines:{type:Object,default:function(){return{west:!0,north:!0,east:!0,south:!0}}},linesComponent:{type:[Object,String],default:function(){return Nt$1}},linesClasses:{type:Object,default:function(){return{}}},linesWrappersClasses:{type:Object,default:function(){return{}}},resizable:{type:Boolean,default:!0}},data:function(){var e=[];return qt$1.forEach(function(t){Vt$1.forEach(function(n){if(t!==n){var r=E(t,n),o=r.name,a=r.classname;e.push({name:o,classname:a,verticalDirection:n,horizontalDirection:t})}})}),{points:e}},computed:{style:function(){var e={};return this.width&&this.height&&(e.width="".concat(this.width,"px"),e.height="".concat(this.height,"px"),this.transitions&&this.transitions.enabled&&(e.transition="".concat(this.transitions.time,"ms ").concat(this.transitions.timingFunction))),e},classes:function(){var e=this.handlersClasses,t=this.handlersWrappersClasses,n=this.linesClasses,r=this.linesWrappersClasses;return{root:Zt$1(),handlers:e,handlersWrappers:t,lines:n,linesWrappers:r}},lineNodes:function(){var e=this,t=[];return this.points.forEach(function(n){n.horizontalDirection&&n.verticalDirection||!e.lines[n.name]||t.push({name:n.name,component:e.linesComponent,class:A(e.classes.lines.default,e.classes.lines[n.name],!e.resizable&&e.classes.lines.disabled),wrapperClass:A(e.classes.linesWrappers.default,e.classes.linesWrappers[n.name],!e.resizable&&e.classes.linesWrappers.disabled),hoverClass:e.classes.lines.hover,verticalDirection:n.verticalDirection,horizontalDirection:n.horizontalDirection,disabled:!e.resizable})}),t},handlerNodes:function(){var e=this,t=[],n=this.width,r=this.height;return this.points.forEach(function(o){if(e.handlers[o.name]){var a={name:o.name,component:e.handlersComponent,class:A(e.classes.handlers.default,e.classes.handlers[o.name]),wrapperClass:A(e.classes.handlersWrappers.default,e.classes.handlersWrappers[o.name]),hoverClass:e.classes.handlers.hover,verticalDirection:o.verticalDirection,horizontalDirection:o.horizontalDirection,disabled:!e.resizable};if(n&&r){var s=o.horizontalDirection,u=o.verticalDirection,l=s==="east"?n:s==="west"?0:n/2,c=u==="south"?r:u==="north"?0:r/2;a.wrapperClass=Zt$1("handler"),a.wrapperStyle={transform:"translate(".concat(l,"px, ").concat(c,"px)")},e.transitions&&e.transitions.enabled&&(a.wrapperStyle.transition="".concat(e.transitions.time,"ms ").concat(e.transitions.timingFunction))}else a.wrapperClass=Zt$1("handler",f({},o.classname,!0));t.push(a)}}),t}},beforeMount:function(){window.addEventListener("mouseup",this.onMouseUp,{passive:!1}),window.addEventListener("mousemove",this.onMouseMove,{passive:!1}),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd,{passive:!1})},beforeUnmount:function(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd)},mounted:function(){this.touches=[]},methods:{onEnd:function(){this.$emit("resize-end")},onHandlerDrag:function(e,t,n){var r,o=e.shift(),a=o.left,s=o.top,u={left:0,right:0,top:0,bottom:0};t==="west"?u.left-=a:t==="east"&&(u.right+=a),n==="north"?u.top-=s:n==="south"&&(u.bottom+=s),!n&&t?r="width":n&&!t&&(r="height"),this.resizable&&this.$emit("resize",new X(u,{allowedDirections:{left:t==="west"||!t,right:t==="east"||!t,bottom:n==="south"||!n,top:n==="north"||!n},preserveAspectRatio:e.nativeEvent&&e.nativeEvent.shiftKey,respectDirection:r}))}},emits:["resize","resize-end"]};_t.render=function(e,t,n,r,o,a){return openBlock(),createBlock("div",{ref:"box",class:a.classes.root,style:a.style},[renderSlot(e.$slots,"default"),createVNode("div",null,[(openBlock(!0),createBlock(Fragment$1,null,renderList(a.lineNodes,function(s){return openBlock(),createBlock(resolveDynamicComponent(s.component),{key:s.name,"default-class":s.class,"hover-class":s.hoverClass,"wrapper-class":s.wrapperClass,position:s.name,disabled:s.disabled,onDrag:function(u){return a.onHandlerDrag(u,s.horizontalDirection,s.verticalDirection)},onDragEnd:t[1]||(t[1]=function(u){return a.onEnd()})},null,8,["default-class","hover-class","wrapper-class","position","disabled","onDrag"])}),128))]),(openBlock(!0),createBlock(Fragment$1,null,renderList(a.handlerNodes,function(s){return openBlock(),createBlock("div",{key:s.name,style:s.wrapperStyle,class:s.wrapperClass},[(openBlock(),createBlock(resolveDynamicComponent(s.component),{"default-class":s.class,"hover-class":s.hoverClass,"wrapper-class":s.wrapperClass,"horizontal-position":s.horizontalDirection,"vertical-position":s.verticalDirection,disabled:s.disabled,onDrag:function(u){return a.onHandlerDrag(u,s.horizontalDirection,s.verticalDirection)},onDragEnd:t[2]||(t[2]=function(u){return a.onEnd()})},null,8,["default-class","hover-class","wrapper-class","horizontal-position","vertical-position","disabled","onDrag"]))],6)}),128))],6)};var Gt$1=M("vue-draggable-area"),Qt$1={name:"DraggableArea",props:{movable:{type:Boolean,default:!0},activationDistance:{type:Number,default:20}},computed:{classnames:function(){return{default:Gt$1()}}},beforeMount:function(){window.addEventListener("mouseup",this.onMouseUp,{passive:!1}),window.addEventListener("mousemove",this.onMouseMove,{passive:!1}),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd,{passive:!1})},beforeUnmount:function(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd)},mounted:function(){this.touches=[],this.touchStarted=!1},methods:{onTouchStart:function(e){if(e.cancelable){var t=this.movable&&e.touches.length===1;t&&(this.touches=b(e.touches)),(this.touchStarted||t)&&(e.preventDefault(),e.stopPropagation())}},onTouchEnd:function(){this.touchStarted=!1,this.processEnd()},onTouchMove:function(e){this.touches.length>=1&&(this.touchStarted?(this.processMove(e,e.touches),e.preventDefault(),e.stopPropagation()):I({x:this.touches[0].clientX,y:this.touches[0].clientY},{x:e.touches[0].clientX,y:e.touches[0].clientY})>this.activationDistance&&(this.initAnchor({clientX:e.touches[0].clientX,clientY:e.touches[0].clientY}),this.touchStarted=!0))},onMouseDown:function(e){if(this.movable&&e.button===0){var t={fake:!0,clientX:e.clientX,clientY:e.clientY};this.touches=[t],this.initAnchor(t),e.stopPropagation()}},onMouseMove:function(e){this.touches.length&&(this.processMove(e,[{fake:!0,clientX:e.clientX,clientY:e.clientY}]),e.preventDefault&&e.cancelable&&e.preventDefault(),e.stopPropagation())},onMouseUp:function(){this.processEnd()},initAnchor:function(e){var t=this.$refs.container.getBoundingClientRect(),n=t.left,r=t.top;this.anchor={x:e.clientX-n,y:e.clientY-r}},processMove:function(e,t){var n=b(t);if(this.touches.length){var r=this.$refs.container.getBoundingClientRect(),o=r.left,a=r.top;this.touches.length===1&&n.length===1&&this.$emit("move",new Y$1({left:n[0].clientX-(o+this.anchor.x),top:n[0].clientY-(a+this.anchor.y)}))}},processEnd:function(){this.touches.length&&this.$emit("move-end"),this.touches=[]}},emits:["move","move-end"]};Qt$1.render=function(e,t,n,r,o,a){return openBlock(),createBlock("div",{ref:"container",onTouchstart:t[1]||(t[1]=function(){return a.onTouchStart&&a.onTouchStart.apply(a,arguments)}),onMousedown:t[2]||(t[2]=function(){return a.onMouseDown&&a.onMouseDown.apply(a,arguments)})},[renderSlot(e.$slots,"default")],544)};function Kt$1(e){var t,n;return{rotate:e.rotate||0,flip:{horizontal:((t=e==null?void 0:e.flip)===null||t===void 0?void 0:t.horizontal)||!1,vertical:((n=e==null?void 0:e.flip)===null||n===void 0?void 0:n.vertical)||!1}}}function Jt$1(e){return new Promise(function(t,n){try{if(e)if(/^data:/i.test(e))t(function(l){l=l.replace(/^data:([^;]+);base64,/gim,"");for(var c=atob(l),m=c.length,me=new ArrayBuffer(m),xe=new Uint8Array(me),Ne=0;Ne<m;Ne++)xe[Ne]=c.charCodeAt(Ne);return me}(e));else if(/^blob:/i.test(e)){var r=new FileReader;r.onload=function(l){t(l.target.result)},a=e,s=function(l){r.readAsArrayBuffer(l)},(u=new XMLHttpRequest).open("GET",a,!0),u.responseType="blob",u.onload=function(){this.status!=200&&this.status!==0||s(this.response)},u.send()}else{var o=new XMLHttpRequest;o.onreadystatechange=function(){o.readyState===4&&(o.status===200||o.status===0?t(o.response):n("Warning: could not load an image to parse its orientation"),o=null)},o.onprogress=function(){o.getResponseHeader("content-type")!=="image/jpeg"&&o.abort()},o.withCredentials=!1,o.open("GET",e,!0),o.responseType="arraybuffer",o.send(null)}else n("Error: the image is empty")}catch(l){n(l)}var a,s,u})}function te(e){var t=e.rotate,n=e.flip,r=e.scaleX,o=e.scaleY,a="";return a+=" rotate("+t+"deg) ",a+=" scaleX("+r*(n.horizontal?-1:1)+") ",a+=" scaleY("+o*(n.vertical?-1:1)+") "}function ee$1(e){try{var t,n=new DataView(e),r=void 0,o=void 0,a=void 0,s=void 0;if(n.getUint8(0)===255&&n.getUint8(1)===216)for(var u=n.byteLength,l=2;l+1<u;){if(n.getUint8(l)===255&&n.getUint8(l+1)===225){a=l;break}l++}if(a&&(r=a+10,function(Ne,He,Ye){var Je,vn="";for(Je=He,Ye+=He;Je<Ye;Je++)vn+=String.fromCharCode(Ne.getUint8(Je));return vn}(n,a+4,4)==="Exif")){var c=n.getUint16(r);if(((o=c===18761)||c===19789)&&n.getUint16(r+2,o)===42){var m=n.getUint32(r+4,o);m>=8&&(s=r+m)}}if(s){for(var me=n.getUint16(s,o),xe=0;xe<me;xe++)if(l=s+12*xe+2,n.getUint16(l,o)===274){l+=8,t=n.getUint16(l,o),n.setUint16(l,1,o);break}}return t}catch{return null}}function se$1(e,t){var n=t.getBoundingClientRect(),r=n.left,o=n.top,a={left:0,top:0},s=0;return e.forEach(function(u){a.left+=(u.clientX-r)/e.length,a.top+=(u.clientY-o)/e.length}),e.forEach(function(u){s+=I({x:a.left,y:a.top},{x:u.clientX-r,y:u.clientY-o})}),{centerMass:a,spread:s,count:e.length}}var oe={props:{touchMove:{type:Boolean,required:!0},mouseMove:{type:Boolean,required:!0},touchResize:{type:Boolean,required:!0},wheelResize:{type:[Boolean,Object],required:!0},eventsFilter:{type:Function,required:!1}},beforeMount:function(){window.addEventListener("mouseup",this.onMouseUp,{passive:!1}),window.addEventListener("mousemove",this.onMouseMove,{passive:!1}),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd,{passive:!1})},beforeUnmount:function(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd)},created:function(){this.transforming=!1,this.debouncedProcessEnd=x(this.processEnd),this.touches=[]},methods:{processMove:function(e,t){if(this.touches.length){if(this.touches.length===1&&t.length===1)this.$emit("move",new B({left:this.touches[0].clientX-t[0].clientX,top:this.touches[0].clientY-t[0].clientY}));else if(this.touches.length>1&&this.touchResize){var n=se$1(t,this.$refs.container),r=this.oldGeometricProperties;r.count===n.count&&r.count>1&&this.$emit("resize",new B({left:r.centerMass.left-n.centerMass.left,top:r.centerMass.top-n.centerMass.top},{factor:r.spread/n.spread,center:n.centerMass})),this.oldGeometricProperties=n}this.touches=t}},processEnd:function(){this.transforming&&(this.transforming=!1,this.$emit("transform-end"))},processStart:function(){this.transforming=!0,this.debouncedProcessEnd.clear()},processEvent:function(e){return this.eventsFilter?this.eventsFilter(e,this.transforming)!==!1:(e.preventDefault(),e.stopPropagation(),!0)},onTouchStart:function(e){if(e.cancelable&&(this.touchMove||this.touchResize&&e.touches.length>1)&&this.processEvent(e)){var t=this.$refs.container,n=t.getBoundingClientRect(),r=n.left,o=n.top,a=n.bottom,s=n.right;this.touches=b(e.touches).filter(function(u){return u.clientX>r&&u.clientX<s&&u.clientY>o&&u.clientY<a}),this.oldGeometricProperties=se$1(this.touches,t)}},onTouchEnd:function(e){e.touches.length===0&&(this.touches=[],this.processEnd())},onTouchMove:function(e){var t=this;if(this.touches.length){var n=b(e.touches).filter(function(r){return!r.identifier||t.touches.find(function(o){return o.identifier===r.identifier})});this.processEvent(e)&&(this.processMove(e,n),this.processStart())}},onMouseDown:function(e){if(this.mouseMove&&"buttons"in e&&e.buttons===1&&this.processEvent(e)){var t={fake:!0,clientX:e.clientX,clientY:e.clientY};this.touches=[t],this.processStart()}},onMouseMove:function(e){this.touches.length&&this.processEvent(e)&&this.processMove(e,[{clientX:e.clientX,clientY:e.clientY}])},onMouseUp:function(){this.touches=[],this.processEnd()},onWheel:function(e){if(this.wheelResize&&this.processEvent(e)){var t=this.$refs.container.getBoundingClientRect(),n=t.left,r=t.top,o=1+this.wheelResize.ratio*(s=e.deltaY||e.detail||e.wheelDelta,(u=+s)==0||$(u)?u:u>0?1:-1),a={left:e.clientX-n,top:e.clientY-r};this.$emit("resize",new B({},{factor:o,center:a})),this.touches.length||this.debouncedProcessEnd()}var s,u}},emits:["resize","move","transform-end"]};oe.render=function(e,t,n,r,o,a){return openBlock(),createBlock("div",{ref:"container",onTouchstart:t[1]||(t[1]=function(){return a.onTouchStart&&a.onTouchStart.apply(a,arguments)}),onMousedown:t[2]||(t[2]=function(){return a.onMouseDown&&a.onMouseDown.apply(a,arguments)}),onWheel:t[3]||(t[3]=function(){return a.onWheel&&a.onWheel.apply(a,arguments)})},[renderSlot(e.$slots,"default")],544)};var re$1={components:{TransformableImage:oe},props:{touchMove:{type:Boolean,required:!0},mouseMove:{type:Boolean,required:!0},touchResize:{type:Boolean,required:!0},wheelResize:{type:[Boolean,Object],required:!0}},emits:["resize","move"]};re$1.render=function(e,t,n,r,o,a){var s=resolveComponent("transformable-image");return openBlock(),createBlock(s,{"touch-move":n.touchMove,"touch-resize":n.touchResize,"mouse-move":n.mouseMove,"wheel-resize":n.wheelResize,onMove:t[1]||(t[1]=function(u){return e.$emit("move",u)}),onResize:t[2]||(t[2]=function(u){return e.$emit("resize",u)})},{default:withCtx(function(){return[renderSlot(e.$slots,"default")]}),_:3},8,["touch-move","touch-resize","mouse-move","wheel-resize"])};var ae$1=M("vue-preview"),he$1={props:{coordinates:{type:Object},transitions:{type:Object},image:{type:Object,default:function(){return{}}},imageClass:{type:String},width:{type:Number},height:{type:Number},fill:{type:Boolean}},data:function(){return{calculatedImageSize:{width:0,height:0},calculatedSize:{width:0,height:0}}},computed:{classes:function(){return{root:ae$1({fill:this.fill}),wrapper:ae$1("wrapper"),imageWrapper:ae$1("image-wrapper"),image:A(ae$1("image"),this.imageClass)}},style:function(){if(this.fill)return{};var e={};return this.width&&(e.width="".concat(this.size.width,"px")),this.height&&(e.height="".concat(this.size.height,"px")),this.transitions&&this.transitions.enabled&&(e.transition="".concat(this.transitions.time,"ms ").concat(this.transitions.timingFunction)),e},wrapperStyle:function(){var e={width:"".concat(this.size.width,"px"),height:"".concat(this.size.height,"px"),left:"calc(50% - ".concat(this.size.width/2,"px)"),top:"calc(50% - ".concat(this.size.height/2,"px)")};return this.transitions&&this.transitions.enabled&&(e.transition="".concat(this.transitions.time,"ms ").concat(this.transitions.timingFunction)),e},imageStyle:function(){if(this.coordinates&&this.image){var e=this.coordinates.width/this.size.width,t=g(g({rotate:0,flip:{horizontal:!1,vertical:!1}},this.image.transforms),{},{scaleX:1/e,scaleY:1/e}),n=this.imageSize.width,r=this.imageSize.height,o=pt$1({width:n,height:r},t.rotate),a={width:"".concat(n,"px"),height:"".concat(r,"px"),left:"0px",top:"0px"},s={rotate:{left:(n-o.width)*t.scaleX/2,top:(r-o.height)*t.scaleY/2},scale:{left:(1-t.scaleX)*n/2,top:(1-t.scaleY)*r/2}};return a.transform=`translate(
				`.concat(-this.coordinates.left/e-s.rotate.left-s.scale.left,"px,").concat(-this.coordinates.top/e-s.rotate.top-s.scale.top,"px) ")+te(t),this.transitions&&this.transitions.enabled&&(a.transition="".concat(this.transitions.time,"ms ").concat(this.transitions.timingFunction)),a}return{}},size:function(){return{width:this.width||this.calculatedSize.width,height:this.height||this.calculatedSize.height}},imageSize:function(){return{width:this.image.width||this.calculatedImageSize.width,height:this.image.height||this.calculatedImageSize.height}}},watch:{image:function(e){(e.width||e.height)&&this.onChangeImage()}},mounted:function(){var e=this;this.onChangeImage(),this.$refs.image.addEventListener("load",function(){e.refreshImage()}),window.addEventListener("resize",this.refresh),window.addEventListener("orientationchange",this.refresh)},unmounted:function(){window.removeEventListener("resize",this.refresh),window.removeEventListener("orientationchange",this.refresh)},methods:{refreshImage:function(){var e=this.$refs.image;this.calculatedImageSize.height=e.naturalHeight,this.calculatedImageSize.width=e.naturalWidth},refresh:function(){var e=this.$refs.root;this.width||(this.calculatedSize.width=e.clientWidth),this.height||(this.calculatedSize.height=e.clientHeight)},onChangeImage:function(){var e=this.$refs.image;e&&e.complete&&this.refreshImage(),this.refresh()}}};he$1.render=function(e,t,n,r,o,a){return openBlock(),createBlock("div",{ref:"root",class:a.classes.root,style:a.style},[createVNode("div",{ref:"wrapper",class:a.classes.wrapper,style:a.wrapperStyle},[withDirectives(createVNode("img",{ref:"image",src:n.image&&n.image.src,class:a.classes.image,style:a.imageStyle},null,14,["src"]),[[vShow,n.image&&n.image.src]])],6)],6)};var ce$1={components:{Preview:he$1},inheritAttrs:!1};ce$1.render=function(e,t,n,r,o,a){var s=resolveComponent("preview");return openBlock(),createBlock(s,mergeProps(e.$attrs,{fill:!0}),null,16)};var le=M("vue-rectangle-stencil"),ue={name:"RectangleStencil",components:{StencilPreview:ce$1,BoundingBox:_t,DraggableArea:Qt$1},props:{image:{type:Object},coordinates:{type:Object},stencilCoordinates:{type:Object},handlers:{type:Object},handlersComponent:{type:[Object,String],default:function(){return kt$1}},lines:{type:Object},linesComponent:{type:[Object,String],default:function(){return Nt$1}},aspectRatio:{type:[Number,String]},minAspectRatio:{type:[Number,String]},maxAspectRatio:{type:[Number,String]},movable:{type:Boolean,default:!0},resizable:{type:Boolean,default:!0},transitions:{type:Object},movingClass:{type:String},resizingClass:{type:String},previewClass:{type:String},boundingBoxClass:{type:String},linesClasses:{type:Object,default:function(){return{}}},linesWrappersClasses:{type:Object,default:function(){return{}}},handlersClasses:{type:Object,default:function(){return{}}},handlersWrappersClasses:{type:Object,default:function(){return{}}}},data:function(){return{moving:!1,resizing:!1}},computed:{classes:function(){return{stencil:A(le({movable:this.movable,moving:this.moving,resizing:this.resizing}),this.moving&&this.movingClass,this.resizing&&this.resizingClass),preview:A(le("preview"),this.previewClass),boundingBox:A(le("bounding-box"),this.boundingBoxClass)}},style:function(){var e=this.stencilCoordinates,t=e.height,n=e.width,r=e.left,o=e.top,a={width:"".concat(n,"px"),height:"".concat(t,"px"),transform:"translate(".concat(r,"px, ").concat(o,"px)")};return this.transitions&&this.transitions.enabled&&(a.transition="".concat(this.transitions.time,"ms ").concat(this.transitions.timingFunction)),a}},methods:{onMove:function(e){this.$emit("move",e),this.moving=!0},onMoveEnd:function(){this.$emit("move-end"),this.moving=!1},onResize:function(e){this.$emit("resize",e),this.resizing=!0},onResizeEnd:function(){this.$emit("resize-end"),this.resizing=!1},aspectRatios:function(){return{minimum:this.aspectRatio||this.minAspectRatio,maximum:this.aspectRatio||this.maxAspectRatio}}},emits:["resize","resize-end","move","move-end"]};ue.render=function(e,t,n,r,o,a){var s=resolveComponent("stencil-preview"),u=resolveComponent("draggable-area"),l=resolveComponent("bounding-box");return openBlock(),createBlock("div",{class:a.classes.stencil,style:a.style},[createVNode(l,{width:n.stencilCoordinates.width,height:n.stencilCoordinates.height,transitions:n.transitions,class:a.classes.boundingBox,handlers:n.handlers,"handlers-component":n.handlersComponent,"handlers-classes":n.handlersClasses,"handlers-wrappers-classes":n.handlersWrappersClasses,lines:n.lines,"lines-component":n.linesComponent,"lines-classes":n.linesClasses,"lines-wrappers-classes":n.linesWrappersClasses,resizable:n.resizable,onResize:a.onResize,onResizeEnd:a.onResizeEnd},{default:withCtx(function(){return[createVNode(u,{movable:n.movable,onMove:a.onMove,onMoveEnd:a.onMoveEnd},{default:withCtx(function(){return[createVNode(s,{image:n.image,coordinates:n.coordinates,width:n.stencilCoordinates.width,height:n.stencilCoordinates.height,class:a.classes.preview,transitions:n.transitions},null,8,["image","coordinates","width","height","class","transitions"])]}),_:1},8,["movable","onMove","onMoveEnd"])]}),_:1},8,["width","height","transitions","class","handlers","handlers-component","handlers-classes","handlers-wrappers-classes","lines","lines-component","lines-classes","lines-wrappers-classes","resizable","onResize","onResizeEnd"])],6)};var pe$1=["transitions"],ge$1=M("vue-advanced-cropper"),fe$1={name:"Cropper",components:{BackgroundWrapper:re$1},props:{src:{type:String,default:null},stencilComponent:{type:[Object,String],default:function(){return ue}},backgroundWrapperComponent:{type:[Object,String],default:function(){return re$1}},stencilProps:{type:Object,default:function(){return{}}},autoZoom:{type:Boolean,default:!1},imageClass:{type:String},boundariesClass:{type:String},backgroundClass:{type:String},foregroundClass:{type:String},minWidth:{type:[Number,String]},minHeight:{type:[Number,String]},maxWidth:{type:[Number,String]},maxHeight:{type:[Number,String]},debounce:{type:[Boolean,Number],default:500},transitions:{type:Boolean,default:!0},checkOrientation:{type:Boolean,default:!0},canvas:{type:[Object,Boolean],default:!0},crossOrigin:{type:[Boolean,String],default:void 0},transitionTime:{type:Number,default:300},imageRestriction:{type:String,default:"fit-area",validator:function(e){return K.indexOf(e)!==-1}},roundResult:{type:Boolean,default:!0},defaultSize:{type:[Function,Object]},defaultPosition:{type:[Function,Object]},defaultVisibleArea:{type:[Function,Object]},defaultTransforms:{type:[Function,Object]},defaultBoundaries:{type:[Function,String],validator:function(e){return!(typeof e=="string"&&e!=="fill"&&e!=="fit")}},priority:{type:String,default:"coordinates"},stencilSize:{type:[Object,Function]},resizeImage:{type:[Boolean,Object],default:!0},moveImage:{type:[Boolean,Object],default:!0},autoZoomAlgorithm:{type:Function},resizeAlgorithm:{type:Function,default:function(e){var t=e.event,n=e.coordinates,r=e.aspectRatio,o=e.positionRestrictions,a=e.sizeRestrictions,s=C(C({},n),{right:n.left+n.width,bottom:n.top+n.height}),u=t.params||{},l=C({},t.directions),c=u.allowedDirections||{left:!0,right:!0,bottom:!0,top:!0};a.widthFrozen&&(l.left=0,l.right=0),a.heightFrozen&&(l.top=0,l.bottom=0),V.forEach(function(Zr){c[Zr]||(l[Zr]=0)});var m=ot$1(s,l=It({coordinates:s,directions:l,sizeRestrictions:a,positionRestrictions:o})).width,me=ot$1(s,l).height,xe=u.preserveRatio?ct$1(s):dt$1(m/me,r);if(xe){var Ne=u.respectDirection;if(Ne||(Ne=s.width>=s.height||xe===1?"width":"height"),Ne==="width"){var He=m/xe-s.height;if(c.top&&c.bottom){var Ye=l.top,Je=l.bottom;l.bottom=Bt$1(He,Je,Ye),l.top=Bt$1(He,Ye,Je)}else c.bottom?l.bottom=He:c.top?l.top=He:c.right?l.right=0:c.left&&(l.left=0)}else if(Ne==="height"){var vn=s.width-me*xe;if(c.left&&c.right){var La=l.left,sr=l.right;l.left=-Bt$1(vn,La,sr),l.right=-Bt$1(vn,sr,La)}else c.left?l.left=-vn:c.right?l.right=-vn:c.top?l.top=0:c.bottom&&(l.bottom=0)}l=It({directions:l,coordinates:s,sizeRestrictions:a,positionRestrictions:o,preserveRatio:!0,compensate:u.compensate})}return m=ot$1(s,l).width,me=ot$1(s,l).height,(xe=u.preserveRatio?ct$1(s):dt$1(m/me,r))&&Math.abs(xe-m/me)>.001&&V.forEach(function(Zr){c[Zr]||(l[Zr]=0)}),St$1({event:new Y$1({left:-l.left,top:-l.top}),coordinates:{width:n.width+l.right+l.left,height:n.height+l.top+l.bottom,left:n.left,top:n.top},positionRestrictions:o})}},moveAlgorithm:{type:Function,default:St$1},initStretcher:{type:Function,default:function(e){var t=e.stretcher,n=e.imageSize,r=ct$1(n);t.style.width=n.width+"px",t.style.height=t.clientWidth/r+"px",t.style.width=t.clientWidth+"px"}},fitCoordinates:{type:Function,default:function(e){var t=e.visibleArea,n=e.coordinates,r=e.aspectRatio,o=e.sizeRestrictions,a=e.positionRestrictions,s=C(C({},n),Mt$1({width:n.width,height:n.height,aspectRatio:r,sizeRestrictions:{maxWidth:t.width,maxHeight:t.height,minHeight:Math.min(t.height,o.minHeight),minWidth:Math.min(t.width,o.minWidth)}}));return s=vt$1(s=at$1(s,it(nt(n),nt(s))),zt$1(et$1(t),a))}},fitVisibleArea:{type:Function,default:function(e){var t=e.visibleArea,n=e.boundaries,r=e.getAreaRestrictions,o=e.coordinates,a=C({},t);a.height=a.width/ct$1(n),a.top+=(t.height-a.height)/2,(o.height-a.height>0||o.width-a.width>0)&&(a=ht$1(a,Math.max(o.height/a.height,o.width/a.width)));var s=rt(ut$1(o,et$1(a=ht$1(a,ft(a,r({visibleArea:a,type:"resize"}))))));return a.width<o.width&&(s.left=0),a.height<o.height&&(s.top=0),a=vt$1(a=at$1(a,s),r({visibleArea:a,type:"move"}))}},areaRestrictionsAlgorithm:{type:Function,default:function(e){var t=e.visibleArea,n=e.boundaries,r=e.imageSize,o=e.imageRestriction,a=e.type,s={};return o==="fill-area"?s={left:0,top:0,right:r.width,bottom:r.height}:o==="fit-area"&&(ct$1(n)>ct$1(r)?(s={top:0,bottom:r.height},t&&a==="move"&&(t.width>r.width?(s.left=-(t.width-r.width)/2,s.right=r.width-s.left):(s.left=0,s.right=r.width))):(s={left:0,right:r.width},t&&a==="move"&&(t.height>r.height?(s.top=-(t.height-r.height)/2,s.bottom=r.height-s.top):(s.top=0,s.bottom=r.height)))),s}},sizeRestrictionsAlgorithm:{type:Function,default:function(e){return{minWidth:e.minWidth,minHeight:e.minHeight,maxWidth:e.maxWidth,maxHeight:e.maxHeight}}},positionRestrictionsAlgorithm:{type:Function,default:function(e){var t=e.imageSize,n={};return e.imageRestriction!=="none"&&(n={left:0,top:0,right:t.width,bottom:t.height}),n}}},data:function(){return{transitionsActive:!1,imageLoaded:!1,imageAttributes:{width:null,height:null,crossOrigin:null,src:null},defaultImageTransforms:{rotate:0,flip:{horizontal:!1,vertical:!1}},appliedImageTransforms:{rotate:0,flip:{horizontal:!1,vertical:!1}},boundaries:{width:0,height:0},visibleArea:null,coordinates:g({},J$1)}},computed:{image:function(){return{src:this.imageAttributes.src,width:this.imageAttributes.width,height:this.imageAttributes.height,transforms:this.imageTransforms}},imageTransforms:function(){return{rotate:this.appliedImageTransforms.rotate,flip:{horizontal:this.appliedImageTransforms.flip.horizontal,vertical:this.appliedImageTransforms.flip.vertical},translateX:this.visibleArea?this.visibleArea.left/this.coefficient:0,translateY:this.visibleArea?this.visibleArea.top/this.coefficient:0,scaleX:1/this.coefficient,scaleY:1/this.coefficient}},imageSize:function(){var e=function(t){return t*Math.PI/180}(this.imageTransforms.rotate);return{width:Math.abs(this.imageAttributes.width*Math.cos(e))+Math.abs(this.imageAttributes.height*Math.sin(e)),height:Math.abs(this.imageAttributes.width*Math.sin(e))+Math.abs(this.imageAttributes.height*Math.cos(e))}},initialized:function(){return Boolean(this.visibleArea&&this.imageLoaded)},settings:function(){var e=j$1(this.resizeImage,{touch:!0,wheel:{ratio:.1},adjustStencil:!0},{touch:!1,wheel:!1,adjustStencil:!1});return{moveImage:j$1(this.moveImage,{touch:!0,mouse:!0},{touch:!1,mouse:!1}),resizeImage:e}},coefficient:function(){return this.visibleArea?this.visibleArea.width/this.boundaries.width:0},areaRestrictions:function(){return this.imageLoaded?this.areaRestrictionsAlgorithm({imageSize:this.imageSize,imageRestriction:this.imageRestriction,boundaries:this.boundaries}):{}},transitionsOptions:function(){return{enabled:this.transitionsActive,timingFunction:"ease-in-out",time:350}},sizeRestrictions:function(){if(this.boundaries.width&&this.boundaries.height&&this.imageSize.width&&this.imageSize.height){var e=this.sizeRestrictionsAlgorithm({imageSize:this.imageSize,minWidth:D(this.minWidth)?0:L(this.minWidth),minHeight:D(this.minHeight)?0:L(this.minHeight),maxWidth:D(this.maxWidth)?1/0:L(this.maxWidth),maxHeight:D(this.maxHeight)?1/0:L(this.maxHeight)});if(e=function(r){var o=r.areaRestrictions,a=r.sizeRestrictions;r.imageSize;var s=r.boundaries,u=r.positionRestrictions;r.imageRestriction;var l=C(C({},a),{minWidth:a.minWidth!==void 0?a.minWidth:0,minHeight:a.minHeight!==void 0?a.minHeight:0,maxWidth:a.maxWidth!==void 0?a.maxWidth:1/0,maxHeight:a.maxHeight!==void 0?a.maxHeight:1/0});u.left!==void 0&&u.right!==void 0&&(l.maxWidth=Math.min(l.maxWidth,u.right-u.left)),u.bottom!==void 0&&u.top!==void 0&&(l.maxHeight=Math.min(l.maxHeight,u.bottom-u.top));var c=bt$1(o),m=mt(s,c);return c.width<1/0&&(!l.maxWidth||l.maxWidth>m.width)&&(l.maxWidth=Math.min(l.maxWidth,m.width)),c.height<1/0&&(!l.maxHeight||l.maxHeight>m.height)&&(l.maxHeight=Math.min(l.maxHeight,m.height)),l.minWidth>l.maxWidth&&(l.minWidth=l.maxWidth,l.widthFrozen=!0),l.minHeight>l.maxHeight&&(l.minHeight=l.maxHeight,l.heightFrozen=!0),l}({sizeRestrictions:e,areaRestrictions:this.getAreaRestrictions({visibleArea:this.visibleArea,type:"resize"}),imageSize:this.imageSize,boundaries:this.boundaries,positionRestrictions:this.positionRestrictions,imageRestriction:this.imageRestriction,visibleArea:this.visibleArea,stencilSize:this.getStencilSize()}),this.visibleArea&&this.stencilSize){var t=this.getStencilSize(),n=bt$1(this.getAreaRestrictions({visibleArea:this.visibleArea,type:"resize"}));e.maxWidth=Math.min(e.maxWidth,n.width*t.width/this.boundaries.width),e.maxHeight=Math.min(e.maxHeight,n.height*t.height/this.boundaries.height),e.maxWidth<e.minWidth&&(e.minWidth=e.maxWidth),e.maxHeight<e.minHeight&&(e.minHeight=e.maxHeight)}return e}return{minWidth:0,minHeight:0,maxWidth:0,maxHeight:0}},positionRestrictions:function(){return this.positionRestrictionsAlgorithm({imageSize:this.imageSize,imageRestriction:this.imageRestriction})},classes:function(){return{cropper:ge$1(),image:A(ge$1("image"),this.imageClass),stencil:ge$1("stencil"),boundaries:A(ge$1("boundaries"),this.boundariesClass),stretcher:A(ge$1("stretcher")),background:A(ge$1("background"),this.backgroundClass),foreground:A(ge$1("foreground"),this.foregroundClass),imageWrapper:A(ge$1("image-wrapper")),cropperWrapper:A(ge$1("cropper-wrapper"))}},stencilCoordinates:function(){if(this.initialized){var e=this.coordinates,t=e.width,n=e.height,r=e.left,o=e.top;return{width:t/this.coefficient,height:n/this.coefficient,left:(r-this.visibleArea.left)/this.coefficient,top:(o-this.visibleArea.top)/this.coefficient}}return this.defaultCoordinates()},boundariesStyle:function(){var e={width:this.boundaries.width?"".concat(Math.round(this.boundaries.width),"px"):"auto",height:this.boundaries.height?"".concat(Math.round(this.boundaries.height),"px"):"auto",transition:"opacity ".concat(this.transitionTime,"ms"),pointerEvents:this.imageLoaded?"all":"none"};return this.imageLoaded||(e.opacity="0"),e},imageStyle:function(){var e=this.imageAttributes.width>this.imageAttributes.height?{width:Math.min(1024,this.imageAttributes.width),height:Math.min(1024,this.imageAttributes.width)/(this.imageAttributes.width/this.imageAttributes.height)}:{height:Math.min(1024,this.imageAttributes.height),width:Math.min(1024,this.imageAttributes.height)*(this.imageAttributes.width/this.imageAttributes.height)},t={left:(e.width-this.imageSize.width)/(2*this.coefficient),top:(e.height-this.imageSize.height)/(2*this.coefficient)},n={left:(1-1/this.coefficient)*e.width/2,top:(1-1/this.coefficient)*e.height/2},r=g(g({},this.imageTransforms),{},{scaleX:this.imageTransforms.scaleX*(this.imageAttributes.width/e.width),scaleY:this.imageTransforms.scaleY*(this.imageAttributes.height/e.height)}),o={width:"".concat(e.width,"px"),height:"".concat(e.height,"px"),left:"0px",top:"0px",transform:"translate(".concat(-t.left-n.left-this.imageTransforms.translateX,"px, ").concat(-t.top-n.top-this.imageTransforms.translateY,"px)")+te(r)};return this.transitionsOptions.enabled&&(o.transition="".concat(this.transitionsOptions.time,"ms ").concat(this.transitionsOptions.timingFunction)),o}},watch:{src:function(){this.onChangeImage()},stencilComponent:function(){var e=this;this.$nextTick(function(){e.resetCoordinates(),e.runAutoZoom("setCoordinates"),e.onChange()})},minWidth:function(){this.onPropsChange()},maxWidth:function(){this.onPropsChange()},minHeight:function(){this.onPropsChange()},maxHeight:function(){this.onPropsChange()},imageRestriction:function(){this.reset()},stencilProps:function(e,t){["aspectRatio","minAspectRatio","maxAspectRatio"].find(function(n){return e[n]!==t[n]})&&this.$nextTick(this.onPropsChange)}},created:function(){this.debouncedUpdate=x(this.update,this.debounce),this.debouncedDisableTransitions=x(this.disableTransitions,this.transitionsOptions.time),this.awaiting=!1},mounted:function(){this.$refs.image.addEventListener("load",this.onSuccessLoadImage),this.$refs.image.addEventListener("error",this.onFailLoadImage),this.onChangeImage(),window.addEventListener("resize",this.refresh),window.addEventListener("orientationchange",this.refresh)},unmounted:function(){window.removeEventListener("resize",this.refresh),window.removeEventListener("orientationchange",this.refresh),this.imageAttributes.revoke&&this.imageAttributes.src&&URL.revokeObjectURL(this.imageAttributes.src)},methods:{getResult:function(){var e=this.initialized?this.prepareResult(g({},this.coordinates)):this.defaultCoordinates(),t={rotate:this.imageTransforms.rotate%360,flip:g({},this.imageTransforms.flip)};if(this.src&&this.imageLoaded){var n=this;return{image:this.image,coordinates:e,visibleArea:this.visibleArea?g({},this.visibleArea):null,imageTransforms:t,get canvas(){return n.canvas?n.getCanvas():void 0}}}return{image:this.image,coordinates:e,visibleArea:this.visibleArea?g({},this.visibleArea):null,canvas:void 0,imageTransforms:t}},zoom:function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=n.transitions,o=r===void 0||r;this.onManipulateImage(new B({},{factor:1/e,center:t}),{normalize:!1,transitions:o})},move:function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=n.transitions,o=r===void 0||r;this.onManipulateImage(new B({left:e||0,top:t||0}),{normalize:!1,transitions:o})},setCoordinates:function(e){var t=this,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.autoZoom,o=r===void 0||r,a=n.transitions,s=a===void 0||a;this.$nextTick(function(){t.imageLoaded?(t.transitionsActive||(s&&t.enableTransitions(),t.coordinates=t.applyTransform(e),o&&t.runAutoZoom("setCoordinates"),s&&t.debouncedDisableTransitions()),t.onChange()):t.delayedTransforms=e})},refresh:function(){var e=this,t=this.$refs.image;if(this.src&&t)return this.initialized?this.updateVisibleArea().then(function(){e.onChange()}):this.resetVisibleArea().then(function(){e.onChange()})},reset:function(){var e=this;return this.resetVisibleArea().then(function(){e.onChange()})},awaitRender:function(e){var t=this;this.awaiting||(this.awaiting=!0,this.$nextTick(function(){e(),t.awaiting=!1}))},prepareResult:function(e){return this.roundResult?function(t){var n=t.coordinates,r=t.sizeRestrictions,o=t.positionRestrictions,a={width:Math.round(n.width),height:Math.round(n.height),left:Math.round(n.left),top:Math.round(n.top)};return a.width>r.maxWidth?a.width=Math.floor(n.width):a.width<r.minWidth&&(a.width=Math.ceil(n.width)),a.height>r.maxHeight?a.height=Math.floor(n.height):a.height<r.minHeight&&(a.height=Math.ceil(n.height)),vt$1(a,o)}(g(g({},this.getPublicProperties()),{},{positionRestrictions:jt$1(this.positionRestrictions,this.visibleArea),coordinates:e})):e},processAutoZoom:function(e,t,n,r){var o=this.autoZoomAlgorithm;o||(o=this.stencilSize?Ct:this.autoZoom?Et$1:Wt$1);var a=o({event:{type:e,params:r},visibleArea:t,coordinates:n,boundaries:this.boundaries,aspectRatio:this.getAspectRatio(),positionRestrictions:this.positionRestrictions,getAreaRestrictions:this.getAreaRestrictions,sizeRestrictions:this.sizeRestrictions,stencilSize:this.getStencilSize()});return g(g({},a),{},{changed:!tt$1(a.visibleArea,t)||!tt$1(a.coordinates,n)})},runAutoZoom:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.transitions,r=n!==void 0&&n,o=v$1(t,pe$1),a=this.processAutoZoom(e,this.visibleArea,this.coordinates,o),s=a.visibleArea,u=a.coordinates,l=a.changed;r&&l&&this.enableTransitions(),this.visibleArea=s,this.coordinates=u,r&&l&&this.debouncedDisableTransitions()},normalizeEvent:function(e){return function(t){var n=t.event,r=t.visibleArea,o=t.coefficient;if(n.type==="manipulateImage")return C(C({},n),{move:{left:n.move&&n.move.left?o*n.move.left:0,top:n.move&&n.move.top?o*n.move.top:0},scale:{factor:n.scale&&n.scale.factor?n.scale.factor:1,center:n.scale&&n.scale.center?{left:n.scale.center.left*o+r.left,top:n.scale.center.top*o+r.top}:null}});if(n.type==="resize"){var a=C(C({},n),{directions:C({},n.directions)});return V.forEach(function(u){a.directions[u]*=o}),a}if(n.type==="move"){var s=C(C({},n),{directions:C({},n.directions)});return Q.forEach(function(u){s.directions[u]*=o}),s}return n}(g(g({},this.getPublicProperties()),{},{event:e}))},getCanvas:function(){if(this.$refs.canvas){var e=this.$refs.canvas,t=this.$refs.image,n=this.imageTransforms.rotate!==0||this.imageTransforms.flip.horizontal||this.imageTransforms.flip.vertical?function(u,l,c){var m=c.rotate,me=c.flip,xe={width:l.naturalWidth,height:l.naturalHeight},Ne=pt$1(xe,m),He=u.getContext("2d");u.height=Ne.height,u.width=Ne.width,He.save();var Ye=gt$1(nt(C({left:0,top:0},xe)),m);return He.translate(-(Ye.left-Ne.width/2),-(Ye.top-Ne.height/2)),He.rotate(m*Math.PI/180),He.translate(me.horizontal?xe.width:0,me.vertical?xe.height:0),He.scale(me.horizontal?-1:1,me.vertical?-1:1),He.drawImage(l,0,0,xe.width,xe.height),He.restore(),u}(this.$refs.sourceCanvas,t,this.imageTransforms):t,r=g({minWidth:0,minHeight:0,maxWidth:1/0,maxHeight:1/0,maxArea:this.maxCanvasSize,imageSmoothingEnabled:!0,imageSmoothingQuality:"high",fillColor:"transparent"},this.canvas),o=function(u){return u.find(function(l){return c=l,!Number.isNaN(parseFloat(c))&&isFinite(c);var c})},a=Mt$1({sizeRestrictions:{minWidth:o([r.width,r.minWidth])||0,minHeight:o([r.height,r.minHeight])||0,maxWidth:o([r.width,r.maxWidth])||1/0,maxHeight:o([r.height,r.maxHeight])||1/0},width:this.coordinates.width,height:this.coordinates.height,aspectRatio:{minimum:this.coordinates.width/this.coordinates.height,maximum:this.coordinates.width/this.coordinates.height}});if(r.maxArea&&a.width*a.height>r.maxArea){var s=Math.sqrt(r.maxArea/(a.width*a.height));a={width:Math.round(s*a.width),height:Math.round(s*a.height)}}return function(u,l,c,m,me){u.width=m?m.width:c.width,u.height=m?m.height:c.height;var xe=u.getContext("2d");xe.clearRect(0,0,u.width,u.height),me&&(me.imageSmoothingEnabled&&(xe.imageSmoothingEnabled=me.imageSmoothingEnabled),me.imageSmoothingQuality&&(xe.imageSmoothingQuality=me.imageSmoothingQuality),me.fillColor&&(xe.fillStyle=me.fillColor,xe.fillRect(0,0,u.width,u.height),xe.save())),xe.drawImage(l,c.left,c.top,c.width,c.height,0,0,u.width,u.height)}(e,n,this.coordinates,a,r),e}},update:function(){this.$emit("change",this.getResult())},applyTransform:function(e){var t=arguments.length>1&&arguments[1]!==void 0&&arguments[1],n=this.visibleArea&&t?wt$1(this.sizeRestrictions,this.visibleArea):this.sizeRestrictions,r=this.visibleArea&&t?jt$1(this.positionRestrictions,this.visibleArea):this.positionRestrictions;return xt$1({transform:e,coordinates:this.coordinates,imageSize:this.imageSize,sizeRestrictions:n,positionRestrictions:r,aspectRatio:this.getAspectRatio(),visibleArea:this.visibleArea})},resetCoordinates:function(){var e=this;if(this.$refs.image){this.$refs.cropper,this.$refs.image;var t=this.defaultSize;t||(t=this.stencilSize?Dt$1:Ot);var n=this.sizeRestrictions;n.minWidth,n.minHeight,n.maxWidth,n.maxHeight;var r=O(t)?t({boundaries:this.boundaries,imageSize:this.imageSize,aspectRatio:this.getAspectRatio(),sizeRestrictions:this.sizeRestrictions,stencilSize:this.getStencilSize(),visibleArea:this.visibleArea}):t,o=this.defaultPosition||Tt,a=[r,function(s){var u=s.coordinates;return g({},O(o)?o({coordinates:u,imageSize:e.imageSize,visibleArea:e.visibleArea}):e.defaultPosition)}];this.delayedTransforms&&a.push.apply(a,b(Array.isArray(this.delayedTransforms)?this.delayedTransforms:[this.delayedTransforms])),this.coordinates=this.applyTransform(a,!0),this.delayedTransforms=null}},clearImage:function(){var e=this;this.imageLoaded=!1,setTimeout(function(){var t=e.$refs.stretcher;t&&(t.style.height="auto",t.style.width="auto"),e.coordinates=e.defaultCoordinates(),e.boundaries={width:0,height:0}},this.transitionTime)},enableTransitions:function(){this.transitions&&(this.transitionsActive=!0)},disableTransitions:function(){this.transitionsActive=!1},updateBoundaries:function(){var e=this,t=this.$refs.stretcher,n=this.$refs.cropper;return this.initStretcher({cropper:n,stretcher:t,imageSize:this.imageSize}),this.$nextTick().then(function(){var r={cropper:n,imageSize:e.imageSize};if(O(e.defaultBoundaries)?e.boundaries=e.defaultBoundaries(r):e.defaultBoundaries==="fit"?e.boundaries=function(o){var a=o.cropper,s=o.imageSize,u=a.clientHeight,l=a.clientWidth,c=u,m=s.width*u/s.height;return m>l&&(m=l,c=s.height*l/s.width),{width:m,height:c}}(r):e.boundaries=function(o){var a=o.cropper;return{width:a.clientWidth,height:a.clientHeight}}(r),!e.boundaries.width||!e.boundaries.height)throw new Error("It's impossible to fit the cropper in the current container")})},resetVisibleArea:function(){var e=this;return this.appliedImageTransforms=g(g({},this.defaultImageTransforms),{},{flip:g({},this.defaultImageTransforms.flip)}),this.updateBoundaries().then(function(){e.priority!=="visible-area"&&(e.visibleArea=null,e.resetCoordinates());var t,n,r,o,a,s,u=e.defaultVisibleArea||Ht$1;e.visibleArea=O(u)?u({imageSize:e.imageSize,boundaries:e.boundaries,coordinates:e.priority!=="visible-area"?e.coordinates:null,getAreaRestrictions:e.getAreaRestrictions,stencilSize:e.getStencilSize()}):e.defaultVisibleArea,e.visibleArea=(t={visibleArea:e.visibleArea,boundaries:e.boundaries,getAreaRestrictions:e.getAreaRestrictions},n=t.visibleArea,r=t.boundaries,o=t.getAreaRestrictions,a=C({},n),s=ct$1(r),a.width/a.height!==s&&(a.height=a.width/s),vt$1(a,o({visibleArea:a,type:"move"}))),e.priority==="visible-area"?e.resetCoordinates():e.coordinates=e.fitCoordinates({visibleArea:e.visibleArea,coordinates:e.coordinates,aspectRatio:e.getAspectRatio(),positionRestrictions:e.positionRestrictions,sizeRestrictions:e.sizeRestrictions}),e.runAutoZoom("resetVisibleArea")}).catch(function(){e.visibleArea=null})},updateVisibleArea:function(){var e=this;return this.updateBoundaries().then(function(){e.visibleArea=e.fitVisibleArea({imageSize:e.imageSize,boundaries:e.boundaries,visibleArea:e.visibleArea,coordinates:e.coordinates,getAreaRestrictions:e.getAreaRestrictions}),e.coordinates=e.fitCoordinates({visibleArea:e.visibleArea,coordinates:e.coordinates,aspectRatio:e.getAspectRatio(),positionRestrictions:e.positionRestrictions,sizeRestrictions:e.sizeRestrictions}),e.runAutoZoom("updateVisibleArea")}).catch(function(){e.visibleArea=null})},onChange:function(){var e=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];e&&this.debounce?this.debouncedUpdate():this.update()},onChangeImage:function(){var e,t=this;if(this.imageLoaded=!1,this.delayedTransforms=null,this.src){if(function(o){if(T(o))return!1;var a=window.location,s=/(\w+:)?(?:\/\/)([\w.-]+)?(?::(\d+))?\/?/.exec(o)||[],u={protocol:s[1]||"",host:s[2]||"",port:s[3]||""},l=function(c){return c.port||((c.protocol||a.protocol)==="http"?80:433)};return!(!u.protocol&&!u.host&&!u.port||Boolean(u.protocol&&u.protocol==a.protocol&&u.host&&u.host==a.host&&u.host&&l(u)==l(a)))}(this.src)){var n=D(this.crossOrigin)?this.canvas:this.crossOrigin;n===!0&&(n="anonymous"),this.imageAttributes.crossOrigin=n||null}if(this.checkOrientation){var r=(e=this.src,new Promise(function(o){Jt$1(e).then(function(a){var s=ee$1(a);o(a?{source:e,arrayBuffer:a,orientation:s}:{source:e,arrayBuffer:null,orientation:null})}).catch(function(a){console.warn(a),o({source:e,arrayBuffer:null,orientation:null})})}));setTimeout(function(){r.then(t.onParseImage)},this.transitionTime)}else setTimeout(function(){t.onParseImage({source:t.src})},this.transitionTime)}else this.clearImage()},onFailLoadImage:function(){this.imageAttributes.src&&(this.clearImage(),this.$emit("error"))},onSuccessLoadImage:function(){var e=this,t=this.$refs.image;t&&!this.imageLoaded&&(this.imageAttributes.height=t.naturalHeight,this.imageAttributes.width=t.naturalWidth,this.imageLoaded=!0,this.reset().then(function(){e.$emit("ready"),e.onChange(!1)}))},onParseImage:function(e){var t=this,n=e.source,r=e.arrayBuffer,o=e.orientation;this.imageAttributes.revoke&&this.imageAttributes.src&&URL.revokeObjectURL(this.imageAttributes.src),this.imageAttributes.revoke=!1,r&&o&&o>1?W$1(n)||!T(n)?(this.imageAttributes.src=URL.createObjectURL(new Blob([r])),this.imageAttributes.revoke=!0):this.imageAttributes.src=function(a){for(var s=[],u=new Uint8Array(a);u.length>0;){var l=u.subarray(0,8192);s.push(String.fromCharCode.apply(null,Array.from?Array.from(l):l.slice())),u=u.subarray(8192)}return"data:image/jpeg;base64,"+btoa(s.join(""))}(r):this.imageAttributes.src=n,O(this.defaultTransforms)?this.appliedImageTransforms=Kt$1(this.defaultTransforms()):H$1(this.defaultTransforms)?this.appliedImageTransforms=Kt$1(this.defaultTransforms):this.appliedImageTransforms=function(a){var s=Kt$1({});if(a)switch(a){case 2:s.flip.horizontal=!0;break;case 3:s.rotate=-180;break;case 4:s.flip.vertical=!0;break;case 5:s.rotate=90,s.flip.vertical=!0;break;case 6:s.rotate=90;break;case 7:s.rotate=90,s.flip.horizontal=!0;break;case 8:s.rotate=-90}return s}(o),this.defaultImageTransforms=g(g({},this.appliedImageTransforms),{},{flip:g({},this.appliedImageTransforms.flip)}),this.$nextTick(function(){var a=t.$refs.image;a&&a.complete&&(function(s){return Boolean(s.naturalWidth)}(a)?t.onSuccessLoadImage():t.onFailLoadImage())})},onResizeEnd:function(){this.runAutoZoom("resize",{transitions:!0})},onMoveEnd:function(){this.runAutoZoom("move",{transitions:!0})},onMove:function(e){var t=this;this.transitionsOptions.enabled||this.awaitRender(function(){t.coordinates=t.moveAlgorithm(g(g({},t.getPublicProperties()),{},{positionRestrictions:jt$1(t.positionRestrictions,t.visibleArea),coordinates:t.coordinates,event:t.normalizeEvent(e)})),t.onChange()})},onResize:function(e){var t=this;this.transitionsOptions.enabled||this.stencilSize&&!this.autoZoom||this.awaitRender(function(){var n=t.sizeRestrictions,r=Math.min(t.coordinates.width,t.coordinates.height,20*t.coefficient);t.coordinates=t.resizeAlgorithm(g(g({},t.getPublicProperties()),{},{positionRestrictions:jt$1(t.positionRestrictions,t.visibleArea),sizeRestrictions:{maxWidth:Math.min(n.maxWidth,t.visibleArea.width),maxHeight:Math.min(n.maxHeight,t.visibleArea.height),minWidth:Math.max(n.minWidth,r),minHeight:Math.max(n.minHeight,r)},event:t.normalizeEvent(e)})),t.onChange(),t.ticking=!1})},onManipulateImage:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.transitionsOptions.enabled){var n=t.transitions,r=n!==void 0&&n,o=t.normalize,a=o===void 0||o;r&&this.enableTransitions();var s=Lt$1(g(g({},this.getPublicProperties()),{},{event:a?this.normalizeEvent(e):e,getAreaRestrictions:this.getAreaRestrictions,imageRestriction:this.imageRestriction,adjustStencil:!this.stencilSize&&this.settings.resizeImage.adjustStencil})),u=s.visibleArea,l=s.coordinates;this.visibleArea=u,this.coordinates=l,this.runAutoZoom("manipulateImage"),this.onChange(),r&&this.debouncedDisableTransitions()}},onPropsChange:function(){this.coordinates=this.applyTransform(this.coordinates,!0),this.onChange(!1)},getAreaRestrictions:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.visibleArea,n=e.type,r=n===void 0?"move":n;return this.areaRestrictionsAlgorithm({boundaries:this.boundaries,imageSize:this.imageSize,imageRestriction:this.imageRestriction,visibleArea:t,type:r})},getAspectRatio:function(e){var t,n,r=this.stencilProps,o=r.aspectRatio,a=r.minAspectRatio,s=r.maxAspectRatio;if(this.$refs.stencil.aspectRatios){var u=this.$refs.stencil.aspectRatios();t=u.minimum,n=u.maximum}if(D(t)&&(t=D(o)?a:o),D(n)&&(n=D(o)?s:o),!e&&(D(t)||D(n))){var l=this.getStencilSize(),c=l?ct$1(l):null;D(t)&&(t=P$1(c)?c:void 0),D(n)&&(n=P$1(c)?c:void 0)}return{minimum:t,maximum:n}},getStencilSize:function(){if(this.stencilSize)return e={currentStencilSize:{width:this.stencilCoordinates.width,height:this.stencilCoordinates.height},stencilSize:this.stencilSize,boundaries:this.boundaries,coefficient:this.coefficient,coordinates:this.coordinates,aspectRatio:this.getAspectRatio(!0)},t=e.boundaries,n=e.stencilSize,r=e.aspectRatio,dt$1(ct$1(o=O(n)?n({boundaries:t,aspectRatio:r}):n),r)&&(o=Mt$1({sizeRestrictions:{maxWidth:t.width,maxHeight:t.height,minWidth:0,minHeight:0},width:o.width,height:o.height,aspectRatio:{minimum:r.minimum,maximum:r.maximum}})),(o.width>t.width||o.height>t.height)&&(o=Mt$1({sizeRestrictions:{maxWidth:t.width,maxHeight:t.height,minWidth:0,minHeight:0},width:o.width,height:o.height,aspectRatio:{minimum:ct$1(o),maximum:ct$1(o)}})),o;var e,t,n,r,o},getPublicProperties:function(){return{coefficient:this.coefficient,visibleArea:this.visibleArea,coordinates:this.coordinates,boundaries:this.boundaries,sizeRestrictions:this.sizeRestrictions,positionRestrictions:this.positionRestrictions,aspectRatio:this.getAspectRatio(),imageRestriction:this.imageRestriction}},defaultCoordinates:function(){return g({},J$1)},flip:function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=n.transitions,o=r===void 0||r;if(!this.transitionsActive){o&&this.enableTransitions();var a=g({},this.imageTransforms.flip),s=$t$1({flip:{horizontal:e?!a.horizontal:a.horizontal,vertical:t?!a.vertical:a.vertical},previousFlip:a,rotate:this.imageTransforms.rotate,visibleArea:this.visibleArea,coordinates:this.coordinates,imageSize:this.imageSize,positionRestrictions:this.positionRestrictions,sizeRestrictions:this.sizeRestrictions,getAreaRestrictions:this.getAreaRestrictions,aspectRatio:this.getAspectRatio()}),u=s.visibleArea,l=s.coordinates;e&&(this.appliedImageTransforms.flip.horizontal=!this.appliedImageTransforms.flip.horizontal),t&&(this.appliedImageTransforms.flip.vertical=!this.appliedImageTransforms.flip.vertical),this.visibleArea=u,this.coordinates=l,this.onChange(),o&&this.debouncedDisableTransitions()}},rotate:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.transitions,r=n===void 0||n;if(!this.transitionsActive){r&&this.enableTransitions();var o=g({},this.imageSize);this.appliedImageTransforms.rotate+=e;var a=Pt$1({visibleArea:this.visibleArea,coordinates:this.coordinates,previousImageSize:o,imageSize:this.imageSize,angle:e,positionRestrictions:this.positionRestrictions,sizeRestrictions:this.sizeRestrictions,getAreaRestrictions:this.getAreaRestrictions,aspectRatio:this.getAspectRatio()}),s=a.visibleArea,u=a.coordinates,l=this.processAutoZoom("rotateImage",s,u);s=l.visibleArea,u=l.coordinates,this.visibleArea=s,this.coordinates=u,this.onChange(),r&&this.debouncedDisableTransitions()}}},emits:["change","error","ready"]},ve$1={key:0,ref:"canvas",style:{display:"none"}},be$1={key:1,ref:"sourceCanvas",style:{display:"none"}};fe$1.render=function(e,t,n,r,o,a){return openBlock(),createBlock("div",{ref:"cropper",class:a.classes.cropper},[createVNode("div",{ref:"stretcher",class:a.classes.stretcher},null,2),createVNode("div",{class:a.classes.boundaries,style:a.boundariesStyle},[(openBlock(),createBlock(resolveDynamicComponent(n.backgroundWrapperComponent),{class:a.classes.cropperWrapper,"wheel-resize":a.settings.resizeImage.wheel,"touch-resize":a.settings.resizeImage.touch,"touch-move":a.settings.moveImage.touch,"mouse-move":a.settings.moveImage.mouse,onMove:a.onManipulateImage,onResize:a.onManipulateImage},{default:withCtx(function(){return[createVNode("div",{class:a.classes.background,style:a.boundariesStyle},null,6),createVNode("div",{class:a.classes.imageWrapper},[createVNode("img",{ref:"image",crossorigin:o.imageAttributes.crossOrigin,src:o.imageAttributes.src,class:a.classes.image,style:a.imageStyle,onMousedown:t[1]||(t[1]=withModifiers(function(){},["prevent"]))},null,46,["crossorigin","src"])],2),createVNode("div",{class:a.classes.foreground,style:a.boundariesStyle},null,6),withDirectives((openBlock(),createBlock(resolveDynamicComponent(n.stencilComponent),mergeProps({ref:"stencil",image:a.image,coordinates:o.coordinates,"stencil-coordinates":a.stencilCoordinates,transitions:a.transitionsOptions},n.stencilProps,{onResize:a.onResize,onResizeEnd:a.onResizeEnd,onMove:a.onMove,onMoveEnd:a.onMoveEnd}),null,16,["image","coordinates","stencil-coordinates","transitions","onResize","onResizeEnd","onMove","onMoveEnd"])),[[vShow,o.imageLoaded]]),n.canvas?(openBlock(),createBlock("canvas",ve$1,null,512)):createCommentVNode("",!0),n.canvas?(openBlock(),createBlock("canvas",be$1,null,512)):createCommentVNode("",!0)]}),_:1},8,["class","wheel-resize","touch-resize","touch-move","mouse-move","onMove","onResize"]))],6)],2)};var theme_bubble="",AvatarUpload_vue_vue_type_style_index_0_scoped_true_lang="";const _sfc_main$A=defineComponent({components:{Cropper:fe$1},emits:["change"],props:{value:String,disabled:Boolean,hash:String,size:{default:"7rem",type:String},icon:{default:"person-fill",type:String}},data(){return{tempProfileImage:null}},methods:{onFileClick(){var e;(e=document.getElementById("fileInput"))==null||e.click()},selectFile(e){const t=e.target.files||e.dataTransfer.files;if(!!t.length){var n=new FileReader;n.onload=r=>{var a;const o=(a=r.target)==null?void 0:a.result;this.tempProfileImage=o},n.readAsDataURL(t[0])}},clearImage(){this.tempProfileImage=null},selectImage(){const t=this.$refs.cropper.getResult().canvas.toDataURL();this.tempProfileImage=null,console.log({data:t}),this.$emit("change",t)}}}),_hoisted_1$z={direction:"column",gap:"400",a:"center"},_hoisted_2$x=["src"],_hoisted_3$x=["name"],_hoisted_4$v={key:0,variant:"link",size:"sm"},_hoisted_5$n=["disabled"],_hoisted_6$k={key:0,class:"cropper"},_hoisted_7$h={pt:"300"};function _sfc_render$A(e,t,n,r,o,a){const s=resolveComponent("cropper");return openBlock(),createElementBlock(Fragment$1,null,[createBaseVNode("div",{class:"avatar-upload",id:"fileInputButton",onClick:t[1]||(t[1]=(...u)=>e.onFileClick&&e.onFileClick(...u))},[createBaseVNode("j-flex",_hoisted_1$z,[createBaseVNode("div",{class:"avatar-upload__avatar",style:normalizeStyle({width:e.size,height:e.size})},[e.value?(openBlock(),createElementBlock("img",{key:0,src:e.value},null,8,_hoisted_2$x)):(openBlock(),createElementBlock("j-icon",{key:1,class:"avatar-upload__icon",name:e.icon,size:"lg"},null,8,_hoisted_3$x))],4),e.value?createCommentVNode("",!0):(openBlock(),createElementBlock("j-button",_hoisted_4$v,"Upload image")),e.value?(openBlock(),createElementBlock("j-button",{key:1,variant:"link",onClick:t[0]||(t[0]=withModifiers(u=>e.$emit("change",null),["prevent"])),size:"sm"}," Remove image ")):createCommentVNode("",!0)])]),createBaseVNode("input",{disabled:e.disabled,id:"fileInput",type:"file",style:{display:"none"},onChange:t[2]||(t[2]=(...u)=>e.selectFile&&e.selectFile(...u))},null,40,_hoisted_5$n),e.tempProfileImage!==null?(openBlock(),createElementBlock("div",_hoisted_6$k,[createVNode(s,{ref:"cropper",class:"cropper__element",backgroundClass:"cropper__background",src:e.tempProfileImage,"stencil-props":{aspectRatio:12/12}},null,8,["src"]),createBaseVNode("j-box",_hoisted_7$h,[createBaseVNode("j-button",{onClick:t[3]||(t[3]=(...u)=>e.clearImage&&e.clearImage(...u))},"Cancel"),createBaseVNode("j-button",{variant:"primary",onClick:t[4]||(t[4]=(...u)=>e.selectImage&&e.selectImage(...u))},"Crop")])])):createCommentVNode("",!0)],64)}var AvatarUpload=_export_sfc(_sfc_main$A,[["render",_sfc_render$A],["__scopeId","data-v-7eb2879e"]]),CreateCommunity_vue_vue_type_style_index_0_scoped_true_lang="";const _sfc_main$z=defineComponent({components:{AvatarUpload},emits:["cancel","submit"],setup(){return{dataStore:useDataStore()}},data(){return{tabView:"",joiningLink:"",newCommunityName:"",newCommunityDesc:"",newProfileImage:"",isJoiningCommunity:!1,isCreatingCommunity:!1,nonFluxPerspectives:[]}},mounted(){this.getPerspectives()},computed:{canSubmit(){return isValid([{check:e=>!e,message:"This field is required"}],this.newCommunityName)}},methods:{joinCommunity(){this.isJoiningCommunity=!0,this.dataStore.joinCommunity({joiningLink:this.joiningLink}).then(()=>{this.$emit("submit")}).finally(()=>{this.isJoiningCommunity=!1})},createCommunity(){this.isCreatingCommunity=!0,this.dataStore.createCommunity({perspectiveName:this.newCommunityName,description:this.newCommunityDesc,image:this.newProfileImage,thumbnail:this.newProfileImage}).then(e=>{this.$emit("submit"),this.newCommunityName="",this.newCommunityDesc="",this.newProfileImage="";const t=this.dataStore.getChannelStates(e.neighbourhood.perspective.uuid);this.$router.push({name:"channel",params:{communityId:e.neighbourhood.perspective.uuid,channelId:t[0].id}})}).finally(()=>{this.isCreatingCommunity=!1})},createCommunityFromPerspective(e){this.isCreatingCommunity=!0,this.dataStore.createCommunity({perspectiveName:e.name,description:this.newCommunityDesc,image:this.newProfileImage,thumbnail:this.newProfileImage,perspective:e}).then(t=>{this.$emit("submit");const n=this.dataStore.getChannelNeighbourhoods(t.neighbourhood.perspective.uuid);this.$router.push({name:"channel",params:{communityId:t.neighbourhood.perspective.uuid,channelId:n[0].perspective.uuid}})}).finally(()=>{this.isCreatingCommunity=!1})},async getPerspectives(){const e=await hb$1(),t=Object.keys(this.dataStore.neighbourhoods),r=(await e.perspective.all()).filter(o=>!t.includes(o.uuid)&&o.name!=="Agent Profile");this.nonFluxPerspectives=r.map(o=>({name:o.name,neighbourhood:o.neighbourhood,sharedUrl:o.sharedUrl,uuid:o.uuid}))}}}),_withScopeId$h=e=>(pushScopeId("data-v-8284b4dc"),e=e(),popScopeId(),e),_hoisted_1$y={key:0,pt:"1000",pb:"800",px:"700"},_hoisted_2$w={direction:"column"},_hoisted_3$w=_withScopeId$h(()=>createBaseVNode("j-text",{variant:"heading-sm"},"Create community",-1)),_hoisted_4$u=_withScopeId$h(()=>createBaseVNode("j-text",{variant:"body"}," Make a community and start inviting people ",-1)),_hoisted_5$m=_withScopeId$h(()=>createBaseVNode("j-icon",{slot:"end",name:"chevron-right"},null,-1)),_hoisted_6$j=[_hoisted_3$w,_hoisted_4$u,_hoisted_5$m],_hoisted_7$g=_withScopeId$h(()=>createBaseVNode("j-text",{variant:"heading-sm"},"Join a community",-1)),_hoisted_8$f=_withScopeId$h(()=>createBaseVNode("j-text",{variant:"body"}," Join an already existing community ",-1)),_hoisted_9$d=_withScopeId$h(()=>createBaseVNode("j-icon",{slot:"end",name:"chevron-right"},null,-1)),_hoisted_10$d=[_hoisted_7$g,_hoisted_8$f,_hoisted_9$d],_hoisted_11$9=_withScopeId$h(()=>createBaseVNode("j-text",{variant:"heading-sm"},"Load community",-1)),_hoisted_12$6=_withScopeId$h(()=>createBaseVNode("j-text",{variant:"body"},"Load a existing perspective as community",-1)),_hoisted_13$6=_withScopeId$h(()=>createBaseVNode("j-icon",{slot:"end",name:"chevron-right"},null,-1)),_hoisted_14$6=[_hoisted_11$9,_hoisted_12$6,_hoisted_13$6],_hoisted_15$6={key:1,p:"800"},_hoisted_16$5={direction:"column",gap:"700"},_hoisted_17$3=["disabled"],_hoisted_18$3=_withScopeId$h(()=>createBaseVNode("j-icon",{name:"arrow-left-short"},null,-1)),_hoisted_19$3={key:0},_hoisted_20$3={key:0,direction:"column",gap:"500"},_hoisted_21$3=["value"],_hoisted_22$3=["value"],_hoisted_23$3=["loading","disabled"],_hoisted_24$3={key:1,style:{"text-align":"center"}},_hoisted_25$3=_withScopeId$h(()=>createBaseVNode("j-text",{variant:"heading-sm"}," Please wait while your community is being created ",-1)),_hoisted_26$3=_withScopeId$h(()=>createBaseVNode("j-text",{variant:"body"}," Right now this proccess might take a couple of minutes, so please be patient ",-1)),_hoisted_27$3=_withScopeId$h(()=>createBaseVNode("j-flex",{j:"center"},[createBaseVNode("j-spinner",{size:"lg"})],-1)),_hoisted_28$3=[_hoisted_25$3,_hoisted_26$3,_hoisted_27$3],_hoisted_29$3={key:1,direction:"column",gap:"500"},_hoisted_30$3=["value"],_hoisted_31$2=["disabled","loading"],_hoisted_32$2={key:2},_hoisted_33$2={key:0,direction:"column",gap:"500"},_hoisted_34$2={key:0,variant:"body"},_hoisted_35$1=["onClick"],_hoisted_36$1={variant:"heading-sm"},_hoisted_37$1=_withScopeId$h(()=>createBaseVNode("j-icon",{slot:"end",name:"chevron-right"},null,-1)),_hoisted_38$1={key:1,style:{"text-align":"center"}},_hoisted_39$1=_withScopeId$h(()=>createBaseVNode("j-text",{variant:"heading-sm"}," Please wait while your community is being created ",-1)),_hoisted_40=_withScopeId$h(()=>createBaseVNode("j-text",{variant:"body"}," Right now this proccess might take a couple of minutes, so please be patient ",-1)),_hoisted_41=_withScopeId$h(()=>createBaseVNode("j-flex",{j:"center"},[createBaseVNode("j-spinner",{size:"lg"})],-1)),_hoisted_42=[_hoisted_39$1,_hoisted_40,_hoisted_41];function _sfc_render$z(e,t,n,r,o,a){const s=resolveComponent("avatar-upload");return openBlock(),createElementBlock(Fragment$1,null,[e.tabView?createCommentVNode("",!0):(openBlock(),createElementBlock("j-box",_hoisted_1$y,[createBaseVNode("j-flex",_hoisted_2$w,[createBaseVNode("j-menu-item",{class:"choice-button",size:"xl",onClick:t[0]||(t[0]=u=>e.tabView="Create")},_hoisted_6$j),createBaseVNode("j-menu-item",{class:"choice-button",size:"xl",onClick:t[1]||(t[1]=u=>e.tabView="Join")},_hoisted_10$d),createBaseVNode("j-menu-item",{class:"choice-button",size:"xl",onClick:t[2]||(t[2]=u=>e.tabView="Load")},_hoisted_14$6)])])),e.tabView?(openBlock(),createElementBlock("j-box",_hoisted_15$6,[createBaseVNode("j-flex",_hoisted_16$5,[createBaseVNode("j-button",{disabled:e.isCreatingCommunity||e.isJoiningCommunity,variant:"link",onClick:t[3]||(t[3]=u=>e.tabView="")},[_hoisted_18$3,createTextVNode(" Back ")],8,_hoisted_17$3),e.tabView==="Create"?(openBlock(),createElementBlock("div",_hoisted_19$3,[e.isCreatingCommunity?createCommentVNode("",!0):(openBlock(),createElementBlock("j-flex",_hoisted_20$3,[createVNode(s,{value:e.newProfileImage,onChange:t[4]||(t[4]=u=>e.newProfileImage=u),icon:"camera"},null,8,["value"]),createBaseVNode("j-input",{size:"lg",label:"Name",required:"",autovalidate:"",onKeydown:t[5]||(t[5]=withKeys((...u)=>e.createCommunity&&e.createCommunity(...u),["enter"])),onInput:t[6]||(t[6]=u=>e.newCommunityName=u.target.value),value:e.newCommunityName},null,40,_hoisted_21$3),createBaseVNode("j-input",{size:"lg",label:"Description",value:e.newCommunityDesc,onKeydown:t[7]||(t[7]=withKeys((...u)=>e.createCommunity&&e.createCommunity(...u),["enter"])),onInput:t[8]||(t[8]=u=>e.newCommunityDesc=u.target.value)},null,40,_hoisted_22$3),createBaseVNode("j-button",{full:"",loading:e.isCreatingCommunity,disabled:e.isCreatingCommunity||!e.canSubmit,size:"lg",variant:"primary",onClick:t[9]||(t[9]=(...u)=>e.createCommunity&&e.createCommunity(...u))}," Create Community ",8,_hoisted_23$3)])),e.isCreatingCommunity?(openBlock(),createElementBlock("div",_hoisted_24$3,_hoisted_28$3)):createCommentVNode("",!0)])):createCommentVNode("",!0),e.tabView==="Join"?(openBlock(),createElementBlock("j-flex",_hoisted_29$3,[createBaseVNode("j-input",{value:e.joiningLink,onKeydown:t[10]||(t[10]=withKeys((...u)=>e.joinCommunity&&e.joinCommunity(...u),["enter"])),onInput:t[11]||(t[11]=u=>e.joiningLink=u.target.value),size:"lg",label:"Invite link"},null,40,_hoisted_30$3),createBaseVNode("j-button",{disabled:e.isJoiningCommunity||!e.joiningLink,loading:e.isJoiningCommunity,onClick:t[12]||(t[12]=(...u)=>e.joinCommunity&&e.joinCommunity(...u)),size:"lg",full:"",variant:"primary"}," Join Community ",8,_hoisted_31$2)])):createCommentVNode("",!0),e.tabView==="Load"?(openBlock(),createElementBlock("div",_hoisted_32$2,[e.isCreatingCommunity?createCommentVNode("",!0):(openBlock(),createElementBlock("j-flex",_hoisted_33$2,[e.nonFluxPerspectives.length===0?(openBlock(),createElementBlock("j-text",_hoisted_34$2,"No perspective found that is not a flux community")):createCommentVNode("",!0),(openBlock(!0),createElementBlock(Fragment$1,null,renderList(e.nonFluxPerspectives,u=>(openBlock(),createElementBlock("j-menu-item",{key:u.uuid,class:"choice-button",size:"xl",onClick:l=>e.createCommunityFromPerspective(u)},[createBaseVNode("j-text",_hoisted_36$1,toDisplayString(u.name),1),_hoisted_37$1],8,_hoisted_35$1))),128))])),e.isCreatingCommunity?(openBlock(),createElementBlock("div",_hoisted_38$1,_hoisted_42)):createCommentVNode("",!0)])):createCommentVNode("",!0)])])):createCommentVNode("",!0)],64)}var CreateCommunity=_export_sfc(_sfc_main$z,[["render",_sfc_render$z],["__scopeId","data-v-8284b4dc"]]);const _sfc_main$y=defineComponent({name:"MainAppView",setup(){return{appStore:useAppStore()}},components:{MainSidebar,AppLayout,CreateCommunity},data(){return{isInit:!1}},computed:{modals(){return this.appStore.modals}},methods:{...mapActions(useAppStore,["setShowEditProfile","setShowSettings","setShowCreateCommunity","setShowDisclaimer"])}}),_hoisted_1$x=["open"],_hoisted_2$v=["open"],_hoisted_3$v=createBaseVNode("j-box",{p:"800"},[createBaseVNode("j-box",{pb:"500"},[createBaseVNode("j-flex",{gap:"400",a:"center"},[createBaseVNode("j-icon",{name:"exclamation-diamond",size:"xl"}),createBaseVNode("j-text",{nomargin:"",variant:"heading-lg"},"Disclaimer")])]),createBaseVNode("j-text",{variant:"ingress"}," This is an early version of Flux. Don't use this for essential communication. "),createBaseVNode("ul",null,[createBaseVNode("li",null,"You might loose your communities and chat messages"),createBaseVNode("li",null,"Messages might not always be delivered reliably")])],-1),_hoisted_4$t=[_hoisted_3$v];function _sfc_render$y(e,t,n,r,o,a){const s=resolveComponent("main-sidebar"),u=resolveComponent("router-view"),l=resolveComponent("app-layout"),c=resolveComponent("create-community");return openBlock(),createElementBlock(Fragment$1,null,[createVNode(l,null,{sidebar:withCtx(()=>[createVNode(s)]),default:withCtx(()=>[createVNode(u)]),_:1}),createBaseVNode("j-modal",{size:"sm",open:e.modals.showCreateCommunity,onToggle:t[2]||(t[2]=m=>e.setShowCreateCommunity(m.target.open))},[e.modals.showCreateCommunity?(openBlock(),createBlock(c,{key:0,onSubmit:t[0]||(t[0]=()=>e.setShowCreateCommunity(!1)),onCancel:t[1]||(t[1]=()=>e.setShowCreateCommunity(!1))})):createCommentVNode("",!0)],40,_hoisted_1$x),createBaseVNode("j-modal",{open:e.modals.showDisclaimer,onToggle:t[3]||(t[3]=m=>e.setShowDisclaimer(m.target.open))},_hoisted_4$t,40,_hoisted_2$v)],64)}var MainView=_export_sfc(_sfc_main$y,[["render",_sfc_render$y]]);const _sfc_main$x={},_hoisted_1$w={viewBox:"0 0 284 294",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$u=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M145.017 0.025063C171.517 0.929884 187.889 28.4329 209.488 43.8132C229.85 58.312 255.377 66.438 268.317 87.8239C281.925 110.314 286.137 137.867 282.116 163.845C278.117 189.675 262.289 211.197 246.048 231.677C229.16 252.971 211.718 275.1 186.286 284.683C159.943 294.609 128.948 297.504 103.545 285.372C79.0668 273.681 72.7007 242.688 55.1109 222.037C37.7266 201.627 6.16073 191.142 0.892192 164.855C-4.38252 138.537 14.8641 113.988 28.8656 91.0885C41.4913 70.4388 58.6047 54.2453 77.6524 39.3118C98.5321 22.9419 118.5 -0.880311 145.017 0.025063Z",fill:"url(#paint0_linear)","fill-opacity":"0.6"},null,-1),_hoisted_3$u=createBaseVNode("defs",null,[createBaseVNode("linearGradient",{id:"paint0_linear",x1:"0",y1:"0",x2:"340.094",y2:"80.9644",gradientUnits:"userSpaceOnUse"},[createBaseVNode("stop",{offset:"0.376642","stop-color":"#D3CFFF"}),createBaseVNode("stop",{offset:"1","stop-color":"#E4FFD6"})])],-1),_hoisted_4$s=[_hoisted_2$u,_hoisted_3$u];function _sfc_render$x(e,t){return openBlock(),createElementBlock("svg",_hoisted_1$w,_hoisted_4$s)}var Orb=_export_sfc(_sfc_main$x,[["render",_sfc_render$x]]);const _sfc_main$w={},_hoisted_1$v={viewBox:"0 0 196 333",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$t=createBaseVNode("path",{d:"M43.6081 290.682C6.50649 253.405 -10.1518 182.742 6.40079 132.85L35.4542 45.2787C52.0068 -4.61315 95.5021 -14.8399 132.604 22.4366L152.392 42.318C189.494 79.5945 206.152 150.258 189.599 200.15L160.546 287.721C143.993 337.613 100.498 347.84 63.3963 310.563L43.6081 290.682Z",fill:"url(#paint0_linear)","fill-opacity":"0.6"},null,-1),_hoisted_3$t=createBaseVNode("defs",null,[createBaseVNode("linearGradient",{id:"paint0_linear",x1:"0",y1:"0",x2:"243.277",y2:"35.2643",gradientUnits:"userSpaceOnUse"},[createBaseVNode("stop",{offset:"0.376642","stop-color":"#D3CFFF"}),createBaseVNode("stop",{offset:"1","stop-color":"#E4FFD6"})])],-1),_hoisted_4$r=[_hoisted_2$t,_hoisted_3$t];function _sfc_render$w(e,t){return openBlock(),createElementBlock("svg",_hoisted_1$v,_hoisted_4$r)}var Orb2=_export_sfc(_sfc_main$w,[["render",_sfc_render$w]]);const _sfc_main$v={},_hoisted_1$u={viewBox:"0 0 294 291",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$s=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M145.264 0.00518872C173.158 0.477488 188.24 32.8974 209.622 50.8171C227.926 66.1575 248.373 78.0006 261.852 97.7158C277.312 120.328 297.083 145.122 292.566 172.138C288.052 199.138 258.524 212.952 239.323 232.462C221.496 250.575 207.663 273.53 183.902 282.548C159.293 291.887 130.827 292.994 106.536 282.854C83.1793 273.105 72.7309 247.269 55.3377 228.882C36.9426 209.435 7.30872 197.748 1.34624 171.652C-4.65811 145.373 10.5309 118.784 24.983 96.0291C38.1607 75.2807 60.2816 63.9487 79.4905 48.6137C101.236 31.2533 117.443 -0.465888 145.264 0.00518872Z",fill:"url(#paint0_linear)","fill-opacity":"0.6"},null,-1),_hoisted_3$s=createBaseVNode("defs",null,[createBaseVNode("linearGradient",{id:"paint0_linear",x1:"0",y1:"0",x2:"349.902",y2:"87.1251",gradientUnits:"userSpaceOnUse"},[createBaseVNode("stop",{offset:"0.376642","stop-color":"#D3CFFF"}),createBaseVNode("stop",{offset:"1","stop-color":"#E4FFD6"})])],-1),_hoisted_4$q=[_hoisted_2$s,_hoisted_3$s];function _sfc_render$v(e,t){return openBlock(),createElementBlock("svg",_hoisted_1$u,_hoisted_4$q)}var Orb3=_export_sfc(_sfc_main$v,[["render",_sfc_render$v]]),SignUpCarousel_vue_vue_type_style_index_0_scoped_true_lang="";const _sfc_main$u=defineComponent({components:{Orb,Orb2,Orb3},data(){return{currentIndex:0,interval:null}},mounted(){this.interval=setInterval(()=>{this.currentIndex=this.currentIndex>=3?0:this.currentIndex+1;const e=this.$refs.carousel;e.value=this.currentIndex},3e3)},unmounted(){clearInterval(this.interval)}}),_withScopeId$g=e=>(pushScopeId("data-v-1ba3b77a"),e=e(),popScopeId(),e),_hoisted_1$t={ref:"carousel",class:"slider"},_hoisted_2$r={class:"slider__slide"},_hoisted_3$r={class:"slider__slide-content"},_hoisted_4$p={pt:"500",pb:"800"},_hoisted_5$l=_withScopeId$g(()=>createBaseVNode("j-text",{variant:"heading"},"Communicate Privately and Freely",-1)),_hoisted_6$i=_withScopeId$g(()=>createBaseVNode("j-text",{variant:"ingress"}," Without central servers, there's no way for third-parties to eavesdrop on your conversations or sell your data to advertisers ",-1)),_hoisted_7$f={class:"slider__slide"},_hoisted_8$e={class:"slider__slide-content"},_hoisted_9$c={pt:"500",pb:"800"},_hoisted_10$c=_withScopeId$g(()=>createBaseVNode("j-text",{variant:"heading"}," Create Groups, Communities and Networks ",-1)),_hoisted_11$8=_withScopeId$g(()=>createBaseVNode("j-text",{variant:"ingress"}," Organize and aggregate social organisms of any size or scale with a level of fluidity and interoperability only possible with p2p design ",-1)),_hoisted_12$5={class:"slider__slide"},_hoisted_13$5={class:"slider__slide-content"},_hoisted_14$5={pt:"500",pb:"800"},_hoisted_15$5=_withScopeId$g(()=>createBaseVNode("j-text",{variant:"heading"},"Take Back the Internet",-1)),_hoisted_16$4=_withScopeId$g(()=>createBaseVNode("j-text",{variant:"ingress"}," With Holochain's agent-centric application framework, you own your data, manage your identity, and host the apps that you use with those you trust ",-1));function _sfc_render$u(e,t,n,r,o,a){const s=resolveComponent("Orb3"),u=resolveComponent("Orb"),l=resolveComponent("Orb2");return openBlock(),createElementBlock("j-carousel",_hoisted_1$t,[createBaseVNode("div",_hoisted_2$r,[createBaseVNode("div",_hoisted_3$r,[createBaseVNode("j-box",_hoisted_4$p,[createVNode(s,{height:"35vh"})]),_hoisted_5$l,_hoisted_6$i])]),createBaseVNode("div",_hoisted_7$f,[createBaseVNode("div",_hoisted_8$e,[createBaseVNode("j-box",_hoisted_9$c,[createVNode(u,{height:"35vh"})]),_hoisted_10$c,_hoisted_11$8])]),createBaseVNode("div",_hoisted_12$5,[createBaseVNode("div",_hoisted_13$5,[createBaseVNode("j-box",_hoisted_14$5,[createVNode(l,{height:"35vh"})]),_hoisted_15$5,_hoisted_16$4])])],512)}var Carousel=_export_sfc(_sfc_main$u,[["render",_sfc_render$u],["__scopeId","data-v-1ba3b77a"]]);const _sfc_main$t={},_hoisted_1$s={viewBox:"0 0 1332 344",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$q=createBaseVNode("path",{d:"M0 0H283.786V62.6259H75.387V133.073H260.825V194.833H75.387V337.913H0V0Z",fill:"var(--j-color-black)"},null,-1),_hoisted_3$q=createBaseVNode("path",{d:"M307.592 0H382.545V275.287H579.68V337.913H307.592V0Z",fill:"var(--j-color-black)"},null,-1),_hoisted_4$o=createBaseVNode("path",{d:"M664.373 -0.000449566V35.7361C664.373 112.578 635.04 118.432 635.04 152.822C635.04 202.015 690.535 275.287 754.929 275.287C768.742 275.665 782.444 272.703 794.877 266.648C807.31 260.593 818.109 251.624 826.362 240.499C856.604 203.536 809.082 179.854 809.082 135.819C809.082 104.413 845.478 93.59 845.478 51.3306V-0.00634766H920.841V58.0176C920.841 73.7685 917.153 89.2979 910.077 103.356L898.578 126.211C891.307 140.691 889.771 157.399 894.282 172.97C906.28 214.505 924.367 249.317 885.798 292.627C858.535 323.26 818.811 343.994 754.905 343.994C690.998 343.994 640.756 310.057 622.176 269.138C586.706 191.04 495.65 202.751 495.65 159.453C495.65 134.388 513.172 122.491 547.397 100.416C576.188 81.8622 588.944 65.3245 588.944 1.81764V0.00692305H664.331L664.373 -0.000449566Z",fill:"var(--j-color-black)"},null,-1),_hoisted_5$k=createBaseVNode("path",{d:"M1135.73 213.967L1031.75 337.913H936.862L1089.8 164.393L942.927 0H1043.01L1135.3 116.983L1225.41 0H1325.5L1181.66 166.562L1332 337.913H1237.11L1135.73 213.967Z",fill:"var(--j-color-black)"},null,-1),_hoisted_6$h=[_hoisted_2$q,_hoisted_3$q,_hoisted_4$o,_hoisted_5$k];function _sfc_render$t(e,t){return openBlock(),createElementBlock("svg",_hoisted_1$s,_hoisted_6$h)}var Logo=_export_sfc(_sfc_main$t,[["render",_sfc_render$t]]);function mapLiteralLinks(e,t){return Object.keys(t).reduce((n,r)=>{const o=t[r],a=e==null?void 0:e.find(s=>s.data.predicate===o);return a?{...n,[r]:lib.exports.Literal.fromUrl(a.data.target).get()}:n},{})}var SignUp_vue_vue_type_style_index_0_scoped_true_lang="";const _sfc_main$s=defineComponent({name:"SignUp",components:{AvatarUpload,Carousel,Logo},setup(){const e=ref(!0),t=ref(),n=ref(!1),r=ref(!1),o=ref(!1),a=ref(!1),s=useUserStore(),{value:u,error:l,errorMessage:c,isValid:m,validate:me}=useValidation({initialValue:"",rules:[{check:Je=>!Je,message:"Username is required"},{check:Je=>Je.length<3,message:"Should be 3 or more characters"}]}),xe=ref(""),Ne=ref(""),He=ref(""),Ye=ref(!1);return{showSignup:e,isLoggingIn:o,profilePicture:t,hasUser:s.agent.isInitialized,modalOpen:n,isCreatingUser:r,name:xe,username:u,usernameError:l,usernameErrorMessage:c,usernameIsValid:m,validateUsername:me,showPassword:a,email:He,familyName:Ne,logInError:Ye,userStore:s}},async created(){try{const e=await hb$1(),n=(await e.perspective.all()).find(({name:r})=>r==="Agent Profile");if(n){const r=await e.perspective.snapshotByUUID(n.uuid),o=mapLiteralLinks(r==null?void 0:r.links,{username:AD4M_PREDICATE_USERNAME,name:AD4M_PREDICATE_FIRSTNAME,familyName:AD4M_PREDICATE_LASTNAME});this.username=o.username,this.name=o.name,this.familyName=o.familyName}}catch(e){console.log(e)}},computed:{canSignUp(){return this.usernameIsValid}},methods:{async createUser(){this.isCreatingUser=!0,this.userStore.createUser({givenName:this.name,familyName:this.familyName,email:this.email,username:this.username,profilePicture:this.profilePicture}).then(()=>this.$router.push("/")).finally(()=>{this.isCreatingUser=!1})}}}),_withScopeId$f=e=>(pushScopeId("data-v-634ff075"),e=e(),popScopeId(),e),_hoisted_1$r={class:"signup-view__flow"},_hoisted_2$p={direction:"column",gap:"400"},_hoisted_3$p={class:"signup-view__flow-back",pb:"500"},_hoisted_4$n=_withScopeId$f(()=>createBaseVNode("j-icon",{name:"arrow-left-short"},null,-1)),_hoisted_5$j={pb:"800"},_hoisted_6$g=_withScopeId$f(()=>createBaseVNode("j-text",{variant:"heading"}," Create a user ",-1)),_hoisted_7$e=["value","error","errortext"],_hoisted_8$d=["value"],_hoisted_9$b=["value"],_hoisted_10$b=["value"],_hoisted_11$7=["disabled","loading"],_hoisted_12$4=_withScopeId$f(()=>createBaseVNode("j-icon",{slot:"end",name:"check"},null,-1)),_hoisted_13$4={class:"signup-view__intro"},_hoisted_14$4={class:"signup-view__intro-content"},_hoisted_15$4=_withScopeId$f(()=>createBaseVNode("j-button",{variant:"primary",size:"xl"}," Sign up ",-1)),_hoisted_16$3=[_hoisted_15$4];function _sfc_render$s(e,t,n,r,o,a){const s=resolveComponent("Logo"),u=resolveComponent("avatar-upload"),l=resolveComponent("Carousel");return openBlock(),createElementBlock("div",{class:normalizeClass(["signup-view",{"signup-view--show-signup":e.showSignup}])},[createBaseVNode("div",_hoisted_1$r,[createBaseVNode("j-flex",_hoisted_2$p,[createBaseVNode("j-box",_hoisted_3$p,[createBaseVNode("j-button",{onClick:t[0]||(t[0]=c=>e.showSignup=!1),variant:"link"},[_hoisted_4$n,createTextVNode(" Back ")])]),createBaseVNode("j-box",_hoisted_5$j,[createVNode(s,{width:"150px"})]),_hoisted_6$g,createVNode(u,{icon:"camera",value:e.profilePicture,onChange:t[1]||(t[1]=c=>e.profilePicture=c)},null,8,["value"]),createBaseVNode("j-input",{label:"Username",size:"xl",value:e.username,onInput:t[2]||(t[2]=c=>e.username=c.target.value),error:e.usernameError,errortext:e.usernameErrorMessage,onBlur:t[3]||(t[3]=c=>e.validateUsername())},null,40,_hoisted_7$e),createBaseVNode("j-input",{size:"lg",label:"First Name (optional)",value:e.name,onInput:t[4]||(t[4]=c=>e.name=c.target.value)},null,40,_hoisted_8$d),createBaseVNode("j-input",{size:"lg",label:"Last Name (optional)",value:e.familyName,onInput:t[5]||(t[5]=c=>e.familyName=c.target.value)},null,40,_hoisted_9$b),createBaseVNode("j-input",{size:"lg",type:"email",label:"Email (optional)",value:e.email,onInput:t[6]||(t[6]=c=>e.email=c.target.value)},null,40,_hoisted_10$b),createBaseVNode("j-button",{style:{width:"100%"},full:"",disabled:e.isCreatingUser||!e.canSignUp,loading:e.isCreatingUser,size:"lg",variant:"primary",onClick:t[7]||(t[7]=(...c)=>e.createUser&&e.createUser(...c))},[_hoisted_12$4,createTextVNode(" Create user ")],8,_hoisted_11$7)])]),createBaseVNode("div",_hoisted_13$4,[createBaseVNode("div",_hoisted_14$4,[createVNode(l),createBaseVNode("j-box",{class:"signup-view__intro-button",onClick:t[8]||(t[8]=c=>e.showSignup=!0),pt:"900"},_hoisted_16$3)])])],2)}var SignUp=_export_sfc(_sfc_main$s,[["render",_sfc_render$s],["__scopeId","data-v-634ff075"]]),SidebarLayout_vue_vue_type_style_index_0_lang="";const _sfc_main$r=defineComponent({setup(){return{appStore:useAppStore()}},data(){return{isDragging:!1,startX:0,startWidth:0}},computed:{open(){return this.appStore.showSidebar}},methods:{startResize(e){const t=this.$refs.sidebar;this.startWidth=t.getBoundingClientRect().width,this.isDragging=!0,this.startX=e.clientX,document.addEventListener("mousemove",this.doResize,!1),document.addEventListener("mouseup",this.stopResize,!1)},doResize(e){this.appStore.setSidebarWidth(this.startWidth+(e.clientX-this.startX))},stopResize(){this.isDragging=!1,document.removeEventListener("mousemove",this.doResize),document.addEventListener("mouseup",this.stopResize,!1)}}}),_hoisted_1$q={class:"sidebar-layout__main"};function _sfc_render$r(e,t,n,r,o,a){return openBlock(),createElementBlock("div",{class:normalizeClass(["sidebar-layout",{"sidebar-layout--closed":!e.open,"sidebar-layout--is-dragging":e.isDragging}])},[createBaseVNode("aside",{class:"sidebar-layout__drawer",style:normalizeStyle({width:`${e.appStore.sidebarWidth}px`}),ref:"sidebar"},[createBaseVNode("span",{role:"presentation",class:"sidebar-layout__resize-handle",onMousedown:t[0]||(t[0]=(...s)=>e.startResize&&e.startResize(...s))},null,32),renderSlot(e.$slots,"sidebar")],4),createBaseVNode("main",_hoisted_1$q,[renderSlot(e.$slots,"default")])],2)}var SidebarLayout=_export_sfc(_sfc_main$r,[["render",_sfc_render$r]]),Skeleton_vue_vue_type_style_index_0_scoped_true_lang="";const _sfc_main$q=defineComponent({props:{height:{type:String,default:"20px"},width:{type:String,default:"100%"},variant:{type:String,default:"rectangle"}}});function _sfc_render$q(e,t,n,r,o,a){return openBlock(),createElementBlock("div",{class:normalizeClass(["skeleton",{"skeleton--circle":e.variant==="circle"}]),style:normalizeStyle({width:e.width,height:e.height})},null,6)}var Skeleton=_export_sfc(_sfc_main$q,[["render",_sfc_render$q],["__scopeId","data-v-5b3987cd"]]),AvatarGroup_vue_vue_type_style_index_0_scoped_true_lang="";const _sfc_main$p=defineComponent({emits:["click"],components:{Skeleton},props:["users","size"],data(){return{firstUsers:[],loading:!1}},watch:{users:{handler:async function(e){this.firstUsers=[],this.loading=!0;for(const t of e)if(t){const n=await getProfile(t);if(n&&!this.firstUsers.find(r=>r.did===t)&&this.firstUsers.length<=2&&(this.firstUsers=[...this.firstUsers,n],this.firstUsers.length>=3))break}this.loading=!1},immediate:!0,deep:!0}}}),_hoisted_1$p={title:"See all members"},_hoisted_2$o={class:"avatar-group__avatars"},_hoisted_3$o=["data-testid","hash","size","src"],_hoisted_4$m={key:2,class:"avatar-group__see-all"};function _sfc_render$p(e,t,n,r,o,a){const s=resolveComponent("Skeleton");return openBlock(),createElementBlock("button",{onClick:t[0]||(t[0]=u=>e.$emit("click")),class:"avatar-group"},[createBaseVNode("j-tooltip",_hoisted_1$p,[createBaseVNode("div",_hoisted_2$o,[e.loading?createCommentVNode("",!0):(openBlock(!0),createElementBlock(Fragment$1,{key:0},renderList(e.firstUsers,(u,l)=>(openBlock(),createElementBlock("j-avatar",{class:"avatar-group__avatar","data-testid":`avatar-group__avatar__${u.did}`,key:l,hash:u.did,size:e.size,src:u.thumbnailPicture},null,8,_hoisted_3$o))),128)),e.loading?(openBlock(),createElementBlock(Fragment$1,{key:1},renderList(3,u=>createVNode(s,{key:u,variant:"circle",width:"var(--j-size-md)",height:"var(--j-size-md)"})),64)):createCommentVNode("",!0),e.users.length>=4?(openBlock(),createElementBlock("span",_hoisted_4$m," +"+toDisplayString(e.users.length-3),1)):createCommentVNode("",!0)])])])}var AvatarGroup=_export_sfc(_sfc_main$p,[["render",_sfc_render$p],["__scopeId","data-v-c77845d8"]]),CommunitySidebar_vue_vue_type_style_index_0_scoped_true_lang="";const _sfc_main$o=defineComponent({components:{AvatarGroup},props:{community:{type:Object,required:!0}},setup(){return{userProfileImage:ref(null),appStore:useAppStore(),userStore:useUserStore(),dataStore:useDataStore()}},data:function(){return{showCommunityMenu:!1,communityImage:null}},computed:{channels(){const e=this.$route.params.communityId,t=this.getChannelStates()(e);return this.community.state.hideMutedChannels?t.filter(n=>!n.notifications.mute):t},isCreator(){var e;return this.community.neighbourhood.creatorDid===((e=this.userStore.getUser)==null?void 0:e.agent.did)},userProfile(){return this.userStore.profile},userDid(){return this.userStore.agent.did}},async mounted(){watch(this.dataStore.neighbourhoods,async()=>{setTimeout(async()=>{const e=this.$route.params.communityId,t=this.dataStore.getCommunity(e),r=await new DexieIPFS(e).get(t.neighbourhood.image);this.communityImage=r},500)})},watch:{userProfile:{async handler(){var e,t;(e=this.userStore.profile)!=null&&e.profilePicture?this.userProfileImage=await getImage((t=this.userStore.profile)==null?void 0:t.profilePicture):this.userProfileImage=null},immediate:!0},"$route.params.communityId":{handler:async function(e){e&&(this.communityImage=null,setTimeout(async()=>{const t=this.dataStore.getCommunity(e),r=await new DexieIPFS(e).get(t.neighbourhood.image);this.communityImage=r},500))},immediate:!0}},methods:{...mapActions(useDataStore,["setChannelNotificationState","toggleHideMutedChannels"]),...mapState(useDataStore,["getChannelStates"]),...mapActions(useAppStore,["setSidebar","setShowCreateChannel","setShowEditCommunity","setShowCommunityMembers","setShowInviteCode","setShowCommunitySettings"]),navigateTo(e){this.setSidebar(!1),e()},goToSettings(){this.setShowCommunitySettings(!0),this.showCommunityMenu=!1}}}),_withScopeId$e=e=>(pushScopeId("data-v-14a08ed2"),e=e(),popScopeId(),e),_hoisted_1$o={class:"community-sidebar__header"},_hoisted_2$n=["name"],_hoisted_3$n={class:"community-info"},_hoisted_4$l=["open"],_hoisted_5$i=_withScopeId$e(()=>createBaseVNode("button",{slot:"trigger",class:"community-sidebar__header-button"},[createBaseVNode("j-icon",{size:"xs",name:"three-dots"})],-1)),_hoisted_6$f={slot:"content"},_hoisted_7$d=_withScopeId$e(()=>createBaseVNode("j-icon",{size:"xs",slot:"start",name:"pencil"},null,-1)),_hoisted_8$c=_withScopeId$e(()=>createBaseVNode("j-icon",{size:"xs",slot:"start",name:"gear"},null,-1)),_hoisted_9$a=_withScopeId$e(()=>createBaseVNode("j-icon",{size:"xs",slot:"start",name:"person-plus"},null,-1)),_hoisted_10$a=_withScopeId$e(()=>createBaseVNode("j-divider",null,null,-1)),_hoisted_11$6=_withScopeId$e(()=>createBaseVNode("j-icon",{size:"xs",slot:"start",name:"plus"},null,-1)),_hoisted_12$3=["name"],_hoisted_13$3={pt:"500"},_hoisted_14$3=["title"],_hoisted_15$3=_withScopeId$e(()=>createBaseVNode("j-icon",{size:"sm",square:"",name:"plus"},null,-1)),_hoisted_16$2=[_hoisted_15$3],_hoisted_17$2={px:"500"},_hoisted_18$2={pt:"500"},_hoisted_19$2={open:"",title:"Channels"},_hoisted_20$2=_withScopeId$e(()=>createBaseVNode("j-icon",{size:"sm",square:"",name:"plus"},null,-1)),_hoisted_21$2=[_hoisted_20$2],_hoisted_22$2={class:"community-sidebar__header-menu",event:"contextmenu",placement:"bottom-start"},_hoisted_23$2=["selected","onClick"],_hoisted_24$2=_withScopeId$e(()=>createBaseVNode("j-icon",{slot:"start",size:"sm",name:"hash"},null,-1)),_hoisted_25$2={key:0,size:"xs",slot:"end",name:"bell-slash"},_hoisted_26$2={key:1,slot:"end",class:"channel__notification"},_hoisted_27$2={slot:"content"},_hoisted_28$2=["onClick"],_hoisted_29$2=["name"],_hoisted_30$2=_withScopeId$e(()=>createBaseVNode("j-icon",{size:"xs",slot:"start",name:"plus"},null,-1));function _sfc_render$o(e,t,n,r,o,a){const s=resolveComponent("avatar-group"),u=resolveComponent("router-link");return openBlock(),createElementBlock(Fragment$1,null,[createBaseVNode("div",_hoisted_1$o,[createBaseVNode("j-button",{variant:"ghost",size:"sm",onClick:t[0]||(t[0]=()=>e.appStore.toggleMainSidebar())},[createBaseVNode("j-icon",{size:"sm",name:e.appStore.showMainSidebar?"arrow-bar-left":"arrow-bar-right"},null,8,_hoisted_2$n)]),createBaseVNode("div",_hoisted_3$n,toDisplayString(e.community.neighbourhood.name),1),createBaseVNode("j-popover",{open:e.showCommunityMenu,onToggle:t[6]||(t[6]=l=>e.showCommunityMenu=l.target.open),class:normalizeClass({"is-creator":e.isCreator}),event:"click",placement:"bottom-end"},[_hoisted_5$i,createBaseVNode("j-menu",_hoisted_6$f,[e.isCreator?(openBlock(),createElementBlock("j-menu-item",{key:0,onClick:t[1]||(t[1]=()=>e.setShowEditCommunity(!0))},[_hoisted_7$d,createTextVNode(" Edit community ")])):createCommentVNode("",!0),createBaseVNode("j-menu-item",{onClick:t[2]||(t[2]=(...l)=>e.goToSettings&&e.goToSettings(...l))},[_hoisted_8$c,createTextVNode(" Settings ")]),createBaseVNode("j-menu-item",{onClick:t[3]||(t[3]=()=>e.setShowInviteCode(!0))},[_hoisted_9$a,createTextVNode(" Invite people ")]),_hoisted_10$a,createBaseVNode("j-menu-item",{onClick:t[4]||(t[4]=()=>e.setShowCreateChannel(!0))},[_hoisted_11$6,createTextVNode(" Create channel ")]),createBaseVNode("j-menu-item",{onClick:t[5]||(t[5]=()=>e.toggleHideMutedChannels({communityId:e.community.neighbourhood.perspective.uuid}))},[createBaseVNode("j-icon",{size:"xs",slot:"start",name:e.community.state.hideMutedChannels?"toggle-on":"toggle-off"},null,8,_hoisted_12$3),createTextVNode(" Hide muted channels ")])])],42,_hoisted_4$l)]),createBaseVNode("j-box",_hoisted_13$3,[createBaseVNode("j-menu-group-item",{open:"",title:`Members (${e.community.neighbourhood.members.length})`},[createBaseVNode("j-button",{onClick:t[7]||(t[7]=withModifiers(()=>e.setShowInviteCode(!0),["prevent"])),size:"sm",slot:"end",variant:"ghost"},_hoisted_16$2),createBaseVNode("j-box",_hoisted_17$2,[createVNode(s,{onClick:t[8]||(t[8]=()=>e.setShowCommunityMembers(!0)),users:e.community.neighbourhood.members},null,8,["users"])])],8,_hoisted_14$3)]),createBaseVNode("j-box",_hoisted_18$2,[createBaseVNode("j-menu-group-item",_hoisted_19$2,[createBaseVNode("j-button",{onClick:t[9]||(t[9]=withModifiers(()=>e.setShowCreateChannel(!0),["prevent"])),size:"sm",slot:"end",variant:"ghost"},_hoisted_21$2),(openBlock(!0),createElementBlock(Fragment$1,null,renderList(e.channels,l=>(openBlock(),createBlock(u,{to:{name:"channel",params:{communityId:e.community.neighbourhood.perspective.uuid,channelId:l.name}},custom:"",key:l.id},{default:withCtx(({navigate:c,isExactActive:m})=>{var me,xe,Ne,He;return[createBaseVNode("j-popover",_hoisted_22$2,[createBaseVNode("j-menu-item",{slot:"trigger",class:normalizeClass(["channel",{"channel--muted":(me=l.notifications)==null?void 0:me.mute}]),selected:m,onClick:()=>e.navigateTo(c)},[_hoisted_24$2,createTextVNode(" "+toDisplayString(l.name)+" ",1),(xe=l==null?void 0:l.notifications)!=null&&xe.mute?(openBlock(),createElementBlock("j-icon",_hoisted_25$2)):createCommentVNode("",!0),l.hasNewMessages?(openBlock(),createElementBlock("div",_hoisted_26$2)):createCommentVNode("",!0)],10,_hoisted_23$2),createBaseVNode("j-menu",_hoisted_27$2,[createBaseVNode("j-menu-item",{onClick:()=>e.setChannelNotificationState({channelId:l.id})},[createBaseVNode("j-icon",{size:"xs",slot:"start",name:(Ne=l==null?void 0:l.notifications)!=null&&Ne.mute?"bell-slash":"bell"},null,8,_hoisted_29$2),createTextVNode(" "+toDisplayString(`${(He=l==null?void 0:l.notifications)!=null&&He.mute?"Unmute":"Mute"} Channel`),1)],8,_hoisted_28$2)])])]}),_:2},1032,["to"]))),128))]),createBaseVNode("j-menu-item",{onClick:t[10]||(t[10]=()=>e.setShowCreateChannel(!0))},[_hoisted_30$2,createTextVNode(" Add channel ")])])],64)}var CommunitySidebar=_export_sfc(_sfc_main$o,[["render",_sfc_render$o],["__scopeId","data-v-14a08ed2"]]);const _sfc_main$n=defineComponent({components:{AvatarUpload},emits:["cancel","submit"],setup(){return{dataStore:useDataStore()}},data(){return{isUpdatingCommunity:!1,communityName:"",communityDescription:"",profileImage:""}},watch:{community:{handler:async function({id:e,name:t,description:n,image:r}){this.communityName=t,this.communityDescription=n;const o=new DexieIPFS(e);this.profileImage=await o.get(r)},deep:!0,immediate:!0}},computed:{community(){const e=this.$route.params.communityId;return this.dataStore.getNeighbourhood(e)}},methods:{async updateCommunity(){const e=this.$route.params.communityId;this.isUpdatingCommunity=!0,this.dataStore.updateCommunity({communityId:e,name:this.communityName,description:this.communityDescription,image:this.profileImage,thumbnail:this.profileImage}).then(()=>{this.$emit("submit")}).finally(()=>{this.isUpdatingCommunity=!1})}}}),_hoisted_1$n={p:"800"},_hoisted_2$m=createBaseVNode("j-text",{variant:"heading-sm"},"Edit Community",-1),_hoisted_3$m={direction:"column",gap:"400"},_hoisted_4$k=["value"],_hoisted_5$h=["value"],_hoisted_6$e=["loading","disabled"];function _sfc_render$n(e,t,n,r,o,a){const s=resolveComponent("avatar-upload");return openBlock(),createElementBlock("j-box",_hoisted_1$n,[_hoisted_2$m,createVNode(s,{value:e.profileImage,onChange:t[0]||(t[0]=u=>e.profileImage=u)},null,8,["value"]),createBaseVNode("j-flex",_hoisted_3$m,[createBaseVNode("j-input",{size:"lg",label:"Name",value:e.communityName,onKeydown:t[1]||(t[1]=withKeys((...u)=>e.updateCommunity&&e.updateCommunity(...u),["enter"])),onInput:t[2]||(t[2]=u=>e.communityName=u.target.value)},null,40,_hoisted_4$k),createBaseVNode("j-input",{size:"lg",label:"Description",value:e.communityDescription,onKeydown:t[3]||(t[3]=withKeys((...u)=>e.updateCommunity&&e.updateCommunity(...u),["enter"])),onInput:t[4]||(t[4]=u=>e.communityDescription=u.target.value)},null,40,_hoisted_5$h),createBaseVNode("div",null,[createBaseVNode("j-button",{size:"lg",onClick:t[5]||(t[5]=u=>e.$emit("cancel"))},"Cancel"),createBaseVNode("j-button",{size:"lg",loading:e.isUpdatingCommunity,disabled:e.isUpdatingCommunity,onClick:t[6]||(t[6]=(...u)=>e.updateCommunity&&e.updateCommunity(...u)),variant:"primary"}," Save ",8,_hoisted_6$e)])])])}var EditCommunity=_export_sfc(_sfc_main$n,[["render",_sfc_render$n]]);const _sfc_main$m=defineComponent({emits:["cancel","submit"],setup(){return{dataStore:useDataStore()}},data(){return{channelName:"",isCreatingChannel:!1}},computed:{canSubmit(){return isValid([{check:e=>!e,message:"This field is required"}],this.channelName)}},methods:{async createChannel(){const e=this.$route.params.communityId,t=this.channelName;this.isCreatingChannel=!0,this.dataStore.createChannel({communityId:e,name:t}).then(n=>{this.$emit("submit"),this.channelName="",this.$router.push({name:"channel",params:{communityId:e.toString(),channelId:n.name}})}).finally(()=>{this.isCreatingChannel=!1})}}}),_hoisted_1$m={p:"800"},_hoisted_2$l={direction:"column",gap:"700"},_hoisted_3$l=createBaseVNode("div",null,[createBaseVNode("j-text",{variant:"heading-sm"},"Create Channel"),createBaseVNode("j-text",{variant:"body"}," Channels are ways to organize your conversations by topics. ")],-1),_hoisted_4$j={direction:"column",gap:"400"},_hoisted_5$g=["value"],_hoisted_6$d=["loading","disabled"];function _sfc_render$m(e,t,n,r,o,a){return openBlock(),createElementBlock("j-box",_hoisted_1$m,[createBaseVNode("j-flex",_hoisted_2$l,[_hoisted_3$l,createBaseVNode("j-flex",_hoisted_4$j,[createBaseVNode("j-input",{autofocus:"",size:"lg",label:"Name",minlength:10,maxlength:30,autovalidate:"",required:"",type:"text",value:e.channelName,onKeydown:t[0]||(t[0]=withKeys((...s)=>e.createChannel&&e.createChannel(...s),["enter"])),onInput:t[1]||(t[1]=s=>e.channelName=s.target.value)},null,40,_hoisted_5$g),createBaseVNode("div",null,[createBaseVNode("j-button",{size:"lg",onClick:t[2]||(t[2]=s=>e.$emit("cancel"))}," Cancel "),createBaseVNode("j-button",{size:"lg",loading:e.isCreatingChannel,disabled:e.isCreatingChannel||!e.canSubmit,onClick:t[3]||(t[3]=(...s)=>e.createChannel&&e.createChannel(...s)),variant:"primary"}," Create Channel ",8,_hoisted_6$d)])])])])}var CreateChannel=_export_sfc(_sfc_main$m,[["render",_sfc_render$m]]);const _sfc_main$l=defineComponent({emits:["close","submit"],components:{Skeleton},setup(){return{dataStore:useDataStore()}},data(){return{searchValue:"",memberList:[],loading:!1}},watch:{"community.members":{handler:async function(e){if(this.memberList=[],!!e){this.loading=!0;for(const t of e)if(t){const n=await getProfile(t);n&&this.memberList.push(n)}this.loading=!1}},immediate:!0}},computed:{filteredCommunityMemberList(){return this.memberList.filter(e=>e.username.includes(this.searchValue))},community(){const e=this.$route.params.communityId;return this.dataStore.getNeighbourhood(e)}},methods:{async profileClick(e){const n=await(await hb$1()).agent.me();this.$emit("close"),e===n.did?this.$router.push({name:"home",params:{did:e}}):this.$router.push({name:"profile",params:{did:e,communityId:this.$route.params.communityId}})}}}),_hoisted_1$l={p:"800"},_hoisted_2$k={gap:"500",direction:"column"},_hoisted_3$k={variant:"heading-sm"},_hoisted_4$i=["value"],_hoisted_5$f=createBaseVNode("j-icon",{name:"search",size:"sm",slot:"end"},null,-1),_hoisted_6$c=[_hoisted_5$f],_hoisted_7$c={key:0,wrap:"",gap:"600"},_hoisted_8$b=["hash","src","onClick"],_hoisted_9$9={variant:"body"},_hoisted_10$9={key:1,wrap:"",gap:"600"};function _sfc_render$l(e,t,n,r,o,a){var u;const s=resolveComponent("Skeleton");return openBlock(),createElementBlock("j-box",_hoisted_1$l,[createBaseVNode("j-flex",_hoisted_2$k,[createBaseVNode("j-text",_hoisted_3$k," All group members ("+toDisplayString((u=Object.keys(e.community.members).length)!=null?u:0)+") ",1),createBaseVNode("j-input",{size:"lg",placeholder:"Search members",type:"search",value:e.searchValue,onInput:t[0]||(t[0]=l=>e.searchValue=l.target.value)},_hoisted_6$c,40,_hoisted_4$i),e.loading?(openBlock(),createElementBlock("j-flex",_hoisted_10$9,[(openBlock(),createElementBlock(Fragment$1,null,renderList(4,l=>createBaseVNode("j-flex",{inline:"",direction:"column",a:"center",gap:"300",key:l},[(openBlock(),createBlock(s,{key:l,variant:"circle",width:"var(--j-size-lg)",height:"var(--j-size-lg)"})),createVNode(s)])),64))])):(openBlock(),createElementBlock("j-flex",_hoisted_7$c,[(openBlock(!0),createElementBlock(Fragment$1,null,renderList(e.filteredCommunityMemberList,l=>(openBlock(),createElementBlock("j-flex",{gap:"300",style:{cursor:"pointer"},key:l.did,inline:"",direction:"column",a:"center"},[createBaseVNode("j-avatar",{size:"lg",hash:l.did,src:l.thumbnailPicture,onClick:()=>e.profileClick(l.did)},null,8,_hoisted_8$b),createBaseVNode("j-text",_hoisted_9$9,toDisplayString(l.username),1)]))),128))]))])])}var CommunityMembers=_export_sfc(_sfc_main$l,[["render",_sfc_render$l]]),ThemeEditor_vue_vue_type_style_index_0_scoped_true_lang="";const _sfc_main$k=defineComponent({emits:["update"],props:["theme"],methods:{updateTheme(e){this.theme&&this.$emit("update",e)}}}),_withScopeId$d=e=>(pushScopeId("data-v-88d11f4e"),e=e(),popScopeId(),e),_hoisted_1$k={pb:"800"},_hoisted_2$j={pb:"800"},_hoisted_3$j=_withScopeId$d(()=>createBaseVNode("j-box",{pb:"300"},[createBaseVNode("j-text",{variant:"label"},"Primary color")],-1)),_hoisted_4$h={class:"colors"},_hoisted_5$e=["onClick"],_hoisted_6$b={key:0,style:{color:"var(--j-color-white)"},name:"check"},_hoisted_7$b=_withScopeId$d(()=>createBaseVNode("j-box",{pb:"300"},[createBaseVNode("j-text",{variant:"label"},"Theme")],-1)),_hoisted_8$a=["value"],_hoisted_9$8=_withScopeId$d(()=>createBaseVNode("j-tab-item",{variant:"button",value:"default"},"Default",-1)),_hoisted_10$8=_withScopeId$d(()=>createBaseVNode("j-tab-item",{variant:"button",value:"light"},"Light",-1)),_hoisted_11$5=_withScopeId$d(()=>createBaseVNode("j-tab-item",{variant:"button",value:"dark"},"Dark",-1)),_hoisted_12$2=_withScopeId$d(()=>createBaseVNode("j-tab-item",{variant:"button",value:"black"},"Black",-1)),_hoisted_13$2=_withScopeId$d(()=>createBaseVNode("j-tab-item",{variant:"button",value:"cyberpunk"},"Cyberpunk",-1)),_hoisted_14$2=_withScopeId$d(()=>createBaseVNode("j-tab-item",{variant:"button",value:"90s"},"90s",-1)),_hoisted_15$2=[_hoisted_9$8,_hoisted_10$8,_hoisted_11$5,_hoisted_12$2,_hoisted_13$2,_hoisted_14$2],_hoisted_16$1={pb:"800"},_hoisted_17$1=_withScopeId$d(()=>createBaseVNode("j-box",{pb:"300"},[createBaseVNode("j-text",{variant:"label"},"Font family")],-1)),_hoisted_18$1=["value"],_hoisted_19$1=_withScopeId$d(()=>createBaseVNode("j-tab-item",{variant:"button",value:"DM Sans"},"DM Sans",-1)),_hoisted_20$1=_withScopeId$d(()=>createBaseVNode("j-tab-item",{variant:"button",value:"Poppins"},"Poppins",-1)),_hoisted_21$1=_withScopeId$d(()=>createBaseVNode("j-tab-item",{variant:"button",value:"Roboto"},"Roboto",-1)),_hoisted_22$1=_withScopeId$d(()=>createBaseVNode("j-tab-item",{variant:"button",value:"Inter"},"Inter",-1)),_hoisted_23$1=_withScopeId$d(()=>createBaseVNode("j-tab-item",{variant:"button",value:"Fira Code"},"Fira Code",-1)),_hoisted_24$1=_withScopeId$d(()=>createBaseVNode("j-tab-item",{variant:"button",value:"IBM Plex Mono"}," IBM Plex Mono ",-1)),_hoisted_25$1=_withScopeId$d(()=>createBaseVNode("j-tab-item",{variant:"button",value:"IBM Plex Sans"}," IBM Plex Sans ",-1)),_hoisted_26$1=_withScopeId$d(()=>createBaseVNode("j-tab-item",{variant:"button",value:"Rubik"}," Rubik ",-1)),_hoisted_27$1=_withScopeId$d(()=>createBaseVNode("j-tab-item",{variant:"button",value:"Space Grotesk"}," Space Grotesk ",-1)),_hoisted_28$1=[_hoisted_19$1,_hoisted_20$1,_hoisted_21$1,_hoisted_22$1,_hoisted_23$1,_hoisted_24$1,_hoisted_25$1,_hoisted_26$1,_hoisted_27$1],_hoisted_29$1={pb:"800"},_hoisted_30$1=_withScopeId$d(()=>createBaseVNode("j-box",{pb:"300"},[createBaseVNode("j-text",{variant:"label"},"Saturation")],-1)),_hoisted_31$1=["value"],_hoisted_32$1=_withScopeId$d(()=>createBaseVNode("j-tab-item",{variant:"button",value:"30"},"Weak",-1)),_hoisted_33$1=_withScopeId$d(()=>createBaseVNode("j-tab-item",{variant:"button",value:"60"},"Normal",-1)),_hoisted_34$1=_withScopeId$d(()=>createBaseVNode("j-tab-item",{variant:"button",value:"100"},"Vibrant",-1)),_hoisted_35=[_hoisted_32$1,_hoisted_33$1,_hoisted_34$1],_hoisted_36={pb:"800"},_hoisted_37=_withScopeId$d(()=>createBaseVNode("j-box",{pb:"300"},[createBaseVNode("j-text",{variant:"label"},"Font size")],-1)),_hoisted_38=_withScopeId$d(()=>createBaseVNode("j-flex",{a:"center",j:"between"},[createBaseVNode("j-text",null,"Small"),createBaseVNode("j-text",null,"Medium"),createBaseVNode("j-text",null,"Large")],-1)),_hoisted_39=["value"];function _sfc_render$k(e,t,n,r,o,a){return openBlock(),createElementBlock("div",null,[createBaseVNode("j-box",_hoisted_1$k,[createBaseVNode("j-box",_hoisted_2$j,[_hoisted_3$j,createBaseVNode("div",_hoisted_4$h,[(openBlock(),createElementBlock(Fragment$1,null,renderList([0,20,50,100,150,200,220,241,270,300,340],s=>createBaseVNode("button",{key:s,class:"color-button",onClick:()=>e.updateTheme({hue:s}),style:normalizeStyle(`--hue: ${s}`)},[e.theme.hue===s?(openBlock(),createElementBlock("j-icon",_hoisted_6$b)):createCommentVNode("",!0)],12,_hoisted_5$e)),64))])]),_hoisted_7$b,createBaseVNode("j-tabs",{value:e.theme.name,onChange:t[0]||(t[0]=s=>e.updateTheme({name:s.target.value}))},_hoisted_15$2,40,_hoisted_8$a)]),createBaseVNode("j-box",_hoisted_16$1,[_hoisted_17$1,createBaseVNode("j-tabs",{value:e.theme.fontFamily,onChange:t[1]||(t[1]=s=>e.updateTheme({fontFamily:s.target.value}))},_hoisted_28$1,40,_hoisted_18$1)]),createBaseVNode("j-box",_hoisted_29$1,[_hoisted_30$1,createBaseVNode("j-tabs",{value:e.theme.saturation.toString(),onChange:t[2]||(t[2]=s=>e.updateTheme({saturation:s.target.value}))},_hoisted_35,40,_hoisted_31$1)]),createBaseVNode("j-box",_hoisted_36,[_hoisted_37,_hoisted_38,createBaseVNode("input",{class:"range-slider",type:"range",value:e.theme.fontSize.replace("px",""),min:"11",max:"19",step:"1",onChange:t[3]||(t[3]=s=>e.updateTheme({fontSize:s.target.value+"px"}))},null,40,_hoisted_39)])])}var ThemeEditor=_export_sfc(_sfc_main$k,[["render",_sfc_render$k],["__scopeId","data-v-88d11f4e"]]),CommunitySettings_vue_vue_type_style_index_0_scoped_true_lang="";const _sfc_main$j=defineComponent({components:{ThemeEditor},setup(){const e=useAppStore(),t=useDataStore();return{appStore:e,dataStore:t}},data(){return{currentView:"theme-editor"}},methods:{setuseLocalTheme(e){const t=this.$route.params.communityId;this.dataStore.setuseLocalTheme({communityId:t,value:e}),this.appStore.changeCurrentTheme(e?t:"global")},updateCommunityTheme(e){const t=this.$route.params.communityId;this.appStore.updateCommunityTheme({communityId:t,theme:{...e}})}},computed:{showEditor(){return this.currentView==="theme-editor"&&this.community.theme&&this.community.useLocalTheme},community(){const e=this.$route.params.communityId;return this.dataStore.getCommunityState(e)}}}),_withScopeId$c=e=>(pushScopeId("data-v-6e1b87d9"),e=e(),popScopeId(),e),_hoisted_1$j={p:"800"},_hoisted_2$i=_withScopeId$c(()=>createBaseVNode("j-box",{pl:"500",pb:"800"},[createBaseVNode("j-text",{variant:"heading-sm"},"Settings")],-1)),_hoisted_3$i={class:"settings"},_hoisted_4$g={class:"settings__sidebar"},_hoisted_5$d=["value"],_hoisted_6$a=_withScopeId$c(()=>createBaseVNode("j-tab-item",{variant:"button",value:"theme-editor"},[createBaseVNode("j-icon",{size:"sm",name:"eye",slot:"start"}),createTextVNode(" Apperance ")],-1)),_hoisted_7$a=[_hoisted_6$a],_hoisted_8$9={class:"settings__content"},_hoisted_9$7={pb:"500"},_hoisted_10$7=["checked"];function _sfc_render$j(e,t,n,r,o,a){const s=resolveComponent("theme-editor");return openBlock(),createElementBlock("j-box",_hoisted_1$j,[_hoisted_2$i,createBaseVNode("div",_hoisted_3$i,[createBaseVNode("aside",_hoisted_4$g,[createBaseVNode("j-tabs",{full:"",vertical:"",value:e.currentView,onChange:t[0]||(t[0]=u=>e.currentView=u.target.value)},_hoisted_7$a,40,_hoisted_5$d)]),createBaseVNode("div",_hoisted_8$9,[createBaseVNode("j-box",_hoisted_9$7,[createBaseVNode("j-toggle",{checked:e.community.useLocalTheme,onChange:t[1]||(t[1]=u=>e.setuseLocalTheme(u.target.checked))}," Use local theme ",40,_hoisted_10$7)]),e.showEditor?(openBlock(),createBlock(s,{key:0,onUpdate:e.updateCommunityTheme,theme:e.community.theme},null,8,["onUpdate","theme"])):createCommentVNode("",!0)])])])}var CommunitySettings=_export_sfc(_sfc_main$j,[["render",_sfc_render$j],["__scopeId","data-v-6e1b87d9"]]),jA=Object.create,bc=Object.defineProperty,FA=Object.getOwnPropertyDescriptor,RA=Object.getOwnPropertyNames,NA=Object.getPrototypeOf,LA=Object.prototype.hasOwnProperty,H_=e=>bc(e,"__esModule",{value:!0}),uu=(e,t)=>()=>(e&&(t=e(e=0)),t),ae=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),$A=(e,t)=>{H_(e);for(var n in t)bc(e,n,{get:t[n],enumerable:!0})},BA=(e,t,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of RA(t))!LA.call(e,r)&&r!=="default"&&bc(e,r,{get:()=>t[r],enumerable:!(n=FA(t,r))||n.enumerable});return e},li=e=>BA(H_(bc(e!=null?jA(NA(e)):{},"default",e&&e.__esModule&&"default"in e?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e);function ci(e,t){for(var n in t)e[n]=t[n];return e}function X_(e){var t=e.parentNode;t&&t.removeChild(e)}function h(e,t,n){var r,o,a,s={};for(a in t)a=="key"?r=t[a]:a=="ref"?o=t[a]:s[a]=t[a];if(arguments.length>2&&(s.children=arguments.length>3?lu.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(a in e.defaultProps)s[a]===void 0&&(s[a]=e.defaultProps[a]);return fu(e,s,r,o,null)}function fu(e,t,n,r,o){var a={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:o!=null?o:++K_};return o==null&&se.vnode!=null&&se.vnode(a),a}function pu(){return{current:null}}function Fragment(e){return e.children}function br(e,t){this.props=e,this.context=t}function Ba(e,t){if(t==null)return e.__?Ba(e.__,e.__.__k.indexOf(e)+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?Ba(e):null}function Z_(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return Z_(e)}}function Vd(e){(!e.__d&&(e.__d=!0)&&cu.push(e)&&!xc.__r++||Q_!==se.debounceRendering)&&((Q_=se.debounceRendering)||G_)(xc)}function xc(){for(var e;xc.__r=cu.length;)e=cu.sort(function(t,n){return t.__v.__b-n.__v.__b}),cu=[],e.some(function(t){var n,r,o,a,s,u;t.__d&&(s=(a=(n=t).__v).__e,(u=n.__P)&&(r=[],(o=ci({},a)).__v=a.__v+1,zd(u,a,o,n.__n,u.ownerSVGElement!==void 0,a.__h!=null?[s]:null,r,s!=null?s:Ba(a),a.__h),ab(r,a),a.__e!=s&&Z_(a)))})}function eb(e,t,n,r,o,a,s,u,l,c){var m,me,xe,Ne,He,Ye,Je,vn=r&&r.__k||J_,La=vn.length;for(n.__k=[],m=0;m<t.length;m++)if((Ne=n.__k[m]=(Ne=t[m])==null||typeof Ne=="boolean"?null:typeof Ne=="string"||typeof Ne=="number"||typeof Ne=="bigint"?fu(null,Ne,null,null,Ne):Array.isArray(Ne)?fu(Fragment,{children:Ne},null,null,null):Ne.__b>0?fu(Ne.type,Ne.props,Ne.key,null,Ne.__v):Ne)!=null){if(Ne.__=n,Ne.__b=n.__b+1,(xe=vn[m])===null||xe&&Ne.key==xe.key&&Ne.type===xe.type)vn[m]=void 0;else for(me=0;me<La;me++){if((xe=vn[me])&&Ne.key==xe.key&&Ne.type===xe.type){vn[me]=void 0;break}xe=null}zd(e,Ne,xe=xe||wc,o,a,s,u,l,c),He=Ne.__e,(me=Ne.ref)&&xe.ref!=me&&(Je||(Je=[]),xe.ref&&Je.push(xe.ref,null,Ne),Je.push(me,Ne.__c||He,Ne)),He!=null?(Ye==null&&(Ye=He),typeof Ne.type=="function"&&Ne.__k===xe.__k?Ne.__d=l=tb(Ne,l,e):l=rb(e,Ne,xe,vn,He,l),typeof n.type=="function"&&(n.__d=l)):l&&xe.__e==l&&l.parentNode!=e&&(l=Ba(xe))}for(n.__e=Ye,m=La;m--;)vn[m]!=null&&(typeof n.type=="function"&&vn[m].__e!=null&&vn[m].__e==n.__d&&(n.__d=Ba(r,m+1)),ub(vn[m],vn[m]));if(Je)for(m=0;m<Je.length;m++)sb(Je[m],Je[++m],Je[++m])}function tb(e,t,n){for(var r,o=e.__k,a=0;o&&a<o.length;a++)(r=o[a])&&(r.__=e,t=typeof r.type=="function"?tb(r,t,n):rb(n,r,r,o,r.__e,t));return t}function Ln(e,t){return t=t||[],e==null||typeof e=="boolean"||(Array.isArray(e)?e.some(function(n){Ln(n,t)}):t.push(e)),t}function rb(e,t,n,r,o,a){var s,u,l;if(t.__d!==void 0)s=t.__d,t.__d=void 0;else if(n==null||o!=a||o.parentNode==null)e:if(a==null||a.parentNode!==e)e.appendChild(o),s=null;else{for(u=a,l=0;(u=u.nextSibling)&&l<r.length;l+=2)if(u==o)break e;e.insertBefore(o,a),s=a}return s!==void 0?s:o.nextSibling}function zA(e,t,n,r,o){var a;for(a in n)a==="children"||a==="key"||a in t||Sc(e,a,null,n[a],r);for(a in t)o&&typeof t[a]!="function"||a==="children"||a==="key"||a==="value"||a==="checked"||n[a]===t[a]||Sc(e,a,t[a],n[a],r)}function nb(e,t,n){t[0]==="-"?e.setProperty(t,n):e[t]=n==null?"":typeof n!="number"||VA.test(t)?n:n+"px"}function Sc(e,t,n,r,o){var a;e:if(t==="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof r=="string"&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||nb(e.style,t,"");if(n)for(t in n)r&&n[t]===r[t]||nb(e.style,t,n[t])}else if(t[0]==="o"&&t[1]==="n")a=t!==(t=t.replace(/Capture$/,"")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+a]=n,n?r||e.addEventListener(t,a?ob:ib,a):e.removeEventListener(t,a?ob:ib,a);else if(t!=="dangerouslySetInnerHTML"){if(o)t=t.replace(/xlink[H:h]/,"h").replace(/sName$/,"s");else if(t!=="href"&&t!=="list"&&t!=="form"&&t!=="tabIndex"&&t!=="download"&&t in e)try{e[t]=n!=null?n:"";break e}catch{}typeof n=="function"||(n!=null&&(n!==!1||t[0]==="a"&&t[1]==="r")?e.setAttribute(t,n):e.removeAttribute(t))}}function ib(e){this.l[e.type+!1](se.event?se.event(e):e)}function ob(e){this.l[e.type+!0](se.event?se.event(e):e)}function zd(e,t,n,r,o,a,s,u,l){var c,m,me,xe,Ne,He,Ye,Je,vn,La,sr,Zr=t.type;if(t.constructor!==void 0)return null;n.__h!=null&&(l=n.__h,u=t.__e=n.__e,t.__h=null,a=[u]),(c=se.__b)&&c(t);try{e:if(typeof Zr=="function"){if(Je=t.props,vn=(c=Zr.contextType)&&r[c.__c],La=c?vn?vn.props.value:c.__:r,n.__c?Ye=(m=t.__c=n.__c).__=m.__E:("prototype"in Zr&&Zr.prototype.render?t.__c=m=new Zr(Je,La):(t.__c=m=new br(Je,La),m.constructor=Zr,m.render=WA),vn&&vn.sub(m),m.props=Je,m.state||(m.state={}),m.context=La,m.__n=r,me=m.__d=!0,m.__h=[]),m.__s==null&&(m.__s=m.state),Zr.getDerivedStateFromProps!=null&&(m.__s==m.state&&(m.__s=ci({},m.__s)),ci(m.__s,Zr.getDerivedStateFromProps(Je,m.__s))),xe=m.props,Ne=m.state,me)Zr.getDerivedStateFromProps==null&&m.componentWillMount!=null&&m.componentWillMount(),m.componentDidMount!=null&&m.__h.push(m.componentDidMount);else{if(Zr.getDerivedStateFromProps==null&&Je!==xe&&m.componentWillReceiveProps!=null&&m.componentWillReceiveProps(Je,La),!m.__e&&m.shouldComponentUpdate!=null&&m.shouldComponentUpdate(Je,m.__s,La)===!1||t.__v===n.__v){m.props=Je,m.state=m.__s,t.__v!==n.__v&&(m.__d=!1),m.__v=t,t.__e=n.__e,t.__k=n.__k,t.__k.forEach(function(zs){zs&&(zs.__=t)}),m.__h.length&&s.push(m);break e}m.componentWillUpdate!=null&&m.componentWillUpdate(Je,m.__s,La),m.componentDidUpdate!=null&&m.__h.push(function(){m.componentDidUpdate(xe,Ne,He)})}m.context=La,m.props=Je,m.state=m.__s,(c=se.__r)&&c(t),m.__d=!1,m.__v=t,m.__P=e,c=m.render(m.props,m.state,m.context),m.state=m.__s,m.getChildContext!=null&&(r=ci(ci({},r),m.getChildContext())),me||m.getSnapshotBeforeUpdate==null||(He=m.getSnapshotBeforeUpdate(xe,Ne)),sr=c!=null&&c.type===Fragment&&c.key==null?c.props.children:c,eb(e,Array.isArray(sr)?sr:[sr],t,n,r,o,a,s,u,l),m.base=t.__e,t.__h=null,m.__h.length&&s.push(m),Ye&&(m.__E=m.__=null),m.__e=!1}else a==null&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=UA(n.__e,t,n,r,o,a,s,l);(c=se.diffed)&&c(t)}catch(zs){t.__v=null,(l||a!=null)&&(t.__e=u,t.__h=!!l,a[a.indexOf(u)]=null),se.__e(zs,t,n)}}function ab(e,t){se.__c&&se.__c(t,e),e.some(function(n){try{e=n.__h,n.__h=[],e.some(function(r){r.call(n)})}catch(r){se.__e(r,n.__v)}})}function UA(e,t,n,r,o,a,s,u){var l,c,m,me=n.props,xe=t.props,Ne=t.type,He=0;if(Ne==="svg"&&(o=!0),a!=null){for(;He<a.length;He++)if((l=a[He])&&"setAttribute"in l==!!Ne&&(Ne?l.localName===Ne:l.nodeType===3)){e=l,a[He]=null;break}}if(e==null){if(Ne===null)return document.createTextNode(xe);e=o?document.createElementNS("http://www.w3.org/2000/svg",Ne):document.createElement(Ne,xe.is&&xe),a=null,u=!1}if(Ne===null)me===xe||u&&e.data===xe||(e.data=xe);else{if(a=a&&lu.call(e.childNodes),c=(me=n.props||wc).dangerouslySetInnerHTML,m=xe.dangerouslySetInnerHTML,!u){if(a!=null)for(me={},He=0;He<e.attributes.length;He++)me[e.attributes[He].name]=e.attributes[He].value;(m||c)&&(m&&(c&&m.__html==c.__html||m.__html===e.innerHTML)||(e.innerHTML=m&&m.__html||""))}if(zA(e,xe,me,o,u),m)t.__k=[];else if(He=t.props.children,eb(e,Array.isArray(He)?He:[He],t,n,r,o&&Ne!=="foreignObject",a,s,a?a[0]:n.__k&&Ba(n,0),u),a!=null)for(He=a.length;He--;)a[He]!=null&&X_(a[He]);u||("value"in xe&&(He=xe.value)!==void 0&&(He!==me.value||He!==e.value||Ne==="progress"&&!He)&&Sc(e,"value",He,me.value,!1),"checked"in xe&&(He=xe.checked)!==void 0&&He!==e.checked&&Sc(e,"checked",He,me.checked,!1))}return e}function sb(e,t,n){try{typeof e=="function"?e(t):e.current=t}catch(r){se.__e(r,n)}}function ub(e,t,n){var r,o;if(se.unmount&&se.unmount(e),(r=e.ref)&&(r.current&&r.current!==e.__e||sb(r,null,t)),(r=e.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(a){se.__e(a,t)}r.base=r.__P=null}if(r=e.__k)for(o=0;o<r.length;o++)r[o]&&ub(r[o],t,typeof e.type!="function");n||e.__e==null||X_(e.__e),e.__e=e.__d=void 0}function WA(e,t,n){return this.constructor(e,n)}function $n(e,t,n){var r,o,a;se.__&&se.__(e,t),o=(r=typeof n=="function")?null:n&&n.__k||t.__k,a=[],zd(t,e=(!r&&n||t).__k=h(Fragment,null,[e]),o||wc,wc,t.ownerSVGElement!==void 0,!r&&n?[n]:o?null:t.firstChild?lu.call(t.childNodes):null,a,!r&&n?n:o?o.__e:t.firstChild,r),ab(a,e)}function du(e,t){$n(e,t,du)}function hu(e,t,n){var r,o,a,s=ci({},e.props);for(a in t)a=="key"?r=t[a]:a=="ref"?o=t[a]:s[a]=t[a];return arguments.length>2&&(s.children=arguments.length>3?lu.call(arguments,2):n),fu(e.type,s,r||e.key,o||e.ref,null)}function ur(e,t){var n={__c:t="__cC"+Y_++,__:e,Consumer:function(r,o){return r.children(o)},Provider:function(r){var o,a;return this.getChildContext||(o=[],(a={})[t]=this,this.getChildContext=function(){return a},this.shouldComponentUpdate=function(s){this.props.value!==s.value&&o.some(Vd)},this.sub=function(s){o.push(s);var u=s.componentWillUnmount;s.componentWillUnmount=function(){o.splice(o.indexOf(s),1),u&&u.call(s)}}),r.children}};return n.Provider.__=n.Consumer.contextType=n}var lu,se,K_,cu,G_,Q_,Y_,wc,J_,VA,fi=uu(()=>{v(),wc={},J_=[],VA=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,lu=J_.slice,se={__e:function(e,t){for(var n,r,o;t=t.__;)if((n=t.__c)&&!n.__)try{if((r=n.constructor)&&r.getDerivedStateFromError!=null&&(n.setState(r.getDerivedStateFromError(e)),o=n.__d),n.componentDidCatch!=null&&(n.componentDidCatch(e),o=n.__d),o)return n.__E=n}catch(a){e=a}throw e}},K_=0,br.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=ci({},this.state),typeof e=="function"&&(e=e(ci({},n),this.props)),e&&ci(n,e),e!=null&&this.__v&&(t&&this.__h.push(t),Vd(this))},br.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),Vd(this))},br.prototype.render=Fragment,cu=[],G_=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,xc.__r=0,Y_=0}),v=uu(()=>{fi()}),$o=ae((exports,module)=>{v();var commonjsGlobal=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function getAugmentedNamespace(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach(function(n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}),t}var src={},Ad4mClient$1={},AgentClient$1={},extendStatics$1=function(e,t){return extendStatics$1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},extendStatics$1(e,t)};function __extends$1(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");extendStatics$1(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var genericMessage="Invariant Violation",_a$3=Object.setPrototypeOf,setPrototypeOf=_a$3===void 0?function(e,t){return e.__proto__=t,e}:_a$3,InvariantError=function(e){__extends$1(t,e);function t(n){n===void 0&&(n=genericMessage);var r=e.call(this,typeof n=="number"?genericMessage+": "+n+" (see https://github.com/apollographql/invariant-packages)":n)||this;return r.framesToPop=1,r.name=genericMessage,setPrototypeOf(r,t.prototype),r}return t}(Error);function invariant$1(e,t){if(!e)throw new InvariantError(t)}var verbosityLevels=["debug","log","warn","error","silent"],verbosityLevel=verbosityLevels.indexOf("log");function wrapConsoleMethod(e){return function(){if(verbosityLevels.indexOf(e)>=verbosityLevel){var t=console[e]||console.log;return t.apply(console,arguments)}}}(function(e){e.debug=wrapConsoleMethod("debug"),e.log=wrapConsoleMethod("log"),e.warn=wrapConsoleMethod("warn"),e.error=wrapConsoleMethod("error")})(invariant$1||(invariant$1={}));function setVerbosity(e){var t=verbosityLevels[verbosityLevel];return verbosityLevel=Math.max(0,verbosityLevels.indexOf(e)),t}function maybe$1(e){try{return e()}catch{}}var global$1=maybe$1(function(){return globalThis})||maybe$1(function(){return window})||maybe$1(function(){return self})||maybe$1(function(){return global})||maybe$1(function(){return maybe$1.constructor("return this")()}),__="__",GLOBAL_KEY=[__,__].join("DEV");function getDEV(){try{return Boolean(__DEV__)}catch{return Object.defineProperty(global$1,GLOBAL_KEY,{value:maybe$1(function(){return"production"})!=="production",enumerable:!1,configurable:!0,writable:!0}),global$1[GLOBAL_KEY]}}var DEV=getDEV();function maybe(e){try{return e()}catch{}}var safeGlobal=maybe(function(){return globalThis})||maybe(function(){return window})||maybe(function(){return self})||maybe(function(){return global})||maybe(function(){return maybe.constructor("return this")()}),needToRemove=!1;function install(){safeGlobal&&!maybe(function(){return"production"})&&!maybe(function(){return process})&&(Object.defineProperty(safeGlobal,"process",{value:{env:{NODE_ENV:"production"}},configurable:!0,enumerable:!1,writable:!0}),needToRemove=!0)}install();function remove(){needToRemove&&(delete safeGlobal.process,needToRemove=!1)}function _typeof$3(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$3=function(t){return typeof t}:_typeof$3=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof$3(e)}function isObjectLike(e){return _typeof$3(e)=="object"&&e!==null}var SYMBOL_TO_STRING_TAG=typeof Symbol=="function"&&Symbol.toStringTag!=null?Symbol.toStringTag:"@@toStringTag";function getLocation(e,t){for(var n=/\r\n|[\n\r]/g,r=1,o=t+1,a;(a=n.exec(e.body))&&a.index<t;)r+=1,o=t+1-(a.index+a[0].length);return{line:r,column:o}}function printLocation(e){return printSourceLocation(e.source,getLocation(e.source,e.start))}function printSourceLocation(e,t){var n=e.locationOffset.column-1,r=whitespace(n)+e.body,o=t.line-1,a=e.locationOffset.line-1,s=t.line+a,u=t.line===1?n:0,l=t.column+u,c="".concat(e.name,":").concat(s,":").concat(l,`
`),m=r.split(/\r\n|[\n\r]/g),me=m[o];if(me.length>120){for(var xe=Math.floor(l/80),Ne=l%80,He=[],Ye=0;Ye<me.length;Ye+=80)He.push(me.slice(Ye,Ye+80));return c+printPrefixedLines([["".concat(s),He[0]]].concat(He.slice(1,xe+1).map(function(Je){return["",Je]}),[[" ",whitespace(Ne-1)+"^"],["",He[xe+1]]]))}return c+printPrefixedLines([["".concat(s-1),m[o-1]],["".concat(s),me],["",whitespace(l-1)+"^"],["".concat(s+1),m[o+1]]])}function printPrefixedLines(e){var t=e.filter(function(r){r[0];var o=r[1];return o!==void 0}),n=Math.max.apply(Math,t.map(function(r){var o=r[0];return o.length}));return t.map(function(r){var o=r[0],a=r[1];return leftPad(n,o)+(a?" | "+a:" |")}).join(`
`)}function whitespace(e){return Array(e+1).join(" ")}function leftPad(e,t){return whitespace(e-t.length)+t}function _typeof$2(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$2=function(t){return typeof t}:_typeof$2=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof$2(e)}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(r){_defineProperty(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties$2(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass$2(e,t,n){return t&&_defineProperties$2(e.prototype,t),n&&_defineProperties$2(e,n),e}function _inherits(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var n=_getPrototypeOf(e),r;if(t){var o=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(e,t){return t&&(_typeof$2(t)==="object"||typeof t=="function")?t:_assertThisInitialized(e)}function _assertThisInitialized(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _wrapNativeSuper(e){var t=typeof Map=="function"?new Map:void 0;return _wrapNativeSuper=function(n){if(n===null||!_isNativeFunction(n))return n;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(typeof t!="undefined"){if(t.has(n))return t.get(n);t.set(n,r)}function r(){return _construct(n,arguments,_getPrototypeOf(this).constructor)}return r.prototype=Object.create(n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(r,n)},_wrapNativeSuper(e)}function _construct(e,t,n){return _isNativeReflectConstruct()?_construct=Reflect.construct:_construct=function(r,o,a){var s=[null];s.push.apply(s,o);var u=Function.bind.apply(r,s),l=new u;return a&&_setPrototypeOf(l,a.prototype),l},_construct.apply(null,arguments)}function _isNativeReflectConstruct(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function _isNativeFunction(e){return Function.toString.call(e).indexOf("[native code]")!==-1}function _setPrototypeOf(e,t){return _setPrototypeOf=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},_setPrototypeOf(e,t)}function _getPrototypeOf(e){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},_getPrototypeOf(e)}var GraphQLError=function(e){_inherits(n,e);var t=_createSuper(n);function n(r,o,a,s,u,l,c){var m,me,xe,Ne;_classCallCheck(this,n),Ne=t.call(this,r),Ne.name="GraphQLError",Ne.originalError=l!=null?l:void 0,Ne.nodes=undefinedIfEmpty(Array.isArray(o)?o:o?[o]:void 0);for(var He=[],Ye=0,Je=(vn=Ne.nodes)!==null&&vn!==void 0?vn:[];Ye<Je.length;Ye++){var vn,La=Je[Ye],sr=La.loc;sr!=null&&He.push(sr)}He=undefinedIfEmpty(He),Ne.source=a!=null?a:(m=He)===null||m===void 0?void 0:m[0].source,Ne.positions=s!=null?s:(me=He)===null||me===void 0?void 0:me.map(function(zs){return zs.start}),Ne.locations=s&&a?s.map(function(zs){return getLocation(a,zs)}):(xe=He)===null||xe===void 0?void 0:xe.map(function(zs){return getLocation(zs.source,zs.start)}),Ne.path=u!=null?u:void 0;var Zr=l==null?void 0:l.extensions;return c==null&&isObjectLike(Zr)?Ne.extensions=_objectSpread({},Zr):Ne.extensions=c!=null?c:{},Object.defineProperties(_assertThisInitialized(Ne),{message:{enumerable:!0},locations:{enumerable:Ne.locations!=null},path:{enumerable:Ne.path!=null},extensions:{enumerable:Ne.extensions!=null&&Object.keys(Ne.extensions).length>0},name:{enumerable:!1},nodes:{enumerable:!1},source:{enumerable:!1},positions:{enumerable:!1},originalError:{enumerable:!1}}),l!=null&&l.stack?(Object.defineProperty(_assertThisInitialized(Ne),"stack",{value:l.stack,writable:!0,configurable:!0}),_possibleConstructorReturn(Ne)):(Error.captureStackTrace?Error.captureStackTrace(_assertThisInitialized(Ne),n):Object.defineProperty(_assertThisInitialized(Ne),"stack",{value:Error().stack,writable:!0,configurable:!0}),Ne)}return _createClass$2(n,[{key:"toString",value:function(){return printError(this)}},{key:SYMBOL_TO_STRING_TAG,get:function(){return"Object"}}]),n}(_wrapNativeSuper(Error));function undefinedIfEmpty(e){return e===void 0||e.length===0?void 0:e}function printError(e){var t=e.message;if(e.nodes)for(var n=0,r=e.nodes;n<r.length;n++){var o=r[n];o.loc&&(t+=`

`+printLocation(o.loc))}else if(e.source&&e.locations)for(var a=0,s=e.locations;a<s.length;a++){var u=s[a];t+=`

`+printSourceLocation(e.source,u)}return t}function syntaxError(e,t,n){return new GraphQLError("Syntax Error: ".concat(n),void 0,e,[t])}var Kind=Object.freeze({NAME:"Name",DOCUMENT:"Document",OPERATION_DEFINITION:"OperationDefinition",VARIABLE_DEFINITION:"VariableDefinition",SELECTION_SET:"SelectionSet",FIELD:"Field",ARGUMENT:"Argument",FRAGMENT_SPREAD:"FragmentSpread",INLINE_FRAGMENT:"InlineFragment",FRAGMENT_DEFINITION:"FragmentDefinition",VARIABLE:"Variable",INT:"IntValue",FLOAT:"FloatValue",STRING:"StringValue",BOOLEAN:"BooleanValue",NULL:"NullValue",ENUM:"EnumValue",LIST:"ListValue",OBJECT:"ObjectValue",OBJECT_FIELD:"ObjectField",DIRECTIVE:"Directive",NAMED_TYPE:"NamedType",LIST_TYPE:"ListType",NON_NULL_TYPE:"NonNullType",SCHEMA_DEFINITION:"SchemaDefinition",OPERATION_TYPE_DEFINITION:"OperationTypeDefinition",SCALAR_TYPE_DEFINITION:"ScalarTypeDefinition",OBJECT_TYPE_DEFINITION:"ObjectTypeDefinition",FIELD_DEFINITION:"FieldDefinition",INPUT_VALUE_DEFINITION:"InputValueDefinition",INTERFACE_TYPE_DEFINITION:"InterfaceTypeDefinition",UNION_TYPE_DEFINITION:"UnionTypeDefinition",ENUM_TYPE_DEFINITION:"EnumTypeDefinition",ENUM_VALUE_DEFINITION:"EnumValueDefinition",INPUT_OBJECT_TYPE_DEFINITION:"InputObjectTypeDefinition",DIRECTIVE_DEFINITION:"DirectiveDefinition",SCHEMA_EXTENSION:"SchemaExtension",SCALAR_TYPE_EXTENSION:"ScalarTypeExtension",OBJECT_TYPE_EXTENSION:"ObjectTypeExtension",INTERFACE_TYPE_EXTENSION:"InterfaceTypeExtension",UNION_TYPE_EXTENSION:"UnionTypeExtension",ENUM_TYPE_EXTENSION:"EnumTypeExtension",INPUT_OBJECT_TYPE_EXTENSION:"InputObjectTypeExtension"});function invariant(e,t){var n=Boolean(e);if(!n)throw new Error(t!=null?t:"Unexpected invariant triggered.")}var nodejsCustomInspectSymbol=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):void 0,nodejsCustomInspectSymbol$1=nodejsCustomInspectSymbol;function defineInspect(e){var t=e.prototype.toJSON;typeof t=="function"||invariant(0),e.prototype.inspect=t,nodejsCustomInspectSymbol$1&&(e.prototype[nodejsCustomInspectSymbol$1]=t)}var Location=function(){function e(n,r,o){this.start=n.start,this.end=r.end,this.startToken=n,this.endToken=r,this.source=o}var t=e.prototype;return t.toJSON=function(){return{start:this.start,end:this.end}},e}();defineInspect(Location);var Token=function(){function e(n,r,o,a,s,u,l){this.kind=n,this.start=r,this.end=o,this.line=a,this.column=s,this.value=l,this.prev=u,this.next=null}var t=e.prototype;return t.toJSON=function(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}},e}();defineInspect(Token);function isNode(e){return e!=null&&typeof e.kind=="string"}var TokenKind=Object.freeze({SOF:"<SOF>",EOF:"<EOF>",BANG:"!",DOLLAR:"$",AMP:"&",PAREN_L:"(",PAREN_R:")",SPREAD:"...",COLON:":",EQUALS:"=",AT:"@",BRACKET_L:"[",BRACKET_R:"]",BRACE_L:"{",PIPE:"|",BRACE_R:"}",NAME:"Name",INT:"Int",FLOAT:"Float",STRING:"String",BLOCK_STRING:"BlockString",COMMENT:"Comment"});function _typeof$1(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$1=function(t){return typeof t}:_typeof$1=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof$1(e)}var MAX_ARRAY_LENGTH=10,MAX_RECURSIVE_DEPTH=2;function inspect(e){return formatValue(e,[])}function formatValue(e,t){switch(_typeof$1(e)){case"string":return JSON.stringify(e);case"function":return e.name?"[function ".concat(e.name,"]"):"[function]";case"object":return e===null?"null":formatObjectValue(e,t);default:return String(e)}}function formatObjectValue(e,t){if(t.indexOf(e)!==-1)return"[Circular]";var n=[].concat(t,[e]),r=getCustomFn(e);if(r!==void 0){var o=r.call(e);if(o!==e)return typeof o=="string"?o:formatValue(o,n)}else if(Array.isArray(e))return formatArray(e,n);return formatObject(e,n)}function formatObject(e,t){var n=Object.keys(e);if(n.length===0)return"{}";if(t.length>MAX_RECURSIVE_DEPTH)return"["+getObjectTag(e)+"]";var r=n.map(function(o){var a=formatValue(e[o],t);return o+": "+a});return"{ "+r.join(", ")+" }"}function formatArray(e,t){if(e.length===0)return"[]";if(t.length>MAX_RECURSIVE_DEPTH)return"[Array]";for(var n=Math.min(MAX_ARRAY_LENGTH,e.length),r=e.length-n,o=[],a=0;a<n;++a)o.push(formatValue(e[a],t));return r===1?o.push("... 1 more item"):r>1&&o.push("... ".concat(r," more items")),"["+o.join(", ")+"]"}function getCustomFn(e){var t=e[String(nodejsCustomInspectSymbol$1)];if(typeof t=="function")return t;if(typeof e.inspect=="function")return e.inspect}function getObjectTag(e){var t=Object.prototype.toString.call(e).replace(/^\[object /,"").replace(/]$/,"");if(t==="Object"&&typeof e.constructor=="function"){var n=e.constructor.name;if(typeof n=="string"&&n!=="")return n}return t}function devAssert(e,t){var n=Boolean(e);if(!n)throw new Error(t)}var instanceOf=function(e,t){return e instanceof t};function _defineProperties$1(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass$1(e,t,n){return t&&_defineProperties$1(e.prototype,t),n&&_defineProperties$1(e,n),e}var Source=function(){function e(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"GraphQL request",r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{line:1,column:1};typeof t=="string"||devAssert(0,"Body must be a string. Received: ".concat(inspect(t),".")),this.body=t,this.name=n,this.locationOffset=r,this.locationOffset.line>0||devAssert(0,"line in locationOffset is 1-indexed and must be positive."),this.locationOffset.column>0||devAssert(0,"column in locationOffset is 1-indexed and must be positive.")}return _createClass$1(e,[{key:SYMBOL_TO_STRING_TAG,get:function(){return"Source"}}]),e}();function isSource(e){return instanceOf(e,Source)}var DirectiveLocation=Object.freeze({QUERY:"QUERY",MUTATION:"MUTATION",SUBSCRIPTION:"SUBSCRIPTION",FIELD:"FIELD",FRAGMENT_DEFINITION:"FRAGMENT_DEFINITION",FRAGMENT_SPREAD:"FRAGMENT_SPREAD",INLINE_FRAGMENT:"INLINE_FRAGMENT",VARIABLE_DEFINITION:"VARIABLE_DEFINITION",SCHEMA:"SCHEMA",SCALAR:"SCALAR",OBJECT:"OBJECT",FIELD_DEFINITION:"FIELD_DEFINITION",ARGUMENT_DEFINITION:"ARGUMENT_DEFINITION",INTERFACE:"INTERFACE",UNION:"UNION",ENUM:"ENUM",ENUM_VALUE:"ENUM_VALUE",INPUT_OBJECT:"INPUT_OBJECT",INPUT_FIELD_DEFINITION:"INPUT_FIELD_DEFINITION"});function dedentBlockStringValue(e){var t=e.split(/\r\n|[\n\r]/g),n=getBlockStringIndentation(e);if(n!==0)for(var r=1;r<t.length;r++)t[r]=t[r].slice(n);for(var o=0;o<t.length&&isBlank(t[o]);)++o;for(var a=t.length;a>o&&isBlank(t[a-1]);)--a;return t.slice(o,a).join(`
`)}function isBlank(e){for(var t=0;t<e.length;++t)if(e[t]!==" "&&e[t]!=="	")return!1;return!0}function getBlockStringIndentation(e){for(var t,n=!0,r=!0,o=0,a=null,s=0;s<e.length;++s)switch(e.charCodeAt(s)){case 13:e.charCodeAt(s+1)===10&&++s;case 10:n=!1,r=!0,o=0;break;case 9:case 32:++o;break;default:r&&!n&&(a===null||o<a)&&(a=o),r=!1}return(t=a)!==null&&t!==void 0?t:0}function printBlockString(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=e.indexOf(`
`)===-1,o=e[0]===" "||e[0]==="	",a=e[e.length-1]==='"',s=e[e.length-1]==="\\",u=!r||a||s||n,l="";return u&&!(r&&o)&&(l+=`
`+t),l+=t?e.replace(/\n/g,`
`+t):e,u&&(l+=`
`),'"""'+l.replace(/"""/g,'\\"""')+'"""'}var Lexer=function(){function e(n){var r=new Token(TokenKind.SOF,0,0,0,0,null);this.source=n,this.lastToken=r,this.token=r,this.line=1,this.lineStart=0}var t=e.prototype;return t.advance=function(){this.lastToken=this.token;var n=this.token=this.lookahead();return n},t.lookahead=function(){var n=this.token;if(n.kind!==TokenKind.EOF)do{var r;n=(r=n.next)!==null&&r!==void 0?r:n.next=readToken(this,n)}while(n.kind===TokenKind.COMMENT);return n},e}();function isPunctuatorTokenKind(e){return e===TokenKind.BANG||e===TokenKind.DOLLAR||e===TokenKind.AMP||e===TokenKind.PAREN_L||e===TokenKind.PAREN_R||e===TokenKind.SPREAD||e===TokenKind.COLON||e===TokenKind.EQUALS||e===TokenKind.AT||e===TokenKind.BRACKET_L||e===TokenKind.BRACKET_R||e===TokenKind.BRACE_L||e===TokenKind.PIPE||e===TokenKind.BRACE_R}function printCharCode(e){return isNaN(e)?TokenKind.EOF:e<127?JSON.stringify(String.fromCharCode(e)):'"\\u'.concat(("00"+e.toString(16).toUpperCase()).slice(-4),'"')}function readToken(e,t){for(var n=e.source,r=n.body,o=r.length,a=t.end;a<o;){var s=r.charCodeAt(a),u=e.line,l=1+a-e.lineStart;switch(s){case 65279:case 9:case 32:case 44:++a;continue;case 10:++a,++e.line,e.lineStart=a;continue;case 13:r.charCodeAt(a+1)===10?a+=2:++a,++e.line,e.lineStart=a;continue;case 33:return new Token(TokenKind.BANG,a,a+1,u,l,t);case 35:return readComment(n,a,u,l,t);case 36:return new Token(TokenKind.DOLLAR,a,a+1,u,l,t);case 38:return new Token(TokenKind.AMP,a,a+1,u,l,t);case 40:return new Token(TokenKind.PAREN_L,a,a+1,u,l,t);case 41:return new Token(TokenKind.PAREN_R,a,a+1,u,l,t);case 46:if(r.charCodeAt(a+1)===46&&r.charCodeAt(a+2)===46)return new Token(TokenKind.SPREAD,a,a+3,u,l,t);break;case 58:return new Token(TokenKind.COLON,a,a+1,u,l,t);case 61:return new Token(TokenKind.EQUALS,a,a+1,u,l,t);case 64:return new Token(TokenKind.AT,a,a+1,u,l,t);case 91:return new Token(TokenKind.BRACKET_L,a,a+1,u,l,t);case 93:return new Token(TokenKind.BRACKET_R,a,a+1,u,l,t);case 123:return new Token(TokenKind.BRACE_L,a,a+1,u,l,t);case 124:return new Token(TokenKind.PIPE,a,a+1,u,l,t);case 125:return new Token(TokenKind.BRACE_R,a,a+1,u,l,t);case 34:return r.charCodeAt(a+1)===34&&r.charCodeAt(a+2)===34?readBlockString(n,a,u,l,t,e):readString(n,a,u,l,t);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return readNumber(n,a,s,u,l,t);case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:case 95:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:return readName(n,a,u,l,t)}throw syntaxError(n,a,unexpectedCharacterMessage(s))}var c=e.line,m=1+a-e.lineStart;return new Token(TokenKind.EOF,o,o,c,m,t)}function unexpectedCharacterMessage(e){return e<32&&e!==9&&e!==10&&e!==13?"Cannot contain the invalid character ".concat(printCharCode(e),"."):e===39?`Unexpected single quote character ('), did you mean to use a double quote (")?`:"Cannot parse the unexpected character ".concat(printCharCode(e),".")}function readComment(e,t,n,r,o){var a=e.body,s,u=t;do s=a.charCodeAt(++u);while(!isNaN(s)&&(s>31||s===9));return new Token(TokenKind.COMMENT,t,u,n,r,o,a.slice(t+1,u))}function readNumber(e,t,n,r,o,a){var s=e.body,u=n,l=t,c=!1;if(u===45&&(u=s.charCodeAt(++l)),u===48){if(u=s.charCodeAt(++l),u>=48&&u<=57)throw syntaxError(e,l,"Invalid number, unexpected digit after 0: ".concat(printCharCode(u),"."))}else l=readDigits(e,l,u),u=s.charCodeAt(l);if(u===46&&(c=!0,u=s.charCodeAt(++l),l=readDigits(e,l,u),u=s.charCodeAt(l)),(u===69||u===101)&&(c=!0,u=s.charCodeAt(++l),(u===43||u===45)&&(u=s.charCodeAt(++l)),l=readDigits(e,l,u),u=s.charCodeAt(l)),u===46||isNameStart(u))throw syntaxError(e,l,"Invalid number, expected digit but got: ".concat(printCharCode(u),"."));return new Token(c?TokenKind.FLOAT:TokenKind.INT,t,l,r,o,a,s.slice(t,l))}function readDigits(e,t,n){var r=e.body,o=t,a=n;if(a>=48&&a<=57){do a=r.charCodeAt(++o);while(a>=48&&a<=57);return o}throw syntaxError(e,o,"Invalid number, expected digit but got: ".concat(printCharCode(a),"."))}function readString(e,t,n,r,o){for(var a=e.body,s=t+1,u=s,l=0,c="";s<a.length&&!isNaN(l=a.charCodeAt(s))&&l!==10&&l!==13;){if(l===34)return c+=a.slice(u,s),new Token(TokenKind.STRING,t,s+1,n,r,o,c);if(l<32&&l!==9)throw syntaxError(e,s,"Invalid character within String: ".concat(printCharCode(l),"."));if(++s,l===92){switch(c+=a.slice(u,s-1),l=a.charCodeAt(s),l){case 34:c+='"';break;case 47:c+="/";break;case 92:c+="\\";break;case 98:c+="\b";break;case 102:c+="\f";break;case 110:c+=`
`;break;case 114:c+="\r";break;case 116:c+="	";break;case 117:{var m=uniCharCode(a.charCodeAt(s+1),a.charCodeAt(s+2),a.charCodeAt(s+3),a.charCodeAt(s+4));if(m<0){var me=a.slice(s+1,s+5);throw syntaxError(e,s,"Invalid character escape sequence: \\u".concat(me,"."))}c+=String.fromCharCode(m),s+=4;break}default:throw syntaxError(e,s,"Invalid character escape sequence: \\".concat(String.fromCharCode(l),"."))}++s,u=s}}throw syntaxError(e,s,"Unterminated string.")}function readBlockString(e,t,n,r,o,a){for(var s=e.body,u=t+3,l=u,c=0,m="";u<s.length&&!isNaN(c=s.charCodeAt(u));){if(c===34&&s.charCodeAt(u+1)===34&&s.charCodeAt(u+2)===34)return m+=s.slice(l,u),new Token(TokenKind.BLOCK_STRING,t,u+3,n,r,o,dedentBlockStringValue(m));if(c<32&&c!==9&&c!==10&&c!==13)throw syntaxError(e,u,"Invalid character within String: ".concat(printCharCode(c),"."));c===10?(++u,++a.line,a.lineStart=u):c===13?(s.charCodeAt(u+1)===10?u+=2:++u,++a.line,a.lineStart=u):c===92&&s.charCodeAt(u+1)===34&&s.charCodeAt(u+2)===34&&s.charCodeAt(u+3)===34?(m+=s.slice(l,u)+'"""',u+=4,l=u):++u}throw syntaxError(e,u,"Unterminated string.")}function uniCharCode(e,t,n,r){return char2hex(e)<<12|char2hex(t)<<8|char2hex(n)<<4|char2hex(r)}function char2hex(e){return e>=48&&e<=57?e-48:e>=65&&e<=70?e-55:e>=97&&e<=102?e-87:-1}function readName(e,t,n,r,o){for(var a=e.body,s=a.length,u=t+1,l=0;u!==s&&!isNaN(l=a.charCodeAt(u))&&(l===95||l>=48&&l<=57||l>=65&&l<=90||l>=97&&l<=122);)++u;return new Token(TokenKind.NAME,t,u,n,r,o,a.slice(t,u))}function isNameStart(e){return e===95||e>=65&&e<=90||e>=97&&e<=122}function parse(e,t){var n=new Parser(e,t);return n.parseDocument()}var Parser=function(){function e(n,r){var o=isSource(n)?n:new Source(n);this._lexer=new Lexer(o),this._options=r}var t=e.prototype;return t.parseName=function(){var n=this.expectToken(TokenKind.NAME);return{kind:Kind.NAME,value:n.value,loc:this.loc(n)}},t.parseDocument=function(){var n=this._lexer.token;return{kind:Kind.DOCUMENT,definitions:this.many(TokenKind.SOF,this.parseDefinition,TokenKind.EOF),loc:this.loc(n)}},t.parseDefinition=function(){if(this.peek(TokenKind.NAME))switch(this._lexer.token.value){case"query":case"mutation":case"subscription":return this.parseOperationDefinition();case"fragment":return this.parseFragmentDefinition();case"schema":case"scalar":case"type":case"interface":case"union":case"enum":case"input":case"directive":return this.parseTypeSystemDefinition();case"extend":return this.parseTypeSystemExtension()}else{if(this.peek(TokenKind.BRACE_L))return this.parseOperationDefinition();if(this.peekDescription())return this.parseTypeSystemDefinition()}throw this.unexpected()},t.parseOperationDefinition=function(){var n=this._lexer.token;if(this.peek(TokenKind.BRACE_L))return{kind:Kind.OPERATION_DEFINITION,operation:"query",name:void 0,variableDefinitions:[],directives:[],selectionSet:this.parseSelectionSet(),loc:this.loc(n)};var r=this.parseOperationType(),o;return this.peek(TokenKind.NAME)&&(o=this.parseName()),{kind:Kind.OPERATION_DEFINITION,operation:r,name:o,variableDefinitions:this.parseVariableDefinitions(),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(n)}},t.parseOperationType=function(){var n=this.expectToken(TokenKind.NAME);switch(n.value){case"query":return"query";case"mutation":return"mutation";case"subscription":return"subscription"}throw this.unexpected(n)},t.parseVariableDefinitions=function(){return this.optionalMany(TokenKind.PAREN_L,this.parseVariableDefinition,TokenKind.PAREN_R)},t.parseVariableDefinition=function(){var n=this._lexer.token;return{kind:Kind.VARIABLE_DEFINITION,variable:this.parseVariable(),type:(this.expectToken(TokenKind.COLON),this.parseTypeReference()),defaultValue:this.expectOptionalToken(TokenKind.EQUALS)?this.parseValueLiteral(!0):void 0,directives:this.parseDirectives(!0),loc:this.loc(n)}},t.parseVariable=function(){var n=this._lexer.token;return this.expectToken(TokenKind.DOLLAR),{kind:Kind.VARIABLE,name:this.parseName(),loc:this.loc(n)}},t.parseSelectionSet=function(){var n=this._lexer.token;return{kind:Kind.SELECTION_SET,selections:this.many(TokenKind.BRACE_L,this.parseSelection,TokenKind.BRACE_R),loc:this.loc(n)}},t.parseSelection=function(){return this.peek(TokenKind.SPREAD)?this.parseFragment():this.parseField()},t.parseField=function(){var n=this._lexer.token,r=this.parseName(),o,a;return this.expectOptionalToken(TokenKind.COLON)?(o=r,a=this.parseName()):a=r,{kind:Kind.FIELD,alias:o,name:a,arguments:this.parseArguments(!1),directives:this.parseDirectives(!1),selectionSet:this.peek(TokenKind.BRACE_L)?this.parseSelectionSet():void 0,loc:this.loc(n)}},t.parseArguments=function(n){var r=n?this.parseConstArgument:this.parseArgument;return this.optionalMany(TokenKind.PAREN_L,r,TokenKind.PAREN_R)},t.parseArgument=function(){var n=this._lexer.token,r=this.parseName();return this.expectToken(TokenKind.COLON),{kind:Kind.ARGUMENT,name:r,value:this.parseValueLiteral(!1),loc:this.loc(n)}},t.parseConstArgument=function(){var n=this._lexer.token;return{kind:Kind.ARGUMENT,name:this.parseName(),value:(this.expectToken(TokenKind.COLON),this.parseValueLiteral(!0)),loc:this.loc(n)}},t.parseFragment=function(){var n=this._lexer.token;this.expectToken(TokenKind.SPREAD);var r=this.expectOptionalKeyword("on");return!r&&this.peek(TokenKind.NAME)?{kind:Kind.FRAGMENT_SPREAD,name:this.parseFragmentName(),directives:this.parseDirectives(!1),loc:this.loc(n)}:{kind:Kind.INLINE_FRAGMENT,typeCondition:r?this.parseNamedType():void 0,directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(n)}},t.parseFragmentDefinition=function(){var n,r=this._lexer.token;return this.expectKeyword("fragment"),((n=this._options)===null||n===void 0?void 0:n.experimentalFragmentVariables)===!0?{kind:Kind.FRAGMENT_DEFINITION,name:this.parseFragmentName(),variableDefinitions:this.parseVariableDefinitions(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(r)}:{kind:Kind.FRAGMENT_DEFINITION,name:this.parseFragmentName(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(r)}},t.parseFragmentName=function(){if(this._lexer.token.value==="on")throw this.unexpected();return this.parseName()},t.parseValueLiteral=function(n){var r=this._lexer.token;switch(r.kind){case TokenKind.BRACKET_L:return this.parseList(n);case TokenKind.BRACE_L:return this.parseObject(n);case TokenKind.INT:return this._lexer.advance(),{kind:Kind.INT,value:r.value,loc:this.loc(r)};case TokenKind.FLOAT:return this._lexer.advance(),{kind:Kind.FLOAT,value:r.value,loc:this.loc(r)};case TokenKind.STRING:case TokenKind.BLOCK_STRING:return this.parseStringLiteral();case TokenKind.NAME:switch(this._lexer.advance(),r.value){case"true":return{kind:Kind.BOOLEAN,value:!0,loc:this.loc(r)};case"false":return{kind:Kind.BOOLEAN,value:!1,loc:this.loc(r)};case"null":return{kind:Kind.NULL,loc:this.loc(r)};default:return{kind:Kind.ENUM,value:r.value,loc:this.loc(r)}}case TokenKind.DOLLAR:if(!n)return this.parseVariable();break}throw this.unexpected()},t.parseStringLiteral=function(){var n=this._lexer.token;return this._lexer.advance(),{kind:Kind.STRING,value:n.value,block:n.kind===TokenKind.BLOCK_STRING,loc:this.loc(n)}},t.parseList=function(n){var r=this,o=this._lexer.token,a=function(){return r.parseValueLiteral(n)};return{kind:Kind.LIST,values:this.any(TokenKind.BRACKET_L,a,TokenKind.BRACKET_R),loc:this.loc(o)}},t.parseObject=function(n){var r=this,o=this._lexer.token,a=function(){return r.parseObjectField(n)};return{kind:Kind.OBJECT,fields:this.any(TokenKind.BRACE_L,a,TokenKind.BRACE_R),loc:this.loc(o)}},t.parseObjectField=function(n){var r=this._lexer.token,o=this.parseName();return this.expectToken(TokenKind.COLON),{kind:Kind.OBJECT_FIELD,name:o,value:this.parseValueLiteral(n),loc:this.loc(r)}},t.parseDirectives=function(n){for(var r=[];this.peek(TokenKind.AT);)r.push(this.parseDirective(n));return r},t.parseDirective=function(n){var r=this._lexer.token;return this.expectToken(TokenKind.AT),{kind:Kind.DIRECTIVE,name:this.parseName(),arguments:this.parseArguments(n),loc:this.loc(r)}},t.parseTypeReference=function(){var n=this._lexer.token,r;return this.expectOptionalToken(TokenKind.BRACKET_L)?(r=this.parseTypeReference(),this.expectToken(TokenKind.BRACKET_R),r={kind:Kind.LIST_TYPE,type:r,loc:this.loc(n)}):r=this.parseNamedType(),this.expectOptionalToken(TokenKind.BANG)?{kind:Kind.NON_NULL_TYPE,type:r,loc:this.loc(n)}:r},t.parseNamedType=function(){var n=this._lexer.token;return{kind:Kind.NAMED_TYPE,name:this.parseName(),loc:this.loc(n)}},t.parseTypeSystemDefinition=function(){var n=this.peekDescription()?this._lexer.lookahead():this._lexer.token;if(n.kind===TokenKind.NAME)switch(n.value){case"schema":return this.parseSchemaDefinition();case"scalar":return this.parseScalarTypeDefinition();case"type":return this.parseObjectTypeDefinition();case"interface":return this.parseInterfaceTypeDefinition();case"union":return this.parseUnionTypeDefinition();case"enum":return this.parseEnumTypeDefinition();case"input":return this.parseInputObjectTypeDefinition();case"directive":return this.parseDirectiveDefinition()}throw this.unexpected(n)},t.peekDescription=function(){return this.peek(TokenKind.STRING)||this.peek(TokenKind.BLOCK_STRING)},t.parseDescription=function(){if(this.peekDescription())return this.parseStringLiteral()},t.parseSchemaDefinition=function(){var n=this._lexer.token,r=this.parseDescription();this.expectKeyword("schema");var o=this.parseDirectives(!0),a=this.many(TokenKind.BRACE_L,this.parseOperationTypeDefinition,TokenKind.BRACE_R);return{kind:Kind.SCHEMA_DEFINITION,description:r,directives:o,operationTypes:a,loc:this.loc(n)}},t.parseOperationTypeDefinition=function(){var n=this._lexer.token,r=this.parseOperationType();this.expectToken(TokenKind.COLON);var o=this.parseNamedType();return{kind:Kind.OPERATION_TYPE_DEFINITION,operation:r,type:o,loc:this.loc(n)}},t.parseScalarTypeDefinition=function(){var n=this._lexer.token,r=this.parseDescription();this.expectKeyword("scalar");var o=this.parseName(),a=this.parseDirectives(!0);return{kind:Kind.SCALAR_TYPE_DEFINITION,description:r,name:o,directives:a,loc:this.loc(n)}},t.parseObjectTypeDefinition=function(){var n=this._lexer.token,r=this.parseDescription();this.expectKeyword("type");var o=this.parseName(),a=this.parseImplementsInterfaces(),s=this.parseDirectives(!0),u=this.parseFieldsDefinition();return{kind:Kind.OBJECT_TYPE_DEFINITION,description:r,name:o,interfaces:a,directives:s,fields:u,loc:this.loc(n)}},t.parseImplementsInterfaces=function(){var n;if(!this.expectOptionalKeyword("implements"))return[];if(((n=this._options)===null||n===void 0?void 0:n.allowLegacySDLImplementsInterfaces)===!0){var r=[];this.expectOptionalToken(TokenKind.AMP);do r.push(this.parseNamedType());while(this.expectOptionalToken(TokenKind.AMP)||this.peek(TokenKind.NAME));return r}return this.delimitedMany(TokenKind.AMP,this.parseNamedType)},t.parseFieldsDefinition=function(){var n;return((n=this._options)===null||n===void 0?void 0:n.allowLegacySDLEmptyFields)===!0&&this.peek(TokenKind.BRACE_L)&&this._lexer.lookahead().kind===TokenKind.BRACE_R?(this._lexer.advance(),this._lexer.advance(),[]):this.optionalMany(TokenKind.BRACE_L,this.parseFieldDefinition,TokenKind.BRACE_R)},t.parseFieldDefinition=function(){var n=this._lexer.token,r=this.parseDescription(),o=this.parseName(),a=this.parseArgumentDefs();this.expectToken(TokenKind.COLON);var s=this.parseTypeReference(),u=this.parseDirectives(!0);return{kind:Kind.FIELD_DEFINITION,description:r,name:o,arguments:a,type:s,directives:u,loc:this.loc(n)}},t.parseArgumentDefs=function(){return this.optionalMany(TokenKind.PAREN_L,this.parseInputValueDef,TokenKind.PAREN_R)},t.parseInputValueDef=function(){var n=this._lexer.token,r=this.parseDescription(),o=this.parseName();this.expectToken(TokenKind.COLON);var a=this.parseTypeReference(),s;this.expectOptionalToken(TokenKind.EQUALS)&&(s=this.parseValueLiteral(!0));var u=this.parseDirectives(!0);return{kind:Kind.INPUT_VALUE_DEFINITION,description:r,name:o,type:a,defaultValue:s,directives:u,loc:this.loc(n)}},t.parseInterfaceTypeDefinition=function(){var n=this._lexer.token,r=this.parseDescription();this.expectKeyword("interface");var o=this.parseName(),a=this.parseImplementsInterfaces(),s=this.parseDirectives(!0),u=this.parseFieldsDefinition();return{kind:Kind.INTERFACE_TYPE_DEFINITION,description:r,name:o,interfaces:a,directives:s,fields:u,loc:this.loc(n)}},t.parseUnionTypeDefinition=function(){var n=this._lexer.token,r=this.parseDescription();this.expectKeyword("union");var o=this.parseName(),a=this.parseDirectives(!0),s=this.parseUnionMemberTypes();return{kind:Kind.UNION_TYPE_DEFINITION,description:r,name:o,directives:a,types:s,loc:this.loc(n)}},t.parseUnionMemberTypes=function(){return this.expectOptionalToken(TokenKind.EQUALS)?this.delimitedMany(TokenKind.PIPE,this.parseNamedType):[]},t.parseEnumTypeDefinition=function(){var n=this._lexer.token,r=this.parseDescription();this.expectKeyword("enum");var o=this.parseName(),a=this.parseDirectives(!0),s=this.parseEnumValuesDefinition();return{kind:Kind.ENUM_TYPE_DEFINITION,description:r,name:o,directives:a,values:s,loc:this.loc(n)}},t.parseEnumValuesDefinition=function(){return this.optionalMany(TokenKind.BRACE_L,this.parseEnumValueDefinition,TokenKind.BRACE_R)},t.parseEnumValueDefinition=function(){var n=this._lexer.token,r=this.parseDescription(),o=this.parseName(),a=this.parseDirectives(!0);return{kind:Kind.ENUM_VALUE_DEFINITION,description:r,name:o,directives:a,loc:this.loc(n)}},t.parseInputObjectTypeDefinition=function(){var n=this._lexer.token,r=this.parseDescription();this.expectKeyword("input");var o=this.parseName(),a=this.parseDirectives(!0),s=this.parseInputFieldsDefinition();return{kind:Kind.INPUT_OBJECT_TYPE_DEFINITION,description:r,name:o,directives:a,fields:s,loc:this.loc(n)}},t.parseInputFieldsDefinition=function(){return this.optionalMany(TokenKind.BRACE_L,this.parseInputValueDef,TokenKind.BRACE_R)},t.parseTypeSystemExtension=function(){var n=this._lexer.lookahead();if(n.kind===TokenKind.NAME)switch(n.value){case"schema":return this.parseSchemaExtension();case"scalar":return this.parseScalarTypeExtension();case"type":return this.parseObjectTypeExtension();case"interface":return this.parseInterfaceTypeExtension();case"union":return this.parseUnionTypeExtension();case"enum":return this.parseEnumTypeExtension();case"input":return this.parseInputObjectTypeExtension()}throw this.unexpected(n)},t.parseSchemaExtension=function(){var n=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("schema");var r=this.parseDirectives(!0),o=this.optionalMany(TokenKind.BRACE_L,this.parseOperationTypeDefinition,TokenKind.BRACE_R);if(r.length===0&&o.length===0)throw this.unexpected();return{kind:Kind.SCHEMA_EXTENSION,directives:r,operationTypes:o,loc:this.loc(n)}},t.parseScalarTypeExtension=function(){var n=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("scalar");var r=this.parseName(),o=this.parseDirectives(!0);if(o.length===0)throw this.unexpected();return{kind:Kind.SCALAR_TYPE_EXTENSION,name:r,directives:o,loc:this.loc(n)}},t.parseObjectTypeExtension=function(){var n=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("type");var r=this.parseName(),o=this.parseImplementsInterfaces(),a=this.parseDirectives(!0),s=this.parseFieldsDefinition();if(o.length===0&&a.length===0&&s.length===0)throw this.unexpected();return{kind:Kind.OBJECT_TYPE_EXTENSION,name:r,interfaces:o,directives:a,fields:s,loc:this.loc(n)}},t.parseInterfaceTypeExtension=function(){var n=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("interface");var r=this.parseName(),o=this.parseImplementsInterfaces(),a=this.parseDirectives(!0),s=this.parseFieldsDefinition();if(o.length===0&&a.length===0&&s.length===0)throw this.unexpected();return{kind:Kind.INTERFACE_TYPE_EXTENSION,name:r,interfaces:o,directives:a,fields:s,loc:this.loc(n)}},t.parseUnionTypeExtension=function(){var n=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("union");var r=this.parseName(),o=this.parseDirectives(!0),a=this.parseUnionMemberTypes();if(o.length===0&&a.length===0)throw this.unexpected();return{kind:Kind.UNION_TYPE_EXTENSION,name:r,directives:o,types:a,loc:this.loc(n)}},t.parseEnumTypeExtension=function(){var n=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("enum");var r=this.parseName(),o=this.parseDirectives(!0),a=this.parseEnumValuesDefinition();if(o.length===0&&a.length===0)throw this.unexpected();return{kind:Kind.ENUM_TYPE_EXTENSION,name:r,directives:o,values:a,loc:this.loc(n)}},t.parseInputObjectTypeExtension=function(){var n=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("input");var r=this.parseName(),o=this.parseDirectives(!0),a=this.parseInputFieldsDefinition();if(o.length===0&&a.length===0)throw this.unexpected();return{kind:Kind.INPUT_OBJECT_TYPE_EXTENSION,name:r,directives:o,fields:a,loc:this.loc(n)}},t.parseDirectiveDefinition=function(){var n=this._lexer.token,r=this.parseDescription();this.expectKeyword("directive"),this.expectToken(TokenKind.AT);var o=this.parseName(),a=this.parseArgumentDefs(),s=this.expectOptionalKeyword("repeatable");this.expectKeyword("on");var u=this.parseDirectiveLocations();return{kind:Kind.DIRECTIVE_DEFINITION,description:r,name:o,arguments:a,repeatable:s,locations:u,loc:this.loc(n)}},t.parseDirectiveLocations=function(){return this.delimitedMany(TokenKind.PIPE,this.parseDirectiveLocation)},t.parseDirectiveLocation=function(){var n=this._lexer.token,r=this.parseName();if(DirectiveLocation[r.value]!==void 0)return r;throw this.unexpected(n)},t.loc=function(n){var r;if(((r=this._options)===null||r===void 0?void 0:r.noLocation)!==!0)return new Location(n,this._lexer.lastToken,this._lexer.source)},t.peek=function(n){return this._lexer.token.kind===n},t.expectToken=function(n){var r=this._lexer.token;if(r.kind===n)return this._lexer.advance(),r;throw syntaxError(this._lexer.source,r.start,"Expected ".concat(getTokenKindDesc(n),", found ").concat(getTokenDesc(r),"."))},t.expectOptionalToken=function(n){var r=this._lexer.token;if(r.kind===n)return this._lexer.advance(),r},t.expectKeyword=function(n){var r=this._lexer.token;if(r.kind===TokenKind.NAME&&r.value===n)this._lexer.advance();else throw syntaxError(this._lexer.source,r.start,'Expected "'.concat(n,'", found ').concat(getTokenDesc(r),"."))},t.expectOptionalKeyword=function(n){var r=this._lexer.token;return r.kind===TokenKind.NAME&&r.value===n?(this._lexer.advance(),!0):!1},t.unexpected=function(n){var r=n!=null?n:this._lexer.token;return syntaxError(this._lexer.source,r.start,"Unexpected ".concat(getTokenDesc(r),"."))},t.any=function(n,r,o){this.expectToken(n);for(var a=[];!this.expectOptionalToken(o);)a.push(r.call(this));return a},t.optionalMany=function(n,r,o){if(this.expectOptionalToken(n)){var a=[];do a.push(r.call(this));while(!this.expectOptionalToken(o));return a}return[]},t.many=function(n,r,o){this.expectToken(n);var a=[];do a.push(r.call(this));while(!this.expectOptionalToken(o));return a},t.delimitedMany=function(n,r){this.expectOptionalToken(n);var o=[];do o.push(r.call(this));while(this.expectOptionalToken(n));return o},e}();function getTokenDesc(e){var t=e.value;return getTokenKindDesc(e.kind)+(t!=null?' "'.concat(t,'"'):"")}function getTokenKindDesc(e){return isPunctuatorTokenKind(e)?'"'.concat(e,'"'):e}var QueryDocumentKeys={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},BREAK=Object.freeze({});function visit(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:QueryDocumentKeys,r=void 0,o=Array.isArray(e),a=[e],s=-1,u=[],l=void 0,c=void 0,m=void 0,me=[],xe=[],Ne=e;do{s++;var He=s===a.length,Ye=He&&u.length!==0;if(He){if(c=xe.length===0?void 0:me[me.length-1],l=m,m=xe.pop(),Ye){if(o)l=l.slice();else{for(var Je={},vn=0,La=Object.keys(l);vn<La.length;vn++){var sr=La[vn];Je[sr]=l[sr]}l=Je}for(var Zr=0,zs=0;zs<u.length;zs++){var za=u[zs][0],Hs=u[zs][1];o&&(za-=Zr),o&&Hs===null?(l.splice(za,1),Zr++):l[za]=Hs}}s=r.index,a=r.keys,u=r.edits,o=r.inArray,r=r.prev}else{if(c=m?o?s:a[s]:void 0,l=m?m[c]:Ne,l==null)continue;m&&me.push(c)}var lc=void 0;if(!Array.isArray(l)){if(!isNode(l))throw new Error("Invalid AST Node: ".concat(inspect(l),"."));var Ty=getVisitFn(t,l.kind,He);if(Ty){if(lc=Ty.call(t,l,c,m,me,xe),lc===BREAK)break;if(lc===!1){if(!He){me.pop();continue}}else if(lc!==void 0&&(u.push([c,lc]),!He))if(isNode(lc))l=lc;else{me.pop();continue}}}if(lc===void 0&&Ye&&u.push([c,l]),He)me.pop();else{var _y;r={inArray:o,index:s,keys:a,edits:u,prev:r},o=Array.isArray(l),a=o?l:(_y=n[l.kind])!==null&&_y!==void 0?_y:[],s=-1,u=[],m&&xe.push(m),m=l}}while(r!==void 0);return u.length!==0&&(Ne=u[u.length-1][1]),Ne}function getVisitFn(e,t,n){var r=e[t];if(r){if(!n&&typeof r=="function")return r;var o=n?r.leave:r.enter;if(typeof o=="function")return o}else{var a=n?e.leave:e.enter;if(a){if(typeof a=="function")return a;var s=a[t];if(typeof s=="function")return s}}}function print(e){return visit(e,{leave:printDocASTReducer})}var MAX_LINE_LENGTH=80,printDocASTReducer={Name:function(e){return e.value},Variable:function(e){return"$"+e.name},Document:function(e){return join(e.definitions,`

`)+`
`},OperationDefinition:function(e){var t=e.operation,n=e.name,r=wrap$1("(",join(e.variableDefinitions,", "),")"),o=join(e.directives," "),a=e.selectionSet;return!n&&!o&&!r&&t==="query"?a:join([t,join([n,r]),o,a]," ")},VariableDefinition:function(e){var t=e.variable,n=e.type,r=e.defaultValue,o=e.directives;return t+": "+n+wrap$1(" = ",r)+wrap$1(" ",join(o," "))},SelectionSet:function(e){var t=e.selections;return block(t)},Field:function(e){var t=e.alias,n=e.name,r=e.arguments,o=e.directives,a=e.selectionSet,s=wrap$1("",t,": ")+n,u=s+wrap$1("(",join(r,", "),")");return u.length>MAX_LINE_LENGTH&&(u=s+wrap$1(`(
`,indent(join(r,`
`)),`
)`)),join([u,join(o," "),a]," ")},Argument:function(e){var t=e.name,n=e.value;return t+": "+n},FragmentSpread:function(e){var t=e.name,n=e.directives;return"..."+t+wrap$1(" ",join(n," "))},InlineFragment:function(e){var t=e.typeCondition,n=e.directives,r=e.selectionSet;return join(["...",wrap$1("on ",t),join(n," "),r]," ")},FragmentDefinition:function(e){var t=e.name,n=e.typeCondition,r=e.variableDefinitions,o=e.directives,a=e.selectionSet;return"fragment ".concat(t).concat(wrap$1("(",join(r,", "),")")," ")+"on ".concat(n," ").concat(wrap$1("",join(o," ")," "))+a},IntValue:function(e){var t=e.value;return t},FloatValue:function(e){var t=e.value;return t},StringValue:function(e,t){var n=e.value,r=e.block;return r?printBlockString(n,t==="description"?"":"  "):JSON.stringify(n)},BooleanValue:function(e){var t=e.value;return t?"true":"false"},NullValue:function(){return"null"},EnumValue:function(e){var t=e.value;return t},ListValue:function(e){var t=e.values;return"["+join(t,", ")+"]"},ObjectValue:function(e){var t=e.fields;return"{"+join(t,", ")+"}"},ObjectField:function(e){var t=e.name,n=e.value;return t+": "+n},Directive:function(e){var t=e.name,n=e.arguments;return"@"+t+wrap$1("(",join(n,", "),")")},NamedType:function(e){var t=e.name;return t},ListType:function(e){var t=e.type;return"["+t+"]"},NonNullType:function(e){var t=e.type;return t+"!"},SchemaDefinition:addDescription(function(e){var t=e.directives,n=e.operationTypes;return join(["schema",join(t," "),block(n)]," ")}),OperationTypeDefinition:function(e){var t=e.operation,n=e.type;return t+": "+n},ScalarTypeDefinition:addDescription(function(e){var t=e.name,n=e.directives;return join(["scalar",t,join(n," ")]," ")}),ObjectTypeDefinition:addDescription(function(e){var t=e.name,n=e.interfaces,r=e.directives,o=e.fields;return join(["type",t,wrap$1("implements ",join(n," & ")),join(r," "),block(o)]," ")}),FieldDefinition:addDescription(function(e){var t=e.name,n=e.arguments,r=e.type,o=e.directives;return t+(hasMultilineItems(n)?wrap$1(`(
`,indent(join(n,`
`)),`
)`):wrap$1("(",join(n,", "),")"))+": "+r+wrap$1(" ",join(o," "))}),InputValueDefinition:addDescription(function(e){var t=e.name,n=e.type,r=e.defaultValue,o=e.directives;return join([t+": "+n,wrap$1("= ",r),join(o," ")]," ")}),InterfaceTypeDefinition:addDescription(function(e){var t=e.name,n=e.interfaces,r=e.directives,o=e.fields;return join(["interface",t,wrap$1("implements ",join(n," & ")),join(r," "),block(o)]," ")}),UnionTypeDefinition:addDescription(function(e){var t=e.name,n=e.directives,r=e.types;return join(["union",t,join(n," "),r&&r.length!==0?"= "+join(r," | "):""]," ")}),EnumTypeDefinition:addDescription(function(e){var t=e.name,n=e.directives,r=e.values;return join(["enum",t,join(n," "),block(r)]," ")}),EnumValueDefinition:addDescription(function(e){var t=e.name,n=e.directives;return join([t,join(n," ")]," ")}),InputObjectTypeDefinition:addDescription(function(e){var t=e.name,n=e.directives,r=e.fields;return join(["input",t,join(n," "),block(r)]," ")}),DirectiveDefinition:addDescription(function(e){var t=e.name,n=e.arguments,r=e.repeatable,o=e.locations;return"directive @"+t+(hasMultilineItems(n)?wrap$1(`(
`,indent(join(n,`
`)),`
)`):wrap$1("(",join(n,", "),")"))+(r?" repeatable":"")+" on "+join(o," | ")}),SchemaExtension:function(e){var t=e.directives,n=e.operationTypes;return join(["extend schema",join(t," "),block(n)]," ")},ScalarTypeExtension:function(e){var t=e.name,n=e.directives;return join(["extend scalar",t,join(n," ")]," ")},ObjectTypeExtension:function(e){var t=e.name,n=e.interfaces,r=e.directives,o=e.fields;return join(["extend type",t,wrap$1("implements ",join(n," & ")),join(r," "),block(o)]," ")},InterfaceTypeExtension:function(e){var t=e.name,n=e.interfaces,r=e.directives,o=e.fields;return join(["extend interface",t,wrap$1("implements ",join(n," & ")),join(r," "),block(o)]," ")},UnionTypeExtension:function(e){var t=e.name,n=e.directives,r=e.types;return join(["extend union",t,join(n," "),r&&r.length!==0?"= "+join(r," | "):""]," ")},EnumTypeExtension:function(e){var t=e.name,n=e.directives,r=e.values;return join(["extend enum",t,join(n," "),block(r)]," ")},InputObjectTypeExtension:function(e){var t=e.name,n=e.directives,r=e.fields;return join(["extend input",t,join(n," "),block(r)]," ")}};function addDescription(e){return function(t){return join([t.description,e(t)],`
`)}}function join(e){var t,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return(t=e==null?void 0:e.filter(function(r){return r}).join(n))!==null&&t!==void 0?t:""}function block(e){return wrap$1(`{
`,indent(join(e,`
`)),`
}`)}function wrap$1(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";return t!=null&&t!==""?e+t+n:""}function indent(e){return wrap$1("  ",e.replace(/\n/g,`
  `))}function isMultiline(e){return e.indexOf(`
`)!==-1}function hasMultilineItems(e){return e!=null&&e.some(isMultiline)}function removeTemporaryGlobals(){return remove()}function checkDEV(){__DEV__?invariant$1(typeof DEV=="boolean",DEV):invariant$1(typeof DEV=="boolean",36)}removeTemporaryGlobals(),checkDEV();var extendStatics=function(e,t){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},extendStatics(e,t)};function __extends(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");extendStatics(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var __assign$1=function(){return __assign$1=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},__assign$1.apply(this,arguments)};function __rest(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n}function __awaiter(e,t,n,r){function o(a){return a instanceof n?a:new n(function(s){s(a)})}return new(n||(n=Promise))(function(a,s){function u(m){try{c(r.next(m))}catch(me){s(me)}}function l(m){try{c(r.throw(m))}catch(me){s(me)}}function c(m){m.done?a(m.value):o(m.value).then(u,l)}c((r=r.apply(e,t||[])).next())})}function __generator(e,t){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,o,a,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(c){return function(m){return l([c,m])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,o&&(a=c[0]&2?o.return:c[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,c[1])).done)return a;switch(o=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,o=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){n.label=c[1];break}if(c[0]===6&&n.label<a[1]){n.label=a[1],a=c;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(c);break}a[2]&&n.ops.pop(),n.trys.pop();continue}c=t.call(e,n)}catch(m){c=[6,m],o=0}finally{r=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function __spreadArray(e,t,n){if(n||arguments.length===2)for(var r=0,o=t.length,a;r<o;r++)(a||!(r in t))&&(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))}function shouldInclude(e,t){var n=e.directives;return!n||!n.length?!0:getInclusionDirectives(n).every(function(r){var o=r.directive,a=r.ifArgument,s=!1;return a.value.kind==="Variable"?(s=t&&t[a.value.name.value],__DEV__?invariant$1(s!==void 0,"Invalid variable referenced in @".concat(o.name.value," directive.")):invariant$1(s!==void 0,37)):s=a.value.value,o.name.value==="skip"?!s:s})}function getDirectiveNames(e){var t=[];return visit(e,{Directive:function(n){t.push(n.name.value)}}),t}function hasDirectives(e,t){return getDirectiveNames(t).some(function(n){return e.indexOf(n)>-1})}function hasClientExports(e){return e&&hasDirectives(["client"],e)&&hasDirectives(["export"],e)}function isInclusionDirective(e){var t=e.name.value;return t==="skip"||t==="include"}function getInclusionDirectives(e){var t=[];return e&&e.length&&e.forEach(function(n){if(isInclusionDirective(n)){var r=n.arguments,o=n.name.value;__DEV__?invariant$1(r&&r.length===1,"Incorrect number of arguments for the @".concat(o," directive.")):invariant$1(r&&r.length===1,38);var a=r[0];__DEV__?invariant$1(a.name&&a.name.value==="if","Invalid argument for the @".concat(o," directive.")):invariant$1(a.name&&a.name.value==="if",39);var s=a.value;__DEV__?invariant$1(s&&(s.kind==="Variable"||s.kind==="BooleanValue"),"Argument for the @".concat(o," directive must be a variable or a boolean value.")):invariant$1(s&&(s.kind==="Variable"||s.kind==="BooleanValue"),40),t.push({directive:n,ifArgument:a})}}),t}function getFragmentQueryDocument(e,t){var n=t,r=[];e.definitions.forEach(function(a){if(a.kind==="OperationDefinition")throw __DEV__?new InvariantError("Found a ".concat(a.operation," operation").concat(a.name?" named '".concat(a.name.value,"'"):"",". ")+"No operations are allowed when using a fragment as a query. Only fragments are allowed."):new InvariantError(41);a.kind==="FragmentDefinition"&&r.push(a)}),typeof n=="undefined"&&(__DEV__?invariant$1(r.length===1,"Found ".concat(r.length," fragments. `fragmentName` must be provided when there is not exactly 1 fragment.")):invariant$1(r.length===1,42),n=r[0].name.value);var o=__assign$1(__assign$1({},e),{definitions:__spreadArray([{kind:"OperationDefinition",operation:"query",selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:n}}]}}],e.definitions,!0)});return o}function createFragmentMap(e){e===void 0&&(e=[]);var t={};return e.forEach(function(n){t[n.name.value]=n}),t}function getFragmentFromSelection(e,t){switch(e.kind){case"InlineFragment":return e;case"FragmentSpread":{var n=t&&t[e.name.value];return __DEV__?invariant$1(n,"No fragment named ".concat(e.name.value,".")):invariant$1(n,43),n}default:return null}}function isNonNullObject(e){return e!==null&&typeof e=="object"}function makeReference(e){return{__ref:String(e)}}function isReference(e){return Boolean(e&&typeof e=="object"&&typeof e.__ref=="string")}function isDocumentNode(e){return isNonNullObject(e)&&e.kind==="Document"&&Array.isArray(e.definitions)}function isStringValue(e){return e.kind==="StringValue"}function isBooleanValue(e){return e.kind==="BooleanValue"}function isIntValue(e){return e.kind==="IntValue"}function isFloatValue(e){return e.kind==="FloatValue"}function isVariable(e){return e.kind==="Variable"}function isObjectValue(e){return e.kind==="ObjectValue"}function isListValue(e){return e.kind==="ListValue"}function isEnumValue(e){return e.kind==="EnumValue"}function isNullValue(e){return e.kind==="NullValue"}function valueToObjectRepresentation(e,t,n,r){if(isIntValue(n)||isFloatValue(n))e[t.value]=Number(n.value);else if(isBooleanValue(n)||isStringValue(n))e[t.value]=n.value;else if(isObjectValue(n)){var o={};n.fields.map(function(s){return valueToObjectRepresentation(o,s.name,s.value,r)}),e[t.value]=o}else if(isVariable(n)){var a=(r||{})[n.name.value];e[t.value]=a}else if(isListValue(n))e[t.value]=n.values.map(function(s){var u={};return valueToObjectRepresentation(u,t,s,r),u[t.value]});else if(isEnumValue(n))e[t.value]=n.value;else if(isNullValue(n))e[t.value]=null;else throw __DEV__?new InvariantError('The inline argument "'.concat(t.value,'" of kind "').concat(n.kind,'"')+"is not supported. Use variables instead of inline arguments to overcome this limitation."):new InvariantError(52)}function storeKeyNameFromField(e,t){var n=null;e.directives&&(n={},e.directives.forEach(function(o){n[o.name.value]={},o.arguments&&o.arguments.forEach(function(a){var s=a.name,u=a.value;return valueToObjectRepresentation(n[o.name.value],s,u,t)})}));var r=null;return e.arguments&&e.arguments.length&&(r={},e.arguments.forEach(function(o){var a=o.name,s=o.value;return valueToObjectRepresentation(r,a,s,t)})),getStoreKeyName(e.name.value,r,n)}var KNOWN_DIRECTIVES=["connection","include","skip","client","rest","export"],getStoreKeyName=Object.assign(function(e,t,n){if(t&&n&&n.connection&&n.connection.key)if(n.connection.filter&&n.connection.filter.length>0){var r=n.connection.filter?n.connection.filter:[];r.sort();var o={};return r.forEach(function(u){o[u]=t[u]}),"".concat(n.connection.key,"(").concat(stringify(o),")")}else return n.connection.key;var a=e;if(t){var s=stringify(t);a+="(".concat(s,")")}return n&&Object.keys(n).forEach(function(u){KNOWN_DIRECTIVES.indexOf(u)===-1&&(n[u]&&Object.keys(n[u]).length?a+="@".concat(u,"(").concat(stringify(n[u]),")"):a+="@".concat(u))}),a},{setStringify:function(e){var t=stringify;return stringify=e,t}}),stringify=function(e){return JSON.stringify(e,stringifyReplacer)};function stringifyReplacer(e,t){return isNonNullObject(t)&&!Array.isArray(t)&&(t=Object.keys(t).sort().reduce(function(n,r){return n[r]=t[r],n},{})),t}function argumentsObjectFromField(e,t){if(e.arguments&&e.arguments.length){var n={};return e.arguments.forEach(function(r){var o=r.name,a=r.value;return valueToObjectRepresentation(n,o,a,t)}),n}return null}function resultKeyNameFromField(e){return e.alias?e.alias.value:e.name.value}function getTypenameFromResult(e,t,n){if(typeof e.__typename=="string")return e.__typename;for(var r=0,o=t.selections;r<o.length;r++){var a=o[r];if(isField(a)){if(a.name.value==="__typename")return e[resultKeyNameFromField(a)]}else{var s=getTypenameFromResult(e,getFragmentFromSelection(a,n).selectionSet,n);if(typeof s=="string")return s}}}function isField(e){return e.kind==="Field"}function isInlineFragment(e){return e.kind==="InlineFragment"}function checkDocument(e){__DEV__?invariant$1(e&&e.kind==="Document",'Expecting a parsed GraphQL document. Perhaps you need to wrap the query string in a "gql" tag? http://docs.apollostack.com/apollo-client/core.html#gql'):invariant$1(e&&e.kind==="Document",44);var t=e.definitions.filter(function(n){return n.kind!=="FragmentDefinition"}).map(function(n){if(n.kind!=="OperationDefinition")throw __DEV__?new InvariantError('Schema type definitions not allowed in queries. Found: "'.concat(n.kind,'"')):new InvariantError(45);return n});return __DEV__?invariant$1(t.length<=1,"Ambiguous GraphQL document: contains ".concat(t.length," operations")):invariant$1(t.length<=1,46),e}function getOperationDefinition(e){return checkDocument(e),e.definitions.filter(function(t){return t.kind==="OperationDefinition"})[0]}function getOperationName(e){return e.definitions.filter(function(t){return t.kind==="OperationDefinition"&&t.name}).map(function(t){return t.name.value})[0]||null}function getFragmentDefinitions(e){return e.definitions.filter(function(t){return t.kind==="FragmentDefinition"})}function getQueryDefinition(e){var t=getOperationDefinition(e);return __DEV__?invariant$1(t&&t.operation==="query","Must contain a query definition."):invariant$1(t&&t.operation==="query",47),t}function getFragmentDefinition(e){__DEV__?invariant$1(e.kind==="Document",'Expecting a parsed GraphQL document. Perhaps you need to wrap the query string in a "gql" tag? http://docs.apollostack.com/apollo-client/core.html#gql'):invariant$1(e.kind==="Document",48),__DEV__?invariant$1(e.definitions.length<=1,"Fragment must have exactly one definition."):invariant$1(e.definitions.length<=1,49);var t=e.definitions[0];return __DEV__?invariant$1(t.kind==="FragmentDefinition","Must be a fragment definition."):invariant$1(t.kind==="FragmentDefinition",50),t}function getMainDefinition(e){checkDocument(e);for(var t,n=0,r=e.definitions;n<r.length;n++){var o=r[n];if(o.kind==="OperationDefinition"){var a=o.operation;if(a==="query"||a==="mutation"||a==="subscription")return o}o.kind==="FragmentDefinition"&&!t&&(t=o)}if(t)return t;throw __DEV__?new InvariantError("Expected a parsed GraphQL query with a query, mutation, subscription, or a fragment."):new InvariantError(51)}function getDefaultValues(e){var t=Object.create(null),n=e&&e.variableDefinitions;return n&&n.length&&n.forEach(function(r){r.defaultValue&&valueToObjectRepresentation(t,r.variable.name,r.defaultValue)}),t}function filterInPlace(e,t,n){var r=0;return e.forEach(function(o,a){t.call(this,o,a,e)&&(e[r++]=o)},n),e.length=r,e}var TYPENAME_FIELD={kind:"Field",name:{kind:"Name",value:"__typename"}};function isEmpty(e,t){return e.selectionSet.selections.every(function(n){return n.kind==="FragmentSpread"&&isEmpty(t[n.name.value],t)})}function nullIfDocIsEmpty(e){return isEmpty(getOperationDefinition(e)||getFragmentDefinition(e),createFragmentMap(getFragmentDefinitions(e)))?null:e}function getDirectiveMatcher(e){return function(t){return e.some(function(n){return n.name&&n.name===t.name.value||n.test&&n.test(t)})}}function removeDirectivesFromDocument(e,t){var n=Object.create(null),r=[],o=Object.create(null),a=[],s=nullIfDocIsEmpty(visit(t,{Variable:{enter:function(u,l,c){c.kind!=="VariableDefinition"&&(n[u.name.value]=!0)}},Field:{enter:function(u){if(e&&u.directives){var l=e.some(function(c){return c.remove});if(l&&u.directives&&u.directives.some(getDirectiveMatcher(e)))return u.arguments&&u.arguments.forEach(function(c){c.value.kind==="Variable"&&r.push({name:c.value.name.value})}),u.selectionSet&&getAllFragmentSpreadsFromSelectionSet(u.selectionSet).forEach(function(c){a.push({name:c.name.value})}),null}}},FragmentSpread:{enter:function(u){o[u.name.value]=!0}},Directive:{enter:function(u){if(getDirectiveMatcher(e)(u))return null}}}));return s&&filterInPlace(r,function(u){return!!u.name&&!n[u.name]}).length&&(s=removeArgumentsFromDocument(r,s)),s&&filterInPlace(a,function(u){return!!u.name&&!o[u.name]}).length&&(s=removeFragmentSpreadFromDocument(a,s)),s}var addTypenameToDocument=Object.assign(function(e){return visit(e,{SelectionSet:{enter:function(t,n,r){if(!(r&&r.kind==="OperationDefinition")){var o=t.selections;if(o){var a=o.some(function(u){return isField(u)&&(u.name.value==="__typename"||u.name.value.lastIndexOf("__",0)===0)});if(!a){var s=r;if(!(isField(s)&&s.directives&&s.directives.some(function(u){return u.name.value==="export"})))return __assign$1(__assign$1({},t),{selections:__spreadArray(__spreadArray([],o,!0),[TYPENAME_FIELD],!1)})}}}}}})},{added:function(e){return e===TYPENAME_FIELD}}),connectionRemoveConfig={test:function(e){var t=e.name.value==="connection";return t&&(!e.arguments||!e.arguments.some(function(n){return n.name.value==="key"}))&&__DEV__&&invariant$1.warn("Removing an @connection directive even though it does not have a key. You may want to use the key parameter to specify a store key."),t}};function removeConnectionDirectiveFromDocument(e){return removeDirectivesFromDocument([connectionRemoveConfig],checkDocument(e))}function getArgumentMatcher(e){return function(t){return e.some(function(n){return t.value&&t.value.kind==="Variable"&&t.value.name&&(n.name===t.value.name.value||n.test&&n.test(t))})}}function removeArgumentsFromDocument(e,t){var n=getArgumentMatcher(e);return nullIfDocIsEmpty(visit(t,{OperationDefinition:{enter:function(r){return __assign$1(__assign$1({},r),{variableDefinitions:r.variableDefinitions?r.variableDefinitions.filter(function(o){return!e.some(function(a){return a.name===o.variable.name.value})}):[]})}},Field:{enter:function(r){var o=e.some(function(s){return s.remove});if(o){var a=0;if(r.arguments&&r.arguments.forEach(function(s){n(s)&&(a+=1)}),a===1)return null}}},Argument:{enter:function(r){if(n(r))return null}}}))}function removeFragmentSpreadFromDocument(e,t){function n(r){if(e.some(function(o){return o.name===r.name.value}))return null}return nullIfDocIsEmpty(visit(t,{FragmentSpread:{enter:n},FragmentDefinition:{enter:n}}))}function getAllFragmentSpreadsFromSelectionSet(e){var t=[];return e.selections.forEach(function(n){(isField(n)||isInlineFragment(n))&&n.selectionSet?getAllFragmentSpreadsFromSelectionSet(n.selectionSet).forEach(function(r){return t.push(r)}):n.kind==="FragmentSpread"&&t.push(n)}),t}function buildQueryFromSelectionSet(e){var t=getMainDefinition(e),n=t.operation;if(n==="query")return e;var r=visit(e,{OperationDefinition:{enter:function(o){return __assign$1(__assign$1({},o),{operation:"query"})}}});return r}function removeClientSetsFromDocument(e){checkDocument(e);var t=removeDirectivesFromDocument([{test:function(n){return n.name.value==="client"},remove:!0}],e);return t&&(t=visit(t,{FragmentDefinition:{enter:function(n){if(n.selectionSet){var r=n.selectionSet.selections.every(function(o){return isField(o)&&o.name.value==="__typename"});if(r)return null}}}})),t}var hasOwnProperty$5=Object.prototype.hasOwnProperty;function mergeDeep(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return mergeDeepArray(e)}function mergeDeepArray(e){var t=e[0]||{},n=e.length;if(n>1)for(var r=new DeepMerger,o=1;o<n;++o)t=r.merge(t,e[o]);return t}var defaultReconciler=function(e,t,n){return this.merge(e[n],t[n])},DeepMerger=function(){function e(t){t===void 0&&(t=defaultReconciler),this.reconciler=t,this.isObject=isNonNullObject,this.pastCopies=new Set}return e.prototype.merge=function(t,n){for(var r=this,o=[],a=2;a<arguments.length;a++)o[a-2]=arguments[a];return isNonNullObject(n)&&isNonNullObject(t)?(Object.keys(n).forEach(function(s){if(hasOwnProperty$5.call(t,s)){var u=t[s];if(n[s]!==u){var l=r.reconciler.apply(r,__spreadArray([t,n,s],o,!1));l!==u&&(t=r.shallowCopyForMerge(t),t[s]=l)}}else t=r.shallowCopyForMerge(t),t[s]=n[s]}),t):n},e.prototype.shallowCopyForMerge=function(t){return isNonNullObject(t)&&(this.pastCopies.has(t)||(Array.isArray(t)?t=t.slice(0):t=__assign$1({__proto__:Object.getPrototypeOf(t)},t),this.pastCopies.add(t))),t},e}();function _createForOfIteratorHelperLoose(e,t){var n=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=_unsupportedIterableToArray(e))||t&&e&&typeof e.length=="number"){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray(e,t){if(e){if(typeof e=="string")return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(e,t)}}function _arrayLikeToArray(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var hasSymbols=function(){return typeof Symbol=="function"},hasSymbol=function(e){return hasSymbols()&&Boolean(Symbol[e])},getSymbol=function(e){return hasSymbol(e)?Symbol[e]:"@@"+e};hasSymbols()&&!hasSymbol("observable")&&(Symbol.observable=Symbol("observable"));var SymbolIterator=getSymbol("iterator"),SymbolObservable=getSymbol("observable"),SymbolSpecies=getSymbol("species");function getMethod(e,t){var n=e[t];if(n!=null){if(typeof n!="function")throw new TypeError(n+" is not a function");return n}}function getSpecies(e){var t=e.constructor;return t!==void 0&&(t=t[SymbolSpecies],t===null&&(t=void 0)),t!==void 0?t:Observable}function isObservable(e){return e instanceof Observable}function hostReportError(e){hostReportError.log?hostReportError.log(e):setTimeout(function(){throw e})}function enqueue(e){Promise.resolve().then(function(){try{e()}catch(t){hostReportError(t)}})}function cleanupSubscription(e){var t=e._cleanup;if(t!==void 0&&(e._cleanup=void 0,!!t))try{if(typeof t=="function")t();else{var n=getMethod(t,"unsubscribe");n&&n.call(t)}}catch(r){hostReportError(r)}}function closeSubscription(e){e._observer=void 0,e._queue=void 0,e._state="closed"}function flushSubscription(e){var t=e._queue;if(t){e._queue=void 0,e._state="ready";for(var n=0;n<t.length&&(notifySubscription(e,t[n].type,t[n].value),e._state!=="closed");++n);}}function notifySubscription(e,t,n){e._state="running";var r=e._observer;try{var o=getMethod(r,t);switch(t){case"next":o&&o.call(r,n);break;case"error":if(closeSubscription(e),o)o.call(r,n);else throw n;break;case"complete":closeSubscription(e),o&&o.call(r);break}}catch(a){hostReportError(a)}e._state==="closed"?cleanupSubscription(e):e._state==="running"&&(e._state="ready")}function onNotify(e,t,n){if(e._state!=="closed"){if(e._state==="buffering"){e._queue.push({type:t,value:n});return}if(e._state!=="ready"){e._state="buffering",e._queue=[{type:t,value:n}],enqueue(function(){return flushSubscription(e)});return}notifySubscription(e,t,n)}}var Subscription=function(){function e(n,r){this._cleanup=void 0,this._observer=n,this._queue=void 0,this._state="initializing";var o=new SubscriptionObserver(this);try{this._cleanup=r.call(void 0,o)}catch(a){o.error(a)}this._state==="initializing"&&(this._state="ready")}var t=e.prototype;return t.unsubscribe=function(){this._state!=="closed"&&(closeSubscription(this),cleanupSubscription(this))},_createClass(e,[{key:"closed",get:function(){return this._state==="closed"}}]),e}(),SubscriptionObserver=function(){function e(n){this._subscription=n}var t=e.prototype;return t.next=function(n){onNotify(this._subscription,"next",n)},t.error=function(n){onNotify(this._subscription,"error",n)},t.complete=function(){onNotify(this._subscription,"complete")},_createClass(e,[{key:"closed",get:function(){return this._subscription._state==="closed"}}]),e}(),Observable=function(){function e(n){if(!(this instanceof e))throw new TypeError("Observable cannot be called as a function");if(typeof n!="function")throw new TypeError("Observable initializer must be a function");this._subscriber=n}var t=e.prototype;return t.subscribe=function(n){return(typeof n!="object"||n===null)&&(n={next:n,error:arguments[1],complete:arguments[2]}),new Subscription(n,this._subscriber)},t.forEach=function(n){var r=this;return new Promise(function(o,a){if(typeof n!="function"){a(new TypeError(n+" is not a function"));return}function s(){u.unsubscribe(),o()}var u=r.subscribe({next:function(l){try{n(l,s)}catch(c){a(c),u.unsubscribe()}},error:a,complete:o})})},t.map=function(n){var r=this;if(typeof n!="function")throw new TypeError(n+" is not a function");var o=getSpecies(this);return new o(function(a){return r.subscribe({next:function(s){try{s=n(s)}catch(u){return a.error(u)}a.next(s)},error:function(s){a.error(s)},complete:function(){a.complete()}})})},t.filter=function(n){var r=this;if(typeof n!="function")throw new TypeError(n+" is not a function");var o=getSpecies(this);return new o(function(a){return r.subscribe({next:function(s){try{if(!n(s))return}catch(u){return a.error(u)}a.next(s)},error:function(s){a.error(s)},complete:function(){a.complete()}})})},t.reduce=function(n){var r=this;if(typeof n!="function")throw new TypeError(n+" is not a function");var o=getSpecies(this),a=arguments.length>1,s=!1,u=arguments[1],l=u;return new o(function(c){return r.subscribe({next:function(m){var me=!s;if(s=!0,!me||a)try{l=n(l,m)}catch(xe){return c.error(xe)}else l=m},error:function(m){c.error(m)},complete:function(){if(!s&&!a)return c.error(new TypeError("Cannot reduce an empty sequence"));c.next(l),c.complete()}})})},t.concat=function(){for(var n=this,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];var s=getSpecies(this);return new s(function(u){var l,c=0;function m(me){l=me.subscribe({next:function(xe){u.next(xe)},error:function(xe){u.error(xe)},complete:function(){c===o.length?(l=void 0,u.complete()):m(s.from(o[c++]))}})}return m(n),function(){l&&(l.unsubscribe(),l=void 0)}})},t.flatMap=function(n){var r=this;if(typeof n!="function")throw new TypeError(n+" is not a function");var o=getSpecies(this);return new o(function(a){var s=[],u=r.subscribe({next:function(c){if(n)try{c=n(c)}catch(me){return a.error(me)}var m=o.from(c).subscribe({next:function(me){a.next(me)},error:function(me){a.error(me)},complete:function(){var me=s.indexOf(m);me>=0&&s.splice(me,1),l()}});s.push(m)},error:function(c){a.error(c)},complete:function(){l()}});function l(){u.closed&&s.length===0&&a.complete()}return function(){s.forEach(function(c){return c.unsubscribe()}),u.unsubscribe()}})},t[SymbolObservable]=function(){return this},e.from=function(n){var r=typeof this=="function"?this:e;if(n==null)throw new TypeError(n+" is not an object");var o=getMethod(n,SymbolObservable);if(o){var a=o.call(n);if(Object(a)!==a)throw new TypeError(a+" is not an object");return isObservable(a)&&a.constructor===r?a:new r(function(s){return a.subscribe(s)})}if(hasSymbol("iterator")&&(o=getMethod(n,SymbolIterator),o))return new r(function(s){enqueue(function(){if(!s.closed){for(var u=_createForOfIteratorHelperLoose(o.call(n)),l;!(l=u()).done;){var c=l.value;if(s.next(c),s.closed)return}s.complete()}})});if(Array.isArray(n))return new r(function(s){enqueue(function(){if(!s.closed){for(var u=0;u<n.length;++u)if(s.next(n[u]),s.closed)return;s.complete()}})});throw new TypeError(n+" is not observable")},e.of=function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];var a=typeof this=="function"?this:e;return new a(function(s){enqueue(function(){if(!s.closed){for(var u=0;u<r.length;++u)if(s.next(r[u]),s.closed)return;s.complete()}})})},_createClass(e,null,[{key:SymbolSpecies,get:function(){return this}}]),e}();hasSymbols()&&Object.defineProperty(Observable,Symbol("extensions"),{value:{symbol:SymbolObservable,hostReportError},configurable:!0});var toString$1=Object.prototype.toString;function cloneDeep(e){return cloneDeepHelper(e)}function cloneDeepHelper(e,t){switch(toString$1.call(e)){case"[object Array]":{if(t=t||new Map,t.has(e))return t.get(e);var n=e.slice(0);return t.set(e,n),n.forEach(function(o,a){n[a]=cloneDeepHelper(o,t)}),n}case"[object Object]":{if(t=t||new Map,t.has(e))return t.get(e);var r=Object.create(Object.getPrototypeOf(e));return t.set(e,r),Object.keys(e).forEach(function(o){r[o]=cloneDeepHelper(e[o],t)}),r}default:return e}}function deepFreeze(e){var t=new Set([e]);return t.forEach(function(n){isNonNullObject(n)&&shallowFreeze(n)===n&&Object.getOwnPropertyNames(n).forEach(function(r){isNonNullObject(n[r])&&t.add(n[r])})}),e}function shallowFreeze(e){if(__DEV__&&!Object.isFrozen(e))try{Object.freeze(e)}catch(t){if(t instanceof TypeError)return null;throw t}return e}function maybeDeepFreeze(e){return __DEV__&&deepFreeze(e),e}function iterateObserversSafely(e,t,n){var r=[];e.forEach(function(o){return o[t]&&r.push(o)}),r.forEach(function(o){return o[t](n)})}function asyncMap(e,t,n){return new Observable(function(r){var o=r.next,a=r.error,s=r.complete,u=0,l=!1,c={then:function(Ne){return new Promise(function(He){return He(Ne())})}};function m(Ne,He){return Ne?function(Ye){++u;var Je=function(){return Ne(Ye)};c=c.then(Je,Je).then(function(vn){--u,o&&o.call(r,vn),l&&me.complete()},function(vn){throw--u,vn}).catch(function(vn){a&&a.call(r,vn)})}:function(Ye){return He&&He.call(r,Ye)}}var me={next:m(t,o),error:m(n,a),complete:function(){l=!0,u||s&&s.call(r)}},xe=e.subscribe(me);return function(){return xe.unsubscribe()}})}var canUseWeakMap=typeof WeakMap=="function"&&maybe$1(function(){return navigator.product})!=="ReactNative",canUseWeakSet=typeof WeakSet=="function",canUseSymbol=typeof Symbol=="function"&&typeof Symbol.for=="function";maybe$1(function(){return window.document.createElement}),maybe$1(function(){return navigator.userAgent.indexOf("jsdom")>=0});function fixObservableSubclass(e){function t(n){Object.defineProperty(e,n,{value:Observable})}return canUseSymbol&&Symbol.species&&t(Symbol.species),t("@@species"),e}function isPromiseLike(e){return e&&typeof e.then=="function"}var Concast=function(e){__extends(t,e);function t(n){var r=e.call(this,function(o){return r.addObserver(o),function(){return r.removeObserver(o)}})||this;return r.observers=new Set,r.addCount=0,r.promise=new Promise(function(o,a){r.resolve=o,r.reject=a}),r.handlers={next:function(o){r.sub!==null&&(r.latest=["next",o],iterateObserversSafely(r.observers,"next",o))},error:function(o){var a=r.sub;a!==null&&(a&&setTimeout(function(){return a.unsubscribe()}),r.sub=null,r.latest=["error",o],r.reject(o),iterateObserversSafely(r.observers,"error",o))},complete:function(){var o=r.sub;if(o!==null){var a=r.sources.shift();a?isPromiseLike(a)?a.then(function(s){return r.sub=s.subscribe(r.handlers)}):r.sub=a.subscribe(r.handlers):(o&&setTimeout(function(){return o.unsubscribe()}),r.sub=null,r.latest&&r.latest[0]==="next"?r.resolve(r.latest[1]):r.resolve(),iterateObserversSafely(r.observers,"complete"))}}},r.cancel=function(o){r.reject(o),r.sources=[],r.handlers.complete()},r.promise.catch(function(o){}),typeof n=="function"&&(n=[new Observable(n)]),isPromiseLike(n)?n.then(function(o){return r.start(o)},r.handlers.error):r.start(n),r}return t.prototype.start=function(n){this.sub===void 0&&(this.sources=Array.from(n),this.handlers.complete())},t.prototype.deliverLastMessage=function(n){if(this.latest){var r=this.latest[0],o=n[r];o&&o.call(n,this.latest[1]),this.sub===null&&r==="next"&&n.complete&&n.complete()}},t.prototype.addObserver=function(n){this.observers.has(n)||(this.deliverLastMessage(n),this.observers.add(n),++this.addCount)},t.prototype.removeObserver=function(n,r){this.observers.delete(n)&&--this.addCount<1&&!r&&this.handlers.complete()},t.prototype.cleanup=function(n){var r=this,o=!1,a=function(){o||(o=!0,r.observers.delete(s),n())},s={next:a,error:a,complete:a},u=this.addCount;this.addObserver(s),this.addCount=u},t}(Observable);fixObservableSubclass(Concast);function isNonEmptyArray(e){return Array.isArray(e)&&e.length>0}function graphQLResultHasError(e){return e.errors&&e.errors.length>0||!1}function compact(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Object.create(null);return e.forEach(function(r){!r||Object.keys(r).forEach(function(o){var a=r[o];a!==void 0&&(n[o]=a)})}),n}var prefixCounts=new Map;function makeUniqueId(e){var t=prefixCounts.get(e)||1;return prefixCounts.set(e,t+1),"".concat(e,":").concat(t,":").concat(Math.random().toString(36).slice(2))}function stringifyForDisplay(e){var t=makeUniqueId("stringifyForDisplay");return JSON.stringify(e,function(n,r){return r===void 0?t:r}).split(JSON.stringify(t)).join("<undefined>")}function mergeOptions(e,t){return compact(e,t,t.variables&&{variables:__assign$1(__assign$1({},e&&e.variables),t.variables)})}function fromError(e){return new Observable(function(t){t.error(e)})}function toPromise(e){var t=!1;return new Promise(function(n,r){e.subscribe({next:function(o){t?__DEV__&&invariant$1.warn("Promise Wrapper does not support multiple results from Observable"):(t=!0,n(o))},error:r})})}function fromPromise(e){return new Observable(function(t){e.then(function(n){t.next(n),t.complete()}).catch(t.error.bind(t))})}var throwServerError=function(e,t,n){var r=new Error(n);throw r.name="ServerError",r.response=e,r.statusCode=e.status,r.result=t,r};function validateOperation(e){for(var t=["query","operationName","variables","extensions","context"],n=0,r=Object.keys(e);n<r.length;n++){var o=r[n];if(t.indexOf(o)<0)throw __DEV__?new InvariantError("illegal argument: ".concat(o)):new InvariantError(24)}return e}function createOperation(e,t){var n=__assign$1({},e),r=function(a){typeof a=="function"?n=__assign$1(__assign$1({},n),a(n)):n=__assign$1(__assign$1({},n),a)},o=function(){return __assign$1({},n)};return Object.defineProperty(t,"setContext",{enumerable:!1,value:r}),Object.defineProperty(t,"getContext",{enumerable:!1,value:o}),t}function transformOperation(e){var t={variables:e.variables||{},extensions:e.extensions||{},operationName:e.operationName,query:e.query};return t.operationName||(t.operationName=typeof t.query!="string"?getOperationName(t.query)||void 0:""),t}function passthrough(e,t){return t?t(e):Observable.of()}function toLink(e){return typeof e=="function"?new ApolloLink(e):e}function isTerminating(e){return e.request.length<=1}var LinkError=function(e){__extends(t,e);function t(n,r){var o=e.call(this,n)||this;return o.link=r,o}return t}(Error),ApolloLink=function(){function e(t){t&&(this.request=t)}return e.empty=function(){return new e(function(){return Observable.of()})},e.from=function(t){return t.length===0?e.empty():t.map(toLink).reduce(function(n,r){return n.concat(r)})},e.split=function(t,n,r){var o=toLink(n),a=toLink(r||new e(passthrough));return isTerminating(o)&&isTerminating(a)?new e(function(s){return t(s)?o.request(s)||Observable.of():a.request(s)||Observable.of()}):new e(function(s,u){return t(s)?o.request(s,u)||Observable.of():a.request(s,u)||Observable.of()})},e.execute=function(t,n){return t.request(createOperation(n.context,transformOperation(validateOperation(n))))||Observable.of()},e.concat=function(t,n){var r=toLink(t);if(isTerminating(r))return __DEV__&&invariant$1.warn(new LinkError("You are calling concat on a terminating link, which will have no effect",r)),r;var o=toLink(n);return isTerminating(o)?new e(function(a){return r.request(a,function(s){return o.request(s)||Observable.of()})||Observable.of()}):new e(function(a,s){return r.request(a,function(u){return o.request(u,s)||Observable.of()})||Observable.of()})},e.prototype.split=function(t,n,r){return this.concat(e.split(t,n,r||new e(passthrough)))},e.prototype.concat=function(t){return e.concat(this,t)},e.prototype.request=function(t,n){throw __DEV__?new InvariantError("request is not implemented"):new InvariantError(19)},e.prototype.onError=function(t,n){if(n&&n.error)return n.error(t),!1;throw t},e.prototype.setOnError=function(t){return this.onError=t,this},e}(),empty=ApolloLink.empty,from=ApolloLink.from,split=ApolloLink.split,concat=ApolloLink.concat,execute=ApolloLink.execute,version="3.6.9",hasOwnProperty$4=Object.prototype.hasOwnProperty;function parseAndCheckHttpResponse(e){return function(t){return t.text().then(function(n){try{return JSON.parse(n)}catch(o){var r=o;throw r.name="ServerParseError",r.response=t,r.statusCode=t.status,r.bodyText=n,r}}).then(function(n){return t.status>=300&&throwServerError(t,n,"Response not successful: Received status code ".concat(t.status)),!Array.isArray(n)&&!hasOwnProperty$4.call(n,"data")&&!hasOwnProperty$4.call(n,"errors")&&throwServerError(t,n,"Server response was missing for query '".concat(Array.isArray(e)?e.map(function(r){return r.operationName}):e.operationName,"'.")),n})}}var serializeFetchParameter=function(e,t){var n;try{n=JSON.stringify(e)}catch(o){var r=__DEV__?new InvariantError("Network request failed. ".concat(t," is not serializable: ").concat(o.message)):new InvariantError(21);throw r.parseError=o,r}return n},defaultHttpOptions={includeQuery:!0,includeExtensions:!1},defaultHeaders={accept:"*/*","content-type":"application/json"},defaultOptions={method:"POST"},fallbackHttpConfig={http:defaultHttpOptions,headers:defaultHeaders,options:defaultOptions},defaultPrinter=function(e,t){return t(e)};function selectHttpOptionsAndBody(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return n.unshift(t),selectHttpOptionsAndBodyInternal.apply(void 0,__spreadArray([e,defaultPrinter],n,!1))}function selectHttpOptionsAndBodyInternal(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var o={},a={};n.forEach(function(me){o=__assign$1(__assign$1(__assign$1({},o),me.options),{headers:__assign$1(__assign$1({},o.headers),headersToLowerCase(me.headers))}),me.credentials&&(o.credentials=me.credentials),a=__assign$1(__assign$1({},a),me.http)});var s=e.operationName,u=e.extensions,l=e.variables,c=e.query,m={operationName:s,variables:l};return a.includeExtensions&&(m.extensions=u),a.includeQuery&&(m.query=t(c,print)),{options:o,body:m}}function headersToLowerCase(e){if(e){var t=Object.create(null);return Object.keys(Object(e)).forEach(function(n){t[n.toLowerCase()]=e[n]}),t}return e}var checkFetcher=function(e){if(!e&&typeof fetch=="undefined")throw __DEV__?new InvariantError(`
"fetch" has not been found globally and no fetcher has been configured. To fix this, install a fetch package (like https://www.npmjs.com/package/cross-fetch), instantiate the fetcher, and pass it into your HttpLink constructor. For example:

import fetch from 'cross-fetch';
import { ApolloClient, HttpLink } from '@apollo/client';
const client = new ApolloClient({
  link: new HttpLink({ uri: '/graphql', fetch })
});
    `):new InvariantError(20)},createSignalIfSupported=function(){if(typeof AbortController=="undefined")return{controller:!1,signal:!1};var e=new AbortController,t=e.signal;return{controller:e,signal:t}},selectURI=function(e,t){var n=e.getContext(),r=n.uri;return r||(typeof t=="function"?t(e):t||"/graphql")};function rewriteURIForGET(e,t){var n=[],r=function(me,xe){n.push("".concat(me,"=").concat(encodeURIComponent(xe)))};if("query"in t&&r("query",t.query),t.operationName&&r("operationName",t.operationName),t.variables){var o=void 0;try{o=serializeFetchParameter(t.variables,"Variables map")}catch(me){return{parseError:me}}r("variables",o)}if(t.extensions){var a=void 0;try{a=serializeFetchParameter(t.extensions,"Extensions map")}catch(me){return{parseError:me}}r("extensions",a)}var s="",u=e,l=e.indexOf("#");l!==-1&&(s=e.substr(l),u=e.substr(0,l));var c=u.indexOf("?")===-1?"?":"&",m=u+c+n.join("&")+s;return{newURI:m}}var backupFetch=maybe$1(function(){return fetch}),createHttpLink=function(e){e===void 0&&(e={});var t=e.uri,n=t===void 0?"/graphql":t,r=e.fetch,o=e.print,a=o===void 0?defaultPrinter:o,s=e.includeExtensions,u=e.useGETForQueries,l=e.includeUnusedVariables,c=l===void 0?!1:l,m=__rest(e,["uri","fetch","print","includeExtensions","useGETForQueries","includeUnusedVariables"]);__DEV__&&checkFetcher(r||backupFetch);var me={http:{includeExtensions:s},options:m.fetchOptions,credentials:m.credentials,headers:m.headers};return new ApolloLink(function(xe){var Ne=selectURI(xe,n),He=xe.getContext(),Ye={};if(He.clientAwareness){var Je=He.clientAwareness,vn=Je.name,La=Je.version;vn&&(Ye["apollographql-client-name"]=vn),La&&(Ye["apollographql-client-version"]=La)}var sr=__assign$1(__assign$1({},Ye),He.headers),Zr={http:He.http,options:He.fetchOptions,credentials:He.credentials,headers:sr},zs=selectHttpOptionsAndBodyInternal(xe,a,fallbackHttpConfig,me,Zr),za=zs.options,Hs=zs.body;if(Hs.variables&&!c){var lc=new Set(Object.keys(Hs.variables));visit(xe.query,{Variable:function(Ay,$b,e0){e0&&e0.kind!=="VariableDefinition"&&lc.delete(Ay.name.value)}}),lc.size&&(Hs.variables=__assign$1({},Hs.variables),lc.forEach(function(Ay){delete Hs.variables[Ay]}))}var Ty;if(!za.signal){var _y=createSignalIfSupported(),xy=_y.controller,Bb=_y.signal;Ty=xy,Ty&&(za.signal=Bb)}var Dy=function(Ay){return Ay.kind==="OperationDefinition"&&Ay.operation==="mutation"};if(u&&!xe.query.definitions.some(Dy)&&(za.method="GET"),za.method==="GET"){var Bg=rewriteURIForGET(Ne,Hs),yy=Bg.newURI,wy=Bg.parseError;if(wy)return fromError(wy);Ne=yy}else try{za.body=serializeFetchParameter(Hs,"Payload")}catch(Ay){return fromError(Ay)}return new Observable(function(Ay){var $b=r||maybe$1(function(){return fetch})||backupFetch;return $b(Ne,za).then(function(e0){return xe.setContext({response:e0}),e0}).then(parseAndCheckHttpResponse(xe)).then(function(e0){return Ay.next(e0),Ay.complete(),e0}).catch(function(e0){e0.name!=="AbortError"&&(e0.result&&e0.result.errors&&e0.result.data&&Ay.next(e0.result),Ay.error(e0))}),function(){Ty&&Ty.abort()}})})},HttpLink=function(e){__extends(t,e);function t(n){n===void 0&&(n={});var r=e.call(this,createHttpLink(n).request)||this;return r.options=n,r}return t}(ApolloLink),_a$2=Object.prototype,toString=_a$2.toString,hasOwnProperty$3=_a$2.hasOwnProperty,fnToStr=Function.prototype.toString,previousComparisons=new Map;function equal(e,t){try{return check(e,t)}finally{previousComparisons.clear()}}function check(e,t){if(e===t)return!0;var n=toString.call(e),r=toString.call(t);if(n!==r)return!1;switch(n){case"[object Array]":if(e.length!==t.length)return!1;case"[object Object]":{if(previouslyCompared(e,t))return!0;var o=definedKeys(e),a=definedKeys(t),s=o.length;if(s!==a.length)return!1;for(var u=0;u<s;++u)if(!hasOwnProperty$3.call(t,o[u]))return!1;for(var u=0;u<s;++u){var l=o[u];if(!check(e[l],t[l]))return!1}return!0}case"[object Error]":return e.name===t.name&&e.message===t.message;case"[object Number]":if(e!==e)return t!==t;case"[object Boolean]":case"[object Date]":return+e==+t;case"[object RegExp]":case"[object String]":return e==""+t;case"[object Map]":case"[object Set]":{if(e.size!==t.size)return!1;if(previouslyCompared(e,t))return!0;for(var c=e.entries(),m=n==="[object Map]";;){var me=c.next();if(me.done)break;var xe=me.value,Ne=xe[0],He=xe[1];if(!t.has(Ne)||m&&!check(He,t.get(Ne)))return!1}return!0}case"[object Uint16Array]":case"[object Uint8Array]":case"[object Uint32Array]":case"[object Int32Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object ArrayBuffer]":e=new Uint8Array(e),t=new Uint8Array(t);case"[object DataView]":{var Ye=e.byteLength;if(Ye===t.byteLength)for(;Ye--&&e[Ye]===t[Ye];);return Ye===-1}case"[object AsyncFunction]":case"[object GeneratorFunction]":case"[object AsyncGeneratorFunction]":case"[object Function]":{var Je=fnToStr.call(e);return Je!==fnToStr.call(t)?!1:!endsWith(Je,nativeCodeSuffix)}}return!1}function definedKeys(e){return Object.keys(e).filter(isDefinedKey,e)}function isDefinedKey(e){return this[e]!==void 0}var nativeCodeSuffix="{ [native code] }";function endsWith(e,t){var n=e.length-t.length;return n>=0&&e.indexOf(t,n)===n}function previouslyCompared(e,t){var n=previousComparisons.get(e);if(n){if(n.has(t))return!0}else previousComparisons.set(e,n=new Set);return n.add(t),!1}var defaultMakeData=function(){return Object.create(null)},_a$1=Array.prototype,forEach=_a$1.forEach,slice=_a$1.slice,Trie=function(){function e(t,n){t===void 0&&(t=!0),n===void 0&&(n=defaultMakeData),this.weakness=t,this.makeData=n}return e.prototype.lookup=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return this.lookupArray(t)},e.prototype.lookupArray=function(t){var n=this;return forEach.call(t,function(r){return n=n.getChildTrie(r)}),n.data||(n.data=this.makeData(slice.call(t)))},e.prototype.getChildTrie=function(t){var n=this.weakness&&isObjRef(t)?this.weak||(this.weak=new WeakMap):this.strong||(this.strong=new Map),r=n.get(t);return r||n.set(t,r=new e(this.weakness,this.makeData)),r},e}();function isObjRef(e){switch(typeof e){case"object":if(e===null)break;case"function":return!0}return!1}var currentContext=null,MISSING_VALUE={},idCounter=1,makeSlotClass=function(){return function(){function e(){this.id=["slot",idCounter++,Date.now(),Math.random().toString(36).slice(2)].join(":")}return e.prototype.hasValue=function(){for(var t=currentContext;t;t=t.parent)if(this.id in t.slots){var n=t.slots[this.id];if(n===MISSING_VALUE)break;return t!==currentContext&&(currentContext.slots[this.id]=n),!0}return currentContext&&(currentContext.slots[this.id]=MISSING_VALUE),!1},e.prototype.getValue=function(){if(this.hasValue())return currentContext.slots[this.id]},e.prototype.withValue=function(t,n,r,o){var a,s=(a={__proto__:null},a[this.id]=t,a),u=currentContext;currentContext={parent:u,slots:s};try{return n.apply(o,r)}finally{currentContext=u}},e.bind=function(t){var n=currentContext;return function(){var r=currentContext;try{return currentContext=n,t.apply(this,arguments)}finally{currentContext=r}}},e.noContext=function(t,n,r){if(currentContext){var o=currentContext;try{return currentContext=null,t.apply(r,n)}finally{currentContext=o}}else return t.apply(r,n)},e}()},globalKey="@wry/context:Slot",host=Array,Slot=host[globalKey]||function(){var e=makeSlotClass();try{Object.defineProperty(host,globalKey,{value:host[globalKey]=e,enumerable:!1,writable:!1,configurable:!1})}finally{return e}}();Slot.bind,Slot.noContext;function defaultDispose(){}var Cache$1=function(){function e(t,n){t===void 0&&(t=1/0),n===void 0&&(n=defaultDispose),this.max=t,this.dispose=n,this.map=new Map,this.newest=null,this.oldest=null}return e.prototype.has=function(t){return this.map.has(t)},e.prototype.get=function(t){var n=this.getNode(t);return n&&n.value},e.prototype.getNode=function(t){var n=this.map.get(t);if(n&&n!==this.newest){var r=n.older,o=n.newer;o&&(o.older=r),r&&(r.newer=o),n.older=this.newest,n.older.newer=n,n.newer=null,this.newest=n,n===this.oldest&&(this.oldest=o)}return n},e.prototype.set=function(t,n){var r=this.getNode(t);return r?r.value=n:(r={key:t,value:n,newer:null,older:this.newest},this.newest&&(this.newest.newer=r),this.newest=r,this.oldest=this.oldest||r,this.map.set(t,r),r.value)},e.prototype.clean=function(){for(;this.oldest&&this.map.size>this.max;)this.delete(this.oldest.key)},e.prototype.delete=function(t){var n=this.map.get(t);return n?(n===this.newest&&(this.newest=n.older),n===this.oldest&&(this.oldest=n.newer),n.newer&&(n.newer.older=n.older),n.older&&(n.older.newer=n.newer),this.map.delete(t),this.dispose(n.value,t),!0):!1},e}(),parentEntrySlot=new Slot,_a,hasOwnProperty$2=Object.prototype.hasOwnProperty,toArray=(_a=Array.from,_a===void 0?function(e){var t=[];return e.forEach(function(n){return t.push(n)}),t}:_a);function maybeUnsubscribe(e){var t=e.unsubscribe;typeof t=="function"&&(e.unsubscribe=void 0,t())}var emptySetPool=[],POOL_TARGET_SIZE=100;function assert(e,t){if(!e)throw new Error(t||"assertion failure")}function valueIs(e,t){var n=e.length;return n>0&&n===t.length&&e[n-1]===t[n-1]}function valueGet(e){switch(e.length){case 0:throw new Error("unknown value");case 1:return e[0];case 2:throw e[1]}}function valueCopy(e){return e.slice(0)}var Entry=function(){function e(t){this.fn=t,this.parents=new Set,this.childValues=new Map,this.dirtyChildren=null,this.dirty=!0,this.recomputing=!1,this.value=[],this.deps=null,++e.count}return e.prototype.peek=function(){if(this.value.length===1&&!mightBeDirty(this))return rememberParent(this),this.value[0]},e.prototype.recompute=function(t){return assert(!this.recomputing,"already recomputing"),rememberParent(this),mightBeDirty(this)?reallyRecompute(this,t):valueGet(this.value)},e.prototype.setDirty=function(){this.dirty||(this.dirty=!0,this.value.length=0,reportDirty(this),maybeUnsubscribe(this))},e.prototype.dispose=function(){var t=this;this.setDirty(),forgetChildren(this),eachParent(this,function(n,r){n.setDirty(),forgetChild(n,t)})},e.prototype.forget=function(){this.dispose()},e.prototype.dependOn=function(t){t.add(this),this.deps||(this.deps=emptySetPool.pop()||new Set),this.deps.add(t)},e.prototype.forgetDeps=function(){var t=this;this.deps&&(toArray(this.deps).forEach(function(n){return n.delete(t)}),this.deps.clear(),emptySetPool.push(this.deps),this.deps=null)},e.count=0,e}();function rememberParent(e){var t=parentEntrySlot.getValue();if(t)return e.parents.add(t),t.childValues.has(e)||t.childValues.set(e,[]),mightBeDirty(e)?reportDirtyChild(t,e):reportCleanChild(t,e),t}function reallyRecompute(e,t){return forgetChildren(e),parentEntrySlot.withValue(e,recomputeNewValue,[e,t]),maybeSubscribe(e,t)&&setClean(e),valueGet(e.value)}function recomputeNewValue(e,t){e.recomputing=!0,e.value.length=0;try{e.value[0]=e.fn.apply(null,t)}catch(n){e.value[1]=n}e.recomputing=!1}function mightBeDirty(e){return e.dirty||!!(e.dirtyChildren&&e.dirtyChildren.size)}function setClean(e){e.dirty=!1,!mightBeDirty(e)&&reportClean(e)}function reportDirty(e){eachParent(e,reportDirtyChild)}function reportClean(e){eachParent(e,reportCleanChild)}function eachParent(e,t){var n=e.parents.size;if(n)for(var r=toArray(e.parents),o=0;o<n;++o)t(r[o],e)}function reportDirtyChild(e,t){assert(e.childValues.has(t)),assert(mightBeDirty(t));var n=!mightBeDirty(e);if(!e.dirtyChildren)e.dirtyChildren=emptySetPool.pop()||new Set;else if(e.dirtyChildren.has(t))return;e.dirtyChildren.add(t),n&&reportDirty(e)}function reportCleanChild(e,t){assert(e.childValues.has(t)),assert(!mightBeDirty(t));var n=e.childValues.get(t);n.length===0?e.childValues.set(t,valueCopy(t.value)):valueIs(n,t.value)||e.setDirty(),removeDirtyChild(e,t),!mightBeDirty(e)&&reportClean(e)}function removeDirtyChild(e,t){var n=e.dirtyChildren;n&&(n.delete(t),n.size===0&&(emptySetPool.length<POOL_TARGET_SIZE&&emptySetPool.push(n),e.dirtyChildren=null))}function forgetChildren(e){e.childValues.size>0&&e.childValues.forEach(function(t,n){forgetChild(e,n)}),e.forgetDeps(),assert(e.dirtyChildren===null)}function forgetChild(e,t){t.parents.delete(e),e.childValues.delete(t),removeDirtyChild(e,t)}function maybeSubscribe(e,t){if(typeof e.subscribe=="function")try{maybeUnsubscribe(e),e.unsubscribe=e.subscribe.apply(null,t)}catch{return e.setDirty(),!1}return!0}var EntryMethods={setDirty:!0,dispose:!0,forget:!0};function dep(e){var t=new Map,n=e&&e.subscribe;function r(o){var a=parentEntrySlot.getValue();if(a){var s=t.get(o);s||t.set(o,s=new Set),a.dependOn(s),typeof n=="function"&&(maybeUnsubscribe(s),s.unsubscribe=n(o))}}return r.dirty=function(o,a){var s=t.get(o);if(s){var u=a&&hasOwnProperty$2.call(EntryMethods,a)?a:"setDirty";toArray(s).forEach(function(l){return l[u]()}),t.delete(o),maybeUnsubscribe(s)}},r}function makeDefaultMakeCacheKeyFunction(){var e=new Trie(typeof WeakMap=="function");return function(){return e.lookupArray(arguments)}}makeDefaultMakeCacheKeyFunction();var caches=new Set;function wrap(e,t){t===void 0&&(t=Object.create(null));var n=new Cache$1(t.max||Math.pow(2,16),function(c){return c.dispose()}),r=t.keyArgs,o=t.makeCacheKey||makeDefaultMakeCacheKeyFunction(),a=function(){var c=o.apply(null,r?r.apply(null,arguments):arguments);if(c===void 0)return e.apply(null,arguments);var m=n.get(c);m||(n.set(c,m=new Entry(e)),m.subscribe=t.subscribe,m.forget=function(){return n.delete(c)});var me=m.recompute(Array.prototype.slice.call(arguments));return n.set(c,m),caches.add(n),parentEntrySlot.hasValue()||(caches.forEach(function(xe){return xe.clean()}),caches.clear()),me};Object.defineProperty(a,"size",{get:function(){return n.map.size},configurable:!1,enumerable:!1});function s(c){var m=n.get(c);m&&m.setDirty()}a.dirtyKey=s,a.dirty=function(){s(o.apply(null,arguments))};function u(c){var m=n.get(c);if(m)return m.peek()}a.peekKey=u,a.peek=function(){return u(o.apply(null,arguments))};function l(c){return n.delete(c)}return a.forgetKey=l,a.forget=function(){return l(o.apply(null,arguments))},a.makeCacheKey=o,a.getKey=r?function(){return o.apply(null,r.apply(null,arguments))}:o,Object.freeze(a)}var ApolloCache=function(){function e(){this.getFragmentDoc=wrap(getFragmentQueryDocument)}return e.prototype.batch=function(t){var n=this,r=typeof t.optimistic=="string"?t.optimistic:t.optimistic===!1?null:void 0,o;return this.performTransaction(function(){return o=t.update(n)},r),o},e.prototype.recordOptimisticTransaction=function(t,n){this.performTransaction(t,n)},e.prototype.transformDocument=function(t){return t},e.prototype.identify=function(t){},e.prototype.gc=function(){return[]},e.prototype.modify=function(t){return!1},e.prototype.transformForLink=function(t){return t},e.prototype.readQuery=function(t,n){return n===void 0&&(n=!!t.optimistic),this.read(__assign$1(__assign$1({},t),{rootId:t.id||"ROOT_QUERY",optimistic:n}))},e.prototype.readFragment=function(t,n){return n===void 0&&(n=!!t.optimistic),this.read(__assign$1(__assign$1({},t),{query:this.getFragmentDoc(t.fragment,t.fragmentName),rootId:t.id,optimistic:n}))},e.prototype.writeQuery=function(t){var n=t.id,r=t.data,o=__rest(t,["id","data"]);return this.write(Object.assign(o,{dataId:n||"ROOT_QUERY",result:r}))},e.prototype.writeFragment=function(t){var n=t.id,r=t.data,o=t.fragment,a=t.fragmentName,s=__rest(t,["id","data","fragment","fragmentName"]);return this.write(Object.assign(s,{query:this.getFragmentDoc(o,a),dataId:n,result:r}))},e.prototype.updateQuery=function(t,n){return this.batch({update:function(r){var o=r.readQuery(t),a=n(o);return a==null?o:(r.writeQuery(__assign$1(__assign$1({},t),{data:a})),a)}})},e.prototype.updateFragment=function(t,n){return this.batch({update:function(r){var o=r.readFragment(t),a=n(o);return a==null?o:(r.writeFragment(__assign$1(__assign$1({},t),{data:a})),a)}})},e}(),Cache;(function(e){})(Cache||(Cache={}));var MissingFieldError=function(){function e(t,n,r,o){this.message=t,this.path=n,this.query=r,this.variables=o}return e}(),hasOwn=Object.prototype.hasOwnProperty;function defaultDataIdFromObject(e,t){var n=e.__typename,r=e.id,o=e._id;if(typeof n=="string"&&(t&&(t.keyObject=r!==void 0?{id:r}:o!==void 0?{_id:o}:void 0),r===void 0&&(r=o),r!==void 0))return"".concat(n,":").concat(typeof r=="number"||typeof r=="string"?r:JSON.stringify(r))}var defaultConfig={dataIdFromObject:defaultDataIdFromObject,addTypename:!0,resultCaching:!0,canonizeResults:!1};function normalizeConfig(e){return compact(defaultConfig,e)}function shouldCanonizeResults(e){var t=e.canonizeResults;return t===void 0?defaultConfig.canonizeResults:t}function getTypenameFromStoreObject(e,t){return isReference(t)?e.get(t.__ref,"__typename"):t&&t.__typename}var TypeOrFieldNameRegExp=/^[_a-z][_0-9a-z]*/i;function fieldNameFromStoreName(e){var t=e.match(TypeOrFieldNameRegExp);return t?t[0]:e}function selectionSetMatchesResult(e,t,n){return isNonNullObject(t)?isArray(t)?t.every(function(r){return selectionSetMatchesResult(e,r,n)}):e.selections.every(function(r){if(isField(r)&&shouldInclude(r,n)){var o=resultKeyNameFromField(r);return hasOwn.call(t,o)&&(!r.selectionSet||selectionSetMatchesResult(r.selectionSet,t[o],n))}return!0}):!1}function storeValueIsStoreObject(e){return isNonNullObject(e)&&!isReference(e)&&!isArray(e)}function makeProcessedFieldsMerger(){return new DeepMerger}var isArray=function(e){return Array.isArray(e)},DELETE=Object.create(null),delModifier=function(){return DELETE},INVALIDATE=Object.create(null),EntityStore=function(){function e(t,n){var r=this;this.policies=t,this.group=n,this.data=Object.create(null),this.rootIds=Object.create(null),this.refs=Object.create(null),this.getFieldValue=function(o,a){return maybeDeepFreeze(isReference(o)?r.get(o.__ref,a):o&&o[a])},this.canRead=function(o){return isReference(o)?r.has(o.__ref):typeof o=="object"},this.toReference=function(o,a){if(typeof o=="string")return makeReference(o);if(isReference(o))return o;var s=r.policies.identify(o)[0];if(s){var u=makeReference(s);return a&&r.merge(s,o),u}}}return e.prototype.toObject=function(){return __assign$1({},this.data)},e.prototype.has=function(t){return this.lookup(t,!0)!==void 0},e.prototype.get=function(t,n){if(this.group.depend(t,n),hasOwn.call(this.data,t)){var r=this.data[t];if(r&&hasOwn.call(r,n))return r[n]}if(n==="__typename"&&hasOwn.call(this.policies.rootTypenamesById,t))return this.policies.rootTypenamesById[t];if(this instanceof Layer)return this.parent.get(t,n)},e.prototype.lookup=function(t,n){if(n&&this.group.depend(t,"__exists"),hasOwn.call(this.data,t))return this.data[t];if(this instanceof Layer)return this.parent.lookup(t,n);if(this.policies.rootTypenamesById[t])return Object.create(null)},e.prototype.merge=function(t,n){var r=this,o;isReference(t)&&(t=t.__ref),isReference(n)&&(n=n.__ref);var a=typeof t=="string"?this.lookup(o=t):t,s=typeof n=="string"?this.lookup(o=n):n;if(s){__DEV__?invariant$1(typeof o=="string","store.merge expects a string ID"):invariant$1(typeof o=="string",1);var u=new DeepMerger(storeObjectReconciler).merge(a,s);if(this.data[o]=u,u!==a&&(delete this.refs[o],this.group.caching)){var l=Object.create(null);a||(l.__exists=1),Object.keys(s).forEach(function(c){if(!a||a[c]!==u[c]){l[c]=1;var m=fieldNameFromStoreName(c);m!==c&&!r.policies.hasKeyArgs(u.__typename,m)&&(l[m]=1),u[c]===void 0&&!(r instanceof Layer)&&delete u[c]}}),l.__typename&&!(a&&a.__typename)&&this.policies.rootTypenamesById[o]===u.__typename&&delete l.__typename,Object.keys(l).forEach(function(c){return r.group.dirty(o,c)})}}},e.prototype.modify=function(t,n){var r=this,o=this.lookup(t);if(o){var a=Object.create(null),s=!1,u=!0,l={DELETE,INVALIDATE,isReference,toReference:this.toReference,canRead:this.canRead,readField:function(c,m){return r.policies.readField(typeof c=="string"?{fieldName:c,from:m||makeReference(t)}:c,{store:r})}};if(Object.keys(o).forEach(function(c){var m=fieldNameFromStoreName(c),me=o[c];if(me!==void 0){var xe=typeof n=="function"?n:n[c]||n[m];if(xe){var Ne=xe===delModifier?DELETE:xe(maybeDeepFreeze(me),__assign$1(__assign$1({},l),{fieldName:m,storeFieldName:c,storage:r.getStorage(t,c)}));Ne===INVALIDATE?r.group.dirty(t,c):(Ne===DELETE&&(Ne=void 0),Ne!==me&&(a[c]=Ne,s=!0,me=Ne))}me!==void 0&&(u=!1)}}),s)return this.merge(t,a),u&&(this instanceof Layer?this.data[t]=void 0:delete this.data[t],this.group.dirty(t,"__exists")),!0}return!1},e.prototype.delete=function(t,n,r){var o,a=this.lookup(t);if(a){var s=this.getFieldValue(a,"__typename"),u=n&&r?this.policies.getStoreFieldName({typename:s,fieldName:n,args:r}):n;return this.modify(t,u?(o={},o[u]=delModifier,o):delModifier)}return!1},e.prototype.evict=function(t,n){var r=!1;return t.id&&(hasOwn.call(this.data,t.id)&&(r=this.delete(t.id,t.fieldName,t.args)),this instanceof Layer&&this!==n&&(r=this.parent.evict(t,n)||r),(t.fieldName||r)&&this.group.dirty(t.id,t.fieldName||"__exists")),r},e.prototype.clear=function(){this.replace(null)},e.prototype.extract=function(){var t=this,n=this.toObject(),r=[];return this.getRootIdSet().forEach(function(o){hasOwn.call(t.policies.rootTypenamesById,o)||r.push(o)}),r.length&&(n.__META={extraRootIds:r.sort()}),n},e.prototype.replace=function(t){var n=this;if(Object.keys(this.data).forEach(function(a){t&&hasOwn.call(t,a)||n.delete(a)}),t){var r=t.__META,o=__rest(t,["__META"]);Object.keys(o).forEach(function(a){n.merge(a,o[a])}),r&&r.extraRootIds.forEach(this.retain,this)}},e.prototype.retain=function(t){return this.rootIds[t]=(this.rootIds[t]||0)+1},e.prototype.release=function(t){if(this.rootIds[t]>0){var n=--this.rootIds[t];return n||delete this.rootIds[t],n}return 0},e.prototype.getRootIdSet=function(t){return t===void 0&&(t=new Set),Object.keys(this.rootIds).forEach(t.add,t),this instanceof Layer?this.parent.getRootIdSet(t):Object.keys(this.policies.rootTypenamesById).forEach(t.add,t),t},e.prototype.gc=function(){var t=this,n=this.getRootIdSet(),r=this.toObject();n.forEach(function(s){hasOwn.call(r,s)&&(Object.keys(t.findChildRefIds(s)).forEach(n.add,n),delete r[s])});var o=Object.keys(r);if(o.length){for(var a=this;a instanceof Layer;)a=a.parent;o.forEach(function(s){return a.delete(s)})}return o},e.prototype.findChildRefIds=function(t){if(!hasOwn.call(this.refs,t)){var n=this.refs[t]=Object.create(null),r=this.data[t];if(!r)return n;var o=new Set([r]);o.forEach(function(a){isReference(a)&&(n[a.__ref]=!0),isNonNullObject(a)&&Object.keys(a).forEach(function(s){var u=a[s];isNonNullObject(u)&&o.add(u)})})}return this.refs[t]},e.prototype.makeCacheKey=function(){return this.group.keyMaker.lookupArray(arguments)},e}(),CacheGroup=function(){function e(t,n){n===void 0&&(n=null),this.caching=t,this.parent=n,this.d=null,this.resetCaching()}return e.prototype.resetCaching=function(){this.d=this.caching?dep():null,this.keyMaker=new Trie(canUseWeakMap)},e.prototype.depend=function(t,n){if(this.d){this.d(makeDepKey(t,n));var r=fieldNameFromStoreName(n);r!==n&&this.d(makeDepKey(t,r)),this.parent&&this.parent.depend(t,n)}},e.prototype.dirty=function(t,n){this.d&&this.d.dirty(makeDepKey(t,n),n==="__exists"?"forget":"setDirty")},e}();function makeDepKey(e,t){return t+"#"+e}function maybeDependOnExistenceOfEntity(e,t){supportsResultCaching(e)&&e.group.depend(t,"__exists")}(function(e){var t=function(n){__extends(r,n);function r(o){var a=o.policies,s=o.resultCaching,u=s===void 0?!0:s,l=o.seed,c=n.call(this,a,new CacheGroup(u))||this;return c.stump=new Stump(c),c.storageTrie=new Trie(canUseWeakMap),l&&c.replace(l),c}return r.prototype.addLayer=function(o,a){return this.stump.addLayer(o,a)},r.prototype.removeLayer=function(){return this},r.prototype.getStorage=function(){return this.storageTrie.lookupArray(arguments)},r}(e);e.Root=t})(EntityStore||(EntityStore={}));var Layer=function(e){__extends(t,e);function t(n,r,o,a){var s=e.call(this,r.policies,a)||this;return s.id=n,s.parent=r,s.replay=o,s.group=a,o(s),s}return t.prototype.addLayer=function(n,r){return new t(n,this,r,this.group)},t.prototype.removeLayer=function(n){var r=this,o=this.parent.removeLayer(n);return n===this.id?(this.group.caching&&Object.keys(this.data).forEach(function(a){var s=r.data[a],u=o.lookup(a);u?s?s!==u&&Object.keys(s).forEach(function(l){equal(s[l],u[l])||r.group.dirty(a,l)}):(r.group.dirty(a,"__exists"),Object.keys(u).forEach(function(l){r.group.dirty(a,l)})):r.delete(a)}),o):o===this.parent?this:o.addLayer(this.id,this.replay)},t.prototype.toObject=function(){return __assign$1(__assign$1({},this.parent.toObject()),this.data)},t.prototype.findChildRefIds=function(n){var r=this.parent.findChildRefIds(n);return hasOwn.call(this.data,n)?__assign$1(__assign$1({},r),e.prototype.findChildRefIds.call(this,n)):r},t.prototype.getStorage=function(){for(var n=this.parent;n.parent;)n=n.parent;return n.getStorage.apply(n,arguments)},t}(EntityStore),Stump=function(e){__extends(t,e);function t(n){return e.call(this,"EntityStore.Stump",n,function(){},new CacheGroup(n.group.caching,n.group))||this}return t.prototype.removeLayer=function(){return this},t.prototype.merge=function(){return this.parent.merge.apply(this.parent,arguments)},t}(Layer);function storeObjectReconciler(e,t,n){var r=e[n],o=t[n];return equal(r,o)?r:o}function supportsResultCaching(e){return!!(e instanceof EntityStore&&e.group.caching)}function shallowCopy(e){return isNonNullObject(e)?isArray(e)?e.slice(0):__assign$1({__proto__:Object.getPrototypeOf(e)},e):e}var ObjectCanon=function(){function e(){this.known=new(canUseWeakSet?WeakSet:Set),this.pool=new Trie(canUseWeakMap),this.passes=new WeakMap,this.keysByJSON=new Map,this.empty=this.admit({})}return e.prototype.isKnown=function(t){return isNonNullObject(t)&&this.known.has(t)},e.prototype.pass=function(t){if(isNonNullObject(t)){var n=shallowCopy(t);return this.passes.set(n,t),n}return t},e.prototype.admit=function(t){var n=this;if(isNonNullObject(t)){var r=this.passes.get(t);if(r)return r;var o=Object.getPrototypeOf(t);switch(o){case Array.prototype:{if(this.known.has(t))return t;var a=t.map(this.admit,this),s=this.pool.lookupArray(a);return s.array||(this.known.add(s.array=a),__DEV__&&Object.freeze(a)),s.array}case null:case Object.prototype:{if(this.known.has(t))return t;var u=Object.getPrototypeOf(t),l=[u],c=this.sortedKeys(t);l.push(c.json);var m=l.length;c.sorted.forEach(function(Ne){l.push(n.admit(t[Ne]))});var s=this.pool.lookupArray(l);if(!s.object){var me=s.object=Object.create(u);this.known.add(me),c.sorted.forEach(function(Ne,He){me[Ne]=l[m+He]}),__DEV__&&Object.freeze(me)}return s.object}}}return t},e.prototype.sortedKeys=function(t){var n=Object.keys(t),r=this.pool.lookupArray(n);if(!r.keys){n.sort();var o=JSON.stringify(n);(r.keys=this.keysByJSON.get(o))||this.keysByJSON.set(o,r.keys={sorted:n,json:o})}return r.keys},e}(),canonicalStringify=Object.assign(function(e){if(isNonNullObject(e)){stringifyCanon===void 0&&resetCanonicalStringify();var t=stringifyCanon.admit(e),n=stringifyCache.get(t);return n===void 0&&stringifyCache.set(t,n=JSON.stringify(t)),n}return JSON.stringify(e)},{reset:resetCanonicalStringify}),stringifyCanon,stringifyCache;function resetCanonicalStringify(){stringifyCanon=new ObjectCanon,stringifyCache=new(canUseWeakMap?WeakMap:Map)}function execSelectionSetKeyArgs(e){return[e.selectionSet,e.objectOrReference,e.context,e.context.canonizeResults]}var StoreReader=function(){function e(t){var n=this;this.knownResults=new(canUseWeakMap?WeakMap:Map),this.config=compact(t,{addTypename:t.addTypename!==!1,canonizeResults:shouldCanonizeResults(t)}),this.canon=t.canon||new ObjectCanon,this.executeSelectionSet=wrap(function(r){var o,a=r.context.canonizeResults,s=execSelectionSetKeyArgs(r);s[3]=!a;var u=(o=n.executeSelectionSet).peek.apply(o,s);return u?a?__assign$1(__assign$1({},u),{result:n.canon.admit(u.result)}):u:(maybeDependOnExistenceOfEntity(r.context.store,r.enclosingRef.__ref),n.execSelectionSetImpl(r))},{max:this.config.resultCacheMaxSize,keyArgs:execSelectionSetKeyArgs,makeCacheKey:function(r,o,a,s){if(supportsResultCaching(a.store))return a.store.makeCacheKey(r,isReference(o)?o.__ref:o,a.varString,s)}}),this.executeSubSelectedArray=wrap(function(r){return maybeDependOnExistenceOfEntity(r.context.store,r.enclosingRef.__ref),n.execSubSelectedArrayImpl(r)},{max:this.config.resultCacheMaxSize,makeCacheKey:function(r){var o=r.field,a=r.array,s=r.context;if(supportsResultCaching(s.store))return s.store.makeCacheKey(o,a,s.varString)}})}return e.prototype.resetCanon=function(){this.canon=new ObjectCanon},e.prototype.diffQueryAgainstStore=function(t){var n=t.store,r=t.query,o=t.rootId,a=o===void 0?"ROOT_QUERY":o,s=t.variables,u=t.returnPartialData,l=u===void 0?!0:u,c=t.canonizeResults,m=c===void 0?this.config.canonizeResults:c,me=this.config.cache.policies;s=__assign$1(__assign$1({},getDefaultValues(getQueryDefinition(r))),s);var xe=makeReference(a),Ne=this.executeSelectionSet({selectionSet:getMainDefinition(r).selectionSet,objectOrReference:xe,enclosingRef:xe,context:{store:n,query:r,policies:me,variables:s,varString:canonicalStringify(s),canonizeResults:m,fragmentMap:createFragmentMap(getFragmentDefinitions(r))}}),He;if(Ne.missing&&(He=[new MissingFieldError(firstMissing(Ne.missing),Ne.missing,r,s)],!l))throw He[0];return{result:Ne.result,complete:!He,missing:He}},e.prototype.isFresh=function(t,n,r,o){if(supportsResultCaching(o.store)&&this.knownResults.get(t)===r){var a=this.executeSelectionSet.peek(r,n,o,this.canon.isKnown(t));if(a&&t===a.result)return!0}return!1},e.prototype.execSelectionSetImpl=function(t){var n=this,r=t.selectionSet,o=t.objectOrReference,a=t.enclosingRef,s=t.context;if(isReference(o)&&!s.policies.rootTypenamesById[o.__ref]&&!s.store.has(o.__ref))return{result:this.canon.empty,missing:"Dangling reference to missing ".concat(o.__ref," object")};var u=s.variables,l=s.policies,c=s.store,m=c.getFieldValue(o,"__typename"),me=[],xe,Ne=new DeepMerger;this.config.addTypename&&typeof m=="string"&&!l.rootIdsByTypename[m]&&me.push({__typename:m});function He(sr,Zr){var zs;return sr.missing&&(xe=Ne.merge(xe,(zs={},zs[Zr]=sr.missing,zs))),sr.result}var Ye=new Set(r.selections);Ye.forEach(function(sr){var Zr,zs;if(shouldInclude(sr,u))if(isField(sr)){var za=l.readField({fieldName:sr.name.value,field:sr,variables:s.variables,from:o},s),Hs=resultKeyNameFromField(sr);za===void 0?addTypenameToDocument.added(sr)||(xe=Ne.merge(xe,(Zr={},Zr[Hs]="Can't find field '".concat(sr.name.value,"' on ").concat(isReference(o)?o.__ref+" object":"object "+JSON.stringify(o,null,2)),Zr))):isArray(za)?za=He(n.executeSubSelectedArray({field:sr,array:za,enclosingRef:a,context:s}),Hs):sr.selectionSet?za!=null&&(za=He(n.executeSelectionSet({selectionSet:sr.selectionSet,objectOrReference:za,enclosingRef:isReference(za)?za:a,context:s}),Hs)):s.canonizeResults&&(za=n.canon.pass(za)),za!==void 0&&me.push((zs={},zs[Hs]=za,zs))}else{var lc=getFragmentFromSelection(sr,s.fragmentMap);lc&&l.fragmentMatches(lc,m)&&lc.selectionSet.selections.forEach(Ye.add,Ye)}});var Je=mergeDeepArray(me),vn={result:Je,missing:xe},La=s.canonizeResults?this.canon.admit(vn):maybeDeepFreeze(vn);return La.result&&this.knownResults.set(La.result,r),La},e.prototype.execSubSelectedArrayImpl=function(t){var n=this,r=t.field,o=t.array,a=t.enclosingRef,s=t.context,u,l=new DeepMerger;function c(m,me){var xe;return m.missing&&(u=l.merge(u,(xe={},xe[me]=m.missing,xe))),m.result}return r.selectionSet&&(o=o.filter(s.store.canRead)),o=o.map(function(m,me){return m===null?null:isArray(m)?c(n.executeSubSelectedArray({field:r,array:m,enclosingRef:a,context:s}),me):r.selectionSet?c(n.executeSelectionSet({selectionSet:r.selectionSet,objectOrReference:m,enclosingRef:isReference(m)?m:a,context:s}),me):(__DEV__&&assertSelectionSetForIdValue(s.store,r,m),m)}),{result:s.canonizeResults?this.canon.admit(o):o,missing:u}},e}();function firstMissing(e){try{JSON.stringify(e,function(t,n){if(typeof n=="string")throw n;return n})}catch(t){return t}}function assertSelectionSetForIdValue(e,t,n){if(!t.selectionSet){var r=new Set([n]);r.forEach(function(o){isNonNullObject(o)&&(__DEV__?invariant$1(!isReference(o),"Missing selection set for object of type ".concat(getTypenameFromStoreObject(e,o)," returned for query field ").concat(t.name.value)):invariant$1(!isReference(o),5),Object.values(o).forEach(r.add,r))})}}var cacheSlot=new Slot,cacheInfoMap=new WeakMap;function getCacheInfo(e){var t=cacheInfoMap.get(e);return t||cacheInfoMap.set(e,t={vars:new Set,dep:dep()}),t}function forgetCache(e){getCacheInfo(e).vars.forEach(function(t){return t.forgetCache(e)})}function recallCache(e){getCacheInfo(e).vars.forEach(function(t){return t.attachCache(e)})}function makeVar(e){var t=new Set,n=new Set,r=function(a){if(arguments.length>0){if(e!==a){e=a,t.forEach(function(l){getCacheInfo(l).dep.dirty(r),broadcast(l)});var s=Array.from(n);n.clear(),s.forEach(function(l){return l(e)})}}else{var u=cacheSlot.getValue();u&&(o(u),getCacheInfo(u).dep(r))}return e};r.onNextChange=function(a){return n.add(a),function(){n.delete(a)}};var o=r.attachCache=function(a){return t.add(a),getCacheInfo(a).vars.add(r),r};return r.forgetCache=function(a){return t.delete(a)},r}function broadcast(e){e.broadcastWatches&&e.broadcastWatches()}var specifierInfoCache=Object.create(null);function lookupSpecifierInfo(e){var t=JSON.stringify(e);return specifierInfoCache[t]||(specifierInfoCache[t]=Object.create(null))}function keyFieldsFnFromSpecifier(e){var t=lookupSpecifierInfo(e);return t.keyFieldsFn||(t.keyFieldsFn=function(n,r){var o=function(s,u){return r.readField(u,s)},a=r.keyObject=collectSpecifierPaths(e,function(s){var u=extractKeyPath(r.storeObject,s,o);return u===void 0&&n!==r.storeObject&&hasOwn.call(n,s[0])&&(u=extractKeyPath(n,s,extractKey)),__DEV__?invariant$1(u!==void 0,"Missing field '".concat(s.join("."),"' while extracting keyFields from ").concat(JSON.stringify(n))):invariant$1(u!==void 0,2),u});return"".concat(r.typename,":").concat(JSON.stringify(a))})}function keyArgsFnFromSpecifier(e){var t=lookupSpecifierInfo(e);return t.keyArgsFn||(t.keyArgsFn=function(n,r){var o=r.field,a=r.variables,s=r.fieldName,u=collectSpecifierPaths(e,function(c){var m=c[0],me=m.charAt(0);if(me==="@"){if(o&&isNonEmptyArray(o.directives)){var xe=m.slice(1),Ne=o.directives.find(function(vn){return vn.name.value===xe}),He=Ne&&argumentsObjectFromField(Ne,a);return He&&extractKeyPath(He,c.slice(1))}return}if(me==="$"){var Ye=m.slice(1);if(a&&hasOwn.call(a,Ye)){var Je=c.slice(0);return Je[0]=Ye,extractKeyPath(a,Je)}return}if(n)return extractKeyPath(n,c)}),l=JSON.stringify(u);return(n||l!=="{}")&&(s+=":"+l),s})}function collectSpecifierPaths(e,t){var n=new DeepMerger;return getSpecifierPaths(e).reduce(function(r,o){var a,s=t(o);if(s!==void 0){for(var u=o.length-1;u>=0;--u)s=(a={},a[o[u]]=s,a);r=n.merge(r,s)}return r},Object.create(null))}function getSpecifierPaths(e){var t=lookupSpecifierInfo(e);if(!t.paths){var n=t.paths=[],r=[];e.forEach(function(o,a){isArray(o)?(getSpecifierPaths(o).forEach(function(s){return n.push(r.concat(s))}),r.length=0):(r.push(o),isArray(e[a+1])||(n.push(r.slice(0)),r.length=0))})}return t.paths}function extractKey(e,t){return e[t]}function extractKeyPath(e,t,n){return n=n||extractKey,normalize$1(t.reduce(function r(o,a){return isArray(o)?o.map(function(s){return r(s,a)}):o&&n(o,a)},e))}function normalize$1(e){return isNonNullObject(e)?isArray(e)?e.map(normalize$1):collectSpecifierPaths(Object.keys(e).sort(),function(t){return extractKeyPath(e,t)}):e}getStoreKeyName.setStringify(canonicalStringify);function argsFromFieldSpecifier(e){return e.args!==void 0?e.args:e.field?argumentsObjectFromField(e.field,e.variables):null}var nullKeyFieldsFn=function(){},simpleKeyArgsFn=function(e,t){return t.fieldName},mergeTrueFn=function(e,t,n){var r=n.mergeObjects;return r(e,t)},mergeFalseFn=function(e,t){return t},Policies=function(){function e(t){this.config=t,this.typePolicies=Object.create(null),this.toBeAdded=Object.create(null),this.supertypeMap=new Map,this.fuzzySubtypes=new Map,this.rootIdsByTypename=Object.create(null),this.rootTypenamesById=Object.create(null),this.usingPossibleTypes=!1,this.config=__assign$1({dataIdFromObject:defaultDataIdFromObject},t),this.cache=this.config.cache,this.setRootTypename("Query"),this.setRootTypename("Mutation"),this.setRootTypename("Subscription"),t.possibleTypes&&this.addPossibleTypes(t.possibleTypes),t.typePolicies&&this.addTypePolicies(t.typePolicies)}return e.prototype.identify=function(t,n){var r,o=this,a=n&&(n.typename||((r=n.storeObject)===null||r===void 0?void 0:r.__typename))||t.__typename;if(a===this.rootTypenamesById.ROOT_QUERY)return["ROOT_QUERY"];for(var s=n&&n.storeObject||t,u=__assign$1(__assign$1({},n),{typename:a,storeObject:s,readField:n&&n.readField||function(){var xe=normalizeReadFieldOptions(arguments,s);return o.readField(xe,{store:o.cache.data,variables:xe.variables})}}),l,c=a&&this.getTypePolicy(a),m=c&&c.keyFn||this.config.dataIdFromObject;m;){var me=m(t,u);if(isArray(me))m=keyFieldsFnFromSpecifier(me);else{l=me;break}}return l=l?String(l):void 0,u.keyObject?[l,u.keyObject]:[l]},e.prototype.addTypePolicies=function(t){var n=this;Object.keys(t).forEach(function(r){var o=t[r],a=o.queryType,s=o.mutationType,u=o.subscriptionType,l=__rest(o,["queryType","mutationType","subscriptionType"]);a&&n.setRootTypename("Query",r),s&&n.setRootTypename("Mutation",r),u&&n.setRootTypename("Subscription",r),hasOwn.call(n.toBeAdded,r)?n.toBeAdded[r].push(l):n.toBeAdded[r]=[l]})},e.prototype.updateTypePolicy=function(t,n){var r=this,o=this.getTypePolicy(t),a=n.keyFields,s=n.fields;function u(l,c){l.merge=typeof c=="function"?c:c===!0?mergeTrueFn:c===!1?mergeFalseFn:l.merge}u(o,n.merge),o.keyFn=a===!1?nullKeyFieldsFn:isArray(a)?keyFieldsFnFromSpecifier(a):typeof a=="function"?a:o.keyFn,s&&Object.keys(s).forEach(function(l){var c=r.getFieldPolicy(t,l,!0),m=s[l];if(typeof m=="function")c.read=m;else{var me=m.keyArgs,xe=m.read,Ne=m.merge;c.keyFn=me===!1?simpleKeyArgsFn:isArray(me)?keyArgsFnFromSpecifier(me):typeof me=="function"?me:c.keyFn,typeof xe=="function"&&(c.read=xe),u(c,Ne)}c.read&&c.merge&&(c.keyFn=c.keyFn||simpleKeyArgsFn)})},e.prototype.setRootTypename=function(t,n){n===void 0&&(n=t);var r="ROOT_"+t.toUpperCase(),o=this.rootTypenamesById[r];n!==o&&(__DEV__?invariant$1(!o||o===t,"Cannot change root ".concat(t," __typename more than once")):invariant$1(!o||o===t,3),o&&delete this.rootIdsByTypename[o],this.rootIdsByTypename[n]=r,this.rootTypenamesById[r]=n)},e.prototype.addPossibleTypes=function(t){var n=this;this.usingPossibleTypes=!0,Object.keys(t).forEach(function(r){n.getSupertypeSet(r,!0),t[r].forEach(function(o){n.getSupertypeSet(o,!0).add(r);var a=o.match(TypeOrFieldNameRegExp);(!a||a[0]!==o)&&n.fuzzySubtypes.set(o,new RegExp(o))})})},e.prototype.getTypePolicy=function(t){var n=this;if(!hasOwn.call(this.typePolicies,t)){var r=this.typePolicies[t]=Object.create(null);r.fields=Object.create(null);var o=this.supertypeMap.get(t);o&&o.size&&o.forEach(function(s){var u=n.getTypePolicy(s),l=u.fields,c=__rest(u,["fields"]);Object.assign(r,c),Object.assign(r.fields,l)})}var a=this.toBeAdded[t];return a&&a.length&&a.splice(0).forEach(function(s){n.updateTypePolicy(t,s)}),this.typePolicies[t]},e.prototype.getFieldPolicy=function(t,n,r){if(t){var o=this.getTypePolicy(t).fields;return o[n]||r&&(o[n]=Object.create(null))}},e.prototype.getSupertypeSet=function(t,n){var r=this.supertypeMap.get(t);return!r&&n&&this.supertypeMap.set(t,r=new Set),r},e.prototype.fragmentMatches=function(t,n,r,o){var a=this;if(!t.typeCondition)return!0;if(!n)return!1;var s=t.typeCondition.name.value;if(n===s)return!0;if(this.usingPossibleTypes&&this.supertypeMap.has(s))for(var u=this.getSupertypeSet(n,!0),l=[u],c=function(He){var Ye=a.getSupertypeSet(He,!1);Ye&&Ye.size&&l.indexOf(Ye)<0&&l.push(Ye)},m=!!(r&&this.fuzzySubtypes.size),me=!1,xe=0;xe<l.length;++xe){var Ne=l[xe];if(Ne.has(s))return u.has(s)||(me&&__DEV__&&invariant$1.warn("Inferring subtype ".concat(n," of supertype ").concat(s)),u.add(s)),!0;Ne.forEach(c),m&&xe===l.length-1&&selectionSetMatchesResult(t.selectionSet,r,o)&&(m=!1,me=!0,this.fuzzySubtypes.forEach(function(He,Ye){var Je=n.match(He);Je&&Je[0]===n&&c(Ye)}))}return!1},e.prototype.hasKeyArgs=function(t,n){var r=this.getFieldPolicy(t,n,!1);return!!(r&&r.keyFn)},e.prototype.getStoreFieldName=function(t){var n=t.typename,r=t.fieldName,o=this.getFieldPolicy(n,r,!1),a,s=o&&o.keyFn;if(s&&n)for(var u={typename:n,fieldName:r,field:t.field||null,variables:t.variables},l=argsFromFieldSpecifier(t);s;){var c=s(l,u);if(isArray(c))s=keyArgsFnFromSpecifier(c);else{a=c||r;break}}return a===void 0&&(a=t.field?storeKeyNameFromField(t.field,t.variables):getStoreKeyName(r,argsFromFieldSpecifier(t))),a===!1?r:r===fieldNameFromStoreName(a)?a:r+":"+a},e.prototype.readField=function(t,n){var r=t.from;if(r){var o=t.field||t.fieldName;if(o){if(t.typename===void 0){var a=n.store.getFieldValue(r,"__typename");a&&(t.typename=a)}var s=this.getStoreFieldName(t),u=fieldNameFromStoreName(s),l=n.store.getFieldValue(r,s),c=this.getFieldPolicy(t.typename,u,!1),m=c&&c.read;if(m){var me=makeFieldFunctionOptions(this,r,t,n,n.store.getStorage(isReference(r)?r.__ref:r,s));return cacheSlot.withValue(this.cache,m,[l,me])}return l}}},e.prototype.getReadFunction=function(t,n){var r=this.getFieldPolicy(t,n,!1);return r&&r.read},e.prototype.getMergeFunction=function(t,n,r){var o=this.getFieldPolicy(t,n,!1),a=o&&o.merge;return!a&&r&&(o=this.getTypePolicy(r),a=o&&o.merge),a},e.prototype.runMergeFunction=function(t,n,r,o,a){var s=r.field,u=r.typename,l=r.merge;return l===mergeTrueFn?makeMergeObjectsFunction(o.store)(t,n):l===mergeFalseFn?n:(o.overwrite&&(t=void 0),l(t,n,makeFieldFunctionOptions(this,void 0,{typename:u,fieldName:s.name.value,field:s,variables:o.variables},o,a||Object.create(null))))},e}();function makeFieldFunctionOptions(e,t,n,r,o){var a=e.getStoreFieldName(n),s=fieldNameFromStoreName(a),u=n.variables||r.variables,l=r.store,c=l.toReference,m=l.canRead;return{args:argsFromFieldSpecifier(n),field:n.field||null,fieldName:s,storeFieldName:a,variables:u,isReference,toReference:c,storage:o,cache:e.cache,canRead:m,readField:function(){return e.readField(normalizeReadFieldOptions(arguments,t,u),r)},mergeObjects:makeMergeObjectsFunction(r.store)}}function normalizeReadFieldOptions(e,t,n){var r=e[0],o=e[1],a=e.length,s;return typeof r=="string"?s={fieldName:r,from:a>1?o:t}:(s=__assign$1({},r),hasOwn.call(s,"from")||(s.from=t)),__DEV__&&s.from===void 0&&__DEV__&&invariant$1.warn("Undefined 'from' passed to readField with arguments ".concat(stringifyForDisplay(Array.from(e)))),s.variables===void 0&&(s.variables=n),s}function makeMergeObjectsFunction(e){return function(t,n){if(isArray(t)||isArray(n))throw __DEV__?new InvariantError("Cannot automatically merge arrays"):new InvariantError(4);if(isNonNullObject(t)&&isNonNullObject(n)){var r=e.getFieldValue(t,"__typename"),o=e.getFieldValue(n,"__typename"),a=r&&o&&r!==o;if(a)return n;if(isReference(t)&&storeValueIsStoreObject(n))return e.merge(t.__ref,n),t;if(storeValueIsStoreObject(t)&&isReference(n))return e.merge(t,n.__ref),n;if(storeValueIsStoreObject(t)&&storeValueIsStoreObject(n))return __assign$1(__assign$1({},t),n)}return n}}function getContextFlavor(e,t,n){var r="".concat(t).concat(n),o=e.flavors.get(r);return o||e.flavors.set(r,o=e.clientOnly===t&&e.deferred===n?e:__assign$1(__assign$1({},e),{clientOnly:t,deferred:n})),o}var StoreWriter=function(){function e(t,n){this.cache=t,this.reader=n}return e.prototype.writeToStore=function(t,n){var r=this,o=n.query,a=n.result,s=n.dataId,u=n.variables,l=n.overwrite,c=getOperationDefinition(o),m=makeProcessedFieldsMerger();u=__assign$1(__assign$1({},getDefaultValues(c)),u);var me={store:t,written:Object.create(null),merge:function(Ne,He){return m.merge(Ne,He)},variables:u,varString:canonicalStringify(u),fragmentMap:createFragmentMap(getFragmentDefinitions(o)),overwrite:!!l,incomingById:new Map,clientOnly:!1,deferred:!1,flavors:new Map},xe=this.processSelectionSet({result:a||Object.create(null),dataId:s,selectionSet:c.selectionSet,mergeTree:{map:new Map},context:me});if(!isReference(xe))throw __DEV__?new InvariantError("Could not identify object ".concat(JSON.stringify(a))):new InvariantError(6);return me.incomingById.forEach(function(Ne,He){var Ye=Ne.storeObject,Je=Ne.mergeTree,vn=Ne.fieldNodeSet,La=makeReference(He);if(Je&&Je.map.size){var sr=r.applyMerges(Je,La,Ye,me);if(isReference(sr))return;Ye=sr}if(__DEV__&&!me.overwrite){var Zr=Object.create(null);vn.forEach(function(Hs){Hs.selectionSet&&(Zr[Hs.name.value]=!0)});var zs=function(Hs){return Zr[fieldNameFromStoreName(Hs)]===!0},za=function(Hs){var lc=Je&&Je.map.get(Hs);return Boolean(lc&&lc.info&&lc.info.merge)};Object.keys(Ye).forEach(function(Hs){zs(Hs)&&!za(Hs)&&warnAboutDataLoss(La,Ye,Hs,me.store)})}t.merge(He,Ye)}),t.retain(xe.__ref),xe},e.prototype.processSelectionSet=function(t){var n=this,r=t.dataId,o=t.result,a=t.selectionSet,s=t.context,u=t.mergeTree,l=this.cache.policies,c=Object.create(null),m=r&&l.rootTypenamesById[r]||getTypenameFromResult(o,a,s.fragmentMap)||r&&s.store.get(r,"__typename");typeof m=="string"&&(c.__typename=m);var me=function(){var sr=normalizeReadFieldOptions(arguments,c,s.variables);if(isReference(sr.from)){var Zr=s.incomingById.get(sr.from.__ref);if(Zr){var zs=l.readField(__assign$1(__assign$1({},sr),{from:Zr.storeObject}),s);if(zs!==void 0)return zs}}return l.readField(sr,s)},xe=new Set;this.flattenFields(a,o,s,m).forEach(function(sr,Zr){var zs,za=resultKeyNameFromField(Zr),Hs=o[za];if(xe.add(Zr),Hs!==void 0){var lc=l.getStoreFieldName({typename:m,fieldName:Zr.name.value,field:Zr,variables:sr.variables}),Ty=getChildMergeTree(u,lc),_y=n.processFieldValue(Hs,Zr,Zr.selectionSet?getContextFlavor(sr,!1,!1):sr,Ty),xy=void 0;Zr.selectionSet&&(isReference(_y)||storeValueIsStoreObject(_y))&&(xy=me("__typename",_y));var Bb=l.getMergeFunction(m,Zr.name.value,xy);Bb?Ty.info={field:Zr,typename:m,merge:Bb}:maybeRecycleChildMergeTree(u,lc),c=sr.merge(c,(zs={},zs[lc]=_y,zs))}else __DEV__&&!sr.clientOnly&&!sr.deferred&&!addTypenameToDocument.added(Zr)&&!l.getReadFunction(m,Zr.name.value)&&__DEV__&&invariant$1.error("Missing field '".concat(resultKeyNameFromField(Zr),"' while writing result ").concat(JSON.stringify(o,null,2)).substring(0,1e3))});try{var Ne=l.identify(o,{typename:m,selectionSet:a,fragmentMap:s.fragmentMap,storeObject:c,readField:me}),He=Ne[0],Ye=Ne[1];r=r||He,Ye&&(c=s.merge(c,Ye))}catch(sr){if(!r)throw sr}if(typeof r=="string"){var Je=makeReference(r),vn=s.written[r]||(s.written[r]=[]);if(vn.indexOf(a)>=0||(vn.push(a),this.reader&&this.reader.isFresh(o,Je,a,s)))return Je;var La=s.incomingById.get(r);return La?(La.storeObject=s.merge(La.storeObject,c),La.mergeTree=mergeMergeTrees(La.mergeTree,u),xe.forEach(function(sr){return La.fieldNodeSet.add(sr)})):s.incomingById.set(r,{storeObject:c,mergeTree:mergeTreeIsEmpty(u)?void 0:u,fieldNodeSet:xe}),Je}return c},e.prototype.processFieldValue=function(t,n,r,o){var a=this;return!n.selectionSet||t===null?__DEV__?cloneDeep(t):t:isArray(t)?t.map(function(s,u){var l=a.processFieldValue(s,n,r,getChildMergeTree(o,u));return maybeRecycleChildMergeTree(o,u),l}):this.processSelectionSet({result:t,selectionSet:n.selectionSet,context:r,mergeTree:o})},e.prototype.flattenFields=function(t,n,r,o){o===void 0&&(o=getTypenameFromResult(n,t,r.fragmentMap));var a=new Map,s=this.cache.policies,u=new Trie(!1);return function l(c,m){var me=u.lookup(c,m.clientOnly,m.deferred);me.visited||(me.visited=!0,c.selections.forEach(function(xe){if(shouldInclude(xe,r.variables)){var Ne=m.clientOnly,He=m.deferred;if(!(Ne&&He)&&isNonEmptyArray(xe.directives)&&xe.directives.forEach(function(vn){var La=vn.name.value;if(La==="client"&&(Ne=!0),La==="defer"){var sr=argumentsObjectFromField(vn,r.variables);(!sr||sr.if!==!1)&&(He=!0)}}),isField(xe)){var Ye=a.get(xe);Ye&&(Ne=Ne&&Ye.clientOnly,He=He&&Ye.deferred),a.set(xe,getContextFlavor(r,Ne,He))}else{var Je=getFragmentFromSelection(xe,r.fragmentMap);Je&&s.fragmentMatches(Je,o,n,r.variables)&&l(Je.selectionSet,getContextFlavor(r,Ne,He))}}}))}(t,r),a},e.prototype.applyMerges=function(t,n,r,o,a){var s,u=this;if(t.map.size&&!isReference(r)){var l=!isArray(r)&&(isReference(n)||storeValueIsStoreObject(n))?n:void 0,c=r;l&&!a&&(a=[isReference(l)?l.__ref:l]);var m,me=function(xe,Ne){return isArray(xe)?typeof Ne=="number"?xe[Ne]:void 0:o.store.getFieldValue(xe,String(Ne))};t.map.forEach(function(xe,Ne){var He=me(l,Ne),Ye=me(c,Ne);if(Ye!==void 0){a&&a.push(Ne);var Je=u.applyMerges(xe,He,Ye,o,a);Je!==Ye&&(m=m||new Map,m.set(Ne,Je)),a&&invariant$1(a.pop()===Ne)}}),m&&(r=isArray(c)?c.slice(0):__assign$1({},c),m.forEach(function(xe,Ne){r[Ne]=xe}))}return t.info?this.cache.policies.runMergeFunction(n,r,t.info,o,a&&(s=o.store).getStorage.apply(s,a)):r},e}(),emptyMergeTreePool=[];function getChildMergeTree(e,t){var n=e.map;return n.has(t)||n.set(t,emptyMergeTreePool.pop()||{map:new Map}),n.get(t)}function mergeMergeTrees(e,t){if(e===t||!t||mergeTreeIsEmpty(t))return e;if(!e||mergeTreeIsEmpty(e))return t;var n=e.info&&t.info?__assign$1(__assign$1({},e.info),t.info):e.info||t.info,r=e.map.size&&t.map.size,o=r?new Map:e.map.size?e.map:t.map,a={info:n,map:o};if(r){var s=new Set(t.map.keys());e.map.forEach(function(u,l){a.map.set(l,mergeMergeTrees(u,t.map.get(l))),s.delete(l)}),s.forEach(function(u){a.map.set(u,mergeMergeTrees(t.map.get(u),e.map.get(u)))})}return a}function mergeTreeIsEmpty(e){return!e||!(e.info||e.map.size)}function maybeRecycleChildMergeTree(e,t){var n=e.map,r=n.get(t);r&&mergeTreeIsEmpty(r)&&(emptyMergeTreePool.push(r),n.delete(t))}var warnings=new Set;function warnAboutDataLoss(e,t,n,r){var o=function(me){var xe=r.getFieldValue(me,n);return typeof xe=="object"&&xe},a=o(e);if(a){var s=o(t);if(!!s&&!isReference(a)&&!equal(a,s)&&!Object.keys(a).every(function(me){return r.getFieldValue(s,me)!==void 0})){var u=r.getFieldValue(e,"__typename")||r.getFieldValue(t,"__typename"),l=fieldNameFromStoreName(n),c="".concat(u,".").concat(l);if(!warnings.has(c)){warnings.add(c);var m=[];!isArray(a)&&!isArray(s)&&[a,s].forEach(function(me){var xe=r.getFieldValue(me,"__typename");typeof xe=="string"&&!m.includes(xe)&&m.push(xe)}),__DEV__&&invariant$1.warn("Cache data may be lost when replacing the ".concat(l," field of a ").concat(u,` object.

To address this problem (which is not a bug in Apollo Client), `).concat(m.length?"either ensure all objects of type "+m.join(" and ")+" have an ID or a custom merge function, or ":"","define a custom merge function for the ").concat(c,` field, so InMemoryCache can safely merge these objects:

  existing: `).concat(JSON.stringify(a).slice(0,1e3),`
  incoming: `).concat(JSON.stringify(s).slice(0,1e3),`

For more information about these options, please refer to the documentation:

  * Ensuring entity objects have IDs: https://go.apollo.dev/c/generating-unique-identifiers
  * Defining custom merge functions: https://go.apollo.dev/c/merging-non-normalized-objects
`))}}}}var InMemoryCache=function(e){__extends(t,e);function t(n){n===void 0&&(n={});var r=e.call(this)||this;return r.watches=new Set,r.typenameDocumentCache=new Map,r.makeVar=makeVar,r.txCount=0,r.config=normalizeConfig(n),r.addTypename=!!r.config.addTypename,r.policies=new Policies({cache:r,dataIdFromObject:r.config.dataIdFromObject,possibleTypes:r.config.possibleTypes,typePolicies:r.config.typePolicies}),r.init(),r}return t.prototype.init=function(){var n=this.data=new EntityStore.Root({policies:this.policies,resultCaching:this.config.resultCaching});this.optimisticData=n.stump,this.resetResultCache()},t.prototype.resetResultCache=function(n){var r=this,o=this.storeReader;this.storeWriter=new StoreWriter(this,this.storeReader=new StoreReader({cache:this,addTypename:this.addTypename,resultCacheMaxSize:this.config.resultCacheMaxSize,canonizeResults:shouldCanonizeResults(this.config),canon:n?void 0:o&&o.canon})),this.maybeBroadcastWatch=wrap(function(a,s){return r.broadcastWatch(a,s)},{max:this.config.resultCacheMaxSize,makeCacheKey:function(a){var s=a.optimistic?r.optimisticData:r.data;if(supportsResultCaching(s)){var u=a.optimistic,l=a.rootId,c=a.variables;return s.makeCacheKey(a.query,a.callback,canonicalStringify({optimistic:u,rootId:l,variables:c}))}}}),new Set([this.data.group,this.optimisticData.group]).forEach(function(a){return a.resetCaching()})},t.prototype.restore=function(n){return this.init(),n&&this.data.replace(n),this},t.prototype.extract=function(n){return n===void 0&&(n=!1),(n?this.optimisticData:this.data).extract()},t.prototype.read=function(n){var r=n.returnPartialData,o=r===void 0?!1:r;try{return this.storeReader.diffQueryAgainstStore(__assign$1(__assign$1({},n),{store:n.optimistic?this.optimisticData:this.data,config:this.config,returnPartialData:o})).result||null}catch(a){if(a instanceof MissingFieldError)return null;throw a}},t.prototype.write=function(n){try{return++this.txCount,this.storeWriter.writeToStore(this.data,n)}finally{!--this.txCount&&n.broadcast!==!1&&this.broadcastWatches()}},t.prototype.modify=function(n){if(hasOwn.call(n,"id")&&!n.id)return!1;var r=n.optimistic?this.optimisticData:this.data;try{return++this.txCount,r.modify(n.id||"ROOT_QUERY",n.fields)}finally{!--this.txCount&&n.broadcast!==!1&&this.broadcastWatches()}},t.prototype.diff=function(n){return this.storeReader.diffQueryAgainstStore(__assign$1(__assign$1({},n),{store:n.optimistic?this.optimisticData:this.data,rootId:n.id||"ROOT_QUERY",config:this.config}))},t.prototype.watch=function(n){var r=this;return this.watches.size||recallCache(this),this.watches.add(n),n.immediate&&this.maybeBroadcastWatch(n),function(){r.watches.delete(n)&&!r.watches.size&&forgetCache(r),r.maybeBroadcastWatch.forget(n)}},t.prototype.gc=function(n){canonicalStringify.reset();var r=this.optimisticData.gc();return n&&!this.txCount&&(n.resetResultCache?this.resetResultCache(n.resetResultIdentities):n.resetResultIdentities&&this.storeReader.resetCanon()),r},t.prototype.retain=function(n,r){return(r?this.optimisticData:this.data).retain(n)},t.prototype.release=function(n,r){return(r?this.optimisticData:this.data).release(n)},t.prototype.identify=function(n){if(isReference(n))return n.__ref;try{return this.policies.identify(n)[0]}catch(r){__DEV__&&invariant$1.warn(r)}},t.prototype.evict=function(n){if(!n.id){if(hasOwn.call(n,"id"))return!1;n=__assign$1(__assign$1({},n),{id:"ROOT_QUERY"})}try{return++this.txCount,this.optimisticData.evict(n,this.data)}finally{!--this.txCount&&n.broadcast!==!1&&this.broadcastWatches()}},t.prototype.reset=function(n){var r=this;return this.init(),canonicalStringify.reset(),n&&n.discardWatches?(this.watches.forEach(function(o){return r.maybeBroadcastWatch.forget(o)}),this.watches.clear(),forgetCache(this)):this.broadcastWatches(),Promise.resolve()},t.prototype.removeOptimistic=function(n){var r=this.optimisticData.removeLayer(n);r!==this.optimisticData&&(this.optimisticData=r,this.broadcastWatches())},t.prototype.batch=function(n){var r=this,o=n.update,a=n.optimistic,s=a===void 0?!0:a,u=n.removeOptimistic,l=n.onWatchUpdated,c,m=function(xe){var Ne=r,He=Ne.data,Ye=Ne.optimisticData;++r.txCount,xe&&(r.data=r.optimisticData=xe);try{return c=o(r)}finally{--r.txCount,r.data=He,r.optimisticData=Ye}},me=new Set;return l&&!this.txCount&&this.broadcastWatches(__assign$1(__assign$1({},n),{onWatchUpdated:function(xe){return me.add(xe),!1}})),typeof s=="string"?this.optimisticData=this.optimisticData.addLayer(s,m):s===!1?m(this.data):m(),typeof u=="string"&&(this.optimisticData=this.optimisticData.removeLayer(u)),l&&me.size?(this.broadcastWatches(__assign$1(__assign$1({},n),{onWatchUpdated:function(xe,Ne){var He=l.call(this,xe,Ne);return He!==!1&&me.delete(xe),He}})),me.size&&me.forEach(function(xe){return r.maybeBroadcastWatch.dirty(xe)})):this.broadcastWatches(n),c},t.prototype.performTransaction=function(n,r){return this.batch({update:n,optimistic:r||r!==null})},t.prototype.transformDocument=function(n){if(this.addTypename){var r=this.typenameDocumentCache.get(n);return r||(r=addTypenameToDocument(n),this.typenameDocumentCache.set(n,r),this.typenameDocumentCache.set(r,r)),r}return n},t.prototype.broadcastWatches=function(n){var r=this;this.txCount||this.watches.forEach(function(o){return r.maybeBroadcastWatch(o,n)})},t.prototype.broadcastWatch=function(n,r){var o=n.lastDiff,a=this.diff(n);r&&(n.optimistic&&typeof r.optimistic=="string"&&(a.fromOptimisticTransaction=!0),r.onWatchUpdated&&r.onWatchUpdated.call(this,n,a,o)===!1)||(!o||!equal(o.result,a.result))&&n.callback(n.lastDiff=a,o)},t}(ApolloCache);function isApolloError(e){return e.hasOwnProperty("graphQLErrors")}var generateErrorMessage=function(e){var t="";if(isNonEmptyArray(e.graphQLErrors)||isNonEmptyArray(e.clientErrors)){var n=(e.graphQLErrors||[]).concat(e.clientErrors||[]);n.forEach(function(r){var o=r?r.message:"Error message not found.";t+="".concat(o,`
`)})}return e.networkError&&(t+="".concat(e.networkError.message,`
`)),t=t.replace(/\n$/,""),t},ApolloError=function(e){__extends(t,e);function t(n){var r=n.graphQLErrors,o=n.clientErrors,a=n.networkError,s=n.errorMessage,u=n.extraInfo,l=e.call(this,s)||this;return l.graphQLErrors=r||[],l.clientErrors=o||[],l.networkError=a||null,l.message=s||generateErrorMessage(l),l.extraInfo=u,l.__proto__=t.prototype,l}return t}(Error),NetworkStatus;(function(e){e[e.loading=1]="loading",e[e.setVariables=2]="setVariables",e[e.fetchMore=3]="fetchMore",e[e.refetch=4]="refetch",e[e.poll=6]="poll",e[e.ready=7]="ready",e[e.error=8]="error"})(NetworkStatus||(NetworkStatus={}));function isNetworkRequestInFlight(e){return e?e<7:!1}var assign=Object.assign,hasOwnProperty$1=Object.hasOwnProperty,ObservableQuery=function(e){__extends(t,e);function t(n){var r=n.queryManager,o=n.queryInfo,a=n.options,s=e.call(this,function(Je){try{var vn=Je._subscription._observer;vn&&!vn.error&&(vn.error=defaultSubscriptionObserverErrorCallback)}catch{}var La=!s.observers.size;s.observers.add(Je);var sr=s.last;return sr&&sr.error?Je.error&&Je.error(sr.error):sr&&sr.result&&Je.next&&Je.next(sr.result),La&&s.reobserve().catch(function(){}),function(){s.observers.delete(Je)&&!s.observers.size&&s.tearDownQuery()}})||this;s.observers=new Set,s.subscriptions=new Set,s.queryInfo=o,s.queryManager=r,s.isTornDown=!1;var u=r.defaultOptions.watchQuery,l=u===void 0?{}:u,c=l.fetchPolicy,m=c===void 0?"cache-first":c,me=a.fetchPolicy,xe=me===void 0?m:me,Ne=a.initialFetchPolicy,He=Ne===void 0?xe==="standby"?m:xe:Ne;s.options=__assign$1(__assign$1({},a),{initialFetchPolicy:He,fetchPolicy:xe}),s.queryId=o.queryId||r.generateQueryId();var Ye=getOperationDefinition(s.query);return s.queryName=Ye&&Ye.name&&Ye.name.value,s}return Object.defineProperty(t.prototype,"query",{get:function(){return this.queryManager.transform(this.options.query).document},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"variables",{get:function(){return this.options.variables},enumerable:!1,configurable:!0}),t.prototype.result=function(){var n=this;return new Promise(function(r,o){var a={next:function(u){r(u),n.observers.delete(a),n.observers.size||n.queryManager.removeQuery(n.queryId),setTimeout(function(){s.unsubscribe()},0)},error:o},s=n.subscribe(a)})},t.prototype.getCurrentResult=function(n){n===void 0&&(n=!0);var r=this.getLastResult(!0),o=this.queryInfo.networkStatus||r&&r.networkStatus||NetworkStatus.ready,a=__assign$1(__assign$1({},r),{loading:isNetworkRequestInFlight(o),networkStatus:o}),s=this.options.fetchPolicy,u=s===void 0?"cache-first":s;if(!(u==="network-only"||u==="no-cache"||u==="standby"||this.queryManager.transform(this.options.query).hasForcedResolvers)){var l=this.queryInfo.getDiff();(l.complete||this.options.returnPartialData)&&(a.data=l.result),equal(a.data,{})&&(a.data=void 0),l.complete?(delete a.partial,l.complete&&a.networkStatus===NetworkStatus.loading&&(u==="cache-first"||u==="cache-only")&&(a.networkStatus=NetworkStatus.ready,a.loading=!1)):a.partial=!0,__DEV__&&!l.complete&&!this.options.partialRefetch&&!a.loading&&!a.data&&!a.error&&logMissingFieldErrors(l.missing)}return n&&this.updateLastResult(a),a},t.prototype.isDifferentFromLastResult=function(n){return!this.last||!equal(this.last.result,n)},t.prototype.getLast=function(n,r){var o=this.last;if(o&&o[n]&&(!r||equal(o.variables,this.variables)))return o[n]},t.prototype.getLastResult=function(n){return this.getLast("result",n)},t.prototype.getLastError=function(n){return this.getLast("error",n)},t.prototype.resetLastResults=function(){delete this.last,this.isTornDown=!1},t.prototype.resetQueryStoreErrors=function(){this.queryManager.resetErrors(this.queryId)},t.prototype.refetch=function(n){var r,o={pollInterval:0},a=this.options.fetchPolicy;if(a==="cache-and-network"?o.fetchPolicy=a:a==="no-cache"?o.fetchPolicy="no-cache":o.fetchPolicy="network-only",__DEV__&&n&&hasOwnProperty$1.call(n,"variables")){var s=getQueryDefinition(this.query),u=s.variableDefinitions;(!u||!u.some(function(l){return l.variable.name.value==="variables"}))&&__DEV__&&invariant$1.warn("Called refetch(".concat(JSON.stringify(n),") for query ").concat(((r=s.name)===null||r===void 0?void 0:r.value)||JSON.stringify(s),`, which does not declare a $variables variable.
Did you mean to call refetch(variables) instead of refetch({ variables })?`))}return n&&!equal(this.options.variables,n)&&(o.variables=this.options.variables=__assign$1(__assign$1({},this.options.variables),n)),this.queryInfo.resetLastWrite(),this.reobserve(o,NetworkStatus.refetch)},t.prototype.fetchMore=function(n){var r=this,o=__assign$1(__assign$1({},n.query?n:__assign$1(__assign$1(__assign$1(__assign$1({},this.options),{query:this.query}),n),{variables:__assign$1(__assign$1({},this.options.variables),n.variables)})),{fetchPolicy:"no-cache"}),a=this.queryManager.generateQueryId(),s=this.queryInfo,u=s.networkStatus;s.networkStatus=NetworkStatus.fetchMore,o.notifyOnNetworkStatusChange&&this.observe();var l=new Set;return this.queryManager.fetchQuery(a,o,NetworkStatus.fetchMore).then(function(c){return r.queryManager.removeQuery(a),s.networkStatus===NetworkStatus.fetchMore&&(s.networkStatus=u),r.queryManager.cache.batch({update:function(m){var me=n.updateQuery;me?m.updateQuery({query:r.query,variables:r.variables,returnPartialData:!0,optimistic:!1},function(xe){return me(xe,{fetchMoreResult:c.data,variables:o.variables})}):m.writeQuery({query:o.query,variables:o.variables,data:c.data})},onWatchUpdated:function(m){l.add(m.query)}}),c}).finally(function(){l.has(r.query)||reobserveCacheFirst(r)})},t.prototype.subscribeToMore=function(n){var r=this,o=this.queryManager.startGraphQLSubscription({query:n.document,variables:n.variables,context:n.context}).subscribe({next:function(a){var s=n.updateQuery;s&&r.updateQuery(function(u,l){var c=l.variables;return s(u,{subscriptionData:a,variables:c})})},error:function(a){if(n.onError){n.onError(a);return}__DEV__&&invariant$1.error("Unhandled GraphQL subscription error",a)}});return this.subscriptions.add(o),function(){r.subscriptions.delete(o)&&o.unsubscribe()}},t.prototype.setOptions=function(n){return this.reobserve(n)},t.prototype.setVariables=function(n){return equal(this.variables,n)?this.observers.size?this.result():Promise.resolve():(this.options.variables=n,this.observers.size?this.reobserve({fetchPolicy:this.options.initialFetchPolicy,variables:n},NetworkStatus.setVariables):Promise.resolve())},t.prototype.updateQuery=function(n){var r=this.queryManager,o=r.cache.diff({query:this.options.query,variables:this.variables,returnPartialData:!0,optimistic:!1}).result,a=n(o,{variables:this.variables});a&&(r.cache.writeQuery({query:this.options.query,data:a,variables:this.variables}),r.broadcastQueries())},t.prototype.startPolling=function(n){this.options.pollInterval=n,this.updatePolling()},t.prototype.stopPolling=function(){this.options.pollInterval=0,this.updatePolling()},t.prototype.applyNextFetchPolicy=function(n,r){if(r.nextFetchPolicy){var o=r.fetchPolicy,a=o===void 0?"cache-first":o,s=r.initialFetchPolicy,u=s===void 0?a:s;a==="standby"||(typeof r.nextFetchPolicy=="function"?r.fetchPolicy=r.nextFetchPolicy(a,{reason:n,options:r,observable:this,initialFetchPolicy:u}):n==="variables-changed"?r.fetchPolicy=u:r.fetchPolicy=r.nextFetchPolicy)}return r.fetchPolicy},t.prototype.fetch=function(n,r){return this.queryManager.setObservableQuery(this),this.queryManager.fetchQueryObservable(this.queryId,n,r)},t.prototype.updatePolling=function(){var n=this;if(!this.queryManager.ssrMode){var r=this,o=r.pollingInfo,a=r.options.pollInterval;if(!a){o&&(clearTimeout(o.timeout),delete this.pollingInfo);return}if(!(o&&o.interval===a)){__DEV__?invariant$1(a,"Attempted to start a polling query without a polling interval."):invariant$1(a,10);var s=o||(this.pollingInfo={});s.interval=a;var u=function(){n.pollingInfo&&(isNetworkRequestInFlight(n.queryInfo.networkStatus)?l():n.reobserve({fetchPolicy:"network-only"},NetworkStatus.poll).then(l,l))},l=function(){var c=n.pollingInfo;c&&(clearTimeout(c.timeout),c.timeout=setTimeout(u,c.interval))};l()}}},t.prototype.updateLastResult=function(n,r){return r===void 0&&(r=this.variables),this.last=__assign$1(__assign$1({},this.last),{result:this.queryManager.assumeImmutableResults?n:cloneDeep(n),variables:r}),isNonEmptyArray(n.errors)||delete this.last.error,this.last},t.prototype.reobserve=function(n,r){var o=this;this.isTornDown=!1;var a=r===NetworkStatus.refetch||r===NetworkStatus.fetchMore||r===NetworkStatus.poll,s=this.options.variables,u=this.options.fetchPolicy,l=compact(this.options,n||{}),c=a?l:assign(this.options,l);a||(this.updatePolling(),n&&n.variables&&!equal(n.variables,s)&&c.fetchPolicy!=="standby"&&c.fetchPolicy===u&&(this.applyNextFetchPolicy("variables-changed",c),r===void 0&&(r=NetworkStatus.setVariables)));var m=c.variables&&__assign$1({},c.variables),me=this.fetch(c,r),xe={next:function(Ne){o.reportResult(Ne,m)},error:function(Ne){o.reportError(Ne,m)}};return a||(this.concast&&this.observer&&this.concast.removeObserver(this.observer),this.concast=me,this.observer=xe),me.addObserver(xe),me.promise},t.prototype.observe=function(){this.reportResult(this.getCurrentResult(!1),this.variables)},t.prototype.reportResult=function(n,r){var o=this.getLastError();(o||this.isDifferentFromLastResult(n))&&((o||!n.partial||this.options.returnPartialData)&&this.updateLastResult(n,r),iterateObserversSafely(this.observers,"next",n))},t.prototype.reportError=function(n,r){var o=__assign$1(__assign$1({},this.getLastResult()),{error:n,errors:n.graphQLErrors,networkStatus:NetworkStatus.error,loading:!1});this.updateLastResult(o,r),iterateObserversSafely(this.observers,"error",this.last.error=n)},t.prototype.hasObservers=function(){return this.observers.size>0},t.prototype.tearDownQuery=function(){this.isTornDown||(this.concast&&this.observer&&(this.concast.removeObserver(this.observer),delete this.concast,delete this.observer),this.stopPolling(),this.subscriptions.forEach(function(n){return n.unsubscribe()}),this.subscriptions.clear(),this.queryManager.stopQuery(this.queryId),this.observers.clear(),this.isTornDown=!0)},t}(Observable);fixObservableSubclass(ObservableQuery);function reobserveCacheFirst(e){var t=e.options,n=t.fetchPolicy,r=t.nextFetchPolicy;return n==="cache-and-network"||n==="network-only"?e.reobserve({fetchPolicy:"cache-first",nextFetchPolicy:function(){return this.nextFetchPolicy=r,typeof r=="function"?r.apply(this,arguments):n}}):e.reobserve()}function defaultSubscriptionObserverErrorCallback(e){__DEV__&&invariant$1.error("Unhandled error",e.message,e.stack)}function logMissingFieldErrors(e){__DEV__&&e&&__DEV__&&invariant$1.debug("Missing cache result fields: ".concat(JSON.stringify(e)),e)}var LocalState=function(){function e(t){var n=t.cache,r=t.client,o=t.resolvers,a=t.fragmentMatcher;this.cache=n,r&&(this.client=r),o&&this.addResolvers(o),a&&this.setFragmentMatcher(a)}return e.prototype.addResolvers=function(t){var n=this;this.resolvers=this.resolvers||{},Array.isArray(t)?t.forEach(function(r){n.resolvers=mergeDeep(n.resolvers,r)}):this.resolvers=mergeDeep(this.resolvers,t)},e.prototype.setResolvers=function(t){this.resolvers={},this.addResolvers(t)},e.prototype.getResolvers=function(){return this.resolvers||{}},e.prototype.runResolvers=function(t){var n=t.document,r=t.remoteResult,o=t.context,a=t.variables,s=t.onlyRunForcedResolvers,u=s===void 0?!1:s;return __awaiter(this,void 0,void 0,function(){return __generator(this,function(l){return n?[2,this.resolveDocument(n,r.data,o,a,this.fragmentMatcher,u).then(function(c){return __assign$1(__assign$1({},r),{data:c.result})})]:[2,r]})})},e.prototype.setFragmentMatcher=function(t){this.fragmentMatcher=t},e.prototype.getFragmentMatcher=function(){return this.fragmentMatcher},e.prototype.clientQuery=function(t){return hasDirectives(["client"],t)&&this.resolvers?t:null},e.prototype.serverQuery=function(t){return removeClientSetsFromDocument(t)},e.prototype.prepareContext=function(t){var n=this.cache;return __assign$1(__assign$1({},t),{cache:n,getCacheKey:function(r){return n.identify(r)}})},e.prototype.addExportedVariables=function(t,n,r){return n===void 0&&(n={}),r===void 0&&(r={}),__awaiter(this,void 0,void 0,function(){return __generator(this,function(o){return t?[2,this.resolveDocument(t,this.buildRootValueFromCache(t,n)||{},this.prepareContext(r),n).then(function(a){return __assign$1(__assign$1({},n),a.exportedVariables)})]:[2,__assign$1({},n)]})})},e.prototype.shouldForceResolvers=function(t){var n=!1;return visit(t,{Directive:{enter:function(r){if(r.name.value==="client"&&r.arguments&&(n=r.arguments.some(function(o){return o.name.value==="always"&&o.value.kind==="BooleanValue"&&o.value.value===!0}),n))return BREAK}}}),n},e.prototype.buildRootValueFromCache=function(t,n){return this.cache.diff({query:buildQueryFromSelectionSet(t),variables:n,returnPartialData:!0,optimistic:!1}).result},e.prototype.resolveDocument=function(t,n,r,o,a,s){return r===void 0&&(r={}),o===void 0&&(o={}),a===void 0&&(a=function(){return!0}),s===void 0&&(s=!1),__awaiter(this,void 0,void 0,function(){var u,l,c,m,me,xe,Ne,He,Ye;return __generator(this,function(Je){return u=getMainDefinition(t),l=getFragmentDefinitions(t),c=createFragmentMap(l),m=u.operation,me=m?m.charAt(0).toUpperCase()+m.slice(1):"Query",xe=this,Ne=xe.cache,He=xe.client,Ye={fragmentMap:c,context:__assign$1(__assign$1({},r),{cache:Ne,client:He}),variables:o,fragmentMatcher:a,defaultOperationType:me,exportedVariables:{},onlyRunForcedResolvers:s},[2,this.resolveSelectionSet(u.selectionSet,n,Ye).then(function(vn){return{result:vn,exportedVariables:Ye.exportedVariables}})]})})},e.prototype.resolveSelectionSet=function(t,n,r){return __awaiter(this,void 0,void 0,function(){var o,a,s,u,l,c=this;return __generator(this,function(m){return o=r.fragmentMap,a=r.context,s=r.variables,u=[n],l=function(me){return __awaiter(c,void 0,void 0,function(){var xe,Ne;return __generator(this,function(He){return shouldInclude(me,s)?isField(me)?[2,this.resolveField(me,n,r).then(function(Ye){var Je;typeof Ye!="undefined"&&u.push((Je={},Je[resultKeyNameFromField(me)]=Ye,Je))})]:(isInlineFragment(me)?xe=me:(xe=o[me.name.value],__DEV__?invariant$1(xe,"No fragment named ".concat(me.name.value)):invariant$1(xe,9)),xe&&xe.typeCondition&&(Ne=xe.typeCondition.name.value,r.fragmentMatcher(n,Ne,a))?[2,this.resolveSelectionSet(xe.selectionSet,n,r).then(function(Ye){u.push(Ye)})]:[2]):[2]})})},[2,Promise.all(t.selections.map(l)).then(function(){return mergeDeepArray(u)})]})})},e.prototype.resolveField=function(t,n,r){return __awaiter(this,void 0,void 0,function(){var o,a,s,u,l,c,m,me,xe,Ne=this;return __generator(this,function(He){return o=r.variables,a=t.name.value,s=resultKeyNameFromField(t),u=a!==s,l=n[s]||n[a],c=Promise.resolve(l),(!r.onlyRunForcedResolvers||this.shouldForceResolvers(t))&&(m=n.__typename||r.defaultOperationType,me=this.resolvers&&this.resolvers[m],me&&(xe=me[u?a:s],xe&&(c=Promise.resolve(cacheSlot.withValue(this.cache,xe,[n,argumentsObjectFromField(t,o),r.context,{field:t,fragmentMap:r.fragmentMap}]))))),[2,c.then(function(Ye){if(Ye===void 0&&(Ye=l),t.directives&&t.directives.forEach(function(Je){Je.name.value==="export"&&Je.arguments&&Je.arguments.forEach(function(vn){vn.name.value==="as"&&vn.value.kind==="StringValue"&&(r.exportedVariables[vn.value.value]=Ye)})}),!t.selectionSet||Ye==null)return Ye;if(Array.isArray(Ye))return Ne.resolveSubSelectedArray(t,Ye,r);if(t.selectionSet)return Ne.resolveSelectionSet(t.selectionSet,Ye,r)})]})})},e.prototype.resolveSubSelectedArray=function(t,n,r){var o=this;return Promise.all(n.map(function(a){if(a===null)return null;if(Array.isArray(a))return o.resolveSubSelectedArray(t,a,r);if(t.selectionSet)return o.resolveSelectionSet(t.selectionSet,a,r)}))},e}(),destructiveMethodCounts=new(canUseWeakMap?WeakMap:Map);function wrapDestructiveCacheMethod(e,t){var n=e[t];typeof n=="function"&&(e[t]=function(){return destructiveMethodCounts.set(e,(destructiveMethodCounts.get(e)+1)%1e15),n.apply(this,arguments)})}function cancelNotifyTimeout(e){e.notifyTimeout&&(clearTimeout(e.notifyTimeout),e.notifyTimeout=void 0)}var QueryInfo=function(){function e(t,n){n===void 0&&(n=t.generateQueryId()),this.queryId=n,this.listeners=new Set,this.document=null,this.lastRequestId=1,this.subscriptions=new Set,this.stopped=!1,this.dirty=!1,this.observableQuery=null;var r=this.cache=t.cache;destructiveMethodCounts.has(r)||(destructiveMethodCounts.set(r,0),wrapDestructiveCacheMethod(r,"evict"),wrapDestructiveCacheMethod(r,"modify"),wrapDestructiveCacheMethod(r,"reset"))}return e.prototype.init=function(t){var n=t.networkStatus||NetworkStatus.loading;return this.variables&&this.networkStatus!==NetworkStatus.loading&&!equal(this.variables,t.variables)&&(n=NetworkStatus.setVariables),equal(t.variables,this.variables)||(this.lastDiff=void 0),Object.assign(this,{document:t.document,variables:t.variables,networkError:null,graphQLErrors:this.graphQLErrors||[],networkStatus:n}),t.observableQuery&&this.setObservableQuery(t.observableQuery),t.lastRequestId&&(this.lastRequestId=t.lastRequestId),this},e.prototype.reset=function(){cancelNotifyTimeout(this),this.lastDiff=void 0,this.dirty=!1},e.prototype.getDiff=function(t){t===void 0&&(t=this.variables);var n=this.getDiffOptions(t);if(this.lastDiff&&equal(n,this.lastDiff.options))return this.lastDiff.diff;this.updateWatch(this.variables=t);var r=this.observableQuery;if(r&&r.options.fetchPolicy==="no-cache")return{complete:!1};var o=this.cache.diff(n);return this.updateLastDiff(o,n),o},e.prototype.updateLastDiff=function(t,n){this.lastDiff=t?{diff:t,options:n||this.getDiffOptions()}:void 0},e.prototype.getDiffOptions=function(t){var n;return t===void 0&&(t=this.variables),{query:this.document,variables:t,returnPartialData:!0,optimistic:!0,canonizeResults:(n=this.observableQuery)===null||n===void 0?void 0:n.options.canonizeResults}},e.prototype.setDiff=function(t){var n=this,r=this.lastDiff&&this.lastDiff.diff;this.updateLastDiff(t),!this.dirty&&!equal(r&&r.result,t&&t.result)&&(this.dirty=!0,this.notifyTimeout||(this.notifyTimeout=setTimeout(function(){return n.notify()},0)))},e.prototype.setObservableQuery=function(t){var n=this;t!==this.observableQuery&&(this.oqListener&&this.listeners.delete(this.oqListener),this.observableQuery=t,t?(t.queryInfo=this,this.listeners.add(this.oqListener=function(){var r=n.getDiff();r.fromOptimisticTransaction?t.observe():reobserveCacheFirst(t)})):delete this.oqListener)},e.prototype.notify=function(){var t=this;cancelNotifyTimeout(this),this.shouldNotify()&&this.listeners.forEach(function(n){return n(t)}),this.dirty=!1},e.prototype.shouldNotify=function(){if(!this.dirty||!this.listeners.size)return!1;if(isNetworkRequestInFlight(this.networkStatus)&&this.observableQuery){var t=this.observableQuery.options.fetchPolicy;if(t!=="cache-only"&&t!=="cache-and-network")return!1}return!0},e.prototype.stop=function(){if(!this.stopped){this.stopped=!0,this.reset(),this.cancel(),this.cancel=e.prototype.cancel,this.subscriptions.forEach(function(n){return n.unsubscribe()});var t=this.observableQuery;t&&t.stopPolling()}},e.prototype.cancel=function(){},e.prototype.updateWatch=function(t){var n=this;t===void 0&&(t=this.variables);var r=this.observableQuery;if(!(r&&r.options.fetchPolicy==="no-cache")){var o=__assign$1(__assign$1({},this.getDiffOptions(t)),{watcher:this,callback:function(a){return n.setDiff(a)}});(!this.lastWatch||!equal(o,this.lastWatch))&&(this.cancel(),this.cancel=this.cache.watch(this.lastWatch=o))}},e.prototype.resetLastWrite=function(){this.lastWrite=void 0},e.prototype.shouldWrite=function(t,n){var r=this.lastWrite;return!(r&&r.dmCount===destructiveMethodCounts.get(this.cache)&&equal(n,r.variables)&&equal(t.data,r.result.data))},e.prototype.markResult=function(t,n,r){var o=this;this.graphQLErrors=isNonEmptyArray(t.errors)?t.errors:[],this.reset(),n.fetchPolicy==="no-cache"?this.updateLastDiff({result:t.data,complete:!0},this.getDiffOptions(n.variables)):r!==0&&(shouldWriteResult(t,n.errorPolicy)?this.cache.performTransaction(function(a){if(o.shouldWrite(t,n.variables))a.writeQuery({query:o.document,data:t.data,variables:n.variables,overwrite:r===1}),o.lastWrite={result:t,variables:n.variables,dmCount:destructiveMethodCounts.get(o.cache)};else if(o.lastDiff&&o.lastDiff.diff.complete){t.data=o.lastDiff.diff.result;return}var s=o.getDiffOptions(n.variables),u=a.diff(s);o.stopped||o.updateWatch(n.variables),o.updateLastDiff(u,s),u.complete&&(t.data=u.result)}):this.lastWrite=void 0)},e.prototype.markReady=function(){return this.networkError=null,this.networkStatus=NetworkStatus.ready},e.prototype.markError=function(t){return this.networkStatus=NetworkStatus.error,this.lastWrite=void 0,this.reset(),t.graphQLErrors&&(this.graphQLErrors=t.graphQLErrors),t.networkError&&(this.networkError=t.networkError),t},e}();function shouldWriteResult(e,t){t===void 0&&(t="none");var n=t==="ignore"||t==="all",r=!graphQLResultHasError(e);return!r&&n&&e.data&&(r=!0),r}var hasOwnProperty=Object.prototype.hasOwnProperty,QueryManager=function(){function e(t){var n=t.cache,r=t.link,o=t.defaultOptions,a=t.queryDeduplication,s=a===void 0?!1:a,u=t.onBroadcast,l=t.ssrMode,c=l===void 0?!1:l,m=t.clientAwareness,me=m===void 0?{}:m,xe=t.localState,Ne=t.assumeImmutableResults;this.clientAwareness={},this.queries=new Map,this.fetchCancelFns=new Map,this.transformCache=new(canUseWeakMap?WeakMap:Map),this.queryIdCounter=1,this.requestIdCounter=1,this.mutationIdCounter=1,this.inFlightLinkObservables=new Map,this.cache=n,this.link=r,this.defaultOptions=o||Object.create(null),this.queryDeduplication=s,this.clientAwareness=me,this.localState=xe||new LocalState({cache:n}),this.ssrMode=c,this.assumeImmutableResults=!!Ne,(this.onBroadcast=u)&&(this.mutationStore=Object.create(null))}return e.prototype.stop=function(){var t=this;this.queries.forEach(function(n,r){t.stopQueryNoBroadcast(r)}),this.cancelPendingFetches(__DEV__?new InvariantError("QueryManager stopped while query was in flight"):new InvariantError(11))},e.prototype.cancelPendingFetches=function(t){this.fetchCancelFns.forEach(function(n){return n(t)}),this.fetchCancelFns.clear()},e.prototype.mutate=function(t){var n,r,o=t.mutation,a=t.variables,s=t.optimisticResponse,u=t.updateQueries,l=t.refetchQueries,c=l===void 0?[]:l,m=t.awaitRefetchQueries,me=m===void 0?!1:m,xe=t.update,Ne=t.onQueryUpdated,He=t.fetchPolicy,Ye=He===void 0?((n=this.defaultOptions.mutate)===null||n===void 0?void 0:n.fetchPolicy)||"network-only":He,Je=t.errorPolicy,vn=Je===void 0?((r=this.defaultOptions.mutate)===null||r===void 0?void 0:r.errorPolicy)||"none":Je,La=t.keepRootFields,sr=t.context;return __awaiter(this,void 0,void 0,function(){var Zr,zs,za;return __generator(this,function(Hs){switch(Hs.label){case 0:return __DEV__?invariant$1(o,"mutation option is required. You must specify your GraphQL document in the mutation option."):invariant$1(o,12),__DEV__?invariant$1(Ye==="network-only"||Ye==="no-cache","Mutations support only 'network-only' or 'no-cache' fetchPolicy strings. The default `network-only` behavior automatically writes mutation results to the cache. Passing `no-cache` skips the cache write."):invariant$1(Ye==="network-only"||Ye==="no-cache",13),Zr=this.generateMutationId(),o=this.transform(o).document,a=this.getVariables(o,a),this.transform(o).hasClientExports?[4,this.localState.addExportedVariables(o,a,sr)]:[3,2];case 1:a=Hs.sent(),Hs.label=2;case 2:return zs=this.mutationStore&&(this.mutationStore[Zr]={mutation:o,variables:a,loading:!0,error:null}),s&&this.markMutationOptimistic(s,{mutationId:Zr,document:o,variables:a,fetchPolicy:Ye,errorPolicy:vn,context:sr,updateQueries:u,update:xe,keepRootFields:La}),this.broadcastQueries(),za=this,[2,new Promise(function(lc,Ty){return asyncMap(za.getObservableFromLink(o,__assign$1(__assign$1({},sr),{optimisticResponse:s}),a,!1),function(_y){if(graphQLResultHasError(_y)&&vn==="none")throw new ApolloError({graphQLErrors:_y.errors});zs&&(zs.loading=!1,zs.error=null);var xy=__assign$1({},_y);return typeof c=="function"&&(c=c(xy)),vn==="ignore"&&graphQLResultHasError(xy)&&delete xy.errors,za.markMutationResult({mutationId:Zr,result:xy,document:o,variables:a,fetchPolicy:Ye,errorPolicy:vn,context:sr,update:xe,updateQueries:u,awaitRefetchQueries:me,refetchQueries:c,removeOptimistic:s?Zr:void 0,onQueryUpdated:Ne,keepRootFields:La})}).subscribe({next:function(_y){za.broadcastQueries(),lc(_y)},error:function(_y){zs&&(zs.loading=!1,zs.error=_y),s&&za.cache.removeOptimistic(Zr),za.broadcastQueries(),Ty(_y instanceof ApolloError?_y:new ApolloError({networkError:_y}))}})})]}})})},e.prototype.markMutationResult=function(t,n){var r=this;n===void 0&&(n=this.cache);var o=t.result,a=[],s=t.fetchPolicy==="no-cache";if(!s&&shouldWriteResult(o,t.errorPolicy)){a.push({result:o.data,dataId:"ROOT_MUTATION",query:t.document,variables:t.variables});var u=t.updateQueries;u&&this.queries.forEach(function(c,m){var me=c.observableQuery,xe=me&&me.queryName;if(!(!xe||!hasOwnProperty.call(u,xe))){var Ne=u[xe],He=r.queries.get(m),Ye=He.document,Je=He.variables,vn=n.diff({query:Ye,variables:Je,returnPartialData:!0,optimistic:!1}),La=vn.result,sr=vn.complete;if(sr&&La){var Zr=Ne(La,{mutationResult:o,queryName:Ye&&getOperationName(Ye)||void 0,queryVariables:Je});Zr&&a.push({result:Zr,dataId:"ROOT_QUERY",query:Ye,variables:Je})}}})}if(a.length>0||t.refetchQueries||t.update||t.onQueryUpdated||t.removeOptimistic){var l=[];if(this.refetchQueries({updateCache:function(c){s||a.forEach(function(xe){return c.write(xe)});var m=t.update;if(m){if(!s){var me=c.diff({id:"ROOT_MUTATION",query:r.transform(t.document).asQuery,variables:t.variables,optimistic:!1,returnPartialData:!0});me.complete&&(o=__assign$1(__assign$1({},o),{data:me.result}))}m(c,o,{context:t.context,variables:t.variables})}!s&&!t.keepRootFields&&c.modify({id:"ROOT_MUTATION",fields:function(xe,Ne){var He=Ne.fieldName,Ye=Ne.DELETE;return He==="__typename"?xe:Ye}})},include:t.refetchQueries,optimistic:!1,removeOptimistic:t.removeOptimistic,onQueryUpdated:t.onQueryUpdated||null}).forEach(function(c){return l.push(c)}),t.awaitRefetchQueries||t.onQueryUpdated)return Promise.all(l).then(function(){return o})}return Promise.resolve(o)},e.prototype.markMutationOptimistic=function(t,n){var r=this,o=typeof t=="function"?t(n.variables):t;return this.cache.recordOptimisticTransaction(function(a){try{r.markMutationResult(__assign$1(__assign$1({},n),{result:{data:o}}),a)}catch(s){__DEV__&&invariant$1.error(s)}},n.mutationId)},e.prototype.fetchQuery=function(t,n,r){return this.fetchQueryObservable(t,n,r).promise},e.prototype.getQueryStore=function(){var t=Object.create(null);return this.queries.forEach(function(n,r){t[r]={variables:n.variables,networkStatus:n.networkStatus,networkError:n.networkError,graphQLErrors:n.graphQLErrors}}),t},e.prototype.resetErrors=function(t){var n=this.queries.get(t);n&&(n.networkError=void 0,n.graphQLErrors=[])},e.prototype.transform=function(t){var n=this.transformCache;if(!n.has(t)){var r=this.cache.transformDocument(t),o=removeConnectionDirectiveFromDocument(this.cache.transformForLink(r)),a=this.localState.clientQuery(r),s=o&&this.localState.serverQuery(o),u={document:r,hasClientExports:hasClientExports(r),hasForcedResolvers:this.localState.shouldForceResolvers(r),clientQuery:a,serverQuery:s,defaultVars:getDefaultValues(getOperationDefinition(r)),asQuery:__assign$1(__assign$1({},r),{definitions:r.definitions.map(function(c){return c.kind==="OperationDefinition"&&c.operation!=="query"?__assign$1(__assign$1({},c),{operation:"query"}):c})})},l=function(c){c&&!n.has(c)&&n.set(c,u)};l(t),l(r),l(a),l(s)}return n.get(t)},e.prototype.getVariables=function(t,n){return __assign$1(__assign$1({},this.transform(t).defaultVars),n)},e.prototype.watchQuery=function(t){t=__assign$1(__assign$1({},t),{variables:this.getVariables(t.query,t.variables)}),typeof t.notifyOnNetworkStatusChange=="undefined"&&(t.notifyOnNetworkStatusChange=!1);var n=new QueryInfo(this),r=new ObservableQuery({queryManager:this,queryInfo:n,options:t});return this.queries.set(r.queryId,n),n.init({document:r.query,observableQuery:r,variables:r.variables}),r},e.prototype.query=function(t,n){var r=this;return n===void 0&&(n=this.generateQueryId()),__DEV__?invariant$1(t.query,"query option is required. You must specify your GraphQL document in the query option."):invariant$1(t.query,14),__DEV__?invariant$1(t.query.kind==="Document",'You must wrap the query string in a "gql" tag.'):invariant$1(t.query.kind==="Document",15),__DEV__?invariant$1(!t.returnPartialData,"returnPartialData option only supported on watchQuery."):invariant$1(!t.returnPartialData,16),__DEV__?invariant$1(!t.pollInterval,"pollInterval option only supported on watchQuery."):invariant$1(!t.pollInterval,17),this.fetchQuery(n,t).finally(function(){return r.stopQuery(n)})},e.prototype.generateQueryId=function(){return String(this.queryIdCounter++)},e.prototype.generateRequestId=function(){return this.requestIdCounter++},e.prototype.generateMutationId=function(){return String(this.mutationIdCounter++)},e.prototype.stopQueryInStore=function(t){this.stopQueryInStoreNoBroadcast(t),this.broadcastQueries()},e.prototype.stopQueryInStoreNoBroadcast=function(t){var n=this.queries.get(t);n&&n.stop()},e.prototype.clearStore=function(t){return t===void 0&&(t={discardWatches:!0}),this.cancelPendingFetches(__DEV__?new InvariantError("Store reset while query was in flight (not completed in link chain)"):new InvariantError(18)),this.queries.forEach(function(n){n.observableQuery?n.networkStatus=NetworkStatus.loading:n.stop()}),this.mutationStore&&(this.mutationStore=Object.create(null)),this.cache.reset(t)},e.prototype.getObservableQueries=function(t){var n=this;t===void 0&&(t="active");var r=new Map,o=new Map,a=new Set;return Array.isArray(t)&&t.forEach(function(s){typeof s=="string"?o.set(s,!1):isDocumentNode(s)?o.set(n.transform(s).document,!1):isNonNullObject(s)&&s.query&&a.add(s)}),this.queries.forEach(function(s,u){var l=s.observableQuery,c=s.document;if(l){if(t==="all"){r.set(u,l);return}var m=l.queryName,me=l.options.fetchPolicy;if(me==="standby"||t==="active"&&!l.hasObservers())return;(t==="active"||m&&o.has(m)||c&&o.has(c))&&(r.set(u,l),m&&o.set(m,!0),c&&o.set(c,!0))}}),a.size&&a.forEach(function(s){var u=makeUniqueId("legacyOneTimeQuery"),l=n.getQuery(u).init({document:s.query,variables:s.variables}),c=new ObservableQuery({queryManager:n,queryInfo:l,options:__assign$1(__assign$1({},s),{fetchPolicy:"network-only"})});invariant$1(c.queryId===u),l.setObservableQuery(c),r.set(u,c)}),__DEV__&&o.size&&o.forEach(function(s,u){s||__DEV__&&invariant$1.warn("Unknown query ".concat(typeof u=="string"?"named ":"").concat(JSON.stringify(u,null,2)," requested in refetchQueries options.include array"))}),r},e.prototype.reFetchObservableQueries=function(t){var n=this;t===void 0&&(t=!1);var r=[];return this.getObservableQueries(t?"all":"active").forEach(function(o,a){var s=o.options.fetchPolicy;o.resetLastResults(),(t||s!=="standby"&&s!=="cache-only")&&r.push(o.refetch()),n.getQuery(a).setDiff(null)}),this.broadcastQueries(),Promise.all(r)},e.prototype.setObservableQuery=function(t){this.getQuery(t.queryId).setObservableQuery(t)},e.prototype.startGraphQLSubscription=function(t){var n=this,r=t.query,o=t.fetchPolicy,a=t.errorPolicy,s=t.variables,u=t.context,l=u===void 0?{}:u;r=this.transform(r).document,s=this.getVariables(r,s);var c=function(me){return n.getObservableFromLink(r,l,me).map(function(xe){if(o!=="no-cache"&&(shouldWriteResult(xe,a)&&n.cache.write({query:r,result:xe.data,dataId:"ROOT_SUBSCRIPTION",variables:me}),n.broadcastQueries()),graphQLResultHasError(xe))throw new ApolloError({graphQLErrors:xe.errors});return xe})};if(this.transform(r).hasClientExports){var m=this.localState.addExportedVariables(r,s,l).then(c);return new Observable(function(me){var xe=null;return m.then(function(Ne){return xe=Ne.subscribe(me)},me.error),function(){return xe&&xe.unsubscribe()}})}return c(s)},e.prototype.stopQuery=function(t){this.stopQueryNoBroadcast(t),this.broadcastQueries()},e.prototype.stopQueryNoBroadcast=function(t){this.stopQueryInStoreNoBroadcast(t),this.removeQuery(t)},e.prototype.removeQuery=function(t){this.fetchCancelFns.delete(t),this.queries.has(t)&&(this.getQuery(t).stop(),this.queries.delete(t))},e.prototype.broadcastQueries=function(){this.onBroadcast&&this.onBroadcast(),this.queries.forEach(function(t){return t.notify()})},e.prototype.getLocalState=function(){return this.localState},e.prototype.getObservableFromLink=function(t,n,r,o){var a=this,s;o===void 0&&(o=(s=n==null?void 0:n.queryDeduplication)!==null&&s!==void 0?s:this.queryDeduplication);var u,l=this.transform(t).serverQuery;if(l){var c=this,m=c.inFlightLinkObservables,me=c.link,xe={query:l,variables:r,operationName:getOperationName(l)||void 0,context:this.prepareContext(__assign$1(__assign$1({},n),{forceFetch:!o}))};if(n=xe.context,o){var Ne=m.get(l)||new Map;m.set(l,Ne);var He=canonicalStringify(r);if(u=Ne.get(He),!u){var Ye=new Concast([execute(me,xe)]);Ne.set(He,u=Ye),Ye.cleanup(function(){Ne.delete(He)&&Ne.size<1&&m.delete(l)})}}else u=new Concast([execute(me,xe)])}else u=new Concast([Observable.of({data:{}})]),n=this.prepareContext(n);var Je=this.transform(t).clientQuery;return Je&&(u=asyncMap(u,function(vn){return a.localState.runResolvers({document:Je,remoteResult:vn,context:n,variables:r})})),u},e.prototype.getResultsFromLink=function(t,n,r){var o=t.lastRequestId=this.generateRequestId();return asyncMap(this.getObservableFromLink(t.document,r.context,r.variables),function(a){var s=isNonEmptyArray(a.errors);if(o>=t.lastRequestId){if(s&&r.errorPolicy==="none")throw t.markError(new ApolloError({graphQLErrors:a.errors}));t.markResult(a,r,n),t.markReady()}var u={data:a.data,loading:!1,networkStatus:NetworkStatus.ready};return s&&r.errorPolicy!=="ignore"&&(u.errors=a.errors,u.networkStatus=NetworkStatus.error),u},function(a){var s=isApolloError(a)?a:new ApolloError({networkError:a});throw o>=t.lastRequestId&&t.markError(s),s})},e.prototype.fetchQueryObservable=function(t,n,r){var o=this;r===void 0&&(r=NetworkStatus.loading);var a=this.transform(n.query).document,s=this.getVariables(a,n.variables),u=this.getQuery(t),l=this.defaultOptions.watchQuery,c=n.fetchPolicy,m=c===void 0?l&&l.fetchPolicy||"cache-first":c,me=n.errorPolicy,xe=me===void 0?l&&l.errorPolicy||"none":me,Ne=n.returnPartialData,He=Ne===void 0?!1:Ne,Ye=n.notifyOnNetworkStatusChange,Je=Ye===void 0?!1:Ye,vn=n.context,La=vn===void 0?{}:vn,sr=Object.assign({},n,{query:a,variables:s,fetchPolicy:m,errorPolicy:xe,returnPartialData:He,notifyOnNetworkStatusChange:Je,context:La}),Zr=function(Hs){sr.variables=Hs;var lc=o.fetchQueryByPolicy(u,sr,r);return sr.fetchPolicy!=="standby"&&lc.length>0&&u.observableQuery&&u.observableQuery.applyNextFetchPolicy("after-fetch",n),lc},zs=function(){return o.fetchCancelFns.delete(t)};this.fetchCancelFns.set(t,function(Hs){zs(),setTimeout(function(){return za.cancel(Hs)})});var za=new Concast(this.transform(sr.query).hasClientExports?this.localState.addExportedVariables(sr.query,sr.variables,sr.context).then(Zr):Zr(sr.variables));return za.promise.then(zs,zs),za},e.prototype.refetchQueries=function(t){var n=this,r=t.updateCache,o=t.include,a=t.optimistic,s=a===void 0?!1:a,u=t.removeOptimistic,l=u===void 0?s?makeUniqueId("refetchQueries"):void 0:u,c=t.onQueryUpdated,m=new Map;o&&this.getObservableQueries(o).forEach(function(xe,Ne){m.set(Ne,{oq:xe,lastDiff:n.getQuery(Ne).getDiff()})});var me=new Map;return r&&this.cache.batch({update:r,optimistic:s&&l||!1,removeOptimistic:l,onWatchUpdated:function(xe,Ne,He){var Ye=xe.watcher instanceof QueryInfo&&xe.watcher.observableQuery;if(Ye){if(c){m.delete(Ye.queryId);var Je=c(Ye,Ne,He);return Je===!0&&(Je=Ye.refetch()),Je!==!1&&me.set(Ye,Je),Je}c!==null&&m.set(Ye.queryId,{oq:Ye,lastDiff:He,diff:Ne})}}}),m.size&&m.forEach(function(xe,Ne){var He=xe.oq,Ye=xe.lastDiff,Je=xe.diff,vn;if(c){if(!Je){var La=He.queryInfo;La.reset(),Je=La.getDiff()}vn=c(He,Je,Ye)}(!c||vn===!0)&&(vn=He.refetch()),vn!==!1&&me.set(He,vn),Ne.indexOf("legacyOneTimeQuery")>=0&&n.stopQueryNoBroadcast(Ne)}),l&&this.cache.removeOptimistic(l),me},e.prototype.fetchQueryByPolicy=function(t,n,r){var o=this,a=n.query,s=n.variables,u=n.fetchPolicy,l=n.refetchWritePolicy,c=n.errorPolicy,m=n.returnPartialData,me=n.context,xe=n.notifyOnNetworkStatusChange,Ne=t.networkStatus;t.init({document:this.transform(a).document,variables:s,networkStatus:r});var He=function(){return t.getDiff(s)},Ye=function(Zr,zs){zs===void 0&&(zs=t.networkStatus||NetworkStatus.loading);var za=Zr.result;__DEV__&&!m&&!equal(za,{})&&logMissingFieldErrors(Zr.missing);var Hs=function(lc){return Observable.of(__assign$1({data:lc,loading:isNetworkRequestInFlight(zs),networkStatus:zs},Zr.complete?null:{partial:!0}))};return za&&o.transform(a).hasForcedResolvers?o.localState.runResolvers({document:a,remoteResult:{data:za},context:me,variables:s,onlyRunForcedResolvers:!0}).then(function(lc){return Hs(lc.data||void 0)}):Hs(za)},Je=u==="no-cache"?0:r===NetworkStatus.refetch&&l!=="merge"?1:2,vn=function(){return o.getResultsFromLink(t,Je,{variables:s,context:me,fetchPolicy:u,errorPolicy:c})},La=xe&&typeof Ne=="number"&&Ne!==r&&isNetworkRequestInFlight(r);switch(u){default:case"cache-first":{var sr=He();return sr.complete?[Ye(sr,t.markReady())]:m||La?[Ye(sr),vn()]:[vn()]}case"cache-and-network":{var sr=He();return sr.complete||m||La?[Ye(sr),vn()]:[vn()]}case"cache-only":return[Ye(He(),t.markReady())];case"network-only":return La?[Ye(He()),vn()]:[vn()];case"no-cache":return La?[Ye(t.getDiff()),vn()]:[vn()];case"standby":return[]}},e.prototype.getQuery=function(t){return t&&!this.queries.has(t)&&this.queries.set(t,new QueryInfo(this,t)),this.queries.get(t)},e.prototype.prepareContext=function(t){t===void 0&&(t={});var n=this.localState.prepareContext(t);return __assign$1(__assign$1({},n),{clientAwareness:this.clientAwareness})},e}(),hasSuggestedDevtools=!1,ApolloClient=function(){function e(t){var n=this;this.resetStoreCallbacks=[],this.clearStoreCallbacks=[];var r=t.uri,o=t.credentials,a=t.headers,s=t.cache,u=t.ssrMode,l=u===void 0?!1:u,c=t.ssrForceFetchDelay,m=c===void 0?0:c,me=t.connectToDevTools,xe=me===void 0?typeof window=="object"&&!window.__APOLLO_CLIENT__&&__DEV__:me,Ne=t.queryDeduplication,He=Ne===void 0?!0:Ne,Ye=t.defaultOptions,Je=t.assumeImmutableResults,vn=Je===void 0?!1:Je,La=t.resolvers,sr=t.typeDefs,Zr=t.fragmentMatcher,zs=t.name,za=t.version,Hs=t.link;if(Hs||(Hs=r?new HttpLink({uri:r,credentials:o,headers:a}):ApolloLink.empty()),!s)throw __DEV__?new InvariantError(`To initialize Apollo Client, you must specify a 'cache' property in the options object. 
For more information, please visit: https://go.apollo.dev/c/docs`):new InvariantError(7);if(this.link=Hs,this.cache=s,this.disableNetworkFetches=l||m>0,this.queryDeduplication=He,this.defaultOptions=Ye||Object.create(null),this.typeDefs=sr,m&&setTimeout(function(){return n.disableNetworkFetches=!1},m),this.watchQuery=this.watchQuery.bind(this),this.query=this.query.bind(this),this.mutate=this.mutate.bind(this),this.resetStore=this.resetStore.bind(this),this.reFetchObservableQueries=this.reFetchObservableQueries.bind(this),xe&&typeof window=="object"&&(window.__APOLLO_CLIENT__=this),!hasSuggestedDevtools&&__DEV__&&(hasSuggestedDevtools=!0,typeof window!="undefined"&&window.document&&window.top===window.self&&!window.__APOLLO_DEVTOOLS_GLOBAL_HOOK__)){var lc=window.navigator,Ty=lc&&lc.userAgent,_y=void 0;typeof Ty=="string"&&(Ty.indexOf("Chrome/")>-1?_y="https://chrome.google.com/webstore/detail/apollo-client-developer-t/jdkknkkbebbapilgoeccciglkfbmbnfm":Ty.indexOf("Firefox/")>-1&&(_y="https://addons.mozilla.org/en-US/firefox/addon/apollo-developer-tools/")),_y&&__DEV__&&invariant$1.log("Download the Apollo DevTools for a better development experience: "+_y)}this.version=version,this.localState=new LocalState({cache:s,client:this,resolvers:La,fragmentMatcher:Zr}),this.queryManager=new QueryManager({cache:this.cache,link:this.link,defaultOptions:this.defaultOptions,queryDeduplication:He,ssrMode:l,clientAwareness:{name:zs,version:za},localState:this.localState,assumeImmutableResults:vn,onBroadcast:xe?function(){n.devToolsHookCb&&n.devToolsHookCb({action:{},state:{queries:n.queryManager.getQueryStore(),mutations:n.queryManager.mutationStore||{}},dataWithOptimisticResults:n.cache.extract(!0)})}:void 0})}return e.prototype.stop=function(){this.queryManager.stop()},e.prototype.watchQuery=function(t){return this.defaultOptions.watchQuery&&(t=mergeOptions(this.defaultOptions.watchQuery,t)),this.disableNetworkFetches&&(t.fetchPolicy==="network-only"||t.fetchPolicy==="cache-and-network")&&(t=__assign$1(__assign$1({},t),{fetchPolicy:"cache-first"})),this.queryManager.watchQuery(t)},e.prototype.query=function(t){return this.defaultOptions.query&&(t=mergeOptions(this.defaultOptions.query,t)),__DEV__?invariant$1(t.fetchPolicy!=="cache-and-network","The cache-and-network fetchPolicy does not work with client.query, because client.query can only return a single result. Please use client.watchQuery to receive multiple results from the cache and the network, or consider using a different fetchPolicy, such as cache-first or network-only."):invariant$1(t.fetchPolicy!=="cache-and-network",8),this.disableNetworkFetches&&t.fetchPolicy==="network-only"&&(t=__assign$1(__assign$1({},t),{fetchPolicy:"cache-first"})),this.queryManager.query(t)},e.prototype.mutate=function(t){return this.defaultOptions.mutate&&(t=mergeOptions(this.defaultOptions.mutate,t)),this.queryManager.mutate(t)},e.prototype.subscribe=function(t){return this.queryManager.startGraphQLSubscription(t)},e.prototype.readQuery=function(t,n){return n===void 0&&(n=!1),this.cache.readQuery(t,n)},e.prototype.readFragment=function(t,n){return n===void 0&&(n=!1),this.cache.readFragment(t,n)},e.prototype.writeQuery=function(t){this.cache.writeQuery(t),this.queryManager.broadcastQueries()},e.prototype.writeFragment=function(t){this.cache.writeFragment(t),this.queryManager.broadcastQueries()},e.prototype.__actionHookForDevTools=function(t){this.devToolsHookCb=t},e.prototype.__requestRaw=function(t){return execute(this.link,t)},e.prototype.resetStore=function(){var t=this;return Promise.resolve().then(function(){return t.queryManager.clearStore({discardWatches:!1})}).then(function(){return Promise.all(t.resetStoreCallbacks.map(function(n){return n()}))}).then(function(){return t.reFetchObservableQueries()})},e.prototype.clearStore=function(){var t=this;return Promise.resolve().then(function(){return t.queryManager.clearStore({discardWatches:!0})}).then(function(){return Promise.all(t.clearStoreCallbacks.map(function(n){return n()}))})},e.prototype.onResetStore=function(t){var n=this;return this.resetStoreCallbacks.push(t),function(){n.resetStoreCallbacks=n.resetStoreCallbacks.filter(function(r){return r!==t})}},e.prototype.onClearStore=function(t){var n=this;return this.clearStoreCallbacks.push(t),function(){n.clearStoreCallbacks=n.clearStoreCallbacks.filter(function(r){return r!==t})}},e.prototype.reFetchObservableQueries=function(t){return this.queryManager.reFetchObservableQueries(t)},e.prototype.refetchQueries=function(t){var n=this.queryManager.refetchQueries(t),r=[],o=[];n.forEach(function(s,u){r.push(u),o.push(s)});var a=Promise.all(o);return a.queries=r,a.results=o,a.catch(function(s){__DEV__&&invariant$1.debug("In client.refetchQueries, Promise.all promise rejected with error ".concat(s))}),a},e.prototype.getObservableQueries=function(t){return t===void 0&&(t="active"),this.queryManager.getObservableQueries(t)},e.prototype.extract=function(t){return this.cache.extract(t)},e.prototype.restore=function(t){return this.cache.restore(t)},e.prototype.addResolvers=function(t){this.localState.addResolvers(t)},e.prototype.setResolvers=function(t){this.localState.setResolvers(t)},e.prototype.getResolvers=function(){return this.localState.getResolvers()},e.prototype.setLocalStateFragmentMatcher=function(t){this.localState.setFragmentMatcher(t)},e.prototype.setLink=function(t){this.link=this.queryManager.link=t},e}(),__assign=function(){return __assign=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},__assign.apply(this,arguments)},docCache=new Map,fragmentSourceMap=new Map,printFragmentWarnings=!0,experimentalFragmentVariables=!1;function normalize(e){return e.replace(/[\s,]+/g," ").trim()}function cacheKeyFromLoc(e){return normalize(e.source.body.substring(e.start,e.end))}function processFragments(e){var t=new Set,n=[];return e.definitions.forEach(function(r){if(r.kind==="FragmentDefinition"){var o=r.name.value,a=cacheKeyFromLoc(r.loc),s=fragmentSourceMap.get(o);s&&!s.has(a)?printFragmentWarnings&&console.warn("Warning: fragment with name "+o+` already exists.
graphql-tag enforces all fragment names across your application to be unique; read more about
this in the docs: http://dev.apollodata.com/core/fragments.html#unique-names`):s||fragmentSourceMap.set(o,s=new Set),s.add(a),t.has(a)||(t.add(a),n.push(r))}else n.push(r)}),__assign(__assign({},e),{definitions:n})}function stripLoc(e){var t=new Set(e.definitions);t.forEach(function(r){r.loc&&delete r.loc,Object.keys(r).forEach(function(o){var a=r[o];a&&typeof a=="object"&&t.add(a)})});var n=e.loc;return n&&(delete n.startToken,delete n.endToken),e}function parseDocument(e){var t=normalize(e);if(!docCache.has(t)){var n=parse(e,{experimentalFragmentVariables,allowLegacyFragmentVariables:experimentalFragmentVariables});if(!n||n.kind!=="Document")throw new Error("Not a valid GraphQL document.");docCache.set(t,stripLoc(processFragments(n)))}return docCache.get(t)}function gql(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];typeof e=="string"&&(e=[e]);var r=e[0];return t.forEach(function(o,a){o&&o.kind==="Document"?r+=o.loc.source.body:r+=o,r+=e[a+1]}),parseDocument(r)}function resetCaches(){docCache.clear(),fragmentSourceMap.clear()}function disableFragmentWarnings(){printFragmentWarnings=!1}function enableExperimentalFragmentVariables(){experimentalFragmentVariables=!0}function disableExperimentalFragmentVariables(){experimentalFragmentVariables=!1}var extras={gql,resetCaches,disableFragmentWarnings,enableExperimentalFragmentVariables,disableExperimentalFragmentVariables};(function(e){e.gql=extras.gql,e.resetCaches=extras.resetCaches,e.disableFragmentWarnings=extras.disableFragmentWarnings,e.enableExperimentalFragmentVariables=extras.enableExperimentalFragmentVariables,e.disableExperimentalFragmentVariables=extras.disableExperimentalFragmentVariables})(gql||(gql={})),gql.default=gql,setVerbosity(DEV?"log":"silent");var core=Object.freeze({__proto__:null,setLogVerbosity:setVerbosity,ApolloClient,mergeOptions,ObservableQuery,get NetworkStatus(){return NetworkStatus},isApolloError,ApolloError,get Cache(){return Cache},ApolloCache,InMemoryCache,MissingFieldError,defaultDataIdFromObject,makeVar,fromError,toPromise,fromPromise,throwServerError,Observable,isReference,makeReference,get gql(){return gql},resetCaches,disableFragmentWarnings,enableExperimentalFragmentVariables,disableExperimentalFragmentVariables,empty,from,split,concat,execute,ApolloLink,parseAndCheckHttpResponse,serializeFetchParameter,fallbackHttpConfig,defaultPrinter,selectHttpOptionsAndBody,selectHttpOptionsAndBodyInternal,checkFetcher,createSignalIfSupported,selectURI,createHttpLink,HttpLink,rewriteURIForGET}),require$$0=getAugmentedNamespace(core),unwrapApolloResult$1={};Object.defineProperty(unwrapApolloResult$1,"__esModule",{value:!0});function unwrapApolloResult(e){if(e.error)throw e.error;if(e.errors)throw e.errors;return e.data}unwrapApolloResult$1.default=unwrapApolloResult;var Agent$1={},typeGraphql$1={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.GraphQLTimestamp=e.GraphQLISODateTime=e.ID=e.Float=e.Int=e.ClassType=e.PubSubEngine=e.UseMiddleware=e.createUnionType=e.Subscription=e.Root=e.Resolver=e.Query=e.PubSub=e.ObjectType=e.Mutation=e.InterfaceType=e.InputType=e.Info=e.FieldResolver=e.Field=e.registerEnumType=e.Ctx=e.Authorized=e.ArgsType=e.Args=e.Arg=e.dummyDecorator=e.dummyFn=e.dummyValue=void 0,e.dummyValue="";function t(){}e.dummyFn=t;function n(){return t}e.dummyDecorator=n,e.Arg=n,e.Args=n,e.ArgsType=n,e.Authorized=n,e.Ctx=n,e.registerEnumType=t,e.Field=n,e.FieldResolver=n,e.Info=n,e.InputType=n,e.InterfaceType=n,e.Mutation=n,e.ObjectType=n,e.PubSub=n,e.Query=n,e.Resolver=n,e.Root=n,e.Subscription=n,e.createUnionType=t,e.UseMiddleware=n,e.PubSubEngine=n;class r{}e.ClassType=r,e.Int=e.dummyValue,e.Float=e.dummyValue,e.ID=e.dummyValue,e.GraphQLISODateTime=e.dummyValue,e.GraphQLTimestamp=e.dummyValue})(typeGraphql$1);var typeGraphql={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.GraphQLTimestamp=e.GraphQLISODateTime=e.ID=e.Float=e.Int=e.ClassType=e.PubSubEngine=e.UseMiddleware=e.createUnionType=e.Subscription=e.Root=e.Resolver=e.Query=e.PubSub=e.ObjectType=e.Mutation=e.InterfaceType=e.InputType=e.Info=e.FieldResolver=e.Field=e.registerEnumType=e.Ctx=e.Authorized=e.ArgsType=e.Args=e.Arg=e.dummyDecorator=e.dummyFn=e.dummyValue=void 0,e.dummyValue="";function t(){}e.dummyFn=t;function n(){return t}e.dummyDecorator=n,e.Arg=n,e.Args=n,e.ArgsType=n,e.Authorized=n,e.Ctx=n,e.registerEnumType=t,e.Field=n,e.FieldResolver=n,e.Info=n,e.InputType=n,e.InterfaceType=n,e.Mutation=n,e.ObjectType=n,e.PubSub=n,e.Query=n,e.Resolver=n,e.Root=n,e.Subscription=n,e.createUnionType=t,e.UseMiddleware=n,e.PubSubEngine=n;class r{}e.ClassType=r,e.Int=e.dummyValue,e.Float=e.dummyValue,e.ID=e.dummyValue,e.GraphQLISODateTime=e.dummyValue,e.GraphQLTimestamp=e.dummyValue})(typeGraphql);var Perspective$1={},Expression$1={},Icon$1={},__decorate$e=commonjsGlobal&&commonjsGlobal.__decorate||function(e,t,n,r){var o=arguments.length,a=o<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(e,t,n,r);else for(var u=e.length-1;u>=0;u--)(s=e[u])&&(a=(o<3?s(a):o>3?s(t,n,a):s(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},__metadata$e=commonjsGlobal&&commonjsGlobal.__metadata||function(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)};Object.defineProperty(Icon$1,"__esModule",{value:!0}),Icon$1.Icon=void 0;var type_graphql_1$e=typeGraphql,Icon=class{constructor(e){this.code=e}};__decorate$e([(0,type_graphql_1$e.Field)(),__metadata$e("design:type",String)],Icon.prototype,"code",void 0),Icon=__decorate$e([(0,type_graphql_1$e.ObjectType)(),__metadata$e("design:paramtypes",[String])],Icon),Icon$1.Icon=Icon;var LanguageRef$1={},__decorate$d=commonjsGlobal&&commonjsGlobal.__decorate||function(e,t,n,r){var o=arguments.length,a=o<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(e,t,n,r);else for(var u=e.length-1;u>=0;u--)(s=e[u])&&(a=(o<3?s(a):o>3?s(t,n,a):s(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},__metadata$d=commonjsGlobal&&commonjsGlobal.__metadata||function(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)};Object.defineProperty(LanguageRef$1,"__esModule",{value:!0}),LanguageRef$1.LanguageRef=void 0;var type_graphql_1$d=typeGraphql,LanguageRef=class{constructor(e,t){this.address=e,this.name=t}};__decorate$d([(0,type_graphql_1$d.Field)(),__metadata$d("design:type",String)],LanguageRef.prototype,"address",void 0),__decorate$d([(0,type_graphql_1$d.Field)(),__metadata$d("design:type",String)],LanguageRef.prototype,"name",void 0),LanguageRef=__decorate$d([(0,type_graphql_1$d.ObjectType)(),__metadata$d("design:paramtypes",[String,String])],LanguageRef),LanguageRef$1.LanguageRef=LanguageRef;var __decorate$c=commonjsGlobal&&commonjsGlobal.__decorate||function(e,t,n,r){var o=arguments.length,a=o<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(e,t,n,r);else for(var u=e.length-1;u>=0;u--)(s=e[u])&&(a=(o<3?s(a):o>3?s(t,n,a):s(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},__metadata$c=commonjsGlobal&&commonjsGlobal.__metadata||function(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)};Object.defineProperty(Expression$1,"__esModule",{value:!0}),Expression$1.isExpression=Expression$1.ExpressionRendered=Expression$1.Expression=Expression$1.ExpressionGenericInput=Expression$1.ExpressionGeneric=Expression$1.ExpressionProofInput=Expression$1.ExpressionProof=void 0;var type_graphql_1$c=typeGraphql,Icon_1$1=Icon$1,LanguageRef_1$1=LanguageRef$1,ExpressionProof=class{constructor(e,t){this.key=t,this.signature=e}};__decorate$c([(0,type_graphql_1$c.Field)(),__metadata$c("design:type",String)],ExpressionProof.prototype,"signature",void 0),__decorate$c([(0,type_graphql_1$c.Field)(),__metadata$c("design:type",String)],ExpressionProof.prototype,"key",void 0),__decorate$c([(0,type_graphql_1$c.Field)({nullable:!0}),__metadata$c("design:type",Boolean)],ExpressionProof.prototype,"valid",void 0),__decorate$c([(0,type_graphql_1$c.Field)({nullable:!0}),__metadata$c("design:type",Boolean)],ExpressionProof.prototype,"invalid",void 0),ExpressionProof=__decorate$c([(0,type_graphql_1$c.ObjectType)(),(0,type_graphql_1$c.InputType)(),__metadata$c("design:paramtypes",[String,String])],ExpressionProof),Expression$1.ExpressionProof=ExpressionProof;var ExpressionProofInput=class{};__decorate$c([(0,type_graphql_1$c.Field)(),__metadata$c("design:type",String)],ExpressionProofInput.prototype,"signature",void 0),__decorate$c([(0,type_graphql_1$c.Field)(),__metadata$c("design:type",String)],ExpressionProofInput.prototype,"key",void 0),__decorate$c([(0,type_graphql_1$c.Field)({nullable:!0}),__metadata$c("design:type",Boolean)],ExpressionProofInput.prototype,"valid",void 0),__decorate$c([(0,type_graphql_1$c.Field)({nullable:!0}),__metadata$c("design:type",Boolean)],ExpressionProofInput.prototype,"invalid",void 0),ExpressionProofInput=__decorate$c([(0,type_graphql_1$c.InputType)()],ExpressionProofInput),Expression$1.ExpressionProofInput=ExpressionProofInput;function ExpressionGeneric(e){let t=class{constructor(n,r,o,a){this.author=n,this.timestamp=r,this.data=o,this.proof=a}};return __decorate$c([(0,type_graphql_1$c.Field)(),__metadata$c("design:type",String)],t.prototype,"author",void 0),__decorate$c([(0,type_graphql_1$c.Field)(),__metadata$c("design:type",String)],t.prototype,"timestamp",void 0),__decorate$c([(0,type_graphql_1$c.Field)(n=>e),__metadata$c("design:type",Object)],t.prototype,"data",void 0),__decorate$c([(0,type_graphql_1$c.Field)(),__metadata$c("design:type",ExpressionProof)],t.prototype,"proof",void 0),t=__decorate$c([(0,type_graphql_1$c.ObjectType)(),__metadata$c("design:paramtypes",[String,String,Object,ExpressionProof])],t),t}Expression$1.ExpressionGeneric=ExpressionGeneric;function ExpressionGenericInput(e){let t=class{};return __decorate$c([(0,type_graphql_1$c.Field)(),__metadata$c("design:type",String)],t.prototype,"author",void 0),__decorate$c([(0,type_graphql_1$c.Field)(),__metadata$c("design:type",String)],t.prototype,"timestamp",void 0),__decorate$c([(0,type_graphql_1$c.Field)(n=>e),__metadata$c("design:type",Object)],t.prototype,"data",void 0),__decorate$c([(0,type_graphql_1$c.Field)(),__metadata$c("design:type",ExpressionProofInput)],t.prototype,"proof",void 0),t=__decorate$c([(0,type_graphql_1$c.InputType)()],t),t}Expression$1.ExpressionGenericInput=ExpressionGenericInput;var Expression=class extends ExpressionGeneric(Object){};Expression=__decorate$c([(0,type_graphql_1$c.ObjectType)()],Expression),Expression$1.Expression=Expression;var ExpressionRendered=class extends ExpressionGeneric(String){};__decorate$c([(0,type_graphql_1$c.Field)(),__metadata$c("design:type",LanguageRef_1$1.LanguageRef)],ExpressionRendered.prototype,"language",void 0),__decorate$c([(0,type_graphql_1$c.Field)(),__metadata$c("design:type",Icon_1$1.Icon)],ExpressionRendered.prototype,"icon",void 0),ExpressionRendered=__decorate$c([(0,type_graphql_1$c.ObjectType)()],ExpressionRendered),Expression$1.ExpressionRendered=ExpressionRendered;function isExpression(e){return e&&e.author&&e.timestamp&&e.data}Expression$1.isExpression=isExpression;var Links={},__decorate$b=commonjsGlobal&&commonjsGlobal.__decorate||function(e,t,n,r){var o=arguments.length,a=o<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(e,t,n,r);else for(var u=e.length-1;u>=0;u--)(s=e[u])&&(a=(o<3?s(a):o>3?s(t,n,a):s(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},__metadata$b=commonjsGlobal&&commonjsGlobal.__metadata||function(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)};Object.defineProperty(Links,"__esModule",{value:!0}),Links.isLink=Links.linkEqual=Links.LinkExpressionInput=Links.LinkExpression=Links.LinkInput=Links.Link=void 0;var type_graphql_1$b=typeGraphql,Expression_1$5=Expression$1,Link=class{constructor(e){this.source=e.source?e.source:"",this.target=e.target?e.target:"",this.predicate=e.predicate?e.predicate:""}};__decorate$b([(0,type_graphql_1$b.Field)(),__metadata$b("design:type",String)],Link.prototype,"source",void 0),__decorate$b([(0,type_graphql_1$b.Field)(),__metadata$b("design:type",String)],Link.prototype,"target",void 0),__decorate$b([(0,type_graphql_1$b.Field)({nullable:!0}),__metadata$b("design:type",String)],Link.prototype,"predicate",void 0),Link=__decorate$b([(0,type_graphql_1$b.ObjectType)(),__metadata$b("design:paramtypes",[Object])],Link),Links.Link=Link;var LinkInput=class{};__decorate$b([(0,type_graphql_1$b.Field)(),__metadata$b("design:type",String)],LinkInput.prototype,"source",void 0),__decorate$b([(0,type_graphql_1$b.Field)(),__metadata$b("design:type",String)],LinkInput.prototype,"target",void 0),__decorate$b([(0,type_graphql_1$b.Field)({nullable:!0}),__metadata$b("design:type",String)],LinkInput.prototype,"predicate",void 0),LinkInput=__decorate$b([(0,type_graphql_1$b.InputType)()],LinkInput),Links.LinkInput=LinkInput;var LinkExpression=class extends(0,Expression_1$5.ExpressionGeneric)(Link){hash(){let e=JSON.stringify(this.data,Object.keys(this.data).sort())+JSON.stringify(this.author)+this.timestamp,t=0,n,r;for(n=0;n<e.length;n++)r=e.charCodeAt(n),t=(t<<5)-t+r,t|=0;return t}};LinkExpression=__decorate$b([(0,type_graphql_1$b.ObjectType)()],LinkExpression),Links.LinkExpression=LinkExpression;var LinkExpressionInput=class extends(0,Expression_1$5.ExpressionGenericInput)(LinkInput){};LinkExpressionInput=__decorate$b([(0,type_graphql_1$b.InputType)()],LinkExpressionInput),Links.LinkExpressionInput=LinkExpressionInput;function linkEqual(e,t){return e.author==t.author&&e.timestamp==t.timestamp&&e.data.source==t.data.source&&e.data.predicate==t.data.predicate&&e.data.target==t.data.target}Links.linkEqual=linkEqual;function isLink(e){return e&&e.source&&e.target}Links.isLink=isLink;var __decorate$a=commonjsGlobal&&commonjsGlobal.__decorate||function(e,t,n,r){var o=arguments.length,a=o<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(e,t,n,r);else for(var u=e.length-1;u>=0;u--)(s=e[u])&&(a=(o<3?s(a):o>3?s(t,n,a):s(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},__metadata$a=commonjsGlobal&&commonjsGlobal.__metadata||function(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)};Object.defineProperty(Perspective$1,"__esModule",{value:!0}),Perspective$1.PerspectiveExpression=Perspective$1.PerspectiveInput=Perspective$1.Perspective=void 0;var type_graphql_1$a=typeGraphql,Expression_1$4=Expression$1,Links_1$2=Links,Perspective=class{constructor(e){e?this.links=e:this.links=[]}get(e){if(!e||!e.source&&!e.predicate&&!e.target)return this.links;if(e.source){let n=JSON.parse(JSON.stringify(this.links));return e.target&&(n=n.filter(r=>r.data.target===e.target)),e.predicate&&(n=n.filter(r=>r.data.predicate===e.predicate)),e.fromDate&&(n=n.filter(r=>new Date(r.timestamp)>=e.fromDate)),e.untilDate&&(n=n.filter(r=>new Date(r.timestamp)<=e.untilDate)),e.limit&&(n=n.slice(0,e.limit)),n}if(e.target){let n=JSON.parse(JSON.stringify(this.links));return e.predicate&&(n=n.filter(r=>r.data.predicate===e.predicate)),e.fromDate&&(n=n.filter(r=>new Date(r.timestamp)>=e.fromDate)),e.untilDate&&(n=n.filter(r=>new Date(r.timestamp)<=e.untilDate)),e.limit&&(n=n.slice(0,e.limit)),n}let t=JSON.parse(JSON.stringify(this.links));return t=t.filter(n=>n.data.predicate===e.predicate),e.limit&&(t=t.slice(0,e.limit)),t}getSingleTarget(e){delete e.target;let t=this.get(e);return t.length?t[0].data.target:null}};__decorate$a([(0,type_graphql_1$a.Field)(e=>[Links_1$2.LinkExpression]),__metadata$a("design:type",Array)],Perspective.prototype,"links",void 0),Perspective=__decorate$a([(0,type_graphql_1$a.ObjectType)(),__metadata$a("design:paramtypes",[Array])],Perspective),Perspective$1.Perspective=Perspective;var PerspectiveInput=class{};__decorate$a([(0,type_graphql_1$a.Field)(e=>[Links_1$2.LinkExpressionInput]),__metadata$a("design:type",Array)],PerspectiveInput.prototype,"links",void 0),PerspectiveInput=__decorate$a([(0,type_graphql_1$a.InputType)()],PerspectiveInput),Perspective$1.PerspectiveInput=PerspectiveInput;var PerspectiveExpression=class extends(0,Expression_1$4.ExpressionGeneric)(Perspective){};PerspectiveExpression=__decorate$a([(0,type_graphql_1$a.ObjectType)()],PerspectiveExpression),Perspective$1.PerspectiveExpression=PerspectiveExpression;var __decorate$9=commonjsGlobal&&commonjsGlobal.__decorate||function(e,t,n,r){var o=arguments.length,a=o<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(e,t,n,r);else for(var u=e.length-1;u>=0;u--)(s=e[u])&&(a=(o<3?s(a):o>3?s(t,n,a):s(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},__metadata$9=commonjsGlobal&&commonjsGlobal.__metadata||function(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)};Object.defineProperty(Agent$1,"__esModule",{value:!0}),Agent$1.EntanglementProofInput=Agent$1.EntanglementProof=Agent$1.AgentExpression=Agent$1.Agent=void 0;var type_graphql_1$9=typeGraphql,Perspective_1$1=Perspective$1,Expression_1$3=Expression$1,Agent=class{constructor(e,t){this.did=e,t?this.perspective=t:this.perspective=new Perspective_1$1.Perspective}};__decorate$9([(0,type_graphql_1$9.Field)(),__metadata$9("design:type",String)],Agent.prototype,"did",void 0),__decorate$9([(0,type_graphql_1$9.Field)(e=>Perspective_1$1.Perspective,{nullable:!0}),__metadata$9("design:type",Perspective_1$1.Perspective)],Agent.prototype,"perspective",void 0),__decorate$9([(0,type_graphql_1$9.Field)({nullable:!0}),__metadata$9("design:type",String)],Agent.prototype,"directMessageLanguage",void 0),Agent=__decorate$9([(0,type_graphql_1$9.ObjectType)(),__metadata$9("design:paramtypes",[String,Perspective_1$1.Perspective])],Agent),Agent$1.Agent=Agent;var AgentExpression=class extends(0,Expression_1$3.ExpressionGeneric)(Agent){};AgentExpression=__decorate$9([(0,type_graphql_1$9.ObjectType)()],AgentExpression),Agent$1.AgentExpression=AgentExpression;var EntanglementProof=class{constructor(e,t,n,r,o,a){this.did=e,this.didSigningKeyId=t,this.deviceKeyType=n,this.deviceKey=r,this.deviceKeySignedByDid=o,this.didSignedByDeviceKey=a}};__decorate$9([(0,type_graphql_1$9.Field)(),__metadata$9("design:type",String)],EntanglementProof.prototype,"did",void 0),__decorate$9([(0,type_graphql_1$9.Field)(),__metadata$9("design:type",String)],EntanglementProof.prototype,"didSigningKeyId",void 0),__decorate$9([(0,type_graphql_1$9.Field)(),__metadata$9("design:type",String)],EntanglementProof.prototype,"deviceKeyType",void 0),__decorate$9([(0,type_graphql_1$9.Field)(),__metadata$9("design:type",String)],EntanglementProof.prototype,"deviceKey",void 0),__decorate$9([(0,type_graphql_1$9.Field)(),__metadata$9("design:type",String)],EntanglementProof.prototype,"deviceKeySignedByDid",void 0),__decorate$9([(0,type_graphql_1$9.Field)({nullable:!0}),__metadata$9("design:type",String)],EntanglementProof.prototype,"didSignedByDeviceKey",void 0),EntanglementProof=__decorate$9([(0,type_graphql_1$9.ObjectType)(),__metadata$9("design:paramtypes",[String,String,String,String,String,String])],EntanglementProof),Agent$1.EntanglementProof=EntanglementProof;var EntanglementProofInput=class{constructor(e,t,n,r,o,a){this.did=e,this.didSigningKeyId=t,this.deviceKeyType=n,this.deviceKey=r,this.deviceKeySignedByDid=o,this.didSignedByDeviceKey=a}};__decorate$9([(0,type_graphql_1$9.Field)(),__metadata$9("design:type",String)],EntanglementProofInput.prototype,"did",void 0),__decorate$9([(0,type_graphql_1$9.Field)(),__metadata$9("design:type",String)],EntanglementProofInput.prototype,"didSigningKeyId",void 0),__decorate$9([(0,type_graphql_1$9.Field)(),__metadata$9("design:type",String)],EntanglementProofInput.prototype,"deviceKeyType",void 0),__decorate$9([(0,type_graphql_1$9.Field)(),__metadata$9("design:type",String)],EntanglementProofInput.prototype,"deviceKey",void 0),__decorate$9([(0,type_graphql_1$9.Field)(),__metadata$9("design:type",String)],EntanglementProofInput.prototype,"deviceKeySignedByDid",void 0),__decorate$9([(0,type_graphql_1$9.Field)(),__metadata$9("design:type",String)],EntanglementProofInput.prototype,"didSignedByDeviceKey",void 0),EntanglementProofInput=__decorate$9([(0,type_graphql_1$9.InputType)(),__metadata$9("design:paramtypes",[String,String,String,String,String,String])],EntanglementProofInput),Agent$1.EntanglementProofInput=EntanglementProofInput;var AgentStatus$1={},__decorate$8=commonjsGlobal&&commonjsGlobal.__decorate||function(e,t,n,r){var o=arguments.length,a=o<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(e,t,n,r);else for(var u=e.length-1;u>=0;u--)(s=e[u])&&(a=(o<3?s(a):o>3?s(t,n,a):s(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},__metadata$8=commonjsGlobal&&commonjsGlobal.__metadata||function(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)};Object.defineProperty(AgentStatus$1,"__esModule",{value:!0}),AgentStatus$1.AgentStatus=void 0;var type_graphql_1$8=typeGraphql,AgentStatus=class{constructor(e){e?(this.isInitialized=e.isInitialized,this.isInitialized||(this.isInitialized=!1),this.isUnlocked=e.isUnlocked,this.isUnlocked||(this.isUnlocked=!1),this.did=e.did,this.didDocument=e.didDocument,this.error=e.error):(this.isInitialized=!1,this.isUnlocked=!1)}};__decorate$8([(0,type_graphql_1$8.Field)(),__metadata$8("design:type",Boolean)],AgentStatus.prototype,"isInitialized",void 0),__decorate$8([(0,type_graphql_1$8.Field)(),__metadata$8("design:type",Boolean)],AgentStatus.prototype,"isUnlocked",void 0),__decorate$8([(0,type_graphql_1$8.Field)({nullable:!0}),__metadata$8("design:type",String)],AgentStatus.prototype,"did",void 0),__decorate$8([(0,type_graphql_1$8.Field)({nullable:!0}),__metadata$8("design:type",String)],AgentStatus.prototype,"didDocument",void 0),__decorate$8([(0,type_graphql_1$8.Field)({nullable:!0}),__metadata$8("design:type",String)],AgentStatus.prototype,"error",void 0),AgentStatus=__decorate$8([(0,type_graphql_1$8.ObjectType)(),__metadata$8("design:paramtypes",[Object])],AgentStatus),AgentStatus$1.AgentStatus=AgentStatus;var __classPrivateFieldSet$8=commonjsGlobal&&commonjsGlobal.__classPrivateFieldSet||function(e,t,n,r,o){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?o.call(e,n):o?o.value=n:t.set(e,n),n},__classPrivateFieldGet$8=commonjsGlobal&&commonjsGlobal.__classPrivateFieldGet||function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},__importDefault$6=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},_AgentClient_apolloClient,_AgentClient_updatedCallbacks,_AgentClient_agentStatusChangedCallbacks;Object.defineProperty(AgentClient$1,"__esModule",{value:!0});var core_1$5=require$$0,unwrapApolloResult_1$5=__importDefault$6(unwrapApolloResult$1),Agent_1=Agent$1,AgentStatus_1=AgentStatus$1,AGENT_SUBITEMS=`
    did
    directMessageLanguage
    perspective { 
        links {
            author, timestamp, 
            proof {
                signature, key, valid, invalid
            }
            data {
                source, predicate, target
            }
        }
    }
`,AGENT_STATUS_FIELDS=`
    isInitialized
    isUnlocked
    did
    didDocument
    error
`,ENTANGLEMENT_PROOF_FIELDS=`
    did
    didSigningKeyId
    deviceKeyType
    deviceKey
    deviceKeySignedByDid
    didSignedByDeviceKey
`,AgentClient=class{constructor(e,t=!0){_AgentClient_apolloClient.set(this,void 0),_AgentClient_updatedCallbacks.set(this,void 0),_AgentClient_agentStatusChangedCallbacks.set(this,void 0),__classPrivateFieldSet$8(this,_AgentClient_apolloClient,e,"f"),__classPrivateFieldSet$8(this,_AgentClient_updatedCallbacks,[],"f"),__classPrivateFieldSet$8(this,_AgentClient_agentStatusChangedCallbacks,[],"f"),t&&(this.subscribeAgentUpdated(),this.subscribeAgentStatusChanged())}async me(){let{agent:e}=(0,unwrapApolloResult_1$5.default)(await __classPrivateFieldGet$8(this,_AgentClient_apolloClient,"f").query({query:(0,core_1$5.gql)`query agent { agent { ${AGENT_SUBITEMS} } }`})),t=new Agent_1.Agent(e.did,e.perspective);return t.directMessageLanguage=e.directMessageLanguage,t}async status(){let{agentStatus:e}=(0,unwrapApolloResult_1$5.default)(await __classPrivateFieldGet$8(this,_AgentClient_apolloClient,"f").query({query:(0,core_1$5.gql)`query agentStatus {
                agentStatus {
                    ${AGENT_STATUS_FIELDS}
                }
            }`}));return new AgentStatus_1.AgentStatus(e)}async generate(e){let{agentGenerate:t}=(0,unwrapApolloResult_1$5.default)(await __classPrivateFieldGet$8(this,_AgentClient_apolloClient,"f").mutate({mutation:(0,core_1$5.gql)`mutation agentGenerate(
                $passphrase: String!
            ) {
                agentGenerate(passphrase: $passphrase) {
                    ${AGENT_STATUS_FIELDS}
                }
            }`,variables:{passphrase:e}}));return new AgentStatus_1.AgentStatus(t)}async import(e){let{did:t,didDocument:n,keystore:r,passphrase:o}=e,{agentImport:a}=(0,unwrapApolloResult_1$5.default)(await __classPrivateFieldGet$8(this,_AgentClient_apolloClient,"f").mutate({mutation:(0,core_1$5.gql)`mutation agentImport(
                $did: String!,
                $didDocument: String!,
                $keystore: String!,
                $passphrase: String!
            ) {
                agentImport(did: $did, didDocument: $didDocument, keystore: $keystore, passphrase: $passphrase) {
                    ${AGENT_STATUS_FIELDS}
                }
            }`,variables:{did:t,didDocument:n,keystore:r,passphrase:o}}));return new AgentStatus_1.AgentStatus(a)}async lock(e){let{agentLock:t}=(0,unwrapApolloResult_1$5.default)(await __classPrivateFieldGet$8(this,_AgentClient_apolloClient,"f").mutate({mutation:(0,core_1$5.gql)`mutation agentLock($passphrase: String!) {
                agentLock(passphrase: $passphrase) {
                    ${AGENT_STATUS_FIELDS}
                }
            }`,variables:{passphrase:e}}));return new AgentStatus_1.AgentStatus(t)}async unlock(e){let{agentUnlock:t}=(0,unwrapApolloResult_1$5.default)(await __classPrivateFieldGet$8(this,_AgentClient_apolloClient,"f").mutate({mutation:(0,core_1$5.gql)`mutation agentUnlock($passphrase: String!) {
                agentUnlock(passphrase: $passphrase) {
                    ${AGENT_STATUS_FIELDS}
                }
            }`,variables:{passphrase:e}}));return new AgentStatus_1.AgentStatus(t)}async byDID(e){let{agentByDID:t}=(0,unwrapApolloResult_1$5.default)(await __classPrivateFieldGet$8(this,_AgentClient_apolloClient,"f").query({query:(0,core_1$5.gql)`query agentByDID($did: String!) {
                agentByDID(did: $did) {
                    ${AGENT_SUBITEMS}
                }
            }`,variables:{did:e}}));return t}async updatePublicPerspective(e){let{agentUpdatePublicPerspective:t}=(0,unwrapApolloResult_1$5.default)(await __classPrivateFieldGet$8(this,_AgentClient_apolloClient,"f").mutate({mutation:(0,core_1$5.gql)`mutation agentUpdatePublicPerspective($perspective: PerspectiveInput!) {
                agentUpdatePublicPerspective(perspective: $perspective) {
                    ${AGENT_SUBITEMS}
                }
            }`,variables:{perspective:e}})),n=t,r=new Agent_1.Agent(n.did,n.perspective);return r.directMessageLanguage=n.directMessageLanguage,r}async updateDirectMessageLanguage(e){let{agentUpdateDirectMessageLanguage:t}=(0,unwrapApolloResult_1$5.default)(await __classPrivateFieldGet$8(this,_AgentClient_apolloClient,"f").mutate({mutation:(0,core_1$5.gql)`mutation agentUpdateDirectMessageLanguage($directMessageLanguage: String!) {
                agentUpdateDirectMessageLanguage(directMessageLanguage: $directMessageLanguage) {
                    ${AGENT_SUBITEMS}
                }
            }`,variables:{directMessageLanguage:e}})),n=t,r=new Agent_1.Agent(n.did,n.perspective);return r.directMessageLanguage=n.directMessageLanguage,r}async addEntanglementProofs(e){let{agentAddEntanglementProofs:t}=(0,unwrapApolloResult_1$5.default)(await __classPrivateFieldGet$8(this,_AgentClient_apolloClient,"f").mutate({mutation:(0,core_1$5.gql)`mutation agentAddEntanglementProofs($proofs: [EntanglementProofInput!]!) {
                agentAddEntanglementProofs(proofs: $proofs) {
                    ${ENTANGLEMENT_PROOF_FIELDS}
                }
            }`,variables:{proofs:e}}));return t}async deleteEntanglementProofs(e){let{agentDeleteEntanglementProofs:t}=(0,unwrapApolloResult_1$5.default)(await __classPrivateFieldGet$8(this,_AgentClient_apolloClient,"f").mutate({mutation:(0,core_1$5.gql)`mutation agentDeleteEntanglementProofs($proofs: [EntanglementProofInput!]!) {
                agentDeleteEntanglementProofs(proofs: $proofs) {
                    ${ENTANGLEMENT_PROOF_FIELDS}
                }
            }`,variables:{proofs:e}}));return t}async getEntanglementProofs(){let{agentGetEntanglementProofs:e}=(0,unwrapApolloResult_1$5.default)(await __classPrivateFieldGet$8(this,_AgentClient_apolloClient,"f").query({query:(0,core_1$5.gql)`query agentGetEntanglementProofs {
                agentGetEntanglementProofs {
                    ${ENTANGLEMENT_PROOF_FIELDS}
                }
            }`}));return e}async entanglementProofPreFlight(e,t){let{agentEntanglementProofPreFlight:n}=(0,unwrapApolloResult_1$5.default)(await __classPrivateFieldGet$8(this,_AgentClient_apolloClient,"f").mutate({mutation:(0,core_1$5.gql)`mutation agentEntanglementProofPreFlight($deviceKey: String!, $deviceKeyType: String!) {
                agentEntanglementProofPreFlight(deviceKey: $deviceKey, deviceKeyType: $deviceKeyType) {
                    ${ENTANGLEMENT_PROOF_FIELDS}
                }
            }`,variables:{deviceKey:e,deviceKeyType:t}}));return n}addUpdatedListener(e){__classPrivateFieldGet$8(this,_AgentClient_updatedCallbacks,"f").push(e)}subscribeAgentUpdated(){__classPrivateFieldGet$8(this,_AgentClient_apolloClient,"f").subscribe({query:(0,core_1$5.gql)` subscription {
                agentUpdated { ${AGENT_SUBITEMS} }
            }   
        `}).subscribe({next:e=>{let t=e.data.agentUpdated;__classPrivateFieldGet$8(this,_AgentClient_updatedCallbacks,"f").forEach(n=>{n(t)})},error:e=>console.error(e)})}addAgentStatusChangedListener(e){__classPrivateFieldGet$8(this,_AgentClient_agentStatusChangedCallbacks,"f").push(e)}subscribeAgentStatusChanged(){__classPrivateFieldGet$8(this,_AgentClient_apolloClient,"f").subscribe({query:(0,core_1$5.gql)` subscription {
                agentStatusChanged { ${AGENT_STATUS_FIELDS} }
            }   
        `}).subscribe({next:e=>{let t=e.data.agentStatusChanged;__classPrivateFieldGet$8(this,_AgentClient_agentStatusChangedCallbacks,"f").forEach(n=>{n(t)})},error:e=>console.error(e)})}async requestCapability(e,t,n,r){let{agentRequestCapability:o}=(0,unwrapApolloResult_1$5.default)(await __classPrivateFieldGet$8(this,_AgentClient_apolloClient,"f").mutate({mutation:(0,core_1$5.gql)`mutation agentRequestCapability($appName: String!, $appDesc: String!, $appUrl: String!, $capabilities: String!) {
                agentRequestCapability(appName: $appName, appDesc: $appDesc, appUrl: $appUrl, capabilities: $capabilities)
            }`,variables:{appName:e,appDesc:t,appUrl:n,capabilities:r}}));return o}async permitCapability(e){let{agentPermitCapability:t}=(0,unwrapApolloResult_1$5.default)(await __classPrivateFieldGet$8(this,_AgentClient_apolloClient,"f").mutate({mutation:(0,core_1$5.gql)`mutation agentPermitCapability($auth: String!) {
                agentPermitCapability(auth: $auth)
            }`,variables:{auth:e}}));return t}async generateJwt(e,t){let{agentGenerateJwt:n}=(0,unwrapApolloResult_1$5.default)(await __classPrivateFieldGet$8(this,_AgentClient_apolloClient,"f").mutate({mutation:(0,core_1$5.gql)`mutation agentGenerateJwt($requestId: String!, $rand: String!) {
                agentGenerateJwt(requestId: $requestId, rand: $rand)
            }`,variables:{requestId:e,rand:t}}));return n}};AgentClient$1.default=AgentClient,_AgentClient_apolloClient=new WeakMap,_AgentClient_updatedCallbacks=new WeakMap,_AgentClient_agentStatusChangedCallbacks=new WeakMap;var LanguageClient$1={},__classPrivateFieldSet$7=commonjsGlobal&&commonjsGlobal.__classPrivateFieldSet||function(e,t,n,r,o){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?o.call(e,n):o?o.value=n:t.set(e,n),n},__classPrivateFieldGet$7=commonjsGlobal&&commonjsGlobal.__classPrivateFieldGet||function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},__importDefault$5=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},_LanguageClient_apolloClient;Object.defineProperty(LanguageClient$1,"__esModule",{value:!0}),LanguageClient$1.LanguageClient=void 0;var core_1$4=require$$0,unwrapApolloResult_1$4=__importDefault$5(unwrapApolloResult$1),LANGUAGE_COMPLETE=`
    name
    address
    settings
    icon { code }
    constructorIcon { code }
    settingsIcon { code }
`,LANGUAGE_META=`
    name
    address
    description
    author
    templated
    templateSourceLanguageAddress
    templateAppliedParams
    possibleTemplateParams
    sourceCodeLink
`,LanguageClient=class{constructor(e){_LanguageClient_apolloClient.set(this,void 0),__classPrivateFieldSet$7(this,_LanguageClient_apolloClient,e,"f")}async byAddress(e){let{language:t}=(0,unwrapApolloResult_1$4.default)(await __classPrivateFieldGet$7(this,_LanguageClient_apolloClient,"f").query({query:(0,core_1$4.gql)`query byAddress($address: String!) {
                language(address: $address) {
                    ${LANGUAGE_COMPLETE}
                }
            }`,variables:{address:e}}));return t}async byFilter(e){let{languages:t}=(0,unwrapApolloResult_1$4.default)(await __classPrivateFieldGet$7(this,_LanguageClient_apolloClient,"f").query({query:(0,core_1$4.gql)`query byFilter($filter: String!) {
                languages(filter: $filter) {
                    ${LANGUAGE_COMPLETE}
                }
            }`,variables:{filter:e}}));return t}async all(){return this.byFilter("")}async writeSettings(e,t){let{languageWriteSettings:n}=(0,unwrapApolloResult_1$4.default)(await __classPrivateFieldGet$7(this,_LanguageClient_apolloClient,"f").mutate({mutation:(0,core_1$4.gql)`mutation writeSettings($languageAddress: String!, $settings: String!) {
                languageWriteSettings(languageAddress: $languageAddress, settings: $settings)
            }`,variables:{languageAddress:e,settings:t}}));return n}async applyTemplateAndPublish(e,t){let{languageApplyTemplateAndPublish:n}=(0,unwrapApolloResult_1$4.default)(await __classPrivateFieldGet$7(this,_LanguageClient_apolloClient,"f").mutate({mutation:(0,core_1$4.gql)`mutation languageApplyTemplateAndPublish(
                $sourceLanguageHash: String!,
                $templateData: String!,
            ) {
                languageApplyTemplateAndPublish(sourceLanguageHash: $sourceLanguageHash, templateData: $templateData) {
                    name, address
                }
            }`,variables:{sourceLanguageHash:e,templateData:t}}));return n}async publish(e,t){let{languagePublish:n}=(0,unwrapApolloResult_1$4.default)(await __classPrivateFieldGet$7(this,_LanguageClient_apolloClient,"f").mutate({mutation:(0,core_1$4.gql)`mutation languagePublish(
                $languagePath: String!,
                $languageMeta: LanguageMetaInput!,
            ) {
                languagePublish(languagePath: $languagePath, languageMeta: $languageMeta) {
                    ${LANGUAGE_META}
                }
            }`,variables:{languagePath:e,languageMeta:t}}));return n}async meta(e){let{languageMeta:t}=(0,unwrapApolloResult_1$4.default)(await __classPrivateFieldGet$7(this,_LanguageClient_apolloClient,"f").query({query:(0,core_1$4.gql)`query languageMeta(
                $address: String!,
            ) {
                languageMeta(address: $address) {
                    ${LANGUAGE_META}
                }
            }`,variables:{address:e}}));return t}async source(e){let{languageSource:t}=(0,unwrapApolloResult_1$4.default)(await __classPrivateFieldGet$7(this,_LanguageClient_apolloClient,"f").query({query:(0,core_1$4.gql)`query languageSource(
                $address: String!,
            ) {
                languageSource(address: $address)
            }`,variables:{address:e}}));return t}};LanguageClient$1.LanguageClient=LanguageClient,_LanguageClient_apolloClient=new WeakMap;var NeighbourhoodClient$1={},__classPrivateFieldSet$6=commonjsGlobal&&commonjsGlobal.__classPrivateFieldSet||function(e,t,n,r,o){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?o.call(e,n):o?o.value=n:t.set(e,n),n},__classPrivateFieldGet$6=commonjsGlobal&&commonjsGlobal.__classPrivateFieldGet||function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},__importDefault$4=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},_NeighbourhoodClient_apolloClient;Object.defineProperty(NeighbourhoodClient$1,"__esModule",{value:!0});var core_1$3=require$$0,unwrapApolloResult_1$3=__importDefault$4(unwrapApolloResult$1),NeighbourhoodClient=class{constructor(e){_NeighbourhoodClient_apolloClient.set(this,void 0),__classPrivateFieldSet$6(this,_NeighbourhoodClient_apolloClient,e,"f")}async publishFromPerspective(e,t,n){let{neighbourhoodPublishFromPerspective:r}=(0,unwrapApolloResult_1$3.default)(await __classPrivateFieldGet$6(this,_NeighbourhoodClient_apolloClient,"f").mutate({mutation:(0,core_1$3.gql)`mutation neighbourhoodPublishFromPerspective(
                $linkLanguage: String!,
                $meta: PerspectiveInput!,
                $perspectiveUUID: String!
            ) {
                neighbourhoodPublishFromPerspective(
                    linkLanguage: $linkLanguage,
                    meta: $meta,
                    perspectiveUUID: $perspectiveUUID
                )
            }`,variables:{perspectiveUUID:e,linkLanguage:t,meta:n}}));return r}async joinFromUrl(e){let{neighbourhoodJoinFromUrl:t}=(0,unwrapApolloResult_1$3.default)(await __classPrivateFieldGet$6(this,_NeighbourhoodClient_apolloClient,"f").mutate({mutation:(0,core_1$3.gql)`    mutation neighbourhoodJoinFromUrl($url: String!) {
                neighbourhoodJoinFromUrl(url: $url) {
                    uuid
                    name
                    sharedUrl
                    neighbourhood { 
                        linkLanguage 
                        meta { 
                            links
                                {
                                    author
                                    timestamp
                                    data { source, predicate, target }
                                    proof { valid, invalid, signature, key }
                                }  
                        } 
                    }
                }
            }`,variables:{url:e}}));return t}};NeighbourhoodClient$1.default=NeighbourhoodClient,_NeighbourhoodClient_apolloClient=new WeakMap;var PerspectiveClient$1={},PerspectiveProxy$1={},LinkQuery$1={},__decorate$7=commonjsGlobal&&commonjsGlobal.__decorate||function(e,t,n,r){var o=arguments.length,a=o<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(e,t,n,r);else for(var u=e.length-1;u>=0;u--)(s=e[u])&&(a=(o<3?s(a):o>3?s(t,n,a):s(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},__metadata$7=commonjsGlobal&&commonjsGlobal.__metadata||function(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)};Object.defineProperty(LinkQuery$1,"__esModule",{value:!0}),LinkQuery$1.LinkQuery=void 0;var type_graphql_1$7=typeGraphql,LinkQuery=class{constructor(e){e&&(this.source=e.source,this.predicate=e.predicate,this.target=e.target,e.fromDate&&(this.fromDate=e.fromDate),e.untilDate&&(this.untilDate=e.untilDate),e.limit&&(this.limit=e.limit))}isMatch(e){return!(this.source&&this.source!==e.source||this.predicate&&this.predicate!==e.predicate||this.target&&this.target!==e.target)}};__decorate$7([(0,type_graphql_1$7.Field)({nullable:!0}),__metadata$7("design:type",String)],LinkQuery.prototype,"source",void 0),__decorate$7([(0,type_graphql_1$7.Field)({nullable:!0}),__metadata$7("design:type",String)],LinkQuery.prototype,"target",void 0),__decorate$7([(0,type_graphql_1$7.Field)({nullable:!0}),__metadata$7("design:type",String)],LinkQuery.prototype,"predicate",void 0),__decorate$7([(0,type_graphql_1$7.Field)({nullable:!0}),__metadata$7("design:type",Date)],LinkQuery.prototype,"fromDate",void 0),__decorate$7([(0,type_graphql_1$7.Field)({nullable:!0}),__metadata$7("design:type",Date)],LinkQuery.prototype,"untilDate",void 0),__decorate$7([(0,type_graphql_1$7.Field)({nullable:!0}),__metadata$7("design:type",Number)],LinkQuery.prototype,"limit",void 0),LinkQuery=__decorate$7([(0,type_graphql_1$7.ObjectType)(),(0,type_graphql_1$7.InputType)(),__metadata$7("design:paramtypes",[Object])],LinkQuery),LinkQuery$1.LinkQuery=LinkQuery;var __classPrivateFieldSet$5=commonjsGlobal&&commonjsGlobal.__classPrivateFieldSet||function(e,t,n,r,o){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?o.call(e,n):o?o.value=n:t.set(e,n),n},__classPrivateFieldGet$5=commonjsGlobal&&commonjsGlobal.__classPrivateFieldGet||function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},_PerspectiveProxy_handle,_PerspectiveProxy_client,_PerspectiveProxy_perspectiveLinkAddedCallbacks,_PerspectiveProxy_perspectiveLinkRemovedCallbacks,_PerspectiveProxy_executeAction;Object.defineProperty(PerspectiveProxy$1,"__esModule",{value:!0}),PerspectiveProxy$1.PerspectiveProxy=void 0;var Links_1$1=Links,LinkQuery_1=LinkQuery$1,PerspectiveProxy=class{constructor(e,t){_PerspectiveProxy_handle.set(this,void 0),_PerspectiveProxy_client.set(this,void 0),_PerspectiveProxy_perspectiveLinkAddedCallbacks.set(this,void 0),_PerspectiveProxy_perspectiveLinkRemovedCallbacks.set(this,void 0),_PerspectiveProxy_executeAction.set(this,void 0),__classPrivateFieldSet$5(this,_PerspectiveProxy_perspectiveLinkAddedCallbacks,[],"f"),__classPrivateFieldSet$5(this,_PerspectiveProxy_perspectiveLinkRemovedCallbacks,[],"f"),__classPrivateFieldSet$5(this,_PerspectiveProxy_handle,e,"f"),__classPrivateFieldSet$5(this,_PerspectiveProxy_client,t,"f"),__classPrivateFieldGet$5(this,_PerspectiveProxy_client,"f").addPerspectiveLinkAddedListener(__classPrivateFieldGet$5(this,_PerspectiveProxy_handle,"f").uuid,__classPrivateFieldGet$5(this,_PerspectiveProxy_perspectiveLinkAddedCallbacks,"f")),__classPrivateFieldGet$5(this,_PerspectiveProxy_client,"f").addPerspectiveLinkRemovedListener(__classPrivateFieldGet$5(this,_PerspectiveProxy_handle,"f").uuid,__classPrivateFieldGet$5(this,_PerspectiveProxy_perspectiveLinkRemovedCallbacks,"f")),__classPrivateFieldSet$5(this,_PerspectiveProxy_executeAction,async(n,r)=>{console.log("execute:",n);let o=a=>{if(a)return a.replace("this",r)};for(let a of n)switch(a.action){case"addLink":await this.add(new Links_1$1.Link({source:o(a.source),predicate:o(a.predicate),target:o(a.target)}));break;case"removeLink":let s=await this.get(new LinkQuery_1.LinkQuery({source:o(a.source),predicate:o(a.predicate),target:o(a.target)}));for(let u of s)await this.remove(u);break}},"f")}get uuid(){return __classPrivateFieldGet$5(this,_PerspectiveProxy_handle,"f").uuid}get name(){return __classPrivateFieldGet$5(this,_PerspectiveProxy_handle,"f").name}get sharedUrl(){return __classPrivateFieldGet$5(this,_PerspectiveProxy_handle,"f").sharedUrl}get neighbourhood(){return __classPrivateFieldGet$5(this,_PerspectiveProxy_handle,"f").neighbourhood}async get(e){return await __classPrivateFieldGet$5(this,_PerspectiveProxy_client,"f").queryLinks(__classPrivateFieldGet$5(this,_PerspectiveProxy_handle,"f").uuid,e)}async infer(e){return await __classPrivateFieldGet$5(this,_PerspectiveProxy_client,"f").queryProlog(__classPrivateFieldGet$5(this,_PerspectiveProxy_handle,"f").uuid,e)}async add(e){return await __classPrivateFieldGet$5(this,_PerspectiveProxy_client,"f").addLink(__classPrivateFieldGet$5(this,_PerspectiveProxy_handle,"f").uuid,e)}async update(e,t){return await __classPrivateFieldGet$5(this,_PerspectiveProxy_client,"f").updateLink(__classPrivateFieldGet$5(this,_PerspectiveProxy_handle,"f").uuid,e,t)}async remove(e){return await __classPrivateFieldGet$5(this,_PerspectiveProxy_client,"f").removeLink(__classPrivateFieldGet$5(this,_PerspectiveProxy_handle,"f").uuid,e)}async addListener(e,t){e==="link-added"?__classPrivateFieldGet$5(this,_PerspectiveProxy_perspectiveLinkAddedCallbacks,"f").push(t):e==="link-removed"&&__classPrivateFieldGet$5(this,_PerspectiveProxy_perspectiveLinkRemovedCallbacks,"f").push(t)}async removeListener(e,t){if(e==="link-added"){let n=__classPrivateFieldGet$5(this,_PerspectiveProxy_perspectiveLinkAddedCallbacks,"f").indexOf(t);__classPrivateFieldGet$5(this,_PerspectiveProxy_perspectiveLinkAddedCallbacks,"f").splice(n,1)}else if(e==="link-removed"){let n=__classPrivateFieldGet$5(this,_PerspectiveProxy_perspectiveLinkRemovedCallbacks,"f").indexOf(t);__classPrivateFieldGet$5(this,_PerspectiveProxy_perspectiveLinkRemovedCallbacks,"f").splice(n,1)}}async snapshot(){return __classPrivateFieldGet$5(this,_PerspectiveProxy_client,"f").snapshotByUUID(__classPrivateFieldGet$5(this,_PerspectiveProxy_handle,"f").uuid)}async loadSnapshot(e){for(let t of e.links)await this.add(t.data)}async getSingleTarget(e){delete e.target;let t=await this.get(e);return t.length?t[0].data.target:null}async setSingleTarget(e){let t=new LinkQuery_1.LinkQuery({source:e.source,predicate:e.predicate}),n=await this.get(t);for(let r of n)await this.remove(r);await this.add(e)}async sdnaFlows(){return(await this.infer("register_sdna_flow(X, _)")).map(e=>e.X)}async availableFlows(e){return(await this.infer(`flowable("${e}", F), register_sdna_flow(X, F)`)).map(t=>t.X)}async startFlow(flowName,exprAddr){let startAction=await this.infer(`start_action(Action, F), register_sdna_flow("${flowName}", F)`);startAction=eval(startAction[0].Action),await __classPrivateFieldGet$5(this,_PerspectiveProxy_executeAction,"f").call(this,startAction,exprAddr)}async expressionsInFlowState(e,t){return(await this.infer(`register_sdna_flow("${e}", F), flow_state(X, ${t}, F)`)).map(n=>n.X)}async flowState(e,t){return(await this.infer(`register_sdna_flow("${e}", F), flow_state("${t}", X, F)`))[0].X}async flowActions(e,t){return(await this.infer(`register_sdna_flow("${e}", Flow), flow_state("${t}", State, Flow), action(State, Name, _, _)`)).map(n=>n.Name)}async runFlowAction(flowName,exprAddr,actionName){let action=await this.infer(`register_sdna_flow("${flowName}", Flow), flow_state("${exprAddr}", State, Flow), action(State, "${actionName}", _, Action)`);action=eval(action[0].Action),await __classPrivateFieldGet$5(this,_PerspectiveProxy_executeAction,"f").call(this,action,exprAddr)}};PerspectiveProxy$1.PerspectiveProxy=PerspectiveProxy,_PerspectiveProxy_handle=new WeakMap,_PerspectiveProxy_client=new WeakMap,_PerspectiveProxy_perspectiveLinkAddedCallbacks=new WeakMap,_PerspectiveProxy_perspectiveLinkRemovedCallbacks=new WeakMap,_PerspectiveProxy_executeAction=new WeakMap;var __classPrivateFieldSet$4=commonjsGlobal&&commonjsGlobal.__classPrivateFieldSet||function(e,t,n,r,o){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?o.call(e,n):o?o.value=n:t.set(e,n),n},__classPrivateFieldGet$4=commonjsGlobal&&commonjsGlobal.__classPrivateFieldGet||function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},__importDefault$3=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},_PerspectiveClient_apolloClient,_PerspectiveClient_perspectiveAddedCallbacks,_PerspectiveClient_perspectiveUpdatedCallbacks,_PerspectiveClient_perspectiveRemovedCallbacks;Object.defineProperty(PerspectiveClient$1,"__esModule",{value:!0});var core_1$2=require$$0,unwrapApolloResult_1$2=__importDefault$3(unwrapApolloResult$1),PerspectiveProxy_1=PerspectiveProxy$1,LINK_EXPRESSION_FIELDS=`
author
timestamp
data { source, predicate, target }
proof { valid, invalid, signature, key }
`,PERSPECTIVE_HANDLE_FIELDS=`
uuid
name
sharedUrl
neighbourhood { 
    linkLanguage 
    meta { 
        links
            {
                author
                timestamp
                data { source, predicate, target }
                proof { valid, invalid, signature, key }
            }  
    } 
}
`,PerspectiveClient=class{constructor(e,t=!0){_PerspectiveClient_apolloClient.set(this,void 0),_PerspectiveClient_perspectiveAddedCallbacks.set(this,void 0),_PerspectiveClient_perspectiveUpdatedCallbacks.set(this,void 0),_PerspectiveClient_perspectiveRemovedCallbacks.set(this,void 0),__classPrivateFieldSet$4(this,_PerspectiveClient_apolloClient,e,"f"),__classPrivateFieldSet$4(this,_PerspectiveClient_perspectiveAddedCallbacks,[],"f"),__classPrivateFieldSet$4(this,_PerspectiveClient_perspectiveUpdatedCallbacks,[],"f"),__classPrivateFieldSet$4(this,_PerspectiveClient_perspectiveRemovedCallbacks,[],"f"),t&&(this.subscribePerspectiveAdded(),this.subscribePerspectiveUpdated(),this.subscribePerspectiveRemoved())}async all(){let{perspectives:e}=(0,unwrapApolloResult_1$2.default)(await __classPrivateFieldGet$4(this,_PerspectiveClient_apolloClient,"f").query({query:(0,core_1$2.gql)`query perspectives {
                perspectives {
                    ${PERSPECTIVE_HANDLE_FIELDS}
                }
                
            }`}));return e.map(t=>new PerspectiveProxy_1.PerspectiveProxy(t,this))}async byUUID(e){let{perspective:t}=(0,unwrapApolloResult_1$2.default)(await __classPrivateFieldGet$4(this,_PerspectiveClient_apolloClient,"f").query({query:(0,core_1$2.gql)`query perspective($uuid: String!) {
                perspective(uuid: $uuid) {
                    ${PERSPECTIVE_HANDLE_FIELDS}
                }
            }`,variables:{uuid:e}}));return t?new PerspectiveProxy_1.PerspectiveProxy(t,this):null}async snapshotByUUID(e){let{perspectiveSnapshot:t}=(0,unwrapApolloResult_1$2.default)(await __classPrivateFieldGet$4(this,_PerspectiveClient_apolloClient,"f").query({query:(0,core_1$2.gql)`query perspectiveSnapshot($uuid: String!) {
                perspectiveSnapshot(uuid: $uuid) {
                    links { ${LINK_EXPRESSION_FIELDS} }
                }
            }`,variables:{uuid:e}}));return t}async publishSnapshotByUUID(e){let{perspectivePublishSnapshot:t}=(0,unwrapApolloResult_1$2.default)(await __classPrivateFieldGet$4(this,_PerspectiveClient_apolloClient,"f").mutate({mutation:(0,core_1$2.gql)`mutation perspectivePublishSnapshot($uuid: String!) {
                perspectivePublishSnapshot(uuid: $uuid)
            }`,variables:{uuid:e}}));return t}async queryLinks(e,t){let{perspectiveQueryLinks:n}=(0,unwrapApolloResult_1$2.default)(await __classPrivateFieldGet$4(this,_PerspectiveClient_apolloClient,"f").query({query:(0,core_1$2.gql)`query perspectiveQueryLinks($uuid: String!, $query: LinkQuery!) {
                perspectiveQueryLinks(query: $query, uuid: $uuid) {
                    ${LINK_EXPRESSION_FIELDS}
                }
            }`,variables:{uuid:e,query:t}}));return n}async queryProlog(e,t){let{perspectiveQueryProlog:n}=(0,unwrapApolloResult_1$2.default)(await __classPrivateFieldGet$4(this,_PerspectiveClient_apolloClient,"f").query({query:(0,core_1$2.gql)`query perspectiveQueryProlog($uuid: String!, $query: String!) {
                perspectiveQueryProlog(uuid: $uuid, query: $query)
            }`,variables:{uuid:e,query:t}}));return JSON.parse(n)}async add(e){let{perspectiveAdd:t}=(0,unwrapApolloResult_1$2.default)(await __classPrivateFieldGet$4(this,_PerspectiveClient_apolloClient,"f").mutate({mutation:(0,core_1$2.gql)`mutation perspectiveAdd($name: String!) {
                perspectiveAdd(name: $name) {
                    ${PERSPECTIVE_HANDLE_FIELDS}
                }
            }`,variables:{name:e}}));return new PerspectiveProxy_1.PerspectiveProxy(t,this)}async update(e,t){let{perspectiveUpdate:n}=(0,unwrapApolloResult_1$2.default)(await __classPrivateFieldGet$4(this,_PerspectiveClient_apolloClient,"f").mutate({mutation:(0,core_1$2.gql)`mutation perspectiveUpdate($uuid: String!, $name: String!) {
                perspectiveUpdate(uuid: $uuid, name: $name) {
                    ${PERSPECTIVE_HANDLE_FIELDS}
                }
            }`,variables:{uuid:e,name:t}}));return new PerspectiveProxy_1.PerspectiveProxy(n,this)}async remove(e){return(0,unwrapApolloResult_1$2.default)(await __classPrivateFieldGet$4(this,_PerspectiveClient_apolloClient,"f").mutate({mutation:(0,core_1$2.gql)`mutation perspectiveRemove($uuid: String!) {
                perspectiveRemove(uuid: $uuid)
            }`,variables:{uuid:e}}))}async addLink(e,t){let{perspectiveAddLink:n}=(0,unwrapApolloResult_1$2.default)(await __classPrivateFieldGet$4(this,_PerspectiveClient_apolloClient,"f").mutate({mutation:(0,core_1$2.gql)`mutation perspectiveAddLink($uuid: String!, $link: LinkInput!){
                perspectiveAddLink(link: $link, uuid: $uuid) {
                    ${LINK_EXPRESSION_FIELDS}
                }
            }`,variables:{uuid:e,link:t}}));return n}async updateLink(e,t,n){let{perspectiveUpdateLink:r}=(0,unwrapApolloResult_1$2.default)(await __classPrivateFieldGet$4(this,_PerspectiveClient_apolloClient,"f").mutate({mutation:(0,core_1$2.gql)`mutation perspectiveUpdateLink(
                $uuid: String!, 
                $newLink: LinkInput!
                $oldLink: LinkExpressionInput!
            ){
                perspectiveUpdateLink(
                    newLink: $newLink, 
                    oldLink: $oldLink, 
                    uuid: $uuid
                ) {
                    ${LINK_EXPRESSION_FIELDS}
                }
            }`,variables:{uuid:e,oldLink:t,newLink:n}}));return r}async removeLink(e,t){return(0,unwrapApolloResult_1$2.default)(await __classPrivateFieldGet$4(this,_PerspectiveClient_apolloClient,"f").mutate({mutation:(0,core_1$2.gql)`mutation perspectiveRemoveLink($link: LinkExpressionInput!, $uuid: String!) {
                perspectiveRemoveLink(link: $link, uuid: $uuid)
            }`,variables:{uuid:e,link:t}}))}addPerspectiveAddedListener(e){__classPrivateFieldGet$4(this,_PerspectiveClient_perspectiveAddedCallbacks,"f").push(e)}subscribePerspectiveAdded(){__classPrivateFieldGet$4(this,_PerspectiveClient_apolloClient,"f").subscribe({query:(0,core_1$2.gql)` subscription {
                perspectiveAdded { ${PERSPECTIVE_HANDLE_FIELDS} }
            }   
        `}).subscribe({next:e=>{__classPrivateFieldGet$4(this,_PerspectiveClient_perspectiveAddedCallbacks,"f").forEach(t=>{t(e.data.perspectiveAdded)})},error:e=>console.error(e)})}addPerspectiveUpdatedListener(e){__classPrivateFieldGet$4(this,_PerspectiveClient_perspectiveUpdatedCallbacks,"f").push(e)}subscribePerspectiveUpdated(){__classPrivateFieldGet$4(this,_PerspectiveClient_apolloClient,"f").subscribe({query:(0,core_1$2.gql)` subscription {
                perspectiveUpdated { ${PERSPECTIVE_HANDLE_FIELDS} }
            }   
        `}).subscribe({next:e=>{__classPrivateFieldGet$4(this,_PerspectiveClient_perspectiveUpdatedCallbacks,"f").forEach(t=>{t(e.data.perspectiveUpdated)})},error:e=>console.error(e)})}addPerspectiveRemovedListener(e){__classPrivateFieldGet$4(this,_PerspectiveClient_perspectiveRemovedCallbacks,"f").push(e)}subscribePerspectiveRemoved(){__classPrivateFieldGet$4(this,_PerspectiveClient_apolloClient,"f").subscribe({query:(0,core_1$2.gql)` subscription {
                perspectiveRemoved
            }   
        `}).subscribe({next:e=>{__classPrivateFieldGet$4(this,_PerspectiveClient_perspectiveRemovedCallbacks,"f").forEach(t=>{t(e.data.perspectiveRemoved)})},error:e=>console.error(e)})}async addPerspectiveLinkAddedListener(e,t){__classPrivateFieldGet$4(this,_PerspectiveClient_apolloClient,"f").subscribe({query:(0,core_1$2.gql)` subscription {
                perspectiveLinkAdded(uuid: "${e}") { ${LINK_EXPRESSION_FIELDS} }
            }   
        `}).subscribe({next:n=>{t.forEach(r=>{r(n.data.perspectiveLinkAdded)})},error:n=>console.error(n)}),await new Promise(n=>setTimeout(n,500))}async addPerspectiveLinkRemovedListener(e,t){__classPrivateFieldGet$4(this,_PerspectiveClient_apolloClient,"f").subscribe({query:(0,core_1$2.gql)` subscription {
                perspectiveLinkRemoved(uuid: "${e}") { ${LINK_EXPRESSION_FIELDS} }
            }   
        `}).subscribe({next:n=>{t.forEach(r=>{r(n.data.perspectiveLinkRemoved)})},error:n=>console.error(n)}),await new Promise(n=>setTimeout(n,500))}};PerspectiveClient$1.default=PerspectiveClient,_PerspectiveClient_apolloClient=new WeakMap,_PerspectiveClient_perspectiveAddedCallbacks=new WeakMap,_PerspectiveClient_perspectiveUpdatedCallbacks=new WeakMap,_PerspectiveClient_perspectiveRemovedCallbacks=new WeakMap;var RuntimeClient$1={},__classPrivateFieldSet$3=commonjsGlobal&&commonjsGlobal.__classPrivateFieldSet||function(e,t,n,r,o){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?o.call(e,n):o?o.value=n:t.set(e,n),n},__classPrivateFieldGet$3=commonjsGlobal&&commonjsGlobal.__classPrivateFieldGet||function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},__importDefault$2=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},_RuntimeClient_apolloClient,_RuntimeClient_messageReceivedCallbacks,_RuntimeClient_exceptionOccurredCallbacks;Object.defineProperty(RuntimeClient$1,"__esModule",{value:!0});var core_1$1=require$$0,unwrapApolloResult_1$1=__importDefault$2(unwrapApolloResult$1),PERSPECTIVE_EXPRESSION_FIELDS=`
author
timestamp
data { 
    links {
        author
        timestamp
        data { source, predicate, target }
        proof { valid, invalid, signature, key }
    }  
}
proof { valid, invalid, signature, key }
`,RuntimeClient=class{constructor(e,t=!0){_RuntimeClient_apolloClient.set(this,void 0),_RuntimeClient_messageReceivedCallbacks.set(this,void 0),_RuntimeClient_exceptionOccurredCallbacks.set(this,void 0),__classPrivateFieldSet$3(this,_RuntimeClient_apolloClient,e,"f"),__classPrivateFieldSet$3(this,_RuntimeClient_messageReceivedCallbacks,[],"f"),__classPrivateFieldSet$3(this,_RuntimeClient_exceptionOccurredCallbacks,[],"f"),t&&(this.subscribeMessageReceived(),this.subscribeExceptionOccurred())}async info(){let{runtimeInfo:e}=(0,unwrapApolloResult_1$1.default)(await __classPrivateFieldGet$3(this,_RuntimeClient_apolloClient,"f").query({query:(0,core_1$1.gql)`query runtimeInfo {
                runtimeInfo {
                    ad4mExecutorVersion
                }
            }`}));return e}async quit(){return(0,unwrapApolloResult_1$1.default)(await __classPrivateFieldGet$3(this,_RuntimeClient_apolloClient,"f").mutate({mutation:(0,core_1$1.gql)`mutation runtimeQuit { runtimeQuit }`})).runtimeQuit}async openLink(e){let{runtimeOpenLink:t}=(0,unwrapApolloResult_1$1.default)(await __classPrivateFieldGet$3(this,_RuntimeClient_apolloClient,"f").mutate({mutation:(0,core_1$1.gql)`mutation runtimeOpenLink($url: String!) {
                runtimeOpenLink(url: $url)
            }`,variables:{url:e}}));return t}async addTrustedAgents(e){let{addTrustedAgents:t}=(0,unwrapApolloResult_1$1.default)(await __classPrivateFieldGet$3(this,_RuntimeClient_apolloClient,"f").mutate({mutation:(0,core_1$1.gql)`mutation addTrustedAgents($agents: [String!]!) {
                addTrustedAgents(agents: $agents)
            }`,variables:{agents:e}}));return t}async deleteTrustedAgents(e){let{deleteTrustedAgents:t}=(0,unwrapApolloResult_1$1.default)(await __classPrivateFieldGet$3(this,_RuntimeClient_apolloClient,"f").mutate({mutation:(0,core_1$1.gql)`mutation deleteTrustedAgents($agents: [String!]!) {
                deleteTrustedAgents(agents: $agents)
            }`,variables:{agents:e}}));return t}async getTrustedAgents(){let{getTrustedAgents:e}=(0,unwrapApolloResult_1$1.default)(await __classPrivateFieldGet$3(this,_RuntimeClient_apolloClient,"f").query({query:(0,core_1$1.gql)`query getTrustedAgents {
                getTrustedAgents
            }`}));return e}async addKnownLinkLanguageTemplates(e){let{runtimeAddKnownLinkLanguageTemplates:t}=(0,unwrapApolloResult_1$1.default)(await __classPrivateFieldGet$3(this,_RuntimeClient_apolloClient,"f").mutate({mutation:(0,core_1$1.gql)`mutation runtimeAddKnownLinkLanguageTemplates($addresses: [String!]!) {
                runtimeAddKnownLinkLanguageTemplates(addresses: $addresses)
            }`,variables:{addresses:e}}));return t}async removeKnownLinkLanguageTemplates(e){let{runtimeRemoveKnownLinkLanguageTemplates:t}=(0,unwrapApolloResult_1$1.default)(await __classPrivateFieldGet$3(this,_RuntimeClient_apolloClient,"f").mutate({mutation:(0,core_1$1.gql)`mutation runtimeRemoveKnownLinkLanguageTemplates($addresses: [String!]!) {
                runtimeRemoveKnownLinkLanguageTemplates(addresses: $addresses)
            }`,variables:{addresses:e}}));return t}async knownLinkLanguageTemplates(){let{runtimeKnownLinkLanguageTemplates:e}=(0,unwrapApolloResult_1$1.default)(await __classPrivateFieldGet$3(this,_RuntimeClient_apolloClient,"f").query({query:(0,core_1$1.gql)`query runtimeKnownLinkLanguageTemplates {
                runtimeKnownLinkLanguageTemplates
            }`}));return e}async addFriends(e){let{runtimeAddFriends:t}=(0,unwrapApolloResult_1$1.default)(await __classPrivateFieldGet$3(this,_RuntimeClient_apolloClient,"f").mutate({mutation:(0,core_1$1.gql)`mutation runtimeAddFriends($dids: [String!]!) {
                runtimeAddFriends(dids: $dids)
            }`,variables:{dids:e}}));return t}async removeFriends(e){let{runtimeRemoveFriends:t}=(0,unwrapApolloResult_1$1.default)(await __classPrivateFieldGet$3(this,_RuntimeClient_apolloClient,"f").mutate({mutation:(0,core_1$1.gql)`mutation runtimeRemoveFriends($dids: [String!]!) {
                runtimeRemoveFriends(dids: $dids)
            }`,variables:{dids:e}}));return t}async friends(){let{runtimeFriends:e}=(0,unwrapApolloResult_1$1.default)(await __classPrivateFieldGet$3(this,_RuntimeClient_apolloClient,"f").query({query:(0,core_1$1.gql)`query runtimeFriends {
                runtimeFriends
            }`}));return e}async hcAgentInfos(){let{runtimeHcAgentInfos:e}=(0,unwrapApolloResult_1$1.default)(await __classPrivateFieldGet$3(this,_RuntimeClient_apolloClient,"f").query({query:(0,core_1$1.gql)`query runtimeHcAgentInfos {
                runtimeHcAgentInfos
            }`}));return e}async hcAddAgentInfos(e){let{runtimeHcAddAgentInfos:t}=(0,unwrapApolloResult_1$1.default)(await __classPrivateFieldGet$3(this,_RuntimeClient_apolloClient,"f").mutate({mutation:(0,core_1$1.gql)`mutation runtimeHcAddAgentInfos($agentInfos: String!) {
                runtimeHcAddAgentInfos(agentInfos: $agentInfos)
            }`,variables:{agentInfos:e}}));return t}async verifyStringSignedByDid(e,t,n,r){let{runtimeVerifyStringSignedByDid:o}=(0,unwrapApolloResult_1$1.default)(await __classPrivateFieldGet$3(this,_RuntimeClient_apolloClient,"f").mutate({mutation:(0,core_1$1.gql)`query runtimeVerifyStringSignedByDid($did: String!, $didSigningKeyId: String!, $data: String!, $signedData: String!) {
                runtimeVerifyStringSignedByDid(did: $did, didSigningKeyId: $didSigningKeyId, data: $data, signedData: $signedData)
            }`,variables:{did:e,didSigningKeyId:t,data:n,signedData:r}}));return o}async setStatus(e){let{runtimeSetStatus:t}=(0,unwrapApolloResult_1$1.default)(await __classPrivateFieldGet$3(this,_RuntimeClient_apolloClient,"f").mutate({mutation:(0,core_1$1.gql)`mutation runtimeSetStatus($status: PerspectiveInput!) {
                runtimeSetStatus(status: $status)
            }`,variables:{status:e}}));return t}async friendStatus(e){let{runtimeFriendStatus:t}=(0,unwrapApolloResult_1$1.default)(await __classPrivateFieldGet$3(this,_RuntimeClient_apolloClient,"f").query({query:(0,core_1$1.gql)`query runtimeFriendStatus($did: String!) {
                runtimeFriendStatus(did: $did) { ${PERSPECTIVE_EXPRESSION_FIELDS} }
            }`,variables:{did:e}}));return t}async friendSendMessage(e,t){let{runtimeFriendSendMessage:n}=(0,unwrapApolloResult_1$1.default)(await __classPrivateFieldGet$3(this,_RuntimeClient_apolloClient,"f").mutate({mutation:(0,core_1$1.gql)`mutation runtimeFriendSendMessage($did: String!, $message: PerspectiveInput!) {
                runtimeFriendSendMessage(did: $did, message: $message)
            }`,variables:{did:e,message:t}}));return n}async messageInbox(e){let{runtimeMessageInbox:t}=(0,unwrapApolloResult_1$1.default)(await __classPrivateFieldGet$3(this,_RuntimeClient_apolloClient,"f").query({query:(0,core_1$1.gql)`query runtimeMessageInbox($filter: String) {
                runtimeMessageInbox(filter: $filter) { ${PERSPECTIVE_EXPRESSION_FIELDS} }
            }`,variables:{filter:e}}));return t}async messageOutbox(e){let{runtimeMessageOutbox:t}=(0,unwrapApolloResult_1$1.default)(await __classPrivateFieldGet$3(this,_RuntimeClient_apolloClient,"f").query({query:(0,core_1$1.gql)`query runtimeMessageOutbox($filter: String) {
                runtimeMessageOutbox(filter: $filter) { 
                    recipient,
                    message {
                        ${PERSPECTIVE_EXPRESSION_FIELDS} 
                    }
                }
            }`,variables:{filter:e}}));return t}addMessageCallback(e){__classPrivateFieldGet$3(this,_RuntimeClient_messageReceivedCallbacks,"f").push(e)}subscribeMessageReceived(){__classPrivateFieldGet$3(this,_RuntimeClient_apolloClient,"f").subscribe({query:(0,core_1$1.gql)` subscription {
                runtimeMessageReceived { ${PERSPECTIVE_EXPRESSION_FIELDS} }
            }   
        `}).subscribe({next:e=>{__classPrivateFieldGet$3(this,_RuntimeClient_messageReceivedCallbacks,"f").forEach(t=>{t(e.data.runtimeMessageReceived)})},error:e=>console.error(e)})}addExceptionCallback(e){__classPrivateFieldGet$3(this,_RuntimeClient_exceptionOccurredCallbacks,"f").push(e)}subscribeExceptionOccurred(){__classPrivateFieldGet$3(this,_RuntimeClient_apolloClient,"f").subscribe({query:(0,core_1$1.gql)` subscription {
                exceptionOccurred {
                    title
                    message
                    type
                    addon
                }
            }`}).subscribe({next:e=>{__classPrivateFieldGet$3(this,_RuntimeClient_exceptionOccurredCallbacks,"f").forEach(t=>{t(e.data.exceptionOccurred)})},error:e=>console.error(e)})}};RuntimeClient$1.default=RuntimeClient,_RuntimeClient_apolloClient=new WeakMap,_RuntimeClient_messageReceivedCallbacks=new WeakMap,_RuntimeClient_exceptionOccurredCallbacks=new WeakMap;var ExpressionClient$1={},__classPrivateFieldSet$2=commonjsGlobal&&commonjsGlobal.__classPrivateFieldSet||function(e,t,n,r,o){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?o.call(e,n):o?o.value=n:t.set(e,n),n},__classPrivateFieldGet$2=commonjsGlobal&&commonjsGlobal.__classPrivateFieldGet||function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},__importDefault$1=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},_ExpressionClient_apolloClient;Object.defineProperty(ExpressionClient$1,"__esModule",{value:!0});var core_1=require$$0,unwrapApolloResult_1=__importDefault$1(unwrapApolloResult$1),ExpressionClient=class{constructor(e){_ExpressionClient_apolloClient.set(this,void 0),__classPrivateFieldSet$2(this,_ExpressionClient_apolloClient,e,"f")}async get(e){let{expression:t}=(0,unwrapApolloResult_1.default)(await __classPrivateFieldGet$2(this,_ExpressionClient_apolloClient,"f").query({query:(0,core_1.gql)`query expression($url: String!) {
                expression(url: $url) {
                    author
                    timestamp
                    data
                    language {
                        address
                    }
                    proof {
                        valid
                        invalid
                    }
                }
            }`,variables:{url:e}}));return t}async getMany(e){let{expressionMany:t}=(0,unwrapApolloResult_1.default)(await __classPrivateFieldGet$2(this,_ExpressionClient_apolloClient,"f").query({query:(0,core_1.gql)`query expressionMany($urls: [String!]!) {
                expressionMany(urls: $urls) {
                    author
                    timestamp
                    data
                    language {
                        address
                    }
                    proof {
                        valid
                        invalid
                    }
                }
            }`,variables:{urls:e}}));return t}async getRaw(e){let{expressionRaw:t}=(0,unwrapApolloResult_1.default)(await __classPrivateFieldGet$2(this,_ExpressionClient_apolloClient,"f").query({query:(0,core_1.gql)`query expressionRaw($url: String!) {
                expressionRaw(url: $url)
            }`,variables:{url:e}}));return t}async create(e,t){e=JSON.stringify(e);let{expressionCreate:n}=(0,unwrapApolloResult_1.default)(await __classPrivateFieldGet$2(this,_ExpressionClient_apolloClient,"f").mutate({mutation:(0,core_1.gql)`mutation expressionCreate($content: String!, $languageAddress: String!){
                expressionCreate(content: $content, languageAddress: $languageAddress)
            }`,variables:{content:e,languageAddress:t}}));return n}async interactions(e){let{expressionInteractions:t}=(0,unwrapApolloResult_1.default)(await __classPrivateFieldGet$2(this,_ExpressionClient_apolloClient,"f").query({query:(0,core_1.gql)`query expressionInteractions($url: String!) {
                expressionInteractions(url: $url) { 
                    label
                    name
                    parameters { name, type }
                }
            }`,variables:{url:e}}));return t}async interact(e,t){let{expressionInteract:n}=(0,unwrapApolloResult_1.default)(await __classPrivateFieldGet$2(this,_ExpressionClient_apolloClient,"f").mutate({mutation:(0,core_1.gql)`mutation expressionInteract($url: String!, $interactionCall: InteractionCall!){
                expressionInteract(url: $url, interactionCall: $interactionCall)
            }`,variables:{url:e,interactionCall:t}}));return n}};ExpressionClient$1.default=ExpressionClient,_ExpressionClient_apolloClient=new WeakMap;var __classPrivateFieldSet$1=commonjsGlobal&&commonjsGlobal.__classPrivateFieldSet||function(e,t,n,r,o){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?o.call(e,n):o?o.value=n:t.set(e,n),n},__classPrivateFieldGet$1=commonjsGlobal&&commonjsGlobal.__classPrivateFieldGet||function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},__importDefault=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},_Ad4mClient_apolloClient,_Ad4mClient_agentClient,_Ad4mClient_expressionClient,_Ad4mClient_languageClient,_Ad4mClient_neighbourhoodClient,_Ad4mClient_perspectiveClient,_Ad4mClient_runtimeClient;Object.defineProperty(Ad4mClient$1,"__esModule",{value:!0}),Ad4mClient$1.Ad4mClient=void 0;var AgentClient_1=__importDefault(AgentClient$1),LanguageClient_1=LanguageClient$1,NeighbourhoodClient_1=__importDefault(NeighbourhoodClient$1),PerspectiveClient_1=__importDefault(PerspectiveClient$1),RuntimeClient_1=__importDefault(RuntimeClient$1),ExpressionClient_1=__importDefault(ExpressionClient$1),Ad4mClient=class{constructor(e,t=!0){_Ad4mClient_apolloClient.set(this,void 0),_Ad4mClient_agentClient.set(this,void 0),_Ad4mClient_expressionClient.set(this,void 0),_Ad4mClient_languageClient.set(this,void 0),_Ad4mClient_neighbourhoodClient.set(this,void 0),_Ad4mClient_perspectiveClient.set(this,void 0),_Ad4mClient_runtimeClient.set(this,void 0),__classPrivateFieldSet$1(this,_Ad4mClient_apolloClient,e,"f"),__classPrivateFieldSet$1(this,_Ad4mClient_agentClient,new AgentClient_1.default(e,t),"f"),__classPrivateFieldSet$1(this,_Ad4mClient_expressionClient,new ExpressionClient_1.default(e),"f"),__classPrivateFieldSet$1(this,_Ad4mClient_languageClient,new LanguageClient_1.LanguageClient(e),"f"),__classPrivateFieldSet$1(this,_Ad4mClient_neighbourhoodClient,new NeighbourhoodClient_1.default(e),"f"),__classPrivateFieldSet$1(this,_Ad4mClient_perspectiveClient,new PerspectiveClient_1.default(e,t),"f"),__classPrivateFieldSet$1(this,_Ad4mClient_runtimeClient,new RuntimeClient_1.default(e,t),"f")}get agent(){return __classPrivateFieldGet$1(this,_Ad4mClient_agentClient,"f")}get expression(){return __classPrivateFieldGet$1(this,_Ad4mClient_expressionClient,"f")}get languages(){return __classPrivateFieldGet$1(this,_Ad4mClient_languageClient,"f")}get neighbourhood(){return __classPrivateFieldGet$1(this,_Ad4mClient_neighbourhoodClient,"f")}get perspective(){return __classPrivateFieldGet$1(this,_Ad4mClient_perspectiveClient,"f")}get runtime(){return __classPrivateFieldGet$1(this,_Ad4mClient_runtimeClient,"f")}};Ad4mClient$1.Ad4mClient=Ad4mClient,_Ad4mClient_apolloClient=new WeakMap,_Ad4mClient_agentClient=new WeakMap,_Ad4mClient_expressionClient=new WeakMap,_Ad4mClient_languageClient=new WeakMap,_Ad4mClient_neighbourhoodClient=new WeakMap,_Ad4mClient_perspectiveClient=new WeakMap,_Ad4mClient_runtimeClient=new WeakMap;var Address={};Object.defineProperty(Address,"__esModule",{value:!0});var Exception={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ExceptionType=void 0,function(t){t[t.LanguageIsNotLoaded=0]="LanguageIsNotLoaded",t[t.ExpressionIsNotVerified=1]="ExpressionIsNotVerified",t[t.AgentIsUntrusted=2]="AgentIsUntrusted",t[t.CapabilityRequested=3]="CapabilityRequested"}(e.ExceptionType||(e.ExceptionType={}))})(Exception);var ExpressionRef$1={},__decorate$6=commonjsGlobal&&commonjsGlobal.__decorate||function(e,t,n,r){var o=arguments.length,a=o<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(e,t,n,r);else for(var u=e.length-1;u>=0;u--)(s=e[u])&&(a=(o<3?s(a):o>3?s(t,n,a):s(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},__metadata$6=commonjsGlobal&&commonjsGlobal.__metadata||function(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)};Object.defineProperty(ExpressionRef$1,"__esModule",{value:!0}),ExpressionRef$1.parseExprUrl=ExpressionRef$1.exprRef2String=ExpressionRef$1.ExpressionRef=void 0;var LanguageRef_1=LanguageRef$1,type_graphql_1$6=typeGraphql,ExpressionRef=class{constructor(e,t){this.language=e,this.expression=t}};__decorate$6([(0,type_graphql_1$6.Field)(),__metadata$6("design:type",LanguageRef_1.LanguageRef)],ExpressionRef.prototype,"language",void 0),__decorate$6([(0,type_graphql_1$6.Field)(),__metadata$6("design:type",String)],ExpressionRef.prototype,"expression",void 0),ExpressionRef=__decorate$6([(0,type_graphql_1$6.ObjectType)(),__metadata$6("design:paramtypes",[LanguageRef_1.LanguageRef,String])],ExpressionRef),ExpressionRef$1.ExpressionRef=ExpressionRef;function exprRef2String(e){return e.language.address==="did"?e.expression.toString():`${e.language.address}://${e.expression}`}ExpressionRef$1.exprRef2String=exprRef2String;function parseExprUrl(e){if(e.startsWith("literal://")){let r=new LanguageRef_1.LanguageRef;r.address="literal",r.name="literal";let o=e.substring(10);return new ExpressionRef(r,o)}let t=/^([^:^\s]+):\/\/([\s\S]+)$/.exec(e);if(t&&t.length==3){let r=t[1],o=t[2],a=new LanguageRef_1.LanguageRef;return a.address=r,new ExpressionRef(a,o)}let n=/^did:([^\s]+)$/.exec(e);if(n&&n.length==2){let r=new LanguageRef_1.LanguageRef;return r.address="did",new ExpressionRef(r,e)}throw new Error("Couldn't parse string as expression URL or DID: "+e)}ExpressionRef$1.parseExprUrl=parseExprUrl;var Language={},__decorate$5=commonjsGlobal&&commonjsGlobal.__decorate||function(e,t,n,r){var o=arguments.length,a=o<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(e,t,n,r);else for(var u=e.length-1;u>=0;u--)(s=e[u])&&(a=(o<3?s(a):o>3?s(t,n,a):s(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},__metadata$5=commonjsGlobal&&commonjsGlobal.__metadata||function(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)};Object.defineProperty(Language,"__esModule",{value:!0}),Language.TelepresenceRpcCall=Language.OnlineAgent=Language.InteractionCall=Language.InteractionMeta=Language.InteractionParameter=void 0;var type_graphql_1$5=typeGraphql,InteractionParameter=class{};__decorate$5([(0,type_graphql_1$5.Field)(),__metadata$5("design:type",String)],InteractionParameter.prototype,"name",void 0),__decorate$5([(0,type_graphql_1$5.Field)(),__metadata$5("design:type",String)],InteractionParameter.prototype,"type",void 0),InteractionParameter=__decorate$5([(0,type_graphql_1$5.ObjectType)()],InteractionParameter),Language.InteractionParameter=InteractionParameter;var InteractionMeta=class{};__decorate$5([(0,type_graphql_1$5.Field)(),__metadata$5("design:type",String)],InteractionMeta.prototype,"label",void 0),__decorate$5([(0,type_graphql_1$5.Field)(),__metadata$5("design:type",String)],InteractionMeta.prototype,"name",void 0),__decorate$5([(0,type_graphql_1$5.Field)(e=>[InteractionParameter]),__metadata$5("design:type",Array)],InteractionMeta.prototype,"parameters",void 0),InteractionMeta=__decorate$5([(0,type_graphql_1$5.ObjectType)()],InteractionMeta),Language.InteractionMeta=InteractionMeta;var InteractionCall=class{constructor(e,t){this.name=e,this.parametersStringified=JSON.stringify(t)}get parameters(){return JSON.parse(this.parametersStringified)}};__decorate$5([(0,type_graphql_1$5.Field)(),__metadata$5("design:type",String)],InteractionCall.prototype,"name",void 0),__decorate$5([(0,type_graphql_1$5.Field)(),__metadata$5("design:type",String)],InteractionCall.prototype,"parametersStringified",void 0),InteractionCall=__decorate$5([(0,type_graphql_1$5.InputType)(),__metadata$5("design:paramtypes",[String,Object])],InteractionCall),Language.InteractionCall=InteractionCall;var OnlineAgent=class{};Language.OnlineAgent=OnlineAgent;var TelepresenceRpcCall=class{};Language.TelepresenceRpcCall=TelepresenceRpcCall;var LanguageContext={};Object.defineProperty(LanguageContext,"__esModule",{value:!0}),LanguageContext.Dna=void 0;var Dna=class{};LanguageContext.Dna=Dna;var LanguageHandle$1={},__decorate$4=commonjsGlobal&&commonjsGlobal.__decorate||function(e,t,n,r){var o=arguments.length,a=o<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(e,t,n,r);else for(var u=e.length-1;u>=0;u--)(s=e[u])&&(a=(o<3?s(a):o>3?s(t,n,a):s(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},__metadata$4=commonjsGlobal&&commonjsGlobal.__metadata||function(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)};Object.defineProperty(LanguageHandle$1,"__esModule",{value:!0}),LanguageHandle$1.LanguageHandle=void 0;var type_graphql_1$4=typeGraphql,Icon_1=Icon$1,LanguageHandle=class{};__decorate$4([(0,type_graphql_1$4.Field)(),__metadata$4("design:type",String)],LanguageHandle.prototype,"name",void 0),__decorate$4([(0,type_graphql_1$4.Field)(),__metadata$4("design:type",String)],LanguageHandle.prototype,"address",void 0),__decorate$4([(0,type_graphql_1$4.Field)({nullable:!0}),__metadata$4("design:type",String)],LanguageHandle.prototype,"settings",void 0),__decorate$4([(0,type_graphql_1$4.Field)({nullable:!0}),__metadata$4("design:type",Icon_1.Icon)],LanguageHandle.prototype,"icon",void 0),__decorate$4([(0,type_graphql_1$4.Field)({nullable:!0}),__metadata$4("design:type",Icon_1.Icon)],LanguageHandle.prototype,"constructorIcon",void 0),__decorate$4([(0,type_graphql_1$4.Field)({nullable:!0}),__metadata$4("design:type",Icon_1.Icon)],LanguageHandle.prototype,"settingsIcon",void 0),LanguageHandle=__decorate$4([(0,type_graphql_1$4.ObjectType)()],LanguageHandle),LanguageHandle$1.LanguageHandle=LanguageHandle;var LanguageMeta$1={},__decorate$3=commonjsGlobal&&commonjsGlobal.__decorate||function(e,t,n,r){var o=arguments.length,a=o<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(e,t,n,r);else for(var u=e.length-1;u>=0;u--)(s=e[u])&&(a=(o<3?s(a):o>3?s(t,n,a):s(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},__metadata$3=commonjsGlobal&&commonjsGlobal.__metadata||function(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)};Object.defineProperty(LanguageMeta$1,"__esModule",{value:!0}),LanguageMeta$1.LanguageLanguageInput=LanguageMeta$1.LanguageExpression=LanguageMeta$1.LanguageMetaInternal=LanguageMeta$1.LanguageMetaInput=LanguageMeta$1.LanguageMeta=void 0;var type_graphql_1$3=typeGraphql,Expression_1$2=Expression$1,LanguageMeta=class{};__decorate$3([(0,type_graphql_1$3.Field)(),__metadata$3("design:type",String)],LanguageMeta.prototype,"name",void 0),__decorate$3([(0,type_graphql_1$3.Field)(),__metadata$3("design:type",String)],LanguageMeta.prototype,"address",void 0),__decorate$3([(0,type_graphql_1$3.Field)({nullable:!0}),__metadata$3("design:type",String)],LanguageMeta.prototype,"description",void 0),__decorate$3([(0,type_graphql_1$3.Field)(),__metadata$3("design:type",String)],LanguageMeta.prototype,"author",void 0),__decorate$3([(0,type_graphql_1$3.Field)({nullable:!0}),__metadata$3("design:type",Boolean)],LanguageMeta.prototype,"templated",void 0),__decorate$3([(0,type_graphql_1$3.Field)({nullable:!0}),__metadata$3("design:type",String)],LanguageMeta.prototype,"templateSourceLanguageAddress",void 0),__decorate$3([(0,type_graphql_1$3.Field)({nullable:!0}),__metadata$3("design:type",String)],LanguageMeta.prototype,"templateAppliedParams",void 0),__decorate$3([(0,type_graphql_1$3.Field)(e=>[String],{nullable:!0}),__metadata$3("design:type",Array)],LanguageMeta.prototype,"possibleTemplateParams",void 0),__decorate$3([(0,type_graphql_1$3.Field)({nullable:!0}),__metadata$3("design:type",String)],LanguageMeta.prototype,"sourceCodeLink",void 0),LanguageMeta=__decorate$3([(0,type_graphql_1$3.ObjectType)()],LanguageMeta),LanguageMeta$1.LanguageMeta=LanguageMeta;var LanguageMetaInput=class{constructor(e,t){this.name=e,this.description=t,this.description||(this.description="")}};__decorate$3([(0,type_graphql_1$3.Field)(),__metadata$3("design:type",String)],LanguageMetaInput.prototype,"name",void 0),__decorate$3([(0,type_graphql_1$3.Field)(),__metadata$3("design:type",String)],LanguageMetaInput.prototype,"description",void 0),__decorate$3([(0,type_graphql_1$3.Field)(e=>[String],{nullable:!0}),__metadata$3("design:type",Array)],LanguageMetaInput.prototype,"possibleTemplateParams",void 0),__decorate$3([(0,type_graphql_1$3.Field)({nullable:!0}),__metadata$3("design:type",String)],LanguageMetaInput.prototype,"sourceCodeLink",void 0),LanguageMetaInput=__decorate$3([(0,type_graphql_1$3.InputType)(),__metadata$3("design:paramtypes",[String,String])],LanguageMetaInput),LanguageMeta$1.LanguageMetaInput=LanguageMetaInput;var LanguageMetaInternal=class{};LanguageMeta$1.LanguageMetaInternal=LanguageMetaInternal;var LanguageExpression=class extends(0,Expression_1$2.ExpressionGeneric)(LanguageMetaInternal){};LanguageMeta$1.LanguageExpression=LanguageExpression;var LanguageLanguageInput=class{};LanguageMeta$1.LanguageLanguageInput=LanguageLanguageInput;var Literal$1={},__classPrivateFieldSet=commonjsGlobal&&commonjsGlobal.__classPrivateFieldSet||function(e,t,n,r,o){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?o.call(e,n):o?o.value=n:t.set(e,n),n},__classPrivateFieldGet=commonjsGlobal&&commonjsGlobal.__classPrivateFieldGet||function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},_Literal_literal,_Literal_url;Object.defineProperty(Literal$1,"__esModule",{value:!0}),Literal$1.Literal=void 0;var Literal=class{constructor(){_Literal_literal.set(this,void 0),_Literal_url.set(this,void 0)}static fromUrl(e){if(!e||!e.startsWith("literal://"))throw new Error("Can't create Literal from non-literal URL");let t=new Literal;return __classPrivateFieldSet(t,_Literal_url,e,"f"),t}static from(e){let t=new Literal;return __classPrivateFieldSet(t,_Literal_literal,e,"f"),t}encodeSingleQuote(e){return e=e.split("'").join("\\'"),e}decodeSingleQuote(e){return e=e.split("\\'").join("'"),e}toUrl(){if(__classPrivateFieldGet(this,_Literal_url,"f")&&!__classPrivateFieldGet(this,_Literal_literal,"f"))return __classPrivateFieldGet(this,_Literal_url,"f");if(!__classPrivateFieldGet(this,_Literal_url,"f")&&!__classPrivateFieldGet(this,_Literal_literal,"f"))throw new Error("Can't turn empty Literal into URL");let e;switch(typeof __classPrivateFieldGet(this,_Literal_literal,"f")){case"string":e=`string:${__classPrivateFieldGet(this,_Literal_literal,"f")}`;break;case"number":e=`number:${__classPrivateFieldGet(this,_Literal_literal,"f")}`;break;case"object":e=`json:${JSON.stringify(__classPrivateFieldGet(this,_Literal_literal,"f"))}`;break}return this.encodeSingleQuote(encodeURI(`literal://${e}`))}get(){if(__classPrivateFieldGet(this,_Literal_literal,"f"))return __classPrivateFieldGet(this,_Literal_literal,"f");if(!__classPrivateFieldGet(this,_Literal_url,"f"))throw new Error("Can't render empty Literal");if(!__classPrivateFieldGet(this,_Literal_url,"f").startsWith("literal://"))throw new Error("Can't render Literal from non-literal URL");let e=decodeURI(this.decodeSingleQuote(__classPrivateFieldGet(this,_Literal_url,"f").substring(10)));if(e.startsWith("string:"))return e.substring(7);if(e.startsWith("number:")){let t=e.substring(7);return parseFloat(t)}if(e.startsWith("json:")){let t=e.substring(5);return JSON.parse(t)}throw new Error(`Can't parse unknown literal: ${e}`)}};Literal$1.Literal=Literal,_Literal_literal=new WeakMap,_Literal_url=new WeakMap;var PerspectiveHandle$1={},Neighbourhood$1={},__decorate$2=commonjsGlobal&&commonjsGlobal.__decorate||function(e,t,n,r){var o=arguments.length,a=o<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(e,t,n,r);else for(var u=e.length-1;u>=0;u--)(s=e[u])&&(a=(o<3?s(a):o>3?s(t,n,a):s(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},__metadata$2=commonjsGlobal&&commonjsGlobal.__metadata||function(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)};Object.defineProperty(Neighbourhood$1,"__esModule",{value:!0}),Neighbourhood$1.NeighbourhoodExpression=Neighbourhood$1.Neighbourhood=void 0;var type_graphql_1$2=typeGraphql,Expression_1$1=Expression$1,Perspective_1=Perspective$1,Neighbourhood=class{constructor(e,t){this.linkLanguage=e,this.meta=t}};__decorate$2([(0,type_graphql_1$2.Field)(),__metadata$2("design:type",String)],Neighbourhood.prototype,"linkLanguage",void 0),__decorate$2([(0,type_graphql_1$2.Field)(),__metadata$2("design:type",Perspective_1.Perspective)],Neighbourhood.prototype,"meta",void 0),Neighbourhood=__decorate$2([(0,type_graphql_1$2.ObjectType)(),__metadata$2("design:paramtypes",[String,Perspective_1.Perspective])],Neighbourhood),Neighbourhood$1.Neighbourhood=Neighbourhood;var NeighbourhoodExpression=class extends(0,Expression_1$1.ExpressionGeneric)(Neighbourhood){};NeighbourhoodExpression=__decorate$2([(0,type_graphql_1$2.ObjectType)()],NeighbourhoodExpression),Neighbourhood$1.NeighbourhoodExpression=NeighbourhoodExpression;var __decorate$1=commonjsGlobal&&commonjsGlobal.__decorate||function(e,t,n,r){var o=arguments.length,a=o<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(e,t,n,r);else for(var u=e.length-1;u>=0;u--)(s=e[u])&&(a=(o<3?s(a):o>3?s(t,n,a):s(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},__metadata$1=commonjsGlobal&&commonjsGlobal.__metadata||function(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)};Object.defineProperty(PerspectiveHandle$1,"__esModule",{value:!0}),PerspectiveHandle$1.PerspectiveHandle=void 0;var type_graphql_1$1=typeGraphql,Neighbourhood_1=Neighbourhood$1,PerspectiveHandle=class{constructor(e,t){this.uuid=e,this.name=t}};__decorate$1([(0,type_graphql_1$1.Field)(),__metadata$1("design:type",String)],PerspectiveHandle.prototype,"uuid",void 0),__decorate$1([(0,type_graphql_1$1.Field)(),__metadata$1("design:type",String)],PerspectiveHandle.prototype,"name",void 0),__decorate$1([(0,type_graphql_1$1.Field)(e=>String,{nullable:!0}),__metadata$1("design:type",String)],PerspectiveHandle.prototype,"sharedUrl",void 0),__decorate$1([(0,type_graphql_1$1.Field)(e=>Neighbourhood_1.Neighbourhood,{nullable:!0}),__metadata$1("design:type",Neighbourhood_1.Neighbourhood)],PerspectiveHandle.prototype,"neighbourhood",void 0),PerspectiveHandle=__decorate$1([(0,type_graphql_1$1.ObjectType)(),__metadata$1("design:paramtypes",[String,String])],PerspectiveHandle),PerspectiveHandle$1.PerspectiveHandle=PerspectiveHandle;var PerspectiveDiff$1={},__decorate=commonjsGlobal&&commonjsGlobal.__decorate||function(e,t,n,r){var o=arguments.length,a=o<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(e,t,n,r);else for(var u=e.length-1;u>=0;u--)(s=e[u])&&(a=(o<3?s(a):o>3?s(t,n,a):s(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},__metadata=commonjsGlobal&&commonjsGlobal.__metadata||function(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)};Object.defineProperty(PerspectiveDiff$1,"__esModule",{value:!0}),PerspectiveDiff$1.PerspectiveDiffExpression=PerspectiveDiff$1.PerspectiveDiff=void 0;var type_graphql_1=typeGraphql,Expression_1=Expression$1,Links_1=Links,PerspectiveDiff=class{};__decorate([(0,type_graphql_1.Field)(e=>[Links_1.LinkExpression]),__metadata("design:type",Array)],PerspectiveDiff.prototype,"additions",void 0),__decorate([(0,type_graphql_1.Field)(e=>[Links_1.LinkExpression]),__metadata("design:type",Array)],PerspectiveDiff.prototype,"removals",void 0),PerspectiveDiff=__decorate([(0,type_graphql_1.ObjectType)()],PerspectiveDiff),PerspectiveDiff$1.PerspectiveDiff=PerspectiveDiff;var PerspectiveDiffExpression=class extends(0,Expression_1.ExpressionGeneric)(PerspectiveDiff){};PerspectiveDiffExpression=__decorate([(0,type_graphql_1.ObjectType)()],PerspectiveDiffExpression),PerspectiveDiff$1.PerspectiveDiffExpression=PerspectiveDiffExpression;var typeDefsString=`
type Agent {
  did: String!
  directMessageLanguage: String
  perspective: Perspective
}

type AgentStatus {
  did: String
  didDocument: String
  error: String
  isInitialized: Boolean!
  isUnlocked: Boolean!
}

scalar DateTime

type EntanglementProof {
  deviceKey: String!
  deviceKeySignedByDid: String!
  deviceKeyType: String!
  did: String!
  didSignedByDeviceKey: String
  didSigningKeyId: String!
}

input EntanglementProofInput {
  deviceKey: String!
  deviceKeySignedByDid: String!
  deviceKeyType: String!
  did: String!
  didSignedByDeviceKey: String!
  didSigningKeyId: String!
}

type ExceptionInfo {
  addon: String
  message: String!
  title: String!
  type: Float!
}

type ExpressionProof {
  invalid: Boolean
  key: String!
  signature: String!
  valid: Boolean
}

input ExpressionProofInput {
  invalid: Boolean
  key: String!
  signature: String!
  valid: Boolean
}

type ExpressionRendered {
  author: String!
  data: String!
  icon: Icon!
  language: LanguageRef!
  proof: ExpressionProof!
  timestamp: String!
}

type Icon {
  code: String!
}

input InteractionCall {
  name: String!
  parametersStringified: String!
}

type InteractionMeta {
  label: String!
  name: String!
  parameters: [InteractionParameter!]!
}

type InteractionParameter {
  name: String!
  type: String!
}

type LanguageHandle {
  address: String!
  constructorIcon: Icon
  icon: Icon
  name: String!
  settings: String
  settingsIcon: Icon
}

type LanguageMeta {
  address: String!
  author: String!
  description: String
  name: String!
  possibleTemplateParams: [String!]
  sourceCodeLink: String
  templateAppliedParams: String
  templateSourceLanguageAddress: String
  templated: Boolean
}

input LanguageMetaInput {
  description: String = ""
  name: String!
  possibleTemplateParams: [String!]
  sourceCodeLink: String
}

type LanguageRef {
  address: String!
  name: String!
}

type Link {
  predicate: String
  source: String!
  target: String!
}

type LinkExpression {
  author: String!
  data: Link!
  proof: ExpressionProof!
  timestamp: String!
}

input LinkExpressionInput {
  author: String!
  data: LinkInput!
  proof: ExpressionProofInput!
  timestamp: String!
}

input LinkInput {
  predicate: String
  source: String!
  target: String!
}

input LinkQuery {
  fromDate: DateTime
  limit: Float
  predicate: String
  source: String
  target: String
  untilDate: DateTime
}

type Mutation {
  addTrustedAgents(agents: [String!]!): [String!]!
  agentAddEntanglementProofs(proofs: [EntanglementProofInput!]!): [EntanglementProof!]!
  agentDeleteEntanglementProofs(proofs: [EntanglementProofInput!]!): [EntanglementProof!]!
  agentEntanglementProofPreFlight(deviceKey: String!, deviceKeyType: String!): EntanglementProof!
  agentGenerate(passphrase: String!): AgentStatus!
  agentGenerateJwt(rand: String!, requestId: String!): String!
  agentImport(did: String!, didDocument: String!, keystore: String!, passphrase: String!): AgentStatus!
  agentLock(passphrase: String!): AgentStatus!
  agentPermitCapability(auth: String!): String!
  agentRequestCapability(appDesc: String!, appName: String!, appUrl: String!, capabilities: String!): String!
  agentUnlock(passphrase: String!): AgentStatus!
  agentUpdateDirectMessageLanguage(directMessageLanguage: String!): Agent!
  agentUpdatePublicPerspective(perspective: PerspectiveInput!): Agent!
  deleteTrustedAgents(agents: [String!]!): [String!]!
  expressionCreate(content: String!, languageAddress: String!): String!
  expressionInteract(interactionCall: InteractionCall!, url: String!): String
  languageApplyTemplateAndPublish(sourceLanguageHash: String!, templateData: String!): LanguageRef!
  languagePublish(languageMeta: LanguageMetaInput!, languagePath: String!): LanguageMeta!
  languageWriteSettings(languageAddress: String!, settings: String!): Boolean!
  neighbourhoodJoinFromUrl(url: String!): PerspectiveHandle!
  neighbourhoodPublishFromPerspective(linkLanguage: String!, meta: PerspectiveInput!, perspectiveUUID: String!): String!
  perspectiveAdd(name: String!): PerspectiveHandle!
  perspectiveAddLink(link: LinkInput!, uuid: String!): LinkExpression!
  perspectivePublishSnapshot(uuid: String!): String
  perspectiveRemove(uuid: String!): Boolean!
  perspectiveRemoveLink(link: LinkExpressionInput!, uuid: String!): Boolean!
  perspectiveUpdate(name: String!, uuid: String!): PerspectiveHandle
  perspectiveUpdateLink(newLink: LinkInput!, oldLink: LinkExpressionInput!, uuid: String!): LinkExpression!
  runtimeAddFriends(dids: [String!]!): [String!]!
  runtimeAddKnownLinkLanguageTemplates(addresses: [String!]!): [String!]!
  runtimeFriendSendMessage(did: String!, message: PerspectiveInput!): Boolean!
  runtimeHcAddAgentInfos(agentInfos: String!): Boolean!
  runtimeOpenLink(url: String!): Boolean!
  runtimeQuit: Boolean!
  runtimeRemoveFriends(dids: [String!]!): [String!]!
  runtimeRemoveKnownLinkLanguageTemplates(addresses: [String!]!): [String!]!
  runtimeSetStatus(status: PerspectiveInput!): Boolean!
}

type Neighbourhood {
  linkLanguage: String!
  meta: Perspective!
}

type Perspective {
  links: [LinkExpression!]!
}

type PerspectiveExpression {
  author: String!
  data: Perspective!
  proof: ExpressionProof!
  timestamp: String!
}

type PerspectiveHandle {
  name: String!
  neighbourhood: Neighbourhood
  sharedUrl: String
  uuid: String!
}

input PerspectiveInput {
  links: [LinkExpressionInput!]!
}

type Query {
  agent: Agent!
  agentByDID(did: String!): Agent
  agentGetEntanglementProofs: [EntanglementProof!]!
  agentStatus: AgentStatus!
  expression(url: String!): ExpressionRendered
  expressionInteractions(url: String!): [InteractionMeta!]!
  expressionMany(urls: [String!]!): [ExpressionRendered]!
  expressionRaw(url: String!): String
  getTrustedAgents: [String!]!
  language(address: String!): LanguageHandle
  languageMeta(address: String!): LanguageMeta!
  languageSource(address: String!): String!
  languages(filter: String): [LanguageHandle!]!
  perspective(uuid: String!): PerspectiveHandle
  perspectiveQueryLinks(query: LinkQuery!, uuid: String!): [LinkExpression!]
  perspectiveQueryProlog(query: String!, uuid: String!): String!
  perspectiveSnapshot(uuid: String!): Perspective
  perspectives: [PerspectiveHandle!]!
  runtimeFriendStatus(did: String!): PerspectiveExpression
  runtimeFriends: [String!]!
  runtimeHcAgentInfos: String!
  runtimeInfo: RuntimeInfo!
  runtimeKnownLinkLanguageTemplates: [String!]!
  runtimeMessageInbox(filter: String): [PerspectiveExpression!]!
  runtimeMessageOutbox(filter: String): [SentMessage!]!
  runtimeVerifyStringSignedByDid(data: String!, did: String!, didSigningKeyId: String!, signedData: String!): Boolean!
}

type RuntimeInfo {
  ad4mExecutorVersion: String!
}

type SentMessage {
  message: PerspectiveExpression!
  recipient: String!
}

type Subscription {
  agentStatusChanged: AgentStatus
  agentUpdated: Agent
  exceptionOccurred: ExceptionInfo
  perspectiveAdded: PerspectiveHandle
  perspectiveLinkAdded(uuid: String!): LinkExpression
  perspectiveLinkRemoved(uuid: String!): LinkExpression
  perspectiveRemoved: String
  perspectiveUpdated: PerspectiveHandle
  runtimeMessageReceived: PerspectiveExpression
}
`,typeDefs={typeDefsString};(function(e){var t=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(r,o,a,s){s===void 0&&(s=a),Object.defineProperty(r,s,{enumerable:!0,get:function(){return o[a]}})}:function(r,o,a,s){s===void 0&&(s=a),r[s]=o[a]}),n=commonjsGlobal&&commonjsGlobal.__exportStar||function(r,o){for(var a in r)a!=="default"&&!Object.prototype.hasOwnProperty.call(o,a)&&t(o,r,a)};Object.defineProperty(e,"__esModule",{value:!0}),n(Ad4mClient$1,e),n(Address,e),n(Agent$1,e),n(AgentStatus$1,e),n(Exception,e),n(Expression$1,e),n(ExpressionRef$1,e),n(Icon$1,e),n(Language,e),n(LanguageRef$1,e),n(LanguageContext,e),n(LanguageHandle$1,e),n(LanguageMeta$1,e),n(Links,e),n(Literal$1,e),n(Perspective$1,e),n(PerspectiveHandle$1,e),n(PerspectiveProxy$1,e),n(PerspectiveDiff$1,e),n(LinkQuery$1,e),n(Neighbourhood$1,e),n(typeDefs,e)})(src);var index=getDefaultExportFromCjs(src);module.exports=index}),t0=ae((e,t)=>{v();var n,r,o,a,s,u,l,c,m,me,xe,Ne,He,Ye,Je,vn,La,sr,Zr,zs,za,Hs,lc,Ty;(function(_y){var xy=typeof global=="object"?global:typeof self=="object"?self:typeof this=="object"?this:{};typeof define=="function"&&define.amd?define("tslib",["exports"],function(Dy){_y(Bb(xy,Bb(Dy)))}):typeof t=="object"&&typeof t.exports=="object"?_y(Bb(xy,Bb(t.exports))):_y(Bb(xy));function Bb(Dy,Bg){return Dy!==xy&&(typeof Object.create=="function"?Object.defineProperty(Dy,"__esModule",{value:!0}):Dy.__esModule=!0),function(yy,wy){return Dy[yy]=Bg?Bg(yy,wy):wy}}})(function(_y){var xy=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Dy,Bg){Dy.__proto__=Bg}||function(Dy,Bg){for(var yy in Bg)Object.prototype.hasOwnProperty.call(Bg,yy)&&(Dy[yy]=Bg[yy])};n=function(Dy,Bg){if(typeof Bg!="function"&&Bg!==null)throw new TypeError("Class extends value "+String(Bg)+" is not a constructor or null");xy(Dy,Bg);function yy(){this.constructor=Dy}Dy.prototype=Bg===null?Object.create(Bg):(yy.prototype=Bg.prototype,new yy)},r=Object.assign||function(Dy){for(var Bg,yy=1,wy=arguments.length;yy<wy;yy++){Bg=arguments[yy];for(var Ay in Bg)Object.prototype.hasOwnProperty.call(Bg,Ay)&&(Dy[Ay]=Bg[Ay])}return Dy},o=function(Dy,Bg){var yy={};for(var wy in Dy)Object.prototype.hasOwnProperty.call(Dy,wy)&&Bg.indexOf(wy)<0&&(yy[wy]=Dy[wy]);if(Dy!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Ay=0,wy=Object.getOwnPropertySymbols(Dy);Ay<wy.length;Ay++)Bg.indexOf(wy[Ay])<0&&Object.prototype.propertyIsEnumerable.call(Dy,wy[Ay])&&(yy[wy[Ay]]=Dy[wy[Ay]]);return yy},a=function(Dy,Bg,yy,wy){var Ay=arguments.length,$b=Ay<3?Bg:wy===null?wy=Object.getOwnPropertyDescriptor(Bg,yy):wy,e0;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")$b=Reflect.decorate(Dy,Bg,yy,wy);else for(var Hb=Dy.length-1;Hb>=0;Hb--)(e0=Dy[Hb])&&($b=(Ay<3?e0($b):Ay>3?e0(Bg,yy,$b):e0(Bg,yy))||$b);return Ay>3&&$b&&Object.defineProperty(Bg,yy,$b),$b},s=function(Dy,Bg){return function(yy,wy){Bg(yy,wy,Dy)}},u=function(Dy,Bg){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(Dy,Bg)},l=function(Dy,Bg,yy,wy){function Ay($b){return $b instanceof yy?$b:new yy(function(e0){e0($b)})}return new(yy||(yy=Promise))(function($b,e0){function Hb(l2){try{Jb(wy.next(l2))}catch(y2){e0(y2)}}function Yb(l2){try{Jb(wy.throw(l2))}catch(y2){e0(y2)}}function Jb(l2){l2.done?$b(l2.value):Ay(l2.value).then(Hb,Yb)}Jb((wy=wy.apply(Dy,Bg||[])).next())})},c=function(Dy,Bg){var yy={label:0,sent:function(){if($b[0]&1)throw $b[1];return $b[1]},trys:[],ops:[]},wy,Ay,$b,e0;return e0={next:Hb(0),throw:Hb(1),return:Hb(2)},typeof Symbol=="function"&&(e0[Symbol.iterator]=function(){return this}),e0;function Hb(Jb){return function(l2){return Yb([Jb,l2])}}function Yb(Jb){if(wy)throw new TypeError("Generator is already executing.");for(;yy;)try{if(wy=1,Ay&&($b=Jb[0]&2?Ay.return:Jb[0]?Ay.throw||(($b=Ay.return)&&$b.call(Ay),0):Ay.next)&&!($b=$b.call(Ay,Jb[1])).done)return $b;switch(Ay=0,$b&&(Jb=[Jb[0]&2,$b.value]),Jb[0]){case 0:case 1:$b=Jb;break;case 4:return yy.label++,{value:Jb[1],done:!1};case 5:yy.label++,Ay=Jb[1],Jb=[0];continue;case 7:Jb=yy.ops.pop(),yy.trys.pop();continue;default:if($b=yy.trys,!($b=$b.length>0&&$b[$b.length-1])&&(Jb[0]===6||Jb[0]===2)){yy=0;continue}if(Jb[0]===3&&(!$b||Jb[1]>$b[0]&&Jb[1]<$b[3])){yy.label=Jb[1];break}if(Jb[0]===6&&yy.label<$b[1]){yy.label=$b[1],$b=Jb;break}if($b&&yy.label<$b[2]){yy.label=$b[2],yy.ops.push(Jb);break}$b[2]&&yy.ops.pop(),yy.trys.pop();continue}Jb=Bg.call(Dy,yy)}catch(l2){Jb=[6,l2],Ay=0}finally{wy=$b=0}if(Jb[0]&5)throw Jb[1];return{value:Jb[0]?Jb[1]:void 0,done:!0}}},m=function(Dy,Bg){for(var yy in Dy)yy!=="default"&&!Object.prototype.hasOwnProperty.call(Bg,yy)&&Ty(Bg,Dy,yy)},Ty=Object.create?function(Dy,Bg,yy,wy){wy===void 0&&(wy=yy),Object.defineProperty(Dy,wy,{enumerable:!0,get:function(){return Bg[yy]}})}:function(Dy,Bg,yy,wy){wy===void 0&&(wy=yy),Dy[wy]=Bg[yy]},me=function(Dy){var Bg=typeof Symbol=="function"&&Symbol.iterator,yy=Bg&&Dy[Bg],wy=0;if(yy)return yy.call(Dy);if(Dy&&typeof Dy.length=="number")return{next:function(){return Dy&&wy>=Dy.length&&(Dy=void 0),{value:Dy&&Dy[wy++],done:!Dy}}};throw new TypeError(Bg?"Object is not iterable.":"Symbol.iterator is not defined.")},xe=function(Dy,Bg){var yy=typeof Symbol=="function"&&Dy[Symbol.iterator];if(!yy)return Dy;var wy=yy.call(Dy),Ay,$b=[],e0;try{for(;(Bg===void 0||Bg-- >0)&&!(Ay=wy.next()).done;)$b.push(Ay.value)}catch(Hb){e0={error:Hb}}finally{try{Ay&&!Ay.done&&(yy=wy.return)&&yy.call(wy)}finally{if(e0)throw e0.error}}return $b},Ne=function(){for(var Dy=[],Bg=0;Bg<arguments.length;Bg++)Dy=Dy.concat(xe(arguments[Bg]));return Dy},He=function(){for(var Dy=0,Bg=0,yy=arguments.length;Bg<yy;Bg++)Dy+=arguments[Bg].length;for(var wy=Array(Dy),Ay=0,Bg=0;Bg<yy;Bg++)for(var $b=arguments[Bg],e0=0,Hb=$b.length;e0<Hb;e0++,Ay++)wy[Ay]=$b[e0];return wy},Ye=function(Dy,Bg,yy){if(yy||arguments.length===2)for(var wy=0,Ay=Bg.length,$b;wy<Ay;wy++)($b||!(wy in Bg))&&($b||($b=Array.prototype.slice.call(Bg,0,wy)),$b[wy]=Bg[wy]);return Dy.concat($b||Array.prototype.slice.call(Bg))},Je=function(Dy){return this instanceof Je?(this.v=Dy,this):new Je(Dy)},vn=function(Dy,Bg,yy){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var wy=yy.apply(Dy,Bg||[]),Ay,$b=[];return Ay={},e0("next"),e0("throw"),e0("return"),Ay[Symbol.asyncIterator]=function(){return this},Ay;function e0(Rb){wy[Rb]&&(Ay[Rb]=function(i2){return new Promise(function(s2,E2){$b.push([Rb,i2,s2,E2])>1||Hb(Rb,i2)})})}function Hb(Rb,i2){try{Yb(wy[Rb](i2))}catch(s2){y2($b[0][3],s2)}}function Yb(Rb){Rb.value instanceof Je?Promise.resolve(Rb.value.v).then(Jb,l2):y2($b[0][2],Rb)}function Jb(Rb){Hb("next",Rb)}function l2(Rb){Hb("throw",Rb)}function y2(Rb,i2){Rb(i2),$b.shift(),$b.length&&Hb($b[0][0],$b[0][1])}},La=function(Dy){var Bg,yy;return Bg={},wy("next"),wy("throw",function(Ay){throw Ay}),wy("return"),Bg[Symbol.iterator]=function(){return this},Bg;function wy(Ay,$b){Bg[Ay]=Dy[Ay]?function(e0){return(yy=!yy)?{value:Je(Dy[Ay](e0)),done:Ay==="return"}:$b?$b(e0):e0}:$b}},sr=function(Dy){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Bg=Dy[Symbol.asyncIterator],yy;return Bg?Bg.call(Dy):(Dy=typeof me=="function"?me(Dy):Dy[Symbol.iterator](),yy={},wy("next"),wy("throw"),wy("return"),yy[Symbol.asyncIterator]=function(){return this},yy);function wy($b){yy[$b]=Dy[$b]&&function(e0){return new Promise(function(Hb,Yb){e0=Dy[$b](e0),Ay(Hb,Yb,e0.done,e0.value)})}}function Ay($b,e0,Hb,Yb){Promise.resolve(Yb).then(function(Jb){$b({value:Jb,done:Hb})},e0)}},Zr=function(Dy,Bg){return Object.defineProperty?Object.defineProperty(Dy,"raw",{value:Bg}):Dy.raw=Bg,Dy};var Bb=Object.create?function(Dy,Bg){Object.defineProperty(Dy,"default",{enumerable:!0,value:Bg})}:function(Dy,Bg){Dy.default=Bg};zs=function(Dy){if(Dy&&Dy.__esModule)return Dy;var Bg={};if(Dy!=null)for(var yy in Dy)yy!=="default"&&Object.prototype.hasOwnProperty.call(Dy,yy)&&Ty(Bg,Dy,yy);return Bb(Bg,Dy),Bg},za=function(Dy){return Dy&&Dy.__esModule?Dy:{default:Dy}},Hs=function(Dy,Bg,yy,wy){if(yy==="a"&&!wy)throw new TypeError("Private accessor was defined without a getter");if(typeof Bg=="function"?Dy!==Bg||!wy:!Bg.has(Dy))throw new TypeError("Cannot read private member from an object whose class did not declare it");return yy==="m"?wy:yy==="a"?wy.call(Dy):wy?wy.value:Bg.get(Dy)},lc=function(Dy,Bg,yy,wy,Ay){if(wy==="m")throw new TypeError("Private method is not writable");if(wy==="a"&&!Ay)throw new TypeError("Private accessor was defined without a setter");if(typeof Bg=="function"?Dy!==Bg||!Ay:!Bg.has(Dy))throw new TypeError("Cannot write private member to an object whose class did not declare it");return wy==="a"?Ay.call(Dy,yy):Ay?Ay.value=yy:Bg.set(Dy,yy),yy},_y("__extends",n),_y("__assign",r),_y("__rest",o),_y("__decorate",a),_y("__param",s),_y("__metadata",u),_y("__awaiter",l),_y("__generator",c),_y("__exportStar",m),_y("__createBinding",Ty),_y("__values",me),_y("__read",xe),_y("__spread",Ne),_y("__spreadArrays",He),_y("__spreadArray",Ye),_y("__await",Je),_y("__asyncGenerator",vn),_y("__asyncDelegator",La),_y("__asyncValues",sr),_y("__makeTemplateObject",Zr),_y("__importStar",zs),_y("__importDefault",za),_y("__classPrivateFieldGet",Hs),_y("__classPrivateFieldSet",lc)})}),dy=ae((e,t)=>{v();var n=typeof global=="object"&&global&&global.Object===Object&&global;t.exports=n}),$i=ae((e,t)=>{v();var n=dy(),r=typeof self=="object"&&self&&self.Object===Object&&self,o=n||r||Function("return this")();t.exports=o}),ud=ae((e,t)=>{v();var n=$i(),r=n.Symbol;t.exports=r}),dC=ae((e,t)=>{v();function n(r,o){var a=-1,s=r.length;for(o||(o=Array(s));++a<s;)o[a]=r[a];return o}t.exports=n}),vC=ae((e,t)=>{v();var n=ud(),r=Object.prototype,o=r.hasOwnProperty,a=r.toString,s=n?n.toStringTag:void 0;function u(l){var c=o.call(l,s),m=l[s];try{l[s]=void 0;var me=!0}catch{}var xe=a.call(l);return me&&(c?l[s]=m:delete l[s]),xe}t.exports=u}),_C=ae((e,t)=>{v();var n=Object.prototype,r=n.toString;function o(a){return r.call(a)}t.exports=o}),qs=ae((e,t)=>{v();var n=ud(),r=vC(),o=_C(),a="[object Null]",s="[object Undefined]",u=n?n.toStringTag:void 0;function l(c){return c==null?c===void 0?s:a:u&&u in Object(c)?r(c):o(c)}t.exports=l}),hy=ae((e,t)=>{v();function n(r){var o=typeof r;return r!=null&&(o=="object"||o=="function")}t.exports=n}),my=ae((e,t)=>{v();var n=qs(),r=hy(),o="[object AsyncFunction]",a="[object Function]",s="[object GeneratorFunction]",u="[object Proxy]";function l(c){if(!r(c))return!1;var m=n(c);return m==a||m==s||m==o||m==u}t.exports=l}),DC=ae((e,t)=>{v();var n=$i(),r=n["__core-js_shared__"];t.exports=r}),TC=ae((e,t)=>{v();var n=DC(),r=function(){var a=/[^.]+$/.exec(n&&n.keys&&n.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""}();function o(a){return!!r&&r in a}t.exports=o}),vy=ae((e,t)=>{v();var n=Function.prototype,r=n.toString;function o(a){if(a!=null){try{return r.call(a)}catch{}try{return a+""}catch{}}return""}t.exports=o}),MC=ae((e,t)=>{v();var n=my(),r=TC(),o=hy(),a=vy(),s=/[\\^$.*+?()[\]{}|]/g,u=/^\[object .+?Constructor\]$/,l=Function.prototype,c=Object.prototype,m=l.toString,me=c.hasOwnProperty,xe=RegExp("^"+m.call(me).replace(s,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Ne(He){if(!o(He)||r(He))return!1;var Ye=n(He)?xe:u;return Ye.test(a(He))}t.exports=Ne}),jC=ae((e,t)=>{v();function n(r,o){return r==null?void 0:r[o]}t.exports=n}),Vs=ae((e,t)=>{v();var n=MC(),r=jC();function o(a,s){var u=r(a,s);return n(u)?u:void 0}t.exports=o}),NC=ae((e,t)=>{v();var n=Vs(),r=$i(),o=n(r,"DataView");t.exports=o}),$C=ae((e,t)=>{v();var n=Vs(),r=$i(),o=n(r,"Map");t.exports=o}),qC=ae((e,t)=>{v();var n=Vs(),r=$i(),o=n(r,"Promise");t.exports=o}),zC=ae((e,t)=>{v();var n=Vs(),r=$i(),o=n(r,"Set");t.exports=o}),WC=ae((e,t)=>{v();var n=Vs(),r=$i(),o=n(r,"WeakMap");t.exports=o}),ZC=ae((e,t)=>{v();var n=NC(),r=$C(),o=qC(),a=zC(),s=WC(),u=qs(),l=vy(),c="[object Map]",m="[object Object]",me="[object Promise]",xe="[object Set]",Ne="[object WeakMap]",He="[object DataView]",Ye=l(n),Je=l(r),vn=l(o),La=l(a),sr=l(s),Zr=u;(n&&Zr(new n(new ArrayBuffer(1)))!=He||r&&Zr(new r)!=c||o&&Zr(o.resolve())!=me||a&&Zr(new a)!=xe||s&&Zr(new s)!=Ne)&&(Zr=function(zs){var za=u(zs),Hs=za==m?zs.constructor:void 0,lc=Hs?l(Hs):"";if(lc)switch(lc){case Ye:return He;case Je:return c;case vn:return me;case La:return xe;case sr:return Ne}return za}),t.exports=Zr}),Sy=ae((e,t)=>{v();var n=9007199254740991;function r(o){return typeof o=="number"&&o>-1&&o%1==0&&o<=n}t.exports=r}),Ey=ae((e,t)=>{v();var n=my(),r=Sy();function o(a){return a!=null&&r(a.length)&&!n(a)}t.exports=o}),ky=ae((e,t)=>{v();var n=Array.isArray;t.exports=n}),zl=ae((e,t)=>{v();function n(r){return r!=null&&typeof r=="object"}t.exports=n}),oO=ae((e,t)=>{v();var n=qs(),r=ky(),o=zl(),a="[object String]";function s(u){return typeof u=="string"||!r(u)&&o(u)&&n(u)==a}t.exports=s}),sO=ae((e,t)=>{v();function n(r){for(var o,a=[];!(o=r.next()).done;)a.push(o.value);return a}t.exports=n}),lO=ae((e,t)=>{v();function n(r){var o=-1,a=Array(r.size);return r.forEach(function(s,u){a[++o]=[u,s]}),a}t.exports=n}),fO=ae((e,t)=>{v();function n(r){var o=-1,a=Array(r.size);return r.forEach(function(s){a[++o]=s}),a}t.exports=n}),dO=ae((e,t)=>{v();function n(r){return r.split("")}t.exports=n}),mO=ae((e,t)=>{v();var n="\\ud800-\\udfff",r="\\u0300-\\u036f",o="\\ufe20-\\ufe2f",a="\\u20d0-\\u20ff",s=r+o+a,u="\\ufe0e\\ufe0f",l="\\u200d",c=RegExp("["+l+n+s+u+"]");function m(me){return c.test(me)}t.exports=m}),SO=ae((e,t)=>{v();var n="\\ud800-\\udfff",r="\\u0300-\\u036f",o="\\ufe20-\\ufe2f",a="\\u20d0-\\u20ff",s=r+o+a,u="\\ufe0e\\ufe0f",l="["+n+"]",c="["+s+"]",m="\\ud83c[\\udffb-\\udfff]",me="(?:"+c+"|"+m+")",xe="[^"+n+"]",Ne="(?:\\ud83c[\\udde6-\\uddff]){2}",He="[\\ud800-\\udbff][\\udc00-\\udfff]",Ye="\\u200d",Je=me+"?",vn="["+u+"]?",La="(?:"+Ye+"(?:"+[xe,Ne,He].join("|")+")"+vn+Je+")*",sr=vn+Je+La,Zr="(?:"+[xe+c+"?",c,Ne,He,l].join("|")+")",zs=RegExp(m+"(?="+m+")|"+Zr+sr,"g");function za(Hs){return Hs.match(zs)||[]}t.exports=za}),kO=ae((e,t)=>{v();var n=dO(),r=mO(),o=SO();function a(s){return r(s)?o(s):n(s)}t.exports=a}),CO=ae((e,t)=>{v();function n(r,o){for(var a=-1,s=r==null?0:r.length,u=Array(s);++a<s;)u[a]=o(r[a],a,r);return u}t.exports=n}),TO=ae((e,t)=>{v();var n=CO();function r(o,a){return n(a,function(s){return o[s]})}t.exports=r}),IO=ae((e,t)=>{v();function n(r,o){for(var a=-1,s=Array(r);++a<r;)s[a]=o(a);return s}t.exports=n}),PO=ae((e,t)=>{v();var n=qs(),r=zl(),o="[object Arguments]";function a(s){return r(s)&&n(s)==o}t.exports=a}),NO=ae((e,t)=>{v();var n=PO(),r=zl(),o=Object.prototype,a=o.hasOwnProperty,s=o.propertyIsEnumerable,u=n(function(){return arguments}())?n:function(l){return r(l)&&a.call(l,"callee")&&!s.call(l,"callee")};t.exports=u}),$O=ae((e,t)=>{v();function n(){return!1}t.exports=n}),zO=ae((e,t)=>{v();var n=$i(),r=$O(),o=typeof e=="object"&&e&&!e.nodeType&&e,a=o&&typeof t=="object"&&t&&!t.nodeType&&t,s=a&&a.exports===o,u=s?n.Buffer:void 0,l=u?u.isBuffer:void 0,c=l||r;t.exports=c}),WO=ae((e,t)=>{v();var n=9007199254740991,r=/^(?:0|[1-9]\d*)$/;function o(a,s){var u=typeof a;return s=s!=null?s:n,!!s&&(u=="number"||u!="symbol"&&r.test(a))&&a>-1&&a%1==0&&a<s}t.exports=o}),KO=ae((e,t)=>{v();var n=qs(),r=Sy(),o=zl(),a="[object Arguments]",s="[object Array]",u="[object Boolean]",l="[object Date]",c="[object Error]",m="[object Function]",me="[object Map]",xe="[object Number]",Ne="[object Object]",He="[object RegExp]",Ye="[object Set]",Je="[object String]",vn="[object WeakMap]",La="[object ArrayBuffer]",sr="[object DataView]",Zr="[object Float32Array]",zs="[object Float64Array]",za="[object Int8Array]",Hs="[object Int16Array]",lc="[object Int32Array]",Ty="[object Uint8Array]",_y="[object Uint8ClampedArray]",xy="[object Uint16Array]",Bb="[object Uint32Array]",Dy={};Dy[Zr]=Dy[zs]=Dy[za]=Dy[Hs]=Dy[lc]=Dy[Ty]=Dy[_y]=Dy[xy]=Dy[Bb]=!0,Dy[a]=Dy[s]=Dy[La]=Dy[u]=Dy[sr]=Dy[l]=Dy[c]=Dy[m]=Dy[me]=Dy[xe]=Dy[Ne]=Dy[He]=Dy[Ye]=Dy[Je]=Dy[vn]=!1;function Bg(yy){return o(yy)&&r(yy.length)&&!!Dy[n(yy)]}t.exports=Bg}),QO=ae((e,t)=>{v();function n(r){return function(o){return r(o)}}t.exports=n}),JO=ae((e,t)=>{v();var n=dy(),r=typeof e=="object"&&e&&!e.nodeType&&e,o=r&&typeof t=="object"&&t&&!t.nodeType&&t,a=o&&o.exports===r,s=a&&n.process,u=function(){try{var l=o&&o.require&&o.require("util").types;return l||s&&s.binding&&s.binding("util")}catch{}}();t.exports=u}),tT=ae((e,t)=>{v();var n=KO(),r=QO(),o=JO(),a=o&&o.isTypedArray,s=a?r(a):n;t.exports=s}),nT=ae((e,t)=>{v();var n=IO(),r=NO(),o=ky(),a=zO(),s=WO(),u=tT(),l=Object.prototype,c=l.hasOwnProperty;function m(me,xe){var Ne=o(me),He=!Ne&&r(me),Ye=!Ne&&!He&&a(me),Je=!Ne&&!He&&!Ye&&u(me),vn=Ne||He||Ye||Je,La=vn?n(me.length,String):[],sr=La.length;for(var Zr in me)(xe||c.call(me,Zr))&&!(vn&&(Zr=="length"||Ye&&(Zr=="offset"||Zr=="parent")||Je&&(Zr=="buffer"||Zr=="byteLength"||Zr=="byteOffset")||s(Zr,sr)))&&La.push(Zr);return La}t.exports=m}),oT=ae((e,t)=>{v();var n=Object.prototype;function r(o){var a=o&&o.constructor,s=typeof a=="function"&&a.prototype||n;return o===s}t.exports=r}),sT=ae((e,t)=>{v();function n(r,o){return function(a){return r(o(a))}}t.exports=n}),lT=ae((e,t)=>{v();var n=sT(),r=n(Object.keys,Object);t.exports=r}),fT=ae((e,t)=>{v();var n=oT(),r=lT(),o=Object.prototype,a=o.hasOwnProperty;function s(u){if(!n(u))return r(u);var l=[];for(var c in Object(u))a.call(u,c)&&c!="constructor"&&l.push(c);return l}t.exports=s}),dT=ae((e,t)=>{v();var n=nT(),r=fT(),o=Ey();function a(s){return o(s)?n(s):r(s)}t.exports=a}),mT=ae((e,t)=>{v();var n=TO(),r=dT();function o(a){return a==null?[]:n(a,r(a))}t.exports=o}),yT=ae((e,t)=>{v();var n=ud(),r=dC(),o=ZC(),a=Ey(),s=oO(),u=sO(),l=lO(),c=fO(),m=kO(),me=mT(),xe="[object Map]",Ne="[object Set]",He=n?n.iterator:void 0;function Ye(Je){if(!Je)return[];if(a(Je))return s(Je)?m(Je):r(Je);if(He&&Je[He])return u(Je[He]());var vn=o(Je),La=vn==xe?l:vn==Ne?c:me;return La(Je)}t.exports=Ye}),_T=ae((e,t)=>{t.exports={100:"\u{1F4AF}",1234:"\u{1F522}",umbrella_with_rain_drops:"\u2614",coffee:"\u2615",aries:"\u2648",taurus:"\u2649",sagittarius:"\u2650",capricorn:"\u2651",aquarius:"\u2652",pisces:"\u2653",anchor:"\u2693",white_check_mark:"\u2705",sparkles:"\u2728",question:"\u2753",grey_question:"\u2754",grey_exclamation:"\u2755",exclamation:"\u2757",heavy_exclamation_mark:"\u2757",heavy_plus_sign:"\u2795",heavy_minus_sign:"\u2796",heavy_division_sign:"\u2797",hash:"#\uFE0F\u20E3",keycap_star:"*\uFE0F\u20E3",zero:"0\uFE0F\u20E3",one:"1\uFE0F\u20E3",two:"2\uFE0F\u20E3",three:"3\uFE0F\u20E3",four:"4\uFE0F\u20E3",five:"5\uFE0F\u20E3",six:"6\uFE0F\u20E3",seven:"7\uFE0F\u20E3",eight:"8\uFE0F\u20E3",nine:"9\uFE0F\u20E3",copyright:"\xA9\uFE0F",registered:"\xAE\uFE0F",mahjong:"\u{1F004}",black_joker:"\u{1F0CF}",a:"\u{1F170}\uFE0F",b:"\u{1F171}\uFE0F",o2:"\u{1F17E}\uFE0F",parking:"\u{1F17F}\uFE0F",ab:"\u{1F18E}",cl:"\u{1F191}",cool:"\u{1F192}",free:"\u{1F193}",id:"\u{1F194}",new:"\u{1F195}",ng:"\u{1F196}",ok:"\u{1F197}",sos:"\u{1F198}",up:"\u{1F199}",vs:"\u{1F19A}","flag-ac":"\u{1F1E6}\u{1F1E8}","flag-ad":"\u{1F1E6}\u{1F1E9}","flag-ae":"\u{1F1E6}\u{1F1EA}","flag-af":"\u{1F1E6}\u{1F1EB}","flag-ag":"\u{1F1E6}\u{1F1EC}","flag-ai":"\u{1F1E6}\u{1F1EE}","flag-al":"\u{1F1E6}\u{1F1F1}","flag-am":"\u{1F1E6}\u{1F1F2}","flag-ao":"\u{1F1E6}\u{1F1F4}","flag-aq":"\u{1F1E6}\u{1F1F6}","flag-ar":"\u{1F1E6}\u{1F1F7}","flag-as":"\u{1F1E6}\u{1F1F8}","flag-at":"\u{1F1E6}\u{1F1F9}","flag-au":"\u{1F1E6}\u{1F1FA}","flag-aw":"\u{1F1E6}\u{1F1FC}","flag-ax":"\u{1F1E6}\u{1F1FD}","flag-az":"\u{1F1E6}\u{1F1FF}","flag-ba":"\u{1F1E7}\u{1F1E6}","flag-bb":"\u{1F1E7}\u{1F1E7}","flag-bd":"\u{1F1E7}\u{1F1E9}","flag-be":"\u{1F1E7}\u{1F1EA}","flag-bf":"\u{1F1E7}\u{1F1EB}","flag-bg":"\u{1F1E7}\u{1F1EC}","flag-bh":"\u{1F1E7}\u{1F1ED}","flag-bi":"\u{1F1E7}\u{1F1EE}","flag-bj":"\u{1F1E7}\u{1F1EF}","flag-bl":"\u{1F1E7}\u{1F1F1}","flag-bm":"\u{1F1E7}\u{1F1F2}","flag-bn":"\u{1F1E7}\u{1F1F3}","flag-bo":"\u{1F1E7}\u{1F1F4}","flag-bq":"\u{1F1E7}\u{1F1F6}","flag-br":"\u{1F1E7}\u{1F1F7}","flag-bs":"\u{1F1E7}\u{1F1F8}","flag-bt":"\u{1F1E7}\u{1F1F9}","flag-bv":"\u{1F1E7}\u{1F1FB}","flag-bw":"\u{1F1E7}\u{1F1FC}","flag-by":"\u{1F1E7}\u{1F1FE}","flag-bz":"\u{1F1E7}\u{1F1FF}","flag-ca":"\u{1F1E8}\u{1F1E6}","flag-cc":"\u{1F1E8}\u{1F1E8}","flag-cd":"\u{1F1E8}\u{1F1E9}","flag-cf":"\u{1F1E8}\u{1F1EB}","flag-cg":"\u{1F1E8}\u{1F1EC}","flag-ch":"\u{1F1E8}\u{1F1ED}","flag-ci":"\u{1F1E8}\u{1F1EE}","flag-ck":"\u{1F1E8}\u{1F1F0}","flag-cl":"\u{1F1E8}\u{1F1F1}","flag-cm":"\u{1F1E8}\u{1F1F2}",cn:"\u{1F1E8}\u{1F1F3}","flag-cn":"\u{1F1E8}\u{1F1F3}","flag-co":"\u{1F1E8}\u{1F1F4}","flag-cp":"\u{1F1E8}\u{1F1F5}","flag-cr":"\u{1F1E8}\u{1F1F7}","flag-cu":"\u{1F1E8}\u{1F1FA}","flag-cv":"\u{1F1E8}\u{1F1FB}","flag-cw":"\u{1F1E8}\u{1F1FC}","flag-cx":"\u{1F1E8}\u{1F1FD}","flag-cy":"\u{1F1E8}\u{1F1FE}","flag-cz":"\u{1F1E8}\u{1F1FF}",de:"\u{1F1E9}\u{1F1EA}","flag-de":"\u{1F1E9}\u{1F1EA}","flag-dg":"\u{1F1E9}\u{1F1EC}","flag-dj":"\u{1F1E9}\u{1F1EF}","flag-dk":"\u{1F1E9}\u{1F1F0}","flag-dm":"\u{1F1E9}\u{1F1F2}","flag-do":"\u{1F1E9}\u{1F1F4}","flag-dz":"\u{1F1E9}\u{1F1FF}","flag-ea":"\u{1F1EA}\u{1F1E6}","flag-ec":"\u{1F1EA}\u{1F1E8}","flag-ee":"\u{1F1EA}\u{1F1EA}","flag-eg":"\u{1F1EA}\u{1F1EC}","flag-eh":"\u{1F1EA}\u{1F1ED}","flag-er":"\u{1F1EA}\u{1F1F7}",es:"\u{1F1EA}\u{1F1F8}","flag-es":"\u{1F1EA}\u{1F1F8}","flag-et":"\u{1F1EA}\u{1F1F9}","flag-eu":"\u{1F1EA}\u{1F1FA}","flag-fi":"\u{1F1EB}\u{1F1EE}","flag-fj":"\u{1F1EB}\u{1F1EF}","flag-fk":"\u{1F1EB}\u{1F1F0}","flag-fm":"\u{1F1EB}\u{1F1F2}","flag-fo":"\u{1F1EB}\u{1F1F4}",fr:"\u{1F1EB}\u{1F1F7}","flag-fr":"\u{1F1EB}\u{1F1F7}","flag-ga":"\u{1F1EC}\u{1F1E6}",gb:"\u{1F1EC}\u{1F1E7}",uk:"\u{1F1EC}\u{1F1E7}","flag-gb":"\u{1F1EC}\u{1F1E7}","flag-gd":"\u{1F1EC}\u{1F1E9}","flag-ge":"\u{1F1EC}\u{1F1EA}","flag-gf":"\u{1F1EC}\u{1F1EB}","flag-gg":"\u{1F1EC}\u{1F1EC}","flag-gh":"\u{1F1EC}\u{1F1ED}","flag-gi":"\u{1F1EC}\u{1F1EE}","flag-gl":"\u{1F1EC}\u{1F1F1}","flag-gm":"\u{1F1EC}\u{1F1F2}","flag-gn":"\u{1F1EC}\u{1F1F3}","flag-gp":"\u{1F1EC}\u{1F1F5}","flag-gq":"\u{1F1EC}\u{1F1F6}","flag-gr":"\u{1F1EC}\u{1F1F7}","flag-gs":"\u{1F1EC}\u{1F1F8}","flag-gt":"\u{1F1EC}\u{1F1F9}","flag-gu":"\u{1F1EC}\u{1F1FA}","flag-gw":"\u{1F1EC}\u{1F1FC}","flag-gy":"\u{1F1EC}\u{1F1FE}","flag-hk":"\u{1F1ED}\u{1F1F0}","flag-hm":"\u{1F1ED}\u{1F1F2}","flag-hn":"\u{1F1ED}\u{1F1F3}","flag-hr":"\u{1F1ED}\u{1F1F7}","flag-ht":"\u{1F1ED}\u{1F1F9}","flag-hu":"\u{1F1ED}\u{1F1FA}","flag-ic":"\u{1F1EE}\u{1F1E8}","flag-id":"\u{1F1EE}\u{1F1E9}","flag-ie":"\u{1F1EE}\u{1F1EA}","flag-il":"\u{1F1EE}\u{1F1F1}","flag-im":"\u{1F1EE}\u{1F1F2}","flag-in":"\u{1F1EE}\u{1F1F3}","flag-io":"\u{1F1EE}\u{1F1F4}","flag-iq":"\u{1F1EE}\u{1F1F6}","flag-ir":"\u{1F1EE}\u{1F1F7}","flag-is":"\u{1F1EE}\u{1F1F8}",it:"\u{1F1EE}\u{1F1F9}","flag-it":"\u{1F1EE}\u{1F1F9}","flag-je":"\u{1F1EF}\u{1F1EA}","flag-jm":"\u{1F1EF}\u{1F1F2}","flag-jo":"\u{1F1EF}\u{1F1F4}",jp:"\u{1F1EF}\u{1F1F5}","flag-jp":"\u{1F1EF}\u{1F1F5}","flag-ke":"\u{1F1F0}\u{1F1EA}","flag-kg":"\u{1F1F0}\u{1F1EC}","flag-kh":"\u{1F1F0}\u{1F1ED}","flag-ki":"\u{1F1F0}\u{1F1EE}","flag-km":"\u{1F1F0}\u{1F1F2}","flag-kn":"\u{1F1F0}\u{1F1F3}","flag-kp":"\u{1F1F0}\u{1F1F5}",kr:"\u{1F1F0}\u{1F1F7}","flag-kr":"\u{1F1F0}\u{1F1F7}","flag-kw":"\u{1F1F0}\u{1F1FC}","flag-ky":"\u{1F1F0}\u{1F1FE}","flag-kz":"\u{1F1F0}\u{1F1FF}","flag-la":"\u{1F1F1}\u{1F1E6}","flag-lb":"\u{1F1F1}\u{1F1E7}","flag-lc":"\u{1F1F1}\u{1F1E8}","flag-li":"\u{1F1F1}\u{1F1EE}","flag-lk":"\u{1F1F1}\u{1F1F0}","flag-lr":"\u{1F1F1}\u{1F1F7}","flag-ls":"\u{1F1F1}\u{1F1F8}","flag-lt":"\u{1F1F1}\u{1F1F9}","flag-lu":"\u{1F1F1}\u{1F1FA}","flag-lv":"\u{1F1F1}\u{1F1FB}","flag-ly":"\u{1F1F1}\u{1F1FE}","flag-ma":"\u{1F1F2}\u{1F1E6}","flag-mc":"\u{1F1F2}\u{1F1E8}","flag-md":"\u{1F1F2}\u{1F1E9}","flag-me":"\u{1F1F2}\u{1F1EA}","flag-mf":"\u{1F1F2}\u{1F1EB}","flag-mg":"\u{1F1F2}\u{1F1EC}","flag-mh":"\u{1F1F2}\u{1F1ED}","flag-mk":"\u{1F1F2}\u{1F1F0}","flag-ml":"\u{1F1F2}\u{1F1F1}","flag-mm":"\u{1F1F2}\u{1F1F2}","flag-mn":"\u{1F1F2}\u{1F1F3}","flag-mo":"\u{1F1F2}\u{1F1F4}","flag-mp":"\u{1F1F2}\u{1F1F5}","flag-mq":"\u{1F1F2}\u{1F1F6}","flag-mr":"\u{1F1F2}\u{1F1F7}","flag-ms":"\u{1F1F2}\u{1F1F8}","flag-mt":"\u{1F1F2}\u{1F1F9}","flag-mu":"\u{1F1F2}\u{1F1FA}","flag-mv":"\u{1F1F2}\u{1F1FB}","flag-mw":"\u{1F1F2}\u{1F1FC}","flag-mx":"\u{1F1F2}\u{1F1FD}","flag-my":"\u{1F1F2}\u{1F1FE}","flag-mz":"\u{1F1F2}\u{1F1FF}","flag-na":"\u{1F1F3}\u{1F1E6}","flag-nc":"\u{1F1F3}\u{1F1E8}","flag-ne":"\u{1F1F3}\u{1F1EA}","flag-nf":"\u{1F1F3}\u{1F1EB}","flag-ng":"\u{1F1F3}\u{1F1EC}","flag-ni":"\u{1F1F3}\u{1F1EE}","flag-nl":"\u{1F1F3}\u{1F1F1}","flag-no":"\u{1F1F3}\u{1F1F4}","flag-np":"\u{1F1F3}\u{1F1F5}","flag-nr":"\u{1F1F3}\u{1F1F7}","flag-nu":"\u{1F1F3}\u{1F1FA}","flag-nz":"\u{1F1F3}\u{1F1FF}","flag-om":"\u{1F1F4}\u{1F1F2}","flag-pa":"\u{1F1F5}\u{1F1E6}","flag-pe":"\u{1F1F5}\u{1F1EA}","flag-pf":"\u{1F1F5}\u{1F1EB}","flag-pg":"\u{1F1F5}\u{1F1EC}","flag-ph":"\u{1F1F5}\u{1F1ED}","flag-pk":"\u{1F1F5}\u{1F1F0}","flag-pl":"\u{1F1F5}\u{1F1F1}","flag-pm":"\u{1F1F5}\u{1F1F2}","flag-pn":"\u{1F1F5}\u{1F1F3}","flag-pr":"\u{1F1F5}\u{1F1F7}","flag-ps":"\u{1F1F5}\u{1F1F8}","flag-pt":"\u{1F1F5}\u{1F1F9}","flag-pw":"\u{1F1F5}\u{1F1FC}","flag-py":"\u{1F1F5}\u{1F1FE}","flag-qa":"\u{1F1F6}\u{1F1E6}","flag-re":"\u{1F1F7}\u{1F1EA}","flag-ro":"\u{1F1F7}\u{1F1F4}","flag-rs":"\u{1F1F7}\u{1F1F8}",ru:"\u{1F1F7}\u{1F1FA}","flag-ru":"\u{1F1F7}\u{1F1FA}","flag-rw":"\u{1F1F7}\u{1F1FC}","flag-sa":"\u{1F1F8}\u{1F1E6}","flag-sb":"\u{1F1F8}\u{1F1E7}","flag-sc":"\u{1F1F8}\u{1F1E8}","flag-sd":"\u{1F1F8}\u{1F1E9}","flag-se":"\u{1F1F8}\u{1F1EA}","flag-sg":"\u{1F1F8}\u{1F1EC}","flag-sh":"\u{1F1F8}\u{1F1ED}","flag-si":"\u{1F1F8}\u{1F1EE}","flag-sj":"\u{1F1F8}\u{1F1EF}","flag-sk":"\u{1F1F8}\u{1F1F0}","flag-sl":"\u{1F1F8}\u{1F1F1}","flag-sm":"\u{1F1F8}\u{1F1F2}","flag-sn":"\u{1F1F8}\u{1F1F3}","flag-so":"\u{1F1F8}\u{1F1F4}","flag-sr":"\u{1F1F8}\u{1F1F7}","flag-ss":"\u{1F1F8}\u{1F1F8}","flag-st":"\u{1F1F8}\u{1F1F9}","flag-sv":"\u{1F1F8}\u{1F1FB}","flag-sx":"\u{1F1F8}\u{1F1FD}","flag-sy":"\u{1F1F8}\u{1F1FE}","flag-sz":"\u{1F1F8}\u{1F1FF}","flag-ta":"\u{1F1F9}\u{1F1E6}","flag-tc":"\u{1F1F9}\u{1F1E8}","flag-td":"\u{1F1F9}\u{1F1E9}","flag-tf":"\u{1F1F9}\u{1F1EB}","flag-tg":"\u{1F1F9}\u{1F1EC}","flag-th":"\u{1F1F9}\u{1F1ED}","flag-tj":"\u{1F1F9}\u{1F1EF}","flag-tk":"\u{1F1F9}\u{1F1F0}","flag-tl":"\u{1F1F9}\u{1F1F1}","flag-tm":"\u{1F1F9}\u{1F1F2}","flag-tn":"\u{1F1F9}\u{1F1F3}","flag-to":"\u{1F1F9}\u{1F1F4}","flag-tr":"\u{1F1F9}\u{1F1F7}","flag-tt":"\u{1F1F9}\u{1F1F9}","flag-tv":"\u{1F1F9}\u{1F1FB}","flag-tw":"\u{1F1F9}\u{1F1FC}","flag-tz":"\u{1F1F9}\u{1F1FF}","flag-ua":"\u{1F1FA}\u{1F1E6}","flag-ug":"\u{1F1FA}\u{1F1EC}","flag-um":"\u{1F1FA}\u{1F1F2}","flag-un":"\u{1F1FA}\u{1F1F3}",us:"\u{1F1FA}\u{1F1F8}","flag-us":"\u{1F1FA}\u{1F1F8}","flag-uy":"\u{1F1FA}\u{1F1FE}","flag-uz":"\u{1F1FA}\u{1F1FF}","flag-va":"\u{1F1FB}\u{1F1E6}","flag-vc":"\u{1F1FB}\u{1F1E8}","flag-ve":"\u{1F1FB}\u{1F1EA}","flag-vg":"\u{1F1FB}\u{1F1EC}","flag-vi":"\u{1F1FB}\u{1F1EE}","flag-vn":"\u{1F1FB}\u{1F1F3}","flag-vu":"\u{1F1FB}\u{1F1FA}","flag-wf":"\u{1F1FC}\u{1F1EB}","flag-ws":"\u{1F1FC}\u{1F1F8}","flag-xk":"\u{1F1FD}\u{1F1F0}","flag-ye":"\u{1F1FE}\u{1F1EA}","flag-yt":"\u{1F1FE}\u{1F1F9}","flag-za":"\u{1F1FF}\u{1F1E6}","flag-zm":"\u{1F1FF}\u{1F1F2}","flag-zw":"\u{1F1FF}\u{1F1FC}",koko:"\u{1F201}",sa:"\u{1F202}\uFE0F",u7121:"\u{1F21A}",u6307:"\u{1F22F}",u7981:"\u{1F232}",u7a7a:"\u{1F233}",u5408:"\u{1F234}",u6e80:"\u{1F235}",u6709:"\u{1F236}",u6708:"\u{1F237}\uFE0F",u7533:"\u{1F238}",u5272:"\u{1F239}",u55b6:"\u{1F23A}",ideograph_advantage:"\u{1F250}",accept:"\u{1F251}",cyclone:"\u{1F300}",foggy:"\u{1F301}",closed_umbrella:"\u{1F302}",night_with_stars:"\u{1F303}",sunrise_over_mountains:"\u{1F304}",sunrise:"\u{1F305}",city_sunset:"\u{1F306}",city_sunrise:"\u{1F307}",rainbow:"\u{1F308}",bridge_at_night:"\u{1F309}",ocean:"\u{1F30A}",volcano:"\u{1F30B}",milky_way:"\u{1F30C}",earth_africa:"\u{1F30D}",earth_americas:"\u{1F30E}",earth_asia:"\u{1F30F}",globe_with_meridians:"\u{1F310}",new_moon:"\u{1F311}",waxing_crescent_moon:"\u{1F312}",first_quarter_moon:"\u{1F313}",moon:"\u{1F314}",waxing_gibbous_moon:"\u{1F314}",full_moon:"\u{1F315}",waning_gibbous_moon:"\u{1F316}",last_quarter_moon:"\u{1F317}",waning_crescent_moon:"\u{1F318}",crescent_moon:"\u{1F319}",new_moon_with_face:"\u{1F31A}",first_quarter_moon_with_face:"\u{1F31B}",last_quarter_moon_with_face:"\u{1F31C}",full_moon_with_face:"\u{1F31D}",sun_with_face:"\u{1F31E}",star2:"\u{1F31F}",stars:"\u{1F320}",thermometer:"\u{1F321}\uFE0F",mostly_sunny:"\u{1F324}\uFE0F",sun_small_cloud:"\u{1F324}\uFE0F",barely_sunny:"\u{1F325}\uFE0F",sun_behind_cloud:"\u{1F325}\uFE0F",partly_sunny_rain:"\u{1F326}\uFE0F",sun_behind_rain_cloud:"\u{1F326}\uFE0F",rain_cloud:"\u{1F327}\uFE0F",snow_cloud:"\u{1F328}\uFE0F",lightning:"\u{1F329}\uFE0F",lightning_cloud:"\u{1F329}\uFE0F",tornado:"\u{1F32A}\uFE0F",tornado_cloud:"\u{1F32A}\uFE0F",fog:"\u{1F32B}\uFE0F",wind_blowing_face:"\u{1F32C}\uFE0F",hotdog:"\u{1F32D}",taco:"\u{1F32E}",burrito:"\u{1F32F}",chestnut:"\u{1F330}",seedling:"\u{1F331}",evergreen_tree:"\u{1F332}",deciduous_tree:"\u{1F333}",palm_tree:"\u{1F334}",cactus:"\u{1F335}",hot_pepper:"\u{1F336}\uFE0F",tulip:"\u{1F337}",cherry_blossom:"\u{1F338}",rose:"\u{1F339}",hibiscus:"\u{1F33A}",sunflower:"\u{1F33B}",blossom:"\u{1F33C}",corn:"\u{1F33D}",ear_of_rice:"\u{1F33E}",herb:"\u{1F33F}",four_leaf_clover:"\u{1F340}",maple_leaf:"\u{1F341}",fallen_leaf:"\u{1F342}",leaves:"\u{1F343}",mushroom:"\u{1F344}",tomato:"\u{1F345}",eggplant:"\u{1F346}",grapes:"\u{1F347}",melon:"\u{1F348}",watermelon:"\u{1F349}",tangerine:"\u{1F34A}",lemon:"\u{1F34B}",banana:"\u{1F34C}",pineapple:"\u{1F34D}",apple:"\u{1F34E}",green_apple:"\u{1F34F}",pear:"\u{1F350}",peach:"\u{1F351}",cherries:"\u{1F352}",strawberry:"\u{1F353}",hamburger:"\u{1F354}",pizza:"\u{1F355}",meat_on_bone:"\u{1F356}",poultry_leg:"\u{1F357}",rice_cracker:"\u{1F358}",rice_ball:"\u{1F359}",rice:"\u{1F35A}",curry:"\u{1F35B}",ramen:"\u{1F35C}",spaghetti:"\u{1F35D}",bread:"\u{1F35E}",fries:"\u{1F35F}",sweet_potato:"\u{1F360}",dango:"\u{1F361}",oden:"\u{1F362}",sushi:"\u{1F363}",fried_shrimp:"\u{1F364}",fish_cake:"\u{1F365}",icecream:"\u{1F366}",shaved_ice:"\u{1F367}",ice_cream:"\u{1F368}",doughnut:"\u{1F369}",cookie:"\u{1F36A}",chocolate_bar:"\u{1F36B}",candy:"\u{1F36C}",lollipop:"\u{1F36D}",custard:"\u{1F36E}",honey_pot:"\u{1F36F}",cake:"\u{1F370}",bento:"\u{1F371}",stew:"\u{1F372}",fried_egg:"\u{1F373}",cooking:"\u{1F373}",fork_and_knife:"\u{1F374}",tea:"\u{1F375}",sake:"\u{1F376}",wine_glass:"\u{1F377}",cocktail:"\u{1F378}",tropical_drink:"\u{1F379}",beer:"\u{1F37A}",beers:"\u{1F37B}",baby_bottle:"\u{1F37C}",knife_fork_plate:"\u{1F37D}\uFE0F",champagne:"\u{1F37E}",popcorn:"\u{1F37F}",ribbon:"\u{1F380}",gift:"\u{1F381}",birthday:"\u{1F382}",jack_o_lantern:"\u{1F383}",christmas_tree:"\u{1F384}",santa:"\u{1F385}",fireworks:"\u{1F386}",sparkler:"\u{1F387}",balloon:"\u{1F388}",tada:"\u{1F389}",confetti_ball:"\u{1F38A}",tanabata_tree:"\u{1F38B}",crossed_flags:"\u{1F38C}",bamboo:"\u{1F38D}",dolls:"\u{1F38E}",flags:"\u{1F38F}",wind_chime:"\u{1F390}",rice_scene:"\u{1F391}",school_satchel:"\u{1F392}",mortar_board:"\u{1F393}",medal:"\u{1F396}\uFE0F",reminder_ribbon:"\u{1F397}\uFE0F",studio_microphone:"\u{1F399}\uFE0F",level_slider:"\u{1F39A}\uFE0F",control_knobs:"\u{1F39B}\uFE0F",film_frames:"\u{1F39E}\uFE0F",admission_tickets:"\u{1F39F}\uFE0F",carousel_horse:"\u{1F3A0}",ferris_wheel:"\u{1F3A1}",roller_coaster:"\u{1F3A2}",fishing_pole_and_fish:"\u{1F3A3}",microphone:"\u{1F3A4}",movie_camera:"\u{1F3A5}",cinema:"\u{1F3A6}",headphones:"\u{1F3A7}",art:"\u{1F3A8}",tophat:"\u{1F3A9}",circus_tent:"\u{1F3AA}",ticket:"\u{1F3AB}",clapper:"\u{1F3AC}",performing_arts:"\u{1F3AD}",video_game:"\u{1F3AE}",dart:"\u{1F3AF}",slot_machine:"\u{1F3B0}","8ball":"\u{1F3B1}",game_die:"\u{1F3B2}",bowling:"\u{1F3B3}",flower_playing_cards:"\u{1F3B4}",musical_note:"\u{1F3B5}",notes:"\u{1F3B6}",saxophone:"\u{1F3B7}",guitar:"\u{1F3B8}",musical_keyboard:"\u{1F3B9}",trumpet:"\u{1F3BA}",violin:"\u{1F3BB}",musical_score:"\u{1F3BC}",running_shirt_with_sash:"\u{1F3BD}",tennis:"\u{1F3BE}",ski:"\u{1F3BF}",basketball:"\u{1F3C0}",checkered_flag:"\u{1F3C1}",snowboarder:"\u{1F3C2}","woman-running":"\u{1F3C3}\u200D\u2640\uFE0F","man-running":"\u{1F3C3}\u200D\u2642\uFE0F",runner:"\u{1F3C3}\u200D\u2642\uFE0F",running:"\u{1F3C3}\u200D\u2642\uFE0F","woman-surfing":"\u{1F3C4}\u200D\u2640\uFE0F","man-surfing":"\u{1F3C4}\u200D\u2642\uFE0F",surfer:"\u{1F3C4}\u200D\u2642\uFE0F",sports_medal:"\u{1F3C5}",trophy:"\u{1F3C6}",horse_racing:"\u{1F3C7}",football:"\u{1F3C8}",rugby_football:"\u{1F3C9}","woman-swimming":"\u{1F3CA}\u200D\u2640\uFE0F","man-swimming":"\u{1F3CA}\u200D\u2642\uFE0F",swimmer:"\u{1F3CA}\u200D\u2642\uFE0F","woman-lifting-weights":"\u{1F3CB}\uFE0F\u200D\u2640\uFE0F","man-lifting-weights":"\u{1F3CB}\uFE0F\u200D\u2642\uFE0F",weight_lifter:"\u{1F3CB}\uFE0F\u200D\u2642\uFE0F","woman-golfing":"\u{1F3CC}\uFE0F\u200D\u2640\uFE0F","man-golfing":"\u{1F3CC}\uFE0F\u200D\u2642\uFE0F",golfer:"\u{1F3CC}\uFE0F\u200D\u2642\uFE0F",racing_motorcycle:"\u{1F3CD}\uFE0F",racing_car:"\u{1F3CE}\uFE0F",cricket_bat_and_ball:"\u{1F3CF}",volleyball:"\u{1F3D0}",field_hockey_stick_and_ball:"\u{1F3D1}",ice_hockey_stick_and_puck:"\u{1F3D2}",table_tennis_paddle_and_ball:"\u{1F3D3}",snow_capped_mountain:"\u{1F3D4}\uFE0F",camping:"\u{1F3D5}\uFE0F",beach_with_umbrella:"\u{1F3D6}\uFE0F",building_construction:"\u{1F3D7}\uFE0F",house_buildings:"\u{1F3D8}\uFE0F",cityscape:"\u{1F3D9}\uFE0F",derelict_house_building:"\u{1F3DA}\uFE0F",classical_building:"\u{1F3DB}\uFE0F",desert:"\u{1F3DC}\uFE0F",desert_island:"\u{1F3DD}\uFE0F",national_park:"\u{1F3DE}\uFE0F",stadium:"\u{1F3DF}\uFE0F",house:"\u{1F3E0}",house_with_garden:"\u{1F3E1}",office:"\u{1F3E2}",post_office:"\u{1F3E3}",european_post_office:"\u{1F3E4}",hospital:"\u{1F3E5}",bank:"\u{1F3E6}",atm:"\u{1F3E7}",hotel:"\u{1F3E8}",love_hotel:"\u{1F3E9}",convenience_store:"\u{1F3EA}",school:"\u{1F3EB}",department_store:"\u{1F3EC}",factory:"\u{1F3ED}",izakaya_lantern:"\u{1F3EE}",lantern:"\u{1F3EE}",japanese_castle:"\u{1F3EF}",european_castle:"\u{1F3F0}","rainbow-flag":"\u{1F3F3}\uFE0F\u200D\u{1F308}",transgender_flag:"\u{1F3F3}\uFE0F\u200D\u26A7\uFE0F",waving_white_flag:"\u{1F3F3}\uFE0F",pirate_flag:"\u{1F3F4}\u200D\u2620\uFE0F","flag-england":"\u{1F3F4}\u{E0067}\u{E0062}\u{E0065}\u{E006E}\u{E0067}\u{E007F}","flag-scotland":"\u{1F3F4}\u{E0067}\u{E0062}\u{E0073}\u{E0063}\u{E0074}\u{E007F}","flag-wales":"\u{1F3F4}\u{E0067}\u{E0062}\u{E0077}\u{E006C}\u{E0073}\u{E007F}",waving_black_flag:"\u{1F3F4}",rosette:"\u{1F3F5}\uFE0F",label:"\u{1F3F7}\uFE0F",badminton_racquet_and_shuttlecock:"\u{1F3F8}",bow_and_arrow:"\u{1F3F9}",amphora:"\u{1F3FA}","skin-tone-2":"\u{1F3FB}","skin-tone-3":"\u{1F3FC}","skin-tone-4":"\u{1F3FD}","skin-tone-5":"\u{1F3FE}","skin-tone-6":"\u{1F3FF}",rat:"\u{1F400}",mouse2:"\u{1F401}",ox:"\u{1F402}",water_buffalo:"\u{1F403}",cow2:"\u{1F404}",tiger2:"\u{1F405}",leopard:"\u{1F406}",rabbit2:"\u{1F407}",black_cat:"\u{1F408}\u200D\u2B1B",cat2:"\u{1F408}",dragon:"\u{1F409}",crocodile:"\u{1F40A}",whale2:"\u{1F40B}",snail:"\u{1F40C}",snake:"\u{1F40D}",racehorse:"\u{1F40E}",ram:"\u{1F40F}",goat:"\u{1F410}",sheep:"\u{1F411}",monkey:"\u{1F412}",rooster:"\u{1F413}",chicken:"\u{1F414}",service_dog:"\u{1F415}\u200D\u{1F9BA}",dog2:"\u{1F415}",pig2:"\u{1F416}",boar:"\u{1F417}",elephant:"\u{1F418}",octopus:"\u{1F419}",shell:"\u{1F41A}",bug:"\u{1F41B}",ant:"\u{1F41C}",bee:"\u{1F41D}",honeybee:"\u{1F41D}",ladybug:"\u{1F41E}",lady_beetle:"\u{1F41E}",fish:"\u{1F41F}",tropical_fish:"\u{1F420}",blowfish:"\u{1F421}",turtle:"\u{1F422}",hatching_chick:"\u{1F423}",baby_chick:"\u{1F424}",hatched_chick:"\u{1F425}",bird:"\u{1F426}",penguin:"\u{1F427}",koala:"\u{1F428}",poodle:"\u{1F429}",dromedary_camel:"\u{1F42A}",camel:"\u{1F42B}",dolphin:"\u{1F42C}",flipper:"\u{1F42C}",mouse:"\u{1F42D}",cow:"\u{1F42E}",tiger:"\u{1F42F}",rabbit:"\u{1F430}",cat:"\u{1F431}",dragon_face:"\u{1F432}",whale:"\u{1F433}",horse:"\u{1F434}",monkey_face:"\u{1F435}",dog:"\u{1F436}",pig:"\u{1F437}",frog:"\u{1F438}",hamster:"\u{1F439}",wolf:"\u{1F43A}",polar_bear:"\u{1F43B}\u200D\u2744\uFE0F",bear:"\u{1F43B}",panda_face:"\u{1F43C}",pig_nose:"\u{1F43D}",feet:"\u{1F43E}",paw_prints:"\u{1F43E}",chipmunk:"\u{1F43F}\uFE0F",eyes:"\u{1F440}","eye-in-speech-bubble":"\u{1F441}\uFE0F\u200D\u{1F5E8}\uFE0F",eye:"\u{1F441}\uFE0F",ear:"\u{1F442}",nose:"\u{1F443}",lips:"\u{1F444}",tongue:"\u{1F445}",point_up_2:"\u{1F446}",point_down:"\u{1F447}",point_left:"\u{1F448}",point_right:"\u{1F449}",facepunch:"\u{1F44A}",punch:"\u{1F44A}",wave:"\u{1F44B}",ok_hand:"\u{1F44C}","+1":"\u{1F44D}",thumbsup:"\u{1F44D}","-1":"\u{1F44E}",thumbsdown:"\u{1F44E}",clap:"\u{1F44F}",open_hands:"\u{1F450}",crown:"\u{1F451}",womans_hat:"\u{1F452}",eyeglasses:"\u{1F453}",necktie:"\u{1F454}",shirt:"\u{1F455}",tshirt:"\u{1F455}",jeans:"\u{1F456}",dress:"\u{1F457}",kimono:"\u{1F458}",bikini:"\u{1F459}",womans_clothes:"\u{1F45A}",purse:"\u{1F45B}",handbag:"\u{1F45C}",pouch:"\u{1F45D}",mans_shoe:"\u{1F45E}",shoe:"\u{1F45E}",athletic_shoe:"\u{1F45F}",high_heel:"\u{1F460}",sandal:"\u{1F461}",boot:"\u{1F462}",footprints:"\u{1F463}",bust_in_silhouette:"\u{1F464}",busts_in_silhouette:"\u{1F465}",boy:"\u{1F466}",girl:"\u{1F467}","male-farmer":"\u{1F468}\u200D\u{1F33E}","male-cook":"\u{1F468}\u200D\u{1F373}",man_feeding_baby:"\u{1F468}\u200D\u{1F37C}","male-student":"\u{1F468}\u200D\u{1F393}","male-singer":"\u{1F468}\u200D\u{1F3A4}","male-artist":"\u{1F468}\u200D\u{1F3A8}","male-teacher":"\u{1F468}\u200D\u{1F3EB}","male-factory-worker":"\u{1F468}\u200D\u{1F3ED}","man-boy-boy":"\u{1F468}\u200D\u{1F466}\u200D\u{1F466}","man-boy":"\u{1F468}\u200D\u{1F466}","man-girl-boy":"\u{1F468}\u200D\u{1F467}\u200D\u{1F466}","man-girl-girl":"\u{1F468}\u200D\u{1F467}\u200D\u{1F467}","man-girl":"\u{1F468}\u200D\u{1F467}","man-man-boy":"\u{1F468}\u200D\u{1F468}\u200D\u{1F466}","man-man-boy-boy":"\u{1F468}\u200D\u{1F468}\u200D\u{1F466}\u200D\u{1F466}","man-man-girl":"\u{1F468}\u200D\u{1F468}\u200D\u{1F467}","man-man-girl-boy":"\u{1F468}\u200D\u{1F468}\u200D\u{1F467}\u200D\u{1F466}","man-man-girl-girl":"\u{1F468}\u200D\u{1F468}\u200D\u{1F467}\u200D\u{1F467}","man-woman-boy":"\u{1F468}\u200D\u{1F469}\u200D\u{1F466}",family:"\u{1F468}\u200D\u{1F469}\u200D\u{1F466}","man-woman-boy-boy":"\u{1F468}\u200D\u{1F469}\u200D\u{1F466}\u200D\u{1F466}","man-woman-girl":"\u{1F468}\u200D\u{1F469}\u200D\u{1F467}","man-woman-girl-boy":"\u{1F468}\u200D\u{1F469}\u200D\u{1F467}\u200D\u{1F466}","man-woman-girl-girl":"\u{1F468}\u200D\u{1F469}\u200D\u{1F467}\u200D\u{1F467}","male-technologist":"\u{1F468}\u200D\u{1F4BB}","male-office-worker":"\u{1F468}\u200D\u{1F4BC}","male-mechanic":"\u{1F468}\u200D\u{1F527}","male-scientist":"\u{1F468}\u200D\u{1F52C}","male-astronaut":"\u{1F468}\u200D\u{1F680}","male-firefighter":"\u{1F468}\u200D\u{1F692}",man_with_probing_cane:"\u{1F468}\u200D\u{1F9AF}",red_haired_man:"\u{1F468}\u200D\u{1F9B0}",curly_haired_man:"\u{1F468}\u200D\u{1F9B1}",bald_man:"\u{1F468}\u200D\u{1F9B2}",white_haired_man:"\u{1F468}\u200D\u{1F9B3}",man_in_motorized_wheelchair:"\u{1F468}\u200D\u{1F9BC}",man_in_manual_wheelchair:"\u{1F468}\u200D\u{1F9BD}","male-doctor":"\u{1F468}\u200D\u2695\uFE0F","male-judge":"\u{1F468}\u200D\u2696\uFE0F","male-pilot":"\u{1F468}\u200D\u2708\uFE0F","man-heart-man":"\u{1F468}\u200D\u2764\uFE0F\u200D\u{1F468}","man-kiss-man":"\u{1F468}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F468}",man:"\u{1F468}","female-farmer":"\u{1F469}\u200D\u{1F33E}","female-cook":"\u{1F469}\u200D\u{1F373}",woman_feeding_baby:"\u{1F469}\u200D\u{1F37C}","female-student":"\u{1F469}\u200D\u{1F393}","female-singer":"\u{1F469}\u200D\u{1F3A4}","female-artist":"\u{1F469}\u200D\u{1F3A8}","female-teacher":"\u{1F469}\u200D\u{1F3EB}","female-factory-worker":"\u{1F469}\u200D\u{1F3ED}","woman-boy-boy":"\u{1F469}\u200D\u{1F466}\u200D\u{1F466}","woman-boy":"\u{1F469}\u200D\u{1F466}","woman-girl-boy":"\u{1F469}\u200D\u{1F467}\u200D\u{1F466}","woman-girl-girl":"\u{1F469}\u200D\u{1F467}\u200D\u{1F467}","woman-girl":"\u{1F469}\u200D\u{1F467}","woman-woman-boy":"\u{1F469}\u200D\u{1F469}\u200D\u{1F466}","woman-woman-boy-boy":"\u{1F469}\u200D\u{1F469}\u200D\u{1F466}\u200D\u{1F466}","woman-woman-girl":"\u{1F469}\u200D\u{1F469}\u200D\u{1F467}","woman-woman-girl-boy":"\u{1F469}\u200D\u{1F469}\u200D\u{1F467}\u200D\u{1F466}","woman-woman-girl-girl":"\u{1F469}\u200D\u{1F469}\u200D\u{1F467}\u200D\u{1F467}","female-technologist":"\u{1F469}\u200D\u{1F4BB}","female-office-worker":"\u{1F469}\u200D\u{1F4BC}","female-mechanic":"\u{1F469}\u200D\u{1F527}","female-scientist":"\u{1F469}\u200D\u{1F52C}","female-astronaut":"\u{1F469}\u200D\u{1F680}","female-firefighter":"\u{1F469}\u200D\u{1F692}",woman_with_probing_cane:"\u{1F469}\u200D\u{1F9AF}",red_haired_woman:"\u{1F469}\u200D\u{1F9B0}",curly_haired_woman:"\u{1F469}\u200D\u{1F9B1}",bald_woman:"\u{1F469}\u200D\u{1F9B2}",white_haired_woman:"\u{1F469}\u200D\u{1F9B3}",woman_in_motorized_wheelchair:"\u{1F469}\u200D\u{1F9BC}",woman_in_manual_wheelchair:"\u{1F469}\u200D\u{1F9BD}","female-doctor":"\u{1F469}\u200D\u2695\uFE0F","female-judge":"\u{1F469}\u200D\u2696\uFE0F","female-pilot":"\u{1F469}\u200D\u2708\uFE0F","woman-heart-man":"\u{1F469}\u200D\u2764\uFE0F\u200D\u{1F468}","woman-heart-woman":"\u{1F469}\u200D\u2764\uFE0F\u200D\u{1F469}","woman-kiss-man":"\u{1F469}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F468}","woman-kiss-woman":"\u{1F469}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F469}",woman:"\u{1F469}",man_and_woman_holding_hands:"\u{1F46B}",woman_and_man_holding_hands:"\u{1F46B}",couple:"\u{1F46B}",two_men_holding_hands:"\u{1F46C}",men_holding_hands:"\u{1F46C}",two_women_holding_hands:"\u{1F46D}",women_holding_hands:"\u{1F46D}","female-police-officer":"\u{1F46E}\u200D\u2640\uFE0F","male-police-officer":"\u{1F46E}\u200D\u2642\uFE0F",cop:"\u{1F46E}\u200D\u2642\uFE0F","women-with-bunny-ears-partying":"\u{1F46F}\u200D\u2640\uFE0F","woman-with-bunny-ears-partying":"\u{1F46F}\u200D\u2640\uFE0F",dancers:"\u{1F46F}\u200D\u2640\uFE0F","men-with-bunny-ears-partying":"\u{1F46F}\u200D\u2642\uFE0F","man-with-bunny-ears-partying":"\u{1F46F}\u200D\u2642\uFE0F",woman_with_veil:"\u{1F470}\u200D\u2640\uFE0F",man_with_veil:"\u{1F470}\u200D\u2642\uFE0F",bride_with_veil:"\u{1F470}","blond-haired-woman":"\u{1F471}\u200D\u2640\uFE0F","blond-haired-man":"\u{1F471}\u200D\u2642\uFE0F",person_with_blond_hair:"\u{1F471}\u200D\u2642\uFE0F",man_with_gua_pi_mao:"\u{1F472}","woman-wearing-turban":"\u{1F473}\u200D\u2640\uFE0F","man-wearing-turban":"\u{1F473}\u200D\u2642\uFE0F",man_with_turban:"\u{1F473}\u200D\u2642\uFE0F",older_man:"\u{1F474}",older_woman:"\u{1F475}",baby:"\u{1F476}","female-construction-worker":"\u{1F477}\u200D\u2640\uFE0F","male-construction-worker":"\u{1F477}\u200D\u2642\uFE0F",construction_worker:"\u{1F477}\u200D\u2642\uFE0F",princess:"\u{1F478}",japanese_ogre:"\u{1F479}",japanese_goblin:"\u{1F47A}",ghost:"\u{1F47B}",angel:"\u{1F47C}",alien:"\u{1F47D}",space_invader:"\u{1F47E}",imp:"\u{1F47F}",skull:"\u{1F480}","woman-tipping-hand":"\u{1F481}\u200D\u2640\uFE0F",information_desk_person:"\u{1F481}\u200D\u2640\uFE0F","man-tipping-hand":"\u{1F481}\u200D\u2642\uFE0F","female-guard":"\u{1F482}\u200D\u2640\uFE0F","male-guard":"\u{1F482}\u200D\u2642\uFE0F",guardsman:"\u{1F482}\u200D\u2642\uFE0F",dancer:"\u{1F483}",lipstick:"\u{1F484}",nail_care:"\u{1F485}","woman-getting-massage":"\u{1F486}\u200D\u2640\uFE0F",massage:"\u{1F486}\u200D\u2640\uFE0F","man-getting-massage":"\u{1F486}\u200D\u2642\uFE0F","woman-getting-haircut":"\u{1F487}\u200D\u2640\uFE0F",haircut:"\u{1F487}\u200D\u2640\uFE0F","man-getting-haircut":"\u{1F487}\u200D\u2642\uFE0F",barber:"\u{1F488}",syringe:"\u{1F489}",pill:"\u{1F48A}",kiss:"\u{1F48B}",love_letter:"\u{1F48C}",ring:"\u{1F48D}",gem:"\u{1F48E}",couplekiss:"\u{1F48F}",bouquet:"\u{1F490}",couple_with_heart:"\u{1F491}",wedding:"\u{1F492}",heartbeat:"\u{1F493}",broken_heart:"\u{1F494}",two_hearts:"\u{1F495}",sparkling_heart:"\u{1F496}",heartpulse:"\u{1F497}",cupid:"\u{1F498}",blue_heart:"\u{1F499}",green_heart:"\u{1F49A}",yellow_heart:"\u{1F49B}",purple_heart:"\u{1F49C}",gift_heart:"\u{1F49D}",revolving_hearts:"\u{1F49E}",heart_decoration:"\u{1F49F}",diamond_shape_with_a_dot_inside:"\u{1F4A0}",bulb:"\u{1F4A1}",anger:"\u{1F4A2}",bomb:"\u{1F4A3}",zzz:"\u{1F4A4}",boom:"\u{1F4A5}",collision:"\u{1F4A5}",sweat_drops:"\u{1F4A6}",droplet:"\u{1F4A7}",dash:"\u{1F4A8}",hankey:"\u{1F4A9}",poop:"\u{1F4A9}",shit:"\u{1F4A9}",muscle:"\u{1F4AA}",dizzy:"\u{1F4AB}",speech_balloon:"\u{1F4AC}",thought_balloon:"\u{1F4AD}",white_flower:"\u{1F4AE}",moneybag:"\u{1F4B0}",currency_exchange:"\u{1F4B1}",heavy_dollar_sign:"\u{1F4B2}",credit_card:"\u{1F4B3}",yen:"\u{1F4B4}",dollar:"\u{1F4B5}",euro:"\u{1F4B6}",pound:"\u{1F4B7}",money_with_wings:"\u{1F4B8}",chart:"\u{1F4B9}",seat:"\u{1F4BA}",computer:"\u{1F4BB}",briefcase:"\u{1F4BC}",minidisc:"\u{1F4BD}",floppy_disk:"\u{1F4BE}",cd:"\u{1F4BF}",dvd:"\u{1F4C0}",file_folder:"\u{1F4C1}",open_file_folder:"\u{1F4C2}",page_with_curl:"\u{1F4C3}",page_facing_up:"\u{1F4C4}",date:"\u{1F4C5}",calendar:"\u{1F4C6}",card_index:"\u{1F4C7}",chart_with_upwards_trend:"\u{1F4C8}",chart_with_downwards_trend:"\u{1F4C9}",bar_chart:"\u{1F4CA}",clipboard:"\u{1F4CB}",pushpin:"\u{1F4CC}",round_pushpin:"\u{1F4CD}",paperclip:"\u{1F4CE}",straight_ruler:"\u{1F4CF}",triangular_ruler:"\u{1F4D0}",bookmark_tabs:"\u{1F4D1}",ledger:"\u{1F4D2}",notebook:"\u{1F4D3}",notebook_with_decorative_cover:"\u{1F4D4}",closed_book:"\u{1F4D5}",book:"\u{1F4D6}",open_book:"\u{1F4D6}",green_book:"\u{1F4D7}",blue_book:"\u{1F4D8}",orange_book:"\u{1F4D9}",books:"\u{1F4DA}",name_badge:"\u{1F4DB}",scroll:"\u{1F4DC}",memo:"\u{1F4DD}",pencil:"\u{1F4DD}",telephone_receiver:"\u{1F4DE}",pager:"\u{1F4DF}",fax:"\u{1F4E0}",satellite_antenna:"\u{1F4E1}",loudspeaker:"\u{1F4E2}",mega:"\u{1F4E3}",outbox_tray:"\u{1F4E4}",inbox_tray:"\u{1F4E5}",package:"\u{1F4E6}","e-mail":"\u{1F4E7}",incoming_envelope:"\u{1F4E8}",envelope_with_arrow:"\u{1F4E9}",mailbox_closed:"\u{1F4EA}",mailbox:"\u{1F4EB}",mailbox_with_mail:"\u{1F4EC}",mailbox_with_no_mail:"\u{1F4ED}",postbox:"\u{1F4EE}",postal_horn:"\u{1F4EF}",newspaper:"\u{1F4F0}",iphone:"\u{1F4F1}",calling:"\u{1F4F2}",vibration_mode:"\u{1F4F3}",mobile_phone_off:"\u{1F4F4}",no_mobile_phones:"\u{1F4F5}",signal_strength:"\u{1F4F6}",camera:"\u{1F4F7}",camera_with_flash:"\u{1F4F8}",video_camera:"\u{1F4F9}",tv:"\u{1F4FA}",radio:"\u{1F4FB}",vhs:"\u{1F4FC}",film_projector:"\u{1F4FD}\uFE0F",prayer_beads:"\u{1F4FF}",twisted_rightwards_arrows:"\u{1F500}",repeat:"\u{1F501}",repeat_one:"\u{1F502}",arrows_clockwise:"\u{1F503}",arrows_counterclockwise:"\u{1F504}",low_brightness:"\u{1F505}",high_brightness:"\u{1F506}",mute:"\u{1F507}",speaker:"\u{1F508}",sound:"\u{1F509}",loud_sound:"\u{1F50A}",battery:"\u{1F50B}",electric_plug:"\u{1F50C}",mag:"\u{1F50D}",mag_right:"\u{1F50E}",lock_with_ink_pen:"\u{1F50F}",closed_lock_with_key:"\u{1F510}",key:"\u{1F511}",lock:"\u{1F512}",unlock:"\u{1F513}",bell:"\u{1F514}",no_bell:"\u{1F515}",bookmark:"\u{1F516}",link:"\u{1F517}",radio_button:"\u{1F518}",back:"\u{1F519}",end:"\u{1F51A}",on:"\u{1F51B}",soon:"\u{1F51C}",top:"\u{1F51D}",underage:"\u{1F51E}",keycap_ten:"\u{1F51F}",capital_abcd:"\u{1F520}",abcd:"\u{1F521}",symbols:"\u{1F523}",abc:"\u{1F524}",fire:"\u{1F525}",flashlight:"\u{1F526}",wrench:"\u{1F527}",hammer:"\u{1F528}",nut_and_bolt:"\u{1F529}",hocho:"\u{1F52A}",knife:"\u{1F52A}",gun:"\u{1F52B}",microscope:"\u{1F52C}",telescope:"\u{1F52D}",crystal_ball:"\u{1F52E}",six_pointed_star:"\u{1F52F}",beginner:"\u{1F530}",trident:"\u{1F531}",black_square_button:"\u{1F532}",white_square_button:"\u{1F533}",red_circle:"\u{1F534}",large_blue_circle:"\u{1F535}",large_orange_diamond:"\u{1F536}",large_blue_diamond:"\u{1F537}",small_orange_diamond:"\u{1F538}",small_blue_diamond:"\u{1F539}",small_red_triangle:"\u{1F53A}",small_red_triangle_down:"\u{1F53B}",arrow_up_small:"\u{1F53C}",arrow_down_small:"\u{1F53D}",om_symbol:"\u{1F549}\uFE0F",dove_of_peace:"\u{1F54A}\uFE0F",kaaba:"\u{1F54B}",mosque:"\u{1F54C}",synagogue:"\u{1F54D}",menorah_with_nine_branches:"\u{1F54E}",clock1:"\u{1F550}",clock2:"\u{1F551}",clock3:"\u{1F552}",clock4:"\u{1F553}",clock5:"\u{1F554}",clock6:"\u{1F555}",clock7:"\u{1F556}",clock8:"\u{1F557}",clock9:"\u{1F558}",clock10:"\u{1F559}",clock11:"\u{1F55A}",clock12:"\u{1F55B}",clock130:"\u{1F55C}",clock230:"\u{1F55D}",clock330:"\u{1F55E}",clock430:"\u{1F55F}",clock530:"\u{1F560}",clock630:"\u{1F561}",clock730:"\u{1F562}",clock830:"\u{1F563}",clock930:"\u{1F564}",clock1030:"\u{1F565}",clock1130:"\u{1F566}",clock1230:"\u{1F567}",candle:"\u{1F56F}\uFE0F",mantelpiece_clock:"\u{1F570}\uFE0F",hole:"\u{1F573}\uFE0F",man_in_business_suit_levitating:"\u{1F574}\uFE0F","female-detective":"\u{1F575}\uFE0F\u200D\u2640\uFE0F","male-detective":"\u{1F575}\uFE0F\u200D\u2642\uFE0F",sleuth_or_spy:"\u{1F575}\uFE0F\u200D\u2642\uFE0F",dark_sunglasses:"\u{1F576}\uFE0F",spider:"\u{1F577}\uFE0F",spider_web:"\u{1F578}\uFE0F",joystick:"\u{1F579}\uFE0F",man_dancing:"\u{1F57A}",linked_paperclips:"\u{1F587}\uFE0F",lower_left_ballpoint_pen:"\u{1F58A}\uFE0F",lower_left_fountain_pen:"\u{1F58B}\uFE0F",lower_left_paintbrush:"\u{1F58C}\uFE0F",lower_left_crayon:"\u{1F58D}\uFE0F",raised_hand_with_fingers_splayed:"\u{1F590}\uFE0F",middle_finger:"\u{1F595}",reversed_hand_with_middle_finger_extended:"\u{1F595}","spock-hand":"\u{1F596}",black_heart:"\u{1F5A4}",desktop_computer:"\u{1F5A5}\uFE0F",printer:"\u{1F5A8}\uFE0F",three_button_mouse:"\u{1F5B1}\uFE0F",trackball:"\u{1F5B2}\uFE0F",frame_with_picture:"\u{1F5BC}\uFE0F",card_index_dividers:"\u{1F5C2}\uFE0F",card_file_box:"\u{1F5C3}\uFE0F",file_cabinet:"\u{1F5C4}\uFE0F",wastebasket:"\u{1F5D1}\uFE0F",spiral_note_pad:"\u{1F5D2}\uFE0F",spiral_calendar_pad:"\u{1F5D3}\uFE0F",compression:"\u{1F5DC}\uFE0F",old_key:"\u{1F5DD}\uFE0F",rolled_up_newspaper:"\u{1F5DE}\uFE0F",dagger_knife:"\u{1F5E1}\uFE0F",speaking_head_in_silhouette:"\u{1F5E3}\uFE0F",left_speech_bubble:"\u{1F5E8}\uFE0F",right_anger_bubble:"\u{1F5EF}\uFE0F",ballot_box_with_ballot:"\u{1F5F3}\uFE0F",world_map:"\u{1F5FA}\uFE0F",mount_fuji:"\u{1F5FB}",tokyo_tower:"\u{1F5FC}",statue_of_liberty:"\u{1F5FD}",japan:"\u{1F5FE}",moyai:"\u{1F5FF}",grinning:"\u{1F600}",grin:"\u{1F601}",joy:"\u{1F602}",smiley:"\u{1F603}",smile:"\u{1F604}",sweat_smile:"\u{1F605}",laughing:"\u{1F606}",satisfied:"\u{1F606}",innocent:"\u{1F607}",smiling_imp:"\u{1F608}",wink:"\u{1F609}",blush:"\u{1F60A}",yum:"\u{1F60B}",relieved:"\u{1F60C}",heart_eyes:"\u{1F60D}",sunglasses:"\u{1F60E}",smirk:"\u{1F60F}",neutral_face:"\u{1F610}",expressionless:"\u{1F611}",unamused:"\u{1F612}",sweat:"\u{1F613}",pensive:"\u{1F614}",confused:"\u{1F615}",confounded:"\u{1F616}",kissing:"\u{1F617}",kissing_heart:"\u{1F618}",kissing_smiling_eyes:"\u{1F619}",kissing_closed_eyes:"\u{1F61A}",stuck_out_tongue:"\u{1F61B}",stuck_out_tongue_winking_eye:"\u{1F61C}",stuck_out_tongue_closed_eyes:"\u{1F61D}",disappointed:"\u{1F61E}",worried:"\u{1F61F}",angry:"\u{1F620}",rage:"\u{1F621}",cry:"\u{1F622}",persevere:"\u{1F623}",triumph:"\u{1F624}",disappointed_relieved:"\u{1F625}",frowning:"\u{1F626}",anguished:"\u{1F627}",fearful:"\u{1F628}",weary:"\u{1F629}",sleepy:"\u{1F62A}",tired_face:"\u{1F62B}",grimacing:"\u{1F62C}",sob:"\u{1F62D}",face_exhaling:"\u{1F62E}\u200D\u{1F4A8}",open_mouth:"\u{1F62E}",hushed:"\u{1F62F}",cold_sweat:"\u{1F630}",scream:"\u{1F631}",astonished:"\u{1F632}",flushed:"\u{1F633}",sleeping:"\u{1F634}",face_with_spiral_eyes:"\u{1F635}\u200D\u{1F4AB}",dizzy_face:"\u{1F635}",face_in_clouds:"\u{1F636}\u200D\u{1F32B}\uFE0F",no_mouth:"\u{1F636}",mask:"\u{1F637}",smile_cat:"\u{1F638}",joy_cat:"\u{1F639}",smiley_cat:"\u{1F63A}",heart_eyes_cat:"\u{1F63B}",smirk_cat:"\u{1F63C}",kissing_cat:"\u{1F63D}",pouting_cat:"\u{1F63E}",crying_cat_face:"\u{1F63F}",scream_cat:"\u{1F640}",slightly_frowning_face:"\u{1F641}",slightly_smiling_face:"\u{1F642}",upside_down_face:"\u{1F643}",face_with_rolling_eyes:"\u{1F644}","woman-gesturing-no":"\u{1F645}\u200D\u2640\uFE0F",no_good:"\u{1F645}\u200D\u2640\uFE0F","man-gesturing-no":"\u{1F645}\u200D\u2642\uFE0F","woman-gesturing-ok":"\u{1F646}\u200D\u2640\uFE0F",ok_woman:"\u{1F646}\u200D\u2640\uFE0F","man-gesturing-ok":"\u{1F646}\u200D\u2642\uFE0F","woman-bowing":"\u{1F647}\u200D\u2640\uFE0F","man-bowing":"\u{1F647}\u200D\u2642\uFE0F",bow:"\u{1F647}\u200D\u2642\uFE0F",see_no_evil:"\u{1F648}",hear_no_evil:"\u{1F649}",speak_no_evil:"\u{1F64A}","woman-raising-hand":"\u{1F64B}\u200D\u2640\uFE0F",raising_hand:"\u{1F64B}\u200D\u2640\uFE0F","man-raising-hand":"\u{1F64B}\u200D\u2642\uFE0F",raised_hands:"\u{1F64C}","woman-frowning":"\u{1F64D}\u200D\u2640\uFE0F",person_frowning:"\u{1F64D}\u200D\u2640\uFE0F","man-frowning":"\u{1F64D}\u200D\u2642\uFE0F","woman-pouting":"\u{1F64E}\u200D\u2640\uFE0F",person_with_pouting_face:"\u{1F64E}\u200D\u2640\uFE0F","man-pouting":"\u{1F64E}\u200D\u2642\uFE0F",pray:"\u{1F64F}",rocket:"\u{1F680}",helicopter:"\u{1F681}",steam_locomotive:"\u{1F682}",railway_car:"\u{1F683}",bullettrain_side:"\u{1F684}",bullettrain_front:"\u{1F685}",train2:"\u{1F686}",metro:"\u{1F687}",light_rail:"\u{1F688}",station:"\u{1F689}",tram:"\u{1F68A}",train:"\u{1F68B}",bus:"\u{1F68C}",oncoming_bus:"\u{1F68D}",trolleybus:"\u{1F68E}",busstop:"\u{1F68F}",minibus:"\u{1F690}",ambulance:"\u{1F691}",fire_engine:"\u{1F692}",police_car:"\u{1F693}",oncoming_police_car:"\u{1F694}",taxi:"\u{1F695}",oncoming_taxi:"\u{1F696}",car:"\u{1F697}",red_car:"\u{1F697}",oncoming_automobile:"\u{1F698}",blue_car:"\u{1F699}",truck:"\u{1F69A}",articulated_lorry:"\u{1F69B}",tractor:"\u{1F69C}",monorail:"\u{1F69D}",mountain_railway:"\u{1F69E}",suspension_railway:"\u{1F69F}",mountain_cableway:"\u{1F6A0}",aerial_tramway:"\u{1F6A1}",ship:"\u{1F6A2}","woman-rowing-boat":"\u{1F6A3}\u200D\u2640\uFE0F","man-rowing-boat":"\u{1F6A3}\u200D\u2642\uFE0F",rowboat:"\u{1F6A3}\u200D\u2642\uFE0F",speedboat:"\u{1F6A4}",traffic_light:"\u{1F6A5}",vertical_traffic_light:"\u{1F6A6}",construction:"\u{1F6A7}",rotating_light:"\u{1F6A8}",triangular_flag_on_post:"\u{1F6A9}",door:"\u{1F6AA}",no_entry_sign:"\u{1F6AB}",smoking:"\u{1F6AC}",no_smoking:"\u{1F6AD}",put_litter_in_its_place:"\u{1F6AE}",do_not_litter:"\u{1F6AF}",potable_water:"\u{1F6B0}","non-potable_water":"\u{1F6B1}",bike:"\u{1F6B2}",no_bicycles:"\u{1F6B3}","woman-biking":"\u{1F6B4}\u200D\u2640\uFE0F","man-biking":"\u{1F6B4}\u200D\u2642\uFE0F",bicyclist:"\u{1F6B4}\u200D\u2642\uFE0F","woman-mountain-biking":"\u{1F6B5}\u200D\u2640\uFE0F","man-mountain-biking":"\u{1F6B5}\u200D\u2642\uFE0F",mountain_bicyclist:"\u{1F6B5}\u200D\u2642\uFE0F","woman-walking":"\u{1F6B6}\u200D\u2640\uFE0F","man-walking":"\u{1F6B6}\u200D\u2642\uFE0F",walking:"\u{1F6B6}\u200D\u2642\uFE0F",no_pedestrians:"\u{1F6B7}",children_crossing:"\u{1F6B8}",mens:"\u{1F6B9}",womens:"\u{1F6BA}",restroom:"\u{1F6BB}",baby_symbol:"\u{1F6BC}",toilet:"\u{1F6BD}",wc:"\u{1F6BE}",shower:"\u{1F6BF}",bath:"\u{1F6C0}",bathtub:"\u{1F6C1}",passport_control:"\u{1F6C2}",customs:"\u{1F6C3}",baggage_claim:"\u{1F6C4}",left_luggage:"\u{1F6C5}",couch_and_lamp:"\u{1F6CB}\uFE0F",sleeping_accommodation:"\u{1F6CC}",shopping_bags:"\u{1F6CD}\uFE0F",bellhop_bell:"\u{1F6CE}\uFE0F",bed:"\u{1F6CF}\uFE0F",place_of_worship:"\u{1F6D0}",octagonal_sign:"\u{1F6D1}",shopping_trolley:"\u{1F6D2}",hindu_temple:"\u{1F6D5}",hut:"\u{1F6D6}",elevator:"\u{1F6D7}",hammer_and_wrench:"\u{1F6E0}\uFE0F",shield:"\u{1F6E1}\uFE0F",oil_drum:"\u{1F6E2}\uFE0F",motorway:"\u{1F6E3}\uFE0F",railway_track:"\u{1F6E4}\uFE0F",motor_boat:"\u{1F6E5}\uFE0F",small_airplane:"\u{1F6E9}\uFE0F",airplane_departure:"\u{1F6EB}",airplane_arriving:"\u{1F6EC}",satellite:"\u{1F6F0}\uFE0F",passenger_ship:"\u{1F6F3}\uFE0F",scooter:"\u{1F6F4}",motor_scooter:"\u{1F6F5}",canoe:"\u{1F6F6}",sled:"\u{1F6F7}",flying_saucer:"\u{1F6F8}",skateboard:"\u{1F6F9}",auto_rickshaw:"\u{1F6FA}",pickup_truck:"\u{1F6FB}",roller_skate:"\u{1F6FC}",large_orange_circle:"\u{1F7E0}",large_yellow_circle:"\u{1F7E1}",large_green_circle:"\u{1F7E2}",large_purple_circle:"\u{1F7E3}",large_brown_circle:"\u{1F7E4}",large_red_square:"\u{1F7E5}",large_blue_square:"\u{1F7E6}",large_orange_square:"\u{1F7E7}",large_yellow_square:"\u{1F7E8}",large_green_square:"\u{1F7E9}",large_purple_square:"\u{1F7EA}",large_brown_square:"\u{1F7EB}",pinched_fingers:"\u{1F90C}",white_heart:"\u{1F90D}",brown_heart:"\u{1F90E}",pinching_hand:"\u{1F90F}",zipper_mouth_face:"\u{1F910}",money_mouth_face:"\u{1F911}",face_with_thermometer:"\u{1F912}",nerd_face:"\u{1F913}",thinking_face:"\u{1F914}",face_with_head_bandage:"\u{1F915}",robot_face:"\u{1F916}",hugging_face:"\u{1F917}",the_horns:"\u{1F918}",sign_of_the_horns:"\u{1F918}",call_me_hand:"\u{1F919}",raised_back_of_hand:"\u{1F91A}","left-facing_fist":"\u{1F91B}","right-facing_fist":"\u{1F91C}",handshake:"\u{1F91D}",crossed_fingers:"\u{1F91E}",hand_with_index_and_middle_fingers_crossed:"\u{1F91E}",i_love_you_hand_sign:"\u{1F91F}",face_with_cowboy_hat:"\u{1F920}",clown_face:"\u{1F921}",nauseated_face:"\u{1F922}",rolling_on_the_floor_laughing:"\u{1F923}",drooling_face:"\u{1F924}",lying_face:"\u{1F925}","woman-facepalming":"\u{1F926}\u200D\u2640\uFE0F","man-facepalming":"\u{1F926}\u200D\u2642\uFE0F",face_palm:"\u{1F926}",sneezing_face:"\u{1F927}",face_with_raised_eyebrow:"\u{1F928}",face_with_one_eyebrow_raised:"\u{1F928}","star-struck":"\u{1F929}",grinning_face_with_star_eyes:"\u{1F929}",zany_face:"\u{1F92A}",grinning_face_with_one_large_and_one_small_eye:"\u{1F92A}",shushing_face:"\u{1F92B}",face_with_finger_covering_closed_lips:"\u{1F92B}",face_with_symbols_on_mouth:"\u{1F92C}",serious_face_with_symbols_covering_mouth:"\u{1F92C}",face_with_hand_over_mouth:"\u{1F92D}",smiling_face_with_smiling_eyes_and_hand_covering_mouth:"\u{1F92D}",face_vomiting:"\u{1F92E}",face_with_open_mouth_vomiting:"\u{1F92E}",exploding_head:"\u{1F92F}",shocked_face_with_exploding_head:"\u{1F92F}",pregnant_woman:"\u{1F930}","breast-feeding":"\u{1F931}",palms_up_together:"\u{1F932}",selfie:"\u{1F933}",prince:"\u{1F934}",woman_in_tuxedo:"\u{1F935}\u200D\u2640\uFE0F",man_in_tuxedo:"\u{1F935}\u200D\u2642\uFE0F",person_in_tuxedo:"\u{1F935}",mrs_claus:"\u{1F936}",mother_christmas:"\u{1F936}","woman-shrugging":"\u{1F937}\u200D\u2640\uFE0F","man-shrugging":"\u{1F937}\u200D\u2642\uFE0F",shrug:"\u{1F937}","woman-cartwheeling":"\u{1F938}\u200D\u2640\uFE0F","man-cartwheeling":"\u{1F938}\u200D\u2642\uFE0F",person_doing_cartwheel:"\u{1F938}","woman-juggling":"\u{1F939}\u200D\u2640\uFE0F","man-juggling":"\u{1F939}\u200D\u2642\uFE0F",juggling:"\u{1F939}",fencer:"\u{1F93A}","woman-wrestling":"\u{1F93C}\u200D\u2640\uFE0F","man-wrestling":"\u{1F93C}\u200D\u2642\uFE0F",wrestlers:"\u{1F93C}","woman-playing-water-polo":"\u{1F93D}\u200D\u2640\uFE0F","man-playing-water-polo":"\u{1F93D}\u200D\u2642\uFE0F",water_polo:"\u{1F93D}","woman-playing-handball":"\u{1F93E}\u200D\u2640\uFE0F","man-playing-handball":"\u{1F93E}\u200D\u2642\uFE0F",handball:"\u{1F93E}",diving_mask:"\u{1F93F}",wilted_flower:"\u{1F940}",drum_with_drumsticks:"\u{1F941}",clinking_glasses:"\u{1F942}",tumbler_glass:"\u{1F943}",spoon:"\u{1F944}",goal_net:"\u{1F945}",first_place_medal:"\u{1F947}",second_place_medal:"\u{1F948}",third_place_medal:"\u{1F949}",boxing_glove:"\u{1F94A}",martial_arts_uniform:"\u{1F94B}",curling_stone:"\u{1F94C}",lacrosse:"\u{1F94D}",softball:"\u{1F94E}",flying_disc:"\u{1F94F}",croissant:"\u{1F950}",avocado:"\u{1F951}",cucumber:"\u{1F952}",bacon:"\u{1F953}",potato:"\u{1F954}",carrot:"\u{1F955}",baguette_bread:"\u{1F956}",green_salad:"\u{1F957}",shallow_pan_of_food:"\u{1F958}",stuffed_flatbread:"\u{1F959}",egg:"\u{1F95A}",glass_of_milk:"\u{1F95B}",peanuts:"\u{1F95C}",kiwifruit:"\u{1F95D}",pancakes:"\u{1F95E}",dumpling:"\u{1F95F}",fortune_cookie:"\u{1F960}",takeout_box:"\u{1F961}",chopsticks:"\u{1F962}",bowl_with_spoon:"\u{1F963}",cup_with_straw:"\u{1F964}",coconut:"\u{1F965}",broccoli:"\u{1F966}",pie:"\u{1F967}",pretzel:"\u{1F968}",cut_of_meat:"\u{1F969}",sandwich:"\u{1F96A}",canned_food:"\u{1F96B}",leafy_green:"\u{1F96C}",mango:"\u{1F96D}",moon_cake:"\u{1F96E}",bagel:"\u{1F96F}",smiling_face_with_3_hearts:"\u{1F970}",yawning_face:"\u{1F971}",smiling_face_with_tear:"\u{1F972}",partying_face:"\u{1F973}",woozy_face:"\u{1F974}",hot_face:"\u{1F975}",cold_face:"\u{1F976}",ninja:"\u{1F977}",disguised_face:"\u{1F978}",pleading_face:"\u{1F97A}",sari:"\u{1F97B}",lab_coat:"\u{1F97C}",goggles:"\u{1F97D}",hiking_boot:"\u{1F97E}",womans_flat_shoe:"\u{1F97F}",crab:"\u{1F980}",lion_face:"\u{1F981}",scorpion:"\u{1F982}",turkey:"\u{1F983}",unicorn_face:"\u{1F984}",eagle:"\u{1F985}",duck:"\u{1F986}",bat:"\u{1F987}",shark:"\u{1F988}",owl:"\u{1F989}",fox_face:"\u{1F98A}",butterfly:"\u{1F98B}",deer:"\u{1F98C}",gorilla:"\u{1F98D}",lizard:"\u{1F98E}",rhinoceros:"\u{1F98F}",shrimp:"\u{1F990}",squid:"\u{1F991}",giraffe_face:"\u{1F992}",zebra_face:"\u{1F993}",hedgehog:"\u{1F994}",sauropod:"\u{1F995}","t-rex":"\u{1F996}",cricket:"\u{1F997}",kangaroo:"\u{1F998}",llama:"\u{1F999}",peacock:"\u{1F99A}",hippopotamus:"\u{1F99B}",parrot:"\u{1F99C}",raccoon:"\u{1F99D}",lobster:"\u{1F99E}",mosquito:"\u{1F99F}",microbe:"\u{1F9A0}",badger:"\u{1F9A1}",swan:"\u{1F9A2}",mammoth:"\u{1F9A3}",dodo:"\u{1F9A4}",sloth:"\u{1F9A5}",otter:"\u{1F9A6}",orangutan:"\u{1F9A7}",skunk:"\u{1F9A8}",flamingo:"\u{1F9A9}",oyster:"\u{1F9AA}",beaver:"\u{1F9AB}",bison:"\u{1F9AC}",seal:"\u{1F9AD}",guide_dog:"\u{1F9AE}",probing_cane:"\u{1F9AF}",bone:"\u{1F9B4}",leg:"\u{1F9B5}",foot:"\u{1F9B6}",tooth:"\u{1F9B7}",female_superhero:"\u{1F9B8}\u200D\u2640\uFE0F",male_superhero:"\u{1F9B8}\u200D\u2642\uFE0F",superhero:"\u{1F9B8}",female_supervillain:"\u{1F9B9}\u200D\u2640\uFE0F",male_supervillain:"\u{1F9B9}\u200D\u2642\uFE0F",supervillain:"\u{1F9B9}",safety_vest:"\u{1F9BA}",ear_with_hearing_aid:"\u{1F9BB}",motorized_wheelchair:"\u{1F9BC}",manual_wheelchair:"\u{1F9BD}",mechanical_arm:"\u{1F9BE}",mechanical_leg:"\u{1F9BF}",cheese_wedge:"\u{1F9C0}",cupcake:"\u{1F9C1}",salt:"\u{1F9C2}",beverage_box:"\u{1F9C3}",garlic:"\u{1F9C4}",onion:"\u{1F9C5}",falafel:"\u{1F9C6}",waffle:"\u{1F9C7}",butter:"\u{1F9C8}",mate_drink:"\u{1F9C9}",ice_cube:"\u{1F9CA}",bubble_tea:"\u{1F9CB}",woman_standing:"\u{1F9CD}\u200D\u2640\uFE0F",man_standing:"\u{1F9CD}\u200D\u2642\uFE0F",standing_person:"\u{1F9CD}",woman_kneeling:"\u{1F9CE}\u200D\u2640\uFE0F",man_kneeling:"\u{1F9CE}\u200D\u2642\uFE0F",kneeling_person:"\u{1F9CE}",deaf_woman:"\u{1F9CF}\u200D\u2640\uFE0F",deaf_man:"\u{1F9CF}\u200D\u2642\uFE0F",deaf_person:"\u{1F9CF}",face_with_monocle:"\u{1F9D0}",farmer:"\u{1F9D1}\u200D\u{1F33E}",cook:"\u{1F9D1}\u200D\u{1F373}",person_feeding_baby:"\u{1F9D1}\u200D\u{1F37C}",mx_claus:"\u{1F9D1}\u200D\u{1F384}",student:"\u{1F9D1}\u200D\u{1F393}",singer:"\u{1F9D1}\u200D\u{1F3A4}",artist:"\u{1F9D1}\u200D\u{1F3A8}",teacher:"\u{1F9D1}\u200D\u{1F3EB}",factory_worker:"\u{1F9D1}\u200D\u{1F3ED}",technologist:"\u{1F9D1}\u200D\u{1F4BB}",office_worker:"\u{1F9D1}\u200D\u{1F4BC}",mechanic:"\u{1F9D1}\u200D\u{1F527}",scientist:"\u{1F9D1}\u200D\u{1F52C}",astronaut:"\u{1F9D1}\u200D\u{1F680}",firefighter:"\u{1F9D1}\u200D\u{1F692}",people_holding_hands:"\u{1F9D1}\u200D\u{1F91D}\u200D\u{1F9D1}",person_with_probing_cane:"\u{1F9D1}\u200D\u{1F9AF}",red_haired_person:"\u{1F9D1}\u200D\u{1F9B0}",curly_haired_person:"\u{1F9D1}\u200D\u{1F9B1}",bald_person:"\u{1F9D1}\u200D\u{1F9B2}",white_haired_person:"\u{1F9D1}\u200D\u{1F9B3}",person_in_motorized_wheelchair:"\u{1F9D1}\u200D\u{1F9BC}",person_in_manual_wheelchair:"\u{1F9D1}\u200D\u{1F9BD}",health_worker:"\u{1F9D1}\u200D\u2695\uFE0F",judge:"\u{1F9D1}\u200D\u2696\uFE0F",pilot:"\u{1F9D1}\u200D\u2708\uFE0F",adult:"\u{1F9D1}",child:"\u{1F9D2}",older_adult:"\u{1F9D3}",woman_with_beard:"\u{1F9D4}\u200D\u2640\uFE0F",man_with_beard:"\u{1F9D4}\u200D\u2642\uFE0F",bearded_person:"\u{1F9D4}",person_with_headscarf:"\u{1F9D5}",woman_in_steamy_room:"\u{1F9D6}\u200D\u2640\uFE0F",man_in_steamy_room:"\u{1F9D6}\u200D\u2642\uFE0F",person_in_steamy_room:"\u{1F9D6}\u200D\u2642\uFE0F",woman_climbing:"\u{1F9D7}\u200D\u2640\uFE0F",person_climbing:"\u{1F9D7}\u200D\u2640\uFE0F",man_climbing:"\u{1F9D7}\u200D\u2642\uFE0F",woman_in_lotus_position:"\u{1F9D8}\u200D\u2640\uFE0F",person_in_lotus_position:"\u{1F9D8}\u200D\u2640\uFE0F",man_in_lotus_position:"\u{1F9D8}\u200D\u2642\uFE0F",female_mage:"\u{1F9D9}\u200D\u2640\uFE0F",mage:"\u{1F9D9}\u200D\u2640\uFE0F",male_mage:"\u{1F9D9}\u200D\u2642\uFE0F",female_fairy:"\u{1F9DA}\u200D\u2640\uFE0F",fairy:"\u{1F9DA}\u200D\u2640\uFE0F",male_fairy:"\u{1F9DA}\u200D\u2642\uFE0F",female_vampire:"\u{1F9DB}\u200D\u2640\uFE0F",vampire:"\u{1F9DB}\u200D\u2640\uFE0F",male_vampire:"\u{1F9DB}\u200D\u2642\uFE0F",mermaid:"\u{1F9DC}\u200D\u2640\uFE0F",merman:"\u{1F9DC}\u200D\u2642\uFE0F",merperson:"\u{1F9DC}\u200D\u2642\uFE0F",female_elf:"\u{1F9DD}\u200D\u2640\uFE0F",male_elf:"\u{1F9DD}\u200D\u2642\uFE0F",elf:"\u{1F9DD}\u200D\u2642\uFE0F",female_genie:"\u{1F9DE}\u200D\u2640\uFE0F",male_genie:"\u{1F9DE}\u200D\u2642\uFE0F",genie:"\u{1F9DE}\u200D\u2642\uFE0F",female_zombie:"\u{1F9DF}\u200D\u2640\uFE0F",male_zombie:"\u{1F9DF}\u200D\u2642\uFE0F",zombie:"\u{1F9DF}\u200D\u2642\uFE0F",brain:"\u{1F9E0}",orange_heart:"\u{1F9E1}",billed_cap:"\u{1F9E2}",scarf:"\u{1F9E3}",gloves:"\u{1F9E4}",coat:"\u{1F9E5}",socks:"\u{1F9E6}",red_envelope:"\u{1F9E7}",firecracker:"\u{1F9E8}",jigsaw:"\u{1F9E9}",test_tube:"\u{1F9EA}",petri_dish:"\u{1F9EB}",dna:"\u{1F9EC}",compass:"\u{1F9ED}",abacus:"\u{1F9EE}",fire_extinguisher:"\u{1F9EF}",toolbox:"\u{1F9F0}",bricks:"\u{1F9F1}",magnet:"\u{1F9F2}",luggage:"\u{1F9F3}",lotion_bottle:"\u{1F9F4}",thread:"\u{1F9F5}",yarn:"\u{1F9F6}",safety_pin:"\u{1F9F7}",teddy_bear:"\u{1F9F8}",broom:"\u{1F9F9}",basket:"\u{1F9FA}",roll_of_paper:"\u{1F9FB}",soap:"\u{1F9FC}",sponge:"\u{1F9FD}",receipt:"\u{1F9FE}",nazar_amulet:"\u{1F9FF}",ballet_shoes:"\u{1FA70}","one-piece_swimsuit":"\u{1FA71}",briefs:"\u{1FA72}",shorts:"\u{1FA73}",thong_sandal:"\u{1FA74}",drop_of_blood:"\u{1FA78}",adhesive_bandage:"\u{1FA79}",stethoscope:"\u{1FA7A}","yo-yo":"\u{1FA80}",kite:"\u{1FA81}",parachute:"\u{1FA82}",boomerang:"\u{1FA83}",magic_wand:"\u{1FA84}",pinata:"\u{1FA85}",nesting_dolls:"\u{1FA86}",ringed_planet:"\u{1FA90}",chair:"\u{1FA91}",razor:"\u{1FA92}",axe:"\u{1FA93}",diya_lamp:"\u{1FA94}",banjo:"\u{1FA95}",military_helmet:"\u{1FA96}",accordion:"\u{1FA97}",long_drum:"\u{1FA98}",coin:"\u{1FA99}",carpentry_saw:"\u{1FA9A}",screwdriver:"\u{1FA9B}",ladder:"\u{1FA9C}",hook:"\u{1FA9D}",mirror:"\u{1FA9E}",window:"\u{1FA9F}",plunger:"\u{1FAA0}",sewing_needle:"\u{1FAA1}",knot:"\u{1FAA2}",bucket:"\u{1FAA3}",mouse_trap:"\u{1FAA4}",toothbrush:"\u{1FAA5}",headstone:"\u{1FAA6}",placard:"\u{1FAA7}",rock:"\u{1FAA8}",fly:"\u{1FAB0}",worm:"\u{1FAB1}",beetle:"\u{1FAB2}",cockroach:"\u{1FAB3}",potted_plant:"\u{1FAB4}",wood:"\u{1FAB5}",feather:"\u{1FAB6}",anatomical_heart:"\u{1FAC0}",lungs:"\u{1FAC1}",people_hugging:"\u{1FAC2}",blueberries:"\u{1FAD0}",bell_pepper:"\u{1FAD1}",olive:"\u{1FAD2}",flatbread:"\u{1FAD3}",tamale:"\u{1FAD4}",fondue:"\u{1FAD5}",teapot:"\u{1FAD6}",bangbang:"\u203C\uFE0F",interrobang:"\u2049\uFE0F",tm:"\u2122\uFE0F",information_source:"\u2139\uFE0F",left_right_arrow:"\u2194\uFE0F",arrow_up_down:"\u2195\uFE0F",arrow_upper_left:"\u2196\uFE0F",arrow_upper_right:"\u2197\uFE0F",arrow_lower_right:"\u2198\uFE0F",arrow_lower_left:"\u2199\uFE0F",leftwards_arrow_with_hook:"\u21A9\uFE0F",arrow_right_hook:"\u21AA\uFE0F",watch:"\u231A",hourglass:"\u231B",keyboard:"\u2328\uFE0F",eject:"\u23CF\uFE0F",fast_forward:"\u23E9",rewind:"\u23EA",arrow_double_up:"\u23EB",arrow_double_down:"\u23EC",black_right_pointing_double_triangle_with_vertical_bar:"\u23ED\uFE0F",black_left_pointing_double_triangle_with_vertical_bar:"\u23EE\uFE0F",black_right_pointing_triangle_with_double_vertical_bar:"\u23EF\uFE0F",alarm_clock:"\u23F0",stopwatch:"\u23F1\uFE0F",timer_clock:"\u23F2\uFE0F",hourglass_flowing_sand:"\u23F3",double_vertical_bar:"\u23F8\uFE0F",black_square_for_stop:"\u23F9\uFE0F",black_circle_for_record:"\u23FA\uFE0F",m:"\u24C2\uFE0F",black_small_square:"\u25AA\uFE0F",white_small_square:"\u25AB\uFE0F",arrow_forward:"\u25B6\uFE0F",arrow_backward:"\u25C0\uFE0F",white_medium_square:"\u25FB\uFE0F",black_medium_square:"\u25FC\uFE0F",white_medium_small_square:"\u25FD",black_medium_small_square:"\u25FE",sunny:"\u2600\uFE0F",cloud:"\u2601\uFE0F",umbrella:"\u2602\uFE0F",snowman:"\u2603\uFE0F",comet:"\u2604\uFE0F",phone:"\u260E\uFE0F",telephone:"\u260E\uFE0F",ballot_box_with_check:"\u2611\uFE0F",shamrock:"\u2618\uFE0F",point_up:"\u261D\uFE0F",skull_and_crossbones:"\u2620\uFE0F",radioactive_sign:"\u2622\uFE0F",biohazard_sign:"\u2623\uFE0F",orthodox_cross:"\u2626\uFE0F",star_and_crescent:"\u262A\uFE0F",peace_symbol:"\u262E\uFE0F",yin_yang:"\u262F\uFE0F",wheel_of_dharma:"\u2638\uFE0F",white_frowning_face:"\u2639\uFE0F",relaxed:"\u263A\uFE0F",female_sign:"\u2640\uFE0F",male_sign:"\u2642\uFE0F",gemini:"\u264A",cancer:"\u264B",leo:"\u264C",virgo:"\u264D",libra:"\u264E",scorpius:"\u264F",chess_pawn:"\u265F\uFE0F",spades:"\u2660\uFE0F",clubs:"\u2663\uFE0F",hearts:"\u2665\uFE0F",diamonds:"\u2666\uFE0F",hotsprings:"\u2668\uFE0F",recycle:"\u267B\uFE0F",infinity:"\u267E\uFE0F",wheelchair:"\u267F",hammer_and_pick:"\u2692\uFE0F",crossed_swords:"\u2694\uFE0F",medical_symbol:"\u2695\uFE0F",staff_of_aesculapius:"\u2695\uFE0F",scales:"\u2696\uFE0F",alembic:"\u2697\uFE0F",gear:"\u2699\uFE0F",atom_symbol:"\u269B\uFE0F",fleur_de_lis:"\u269C\uFE0F",warning:"\u26A0\uFE0F",zap:"\u26A1",transgender_symbol:"\u26A7\uFE0F",white_circle:"\u26AA",black_circle:"\u26AB",coffin:"\u26B0\uFE0F",funeral_urn:"\u26B1\uFE0F",soccer:"\u26BD",baseball:"\u26BE",snowman_without_snow:"\u26C4",partly_sunny:"\u26C5",thunder_cloud_and_rain:"\u26C8\uFE0F",ophiuchus:"\u26CE",pick:"\u26CF\uFE0F",helmet_with_white_cross:"\u26D1\uFE0F",chains:"\u26D3\uFE0F",no_entry:"\u26D4",shinto_shrine:"\u26E9\uFE0F",church:"\u26EA",mountain:"\u26F0\uFE0F",umbrella_on_ground:"\u26F1\uFE0F",fountain:"\u26F2",golf:"\u26F3",ferry:"\u26F4\uFE0F",boat:"\u26F5",sailboat:"\u26F5",skier:"\u26F7\uFE0F",ice_skate:"\u26F8\uFE0F","woman-bouncing-ball":"\u26F9\uFE0F\u200D\u2640\uFE0F","man-bouncing-ball":"\u26F9\uFE0F\u200D\u2642\uFE0F",person_with_ball:"\u26F9\uFE0F\u200D\u2642\uFE0F",tent:"\u26FA",fuelpump:"\u26FD",scissors:"\u2702\uFE0F",airplane:"\u2708\uFE0F",email:"\u2709\uFE0F",envelope:"\u2709\uFE0F",fist:"\u270A",hand:"\u270B",raised_hand:"\u270B",v:"\u270C\uFE0F",writing_hand:"\u270D\uFE0F",pencil2:"\u270F\uFE0F",black_nib:"\u2712\uFE0F",heavy_check_mark:"\u2714\uFE0F",heavy_multiplication_x:"\u2716\uFE0F",latin_cross:"\u271D\uFE0F",star_of_david:"\u2721\uFE0F",eight_spoked_asterisk:"\u2733\uFE0F",eight_pointed_black_star:"\u2734\uFE0F",snowflake:"\u2744\uFE0F",sparkle:"\u2747\uFE0F",x:"\u274C",negative_squared_cross_mark:"\u274E",heavy_heart_exclamation_mark_ornament:"\u2763\uFE0F",heart_on_fire:"\u2764\uFE0F\u200D\u{1F525}",mending_heart:"\u2764\uFE0F\u200D\u{1FA79}",heart:"\u2764\uFE0F",arrow_right:"\u27A1\uFE0F",curly_loop:"\u27B0",loop:"\u27BF",arrow_heading_up:"\u2934\uFE0F",arrow_heading_down:"\u2935\uFE0F",arrow_left:"\u2B05\uFE0F",arrow_up:"\u2B06\uFE0F",arrow_down:"\u2B07\uFE0F",black_large_square:"\u2B1B",white_large_square:"\u2B1C",star:"\u2B50",o:"\u2B55",wavy_dash:"\u3030\uFE0F",part_alternation_mark:"\u303D\uFE0F",congratulations:"\u3297\uFE0F",secret:"\u3299\uFE0F"}}),ST=ae((e,t)=>{v();var n=yT(),r=_T(),o=/:([a-zA-Z0-9_\-\+]+):/g,a=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function s(He){var Ye=He.indexOf(":");return Ye>-1?Ye===He.length-1?(He=He.substring(0,Ye),s(He)):(He=He.substr(Ye+1),s(He)):He}function u(He){return typeof He=="string"&&He.length>0?":"+He+":":He}function l(He){return typeof He=="string"&&He[0]!==":"?u(He):He}var c=String.fromCharCode(65039),m=new RegExp(c,"g");function me(He){return He.replace(m,"")}var xe=Object.keys(r).reduce(function(He,Ye){return He[me(r[Ye])]=Ye,He},{}),Ne={emoji:r};Ne._get=function(He){return xe[me(He)]?He:r.hasOwnProperty(He)?r[He]:l(He)},Ne.get=function(He){return He=s(He),Ne._get(He)},Ne.find=function(He){return Ne.findByName(He)||Ne.findByCode(He)},Ne.findByName=function(He){var Ye=s(He),Je=r[Ye];return Je?{emoji:Je,key:Ye}:void 0},Ne.findByCode=function(He){var Ye=me(He),Je=xe[Ye];return Je?{emoji:r[Je],key:Je}:void 0},Ne.hasEmoji=function(He){return Ne.hasEmojiByName(He)||Ne.hasEmojiByCode(He)},Ne.hasEmojiByName=function(He){var Ye=Ne.findByName(He);return!!Ye&&Ye.key===s(He)},Ne.hasEmojiByCode=function(He){var Ye=Ne.findByCode(He);return!!Ye&&me(Ye.emoji)===me(He)},Ne.which=function(He,Ye){var Je=me(He),vn=xe[Je];return Ye?u(vn):vn},Ne.emojify=function(He,Ye,Je){return He?He.split(o).map(function(vn,La){if(La%2==0)return vn;var sr=Ne._get(vn),Zr=sr.indexOf(":")>-1;return Zr&&typeof Ye=="function"?Ye(vn):!Zr&&typeof Je=="function"?Je(sr,vn):sr}).join(""):""},Ne.random=function(){var He=Object.keys(r),Ye=Math.floor(Math.random()*He.length),Je=He[Ye],vn=Ne._get(Je);return{key:Je,emoji:vn}},Ne.search=function(He){var Ye=Object.keys(r),Je=s(He),vn=Ye.filter(function(La){return La.toString().indexOf(Je)===0});return vn.map(function(La){return{key:La,emoji:Ne._get(La)}})},Ne.unemojify=function(He){if(!He)return"";var Ye=n(He);return Ye.map(function(Je){return Ne.which(Je,!0)||Je}).join("")},Ne.replace=function(He,Ye,Je){if(!He)return"";var vn=typeof Ye=="function"?Ye:function(){return Ye},La=n(He),sr=La.map(function(Zr,zs){var za=Ne.findByCode(Zr);return za&&Je&&La[zs+1]===" "&&(La[zs+1]=""),za?vn(za):Zr}).join("");return Je?sr.replace(a,""):sr},Ne.strip=function(He){return Ne.replace(He,"",!0)},t.exports=Ne}),T1=ae((e,t)=>{v(),e.__esModule=!0,e.default=void 0;function n(u){if(u===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u}function r(u,l){u.prototype=Object.create(l.prototype),u.prototype.constructor=u,o(u,l)}function o(u,l){return o=Object.setPrototypeOf||function(c,m){return c.__proto__=m,c},o(u,l)}function a(u,l,c){return l in u?Object.defineProperty(u,l,{value:c,enumerable:!0,configurable:!0,writable:!0}):u[l]=c,u}var s=function(u){var l,c,m=u.Component,me=u.createElement,xe=u.createRef;return c=l=function(Ne){r(He,Ne);function He(){for(var Je,vn=arguments.length,La=new Array(vn),sr=0;sr<vn;sr++)La[sr]=arguments[sr];return Je=Ne.call.apply(Ne,[this].concat(La))||this,a(n(Je),"_hint",xe()),a(n(Je),"_container",xe()),a(n(Je),"state",{target:null,hidden:!0}),a(n(Je),"target",null),a(n(Je),"placement",null),a(n(Je),"_containerStyle",{position:"relative"}),a(n(Je),"toggleEvents",function(Zr,zs){var za=Zr.events,Hs=Zr.events,lc=Hs.click,Ty=Hs.focus,_y=Hs.hover,xy=zs?"addEventListener":"removeEventListener",Bb=za===!0;(lc||Bb)&&document[xy]("click",Je.toggleHint),(Ty||Bb)&&document[xy]("focusin",Je.toggleHint),(_y||Bb)&&document[xy]("mouseover",Je.toggleHint),(lc||_y||Bb)&&document[xy]("touchend",Je.toggleHint)}),a(n(Je),"toggleHint",function(Zr){var zs=Zr===void 0?{}:Zr,za=zs.target,Hs=za===void 0?null:za;Hs=Je.getHint(Hs),clearTimeout(Je._timeout),Je._timeout=setTimeout(function(){Je.target=Hs,Je.target&&(Je.placement=null),Je.getHintData()},Hs===null?Je.props.delay.hide===void 0?Je.props.delay:Je.props.delay.hide:Je.props.delay.show===void 0?Je.props.delay:Je.props.delay.show)}),a(n(Je),"getHint",function(Zr){for(var zs=Je.props,za=zs.attribute,Hs=zs.persist,lc=Je.target;Zr&&Zr!==document;){if(Hs&&Zr===Je._hint.current)return lc;if(Zr.hasAttribute(za))return Zr;Zr=Zr.parentNode}return null}),a(n(Je),"shallowEqual",function(Zr,zs){var za=Object.keys(Zr);return za.length===Object.keys(zs).length&&za.reduce(function(Hs,lc){return Hs&&(typeof Zr[lc]=="function"&&typeof zs[lc]=="function"||Zr[lc]===zs[lc])},!0)}),a(n(Je),"getHintData",function(){if(!Je.target){Je.setState({hidden:!0});return}var Zr=Je.props,zs=Zr.attribute,za=Zr.autoPosition,Hs=Zr.position,lc=Je.target.getAttribute(zs)||"",Ty=Je.placement||Je.target.getAttribute(zs+"-at")||Hs,_y=Je._container.current.getBoundingClientRect(),xy=_y.top,Bb=_y.left,Dy=Je._hint.current.getBoundingClientRect(),Bg=Dy.width,yy=Dy.height,wy=Je.target.getBoundingClientRect(),Ay=wy.top,$b=wy.left,e0=wy.width,Hb=wy.height;if(za&&!Je.placement){var Yb=["left","right"].includes(Ty),Jb=document.documentElement,l2=Jb.clientHeight,y2=Jb.clientWidth,Rb={left:(Yb?$b-Bg:$b+(e0-Bg>>1))>0,right:(Yb?$b+e0+Bg:$b+(e0+Bg>>1))<y2,bottom:(Yb?Ay+(Hb+yy>>1):Ay+Hb+yy)<l2,top:(Yb?Ay-(yy>>1):Ay-yy)>0};if(!Ty||!Rb[Ty])switch(Ty){case"left":Rb.left||(Ty="right"),Rb.top||(Ty="bottom"),Rb.bottom||(Ty="top");break;case"right":Rb.right||(Ty="left"),Rb.top||(Ty="bottom"),Rb.bottom||(Ty="top");break;case"bottom":Rb.bottom||(Ty="top"),Rb.left||(Ty="right"),Rb.right||(Ty="left");break;case"top":default:Rb.top||(Ty="bottom"),Rb.left||(Ty="right"),Rb.right||(Ty="left");break}}var i2,s2;switch(Ty){case"left":i2=Hb-yy>>1,s2=-Bg;break;case"right":i2=Hb-yy>>1,s2=e0;break;case"bottom":i2=Hb,s2=e0-Bg>>1;break;case"top":default:i2=-yy,s2=e0-Bg>>1}(yy>0||Bg>0)&&(Je.placement=Ty);var E2={content:lc,at:Ty,top:i2+Ay-xy|0,left:s2+$b-Bb|0,hidden:!1};Je.setState(E2)}),Je}var Ye=He.prototype;return Ye.componentDidMount=function(){this.toggleEvents(this.props,!0)},Ye.componentWillUnmount=function(){this.toggleEvents(this.props,!1),clearTimeout(this._timeout)},Ye.componentDidUpdate=function(){this.target&&!this.state.hidden&&this.getHintData()},Ye.shouldComponentUpdate=function(Je,vn){return!this.shallowEqual(vn,this.state)||!this.shallowEqual(Je,this.props)},Ye.render=function(){var Je=this.props,vn=Je.className,La=Je.onRenderContent,sr=this.state,Zr=sr.content,zs=sr.at,za=sr.top,Hs=sr.left;return me("div",{ref:this._container,style:this._containerStyle},me("div",{className:vn+" "+vn+"--"+zs,ref:this._hint,role:"tooltip",style:{top:za,left:Hs,display:this.target?void 0:"none"}},this.target&&(La?La(this.target,Zr):me("div",{className:vn+"__content"},Zr))))},He}(m),a(l,"defaultProps",{attribute:"data-rh",autoPosition:!1,className:"react-hint",delay:0,events:!1,onRenderContent:null,persist:!1,position:"top"}),c};e.default=s,t.exports=e.default});function Cd(e){if(typeof e!="string"||!e)throw new Error("expected a non-empty string, got: "+e)}function C_(e){if(typeof e!="number")throw new Error("expected a number, got: "+e)}function qH(e,t){let n=new Set,r=[];for(let o of e){let a=t(o);n.has(a)||(n.add(a),r.push(o))}return r}function L1(e){return qH(e,t=>t.unicode)}function VH(e){function t(n,r,o){let a=r?e.createObjectStore(n,{keyPath:r}):e.createObjectStore(n);if(o)for(let[s,[u,l]]of Object.entries(o))a.createIndex(s,u,{multiEntry:l});return a}t(iu),t(Ra,FH,{[P1]:[jH,!0],[F1]:[[RH,NH]],[N1]:[LH,!0]}),t(O_,void 0,{[j1]:[""]})}function $1(e,t,n){n.onerror=()=>t(n.error),n.onblocked=()=>t(new Error("IDB blocked")),n.onsuccess=()=>e(n.result)}async function zH(e){let t=await new Promise((n,r)=>{let o=indexedDB.open(e,MH);I_[e]=o,o.onupgradeneeded=a=>{a.oldVersion<PH&&VH(o.result)},$1(n,r,o)});return t.onclose=()=>M_(e),t}function UH(e){return Td[e]||(Td[e]=zH(e)),Td[e]}function Hi(e,t,n,r){return new Promise((o,a)=>{let s=e.transaction(t,n,{durability:"relaxed"}),u=typeof t=="string"?s.objectStore(t):t.map(c=>s.objectStore(c)),l;r(u,s,c=>{l=c}),s.oncomplete=()=>o(l),s.onerror=()=>a(s.error)})}function M_(e){let t=I_[e],n=t&&t.result;if(n){n.close();let r=Ad[e];if(r)for(let o of r)o()}delete I_[e],delete Td[e],delete Ad[e]}function WH(e){return new Promise((t,n)=>{M_(e);let r=indexedDB.deleteDatabase(e);$1(t,n,r)})}function HH(e,t){let n=Ad[e];n||(n=Ad[e]=[]),n.push(t)}function au(e){return e.split(/[\s_]+/).map(t=>!t.match(/\w/)||KH.has(t)?t.toLowerCase():t.replace(/[)(:,]/g,"").replace(//g,"'").toLowerCase()).filter(Boolean)}function B1(e){return e.filter(Boolean).map(t=>t.toLowerCase()).filter(t=>t.length>=GH)}function QH(e){return e.map(({annotation:t,emoticon:n,group:r,order:o,shortcodes:a,skins:s,tags:u,emoji:l,version:c})=>{let m=[...new Set(B1([...(a||[]).map(au).flat(),...u.map(au).flat(),...au(t),n]))].sort(),me={annotation:t,group:r,order:o,tags:u,tokens:m,unicode:l,version:c};if(n&&(me.emoticon=n),a&&(me.shortcodes=a),s){me.skinTones=[],me.skinUnicodes=[],me.skinVersions=[];for(let{tone:xe,emoji:Ne,version:He}of s)me.skinTones.push(xe),me.skinUnicodes.push(Ne),me.skinVersions.push(He)}return me})}function q1(e,t,n,r){e[t](n).onsuccess=o=>r&&r(o.target.result)}function Na(e,t,n){q1(e,"get",t,n)}function V1(e,t,n){q1(e,"getAll",t,n)}function P_(e){e.commit&&e.commit()}function YH(e,t){let n=e[0];for(let r=1;r<e.length;r++){let o=e[r];t(n)>t(o)&&(n=o)}return n}function z1(e,t){let n=YH(e,o=>o.length),r=[];for(let o of n)e.some(a=>a.findIndex(s=>t(s)===t(o))===-1)||r.push(o);return r}async function JH(e){return!await j_(e,iu,Od)}async function XH(e,t,n){let[r,o]=await Promise.all([T_,Od].map(a=>j_(e,iu,a)));return r===n&&o===t}async function ZH(e,t){let n=50;return Hi(e,Ra,ou,(r,o,a)=>{let s,u=()=>{r.getAll(s&&IDBKeyRange.lowerBound(s,!0),n).onsuccess=l=>{let c=l.target.result;for(let m of c)if(s=m.unicode,t(m))return a(m);if(c.length<n)return a();u()}};u()})}async function U1(e,t,n,r){try{let o=QH(t);await Hi(e,[Ra,iu],A_,([a,s],u)=>{let l,c,m=0;function me(){++m==2&&xe()}function xe(){if(!(l===r&&c===n)){a.clear();for(let Ne of o)a.put(Ne);s.put(r,T_),s.put(n,Od),P_(u)}}Na(s,T_,Ne=>{l=Ne,me()}),Na(s,Od,Ne=>{c=Ne,me()})})}finally{}}async function e3(e,t){return Hi(e,Ra,ou,(n,r,o)=>{let a=IDBKeyRange.bound([t,0],[t+1,0],!1,!0);V1(n.index(F1),a,o)})}async function W1(e,t){let n=B1(au(t));return n.length?Hi(e,Ra,ou,(r,o,a)=>{let s=[],u=()=>{s.length===n.length&&l()},l=()=>{let c=z1(s,m=>m.unicode);a(c.sort((m,me)=>m.order<me.order?-1:1))};for(let c=0;c<n.length;c++){let m=n[c],me=c===n.length-1?IDBKeyRange.bound(m,m+"\uFFFF",!1,!0):IDBKeyRange.only(m);V1(r.index(P1),me,xe=>{s.push(xe),u()})}}):[]}async function t3(e,t){let n=await W1(e,t);return n.length?n.filter(r=>(r.shortcodes||[]).map(o=>o.toLowerCase()).includes(t.toLowerCase()))[0]||null:await ZH(e,r=>(r.shortcodes||[]).includes(t.toLowerCase()))||null}async function r3(e,t){return Hi(e,Ra,ou,(n,r,o)=>Na(n,t,a=>{if(a)return o(a);Na(n.index(N1),t,s=>o(s||null))}))}function j_(e,t,n){return Hi(e,t,ou,(r,o,a)=>Na(r,n,a))}function n3(e,t,n,r){return Hi(e,t,A_,(o,a)=>{o.put(r,n),P_(a)})}function i3(e,t){return Hi(e,O_,A_,(n,r)=>Na(n,t,o=>{n.put((o||0)+1,t),P_(r)}))}function o3(e,t,n){return n===0?[]:Hi(e,[O_,Ra],ou,([r,o],a,s)=>{let u=[];r.index(j1).openCursor(void 0,"prev").onsuccess=l=>{let c=l.target.result;if(!c)return s(u);function m(Ne){if(u.push(Ne),u.length===n)return s(u);c.continue()}let me=c.primaryKey,xe=t.byName(me);if(xe)return m(xe);Na(o,me,Ne=>{if(Ne)return m(Ne);c.continue()})}})}function a3(e,t){let n=new Map;for(let r of e){let o=t(r);for(let a of o){let s=n;for(let l=0;l<a.length;l++){let c=a.charAt(l),m=s.get(c);m||(m=new Map,s.set(c,m)),s=m}let u=s.get(Id);u||(u=[],s.set(Id,u)),u.push(r)}}return(r,o)=>{let a=n;for(let l=0;l<r.length;l++){let c=r.charAt(l),m=a.get(c);if(m)a=m;else return[]}if(o)return a.get(Id)||[];let s=[],u=[a];for(;u.length;){let l=[...u.shift().entries()].sort((c,m)=>c[0]<m[0]?-1:1);for(let[c,m]of l)c===Id?s.push(...m):u.push(m)}return s}}function u3(e){let t=e&&Array.isArray(e),n=t&&e.length&&(!e[0]||s3.some(r=>!(r in e[0])));if(!t||n)throw new Error("Custom emojis are in the wrong format")}function H1(e){u3(e);let t=(c,m)=>c.name.toLowerCase()<m.name.toLowerCase()?-1:1,n=e.sort(t),r=a3(e,c=>[...new Set((c.shortcodes||[]).map(m=>au(m)).flat())]),o=c=>r(c,!0),a=c=>r(c,!1),s=c=>{let m=au(c),me=m.map((xe,Ne)=>(Ne<m.length-1?o:a)(xe));return z1(me,xe=>xe.name).sort(t)},u=new Map,l=new Map;for(let c of e){l.set(c.name.toLowerCase(),c);for(let m of c.shortcodes||[])u.set(m.toLowerCase(),c)}return{all:n,search:s,byShortcode:c=>u.get(c.toLowerCase()),byName:c=>l.get(c.toLowerCase())}}function fc(e){if(!e)return e;if(delete e.tokens,e.skinTones){let t=e.skinTones.length;e.skins=Array(t);for(let n=0;n<t;n++)e.skins[n]={tone:e.skinTones[n],unicode:e.skinUnicodes[n],version:e.skinVersions[n]};delete e.skinTones,delete e.skinUnicodes,delete e.skinVersions}return e}function K1(e){e||console.warn("emoji-picker-element is more efficient if the dataSource server exposes an ETag header.")}function c3(e){if(!e||!Array.isArray(e)||!e[0]||typeof e[0]!="object"||l3.some(t=>!(t in e[0])))throw new Error("Emoji data is in the wrong format")}function G1(e,t){if(Math.floor(e.status/100)!==2)throw new Error("Failed to fetch: "+t+":  "+e.status)}async function f3(e){let t=await fetch(e,{method:"HEAD"});G1(t,e);let n=t.headers.get("etag");return K1(n),n}async function F_(e){let t=await fetch(e);G1(t,e);let n=t.headers.get("etag");K1(n);let r=await t.json();return c3(r),[n,r]}function p3(e){for(var t="",n=new Uint8Array(e),r=n.byteLength,o=-1;++o<r;)t+=String.fromCharCode(n[o]);return t}function d3(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),o=-1;++o<t;)r[o]=e.charCodeAt(o);return n}async function Q1(e){let t=JSON.stringify(e),n=d3(t),r=await crypto.subtle.digest("SHA-1",n),o=p3(r);return btoa(o)}async function h3(e,t){let n,r=await f3(t);if(!r){let o=await F_(t);r=o[0],n=o[1],r||(r=await Q1(n))}await XH(e,t,r)||(n||(n=(await F_(t))[1]),await U1(e,n,t,r))}async function m3(e,t){let[n,r]=await F_(t);n||(n=await Q1(r)),await U1(e,r,t,n)}var MH,PH,Ra,iu,O_,jH,P1,FH,j1,RH,NH,F1,T_,Od,R1,ou,A_,N1,LH,$H,BH,I_,Td,Ad,KH,GH,Id,s3,l3,Y1,Md,R_=uu(()=>{v(),MH=1,PH=1,Ra="emoji",iu="keyvalue",O_="favorites",jH="tokens",P1="tokens",FH="unicode",j1="count",RH="group",NH="order",F1="group-order",T_="eTag",Od="url",R1="skinTone",ou="readonly",A_="readwrite",N1="skinUnicodes",LH="skinUnicodes",$H="https://cdn.jsdelivr.net/npm/emoji-picker-element-data@^1/en/emojibase/data.json",BH="en",I_={},Td={},Ad={},KH=new Set([":D","XD",":'D","O:)",":X",":P",";P","XP",":L",":Z",":j","8D","XO","8)",":B",":O",":S",":'o","Dx","X(","D:",":C",">0)",":3","</3","<3","\\M/",":E","8#"]),GH=2,Id="",s3=["name","url"],l3=["annotation","emoji","group","order","tags","version"],Y1=class{constructor({dataSource:e=$H,locale:t=BH,customEmoji:n=[]}={}){this.dataSource=e,this.locale=t,this._dbName=`emoji-picker-element-${this.locale}`,this._db=void 0,this._lazyUpdate=void 0,this._custom=H1(n),this._clear=this._clear.bind(this),this._ready=this._init()}async _init(){let e=this._db=await UH(this._dbName);HH(this._dbName,this._clear);let t=this.dataSource;await JH(e)?await m3(e,t):this._lazyUpdate=h3(e,t)}async ready(){let e=async()=>(this._ready||(this._ready=this._init()),this._ready);await e(),this._db||await e()}async getEmojiByGroup(e){return C_(e),await this.ready(),L1(await e3(this._db,e)).map(fc)}async getEmojiBySearchQuery(e){Cd(e),await this.ready();let t=this._custom.search(e),n=L1(await W1(this._db,e)).map(fc);return[...t,...n]}async getEmojiByShortcode(e){return Cd(e),await this.ready(),this._custom.byShortcode(e)||fc(await t3(this._db,e))}async getEmojiByUnicodeOrName(e){return Cd(e),await this.ready(),this._custom.byName(e)||fc(await r3(this._db,e))}async getPreferredSkinTone(){return await this.ready(),await j_(this._db,iu,R1)||0}async setPreferredSkinTone(e){return C_(e),await this.ready(),n3(this._db,iu,R1,e)}async incrementFavoriteEmojiCount(e){return Cd(e),await this.ready(),i3(this._db,e)}async getTopFavoriteEmoji(e){return C_(e),await this.ready(),(await o3(this._db,this._custom,e)).map(fc)}set customEmoji(e){this._custom=H1(e)}get customEmoji(){return this._custom.all}async _shutdown(){await this.ready();try{await this._lazyUpdate}catch{}}_clear(){this._db=this._ready=this._lazyUpdate=void 0}async close(){await this._shutdown(),await M_(this._dbName)}async delete(){await this._shutdown(),await WH(this._dbName)}},Md=Y1});function pc(){}function J1(e){return e()}function X1(){return Object.create(null)}function dc(e){e.forEach(J1)}function Z1(e){return typeof e=="function"}function g3(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function jd(e,t){return Pd||(Pd=document.createElement("a")),Pd.href=t,e===Pd.href}function v3(e){return Object.keys(e).length===0}function y3(e){return e&&Z1(e.destroy)?e.destroy:pc}function ct(e,t){e.appendChild(t)}function Fn(e,t,n){e.insertBefore(t,n||null)}function Rn(e){e.parentNode.removeChild(e)}function at(e){return document.createElement(e)}function oi(e){return document.createTextNode(e)}function Nn(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function j(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function ai(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function eA(e,t){e.value=t!=null?t:""}function jo(e,t,n,r){e.style.setProperty(t,n,r?"important":"")}function Fd(e){tA=e}function iA(){N_||(N_=!0,nA.then(oA))}function _3(){return iA(),nA}function L_(e){Rd.push(e)}function oA(){if(!$_){$_=!0;do{for(let e=0;e<hc.length;e+=1){let t=hc[e];Fd(t),b3(t.$$)}for(Fd(null),hc.length=0;su.length;)su.pop()();for(let e=0;e<Rd.length;e+=1){let t=Rd[e];B_.has(t)||(B_.add(t),t())}Rd.length=0}while(hc.length);for(;rA.length;)rA.pop()();N_=!1,$_=!1,B_.clear()}}function b3(e){if(e.fragment!==null){e.update(),dc(e.before_update);let t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(L_)}}function aA(e,t){e&&e.i&&(w3.delete(e),e.i(t))}function mc(e,t){e.d(1),t.delete(e.key)}function gc(e,t,n,r,o,a,s,u,l,c,m,me){let xe=e.length,Ne=a.length,He=xe,Ye={};for(;He--;)Ye[e[He].key]=He;let Je=[],vn=new Map,La=new Map;for(He=Ne;He--;){let za=me(o,a,He),Hs=n(za),lc=s.get(Hs);lc?r&&lc.p(za,t):(lc=c(Hs,za),lc.c()),vn.set(Hs,Je[He]=lc),Hs in Ye&&La.set(Hs,Math.abs(He-Ye[Hs]))}let sr=new Set,Zr=new Set;function zs(za){aA(za,1),za.m(u,m),s.set(za.key,za),m=za.first,Ne--}for(;xe&&Ne;){let za=Je[Ne-1],Hs=e[xe-1],lc=za.key,Ty=Hs.key;za===Hs?(m=za.first,xe--,Ne--):vn.has(Ty)?!s.has(lc)||sr.has(lc)?zs(za):Zr.has(Ty)?xe--:La.get(lc)>La.get(Ty)?(Zr.add(lc),zs(za)):(sr.add(Ty),xe--):(l(Hs,s),xe--)}for(;xe--;){let za=e[xe];vn.has(za.key)||l(za,s)}for(;Ne;)zs(Je[Ne-1]);return Je}function S3(e,t,n,r){let{fragment:o,on_mount:a,on_destroy:s,after_update:u}=e.$$;o&&o.m(t,n),r||L_(()=>{let l=a.map(J1).filter(Z1);s?s.push(...l):dc(l),e.$$.on_mount=[]}),u.forEach(L_)}function E3(e,t){let n=e.$$;n.fragment!==null&&(dc(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function k3(e,t){e.$$.dirty[0]===-1&&(hc.push(e),iA(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function D3(e,t,n,r,o,a,s,u=[-1]){let l=tA;Fd(e);let c=e.$$={fragment:null,ctx:null,props:a,update:pc,not_equal:o,bound:X1(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(l?l.$$.context:t.context||[]),callbacks:X1(),dirty:u,skip_bound:!1,root:t.target||l.$$.root};s&&s(c.root);let m=!1;c.ctx=n?n(e,t.props||{},(me,xe,...Ne)=>{let He=Ne.length?Ne[0]:xe;return c.ctx&&o(c.ctx[me],c.ctx[me]=He)&&(!c.skip_bound&&c.bound[me]&&c.bound[me](He),m&&k3(e,me)),xe}):[],c.update(),m=!0,dc(c.before_update),c.fragment=r?r(c.ctx):!1,t.target&&(c.fragment&&c.fragment.c(),t.intro&&aA(e.$$.fragment),S3(e,t.target,t.anchor,t.customElement),oA()),Fd(l)}function fA(e){return e.unicode.includes("\u200D")}function R3(e){let t=dA(e,"#000"),n=dA(e,"#fff");return t&&n&&F3(t,n)}function N3(){let e=Object.entries(T3);try{for(let[t,n]of e)if(R3(t))return n}catch{}finally{}return e[0][1]}function z3(e,t){if(t===0)return e;let n=e.indexOf(B3);return n!==-1?e.substring(0,n)+String.fromCodePoint(q3+t-1)+e.substring(n):(e.endsWith(L3)&&(e=e.substring(0,e.length-1)),e+$3+String.fromCodePoint(V3+t-1))}function Fo(e){e.preventDefault(),e.stopPropagation()}function z_(e,t,n){return t+=e?-1:1,t<0?t=n.length-1:t>=n.length&&(t=0),t}function hA(e,t){let n=new Set,r=[];for(let o of e){let a=t(o);n.has(a)||(n.add(a),r.push(o))}return r}function U3(e,t){let n=r=>{let o={};for(let a of r)typeof a.tone=="number"&&a.version<=t&&(o[a.tone]=a.unicode);return o};return e.map(({unicode:r,skins:o,shortcodes:a,url:s,name:u,category:l})=>({unicode:r,name:u,shortcodes:a,url:s,category:l,id:r||u,skins:o&&n(o),title:(a||[]).join(", ")}))}function H3(e,t){let n;return W3?(n=new ResizeObserver(r=>t(r[0].contentRect.width)),n.observe(e)):Ld(()=>t(e.getBoundingClientRect().width)),{destroy(){n&&n.disconnect()}}}function mA(e){{let t=document.createRange();return t.selectNode(e.firstChild),t.getBoundingClientRect().width}}function K3(e,t,n){for(let r of e){let o=n(r),a=mA(o);typeof U_=="undefined"&&(U_=mA(t));let s=a/1.8<U_;V_.set(r.unicode,s)}}function G3(e){return hA(e,t=>t)}function gA(e,t,n){let r=e.slice();return r[63]=t[n],r[65]=n,r}function vA(e,t,n){let r=e.slice();return r[66]=t[n],r[65]=n,r}function yA(e,t,n){let r=e.slice();return r[63]=t[n],r[65]=n,r}function _A(e,t,n){let r=e.slice();return r[69]=t[n],r}function bA(e,t,n){let r=e.slice();return r[72]=t[n],r[65]=n,r}function wA(e,t){let n,r=t[72]+"",o,a,s,u,l,c;return{key:e,first:null,c(){n=at("div"),o=oi(r),j(n,"id",a="skintone-"+t[65]),j(n,"class",s="emoji hide-focus "+(t[65]===t[20]?"active":"")),j(n,"aria-selected",u=t[65]===t[20]),j(n,"role","option"),j(n,"title",l=t[0].skinTones[t[65]]),j(n,"tabindex","-1"),j(n,"aria-label",c=t[0].skinTones[t[65]]),this.first=n},m(m,me){Fn(m,n,me),ct(n,o)},p(m,me){t=m,me[0]&512&&r!==(r=t[72]+"")&&ai(o,r),me[0]&512&&a!==(a="skintone-"+t[65])&&j(n,"id",a),me[0]&1049088&&s!==(s="emoji hide-focus "+(t[65]===t[20]?"active":""))&&j(n,"class",s),me[0]&1049088&&u!==(u=t[65]===t[20])&&j(n,"aria-selected",u),me[0]&513&&l!==(l=t[0].skinTones[t[65]])&&j(n,"title",l),me[0]&513&&c!==(c=t[0].skinTones[t[65]])&&j(n,"aria-label",c)},d(m){m&&Rn(n)}}}function xA(e,t){let n,r,o=t[69].emoji+"",a,s,u,l,c,m,me;function xe(){return t[49](t[69])}return{key:e,first:null,c(){n=at("button"),r=at("div"),a=oi(o),j(r,"class","nav-emoji emoji"),j(n,"role","tab"),j(n,"class","nav-button"),j(n,"aria-controls",s="tab-"+t[69].id),j(n,"aria-label",u=t[0].categories[t[69].name]),j(n,"aria-selected",l=!t[4]&&t[13].id===t[69].id),j(n,"title",c=t[0].categories[t[69].name]),this.first=n},m(Ne,He){Fn(Ne,n,He),ct(n,r),ct(r,a),m||(me=Nn(n,"click",xe),m=!0)},p(Ne,He){t=Ne,He[0]&4096&&o!==(o=t[69].emoji+"")&&ai(a,o),He[0]&4096&&s!==(s="tab-"+t[69].id)&&j(n,"aria-controls",s),He[0]&4097&&u!==(u=t[0].categories[t[69].name])&&j(n,"aria-label",u),He[0]&12304&&l!==(l=!t[4]&&t[13].id===t[69].id)&&j(n,"aria-selected",l),He[0]&4097&&c!==(c=t[0].categories[t[69].name])&&j(n,"title",c)},d(Ne){Ne&&Rn(n),m=!1,me()}}}function Q3(e){let t,n;return{c(){t=at("img"),j(t,"class","custom-emoji"),jd(t.src,n=e[63].url)||j(t,"src",n),j(t,"alt",""),j(t,"loading","lazy")},m(r,o){Fn(r,t,o)},p(r,o){o[0]&32768&&!jd(t.src,n=r[63].url)&&j(t,"src",n)},d(r){r&&Rn(t)}}}function Y3(e){let t=e[27](e[63],e[8])+"",n;return{c(){n=oi(t)},m(r,o){Fn(r,n,o)},p(r,o){o[0]&33024&&t!==(t=r[27](r[63],r[8])+"")&&ai(n,t)},d(r){r&&Rn(n)}}}function SA(e,t){let n,r,o,a,s,u,l;function c(xe,Ne){return xe[63].unicode?Y3:Q3}let m=c(t),me=m(t);return{key:e,first:null,c(){n=at("button"),me.c(),j(n,"role",r=t[4]?"option":"menuitem"),j(n,"aria-selected",o=t[4]?t[65]==t[5]:""),j(n,"aria-label",a=t[28](t[63],t[8])),j(n,"title",s=t[63].title),j(n,"class",u="emoji "+(t[4]&&t[65]===t[5]?"active":"")),j(n,"id",l="emo-"+t[63].id),this.first=n},m(xe,Ne){Fn(xe,n,Ne),me.m(n,null)},p(xe,Ne){t=xe,m===(m=c(t))&&me?me.p(t,Ne):(me.d(1),me=m(t),me&&(me.c(),me.m(n,null))),Ne[0]&16&&r!==(r=t[4]?"option":"menuitem")&&j(n,"role",r),Ne[0]&32816&&o!==(o=t[4]?t[65]==t[5]:"")&&j(n,"aria-selected",o),Ne[0]&33024&&a!==(a=t[28](t[63],t[8]))&&j(n,"aria-label",a),Ne[0]&32768&&s!==(s=t[63].title)&&j(n,"title",s),Ne[0]&32816&&u!==(u="emoji "+(t[4]&&t[65]===t[5]?"active":""))&&j(n,"class",u),Ne[0]&32768&&l!==(l="emo-"+t[63].id)&&j(n,"id",l)},d(xe){xe&&Rn(n),me.d()}}}function EA(e,t){let n,r=(t[4]?t[0].searchResultsLabel:t[66].category?t[66].category:t[15].length>1?t[0].categories.custom:t[0].categories[t[13].name])+"",o,a,s,u,l=[],c=new vc,m,me,xe,Ne=t[66].emojis,He=Ye=>Ye[63].id;for(let Ye=0;Ye<Ne.length;Ye+=1){let Je=yA(t,Ne,Ye),vn=He(Je);c.set(vn,l[Ye]=SA(vn,Je))}return{key:e,first:null,c(){n=at("div"),o=oi(r),u=at("div");for(let Ye=0;Ye<l.length;Ye+=1)l[Ye].c();j(n,"id",a="menu-label-"+t[65]),j(n,"class",s="category "+(t[15].length===1&&t[15][0].category===""?"gone":"")),j(n,"aria-hidden","true"),j(u,"class","emoji-menu"),j(u,"role",m=t[4]?"listbox":"menu"),j(u,"aria-labelledby",me="menu-label-"+t[65]),j(u,"id",xe=t[4]?"search-results":""),this.first=n},m(Ye,Je){Fn(Ye,n,Je),ct(n,o),Fn(Ye,u,Je);for(let vn=0;vn<l.length;vn+=1)l[vn].m(u,null)},p(Ye,Je){t=Ye,Je[0]&40977&&r!==(r=(t[4]?t[0].searchResultsLabel:t[66].category?t[66].category:t[15].length>1?t[0].categories.custom:t[0].categories[t[13].name])+"")&&ai(o,r),Je[0]&32768&&a!==(a="menu-label-"+t[65])&&j(n,"id",a),Je[0]&32768&&s!==(s="category "+(t[15].length===1&&t[15][0].category===""?"gone":""))&&j(n,"class",s),Je[0]&402686256&&(Ne=t[66].emojis,l=gc(l,Je,He,1,t,Ne,c,u,mc,SA,null,yA)),Je[0]&16&&m!==(m=t[4]?"listbox":"menu")&&j(u,"role",m),Je[0]&32768&&me!==(me="menu-label-"+t[65])&&j(u,"aria-labelledby",me),Je[0]&16&&xe!==(xe=t[4]?"search-results":"")&&j(u,"id",xe)},d(Ye){Ye&&Rn(n),Ye&&Rn(u);for(let Je=0;Je<l.length;Je+=1)l[Je].d()}}}function J3(e){let t,n;return{c(){t=at("img"),j(t,"class","custom-emoji"),jd(t.src,n=e[63].url)||j(t,"src",n),j(t,"alt",""),j(t,"loading","lazy")},m(r,o){Fn(r,t,o)},p(r,o){o[0]&1024&&!jd(t.src,n=r[63].url)&&j(t,"src",n)},d(r){r&&Rn(t)}}}function X3(e){let t=e[27](e[63],e[8])+"",n;return{c(){n=oi(t)},m(r,o){Fn(r,n,o)},p(r,o){o[0]&1280&&t!==(t=r[27](r[63],r[8])+"")&&ai(n,t)},d(r){r&&Rn(n)}}}function kA(e,t){let n,r,o,a;function s(c,m){return c[63].unicode?X3:J3}let u=s(t),l=u(t);return{key:e,first:null,c(){n=at("button"),l.c(),j(n,"role","menuitem"),j(n,"aria-label",r=t[28](t[63],t[8])),j(n,"title",o=t[63].title),j(n,"class","emoji"),j(n,"id",a="fav-"+t[63].id),this.first=n},m(c,m){Fn(c,n,m),l.m(n,null)},p(c,m){t=c,u===(u=s(t))&&l?l.p(t,m):(l.d(1),l=u(t),l&&(l.c(),l.m(n,null))),m[0]&1280&&r!==(r=t[28](t[63],t[8]))&&j(n,"aria-label",r),m[0]&1024&&o!==(o=t[63].title)&&j(n,"title",o),m[0]&1024&&a!==(a="fav-"+t[63].id)&&j(n,"id",a)},d(c){c&&Rn(n),l.d()}}}function Z3(e){let t,n,r,o,a,s,u,l,c,m=e[0].searchLabel+"",me,xe,Ne=e[0].searchDescription+"",He,Ye,Je,vn,La,sr,Zr,zs=e[0].skinToneDescription+"",za,Hs,lc=[],Ty=new vc,_y,xy,Bb,Dy,Bg,yy=[],wy=new vc,Ay,$b,e0,Hb,Yb,Jb,l2,y2,Rb=[],i2=new vc,s2,E2,L2,T2,A2,k_=[],Vb=new vc,Qb,zb,t2,Zb,h2,g2,Wb=e[9],f2=a2=>a2[72];for(let a2=0;a2<Wb.length;a2+=1){let S2=bA(e,Wb,a2),n2=f2(S2);Ty.set(n2,lc[a2]=wA(n2,S2))}let O2=e[12],C2=a2=>a2[69].id;for(let a2=0;a2<O2.length;a2+=1){let S2=_A(e,O2,a2),n2=C2(S2);wy.set(n2,yy[a2]=xA(n2,S2))}let x2=e[15],N2=a2=>a2[66].category;for(let a2=0;a2<x2.length;a2+=1){let S2=vA(e,x2,a2),n2=N2(S2);i2.set(n2,Rb[a2]=EA(n2,S2))}let U2=e[10],Q2=a2=>a2[63].id;for(let a2=0;a2<U2.length;a2+=1){let S2=gA(e,U2,a2),n2=Q2(S2);Vb.set(n2,k_[a2]=kA(n2,S2))}return{c(){t=at("section"),n=at("div"),r=at("div"),o=at("div"),a=at("input"),c=at("label"),me=oi(m),xe=at("span"),He=oi(Ne),Ye=at("div"),Je=at("button"),vn=oi(e[21]),Zr=at("span"),za=oi(zs),Hs=at("div");for(let a2=0;a2<lc.length;a2+=1)lc[a2].c();Bg=at("div");for(let a2=0;a2<yy.length;a2+=1)yy[a2].c();$b=at("div"),e0=at("div"),Hb=at("div"),Yb=oi(e[18]),l2=at("div"),y2=at("div");for(let a2=0;a2<Rb.length;a2+=1)Rb[a2].c();A2=at("div");for(let a2=0;a2<k_.length;a2+=1)k_[a2].c();t2=at("button"),t2.textContent="\u{1F600}",j(n,"class","pad-top"),j(a,"id","search"),j(a,"class","search"),j(a,"type","search"),j(a,"role","combobox"),j(a,"enterkeyhint","search"),j(a,"placeholder",s=e[0].searchLabel),j(a,"autocapitalize","none"),j(a,"autocomplete","off"),j(a,"spellcheck","true"),j(a,"aria-expanded",u=!!(e[4]&&e[1].length)),j(a,"aria-controls","search-results"),j(a,"aria-owns","search-results"),j(a,"aria-describedby","search-description"),j(a,"aria-autocomplete","list"),j(a,"aria-activedescendant",l=e[26]?`emo-${e[26]}`:""),j(c,"class","sr-only"),j(c,"for","search"),j(xe,"id","search-description"),j(xe,"class","sr-only"),j(o,"class","search-wrapper"),j(Je,"id","skintone-button"),j(Je,"class",La="emoji "+(e[6]?"hide-focus":"")),j(Je,"aria-label",e[23]),j(Je,"title",e[23]),j(Je,"aria-describedby","skintone-description"),j(Je,"aria-haspopup","listbox"),j(Je,"aria-expanded",e[6]),j(Je,"aria-controls","skintone-list"),j(Ye,"class",sr="skintone-button-wrapper "+(e[19]?"expanded":"")),j(Zr,"id","skintone-description"),j(Zr,"class","sr-only"),j(Hs,"id","skintone-list"),j(Hs,"class",_y="skintone-list "+(e[6]?"":"hidden no-animate")),jo(Hs,"transform","translateY("+(e[6]?0:"calc(-1 * var(--num-skintones) * var(--total-emoji-size))")+")"),j(Hs,"role","listbox"),j(Hs,"aria-label",xy=e[0].skinTonesLabel),j(Hs,"aria-activedescendant",Bb="skintone-"+e[20]),j(Hs,"aria-hidden",Dy=!e[6]),j(r,"class","search-row"),j(Bg,"class","nav"),j(Bg,"role","tablist"),jo(Bg,"grid-template-columns","repeat("+e[12].length+", 1fr)"),j(Bg,"aria-label",Ay=e[0].categoriesLabel),j(e0,"class","indicator"),jo(e0,"transform","translateX("+(e[24]?-1:1)*e[11]*100+"%)"),j($b,"class","indicator-wrapper"),j(Hb,"class",Jb="message "+(e[18]?"":"gone")),j(Hb,"role","alert"),j(Hb,"aria-live","polite"),j(l2,"class",s2="tabpanel "+(!e[14]||e[18]?"gone":"")),j(l2,"role",E2=e[4]?"region":"tabpanel"),j(l2,"aria-label",L2=e[4]?e[0].searchResultsLabel:e[0].categories[e[13].name]),j(l2,"id",T2=e[4]?"":`tab-${e[13].id}`),j(l2,"tabindex","0"),j(A2,"class",Qb="favorites emoji-menu "+(e[18]?"gone":"")),j(A2,"role","menu"),j(A2,"aria-label",zb=e[0].favoritesLabel),jo(A2,"padding-inline-end",e[25]+"px"),j(t2,"aria-hidden","true"),j(t2,"tabindex","-1"),j(t2,"class","abs-pos hidden emoji"),j(t,"class","picker"),j(t,"aria-label",Zb=e[0].regionLabel),j(t,"style",e[22])},m(a2,S2){Fn(a2,t,S2),ct(t,n),ct(t,r),ct(r,o),ct(o,a),eA(a,e[2]),ct(o,c),ct(c,me),ct(o,xe),ct(xe,He),ct(r,Ye),ct(Ye,Je),ct(Je,vn),ct(r,Zr),ct(Zr,za),ct(r,Hs);for(let n2=0;n2<lc.length;n2+=1)lc[n2].m(Hs,null);e[48](Hs),ct(t,Bg);for(let n2=0;n2<yy.length;n2+=1)yy[n2].m(Bg,null);ct(t,$b),ct($b,e0),ct(t,Hb),ct(Hb,Yb),ct(t,l2),ct(l2,y2);for(let n2=0;n2<Rb.length;n2+=1)Rb[n2].m(y2,null);e[50](l2),ct(t,A2);for(let n2=0;n2<k_.length;n2+=1)k_[n2].m(A2,null);ct(t,t2),e[51](t2),e[52](t),h2||(g2=[Nn(a,"input",e[47]),Nn(a,"keydown",e[30]),Nn(Je,"click",e[35]),Nn(Hs,"focusout",e[38]),Nn(Hs,"click",e[34]),Nn(Hs,"keydown",e[36]),Nn(Hs,"keyup",e[37]),Nn(Bg,"keydown",e[32]),y3(e[29].call(null,y2)),Nn(l2,"click",e[33]),Nn(A2,"click",e[33])],h2=!0)},p(a2,S2){S2[0]&1&&s!==(s=a2[0].searchLabel)&&j(a,"placeholder",s),S2[0]&18&&u!==(u=!!(a2[4]&&a2[1].length))&&j(a,"aria-expanded",u),S2[0]&67108864&&l!==(l=a2[26]?`emo-${a2[26]}`:"")&&j(a,"aria-activedescendant",l),S2[0]&4&&eA(a,a2[2]),S2[0]&1&&m!==(m=a2[0].searchLabel+"")&&ai(me,m),S2[0]&1&&Ne!==(Ne=a2[0].searchDescription+"")&&ai(He,Ne),S2[0]&2097152&&ai(vn,a2[21]),S2[0]&64&&La!==(La="emoji "+(a2[6]?"hide-focus":""))&&j(Je,"class",La),S2[0]&8388608&&j(Je,"aria-label",a2[23]),S2[0]&8388608&&j(Je,"title",a2[23]),S2[0]&64&&j(Je,"aria-expanded",a2[6]),S2[0]&524288&&sr!==(sr="skintone-button-wrapper "+(a2[19]?"expanded":""))&&j(Ye,"class",sr),S2[0]&1&&zs!==(zs=a2[0].skinToneDescription+"")&&ai(za,zs),S2[0]&1049089&&(Wb=a2[9],lc=gc(lc,S2,f2,1,a2,Wb,Ty,Hs,mc,wA,null,bA)),S2[0]&64&&_y!==(_y="skintone-list "+(a2[6]?"":"hidden no-animate"))&&j(Hs,"class",_y),S2[0]&64&&jo(Hs,"transform","translateY("+(a2[6]?0:"calc(-1 * var(--num-skintones) * var(--total-emoji-size))")+")"),S2[0]&1&&xy!==(xy=a2[0].skinTonesLabel)&&j(Hs,"aria-label",xy),S2[0]&1048576&&Bb!==(Bb="skintone-"+a2[20])&&j(Hs,"aria-activedescendant",Bb),S2[0]&64&&Dy!==(Dy=!a2[6])&&j(Hs,"aria-hidden",Dy),S2[0]&12305|S2[1]&1&&(O2=a2[12],yy=gc(yy,S2,C2,1,a2,O2,wy,Bg,mc,xA,null,_A)),S2[0]&4096&&jo(Bg,"grid-template-columns","repeat("+a2[12].length+", 1fr)"),S2[0]&1&&Ay!==(Ay=a2[0].categoriesLabel)&&j(Bg,"aria-label",Ay),S2[0]&16779264&&jo(e0,"transform","translateX("+(a2[24]?-1:1)*a2[11]*100+"%)"),S2[0]&262144&&ai(Yb,a2[18]),S2[0]&262144&&Jb!==(Jb="message "+(a2[18]?"":"gone"))&&j(Hb,"class",Jb),S2[0]&402694449&&(x2=a2[15],Rb=gc(Rb,S2,N2,1,a2,x2,i2,y2,mc,EA,null,vA)),S2[0]&278528&&s2!==(s2="tabpanel "+(!a2[14]||a2[18]?"gone":""))&&j(l2,"class",s2),S2[0]&16&&E2!==(E2=a2[4]?"region":"tabpanel")&&j(l2,"role",E2),S2[0]&8209&&L2!==(L2=a2[4]?a2[0].searchResultsLabel:a2[0].categories[a2[13].name])&&j(l2,"aria-label",L2),S2[0]&8208&&T2!==(T2=a2[4]?"":`tab-${a2[13].id}`)&&j(l2,"id",T2),S2[0]&402654464&&(U2=a2[10],k_=gc(k_,S2,Q2,1,a2,U2,Vb,A2,mc,kA,null,gA)),S2[0]&262144&&Qb!==(Qb="favorites emoji-menu "+(a2[18]?"gone":""))&&j(A2,"class",Qb),S2[0]&1&&zb!==(zb=a2[0].favoritesLabel)&&j(A2,"aria-label",zb),S2[0]&33554432&&jo(A2,"padding-inline-end",a2[25]+"px"),S2[0]&1&&Zb!==(Zb=a2[0].regionLabel)&&j(t,"aria-label",Zb),S2[0]&4194304&&j(t,"style",a2[22])},i:pc,o:pc,d(a2){a2&&Rn(t);for(let S2=0;S2<lc.length;S2+=1)lc[S2].d();e[48](null);for(let S2=0;S2<yy.length;S2+=1)yy[S2].d();for(let S2=0;S2<Rb.length;S2+=1)Rb[S2].d();e[50](null);for(let S2=0;S2<k_.length;S2+=1)k_[S2].d();e[51](null),e[52](null),h2=!1,dc(g2)}}}function eK(e,t,n){let{skinToneEmoji:r}=t,{i18n:o}=t,{database:a}=t,{customEmoji:s}=t,{customCategorySorting:u}=t,l=!0,c=[],m=[],me="",xe="",Ne,He,Ye,Je=!1,vn=-1,La,sr=!1,Zr=!1,zs,za=0,Hs=0,lc,Ty,_y="",xy=[],Bb=[],Dy,Bg=M3,yy=!1,wy=0,Ay=0,$b=Nd,e0,Hb=!1,Yb,Jb=n2=>{Ne.getRootNode().getElementById(n2).focus()},l2=(n2,F2)=>{Ne.dispatchEvent(new CustomEvent(n2,{detail:F2,bubbles:!0,composed:!0}))},y2=(n2,F2)=>F2&&n2.skins&&n2.skins[F2]||n2.unicode,Rb=(n2,F2)=>G3([n2.name||y2(n2,F2),...n2.shortcodes||[]]).join(", "),i2=n2=>/^skintone-/.test(n2.id);q_.then(n2=>{n2||n(18,La=o.emojiUnsupportedMessage)});function s2(n2){return H3(n2,F2=>{{let M2=getComputedStyle(Ne),v2=parseInt(M2.getPropertyValue("--num-columns"),10),o2=M2.getPropertyValue("direction")==="rtl",b2=n2.parentElement.getBoundingClientRect().width-F2;n(46,Bg=v2),n(25,wy=b2),n(24,yy=o2)}})}function E2(n2){let F2=Ne.getRootNode();K3(n2,He,M2=>F2.getElementById(`emo-${M2.id}`)),n(1,c=c)}function L2(n2){return!n2.unicode||!fA(n2)||V_.get(n2.unicode)}async function T2(n2){let F2=await q_;return n2.filter(({version:M2})=>!M2||M2<=F2)}async function A2(n2){return U3(n2,await q_)}async function k_(n2){if(typeof n2=="undefined")return[];let F2=n2===-1?s:await a.getEmojiByGroup(n2);return A2(await T2(F2))}async function Vb(n2){return A2(await T2(await a.getEmojiBySearchQuery(n2)))}function Qb(n2){if(!Je||!c.length)return;let F2=M2=>{Fo(n2),n(5,vn=z_(M2,vn,c))};switch(n2.key){case"ArrowDown":return F2(!1);case"ArrowUp":return F2(!0);case"Enter":if(vn!==-1)return Fo(n2),Zb(c[vn].id);c.length&&n(5,vn=0)}}function zb(n2){n(2,me=""),n(44,xe=""),n(5,vn=-1),n(11,Ay=$b.findIndex(F2=>F2.id===n2.id))}function t2(n2){let{target:F2,key:M2}=n2,v2=o2=>{o2&&(Fo(n2),o2.focus())};switch(M2){case"ArrowLeft":return v2(F2.previousSibling);case"ArrowRight":return v2(F2.nextSibling);case"Home":return v2(F2.parentElement.firstChild);case"End":return v2(F2.parentElement.lastChild)}}async function Zb(n2){let F2=await a.getEmojiByUnicodeOrName(n2),M2=[...c,...Bb].find(o2=>o2.id===n2),v2=M2.unicode&&y2(M2,za);await a.incrementFavoriteEmojiCount(n2),l2("emoji-click",{emoji:F2,skinTone:za,...v2&&{unicode:v2},...M2.name&&{name:M2.name}})}async function h2(n2){let{target:F2}=n2;if(!F2.classList.contains("emoji"))return;Fo(n2);let M2=F2.id.substring(4);Zb(M2)}async function g2(n2){let{target:F2}=n2;if(!i2(F2))return;Fo(n2);let M2=parseInt(F2.id.slice(9),10);n(8,za=M2),n(6,sr=!1),Jb("skintone-button"),l2("skin-tone-change",{skinTone:M2}),a.setPreferredSkinTone(M2)}async function Wb(n2){n(6,sr=!sr),n(20,Hs=za),sr&&(Fo(n2),Ld(()=>Jb(`skintone-${Hs}`)))}function f2(n2){if(!sr)return;let F2=async M2=>{Fo(n2),n(20,Hs=M2),await _3(),Jb(`skintone-${Hs}`)};switch(n2.key){case"ArrowUp":return F2(z_(!0,Hs,xy));case"ArrowDown":return F2(z_(!1,Hs,xy));case"Home":return F2(0);case"End":return F2(xy.length-1);case"Enter":return g2(n2);case"Escape":return Fo(n2),n(6,sr=!1),Jb("skintone-button")}}function O2(n2){if(sr)switch(n2.key){case" ":return g2(n2)}}async function C2(n2){let{relatedTarget:F2}=n2;(!F2||!i2(F2))&&n(6,sr=!1)}function x2(){me=this.value,n(2,me)}function N2(n2){su[n2?"unshift":"push"](()=>{zs=n2,n(7,zs)})}let U2=n2=>zb(n2);function Q2(n2){su[n2?"unshift":"push"](()=>{Ye=n2,n(3,Ye)})}function a2(n2){su[n2?"unshift":"push"](()=>{He=n2,n(17,He)})}function S2(n2){su[n2?"unshift":"push"](()=>{Ne=n2,n(16,Ne)})}return e.$$set=n2=>{"skinToneEmoji"in n2&&n(40,r=n2.skinToneEmoji),"i18n"in n2&&n(0,o=n2.i18n),"database"in n2&&n(39,a=n2.database),"customEmoji"in n2&&n(41,s=n2.customEmoji),"customCategorySorting"in n2&&n(42,u=n2.customCategorySorting)},e.$$.update=()=>{if(e.$$.dirty[1]&1280&&s&&a&&n(39,a.customEmoji=s,a),e.$$.dirty[0]&1|e.$$.dirty[1]&256){async function n2(){let F2=!1,M2=setTimeout(()=>{F2=!0,n(18,La=o.loadingMessage)},A3);try{await a.ready(),n(14,Hb=!0)}catch(v2){console.error(v2),n(18,La=o.networkErrorMessage)}finally{clearTimeout(M2),F2&&(F2=!1,n(18,La=""))}}a&&n2()}if(e.$$.dirty[0]&4096|e.$$.dirty[1]&1024&&(s&&s.length?n(12,$b=[C3,...Nd]):$b!==Nd&&n(12,$b=Nd)),e.$$.dirty[0]&4&&cA(()=>{n(44,xe=(me||"").trim()),n(5,vn=-1)}),e.$$.dirty[0]&6144&&n(13,e0=$b[Ay]),e.$$.dirty[0]&24576|e.$$.dirty[1]&8192){async function n2(){if(!Hb)n(1,c=[]),n(4,Je=!1);else if(xe.length>=O3){let F2=xe,M2=await Vb(F2);F2===xe&&(n(1,c=M2),n(4,Je=!0))}else if(e0){let F2=e0.id,M2=await k_(F2);F2===e0.id&&(n(1,c=M2),n(4,Je=!1))}}n2()}if(e.$$.dirty[0]&4112&&n(22,Ty=`
  --font-family: ${pA};
  --num-groups: ${$b.length}; 
  --indicator-opacity: ${Je?0:1}; 
  --num-skintones: ${lA};`),e.$$.dirty[0]&16384|e.$$.dirty[1]&256){async function n2(){Hb&&n(8,za=await a.getPreferredSkinTone())}n2()}if(e.$$.dirty[1]&512&&n(9,xy=Array(lA).fill().map((n2,F2)=>z3(r,F2))),e.$$.dirty[0]&768&&n(21,lc=xy[za]),e.$$.dirty[0]&257&&n(23,_y=o.skinToneLabel.replace("{skinTone}",o.skinTones[za])),e.$$.dirty[0]&16384|e.$$.dirty[1]&256){async function n2(){n(45,Dy=(await Promise.all(P3.map(F2=>a.getEmojiByUnicodeOrName(F2)))).filter(Boolean))}Hb&&n2()}if(e.$$.dirty[0]&16384|e.$$.dirty[1]&49408){async function n2(){let F2=await a.getTopFavoriteEmoji(Bg),M2=await A2(hA([...F2,...Dy],v2=>v2.unicode||v2.name).slice(0,Bg));n(10,Bb=M2)}Hb&&Dy&&n2()}if(e.$$.dirty[0]&10){let n2=c.filter(F2=>F2.unicode).filter(F2=>fA(F2)&&!V_.has(F2.unicode));n2.length?Ld(()=>E2(n2)):(n(1,c=c.filter(L2)),Ld(()=>{(Ye||{}).scrollTop=0}))}e.$$.dirty[0]&1026|e.$$.dirty[1]&4096,e.$$.dirty[0]&18|e.$$.dirty[1]&2048&&n(15,m=function(){if(Je)return[{category:"",emojis:c}];let n2=new Map;for(let F2 of c){let M2=F2.category||"",v2=n2.get(M2);v2||(v2=[],n2.set(M2,v2)),v2.push(F2)}return[...n2.entries()].map(([F2,M2])=>({category:F2,emojis:M2})).sort((F2,M2)=>u(F2.category,M2.category))}()),e.$$.dirty[0]&34&&n(26,Yb=vn!==-1&&c[vn].id),e.$$.dirty[0]&192&&(sr?zs.addEventListener("transitionend",()=>{n(19,Zr=!0)},{once:!0}):n(19,Zr=!1))},[o,c,me,Ye,Je,vn,sr,zs,za,xy,Bb,Ay,$b,e0,Hb,m,Ne,He,La,Zr,Hs,lc,Ty,_y,yy,wy,Yb,y2,Rb,s2,Qb,zb,t2,h2,g2,Wb,f2,O2,C2,a,r,s,u,l,xe,Dy,Bg,x2,N2,U2,Q2,a2,S2]}var Pd,tA,hc,su,Rd,rA,nA,N_,$_,B_,w3,x3,sA,uA,Nd,C3,O3,lA,cA,T3,A3,I3,M3,P3,pA,j3,dA,F3,q_,V_,L3,$3,B3,q3,V3,Ld,W3,U_,vc,DA,tK,rK,nK,CA,$d,OA,TA,AA=uu(()=>{v(),R_(),hc=[],su=[],Rd=[],rA=[],nA=Promise.resolve(),N_=!1,$_=!1,B_=new Set,w3=new Set,x3=typeof window!="undefined"?window:typeof globalThis!="undefined"?globalThis:global,sA=class{$destroy(){E3(this,1),this.$destroy=pc}$on(e,t){let n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{let r=n.indexOf(t);r!==-1&&n.splice(r,1)}}$set(e){this.$$set&&!v3(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}},uA=[[-1,"\u2728","custom"],[0,"\u{1F600}","smileys-emotion"],[1,"\u{1F44B}","people-body"],[3,"\u{1F431}","animals-nature"],[4,"\u{1F34E}","food-drink"],[5,"\u{1F3E0}\uFE0F","travel-places"],[6,"\u26BD","activities"],[7,"\u{1F4DD}","objects"],[8,"\u26D4\uFE0F","symbols"],[9,"\u{1F3C1}","flags"]].map(([e,t,n])=>({id:e,emoji:t,name:n})),Nd=uA.slice(1),C3=uA[0],O3=2,lA=6,cA=typeof requestIdleCallback=="function"?requestIdleCallback:setTimeout,T3={"\u{1FAE0}":14,"\u{1F972}":13.1,"\u{1F97B}":12.1,"\u{1F970}":11,"\u{1F929}":5,"\u{1F471}\u200D\u2640\uFE0F":4,"\u{1F923}":3,"\u{1F441}\uFE0F\u200D\u{1F5E8}\uFE0F":2,"\u{1F600}":1,"\u{1F610}\uFE0F":.7,"\u{1F603}":.6},A3=1e3,I3="\u{1F590}\uFE0F",M3=8,P3=["\u{1F60A}","\u{1F612}","\u2665\uFE0F","\u{1F44D}\uFE0F","\u{1F60D}","\u{1F602}","\u{1F62D}","\u263A\uFE0F","\u{1F614}","\u{1F629}","\u{1F60F}","\u{1F495}","\u{1F64C}","\u{1F618}"],pA='"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Twemoji Mozilla","Noto Color Emoji","EmojiOne Color","Android Emoji",sans-serif',j3=(e,t)=>e<t?-1:e>t?1:0,dA=(e,t)=>{let n=document.createElement("canvas");n.width=n.height=1;let r=n.getContext("2d");return r.textBaseline="top",r.font=`100px ${pA}`,r.fillStyle=t,r.scale(.01,.01),r.fillText(e,0,0),r.getImageData(0,0,1,1).data},F3=(e,t)=>{let n=[...e].join(","),r=[...t].join(",");return n===r&&!n.startsWith("0,0,0,")},q_=new Promise(e=>cA(()=>e(N3()))),V_=new Map,L3="\uFE0F",$3="\uD83C",B3="\u200D",q3=127995,V3=57339,Ld=requestAnimationFrame,W3=typeof ResizeObserver=="function",{Map:vc}=x3,DA=class extends sA{constructor(e){super(),D3(this,e,eK,Z3,g3,{skinToneEmoji:40,i18n:0,database:39,customEmoji:41,customCategorySorting:42},null,[-1,-1,-1])}},tK="https://cdn.jsdelivr.net/npm/emoji-picker-element-data@^1/en/emojibase/data.json",rK="en",nK={categoriesLabel:"Categories",emojiUnsupportedMessage:"Your browser does not support color emoji.",favoritesLabel:"Favorites",loadingMessage:"Loading\u2026",networkErrorMessage:"Could not load emoji.",regionLabel:"Emoji picker",searchDescription:"When search results are available, press up or down to select and enter to choose.",searchLabel:"Search",searchResultsLabel:"Search results",skinToneDescription:"When expanded, press up or down to select and enter to choose.",skinToneLabel:"Choose a skin tone (currently {skinTone})",skinTonesLabel:"Skin tones",skinTones:["Default","Light","Medium-Light","Medium","Medium-Dark","Dark"],categories:{custom:"Custom","smileys-emotion":"Smileys and emoticons","people-body":"People and body","animals-nature":"Animals and nature","food-drink":"Food and drink","travel-places":"Travel and places",activities:"Activities",objects:"Objects",symbols:"Symbols",flags:"Flags"}},CA=["customEmoji","customCategorySorting","database","dataSource","i18n","locale","skinToneEmoji"],$d=class extends HTMLElement{constructor(e){super(),this.attachShadow({mode:"open"});let t=document.createElement("style");t.textContent=":host{--emoji-size:1.375rem;--emoji-padding:0.5rem;--category-emoji-size:var(--emoji-size);--category-emoji-padding:var(--emoji-padding);--indicator-height:3px;--input-border-radius:0.5rem;--input-border-size:1px;--input-font-size:1rem;--input-line-height:1.5;--input-padding:0.25rem;--num-columns:8;--outline-size:2px;--border-size:1px;--skintone-border-radius:1rem;--category-font-size:1rem;display:flex;width:min-content;height:400px}:host,:host(.light){--background:#fff;--border-color:#e0e0e0;--indicator-color:#385ac1;--input-border-color:#999;--input-font-color:#111;--input-placeholder-color:#999;--outline-color:#999;--category-font-color:#111;--button-active-background:#e6e6e6;--button-hover-background:#d9d9d9}:host(.dark){--background:#222;--border-color:#444;--indicator-color:#5373ec;--input-border-color:#ccc;--input-font-color:#efefef;--input-placeholder-color:#ccc;--outline-color:#fff;--category-font-color:#efefef;--button-active-background:#555555;--button-hover-background:#484848}@media (prefers-color-scheme:dark){:host{--background:#222;--border-color:#444;--indicator-color:#5373ec;--input-border-color:#ccc;--input-font-color:#efefef;--input-placeholder-color:#ccc;--outline-color:#fff;--category-font-color:#efefef;--button-active-background:#555555;--button-hover-background:#484848}}:host([hidden]){display:none}button{margin:0;padding:0;border:0;background:0 0;box-shadow:none;-webkit-tap-highlight-color:transparent}button::-moz-focus-inner{border:0}input{padding:0;margin:0;line-height:1.15;font-family:inherit}input[type=search]{-webkit-appearance:none}:focus{outline:var(--outline-color) solid var(--outline-size);outline-offset:calc(-1*var(--outline-size))}:host([data-js-focus-visible]) :focus:not([data-focus-visible-added]){outline:0}:focus:not(:focus-visible){outline:0}.hide-focus{outline:0}*{box-sizing:border-box}.picker{contain:content;display:flex;flex-direction:column;background:var(--background);border:var(--border-size) solid var(--border-color);width:100%;height:100%;overflow:hidden;--total-emoji-size:calc(var(--emoji-size) + (2 * var(--emoji-padding)));--total-category-emoji-size:calc(var(--category-emoji-size) + (2 * var(--category-emoji-padding)))}.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);border:0}.hidden{opacity:0;pointer-events:none}.abs-pos{position:absolute;left:0;top:0}.gone{display:none!important}.skintone-button-wrapper,.skintone-list{background:var(--background);z-index:3}.skintone-button-wrapper.expanded{z-index:1}.skintone-list{position:absolute;inset-inline-end:0;top:0;z-index:2;overflow:visible;border-bottom:var(--border-size) solid var(--border-color);border-radius:0 0 var(--skintone-border-radius) var(--skintone-border-radius);will-change:transform;transition:transform .2s ease-in-out;transform-origin:center 0}@media (prefers-reduced-motion:reduce){.skintone-list{transition-duration:.001s}}@supports not (inset-inline-end:0){.skintone-list{right:0}}.skintone-list.no-animate{transition:none}.tabpanel{overflow-y:auto;-webkit-overflow-scrolling:touch;will-change:transform;min-height:0;flex:1;contain:content}.emoji-menu{display:grid;grid-template-columns:repeat(var(--num-columns),var(--total-emoji-size));justify-content:space-around;align-items:flex-start;width:100%}.category{padding:var(--emoji-padding);font-size:var(--category-font-size);color:var(--category-font-color)}.custom-emoji,.emoji,button.emoji{height:var(--total-emoji-size);width:var(--total-emoji-size)}.emoji,button.emoji{font-size:var(--emoji-size);display:flex;align-items:center;justify-content:center;border-radius:100%;line-height:1;overflow:hidden;font-family:var(--font-family);cursor:pointer}@media (hover:hover)and (pointer:fine){.emoji:hover,button.emoji:hover{background:var(--button-hover-background)}}.emoji.active,.emoji:active,button.emoji.active,button.emoji:active{background:var(--button-active-background)}.custom-emoji{padding:var(--emoji-padding);object-fit:contain;pointer-events:none;background-repeat:no-repeat;background-position:center center;background-size:var(--emoji-size) var(--emoji-size)}.nav,.nav-button{align-items:center}.nav{display:grid;justify-content:space-between;contain:content}.nav-button{display:flex;justify-content:center}.nav-emoji{font-size:var(--category-emoji-size);width:var(--total-category-emoji-size);height:var(--total-category-emoji-size)}.indicator-wrapper{display:flex;border-bottom:1px solid var(--border-color)}.indicator{width:calc(100%/var(--num-groups));height:var(--indicator-height);opacity:var(--indicator-opacity);background-color:var(--indicator-color);will-change:transform,opacity;transition:opacity .1s linear,transform .25s ease-in-out}@media (prefers-reduced-motion:reduce){.indicator{will-change:opacity;transition:opacity .1s linear}}.pad-top,input.search{background:var(--background);width:100%}.pad-top{height:var(--emoji-padding);z-index:3}.search-row{display:flex;align-items:center;position:relative;padding-inline-start:var(--emoji-padding);padding-bottom:var(--emoji-padding)}.search-wrapper{flex:1;min-width:0}input.search{padding:var(--input-padding);border-radius:var(--input-border-radius);border:var(--input-border-size) solid var(--input-border-color);color:var(--input-font-color);font-size:var(--input-font-size);line-height:var(--input-line-height)}input.search::placeholder{color:var(--input-placeholder-color)}.favorites{display:flex;flex-direction:row;border-top:var(--border-size) solid var(--border-color);contain:content}.message{padding:var(--emoji-padding)}",this.shadowRoot.appendChild(t),this._ctx={locale:rK,dataSource:tK,skinToneEmoji:I3,customCategorySorting:j3,customEmoji:null,i18n:nK,...e};for(let n of CA)n!=="database"&&Object.prototype.hasOwnProperty.call(this,n)&&(this._ctx[n]=this[n],delete this[n]);this._dbFlush()}connectedCallback(){this._cmp=new DA({target:this.shadowRoot,props:this._ctx})}disconnectedCallback(){this._cmp.$destroy(),this._cmp=void 0;let{database:e}=this._ctx;e&&e.close().catch(t=>console.error(t))}static get observedAttributes(){return["locale","data-source","skin-tone-emoji"]}attributeChangedCallback(e,t,n){this._set(e.replace(/-([a-z])/g,(r,o)=>o.toUpperCase()),n)}_set(e,t){this._ctx[e]=t,this._cmp&&this._cmp.$set({[e]:t}),["locale","dataSource"].includes(e)&&this._dbFlush()}_dbCreate(){let{locale:e,dataSource:t,database:n}=this._ctx;(!n||n.locale!==e||n.dataSource!==t)&&this._set("database",new Md({locale:e,dataSource:t}))}_dbFlush(){Promise.resolve().then(()=>this._dbCreate())}},OA={};for(let e of CA)OA[e]={get(){return e==="database"&&this._dbCreate(),this._ctx[e]},set(t){if(e==="database")throw new Error("database is read-only");this._set(e,t)}};Object.defineProperties($d.prototype,OA),customElements.define("emoji-picker",$d),TA=$d}),IA={};$A(IA,{Database:()=>Md,Picker:()=>TA});var MA=uu(()=>{v(),AA(),R_()});v();v();fi();function lb(e,t,n){function r(){let o=Reflect.construct(HTMLElement,[],r);return o._vdomComponent=e,o._root=n&&n.shadow?o.attachShadow({mode:"open"}):o,o}return r.prototype=Object.create(HTMLElement.prototype),r.prototype.constructor=r,r.prototype.connectedCallback=KA,r.prototype.attributeChangedCallback=GA,r.prototype.disconnectedCallback=QA,t=t||e.observedAttributes||Object.keys(e.propTypes||{}),r.observedAttributes=t,t.forEach(o=>{Object.defineProperty(r.prototype,o,{get(){return this._vdom.props[o]},set(a){this._vdom?this.attributeChangedCallback(o,null,a):(this._props||(this._props={}),this._props[o]=a,this.connectedCallback());let s=typeof a;(a==null||s==="string"||s==="boolean"||s==="number")&&this.setAttribute(o,a)}})}),r}function Ec(e,t,n,r){let o=lb(e,n,r);return customElements.define(t||e.tagName||e.displayName||e.name,o)}Ec.toCustomElement=lb;function HA(e){this.getChildContext=()=>e.context;let{context:t,children:n,...r}=e;return hu(n,r)}function KA(){let e=new CustomEvent("_preact",{detail:{},bubbles:!0,cancelable:!0});this.dispatchEvent(e);let t=e.detail.context;this._vdom=h(HA,{...this._props,context:t},pb(this,this._vdomComponent)),(this.hasAttribute("hydrate")?du:$n)(this._vdom,this._root)}function cb(e){return e.replace(/-(\w)/g,(t,n)=>n?n.toUpperCase():"")}function GA(e,t,n){if(!this._vdom)return;n=n!=null?n:void 0;let r={};r[e]=n,r[cb(e)]=n,this._vdom=hu(this._vdom,r),$n(this._vdom,this._root)}function QA(){$n(this._vdom=null,this._root)}function fb(e,t){return h("slot",{...e,ref:n=>{n?(this.ref=n,this._listener||(this._listener=r=>{r.stopPropagation(),r.detail.context=t},n.addEventListener("_preact",this._listener))):this.ref.removeEventListener("_preact",this._listener)}})}function pb(e,t){if(e.nodeType===3)return e.data;if(e.nodeType!==1)return null;let n=[],r={},o=0,a=e.attributes,s=e.childNodes;for(o=a.length;o--;)a[o].name!=="slot"&&(r[a[o].name]=a[o].value,r[cb(a[o].name)]=a[o].value);for(o=s.length;o--;){let l=pb(s[o],null),c=s[o].slot;c?r[c]=h(fb,{name:c},l):n[o]=l}let u=t?h(fb,null,n):n;return h(t||e.nodeName.toLowerCase(),r,u)}v();v();v();v();v();v();fi();var qa,Mr,db,Va=0,Ud=[],hb=se.__b,mb=se.__r,gb=se.diffed,vb=se.__c,yb=se.unmount;function mu(e,t){se.__h&&se.__h(Mr,e,Va||t),Va=0;var n=Mr.__H||(Mr.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function Le(e){return Va=1,Wd(wb,e)}function Wd(e,t,n){var r=mu(qa++,2);return r.t=e,r.__c||(r.__=[n?n(t):wb(void 0,t),function(o){var a=r.t(r.__[0],o);r.__[0]!==a&&(r.__=[a,r.__[1]],r.__c.setState({}))}],r.__c=Mr),r.__}function we(e,t){var n=mu(qa++,3);!se.__s&&Kd(n.__H,t)&&(n.__=e,n.__H=t,Mr.__H.__h.push(n))}function No(e,t){var n=mu(qa++,4);!se.__s&&Kd(n.__H,t)&&(n.__=e,n.__H=t,Mr.__h.push(n))}function pt(e){return Va=5,Lo(function(){return{current:e}},[])}function kc(e,t,n){Va=6,No(function(){typeof e=="function"?e(t()):e&&(e.current=t())},n==null?n:n.concat(e))}function Lo(e,t){var n=mu(qa++,7);return Kd(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function Ki(e,t){return Va=8,Lo(function(){return e},t)}function st(e){var t=Mr.context[e.__c],n=mu(qa++,9);return n.c=e,t?(n.__==null&&(n.__=!0,t.sub(Mr)),t.props.value):e.__}function _b(e,t){se.useDebugValue&&se.useDebugValue(t?t(e):e)}function YA(){var e;for(Ud.sort(function(t,n){return t.__v.__b-n.__v.__b});e=Ud.pop();)if(e.__P)try{e.__H.__h.forEach(Dc),e.__H.__h.forEach(Hd),e.__H.__h=[]}catch(t){e.__H.__h=[],se.__e(t,e.__v)}}se.__b=function(e){Mr=null,hb&&hb(e)},se.__r=function(e){mb&&mb(e),qa=0;var t=(Mr=e.__c).__H;t&&(t.__h.forEach(Dc),t.__h.forEach(Hd),t.__h=[])},se.diffed=function(e){gb&&gb(e);var t=e.__c;t&&t.__H&&t.__H.__h.length&&(Ud.push(t)!==1&&db===se.requestAnimationFrame||((db=se.requestAnimationFrame)||function(n){var r,o=function(){clearTimeout(a),bb&&cancelAnimationFrame(r),setTimeout(n)},a=setTimeout(o,100);bb&&(r=requestAnimationFrame(o))})(YA)),Mr=null},se.__c=function(e,t){t.some(function(n){try{n.__h.forEach(Dc),n.__h=n.__h.filter(function(r){return!r.__||Hd(r)})}catch(r){t.some(function(o){o.__h&&(o.__h=[])}),t=[],se.__e(r,n.__v)}}),vb&&vb(e,t)},se.unmount=function(e){yb&&yb(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(r){try{Dc(r)}catch(o){t=o}}),t&&se.__e(t,n.__v))};var bb=typeof requestAnimationFrame=="function";function Dc(e){var t=Mr,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),Mr=t}function Hd(e){var t=Mr;e.__c=e.__(),Mr=t}function Kd(e,t){return!e||e.length!==t.length||t.some(function(n,r){return n!==e[r]})}function wb(e,t){return typeof t=="function"?t(e):t}fi();fi();function xb(e,t){for(var n in t)e[n]=t[n];return e}function Gd(e,t){for(var n in e)if(n!=="__source"&&!(n in t))return!0;for(var r in t)if(r!=="__source"&&e[r]!==t[r])return!0;return!1}function Qd(e){this.props=e}function en(e,t){function n(o){var a=this.props.ref,s=a==o.ref;return!s&&a&&(a.call?a(null):a.current=null),t?!t(this.props,o)||!s:Gd(this.props,o)}function r(o){return this.shouldComponentUpdate=n,h(e,o)}return r.displayName="Memo("+(e.displayName||e.name)+")",r.prototype.isReactComponent=!0,r.__f=!0,r}(Qd.prototype=new br).isPureReactComponent=!0,Qd.prototype.shouldComponentUpdate=function(e,t){return Gd(this.props,e)||Gd(this.state,t)};var Sb=se.__b;se.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),Sb&&Sb(e)};var JA=typeof Symbol!="undefined"&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function Yd(e){function t(n,r){var o=xb({},n);return delete o.ref,e(o,(r=n.ref||r)&&(typeof r!="object"||"current"in r)?r:null)}return t.$$typeof=JA,t.render=t,t.prototype.isReactComponent=t.__f=!0,t.displayName="ForwardRef("+(e.displayName||e.name)+")",t}var Eb=function(e,t){return e==null?null:Ln(Ln(e).map(t))},XA={map:Eb,forEach:Eb,count:function(e){return e?Ln(e).length:0},only:function(e){var t=Ln(e);if(t.length!==1)throw"Children.only";return t[0]},toArray:Ln},ZA=se.__e;se.__e=function(e,t,n){if(e.then){for(var r,o=t;o=o.__;)if((r=o.__c)&&r.__c)return t.__e==null&&(t.__e=n.__e,t.__k=n.__k),r.__c(e,t)}ZA(e,t,n)};var kb=se.unmount;function Cc(){this.__u=0,this.t=null,this.__b=null}function Db(e){var t=e.__.__c;return t&&t.__e&&t.__e(e)}function eI(e){var t,n,r;function o(a){if(t||(t=e()).then(function(s){n=s.default||s},function(s){r=s}),r)throw r;if(!n)throw t;return h(n,a)}return o.displayName="Lazy",o.__f=!0,o}function gu(){this.u=null,this.o=null}se.unmount=function(e){var t=e.__c;t&&t.__R&&t.__R(),t&&e.__h===!0&&(e.type=null),kb&&kb(e)},(Cc.prototype=new br).__c=function(e,t){var n=t.__c,r=this;r.t==null&&(r.t=[]),r.t.push(n);var o=Db(r.__v),a=!1,s=function(){a||(a=!0,n.__R=null,o?o(u):u())};n.__R=s;var u=function(){if(!--r.__u){if(r.state.__e){var c=r.state.__e;r.__v.__k[0]=function me(xe,Ne,He){return xe&&(xe.__v=null,xe.__k=xe.__k&&xe.__k.map(function(Ye){return me(Ye,Ne,He)}),xe.__c&&xe.__c.__P===Ne&&(xe.__e&&He.insertBefore(xe.__e,xe.__d),xe.__c.__e=!0,xe.__c.__P=He)),xe}(c,c.__c.__P,c.__c.__O)}var m;for(r.setState({__e:r.__b=null});m=r.t.pop();)m.forceUpdate()}},l=t.__h===!0;r.__u++||l||r.setState({__e:r.__b=r.__v.__k[0]}),e.then(s,s)},Cc.prototype.componentWillUnmount=function(){this.t=[]},Cc.prototype.render=function(e,t){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),r=this.__v.__k[0].__c;this.__v.__k[0]=function a(s,u,l){return s&&(s.__c&&s.__c.__H&&(s.__c.__H.__.forEach(function(c){typeof c.__c=="function"&&c.__c()}),s.__c.__H=null),(s=xb({},s)).__c!=null&&(s.__c.__P===l&&(s.__c.__P=u),s.__c=null),s.__k=s.__k&&s.__k.map(function(c){return a(c,u,l)})),s}(this.__b,n,r.__O=r.__P)}this.__b=null}var o=t.__e&&h(Fragment,null,e.fallback);return o&&(o.__h=null),[h(Fragment,null,t.__e?null:e.children),o]};var Cb=function(e,t,n){if(++n[1]===n[0]&&e.o.delete(t),e.props.revealOrder&&(e.props.revealOrder[0]!=="t"||!e.o.size))for(n=e.u;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;e.u=n=n[2]}};function tI(e){return this.getChildContext=function(){return e.context},e.children}function rI(e){var t=this,n=e.i;t.componentWillUnmount=function(){$n(null,t.l),t.l=null,t.i=null},t.i&&t.i!==n&&t.componentWillUnmount(),e.__v?(t.l||(t.i=n,t.l={nodeType:1,parentNode:n,childNodes:[],appendChild:function(r){this.childNodes.push(r),t.i.appendChild(r)},insertBefore:function(r,o){this.childNodes.push(r),t.i.appendChild(r)},removeChild:function(r){this.childNodes.splice(this.childNodes.indexOf(r)>>>1,1),t.i.removeChild(r)}}),$n(h(tI,{context:t.context},e.__v),t.l)):t.l&&t.componentWillUnmount()}function nI(e,t){return h(rI,{__v:e,i:t})}(gu.prototype=new br).__e=function(e){var t=this,n=Db(t.__v),r=t.o.get(e);return r[0]++,function(o){var a=function(){t.props.revealOrder?(r.push(o),Cb(t,e,r)):o()};n?n(a):a()}},gu.prototype.render=function(e){this.u=null,this.o=new Map;var t=Ln(e.children);e.revealOrder&&e.revealOrder[0]==="b"&&t.reverse();for(var n=t.length;n--;)this.o.set(t[n],this.u=[1,0,this.u]);return e.children},gu.prototype.componentDidUpdate=gu.prototype.componentDidMount=function(){var e=this;this.o.forEach(function(t,n){Cb(e,n,t)})};var Ob=typeof Symbol!="undefined"&&Symbol.for&&Symbol.for("react.element")||60103,iI=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,oI=typeof document!="undefined",aI=function(e){return(typeof Symbol!="undefined"&&typeof Symbol()=="symbol"?/fil|che|rad/i:/fil|che|ra/i).test(e)};function sI(e,t,n){return t.__k==null&&(t.textContent=""),$n(e,t),typeof n=="function"&&n(),e?e.__c:null}function uI(e,t,n){return du(e,t),typeof n=="function"&&n(),e?e.__c:null}br.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(e){Object.defineProperty(br.prototype,e,{configurable:!0,get:function(){return this["UNSAFE_"+e]},set:function(t){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:t})}})});var Tb=se.event;function lI(){}function cI(){return this.cancelBubble}function fI(){return this.defaultPrevented}se.event=function(e){return Tb&&(e=Tb(e)),e.persist=lI,e.isPropagationStopped=cI,e.isDefaultPrevented=fI,e.nativeEvent=e};var Ab,Ib={configurable:!0,get:function(){return this.class}},Mb=se.vnode;se.vnode=function(e){var t=e.type,n=e.props,r=n;if(typeof t=="string"){var o=t.indexOf("-")===-1;for(var a in r={},n){var s=n[a];oI&&a==="children"&&t==="noscript"||a==="value"&&"defaultValue"in n&&s==null||(a==="defaultValue"&&"value"in n&&n.value==null?a="value":a==="download"&&s===!0?s="":/ondoubleclick/i.test(a)?a="ondblclick":/^onchange(textarea|input)/i.test(a+t)&&!aI(n.type)?a="oninput":/^onfocus$/i.test(a)?a="onfocusin":/^onblur$/i.test(a)?a="onfocusout":/^on(Ani|Tra|Tou|BeforeInp)/.test(a)?a=a.toLowerCase():o&&iI.test(a)?a=a.replace(/[A-Z0-9]/,"-$&").toLowerCase():s===null&&(s=void 0),r[a]=s)}t=="select"&&r.multiple&&Array.isArray(r.value)&&(r.value=Ln(n.children).forEach(function(u){u.props.selected=r.value.indexOf(u.props.value)!=-1})),t=="select"&&r.defaultValue!=null&&(r.value=Ln(n.children).forEach(function(u){u.props.selected=r.multiple?r.defaultValue.indexOf(u.props.value)!=-1:r.defaultValue==u.props.value})),e.props=r,n.class!=n.className&&(Ib.enumerable="className"in n,n.className!=null&&(r.class=n.className),Object.defineProperty(r,"className",Ib))}e.$$typeof=Ob,Mb&&Mb(e)};var Pb=se.__r;se.__r=function(e){Pb&&Pb(e),Ab=e.__c};var pI={ReactCurrentDispatcher:{current:{readContext:function(e){return Ab.__n[e.__c].props.value}}}};function dI(e){return h.bind(null,e)}function jb(e){return!!e&&e.$$typeof===Ob}function hI(e){return jb(e)?hu.apply(null,arguments):e}function mI(e){return!!e.__k&&($n(null,e),!0)}function gI(e){return e&&(e.base||e.nodeType===1&&e)||null}var vI=function(e,t){return e(t)},Jd=function(e,t){return e(t)},Nt={useState:Le,useReducer:Wd,useEffect:we,useLayoutEffect:No,useRef:pt,useImperativeHandle:kc,useMemo:Lo,useCallback:Ki,useContext:st,useDebugValue:_b,version:"17.0.2",Children:XA,render:sI,hydrate:uI,unmountComponentAtNode:mI,createPortal:nI,createElement:h,createContext:ur,createFactory:dI,cloneElement:hI,createRef:pu,Fragment,isValidElement:jb,findDOMNode:gI,Component:br,PureComponent:Qd,memo:en,forwardRef:Yd,flushSync:Jd,unstable_batchedUpdates:vI,StrictMode:Fragment,Suspense:Cc,SuspenseList:gu,lazy:eI,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:pI};v();var ff=li($o());v();var Hw=li($o());v();v();v();v();var r0=li(t0()),{__extends:Vt,__assign:P,__rest:Bn,__decorate:XK,__param:ZK,__metadata:e4,__awaiter:pi,__generator:di,__exportStar:t4,__createBinding:r4,__values:n4,__read:i4,__spread:o4,__spreadArrays:a4,__spreadArray:Gi,__await:s4,__asyncGenerator:u4,__asyncDelegator:l4,__asyncValues:c4,__makeTemplateObject:f4,__importStar:p4,__importDefault:d4,__classPrivateFieldGet:h4,__classPrivateFieldSet:m4}=r0.default,Zd="Invariant Violation",n0=Object.setPrototypeOf,yI=n0===void 0?function(e,t){return e.__proto__=t,e}:n0,Ee=function(e){Vt(t,e);function t(n){n===void 0&&(n=Zd);var r=e.call(this,typeof n=="number"?Zd+": "+n+" (see https://github.com/apollographql/invariant-packages)":n)||this;return r.framesToPop=1,r.name=Zd,yI(r,t.prototype),r}return t}(Error);function W(e,t){if(!e)throw new Ee(t)}var Ic=["debug","log","warn","error","silent"],eh=Ic.indexOf("log");function Mc(e){return function(){if(Ic.indexOf(e)>=eh){var t=console[e]||console.log;return t.apply(console,arguments)}}}(function(e){e.debug=Mc("debug"),e.log=Mc("log"),e.warn=Mc("warn"),e.error=Mc("error")})(W||(W={}));function i0(e){var t=Ic[eh];return eh=Math.max(0,Ic.indexOf(e)),t}v();v();v();function tr(e){try{return e()}catch{}}var Pc=tr(function(){return globalThis})||tr(function(){return window})||tr(function(){return self})||tr(function(){return global})||tr(function(){return tr.constructor("return this")()}),o0="__",a0=[o0,o0].join("DEV");function _I(){try{return Boolean(__DEV__)}catch{return Object.defineProperty(Pc,a0,{value:tr(function(){return"production"})!=="production",enumerable:!1,configurable:!0,writable:!0}),Pc[a0]}}var Bo=_I();v();v();function Qi(e){try{return e()}catch{}}var th=Qi(function(){return globalThis})||Qi(function(){return window})||Qi(function(){return self})||Qi(function(){return global})||Qi(function(){return Qi.constructor("return this")()}),rh=!1;function bI(){th&&!Qi(function(){return"production"})&&!Qi(function(){return process})&&(Object.defineProperty(th,"process",{value:{env:{NODE_ENV:"production"}},configurable:!0,enumerable:!1,writable:!0}),rh=!0)}bI();function nh(){rh&&(delete th.process,rh=!1)}v();v();var s0=typeof Symbol=="function"&&Symbol.toStringTag!=null?Symbol.toStringTag:"@@toStringTag";v();v();v();function ih(e,t){var n=Boolean(e);if(!n)throw new Error(t!=null?t:"Unexpected invariant triggered.")}v();var wI=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):void 0,vu=wI;function jc(e){var t=e.prototype.toJSON;typeof t=="function"||ih(0),e.prototype.inspect=t,vu&&(e.prototype[vu]=t)}var u0=function(){function e(n,r,o){this.start=n.start,this.end=r.end,this.startToken=n,this.endToken=r,this.source=o}var t=e.prototype;return t.toJSON=function(){return{start:this.start,end:this.end}},e}();jc(u0);var l0=function(){function e(n,r,o,a,s,u,l){this.kind=n,this.start=r,this.end=o,this.line=a,this.column=s,this.value=l,this.prev=u,this.next=null}var t=e.prototype;return t.toJSON=function(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}},e}();jc(l0);function oh(e){return e!=null&&typeof e.kind=="string"}v();v();function Fc(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Fc=function(t){return typeof t}:Fc=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fc(e)}var xI=10,c0=2;function yu(e){return Rc(e,[])}function Rc(e,t){switch(Fc(e)){case"string":return JSON.stringify(e);case"function":return e.name?"[function ".concat(e.name,"]"):"[function]";case"object":return e===null?"null":SI(e,t);default:return String(e)}}function SI(e,t){if(t.indexOf(e)!==-1)return"[Circular]";var n=[].concat(t,[e]),r=DI(e);if(r!==void 0){var o=r.call(e);if(o!==e)return typeof o=="string"?o:Rc(o,n)}else if(Array.isArray(e))return kI(e,n);return EI(e,n)}function EI(e,t){var n=Object.keys(e);if(n.length===0)return"{}";if(t.length>c0)return"["+CI(e)+"]";var r=n.map(function(o){var a=Rc(e[o],t);return o+": "+a});return"{ "+r.join(", ")+" }"}function kI(e,t){if(e.length===0)return"[]";if(t.length>c0)return"[Array]";for(var n=Math.min(xI,e.length),r=e.length-n,o=[],a=0;a<n;++a)o.push(Rc(e[a],t));return r===1?o.push("... 1 more item"):r>1&&o.push("... ".concat(r," more items")),"["+o.join(", ")+"]"}function DI(e){var t=e[String(vu)];if(typeof t=="function")return t;if(typeof e.inspect=="function")return e.inspect}function CI(e){var t=Object.prototype.toString.call(e).replace(/^\[object /,"").replace(/]$/,"");if(t==="Object"&&typeof e.constructor=="function"){var n=e.constructor.name;if(typeof n=="string"&&n!=="")return n}return t}v();function _u(e,t){var n=Boolean(e);if(!n)throw new Error(t)}function f0(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function OI(e,t,n){return t&&f0(e.prototype,t),n&&f0(e,n),e}var Nc=function(){function e(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"GraphQL request",r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{line:1,column:1};typeof t=="string"||_u(0,"Body must be a string. Received: ".concat(yu(t),".")),this.body=t,this.name=n,this.locationOffset=r,this.locationOffset.line>0||_u(0,"line in locationOffset is 1-indexed and must be positive."),this.locationOffset.column>0||_u(0,"column in locationOffset is 1-indexed and must be positive.")}return OI(e,[{key:s0,get:function(){return"Source"}}]),e}();v();function p0(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=e.indexOf(`
`)===-1,o=e[0]===" "||e[0]==="	",a=e[e.length-1]==='"',s=e[e.length-1]==="\\",u=!r||a||s||n,l="";return u&&!(r&&o)&&(l+=`
`+t),l+=t?e.replace(/\n/g,`
`+t):e,u&&(l+=`
`),'"""'+l.replace(/"""/g,'\\"""')+'"""'}v();var TI={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},bu=Object.freeze({});function lr(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:TI,r=void 0,o=Array.isArray(e),a=[e],s=-1,u=[],l=void 0,c=void 0,m=void 0,me=[],xe=[],Ne=e;do{s++;var He=s===a.length,Ye=He&&u.length!==0;if(He){if(c=xe.length===0?void 0:me[me.length-1],l=m,m=xe.pop(),Ye){if(o)l=l.slice();else{for(var Je={},vn=0,La=Object.keys(l);vn<La.length;vn++){var sr=La[vn];Je[sr]=l[sr]}l=Je}for(var Zr=0,zs=0;zs<u.length;zs++){var za=u[zs][0],Hs=u[zs][1];o&&(za-=Zr),o&&Hs===null?(l.splice(za,1),Zr++):l[za]=Hs}}s=r.index,a=r.keys,u=r.edits,o=r.inArray,r=r.prev}else{if(c=m?o?s:a[s]:void 0,l=m?m[c]:Ne,l==null)continue;m&&me.push(c)}var lc=void 0;if(!Array.isArray(l)){if(!oh(l))throw new Error("Invalid AST Node: ".concat(yu(l),"."));var Ty=ah(t,l.kind,He);if(Ty){if(lc=Ty.call(t,l,c,m,me,xe),lc===bu)break;if(lc===!1){if(!He){me.pop();continue}}else if(lc!==void 0&&(u.push([c,lc]),!He))if(oh(lc))l=lc;else{me.pop();continue}}}if(lc===void 0&&Ye&&u.push([c,l]),He)me.pop();else{var _y;r={inArray:o,index:s,keys:a,edits:u,prev:r},o=Array.isArray(l),a=o?l:(_y=n[l.kind])!==null&&_y!==void 0?_y:[],s=-1,u=[],m&&xe.push(m),m=l}}while(r!==void 0);return u.length!==0&&(Ne=u[u.length-1][1]),Ne}function ah(e,t,n){var r=e[t];if(r){if(!n&&typeof r=="function")return r;var o=n?r.leave:r.enter;if(typeof o=="function")return o}else{var a=n?e.leave:e.enter;if(a){if(typeof a=="function")return a;var s=a[t];if(typeof s=="function")return s}}}v();function Ua(e){return lr(e,{leave:II})}var AI=80,II={Name:function(e){return e.value},Variable:function(e){return"$"+e.name},Document:function(e){return re(e.definitions,`

`)+`
`},OperationDefinition:function(e){var t=e.operation,n=e.name,r=At("(",re(e.variableDefinitions,", "),")"),o=re(e.directives," "),a=e.selectionSet;return!n&&!o&&!r&&t==="query"?a:re([t,re([n,r]),o,a]," ")},VariableDefinition:function(e){var t=e.variable,n=e.type,r=e.defaultValue,o=e.directives;return t+": "+n+At(" = ",r)+At(" ",re(o," "))},SelectionSet:function(e){var t=e.selections;return _n(t)},Field:function(e){var t=e.alias,n=e.name,r=e.arguments,o=e.directives,a=e.selectionSet,s=At("",t,": ")+n,u=s+At("(",re(r,", "),")");return u.length>AI&&(u=s+At(`(
`,Lc(re(r,`
`)),`
)`)),re([u,re(o," "),a]," ")},Argument:function(e){var t=e.name,n=e.value;return t+": "+n},FragmentSpread:function(e){var t=e.name,n=e.directives;return"..."+t+At(" ",re(n," "))},InlineFragment:function(e){var t=e.typeCondition,n=e.directives,r=e.selectionSet;return re(["...",At("on ",t),re(n," "),r]," ")},FragmentDefinition:function(e){var t=e.name,n=e.typeCondition,r=e.variableDefinitions,o=e.directives,a=e.selectionSet;return"fragment ".concat(t).concat(At("(",re(r,", "),")")," ")+"on ".concat(n," ").concat(At("",re(o," ")," "))+a},IntValue:function(e){var t=e.value;return t},FloatValue:function(e){var t=e.value;return t},StringValue:function(e,t){var n=e.value,r=e.block;return r?p0(n,t==="description"?"":"  "):JSON.stringify(n)},BooleanValue:function(e){var t=e.value;return t?"true":"false"},NullValue:function(){return"null"},EnumValue:function(e){var t=e.value;return t},ListValue:function(e){var t=e.values;return"["+re(t,", ")+"]"},ObjectValue:function(e){var t=e.fields;return"{"+re(t,", ")+"}"},ObjectField:function(e){var t=e.name,n=e.value;return t+": "+n},Directive:function(e){var t=e.name,n=e.arguments;return"@"+t+At("(",re(n,", "),")")},NamedType:function(e){var t=e.name;return t},ListType:function(e){var t=e.type;return"["+t+"]"},NonNullType:function(e){var t=e.type;return t+"!"},SchemaDefinition:yn(function(e){var t=e.directives,n=e.operationTypes;return re(["schema",re(t," "),_n(n)]," ")}),OperationTypeDefinition:function(e){var t=e.operation,n=e.type;return t+": "+n},ScalarTypeDefinition:yn(function(e){var t=e.name,n=e.directives;return re(["scalar",t,re(n," ")]," ")}),ObjectTypeDefinition:yn(function(e){var t=e.name,n=e.interfaces,r=e.directives,o=e.fields;return re(["type",t,At("implements ",re(n," & ")),re(r," "),_n(o)]," ")}),FieldDefinition:yn(function(e){var t=e.name,n=e.arguments,r=e.type,o=e.directives;return t+(d0(n)?At(`(
`,Lc(re(n,`
`)),`
)`):At("(",re(n,", "),")"))+": "+r+At(" ",re(o," "))}),InputValueDefinition:yn(function(e){var t=e.name,n=e.type,r=e.defaultValue,o=e.directives;return re([t+": "+n,At("= ",r),re(o," ")]," ")}),InterfaceTypeDefinition:yn(function(e){var t=e.name,n=e.interfaces,r=e.directives,o=e.fields;return re(["interface",t,At("implements ",re(n," & ")),re(r," "),_n(o)]," ")}),UnionTypeDefinition:yn(function(e){var t=e.name,n=e.directives,r=e.types;return re(["union",t,re(n," "),r&&r.length!==0?"= "+re(r," | "):""]," ")}),EnumTypeDefinition:yn(function(e){var t=e.name,n=e.directives,r=e.values;return re(["enum",t,re(n," "),_n(r)]," ")}),EnumValueDefinition:yn(function(e){var t=e.name,n=e.directives;return re([t,re(n," ")]," ")}),InputObjectTypeDefinition:yn(function(e){var t=e.name,n=e.directives,r=e.fields;return re(["input",t,re(n," "),_n(r)]," ")}),DirectiveDefinition:yn(function(e){var t=e.name,n=e.arguments,r=e.repeatable,o=e.locations;return"directive @"+t+(d0(n)?At(`(
`,Lc(re(n,`
`)),`
)`):At("(",re(n,", "),")"))+(r?" repeatable":"")+" on "+re(o," | ")}),SchemaExtension:function(e){var t=e.directives,n=e.operationTypes;return re(["extend schema",re(t," "),_n(n)]," ")},ScalarTypeExtension:function(e){var t=e.name,n=e.directives;return re(["extend scalar",t,re(n," ")]," ")},ObjectTypeExtension:function(e){var t=e.name,n=e.interfaces,r=e.directives,o=e.fields;return re(["extend type",t,At("implements ",re(n," & ")),re(r," "),_n(o)]," ")},InterfaceTypeExtension:function(e){var t=e.name,n=e.interfaces,r=e.directives,o=e.fields;return re(["extend interface",t,At("implements ",re(n," & ")),re(r," "),_n(o)]," ")},UnionTypeExtension:function(e){var t=e.name,n=e.directives,r=e.types;return re(["extend union",t,re(n," "),r&&r.length!==0?"= "+re(r," | "):""]," ")},EnumTypeExtension:function(e){var t=e.name,n=e.directives,r=e.values;return re(["extend enum",t,re(n," "),_n(r)]," ")},InputObjectTypeExtension:function(e){var t=e.name,n=e.directives,r=e.fields;return re(["extend input",t,re(n," "),_n(r)]," ")}};function yn(e){return function(t){return re([t.description,e(t)],`
`)}}function re(e){var t,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return(t=e==null?void 0:e.filter(function(r){return r}).join(n))!==null&&t!==void 0?t:""}function _n(e){return At(`{
`,Lc(re(e,`
`)),`
}`)}function At(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";return t!=null&&t!==""?e+t+n:""}function Lc(e){return At("  ",e.replace(/\n/g,`
  `))}function MI(e){return e.indexOf(`
`)!==-1}function d0(e){return e!=null&&e.some(MI)}v();function h0(){return nh()}function jI(){__DEV__?W(typeof Bo=="boolean",Bo):W(typeof Bo=="boolean",36)}h0();jI();v();v();v();v();v();function hi(e,t){var n=e.directives;return!n||!n.length?!0:g0(n).every(function(r){var o=r.directive,a=r.ifArgument,s=!1;return a.value.kind==="Variable"?(s=t&&t[a.value.name.value],__DEV__?W(s!==void 0,"Invalid variable referenced in @".concat(o.name.value," directive.")):W(s!==void 0,37)):s=a.value.value,o.name.value==="skip"?!s:s})}function m0(e){var t=[];return lr(e,{Directive:function(n){t.push(n.name.value)}}),t}function wu(e,t){return m0(t).some(function(n){return e.indexOf(n)>-1})}function sh(e){return e&&wu(["client"],e)&&wu(["export"],e)}function FI(e){var t=e.name.value;return t==="skip"||t==="include"}function g0(e){var t=[];return e&&e.length&&e.forEach(function(n){if(FI(n)){var r=n.arguments,o=n.name.value;__DEV__?W(r&&r.length===1,"Incorrect number of arguments for the @".concat(o," directive.")):W(r&&r.length===1,38);var a=r[0];__DEV__?W(a.name&&a.name.value==="if","Invalid argument for the @".concat(o," directive.")):W(a.name&&a.name.value==="if",39);var s=a.value;__DEV__?W(s&&(s.kind==="Variable"||s.kind==="BooleanValue"),"Argument for the @".concat(o," directive must be a variable or a boolean value.")):W(s&&(s.kind==="Variable"||s.kind==="BooleanValue"),40),t.push({directive:n,ifArgument:a})}}),t}v();function uh(e,t){var n=t,r=[];e.definitions.forEach(function(a){if(a.kind==="OperationDefinition")throw __DEV__?new Ee("Found a ".concat(a.operation," operation").concat(a.name?" named '".concat(a.name.value,"'"):"",". ")+"No operations are allowed when using a fragment as a query. Only fragments are allowed."):new Ee(41);a.kind==="FragmentDefinition"&&r.push(a)}),typeof n=="undefined"&&(__DEV__?W(r.length===1,"Found ".concat(r.length," fragments. `fragmentName` must be provided when there is not exactly 1 fragment.")):W(r.length===1,42),n=r[0].name.value);var o=P(P({},e),{definitions:Gi([{kind:"OperationDefinition",operation:"query",selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:n}}]}}],e.definitions,!0)});return o}function mi(e){e===void 0&&(e=[]);var t={};return e.forEach(function(n){t[n.name.value]=n}),t}function qo(e,t){switch(e.kind){case"InlineFragment":return e;case"FragmentSpread":{var n=t&&t[e.name.value];return __DEV__?W(n,"No fragment named ".concat(e.name.value,".")):W(n,43),n}default:return null}}v();v();v();function Fe(e){return e!==null&&typeof e=="object"}function qn(e){return{__ref:String(e)}}function Ie(e){return Boolean(e&&typeof e=="object"&&typeof e.__ref=="string")}function lh(e){return Fe(e)&&e.kind==="Document"&&Array.isArray(e.definitions)}function RI(e){return e.kind==="StringValue"}function NI(e){return e.kind==="BooleanValue"}function LI(e){return e.kind==="IntValue"}function $I(e){return e.kind==="FloatValue"}function BI(e){return e.kind==="Variable"}function qI(e){return e.kind==="ObjectValue"}function VI(e){return e.kind==="ListValue"}function zI(e){return e.kind==="EnumValue"}function UI(e){return e.kind==="NullValue"}function Yi(e,t,n,r){if(LI(n)||$I(n))e[t.value]=Number(n.value);else if(NI(n)||RI(n))e[t.value]=n.value;else if(qI(n)){var o={};n.fields.map(function(s){return Yi(o,s.name,s.value,r)}),e[t.value]=o}else if(BI(n)){var a=(r||{})[n.name.value];e[t.value]=a}else if(VI(n))e[t.value]=n.values.map(function(s){var u={};return Yi(u,t,s,r),u[t.value]});else if(zI(n))e[t.value]=n.value;else if(UI(n))e[t.value]=null;else throw __DEV__?new Ee('The inline argument "'.concat(t.value,'" of kind "').concat(n.kind,'"')+"is not supported. Use variables instead of inline arguments to overcome this limitation."):new Ee(52)}function ch(e,t){var n=null;e.directives&&(n={},e.directives.forEach(function(o){n[o.name.value]={},o.arguments&&o.arguments.forEach(function(a){var s=a.name,u=a.value;return Yi(n[o.name.value],s,u,t)})}));var r=null;return e.arguments&&e.arguments.length&&(r={},e.arguments.forEach(function(o){var a=o.name,s=o.value;return Yi(r,a,s,t)})),xu(e.name.value,r,n)}var WI=["connection","include","skip","client","rest","export"],xu=Object.assign(function(e,t,n){if(t&&n&&n.connection&&n.connection.key)if(n.connection.filter&&n.connection.filter.length>0){var r=n.connection.filter?n.connection.filter:[];r.sort();var o={};return r.forEach(function(u){o[u]=t[u]}),"".concat(n.connection.key,"(").concat(Su(o),")")}else return n.connection.key;var a=e;if(t){var s=Su(t);a+="(".concat(s,")")}return n&&Object.keys(n).forEach(function(u){WI.indexOf(u)===-1&&(n[u]&&Object.keys(n[u]).length?a+="@".concat(u,"(").concat(Su(n[u]),")"):a+="@".concat(u))}),a},{setStringify:function(e){var t=Su;return Su=e,t}}),Su=function(e){return JSON.stringify(e,HI)};function HI(e,t){return Fe(t)&&!Array.isArray(t)&&(t=Object.keys(t).sort().reduce(function(n,r){return n[r]=t[r],n},{})),t}function gi(e,t){if(e.arguments&&e.arguments.length){var n={};return e.arguments.forEach(function(r){var o=r.name,a=r.value;return Yi(n,o,a,t)}),n}return null}function tn(e){return e.alias?e.alias.value:e.name.value}function Eu(e,t,n){if(typeof e.__typename=="string")return e.__typename;for(var r=0,o=t.selections;r<o.length;r++){var a=o[r];if(Pr(a)){if(a.name.value==="__typename")return e[tn(a)]}else{var s=Eu(e,qo(a,n).selectionSet,n);if(typeof s=="string")return s}}}function Pr(e){return e.kind==="Field"}function ku(e){return e.kind==="InlineFragment"}function Wa(e){__DEV__?W(e&&e.kind==="Document",'Expecting a parsed GraphQL document. Perhaps you need to wrap the query string in a "gql" tag? http://docs.apollostack.com/apollo-client/core.html#gql'):W(e&&e.kind==="Document",44);var t=e.definitions.filter(function(n){return n.kind!=="FragmentDefinition"}).map(function(n){if(n.kind!=="OperationDefinition")throw __DEV__?new Ee('Schema type definitions not allowed in queries. Found: "'.concat(n.kind,'"')):new Ee(45);return n});return __DEV__?W(t.length<=1,"Ambiguous GraphQL document: contains ".concat(t.length," operations")):W(t.length<=1,46),e}function Vn(e){return Wa(e),e.definitions.filter(function(t){return t.kind==="OperationDefinition"})[0]}function Ha(e){return e.definitions.filter(function(t){return t.kind==="OperationDefinition"&&t.name}).map(function(t){return t.name.value})[0]||null}function vi(e){return e.definitions.filter(function(t){return t.kind==="FragmentDefinition"})}function Du(e){var t=Vn(e);return __DEV__?W(t&&t.operation==="query","Must contain a query definition."):W(t&&t.operation==="query",47),t}function fh(e){__DEV__?W(e.kind==="Document",'Expecting a parsed GraphQL document. Perhaps you need to wrap the query string in a "gql" tag? http://docs.apollostack.com/apollo-client/core.html#gql'):W(e.kind==="Document",48),__DEV__?W(e.definitions.length<=1,"Fragment must have exactly one definition."):W(e.definitions.length<=1,49);var t=e.definitions[0];return __DEV__?W(t.kind==="FragmentDefinition","Must be a fragment definition."):W(t.kind==="FragmentDefinition",50),t}function Vo(e){Wa(e);for(var t,n=0,r=e.definitions;n<r.length;n++){var o=r[n];if(o.kind==="OperationDefinition"){var a=o.operation;if(a==="query"||a==="mutation"||a==="subscription")return o}o.kind==="FragmentDefinition"&&!t&&(t=o)}if(t)return t;throw __DEV__?new Ee("Expected a parsed GraphQL query with a query, mutation, subscription, or a fragment."):new Ee(51)}function zo(e){var t=Object.create(null),n=e&&e.variableDefinitions;return n&&n.length&&n.forEach(function(r){r.defaultValue&&Yi(t,r.variable.name,r.defaultValue)}),t}v();v();function ph(e,t,n){var r=0;return e.forEach(function(o,a){t.call(this,o,a,e)&&(e[r++]=o)},n),e.length=r,e}var v0={kind:"Field",name:{kind:"Name",value:"__typename"}};function y0(e,t){return e.selectionSet.selections.every(function(n){return n.kind==="FragmentSpread"&&y0(t[n.name.value],t)})}function dh(e){return y0(Vn(e)||fh(e),mi(vi(e)))?null:e}function _0(e){return function(t){return e.some(function(n){return n.name&&n.name===t.name.value||n.test&&n.test(t)})}}function hh(e,t){var n=Object.create(null),r=[],o=Object.create(null),a=[],s=dh(lr(t,{Variable:{enter:function(u,l,c){c.kind!=="VariableDefinition"&&(n[u.name.value]=!0)}},Field:{enter:function(u){if(e&&u.directives){var l=e.some(function(c){return c.remove});if(l&&u.directives&&u.directives.some(_0(e)))return u.arguments&&u.arguments.forEach(function(c){c.value.kind==="Variable"&&r.push({name:c.value.name.value})}),u.selectionSet&&x0(u.selectionSet).forEach(function(c){a.push({name:c.name.value})}),null}}},FragmentSpread:{enter:function(u){o[u.name.value]=!0}},Directive:{enter:function(u){if(_0(e)(u))return null}}}));return s&&ph(r,function(u){return!!u.name&&!n[u.name]}).length&&(s=b0(r,s)),s&&ph(a,function(u){return!!u.name&&!o[u.name]}).length&&(s=w0(a,s)),s}var Uo=Object.assign(function(e){return lr(e,{SelectionSet:{enter:function(t,n,r){if(!(r&&r.kind==="OperationDefinition")){var o=t.selections;if(o){var a=o.some(function(u){return Pr(u)&&(u.name.value==="__typename"||u.name.value.lastIndexOf("__",0)===0)});if(!a){var s=r;if(!(Pr(s)&&s.directives&&s.directives.some(function(u){return u.name.value==="export"})))return P(P({},t),{selections:Gi(Gi([],o,!0),[v0],!1)})}}}}}})},{added:function(e){return e===v0}}),KI={test:function(e){var t=e.name.value==="connection";return t&&(!e.arguments||!e.arguments.some(function(n){return n.name.value==="key"}))&&__DEV__&&W.warn("Removing an @connection directive even though it does not have a key. You may want to use the key parameter to specify a store key."),t}};function mh(e){return hh([KI],Wa(e))}function GI(e){return function(t){return e.some(function(n){return t.value&&t.value.kind==="Variable"&&t.value.name&&(n.name===t.value.name.value||n.test&&n.test(t))})}}function b0(e,t){var n=GI(e);return dh(lr(t,{OperationDefinition:{enter:function(r){return P(P({},r),{variableDefinitions:r.variableDefinitions?r.variableDefinitions.filter(function(o){return!e.some(function(a){return a.name===o.variable.name.value})}):[]})}},Field:{enter:function(r){var o=e.some(function(s){return s.remove});if(o){var a=0;if(r.arguments&&r.arguments.forEach(function(s){n(s)&&(a+=1)}),a===1)return null}}},Argument:{enter:function(r){if(n(r))return null}}}))}function w0(e,t){function n(r){if(e.some(function(o){return o.name===r.name.value}))return null}return dh(lr(t,{FragmentSpread:{enter:n},FragmentDefinition:{enter:n}}))}function x0(e){var t=[];return e.selections.forEach(function(n){(Pr(n)||ku(n))&&n.selectionSet?x0(n.selectionSet).forEach(function(r){return t.push(r)}):n.kind==="FragmentSpread"&&t.push(n)}),t}function gh(e){var t=Vo(e),n=t.operation;if(n==="query")return e;var r=lr(e,{OperationDefinition:{enter:function(o){return P(P({},o),{operation:"query"})}}});return r}function vh(e){Wa(e);var t=hh([{test:function(n){return n.name.value==="client"},remove:!0}],e);return t&&(t=lr(t,{FragmentDefinition:{enter:function(n){if(n.selectionSet){var r=n.selectionSet.selections.every(function(o){return Pr(o)&&o.name.value==="__typename"});if(r)return null}}}})),t}v();var QI=Object.prototype.hasOwnProperty;function yh(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Cu(e)}function Cu(e){var t=e[0]||{},n=e.length;if(n>1)for(var r=new zn,o=1;o<n;++o)t=r.merge(t,e[o]);return t}var YI=function(e,t,n){return this.merge(e[n],t[n])},zn=function(){function e(t){t===void 0&&(t=YI),this.reconciler=t,this.isObject=Fe,this.pastCopies=new Set}return e.prototype.merge=function(t,n){for(var r=this,o=[],a=2;a<arguments.length;a++)o[a-2]=arguments[a];return Fe(n)&&Fe(t)?(Object.keys(n).forEach(function(s){if(QI.call(t,s)){var u=t[s];if(n[s]!==u){var l=r.reconciler.apply(r,Gi([t,n,s],o,!1));l!==u&&(t=r.shallowCopyForMerge(t),t[s]=l)}}else t=r.shallowCopyForMerge(t),t[s]=n[s]}),t):n},e.prototype.shallowCopyForMerge=function(t){return Fe(t)&&(this.pastCopies.has(t)||(Array.isArray(t)?t=t.slice(0):t=P({__proto__:Object.getPrototypeOf(t)},t),this.pastCopies.add(t))),t},e}();v();v();function JI(e,t){var n=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=XI(e))||t&&e&&typeof e.length=="number"){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function XI(e,t){if(e){if(typeof e=="string")return S0(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return S0(e,t)}}function S0(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function E0(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _h(e,t,n){return t&&E0(e.prototype,t),n&&E0(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var bh=function(){return typeof Symbol=="function"},wh=function(e){return bh()&&Boolean(Symbol[e])},xh=function(e){return wh(e)?Symbol[e]:"@@"+e};bh()&&!wh("observable")&&(Symbol.observable=Symbol("observable"));var ZI=xh("iterator"),Sh=xh("observable"),k0=xh("species");function $c(e,t){var n=e[t];if(n!=null){if(typeof n!="function")throw new TypeError(n+" is not a function");return n}}function Ou(e){var t=e.constructor;return t!==void 0&&(t=t[k0],t===null&&(t=void 0)),t!==void 0?t:Oe}function eM(e){return e instanceof Oe}function Ka(e){Ka.log?Ka.log(e):setTimeout(function(){throw e})}function Bc(e){Promise.resolve().then(function(){try{e()}catch(t){Ka(t)}})}function D0(e){var t=e._cleanup;if(t!==void 0&&(e._cleanup=void 0,!!t))try{if(typeof t=="function")t();else{var n=$c(t,"unsubscribe");n&&n.call(t)}}catch(r){Ka(r)}}function Eh(e){e._observer=void 0,e._queue=void 0,e._state="closed"}function tM(e){var t=e._queue;if(t){e._queue=void 0,e._state="ready";for(var n=0;n<t.length&&(C0(e,t[n].type,t[n].value),e._state!=="closed");++n);}}function C0(e,t,n){e._state="running";var r=e._observer;try{var o=$c(r,t);switch(t){case"next":o&&o.call(r,n);break;case"error":if(Eh(e),o)o.call(r,n);else throw n;break;case"complete":Eh(e),o&&o.call(r);break}}catch(a){Ka(a)}e._state==="closed"?D0(e):e._state==="running"&&(e._state="ready")}function kh(e,t,n){if(e._state!=="closed"){if(e._state==="buffering"){e._queue.push({type:t,value:n});return}if(e._state!=="ready"){e._state="buffering",e._queue=[{type:t,value:n}],Bc(function(){return tM(e)});return}C0(e,t,n)}}var rM=function(){function e(n,r){this._cleanup=void 0,this._observer=n,this._queue=void 0,this._state="initializing";var o=new nM(this);try{this._cleanup=r.call(void 0,o)}catch(a){o.error(a)}this._state==="initializing"&&(this._state="ready")}var t=e.prototype;return t.unsubscribe=function(){this._state!=="closed"&&(Eh(this),D0(this))},_h(e,[{key:"closed",get:function(){return this._state==="closed"}}]),e}(),nM=function(){function e(n){this._subscription=n}var t=e.prototype;return t.next=function(n){kh(this._subscription,"next",n)},t.error=function(n){kh(this._subscription,"error",n)},t.complete=function(){kh(this._subscription,"complete")},_h(e,[{key:"closed",get:function(){return this._subscription._state==="closed"}}]),e}(),Oe=function(){function e(n){if(!(this instanceof e))throw new TypeError("Observable cannot be called as a function");if(typeof n!="function")throw new TypeError("Observable initializer must be a function");this._subscriber=n}var t=e.prototype;return t.subscribe=function(n){return(typeof n!="object"||n===null)&&(n={next:n,error:arguments[1],complete:arguments[2]}),new rM(n,this._subscriber)},t.forEach=function(n){var r=this;return new Promise(function(o,a){if(typeof n!="function"){a(new TypeError(n+" is not a function"));return}function s(){u.unsubscribe(),o()}var u=r.subscribe({next:function(l){try{n(l,s)}catch(c){a(c),u.unsubscribe()}},error:a,complete:o})})},t.map=function(n){var r=this;if(typeof n!="function")throw new TypeError(n+" is not a function");var o=Ou(this);return new o(function(a){return r.subscribe({next:function(s){try{s=n(s)}catch(u){return a.error(u)}a.next(s)},error:function(s){a.error(s)},complete:function(){a.complete()}})})},t.filter=function(n){var r=this;if(typeof n!="function")throw new TypeError(n+" is not a function");var o=Ou(this);return new o(function(a){return r.subscribe({next:function(s){try{if(!n(s))return}catch(u){return a.error(u)}a.next(s)},error:function(s){a.error(s)},complete:function(){a.complete()}})})},t.reduce=function(n){var r=this;if(typeof n!="function")throw new TypeError(n+" is not a function");var o=Ou(this),a=arguments.length>1,s=!1,u=arguments[1],l=u;return new o(function(c){return r.subscribe({next:function(m){var me=!s;if(s=!0,!me||a)try{l=n(l,m)}catch(xe){return c.error(xe)}else l=m},error:function(m){c.error(m)},complete:function(){if(!s&&!a)return c.error(new TypeError("Cannot reduce an empty sequence"));c.next(l),c.complete()}})})},t.concat=function(){for(var n=this,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];var s=Ou(this);return new s(function(u){var l,c=0;function m(me){l=me.subscribe({next:function(xe){u.next(xe)},error:function(xe){u.error(xe)},complete:function(){c===o.length?(l=void 0,u.complete()):m(s.from(o[c++]))}})}return m(n),function(){l&&(l.unsubscribe(),l=void 0)}})},t.flatMap=function(n){var r=this;if(typeof n!="function")throw new TypeError(n+" is not a function");var o=Ou(this);return new o(function(a){var s=[],u=r.subscribe({next:function(c){if(n)try{c=n(c)}catch(me){return a.error(me)}var m=o.from(c).subscribe({next:function(me){a.next(me)},error:function(me){a.error(me)},complete:function(){var me=s.indexOf(m);me>=0&&s.splice(me,1),l()}});s.push(m)},error:function(c){a.error(c)},complete:function(){l()}});function l(){u.closed&&s.length===0&&a.complete()}return function(){s.forEach(function(c){return c.unsubscribe()}),u.unsubscribe()}})},t[Sh]=function(){return this},e.from=function(n){var r=typeof this=="function"?this:e;if(n==null)throw new TypeError(n+" is not an object");var o=$c(n,Sh);if(o){var a=o.call(n);if(Object(a)!==a)throw new TypeError(a+" is not an object");return eM(a)&&a.constructor===r?a:new r(function(s){return a.subscribe(s)})}if(wh("iterator")&&(o=$c(n,ZI),o))return new r(function(s){Bc(function(){if(!s.closed){for(var u=JI(o.call(n)),l;!(l=u()).done;){var c=l.value;if(s.next(c),s.closed)return}s.complete()}})});if(Array.isArray(n))return new r(function(s){Bc(function(){if(!s.closed){for(var u=0;u<n.length;++u)if(s.next(n[u]),s.closed)return;s.complete()}})});throw new TypeError(n+" is not observable")},e.of=function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];var a=typeof this=="function"?this:e;return new a(function(s){Bc(function(){if(!s.closed){for(var u=0;u<r.length;++u)if(s.next(r[u]),s.closed)return;s.complete()}})})},_h(e,null,[{key:k0,get:function(){return this}}]),e}();bh()&&Object.defineProperty(Oe,Symbol("extensions"),{value:{symbol:Sh,hostReportError:Ka},configurable:!0});v();v();function Dh(e){var t,n=e.Symbol;if(typeof n=="function")if(n.observable)t=n.observable;else{typeof n.for=="function"?t=n.for("https://github.com/benlesh/symbol-observable"):t=n("https://github.com/benlesh/symbol-observable");try{n.observable=t}catch{}}else t="@@observable";return t}var Ga;typeof self!="undefined"?Ga=self:typeof window!="undefined"?Ga=window:typeof global!="undefined"?Ga=global:typeof module!="undefined"?Ga=module:Ga=Function("return this")();Dh(Ga);var O0=Oe.prototype,T0="@@observable";O0[T0]||(O0[T0]=function(){return this});v();var iM=Object.prototype.toString;function qc(e){return Ch(e)}function Ch(e,t){switch(iM.call(e)){case"[object Array]":{if(t=t||new Map,t.has(e))return t.get(e);var n=e.slice(0);return t.set(e,n),n.forEach(function(o,a){n[a]=Ch(o,t)}),n}case"[object Object]":{if(t=t||new Map,t.has(e))return t.get(e);var r=Object.create(Object.getPrototypeOf(e));return t.set(e,r),Object.keys(e).forEach(function(o){r[o]=Ch(e[o],t)}),r}default:return e}}v();function oM(e){var t=new Set([e]);return t.forEach(function(n){Fe(n)&&aM(n)===n&&Object.getOwnPropertyNames(n).forEach(function(r){Fe(n[r])&&t.add(n[r])})}),e}function aM(e){if(__DEV__&&!Object.isFrozen(e))try{Object.freeze(e)}catch(t){if(t instanceof TypeError)return null;throw t}return e}function Tu(e){return __DEV__&&oM(e),e}v();function Wo(e,t,n){var r=[];e.forEach(function(o){return o[t]&&r.push(o)}),r.forEach(function(o){return o[t](n)})}v();function Vc(e,t,n){return new Oe(function(r){var o=r.next,a=r.error,s=r.complete,u=0,l=!1,c={then:function(Ne){return new Promise(function(He){return He(Ne())})}};function m(Ne,He){return Ne?function(Ye){++u;var Je=function(){return Ne(Ye)};c=c.then(Je,Je).then(function(vn){--u,o&&o.call(r,vn),l&&me.complete()},function(vn){throw--u,vn}).catch(function(vn){a&&a.call(r,vn)})}:function(Ye){return He&&He.call(r,Ye)}}var me={next:m(t,o),error:m(n,a),complete:function(){l=!0,u||s&&s.call(r)}},xe=e.subscribe(me);return function(){return xe.unsubscribe()}})}v();v();v();var rn=typeof WeakMap=="function"&&tr(function(){return navigator.product})!=="ReactNative",A0=typeof WeakSet=="function",I0=typeof Symbol=="function"&&typeof Symbol.for=="function";tr(function(){return window.document.createElement});tr(function(){return navigator.userAgent.indexOf("jsdom")>=0});function zc(e){function t(n){Object.defineProperty(e,n,{value:Oe})}return I0&&Symbol.species&&t(Symbol.species),t("@@species"),e}function M0(e){return e&&typeof e.then=="function"}var Qa=function(e){Vt(t,e);function t(n){var r=e.call(this,function(o){return r.addObserver(o),function(){return r.removeObserver(o)}})||this;return r.observers=new Set,r.addCount=0,r.promise=new Promise(function(o,a){r.resolve=o,r.reject=a}),r.handlers={next:function(o){r.sub!==null&&(r.latest=["next",o],Wo(r.observers,"next",o))},error:function(o){var a=r.sub;a!==null&&(a&&setTimeout(function(){return a.unsubscribe()}),r.sub=null,r.latest=["error",o],r.reject(o),Wo(r.observers,"error",o))},complete:function(){var o=r.sub;if(o!==null){var a=r.sources.shift();a?M0(a)?a.then(function(s){return r.sub=s.subscribe(r.handlers)}):r.sub=a.subscribe(r.handlers):(o&&setTimeout(function(){return o.unsubscribe()}),r.sub=null,r.latest&&r.latest[0]==="next"?r.resolve(r.latest[1]):r.resolve(),Wo(r.observers,"complete"))}}},r.cancel=function(o){r.reject(o),r.sources=[],r.handlers.complete()},r.promise.catch(function(o){}),typeof n=="function"&&(n=[new Oe(n)]),M0(n)?n.then(function(o){return r.start(o)},r.handlers.error):r.start(n),r}return t.prototype.start=function(n){this.sub===void 0&&(this.sources=Array.from(n),this.handlers.complete())},t.prototype.deliverLastMessage=function(n){if(this.latest){var r=this.latest[0],o=n[r];o&&o.call(n,this.latest[1]),this.sub===null&&r==="next"&&n.complete&&n.complete()}},t.prototype.addObserver=function(n){this.observers.has(n)||(this.deliverLastMessage(n),this.observers.add(n),++this.addCount)},t.prototype.removeObserver=function(n,r){this.observers.delete(n)&&--this.addCount<1&&!r&&this.handlers.complete()},t.prototype.cleanup=function(n){var r=this,o=!1,a=function(){o||(o=!0,r.observers.delete(s),n())},s={next:a,error:a,complete:a},u=this.addCount;this.addObserver(s),this.addCount=u},t}(Oe);zc(Qa);v();function Hr(e){return Array.isArray(e)&&e.length>0}v();function Ya(e){return e.errors&&e.errors.length>0||!1}v();function Ji(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Object.create(null);return e.forEach(function(r){!r||Object.keys(r).forEach(function(o){var a=r[o];a!==void 0&&(n[o]=a)})}),n}v();var P0=new Map;function Au(e){var t=P0.get(e)||1;return P0.set(e,t+1),"".concat(e,":").concat(t,":").concat(Math.random().toString(36).slice(2))}v();function j0(e){var t=Au("stringifyForDisplay");return JSON.stringify(e,function(n,r){return r===void 0?t:r}).split(JSON.stringify(t)).join("<undefined>")}v();function Iu(e,t){return Ji(e,t,t.variables&&{variables:P(P({},e&&e.variables),t.variables)})}v();v();function Uc(e){return new Oe(function(t){t.error(e)})}v();var Wc=function(e,t,n){var r=new Error(n);throw r.name="ServerError",r.response=e,r.statusCode=e.status,r.result=t,r};v();function Oh(e){for(var t=["query","operationName","variables","extensions","context"],n=0,r=Object.keys(e);n<r.length;n++){var o=r[n];if(t.indexOf(o)<0)throw __DEV__?new Ee("illegal argument: ".concat(o)):new Ee(24)}return e}v();function Th(e,t){var n=P({},e),r=function(a){typeof a=="function"?n=P(P({},n),a(n)):n=P(P({},n),a)},o=function(){return P({},n)};return Object.defineProperty(t,"setContext",{enumerable:!1,value:r}),Object.defineProperty(t,"getContext",{enumerable:!1,value:o}),t}v();function Ah(e){var t={variables:e.variables||{},extensions:e.extensions||{},operationName:e.operationName,query:e.query};return t.operationName||(t.operationName=typeof t.query!="string"?Ha(t.query)||void 0:""),t}function F0(e,t){return t?t(e):Oe.of()}function Mu(e){return typeof e=="function"?new nn(e):e}function Hc(e){return e.request.length<=1}var sM=function(e){Vt(t,e);function t(n,r){var o=e.call(this,n)||this;return o.link=r,o}return t}(Error),nn=function(){function e(t){t&&(this.request=t)}return e.empty=function(){return new e(function(){return Oe.of()})},e.from=function(t){return t.length===0?e.empty():t.map(Mu).reduce(function(n,r){return n.concat(r)})},e.split=function(t,n,r){var o=Mu(n),a=Mu(r||new e(F0));return Hc(o)&&Hc(a)?new e(function(s){return t(s)?o.request(s)||Oe.of():a.request(s)||Oe.of()}):new e(function(s,u){return t(s)?o.request(s,u)||Oe.of():a.request(s,u)||Oe.of()})},e.execute=function(t,n){return t.request(Th(n.context,Ah(Oh(n))))||Oe.of()},e.concat=function(t,n){var r=Mu(t);if(Hc(r))return __DEV__&&W.warn(new sM("You are calling concat on a terminating link, which will have no effect",r)),r;var o=Mu(n);return Hc(o)?new e(function(a){return r.request(a,function(s){return o.request(s)||Oe.of()})||Oe.of()}):new e(function(a,s){return r.request(a,function(u){return o.request(u,s)||Oe.of()})||Oe.of()})},e.prototype.split=function(t,n,r){return this.concat(e.split(t,n,r||new e(F0)))},e.prototype.concat=function(t){return e.concat(this,t)},e.prototype.request=function(t,n){throw __DEV__?new Ee("request is not implemented"):new Ee(19)},e.prototype.onError=function(t,n){if(n&&n.error)return n.error(t),!1;throw t},e.prototype.setOnError=function(t){return this.onError=t,this},e}();v();var Ja=nn.execute;v();var R0="3.6.9";v();v();var N0=Object.prototype.hasOwnProperty;function L0(e){return function(t){return t.text().then(function(n){try{return JSON.parse(n)}catch(o){var r=o;throw r.name="ServerParseError",r.response=t,r.statusCode=t.status,r.bodyText=n,r}}).then(function(n){return t.status>=300&&Wc(t,n,"Response not successful: Received status code ".concat(t.status)),!Array.isArray(n)&&!N0.call(n,"data")&&!N0.call(n,"errors")&&Wc(t,n,"Server response was missing for query '".concat(Array.isArray(e)?e.map(function(r){return r.operationName}):e.operationName,"'.")),n})}}v();var Pu=function(e,t){var n;try{n=JSON.stringify(e)}catch(o){var r=__DEV__?new Ee("Network request failed. ".concat(t," is not serializable: ").concat(o.message)):new Ee(21);throw r.parseError=o,r}return n};v();var uM={includeQuery:!0,includeExtensions:!1},lM={accept:"*/*","content-type":"application/json"},cM={method:"POST"},$0={http:uM,headers:lM,options:cM},B0=function(e,t){return t(e)};function q0(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var o={},a={};n.forEach(function(me){o=P(P(P({},o),me.options),{headers:P(P({},o.headers),fM(me.headers))}),me.credentials&&(o.credentials=me.credentials),a=P(P({},a),me.http)});var s=e.operationName,u=e.extensions,l=e.variables,c=e.query,m={operationName:s,variables:l};return a.includeExtensions&&(m.extensions=u),a.includeQuery&&(m.query=t(c,Ua)),{options:o,body:m}}function fM(e){if(e){var t=Object.create(null);return Object.keys(Object(e)).forEach(function(n){t[n.toLowerCase()]=e[n]}),t}return e}v();var V0=function(e){if(!e&&typeof fetch=="undefined")throw __DEV__?new Ee(`
"fetch" has not been found globally and no fetcher has been configured. To fix this, install a fetch package (like https://www.npmjs.com/package/cross-fetch), instantiate the fetcher, and pass it into your HttpLink constructor. For example:

import fetch from 'cross-fetch';
import { ApolloClient, HttpLink } from '@apollo/client';
const client = new ApolloClient({
  link: new HttpLink({ uri: '/graphql', fetch })
});
    `):new Ee(20)};v();var z0=function(){if(typeof AbortController=="undefined")return{controller:!1,signal:!1};var e=new AbortController,t=e.signal;return{controller:e,signal:t}};v();var U0=function(e,t){var n=e.getContext(),r=n.uri;return r||(typeof t=="function"?t(e):t||"/graphql")};v();v();function W0(e,t){var n=[],r=function(me,xe){n.push("".concat(me,"=").concat(encodeURIComponent(xe)))};if("query"in t&&r("query",t.query),t.operationName&&r("operationName",t.operationName),t.variables){var o=void 0;try{o=Pu(t.variables,"Variables map")}catch(me){return{parseError:me}}r("variables",o)}if(t.extensions){var a=void 0;try{a=Pu(t.extensions,"Extensions map")}catch(me){return{parseError:me}}r("extensions",a)}var s="",u=e,l=e.indexOf("#");l!==-1&&(s=e.substr(l),u=e.substr(0,l));var c=u.indexOf("?")===-1?"?":"&",m=u+c+n.join("&")+s;return{newURI:m}}var H0=tr(function(){return fetch}),K0=function(e){e===void 0&&(e={});var t=e.uri,n=t===void 0?"/graphql":t,r=e.fetch,o=e.print,a=o===void 0?B0:o,s=e.includeExtensions,u=e.useGETForQueries,l=e.includeUnusedVariables,c=l===void 0?!1:l,m=Bn(e,["uri","fetch","print","includeExtensions","useGETForQueries","includeUnusedVariables"]);__DEV__&&V0(r||H0);var me={http:{includeExtensions:s},options:m.fetchOptions,credentials:m.credentials,headers:m.headers};return new nn(function(xe){var Ne=U0(xe,n),He=xe.getContext(),Ye={};if(He.clientAwareness){var Je=He.clientAwareness,vn=Je.name,La=Je.version;vn&&(Ye["apollographql-client-name"]=vn),La&&(Ye["apollographql-client-version"]=La)}var sr=P(P({},Ye),He.headers),Zr={http:He.http,options:He.fetchOptions,credentials:He.credentials,headers:sr},zs=q0(xe,a,$0,me,Zr),za=zs.options,Hs=zs.body;if(Hs.variables&&!c){var lc=new Set(Object.keys(Hs.variables));lr(xe.query,{Variable:function(Ay,$b,e0){e0&&e0.kind!=="VariableDefinition"&&lc.delete(Ay.name.value)}}),lc.size&&(Hs.variables=P({},Hs.variables),lc.forEach(function(Ay){delete Hs.variables[Ay]}))}var Ty;if(!za.signal){var _y=z0(),xy=_y.controller,Bb=_y.signal;Ty=xy,Ty&&(za.signal=Bb)}var Dy=function(Ay){return Ay.kind==="OperationDefinition"&&Ay.operation==="mutation"};if(u&&!xe.query.definitions.some(Dy)&&(za.method="GET"),za.method==="GET"){var Bg=W0(Ne,Hs),yy=Bg.newURI,wy=Bg.parseError;if(wy)return Uc(wy);Ne=yy}else try{za.body=Pu(Hs,"Payload")}catch(Ay){return Uc(Ay)}return new Oe(function(Ay){var $b=r||tr(function(){return fetch})||H0;return $b(Ne,za).then(function(e0){return xe.setContext({response:e0}),e0}).then(L0(xe)).then(function(e0){return Ay.next(e0),Ay.complete(),e0}).catch(function(e0){e0.name!=="AbortError"&&(e0.result&&e0.result.errors&&e0.result.data&&Ay.next(e0.result),Ay.error(e0))}),function(){Ty&&Ty.abort()}})})};v();var Ih=function(e){Vt(t,e);function t(n){n===void 0&&(n={});var r=e.call(this,K0(n).request)||this;return r.options=n,r}return t}(nn);v();v();var G0=Object.prototype,Q0=G0.toString,pM=G0.hasOwnProperty,Y0=Function.prototype.toString,Mh=new Map;function xt(e,t){try{return Ph(e,t)}finally{Mh.clear()}}function Ph(e,t){if(e===t)return!0;var n=Q0.call(e),r=Q0.call(t);if(n!==r)return!1;switch(n){case"[object Array]":if(e.length!==t.length)return!1;case"[object Object]":{if(X0(e,t))return!0;var o=J0(e),a=J0(t),s=o.length;if(s!==a.length)return!1;for(var u=0;u<s;++u)if(!pM.call(t,o[u]))return!1;for(var u=0;u<s;++u){var l=o[u];if(!Ph(e[l],t[l]))return!1}return!0}case"[object Error]":return e.name===t.name&&e.message===t.message;case"[object Number]":if(e!==e)return t!==t;case"[object Boolean]":case"[object Date]":return+e==+t;case"[object RegExp]":case"[object String]":return e==""+t;case"[object Map]":case"[object Set]":{if(e.size!==t.size)return!1;if(X0(e,t))return!0;for(var c=e.entries(),m=n==="[object Map]";;){var me=c.next();if(me.done)break;var xe=me.value,Ne=xe[0],He=xe[1];if(!t.has(Ne)||m&&!Ph(He,t.get(Ne)))return!1}return!0}case"[object Uint16Array]":case"[object Uint8Array]":case"[object Uint32Array]":case"[object Int32Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object ArrayBuffer]":e=new Uint8Array(e),t=new Uint8Array(t);case"[object DataView]":{var Ye=e.byteLength;if(Ye===t.byteLength)for(;Ye--&&e[Ye]===t[Ye];);return Ye===-1}case"[object AsyncFunction]":case"[object GeneratorFunction]":case"[object AsyncGeneratorFunction]":case"[object Function]":{var Je=Y0.call(e);return Je!==Y0.call(t)?!1:!mM(Je,hM)}}return!1}function J0(e){return Object.keys(e).filter(dM,e)}function dM(e){return this[e]!==void 0}var hM="{ [native code] }";function mM(e,t){var n=e.length-t.length;return n>=0&&e.indexOf(t,n)===n}function X0(e,t){var n=Mh.get(e);if(n){if(n.has(t))return!0}else Mh.set(e,n=new Set);return n.add(t),!1}v();v();v();v();var gM=function(){return Object.create(null)},Z0=Array.prototype,vM=Z0.forEach,yM=Z0.slice,Un=function(){function e(t,n){t===void 0&&(t=!0),n===void 0&&(n=gM),this.weakness=t,this.makeData=n}return e.prototype.lookup=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return this.lookupArray(t)},e.prototype.lookupArray=function(t){var n=this;return vM.call(t,function(r){return n=n.getChildTrie(r)}),n.data||(n.data=this.makeData(yM.call(t)))},e.prototype.getChildTrie=function(t){var n=this.weakness&&_M(t)?this.weak||(this.weak=new WeakMap):this.strong||(this.strong=new Map),r=n.get(t);return r||n.set(t,r=new e(this.weakness,this.makeData)),r},e}();function _M(e){switch(typeof e){case"object":if(e===null)break;case"function":return!0}return!1}v();var cr=null,ew={},bM=1,wM=function(){return function(){function e(){this.id=["slot",bM++,Date.now(),Math.random().toString(36).slice(2)].join(":")}return e.prototype.hasValue=function(){for(var t=cr;t;t=t.parent)if(this.id in t.slots){var n=t.slots[this.id];if(n===ew)break;return t!==cr&&(cr.slots[this.id]=n),!0}return cr&&(cr.slots[this.id]=ew),!1},e.prototype.getValue=function(){if(this.hasValue())return cr.slots[this.id]},e.prototype.withValue=function(t,n,r,o){var a,s=(a={__proto__:null},a[this.id]=t,a),u=cr;cr={parent:u,slots:s};try{return n.apply(o,r)}finally{cr=u}},e.bind=function(t){var n=cr;return function(){var r=cr;try{return cr=n,t.apply(this,arguments)}finally{cr=r}}},e.noContext=function(t,n,r){if(cr){var o=cr;try{return cr=null,t.apply(r,n)}finally{cr=o}}else return t.apply(r,n)},e}()},jh="@wry/context:Slot",Fh=Array,Xa=Fh[jh]||function(){var e=wM();try{Object.defineProperty(Fh,jh,{value:Fh[jh]=e,enumerable:!1,writable:!1,configurable:!1})}finally{return e}}();Xa.bind;Xa.noContext;function EM(){}var kM=function(){function e(t,n){t===void 0&&(t=1/0),n===void 0&&(n=EM),this.max=t,this.dispose=n,this.map=new Map,this.newest=null,this.oldest=null}return e.prototype.has=function(t){return this.map.has(t)},e.prototype.get=function(t){var n=this.getNode(t);return n&&n.value},e.prototype.getNode=function(t){var n=this.map.get(t);if(n&&n!==this.newest){var r=n.older,o=n.newer;o&&(o.older=r),r&&(r.newer=o),n.older=this.newest,n.older.newer=n,n.newer=null,this.newest=n,n===this.oldest&&(this.oldest=o)}return n},e.prototype.set=function(t,n){var r=this.getNode(t);return r?r.value=n:(r={key:t,value:n,newer:null,older:this.newest},this.newest&&(this.newest.newer=r),this.newest=r,this.oldest=this.oldest||r,this.map.set(t,r),r.value)},e.prototype.clean=function(){for(;this.oldest&&this.map.size>this.max;)this.delete(this.oldest.key)},e.prototype.delete=function(t){var n=this.map.get(t);return n?(n===this.newest&&(this.newest=n.older),n===this.oldest&&(this.oldest=n.newer),n.newer&&(n.newer.older=n.older),n.older&&(n.older.newer=n.newer),this.map.delete(t),this.dispose(n.value,t),!0):!1},e}(),Kc=new Xa,Rh,DM=Object.prototype.hasOwnProperty,Nh=(Rh=Array.from,Rh===void 0?function(e){var t=[];return e.forEach(function(n){return t.push(n)}),t}:Rh);function Gc(e){var t=e.unsubscribe;typeof t=="function"&&(e.unsubscribe=void 0,t())}var ju=[],CM=100;function Za(e,t){if(!e)throw new Error(t||"assertion failure")}function OM(e,t){var n=e.length;return n>0&&n===t.length&&e[n-1]===t[n-1]}function tw(e){switch(e.length){case 0:throw new Error("unknown value");case 1:return e[0];case 2:throw e[1]}}function TM(e){return e.slice(0)}var AM=function(){function e(t){this.fn=t,this.parents=new Set,this.childValues=new Map,this.dirtyChildren=null,this.dirty=!0,this.recomputing=!1,this.value=[],this.deps=null,++e.count}return e.prototype.peek=function(){if(this.value.length===1&&!Xi(this))return rw(this),this.value[0]},e.prototype.recompute=function(t){return Za(!this.recomputing,"already recomputing"),rw(this),Xi(this)?IM(this,t):tw(this.value)},e.prototype.setDirty=function(){this.dirty||(this.dirty=!0,this.value.length=0,nw(this),Gc(this))},e.prototype.dispose=function(){var t=this;this.setDirty(),uw(this),Lh(this,function(n,r){n.setDirty(),lw(n,t)})},e.prototype.forget=function(){this.dispose()},e.prototype.dependOn=function(t){t.add(this),this.deps||(this.deps=ju.pop()||new Set),this.deps.add(t)},e.prototype.forgetDeps=function(){var t=this;this.deps&&(Nh(this.deps).forEach(function(n){return n.delete(t)}),this.deps.clear(),ju.push(this.deps),this.deps=null)},e.count=0,e}();function rw(e){var t=Kc.getValue();if(t)return e.parents.add(t),t.childValues.has(e)||t.childValues.set(e,[]),Xi(e)?ow(t,e):aw(t,e),t}function IM(e,t){return uw(e),Kc.withValue(e,MM,[e,t]),jM(e,t)&&PM(e),tw(e.value)}function MM(e,t){e.recomputing=!0,e.value.length=0;try{e.value[0]=e.fn.apply(null,t)}catch(n){e.value[1]=n}e.recomputing=!1}function Xi(e){return e.dirty||!!(e.dirtyChildren&&e.dirtyChildren.size)}function PM(e){e.dirty=!1,!Xi(e)&&iw(e)}function nw(e){Lh(e,ow)}function iw(e){Lh(e,aw)}function Lh(e,t){var n=e.parents.size;if(n)for(var r=Nh(e.parents),o=0;o<n;++o)t(r[o],e)}function ow(e,t){Za(e.childValues.has(t)),Za(Xi(t));var n=!Xi(e);if(!e.dirtyChildren)e.dirtyChildren=ju.pop()||new Set;else if(e.dirtyChildren.has(t))return;e.dirtyChildren.add(t),n&&nw(e)}function aw(e,t){Za(e.childValues.has(t)),Za(!Xi(t));var n=e.childValues.get(t);n.length===0?e.childValues.set(t,TM(t.value)):OM(n,t.value)||e.setDirty(),sw(e,t),!Xi(e)&&iw(e)}function sw(e,t){var n=e.dirtyChildren;n&&(n.delete(t),n.size===0&&(ju.length<CM&&ju.push(n),e.dirtyChildren=null))}function uw(e){e.childValues.size>0&&e.childValues.forEach(function(t,n){lw(e,n)}),e.forgetDeps(),Za(e.dirtyChildren===null)}function lw(e,t){t.parents.delete(e),e.childValues.delete(t),sw(e,t)}function jM(e,t){if(typeof e.subscribe=="function")try{Gc(e),e.unsubscribe=e.subscribe.apply(null,t)}catch{return e.setDirty(),!1}return!0}var FM={setDirty:!0,dispose:!0,forget:!0};function Qc(e){var t=new Map,n=e&&e.subscribe;function r(o){var a=Kc.getValue();if(a){var s=t.get(o);s||t.set(o,s=new Set),a.dependOn(s),typeof n=="function"&&(Gc(s),s.unsubscribe=n(o))}}return r.dirty=function(o,a){var s=t.get(o);if(s){var u=a&&DM.call(FM,a)?a:"setDirty";Nh(s).forEach(function(l){return l[u]()}),t.delete(o),Gc(s)}},r}function cw(){var e=new Un(typeof WeakMap=="function");return function(){return e.lookupArray(arguments)}}cw();var $h=new Set;function Ho(e,t){t===void 0&&(t=Object.create(null));var n=new kM(t.max||Math.pow(2,16),function(c){return c.dispose()}),r=t.keyArgs,o=t.makeCacheKey||cw(),a=function(){var c=o.apply(null,r?r.apply(null,arguments):arguments);if(c===void 0)return e.apply(null,arguments);var m=n.get(c);m||(n.set(c,m=new AM(e)),m.subscribe=t.subscribe,m.forget=function(){return n.delete(c)});var me=m.recompute(Array.prototype.slice.call(arguments));return n.set(c,m),$h.add(n),Kc.hasValue()||($h.forEach(function(xe){return xe.clean()}),$h.clear()),me};Object.defineProperty(a,"size",{get:function(){return n.map.size},configurable:!1,enumerable:!1});function s(c){var m=n.get(c);m&&m.setDirty()}a.dirtyKey=s,a.dirty=function(){s(o.apply(null,arguments))};function u(c){var m=n.get(c);if(m)return m.peek()}a.peekKey=u,a.peek=function(){return u(o.apply(null,arguments))};function l(c){return n.delete(c)}return a.forgetKey=l,a.forget=function(){return l(o.apply(null,arguments))},a.makeCacheKey=o,a.getKey=r?function(){return o.apply(null,r.apply(null,arguments))}:o,Object.freeze(a)}var Bh=function(){function e(){this.getFragmentDoc=Ho(uh)}return e.prototype.batch=function(t){var n=this,r=typeof t.optimistic=="string"?t.optimistic:t.optimistic===!1?null:void 0,o;return this.performTransaction(function(){return o=t.update(n)},r),o},e.prototype.recordOptimisticTransaction=function(t,n){this.performTransaction(t,n)},e.prototype.transformDocument=function(t){return t},e.prototype.identify=function(t){},e.prototype.gc=function(){return[]},e.prototype.modify=function(t){return!1},e.prototype.transformForLink=function(t){return t},e.prototype.readQuery=function(t,n){return n===void 0&&(n=!!t.optimistic),this.read(P(P({},t),{rootId:t.id||"ROOT_QUERY",optimistic:n}))},e.prototype.readFragment=function(t,n){return n===void 0&&(n=!!t.optimistic),this.read(P(P({},t),{query:this.getFragmentDoc(t.fragment,t.fragmentName),rootId:t.id,optimistic:n}))},e.prototype.writeQuery=function(t){var n=t.id,r=t.data,o=Bn(t,["id","data"]);return this.write(Object.assign(o,{dataId:n||"ROOT_QUERY",result:r}))},e.prototype.writeFragment=function(t){var n=t.id,r=t.data,o=t.fragment,a=t.fragmentName,s=Bn(t,["id","data","fragment","fragmentName"]);return this.write(Object.assign(s,{query:this.getFragmentDoc(o,a),dataId:n,result:r}))},e.prototype.updateQuery=function(t,n){return this.batch({update:function(r){var o=r.readQuery(t),a=n(o);return a==null?o:(r.writeQuery(P(P({},t),{data:a})),a)}})},e.prototype.updateFragment=function(t,n){return this.batch({update:function(r){var o=r.readFragment(t),a=n(o);return a==null?o:(r.writeFragment(P(P({},t),{data:a})),a)}})},e}();v();var Fu=function(){function e(t,n,r,o){this.message=t,this.path=n,this.query=r,this.variables=o}return e}();v();v();var Mt=Object.prototype.hasOwnProperty;function Yc(e,t){var n=e.__typename,r=e.id,o=e._id;if(typeof n=="string"&&(t&&(t.keyObject=r!==void 0?{id:r}:o!==void 0?{_id:o}:void 0),r===void 0&&(r=o),r!==void 0))return"".concat(n,":").concat(typeof r=="number"||typeof r=="string"?r:JSON.stringify(r))}var fw={dataIdFromObject:Yc,addTypename:!0,resultCaching:!0,canonizeResults:!1};function pw(e){return Ji(fw,e)}function Jc(e){var t=e.canonizeResults;return t===void 0?fw.canonizeResults:t}function dw(e,t){return Ie(t)?e.get(t.__ref,"__typename"):t&&t.__typename}var qh=/^[_a-z][_0-9a-z]*/i;function bn(e){var t=e.match(qh);return t?t[0]:e}function Xc(e,t,n){return Fe(t)?dt(t)?t.every(function(r){return Xc(e,r,n)}):e.selections.every(function(r){if(Pr(r)&&hi(r,n)){var o=tn(r);return Mt.call(t,o)&&(!r.selectionSet||Xc(r.selectionSet,t[o],n))}return!0}):!1}function Zi(e){return Fe(e)&&!Ie(e)&&!dt(e)}function hw(){return new zn}var dt=function(e){return Array.isArray(e)},Zc=Object.create(null),Vh=function(){return Zc},mw=Object.create(null),es=function(){function e(t,n){var r=this;this.policies=t,this.group=n,this.data=Object.create(null),this.rootIds=Object.create(null),this.refs=Object.create(null),this.getFieldValue=function(o,a){return Tu(Ie(o)?r.get(o.__ref,a):o&&o[a])},this.canRead=function(o){return Ie(o)?r.has(o.__ref):typeof o=="object"},this.toReference=function(o,a){if(typeof o=="string")return qn(o);if(Ie(o))return o;var s=r.policies.identify(o)[0];if(s){var u=qn(s);return a&&r.merge(s,o),u}}}return e.prototype.toObject=function(){return P({},this.data)},e.prototype.has=function(t){return this.lookup(t,!0)!==void 0},e.prototype.get=function(t,n){if(this.group.depend(t,n),Mt.call(this.data,t)){var r=this.data[t];if(r&&Mt.call(r,n))return r[n]}if(n==="__typename"&&Mt.call(this.policies.rootTypenamesById,t))return this.policies.rootTypenamesById[t];if(this instanceof eo)return this.parent.get(t,n)},e.prototype.lookup=function(t,n){if(n&&this.group.depend(t,"__exists"),Mt.call(this.data,t))return this.data[t];if(this instanceof eo)return this.parent.lookup(t,n);if(this.policies.rootTypenamesById[t])return Object.create(null)},e.prototype.merge=function(t,n){var r=this,o;Ie(t)&&(t=t.__ref),Ie(n)&&(n=n.__ref);var a=typeof t=="string"?this.lookup(o=t):t,s=typeof n=="string"?this.lookup(o=n):n;if(s){__DEV__?W(typeof o=="string","store.merge expects a string ID"):W(typeof o=="string",1);var u=new zn(NM).merge(a,s);if(this.data[o]=u,u!==a&&(delete this.refs[o],this.group.caching)){var l=Object.create(null);a||(l.__exists=1),Object.keys(s).forEach(function(c){if(!a||a[c]!==u[c]){l[c]=1;var m=bn(c);m!==c&&!r.policies.hasKeyArgs(u.__typename,m)&&(l[m]=1),u[c]===void 0&&!(r instanceof eo)&&delete u[c]}}),l.__typename&&!(a&&a.__typename)&&this.policies.rootTypenamesById[o]===u.__typename&&delete l.__typename,Object.keys(l).forEach(function(c){return r.group.dirty(o,c)})}}},e.prototype.modify=function(t,n){var r=this,o=this.lookup(t);if(o){var a=Object.create(null),s=!1,u=!0,l={DELETE:Zc,INVALIDATE:mw,isReference:Ie,toReference:this.toReference,canRead:this.canRead,readField:function(c,m){return r.policies.readField(typeof c=="string"?{fieldName:c,from:m||qn(t)}:c,{store:r})}};if(Object.keys(o).forEach(function(c){var m=bn(c),me=o[c];if(me!==void 0){var xe=typeof n=="function"?n:n[c]||n[m];if(xe){var Ne=xe===Vh?Zc:xe(Tu(me),P(P({},l),{fieldName:m,storeFieldName:c,storage:r.getStorage(t,c)}));Ne===mw?r.group.dirty(t,c):(Ne===Zc&&(Ne=void 0),Ne!==me&&(a[c]=Ne,s=!0,me=Ne))}me!==void 0&&(u=!1)}}),s)return this.merge(t,a),u&&(this instanceof eo?this.data[t]=void 0:delete this.data[t],this.group.dirty(t,"__exists")),!0}return!1},e.prototype.delete=function(t,n,r){var o,a=this.lookup(t);if(a){var s=this.getFieldValue(a,"__typename"),u=n&&r?this.policies.getStoreFieldName({typename:s,fieldName:n,args:r}):n;return this.modify(t,u?(o={},o[u]=Vh,o):Vh)}return!1},e.prototype.evict=function(t,n){var r=!1;return t.id&&(Mt.call(this.data,t.id)&&(r=this.delete(t.id,t.fieldName,t.args)),this instanceof eo&&this!==n&&(r=this.parent.evict(t,n)||r),(t.fieldName||r)&&this.group.dirty(t.id,t.fieldName||"__exists")),r},e.prototype.clear=function(){this.replace(null)},e.prototype.extract=function(){var t=this,n=this.toObject(),r=[];return this.getRootIdSet().forEach(function(o){Mt.call(t.policies.rootTypenamesById,o)||r.push(o)}),r.length&&(n.__META={extraRootIds:r.sort()}),n},e.prototype.replace=function(t){var n=this;if(Object.keys(this.data).forEach(function(a){t&&Mt.call(t,a)||n.delete(a)}),t){var r=t.__META,o=Bn(t,["__META"]);Object.keys(o).forEach(function(a){n.merge(a,o[a])}),r&&r.extraRootIds.forEach(this.retain,this)}},e.prototype.retain=function(t){return this.rootIds[t]=(this.rootIds[t]||0)+1},e.prototype.release=function(t){if(this.rootIds[t]>0){var n=--this.rootIds[t];return n||delete this.rootIds[t],n}return 0},e.prototype.getRootIdSet=function(t){return t===void 0&&(t=new Set),Object.keys(this.rootIds).forEach(t.add,t),this instanceof eo?this.parent.getRootIdSet(t):Object.keys(this.policies.rootTypenamesById).forEach(t.add,t),t},e.prototype.gc=function(){var t=this,n=this.getRootIdSet(),r=this.toObject();n.forEach(function(s){Mt.call(r,s)&&(Object.keys(t.findChildRefIds(s)).forEach(n.add,n),delete r[s])});var o=Object.keys(r);if(o.length){for(var a=this;a instanceof eo;)a=a.parent;o.forEach(function(s){return a.delete(s)})}return o},e.prototype.findChildRefIds=function(t){if(!Mt.call(this.refs,t)){var n=this.refs[t]=Object.create(null),r=this.data[t];if(!r)return n;var o=new Set([r]);o.forEach(function(a){Ie(a)&&(n[a.__ref]=!0),Fe(a)&&Object.keys(a).forEach(function(s){var u=a[s];Fe(u)&&o.add(u)})})}return this.refs[t]},e.prototype.makeCacheKey=function(){return this.group.keyMaker.lookupArray(arguments)},e}(),gw=function(){function e(t,n){n===void 0&&(n=null),this.caching=t,this.parent=n,this.d=null,this.resetCaching()}return e.prototype.resetCaching=function(){this.d=this.caching?Qc():null,this.keyMaker=new Un(rn)},e.prototype.depend=function(t,n){if(this.d){this.d(zh(t,n));var r=bn(n);r!==n&&this.d(zh(t,r)),this.parent&&this.parent.depend(t,n)}},e.prototype.dirty=function(t,n){this.d&&this.d.dirty(zh(t,n),n==="__exists"?"forget":"setDirty")},e}();function zh(e,t){return t+"#"+e}function Uh(e,t){Ko(e)&&e.group.depend(t,"__exists")}(function(e){var t=function(n){Vt(r,n);function r(o){var a=o.policies,s=o.resultCaching,u=s===void 0?!0:s,l=o.seed,c=n.call(this,a,new gw(u))||this;return c.stump=new RM(c),c.storageTrie=new Un(rn),l&&c.replace(l),c}return r.prototype.addLayer=function(o,a){return this.stump.addLayer(o,a)},r.prototype.removeLayer=function(){return this},r.prototype.getStorage=function(){return this.storageTrie.lookupArray(arguments)},r}(e);e.Root=t})(es||(es={}));var eo=function(e){Vt(t,e);function t(n,r,o,a){var s=e.call(this,r.policies,a)||this;return s.id=n,s.parent=r,s.replay=o,s.group=a,o(s),s}return t.prototype.addLayer=function(n,r){return new t(n,this,r,this.group)},t.prototype.removeLayer=function(n){var r=this,o=this.parent.removeLayer(n);return n===this.id?(this.group.caching&&Object.keys(this.data).forEach(function(a){var s=r.data[a],u=o.lookup(a);u?s?s!==u&&Object.keys(s).forEach(function(l){xt(s[l],u[l])||r.group.dirty(a,l)}):(r.group.dirty(a,"__exists"),Object.keys(u).forEach(function(l){r.group.dirty(a,l)})):r.delete(a)}),o):o===this.parent?this:o.addLayer(this.id,this.replay)},t.prototype.toObject=function(){return P(P({},this.parent.toObject()),this.data)},t.prototype.findChildRefIds=function(n){var r=this.parent.findChildRefIds(n);return Mt.call(this.data,n)?P(P({},r),e.prototype.findChildRefIds.call(this,n)):r},t.prototype.getStorage=function(){for(var n=this.parent;n.parent;)n=n.parent;return n.getStorage.apply(n,arguments)},t}(es),RM=function(e){Vt(t,e);function t(n){return e.call(this,"EntityStore.Stump",n,function(){},new gw(n.group.caching,n.group))||this}return t.prototype.removeLayer=function(){return this},t.prototype.merge=function(){return this.parent.merge.apply(this.parent,arguments)},t}(eo);function NM(e,t,n){var r=e[n],o=t[n];return xt(r,o)?r:o}function Ko(e){return!!(e instanceof es&&e.group.caching)}v();v();v();function LM(e){return Fe(e)?dt(e)?e.slice(0):P({__proto__:Object.getPrototypeOf(e)},e):e}var ef=function(){function e(){this.known=new(A0?WeakSet:Set),this.pool=new Un(rn),this.passes=new WeakMap,this.keysByJSON=new Map,this.empty=this.admit({})}return e.prototype.isKnown=function(t){return Fe(t)&&this.known.has(t)},e.prototype.pass=function(t){if(Fe(t)){var n=LM(t);return this.passes.set(n,t),n}return t},e.prototype.admit=function(t){var n=this;if(Fe(t)){var r=this.passes.get(t);if(r)return r;var o=Object.getPrototypeOf(t);switch(o){case Array.prototype:{if(this.known.has(t))return t;var a=t.map(this.admit,this),s=this.pool.lookupArray(a);return s.array||(this.known.add(s.array=a),__DEV__&&Object.freeze(a)),s.array}case null:case Object.prototype:{if(this.known.has(t))return t;var u=Object.getPrototypeOf(t),l=[u],c=this.sortedKeys(t);l.push(c.json);var m=l.length;c.sorted.forEach(function(Ne){l.push(n.admit(t[Ne]))});var s=this.pool.lookupArray(l);if(!s.object){var me=s.object=Object.create(u);this.known.add(me),c.sorted.forEach(function(Ne,He){me[Ne]=l[m+He]}),__DEV__&&Object.freeze(me)}return s.object}}}return t},e.prototype.sortedKeys=function(t){var n=Object.keys(t),r=this.pool.lookupArray(n);if(!r.keys){n.sort();var o=JSON.stringify(n);(r.keys=this.keysByJSON.get(o))||this.keysByJSON.set(o,r.keys={sorted:n,json:o})}return r.keys},e}(),Kr=Object.assign(function(e){if(Fe(e)){Wh===void 0&&vw();var t=Wh.admit(e),n=Hh.get(t);return n===void 0&&Hh.set(t,n=JSON.stringify(t)),n}return JSON.stringify(e)},{reset:vw}),Wh,Hh;function vw(){Wh=new ef,Hh=new(rn?WeakMap:Map)}function yw(e){return[e.selectionSet,e.objectOrReference,e.context,e.context.canonizeResults]}var _w=function(){function e(t){var n=this;this.knownResults=new(rn?WeakMap:Map),this.config=Ji(t,{addTypename:t.addTypename!==!1,canonizeResults:Jc(t)}),this.canon=t.canon||new ef,this.executeSelectionSet=Ho(function(r){var o,a=r.context.canonizeResults,s=yw(r);s[3]=!a;var u=(o=n.executeSelectionSet).peek.apply(o,s);return u?a?P(P({},u),{result:n.canon.admit(u.result)}):u:(Uh(r.context.store,r.enclosingRef.__ref),n.execSelectionSetImpl(r))},{max:this.config.resultCacheMaxSize,keyArgs:yw,makeCacheKey:function(r,o,a,s){if(Ko(a.store))return a.store.makeCacheKey(r,Ie(o)?o.__ref:o,a.varString,s)}}),this.executeSubSelectedArray=Ho(function(r){return Uh(r.context.store,r.enclosingRef.__ref),n.execSubSelectedArrayImpl(r)},{max:this.config.resultCacheMaxSize,makeCacheKey:function(r){var o=r.field,a=r.array,s=r.context;if(Ko(s.store))return s.store.makeCacheKey(o,a,s.varString)}})}return e.prototype.resetCanon=function(){this.canon=new ef},e.prototype.diffQueryAgainstStore=function(t){var n=t.store,r=t.query,o=t.rootId,a=o===void 0?"ROOT_QUERY":o,s=t.variables,u=t.returnPartialData,l=u===void 0?!0:u,c=t.canonizeResults,m=c===void 0?this.config.canonizeResults:c,me=this.config.cache.policies;s=P(P({},zo(Du(r))),s);var xe=qn(a),Ne=this.executeSelectionSet({selectionSet:Vo(r).selectionSet,objectOrReference:xe,enclosingRef:xe,context:{store:n,query:r,policies:me,variables:s,varString:Kr(s),canonizeResults:m,fragmentMap:mi(vi(r))}}),He;if(Ne.missing&&(He=[new Fu($M(Ne.missing),Ne.missing,r,s)],!l))throw He[0];return{result:Ne.result,complete:!He,missing:He}},e.prototype.isFresh=function(t,n,r,o){if(Ko(o.store)&&this.knownResults.get(t)===r){var a=this.executeSelectionSet.peek(r,n,o,this.canon.isKnown(t));if(a&&t===a.result)return!0}return!1},e.prototype.execSelectionSetImpl=function(t){var n=this,r=t.selectionSet,o=t.objectOrReference,a=t.enclosingRef,s=t.context;if(Ie(o)&&!s.policies.rootTypenamesById[o.__ref]&&!s.store.has(o.__ref))return{result:this.canon.empty,missing:"Dangling reference to missing ".concat(o.__ref," object")};var u=s.variables,l=s.policies,c=s.store,m=c.getFieldValue(o,"__typename"),me=[],xe,Ne=new zn;this.config.addTypename&&typeof m=="string"&&!l.rootIdsByTypename[m]&&me.push({__typename:m});function He(sr,Zr){var zs;return sr.missing&&(xe=Ne.merge(xe,(zs={},zs[Zr]=sr.missing,zs))),sr.result}var Ye=new Set(r.selections);Ye.forEach(function(sr){var Zr,zs;if(hi(sr,u))if(Pr(sr)){var za=l.readField({fieldName:sr.name.value,field:sr,variables:s.variables,from:o},s),Hs=tn(sr);za===void 0?Uo.added(sr)||(xe=Ne.merge(xe,(Zr={},Zr[Hs]="Can't find field '".concat(sr.name.value,"' on ").concat(Ie(o)?o.__ref+" object":"object "+JSON.stringify(o,null,2)),Zr))):dt(za)?za=He(n.executeSubSelectedArray({field:sr,array:za,enclosingRef:a,context:s}),Hs):sr.selectionSet?za!=null&&(za=He(n.executeSelectionSet({selectionSet:sr.selectionSet,objectOrReference:za,enclosingRef:Ie(za)?za:a,context:s}),Hs)):s.canonizeResults&&(za=n.canon.pass(za)),za!==void 0&&me.push((zs={},zs[Hs]=za,zs))}else{var lc=qo(sr,s.fragmentMap);lc&&l.fragmentMatches(lc,m)&&lc.selectionSet.selections.forEach(Ye.add,Ye)}});var Je=Cu(me),vn={result:Je,missing:xe},La=s.canonizeResults?this.canon.admit(vn):Tu(vn);return La.result&&this.knownResults.set(La.result,r),La},e.prototype.execSubSelectedArrayImpl=function(t){var n=this,r=t.field,o=t.array,a=t.enclosingRef,s=t.context,u,l=new zn;function c(m,me){var xe;return m.missing&&(u=l.merge(u,(xe={},xe[me]=m.missing,xe))),m.result}return r.selectionSet&&(o=o.filter(s.store.canRead)),o=o.map(function(m,me){return m===null?null:dt(m)?c(n.executeSubSelectedArray({field:r,array:m,enclosingRef:a,context:s}),me):r.selectionSet?c(n.executeSelectionSet({selectionSet:r.selectionSet,objectOrReference:m,enclosingRef:Ie(m)?m:a,context:s}),me):(__DEV__&&BM(s.store,r,m),m)}),{result:s.canonizeResults?this.canon.admit(o):o,missing:u}},e}();function $M(e){try{JSON.stringify(e,function(t,n){if(typeof n=="string")throw n;return n})}catch(t){return t}}function BM(e,t,n){if(!t.selectionSet){var r=new Set([n]);r.forEach(function(o){Fe(o)&&(__DEV__?W(!Ie(o),"Missing selection set for object of type ".concat(dw(e,o)," returned for query field ").concat(t.name.value)):W(!Ie(o),5),Object.values(o).forEach(r.add,r))})}}v();v();v();var ts=new Xa,bw=new WeakMap;function Ru(e){var t=bw.get(e);return t||bw.set(e,t={vars:new Set,dep:Qc()}),t}function Kh(e){Ru(e).vars.forEach(function(t){return t.forgetCache(e)})}function ww(e){Ru(e).vars.forEach(function(t){return t.attachCache(e)})}function tf(e){var t=new Set,n=new Set,r=function(a){if(arguments.length>0){if(e!==a){e=a,t.forEach(function(l){Ru(l).dep.dirty(r),qM(l)});var s=Array.from(n);n.clear(),s.forEach(function(l){return l(e)})}}else{var u=ts.getValue();u&&(o(u),Ru(u).dep(r))}return e};r.onNextChange=function(a){return n.add(a),function(){n.delete(a)}};var o=r.attachCache=function(a){return t.add(a),Ru(a).vars.add(r),r};return r.forgetCache=function(a){return t.delete(a)},r}function qM(e){e.broadcastWatches&&e.broadcastWatches()}v();var xw=Object.create(null);function Gh(e){var t=JSON.stringify(e);return xw[t]||(xw[t]=Object.create(null))}function Qh(e){var t=Gh(e);return t.keyFieldsFn||(t.keyFieldsFn=function(n,r){var o=function(s,u){return r.readField(u,s)},a=r.keyObject=Jh(e,function(s){var u=rs(r.storeObject,s,o);return u===void 0&&n!==r.storeObject&&Mt.call(n,s[0])&&(u=rs(n,s,Ew)),__DEV__?W(u!==void 0,"Missing field '".concat(s.join("."),"' while extracting keyFields from ").concat(JSON.stringify(n))):W(u!==void 0,2),u});return"".concat(r.typename,":").concat(JSON.stringify(a))})}function Yh(e){var t=Gh(e);return t.keyArgsFn||(t.keyArgsFn=function(n,r){var o=r.field,a=r.variables,s=r.fieldName,u=Jh(e,function(c){var m=c[0],me=m.charAt(0);if(me==="@"){if(o&&Hr(o.directives)){var xe=m.slice(1),Ne=o.directives.find(function(vn){return vn.name.value===xe}),He=Ne&&gi(Ne,a);return He&&rs(He,c.slice(1))}return}if(me==="$"){var Ye=m.slice(1);if(a&&Mt.call(a,Ye)){var Je=c.slice(0);return Je[0]=Ye,rs(a,Je)}return}if(n)return rs(n,c)}),l=JSON.stringify(u);return(n||l!=="{}")&&(s+=":"+l),s})}function Jh(e,t){var n=new zn;return Sw(e).reduce(function(r,o){var a,s=t(o);if(s!==void 0){for(var u=o.length-1;u>=0;--u)s=(a={},a[o[u]]=s,a);r=n.merge(r,s)}return r},Object.create(null))}function Sw(e){var t=Gh(e);if(!t.paths){var n=t.paths=[],r=[];e.forEach(function(o,a){dt(o)?(Sw(o).forEach(function(s){return n.push(r.concat(s))}),r.length=0):(r.push(o),dt(e[a+1])||(n.push(r.slice(0)),r.length=0))})}return t.paths}function Ew(e,t){return e[t]}function rs(e,t,n){return n=n||Ew,kw(t.reduce(function r(o,a){return dt(o)?o.map(function(s){return r(s,a)}):o&&n(o,a)},e))}function kw(e){return Fe(e)?dt(e)?e.map(kw):Jh(Object.keys(e).sort(),function(t){return rs(e,t)}):e}xu.setStringify(Kr);function Xh(e){return e.args!==void 0?e.args:e.field?gi(e.field,e.variables):null}var VM=function(){},Dw=function(e,t){return t.fieldName},Cw=function(e,t,n){var r=n.mergeObjects;return r(e,t)},Ow=function(e,t){return t},Tw=function(){function e(t){this.config=t,this.typePolicies=Object.create(null),this.toBeAdded=Object.create(null),this.supertypeMap=new Map,this.fuzzySubtypes=new Map,this.rootIdsByTypename=Object.create(null),this.rootTypenamesById=Object.create(null),this.usingPossibleTypes=!1,this.config=P({dataIdFromObject:Yc},t),this.cache=this.config.cache,this.setRootTypename("Query"),this.setRootTypename("Mutation"),this.setRootTypename("Subscription"),t.possibleTypes&&this.addPossibleTypes(t.possibleTypes),t.typePolicies&&this.addTypePolicies(t.typePolicies)}return e.prototype.identify=function(t,n){var r,o=this,a=n&&(n.typename||((r=n.storeObject)===null||r===void 0?void 0:r.__typename))||t.__typename;if(a===this.rootTypenamesById.ROOT_QUERY)return["ROOT_QUERY"];for(var s=n&&n.storeObject||t,u=P(P({},n),{typename:a,storeObject:s,readField:n&&n.readField||function(){var xe=rf(arguments,s);return o.readField(xe,{store:o.cache.data,variables:xe.variables})}}),l,c=a&&this.getTypePolicy(a),m=c&&c.keyFn||this.config.dataIdFromObject;m;){var me=m(t,u);if(dt(me))m=Qh(me);else{l=me;break}}return l=l?String(l):void 0,u.keyObject?[l,u.keyObject]:[l]},e.prototype.addTypePolicies=function(t){var n=this;Object.keys(t).forEach(function(r){var o=t[r],a=o.queryType,s=o.mutationType,u=o.subscriptionType,l=Bn(o,["queryType","mutationType","subscriptionType"]);a&&n.setRootTypename("Query",r),s&&n.setRootTypename("Mutation",r),u&&n.setRootTypename("Subscription",r),Mt.call(n.toBeAdded,r)?n.toBeAdded[r].push(l):n.toBeAdded[r]=[l]})},e.prototype.updateTypePolicy=function(t,n){var r=this,o=this.getTypePolicy(t),a=n.keyFields,s=n.fields;function u(l,c){l.merge=typeof c=="function"?c:c===!0?Cw:c===!1?Ow:l.merge}u(o,n.merge),o.keyFn=a===!1?VM:dt(a)?Qh(a):typeof a=="function"?a:o.keyFn,s&&Object.keys(s).forEach(function(l){var c=r.getFieldPolicy(t,l,!0),m=s[l];if(typeof m=="function")c.read=m;else{var me=m.keyArgs,xe=m.read,Ne=m.merge;c.keyFn=me===!1?Dw:dt(me)?Yh(me):typeof me=="function"?me:c.keyFn,typeof xe=="function"&&(c.read=xe),u(c,Ne)}c.read&&c.merge&&(c.keyFn=c.keyFn||Dw)})},e.prototype.setRootTypename=function(t,n){n===void 0&&(n=t);var r="ROOT_"+t.toUpperCase(),o=this.rootTypenamesById[r];n!==o&&(__DEV__?W(!o||o===t,"Cannot change root ".concat(t," __typename more than once")):W(!o||o===t,3),o&&delete this.rootIdsByTypename[o],this.rootIdsByTypename[n]=r,this.rootTypenamesById[r]=n)},e.prototype.addPossibleTypes=function(t){var n=this;this.usingPossibleTypes=!0,Object.keys(t).forEach(function(r){n.getSupertypeSet(r,!0),t[r].forEach(function(o){n.getSupertypeSet(o,!0).add(r);var a=o.match(qh);(!a||a[0]!==o)&&n.fuzzySubtypes.set(o,new RegExp(o))})})},e.prototype.getTypePolicy=function(t){var n=this;if(!Mt.call(this.typePolicies,t)){var r=this.typePolicies[t]=Object.create(null);r.fields=Object.create(null);var o=this.supertypeMap.get(t);o&&o.size&&o.forEach(function(s){var u=n.getTypePolicy(s),l=u.fields,c=Bn(u,["fields"]);Object.assign(r,c),Object.assign(r.fields,l)})}var a=this.toBeAdded[t];return a&&a.length&&a.splice(0).forEach(function(s){n.updateTypePolicy(t,s)}),this.typePolicies[t]},e.prototype.getFieldPolicy=function(t,n,r){if(t){var o=this.getTypePolicy(t).fields;return o[n]||r&&(o[n]=Object.create(null))}},e.prototype.getSupertypeSet=function(t,n){var r=this.supertypeMap.get(t);return!r&&n&&this.supertypeMap.set(t,r=new Set),r},e.prototype.fragmentMatches=function(t,n,r,o){var a=this;if(!t.typeCondition)return!0;if(!n)return!1;var s=t.typeCondition.name.value;if(n===s)return!0;if(this.usingPossibleTypes&&this.supertypeMap.has(s))for(var u=this.getSupertypeSet(n,!0),l=[u],c=function(He){var Ye=a.getSupertypeSet(He,!1);Ye&&Ye.size&&l.indexOf(Ye)<0&&l.push(Ye)},m=!!(r&&this.fuzzySubtypes.size),me=!1,xe=0;xe<l.length;++xe){var Ne=l[xe];if(Ne.has(s))return u.has(s)||(me&&__DEV__&&W.warn("Inferring subtype ".concat(n," of supertype ").concat(s)),u.add(s)),!0;Ne.forEach(c),m&&xe===l.length-1&&Xc(t.selectionSet,r,o)&&(m=!1,me=!0,this.fuzzySubtypes.forEach(function(He,Ye){var Je=n.match(He);Je&&Je[0]===n&&c(Ye)}))}return!1},e.prototype.hasKeyArgs=function(t,n){var r=this.getFieldPolicy(t,n,!1);return!!(r&&r.keyFn)},e.prototype.getStoreFieldName=function(t){var n=t.typename,r=t.fieldName,o=this.getFieldPolicy(n,r,!1),a,s=o&&o.keyFn;if(s&&n)for(var u={typename:n,fieldName:r,field:t.field||null,variables:t.variables},l=Xh(t);s;){var c=s(l,u);if(dt(c))s=Yh(c);else{a=c||r;break}}return a===void 0&&(a=t.field?ch(t.field,t.variables):xu(r,Xh(t))),a===!1?r:r===bn(a)?a:r+":"+a},e.prototype.readField=function(t,n){var r=t.from;if(r){var o=t.field||t.fieldName;if(o){if(t.typename===void 0){var a=n.store.getFieldValue(r,"__typename");a&&(t.typename=a)}var s=this.getStoreFieldName(t),u=bn(s),l=n.store.getFieldValue(r,s),c=this.getFieldPolicy(t.typename,u,!1),m=c&&c.read;if(m){var me=Aw(this,r,t,n,n.store.getStorage(Ie(r)?r.__ref:r,s));return ts.withValue(this.cache,m,[l,me])}return l}}},e.prototype.getReadFunction=function(t,n){var r=this.getFieldPolicy(t,n,!1);return r&&r.read},e.prototype.getMergeFunction=function(t,n,r){var o=this.getFieldPolicy(t,n,!1),a=o&&o.merge;return!a&&r&&(o=this.getTypePolicy(r),a=o&&o.merge),a},e.prototype.runMergeFunction=function(t,n,r,o,a){var s=r.field,u=r.typename,l=r.merge;return l===Cw?Iw(o.store)(t,n):l===Ow?n:(o.overwrite&&(t=void 0),l(t,n,Aw(this,void 0,{typename:u,fieldName:s.name.value,field:s,variables:o.variables},o,a||Object.create(null))))},e}();function Aw(e,t,n,r,o){var a=e.getStoreFieldName(n),s=bn(a),u=n.variables||r.variables,l=r.store,c=l.toReference,m=l.canRead;return{args:Xh(n),field:n.field||null,fieldName:s,storeFieldName:a,variables:u,isReference:Ie,toReference:c,storage:o,cache:e.cache,canRead:m,readField:function(){return e.readField(rf(arguments,t,u),r)},mergeObjects:Iw(r.store)}}function rf(e,t,n){var r=e[0],o=e[1],a=e.length,s;return typeof r=="string"?s={fieldName:r,from:a>1?o:t}:(s=P({},r),Mt.call(s,"from")||(s.from=t)),__DEV__&&s.from===void 0&&__DEV__&&W.warn("Undefined 'from' passed to readField with arguments ".concat(j0(Array.from(e)))),s.variables===void 0&&(s.variables=n),s}function Iw(e){return function(t,n){if(dt(t)||dt(n))throw __DEV__?new Ee("Cannot automatically merge arrays"):new Ee(4);if(Fe(t)&&Fe(n)){var r=e.getFieldValue(t,"__typename"),o=e.getFieldValue(n,"__typename"),a=r&&o&&r!==o;if(a)return n;if(Ie(t)&&Zi(n))return e.merge(t.__ref,n),t;if(Zi(t)&&Ie(n))return e.merge(t,n.__ref),n;if(Zi(t)&&Zi(n))return P(P({},t),n)}return n}}function Zh(e,t,n){var r="".concat(t).concat(n),o=e.flavors.get(r);return o||e.flavors.set(r,o=e.clientOnly===t&&e.deferred===n?e:P(P({},e),{clientOnly:t,deferred:n})),o}var Mw=function(){function e(t,n){this.cache=t,this.reader=n}return e.prototype.writeToStore=function(t,n){var r=this,o=n.query,a=n.result,s=n.dataId,u=n.variables,l=n.overwrite,c=Vn(o),m=hw();u=P(P({},zo(c)),u);var me={store:t,written:Object.create(null),merge:function(Ne,He){return m.merge(Ne,He)},variables:u,varString:Kr(u),fragmentMap:mi(vi(o)),overwrite:!!l,incomingById:new Map,clientOnly:!1,deferred:!1,flavors:new Map},xe=this.processSelectionSet({result:a||Object.create(null),dataId:s,selectionSet:c.selectionSet,mergeTree:{map:new Map},context:me});if(!Ie(xe))throw __DEV__?new Ee("Could not identify object ".concat(JSON.stringify(a))):new Ee(6);return me.incomingById.forEach(function(Ne,He){var Ye=Ne.storeObject,Je=Ne.mergeTree,vn=Ne.fieldNodeSet,La=qn(He);if(Je&&Je.map.size){var sr=r.applyMerges(Je,La,Ye,me);if(Ie(sr))return;Ye=sr}if(__DEV__&&!me.overwrite){var Zr=Object.create(null);vn.forEach(function(Hs){Hs.selectionSet&&(Zr[Hs.name.value]=!0)});var zs=function(Hs){return Zr[bn(Hs)]===!0},za=function(Hs){var lc=Je&&Je.map.get(Hs);return Boolean(lc&&lc.info&&lc.info.merge)};Object.keys(Ye).forEach(function(Hs){zs(Hs)&&!za(Hs)&&zM(La,Ye,Hs,me.store)})}t.merge(He,Ye)}),t.retain(xe.__ref),xe},e.prototype.processSelectionSet=function(t){var n=this,r=t.dataId,o=t.result,a=t.selectionSet,s=t.context,u=t.mergeTree,l=this.cache.policies,c=Object.create(null),m=r&&l.rootTypenamesById[r]||Eu(o,a,s.fragmentMap)||r&&s.store.get(r,"__typename");typeof m=="string"&&(c.__typename=m);var me=function(){var sr=rf(arguments,c,s.variables);if(Ie(sr.from)){var Zr=s.incomingById.get(sr.from.__ref);if(Zr){var zs=l.readField(P(P({},sr),{from:Zr.storeObject}),s);if(zs!==void 0)return zs}}return l.readField(sr,s)},xe=new Set;this.flattenFields(a,o,s,m).forEach(function(sr,Zr){var zs,za=tn(Zr),Hs=o[za];if(xe.add(Zr),Hs!==void 0){var lc=l.getStoreFieldName({typename:m,fieldName:Zr.name.value,field:Zr,variables:sr.variables}),Ty=jw(u,lc),_y=n.processFieldValue(Hs,Zr,Zr.selectionSet?Zh(sr,!1,!1):sr,Ty),xy=void 0;Zr.selectionSet&&(Ie(_y)||Zi(_y))&&(xy=me("__typename",_y));var Bb=l.getMergeFunction(m,Zr.name.value,xy);Bb?Ty.info={field:Zr,typename:m,merge:Bb}:Fw(u,lc),c=sr.merge(c,(zs={},zs[lc]=_y,zs))}else __DEV__&&!sr.clientOnly&&!sr.deferred&&!Uo.added(Zr)&&!l.getReadFunction(m,Zr.name.value)&&__DEV__&&W.error("Missing field '".concat(tn(Zr),"' while writing result ").concat(JSON.stringify(o,null,2)).substring(0,1e3))});try{var Ne=l.identify(o,{typename:m,selectionSet:a,fragmentMap:s.fragmentMap,storeObject:c,readField:me}),He=Ne[0],Ye=Ne[1];r=r||He,Ye&&(c=s.merge(c,Ye))}catch(sr){if(!r)throw sr}if(typeof r=="string"){var Je=qn(r),vn=s.written[r]||(s.written[r]=[]);if(vn.indexOf(a)>=0||(vn.push(a),this.reader&&this.reader.isFresh(o,Je,a,s)))return Je;var La=s.incomingById.get(r);return La?(La.storeObject=s.merge(La.storeObject,c),La.mergeTree=em(La.mergeTree,u),xe.forEach(function(sr){return La.fieldNodeSet.add(sr)})):s.incomingById.set(r,{storeObject:c,mergeTree:nf(u)?void 0:u,fieldNodeSet:xe}),Je}return c},e.prototype.processFieldValue=function(t,n,r,o){var a=this;return!n.selectionSet||t===null?__DEV__?qc(t):t:dt(t)?t.map(function(s,u){var l=a.processFieldValue(s,n,r,jw(o,u));return Fw(o,u),l}):this.processSelectionSet({result:t,selectionSet:n.selectionSet,context:r,mergeTree:o})},e.prototype.flattenFields=function(t,n,r,o){o===void 0&&(o=Eu(n,t,r.fragmentMap));var a=new Map,s=this.cache.policies,u=new Un(!1);return function l(c,m){var me=u.lookup(c,m.clientOnly,m.deferred);me.visited||(me.visited=!0,c.selections.forEach(function(xe){if(hi(xe,r.variables)){var Ne=m.clientOnly,He=m.deferred;if(!(Ne&&He)&&Hr(xe.directives)&&xe.directives.forEach(function(vn){var La=vn.name.value;if(La==="client"&&(Ne=!0),La==="defer"){var sr=gi(vn,r.variables);(!sr||sr.if!==!1)&&(He=!0)}}),Pr(xe)){var Ye=a.get(xe);Ye&&(Ne=Ne&&Ye.clientOnly,He=He&&Ye.deferred),a.set(xe,Zh(r,Ne,He))}else{var Je=qo(xe,r.fragmentMap);Je&&s.fragmentMatches(Je,o,n,r.variables)&&l(Je.selectionSet,Zh(r,Ne,He))}}}))}(t,r),a},e.prototype.applyMerges=function(t,n,r,o,a){var s,u=this;if(t.map.size&&!Ie(r)){var l=!dt(r)&&(Ie(n)||Zi(n))?n:void 0,c=r;l&&!a&&(a=[Ie(l)?l.__ref:l]);var m,me=function(xe,Ne){return dt(xe)?typeof Ne=="number"?xe[Ne]:void 0:o.store.getFieldValue(xe,String(Ne))};t.map.forEach(function(xe,Ne){var He=me(l,Ne),Ye=me(c,Ne);if(Ye!==void 0){a&&a.push(Ne);var Je=u.applyMerges(xe,He,Ye,o,a);Je!==Ye&&(m=m||new Map,m.set(Ne,Je)),a&&W(a.pop()===Ne)}}),m&&(r=dt(c)?c.slice(0):P({},c),m.forEach(function(xe,Ne){r[Ne]=xe}))}return t.info?this.cache.policies.runMergeFunction(n,r,t.info,o,a&&(s=o.store).getStorage.apply(s,a)):r},e}(),Pw=[];function jw(e,t){var n=e.map;return n.has(t)||n.set(t,Pw.pop()||{map:new Map}),n.get(t)}function em(e,t){if(e===t||!t||nf(t))return e;if(!e||nf(e))return t;var n=e.info&&t.info?P(P({},e.info),t.info):e.info||t.info,r=e.map.size&&t.map.size,o=r?new Map:e.map.size?e.map:t.map,a={info:n,map:o};if(r){var s=new Set(t.map.keys());e.map.forEach(function(u,l){a.map.set(l,em(u,t.map.get(l))),s.delete(l)}),s.forEach(function(u){a.map.set(u,em(t.map.get(u),e.map.get(u)))})}return a}function nf(e){return!e||!(e.info||e.map.size)}function Fw(e,t){var n=e.map,r=n.get(t);r&&nf(r)&&(Pw.push(r),n.delete(t))}var Rw=new Set;function zM(e,t,n,r){var o=function(me){var xe=r.getFieldValue(me,n);return typeof xe=="object"&&xe},a=o(e);if(a){var s=o(t);if(!!s&&!Ie(a)&&!xt(a,s)&&!Object.keys(a).every(function(me){return r.getFieldValue(s,me)!==void 0})){var u=r.getFieldValue(e,"__typename")||r.getFieldValue(t,"__typename"),l=bn(n),c="".concat(u,".").concat(l);if(!Rw.has(c)){Rw.add(c);var m=[];!dt(a)&&!dt(s)&&[a,s].forEach(function(me){var xe=r.getFieldValue(me,"__typename");typeof xe=="string"&&!m.includes(xe)&&m.push(xe)}),__DEV__&&W.warn("Cache data may be lost when replacing the ".concat(l," field of a ").concat(u,` object.

To address this problem (which is not a bug in Apollo Client), `).concat(m.length?"either ensure all objects of type "+m.join(" and ")+" have an ID or a custom merge function, or ":"","define a custom merge function for the ").concat(c,` field, so InMemoryCache can safely merge these objects:

  existing: `).concat(JSON.stringify(a).slice(0,1e3),`
  incoming: `).concat(JSON.stringify(s).slice(0,1e3),`

For more information about these options, please refer to the documentation:

  * Ensuring entity objects have IDs: https://go.apollo.dev/c/generating-unique-identifiers
  * Defining custom merge functions: https://go.apollo.dev/c/merging-non-normalized-objects
`))}}}}var of=function(e){Vt(t,e);function t(n){n===void 0&&(n={});var r=e.call(this)||this;return r.watches=new Set,r.typenameDocumentCache=new Map,r.makeVar=tf,r.txCount=0,r.config=pw(n),r.addTypename=!!r.config.addTypename,r.policies=new Tw({cache:r,dataIdFromObject:r.config.dataIdFromObject,possibleTypes:r.config.possibleTypes,typePolicies:r.config.typePolicies}),r.init(),r}return t.prototype.init=function(){var n=this.data=new es.Root({policies:this.policies,resultCaching:this.config.resultCaching});this.optimisticData=n.stump,this.resetResultCache()},t.prototype.resetResultCache=function(n){var r=this,o=this.storeReader;this.storeWriter=new Mw(this,this.storeReader=new _w({cache:this,addTypename:this.addTypename,resultCacheMaxSize:this.config.resultCacheMaxSize,canonizeResults:Jc(this.config),canon:n?void 0:o&&o.canon})),this.maybeBroadcastWatch=Ho(function(a,s){return r.broadcastWatch(a,s)},{max:this.config.resultCacheMaxSize,makeCacheKey:function(a){var s=a.optimistic?r.optimisticData:r.data;if(Ko(s)){var u=a.optimistic,l=a.rootId,c=a.variables;return s.makeCacheKey(a.query,a.callback,Kr({optimistic:u,rootId:l,variables:c}))}}}),new Set([this.data.group,this.optimisticData.group]).forEach(function(a){return a.resetCaching()})},t.prototype.restore=function(n){return this.init(),n&&this.data.replace(n),this},t.prototype.extract=function(n){return n===void 0&&(n=!1),(n?this.optimisticData:this.data).extract()},t.prototype.read=function(n){var r=n.returnPartialData,o=r===void 0?!1:r;try{return this.storeReader.diffQueryAgainstStore(P(P({},n),{store:n.optimistic?this.optimisticData:this.data,config:this.config,returnPartialData:o})).result||null}catch(a){if(a instanceof Fu)return null;throw a}},t.prototype.write=function(n){try{return++this.txCount,this.storeWriter.writeToStore(this.data,n)}finally{!--this.txCount&&n.broadcast!==!1&&this.broadcastWatches()}},t.prototype.modify=function(n){if(Mt.call(n,"id")&&!n.id)return!1;var r=n.optimistic?this.optimisticData:this.data;try{return++this.txCount,r.modify(n.id||"ROOT_QUERY",n.fields)}finally{!--this.txCount&&n.broadcast!==!1&&this.broadcastWatches()}},t.prototype.diff=function(n){return this.storeReader.diffQueryAgainstStore(P(P({},n),{store:n.optimistic?this.optimisticData:this.data,rootId:n.id||"ROOT_QUERY",config:this.config}))},t.prototype.watch=function(n){var r=this;return this.watches.size||ww(this),this.watches.add(n),n.immediate&&this.maybeBroadcastWatch(n),function(){r.watches.delete(n)&&!r.watches.size&&Kh(r),r.maybeBroadcastWatch.forget(n)}},t.prototype.gc=function(n){Kr.reset();var r=this.optimisticData.gc();return n&&!this.txCount&&(n.resetResultCache?this.resetResultCache(n.resetResultIdentities):n.resetResultIdentities&&this.storeReader.resetCanon()),r},t.prototype.retain=function(n,r){return(r?this.optimisticData:this.data).retain(n)},t.prototype.release=function(n,r){return(r?this.optimisticData:this.data).release(n)},t.prototype.identify=function(n){if(Ie(n))return n.__ref;try{return this.policies.identify(n)[0]}catch(r){__DEV__&&W.warn(r)}},t.prototype.evict=function(n){if(!n.id){if(Mt.call(n,"id"))return!1;n=P(P({},n),{id:"ROOT_QUERY"})}try{return++this.txCount,this.optimisticData.evict(n,this.data)}finally{!--this.txCount&&n.broadcast!==!1&&this.broadcastWatches()}},t.prototype.reset=function(n){var r=this;return this.init(),Kr.reset(),n&&n.discardWatches?(this.watches.forEach(function(o){return r.maybeBroadcastWatch.forget(o)}),this.watches.clear(),Kh(this)):this.broadcastWatches(),Promise.resolve()},t.prototype.removeOptimistic=function(n){var r=this.optimisticData.removeLayer(n);r!==this.optimisticData&&(this.optimisticData=r,this.broadcastWatches())},t.prototype.batch=function(n){var r=this,o=n.update,a=n.optimistic,s=a===void 0?!0:a,u=n.removeOptimistic,l=n.onWatchUpdated,c,m=function(xe){var Ne=r,He=Ne.data,Ye=Ne.optimisticData;++r.txCount,xe&&(r.data=r.optimisticData=xe);try{return c=o(r)}finally{--r.txCount,r.data=He,r.optimisticData=Ye}},me=new Set;return l&&!this.txCount&&this.broadcastWatches(P(P({},n),{onWatchUpdated:function(xe){return me.add(xe),!1}})),typeof s=="string"?this.optimisticData=this.optimisticData.addLayer(s,m):s===!1?m(this.data):m(),typeof u=="string"&&(this.optimisticData=this.optimisticData.removeLayer(u)),l&&me.size?(this.broadcastWatches(P(P({},n),{onWatchUpdated:function(xe,Ne){var He=l.call(this,xe,Ne);return He!==!1&&me.delete(xe),He}})),me.size&&me.forEach(function(xe){return r.maybeBroadcastWatch.dirty(xe)})):this.broadcastWatches(n),c},t.prototype.performTransaction=function(n,r){return this.batch({update:n,optimistic:r||r!==null})},t.prototype.transformDocument=function(n){if(this.addTypename){var r=this.typenameDocumentCache.get(n);return r||(r=Uo(n),this.typenameDocumentCache.set(n,r),this.typenameDocumentCache.set(r,r)),r}return n},t.prototype.broadcastWatches=function(n){var r=this;this.txCount||this.watches.forEach(function(o){return r.maybeBroadcastWatch(o,n)})},t.prototype.broadcastWatch=function(n,r){var o=n.lastDiff,a=this.diff(n);r&&(n.optimistic&&typeof r.optimistic=="string"&&(a.fromOptimisticTransaction=!0),r.onWatchUpdated&&r.onWatchUpdated.call(this,n,a,o)===!1)||(!o||!xt(o.result,a.result))&&n.callback(n.lastDiff=a,o)},t}(Bh);v();function Nw(e){return e.hasOwnProperty("graphQLErrors")}var UM=function(e){var t="";if(Hr(e.graphQLErrors)||Hr(e.clientErrors)){var n=(e.graphQLErrors||[]).concat(e.clientErrors||[]);n.forEach(function(r){var o=r?r.message:"Error message not found.";t+="".concat(o,`
`)})}return e.networkError&&(t+="".concat(e.networkError.message,`
`)),t=t.replace(/\n$/,""),t},yi=function(e){Vt(t,e);function t(n){var r=n.graphQLErrors,o=n.clientErrors,a=n.networkError,s=n.errorMessage,u=n.extraInfo,l=e.call(this,s)||this;return l.graphQLErrors=r||[],l.clientErrors=o||[],l.networkError=a||null,l.message=s||UM(l),l.extraInfo=u,l.__proto__=t.prototype,l}return t}(Error);v();v();var Ke;(function(e){e[e.loading=1]="loading",e[e.setVariables=2]="setVariables",e[e.fetchMore=3]="fetchMore",e[e.refetch=4]="refetch",e[e.poll=6]="poll",e[e.ready=7]="ready",e[e.error=8]="error"})(Ke||(Ke={}));function to(e){return e?e<7:!1}var WM=Object.assign,HM=Object.hasOwnProperty,af=function(e){Vt(t,e);function t(n){var r=n.queryManager,o=n.queryInfo,a=n.options,s=e.call(this,function(Je){try{var vn=Je._subscription._observer;vn&&!vn.error&&(vn.error=KM)}catch{}var La=!s.observers.size;s.observers.add(Je);var sr=s.last;return sr&&sr.error?Je.error&&Je.error(sr.error):sr&&sr.result&&Je.next&&Je.next(sr.result),La&&s.reobserve().catch(function(){}),function(){s.observers.delete(Je)&&!s.observers.size&&s.tearDownQuery()}})||this;s.observers=new Set,s.subscriptions=new Set,s.queryInfo=o,s.queryManager=r,s.isTornDown=!1;var u=r.defaultOptions.watchQuery,l=u===void 0?{}:u,c=l.fetchPolicy,m=c===void 0?"cache-first":c,me=a.fetchPolicy,xe=me===void 0?m:me,Ne=a.initialFetchPolicy,He=Ne===void 0?xe==="standby"?m:xe:Ne;s.options=P(P({},a),{initialFetchPolicy:He,fetchPolicy:xe}),s.queryId=o.queryId||r.generateQueryId();var Ye=Vn(s.query);return s.queryName=Ye&&Ye.name&&Ye.name.value,s}return Object.defineProperty(t.prototype,"query",{get:function(){return this.queryManager.transform(this.options.query).document},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"variables",{get:function(){return this.options.variables},enumerable:!1,configurable:!0}),t.prototype.result=function(){var n=this;return new Promise(function(r,o){var a={next:function(u){r(u),n.observers.delete(a),n.observers.size||n.queryManager.removeQuery(n.queryId),setTimeout(function(){s.unsubscribe()},0)},error:o},s=n.subscribe(a)})},t.prototype.getCurrentResult=function(n){n===void 0&&(n=!0);var r=this.getLastResult(!0),o=this.queryInfo.networkStatus||r&&r.networkStatus||Ke.ready,a=P(P({},r),{loading:to(o),networkStatus:o}),s=this.options.fetchPolicy,u=s===void 0?"cache-first":s;if(!(u==="network-only"||u==="no-cache"||u==="standby"||this.queryManager.transform(this.options.query).hasForcedResolvers)){var l=this.queryInfo.getDiff();(l.complete||this.options.returnPartialData)&&(a.data=l.result),xt(a.data,{})&&(a.data=void 0),l.complete?(delete a.partial,l.complete&&a.networkStatus===Ke.loading&&(u==="cache-first"||u==="cache-only")&&(a.networkStatus=Ke.ready,a.loading=!1)):a.partial=!0,__DEV__&&!l.complete&&!this.options.partialRefetch&&!a.loading&&!a.data&&!a.error&&rm(l.missing)}return n&&this.updateLastResult(a),a},t.prototype.isDifferentFromLastResult=function(n){return!this.last||!xt(this.last.result,n)},t.prototype.getLast=function(n,r){var o=this.last;if(o&&o[n]&&(!r||xt(o.variables,this.variables)))return o[n]},t.prototype.getLastResult=function(n){return this.getLast("result",n)},t.prototype.getLastError=function(n){return this.getLast("error",n)},t.prototype.resetLastResults=function(){delete this.last,this.isTornDown=!1},t.prototype.resetQueryStoreErrors=function(){this.queryManager.resetErrors(this.queryId)},t.prototype.refetch=function(n){var r,o={pollInterval:0},a=this.options.fetchPolicy;if(a==="cache-and-network"?o.fetchPolicy=a:a==="no-cache"?o.fetchPolicy="no-cache":o.fetchPolicy="network-only",__DEV__&&n&&HM.call(n,"variables")){var s=Du(this.query),u=s.variableDefinitions;(!u||!u.some(function(l){return l.variable.name.value==="variables"}))&&__DEV__&&W.warn("Called refetch(".concat(JSON.stringify(n),") for query ").concat(((r=s.name)===null||r===void 0?void 0:r.value)||JSON.stringify(s),`, which does not declare a $variables variable.
Did you mean to call refetch(variables) instead of refetch({ variables })?`))}return n&&!xt(this.options.variables,n)&&(o.variables=this.options.variables=P(P({},this.options.variables),n)),this.queryInfo.resetLastWrite(),this.reobserve(o,Ke.refetch)},t.prototype.fetchMore=function(n){var r=this,o=P(P({},n.query?n:P(P(P(P({},this.options),{query:this.query}),n),{variables:P(P({},this.options.variables),n.variables)})),{fetchPolicy:"no-cache"}),a=this.queryManager.generateQueryId(),s=this.queryInfo,u=s.networkStatus;s.networkStatus=Ke.fetchMore,o.notifyOnNetworkStatusChange&&this.observe();var l=new Set;return this.queryManager.fetchQuery(a,o,Ke.fetchMore).then(function(c){return r.queryManager.removeQuery(a),s.networkStatus===Ke.fetchMore&&(s.networkStatus=u),r.queryManager.cache.batch({update:function(m){var me=n.updateQuery;me?m.updateQuery({query:r.query,variables:r.variables,returnPartialData:!0,optimistic:!1},function(xe){return me(xe,{fetchMoreResult:c.data,variables:o.variables})}):m.writeQuery({query:o.query,variables:o.variables,data:c.data})},onWatchUpdated:function(m){l.add(m.query)}}),c}).finally(function(){l.has(r.query)||tm(r)})},t.prototype.subscribeToMore=function(n){var r=this,o=this.queryManager.startGraphQLSubscription({query:n.document,variables:n.variables,context:n.context}).subscribe({next:function(a){var s=n.updateQuery;s&&r.updateQuery(function(u,l){var c=l.variables;return s(u,{subscriptionData:a,variables:c})})},error:function(a){if(n.onError){n.onError(a);return}__DEV__&&W.error("Unhandled GraphQL subscription error",a)}});return this.subscriptions.add(o),function(){r.subscriptions.delete(o)&&o.unsubscribe()}},t.prototype.setOptions=function(n){return this.reobserve(n)},t.prototype.setVariables=function(n){return xt(this.variables,n)?this.observers.size?this.result():Promise.resolve():(this.options.variables=n,this.observers.size?this.reobserve({fetchPolicy:this.options.initialFetchPolicy,variables:n},Ke.setVariables):Promise.resolve())},t.prototype.updateQuery=function(n){var r=this.queryManager,o=r.cache.diff({query:this.options.query,variables:this.variables,returnPartialData:!0,optimistic:!1}).result,a=n(o,{variables:this.variables});a&&(r.cache.writeQuery({query:this.options.query,data:a,variables:this.variables}),r.broadcastQueries())},t.prototype.startPolling=function(n){this.options.pollInterval=n,this.updatePolling()},t.prototype.stopPolling=function(){this.options.pollInterval=0,this.updatePolling()},t.prototype.applyNextFetchPolicy=function(n,r){if(r.nextFetchPolicy){var o=r.fetchPolicy,a=o===void 0?"cache-first":o,s=r.initialFetchPolicy,u=s===void 0?a:s;a==="standby"||(typeof r.nextFetchPolicy=="function"?r.fetchPolicy=r.nextFetchPolicy(a,{reason:n,options:r,observable:this,initialFetchPolicy:u}):n==="variables-changed"?r.fetchPolicy=u:r.fetchPolicy=r.nextFetchPolicy)}return r.fetchPolicy},t.prototype.fetch=function(n,r){return this.queryManager.setObservableQuery(this),this.queryManager.fetchQueryObservable(this.queryId,n,r)},t.prototype.updatePolling=function(){var n=this;if(!this.queryManager.ssrMode){var r=this,o=r.pollingInfo,a=r.options.pollInterval;if(!a){o&&(clearTimeout(o.timeout),delete this.pollingInfo);return}if(!(o&&o.interval===a)){__DEV__?W(a,"Attempted to start a polling query without a polling interval."):W(a,10);var s=o||(this.pollingInfo={});s.interval=a;var u=function(){n.pollingInfo&&(to(n.queryInfo.networkStatus)?l():n.reobserve({fetchPolicy:"network-only"},Ke.poll).then(l,l))},l=function(){var c=n.pollingInfo;c&&(clearTimeout(c.timeout),c.timeout=setTimeout(u,c.interval))};l()}}},t.prototype.updateLastResult=function(n,r){return r===void 0&&(r=this.variables),this.last=P(P({},this.last),{result:this.queryManager.assumeImmutableResults?n:qc(n),variables:r}),Hr(n.errors)||delete this.last.error,this.last},t.prototype.reobserve=function(n,r){var o=this;this.isTornDown=!1;var a=r===Ke.refetch||r===Ke.fetchMore||r===Ke.poll,s=this.options.variables,u=this.options.fetchPolicy,l=Ji(this.options,n||{}),c=a?l:WM(this.options,l);a||(this.updatePolling(),n&&n.variables&&!xt(n.variables,s)&&c.fetchPolicy!=="standby"&&c.fetchPolicy===u&&(this.applyNextFetchPolicy("variables-changed",c),r===void 0&&(r=Ke.setVariables)));var m=c.variables&&P({},c.variables),me=this.fetch(c,r),xe={next:function(Ne){o.reportResult(Ne,m)},error:function(Ne){o.reportError(Ne,m)}};return a||(this.concast&&this.observer&&this.concast.removeObserver(this.observer),this.concast=me,this.observer=xe),me.addObserver(xe),me.promise},t.prototype.observe=function(){this.reportResult(this.getCurrentResult(!1),this.variables)},t.prototype.reportResult=function(n,r){var o=this.getLastError();(o||this.isDifferentFromLastResult(n))&&((o||!n.partial||this.options.returnPartialData)&&this.updateLastResult(n,r),Wo(this.observers,"next",n))},t.prototype.reportError=function(n,r){var o=P(P({},this.getLastResult()),{error:n,errors:n.graphQLErrors,networkStatus:Ke.error,loading:!1});this.updateLastResult(o,r),Wo(this.observers,"error",this.last.error=n)},t.prototype.hasObservers=function(){return this.observers.size>0},t.prototype.tearDownQuery=function(){this.isTornDown||(this.concast&&this.observer&&(this.concast.removeObserver(this.observer),delete this.concast,delete this.observer),this.stopPolling(),this.subscriptions.forEach(function(n){return n.unsubscribe()}),this.subscriptions.clear(),this.queryManager.stopQuery(this.queryId),this.observers.clear(),this.isTornDown=!0)},t}(Oe);zc(af);function tm(e){var t=e.options,n=t.fetchPolicy,r=t.nextFetchPolicy;return n==="cache-and-network"||n==="network-only"?e.reobserve({fetchPolicy:"cache-first",nextFetchPolicy:function(){return this.nextFetchPolicy=r,typeof r=="function"?r.apply(this,arguments):n}}):e.reobserve()}function KM(e){__DEV__&&W.error("Unhandled error",e.message,e.stack)}function rm(e){__DEV__&&e&&__DEV__&&W.debug("Missing cache result fields: ".concat(JSON.stringify(e)),e)}v();var sf=function(){function e(t){var n=t.cache,r=t.client,o=t.resolvers,a=t.fragmentMatcher;this.cache=n,r&&(this.client=r),o&&this.addResolvers(o),a&&this.setFragmentMatcher(a)}return e.prototype.addResolvers=function(t){var n=this;this.resolvers=this.resolvers||{},Array.isArray(t)?t.forEach(function(r){n.resolvers=yh(n.resolvers,r)}):this.resolvers=yh(this.resolvers,t)},e.prototype.setResolvers=function(t){this.resolvers={},this.addResolvers(t)},e.prototype.getResolvers=function(){return this.resolvers||{}},e.prototype.runResolvers=function(t){var n=t.document,r=t.remoteResult,o=t.context,a=t.variables,s=t.onlyRunForcedResolvers,u=s===void 0?!1:s;return pi(this,void 0,void 0,function(){return di(this,function(l){return n?[2,this.resolveDocument(n,r.data,o,a,this.fragmentMatcher,u).then(function(c){return P(P({},r),{data:c.result})})]:[2,r]})})},e.prototype.setFragmentMatcher=function(t){this.fragmentMatcher=t},e.prototype.getFragmentMatcher=function(){return this.fragmentMatcher},e.prototype.clientQuery=function(t){return wu(["client"],t)&&this.resolvers?t:null},e.prototype.serverQuery=function(t){return vh(t)},e.prototype.prepareContext=function(t){var n=this.cache;return P(P({},t),{cache:n,getCacheKey:function(r){return n.identify(r)}})},e.prototype.addExportedVariables=function(t,n,r){return n===void 0&&(n={}),r===void 0&&(r={}),pi(this,void 0,void 0,function(){return di(this,function(o){return t?[2,this.resolveDocument(t,this.buildRootValueFromCache(t,n)||{},this.prepareContext(r),n).then(function(a){return P(P({},n),a.exportedVariables)})]:[2,P({},n)]})})},e.prototype.shouldForceResolvers=function(t){var n=!1;return lr(t,{Directive:{enter:function(r){if(r.name.value==="client"&&r.arguments&&(n=r.arguments.some(function(o){return o.name.value==="always"&&o.value.kind==="BooleanValue"&&o.value.value===!0}),n))return bu}}}),n},e.prototype.buildRootValueFromCache=function(t,n){return this.cache.diff({query:gh(t),variables:n,returnPartialData:!0,optimistic:!1}).result},e.prototype.resolveDocument=function(t,n,r,o,a,s){return r===void 0&&(r={}),o===void 0&&(o={}),a===void 0&&(a=function(){return!0}),s===void 0&&(s=!1),pi(this,void 0,void 0,function(){var u,l,c,m,me,xe,Ne,He,Ye;return di(this,function(Je){return u=Vo(t),l=vi(t),c=mi(l),m=u.operation,me=m?m.charAt(0).toUpperCase()+m.slice(1):"Query",xe=this,Ne=xe.cache,He=xe.client,Ye={fragmentMap:c,context:P(P({},r),{cache:Ne,client:He}),variables:o,fragmentMatcher:a,defaultOperationType:me,exportedVariables:{},onlyRunForcedResolvers:s},[2,this.resolveSelectionSet(u.selectionSet,n,Ye).then(function(vn){return{result:vn,exportedVariables:Ye.exportedVariables}})]})})},e.prototype.resolveSelectionSet=function(t,n,r){return pi(this,void 0,void 0,function(){var o,a,s,u,l,c=this;return di(this,function(m){return o=r.fragmentMap,a=r.context,s=r.variables,u=[n],l=function(me){return pi(c,void 0,void 0,function(){var xe,Ne;return di(this,function(He){return hi(me,s)?Pr(me)?[2,this.resolveField(me,n,r).then(function(Ye){var Je;typeof Ye!="undefined"&&u.push((Je={},Je[tn(me)]=Ye,Je))})]:(ku(me)?xe=me:(xe=o[me.name.value],__DEV__?W(xe,"No fragment named ".concat(me.name.value)):W(xe,9)),xe&&xe.typeCondition&&(Ne=xe.typeCondition.name.value,r.fragmentMatcher(n,Ne,a))?[2,this.resolveSelectionSet(xe.selectionSet,n,r).then(function(Ye){u.push(Ye)})]:[2]):[2]})})},[2,Promise.all(t.selections.map(l)).then(function(){return Cu(u)})]})})},e.prototype.resolveField=function(t,n,r){return pi(this,void 0,void 0,function(){var o,a,s,u,l,c,m,me,xe,Ne=this;return di(this,function(He){return o=r.variables,a=t.name.value,s=tn(t),u=a!==s,l=n[s]||n[a],c=Promise.resolve(l),(!r.onlyRunForcedResolvers||this.shouldForceResolvers(t))&&(m=n.__typename||r.defaultOperationType,me=this.resolvers&&this.resolvers[m],me&&(xe=me[u?a:s],xe&&(c=Promise.resolve(ts.withValue(this.cache,xe,[n,gi(t,o),r.context,{field:t,fragmentMap:r.fragmentMap}]))))),[2,c.then(function(Ye){if(Ye===void 0&&(Ye=l),t.directives&&t.directives.forEach(function(Je){Je.name.value==="export"&&Je.arguments&&Je.arguments.forEach(function(vn){vn.name.value==="as"&&vn.value.kind==="StringValue"&&(r.exportedVariables[vn.value.value]=Ye)})}),!t.selectionSet||Ye==null)return Ye;if(Array.isArray(Ye))return Ne.resolveSubSelectedArray(t,Ye,r);if(t.selectionSet)return Ne.resolveSelectionSet(t.selectionSet,Ye,r)})]})})},e.prototype.resolveSubSelectedArray=function(t,n,r){var o=this;return Promise.all(n.map(function(a){if(a===null)return null;if(Array.isArray(a))return o.resolveSubSelectedArray(t,a,r);if(t.selectionSet)return o.resolveSelectionSet(t.selectionSet,a,r)}))},e}();v();var ns=new(rn?WeakMap:Map);function nm(e,t){var n=e[t];typeof n=="function"&&(e[t]=function(){return ns.set(e,(ns.get(e)+1)%1e15),n.apply(this,arguments)})}function Lw(e){e.notifyTimeout&&(clearTimeout(e.notifyTimeout),e.notifyTimeout=void 0)}var uf=function(){function e(t,n){n===void 0&&(n=t.generateQueryId()),this.queryId=n,this.listeners=new Set,this.document=null,this.lastRequestId=1,this.subscriptions=new Set,this.stopped=!1,this.dirty=!1,this.observableQuery=null;var r=this.cache=t.cache;ns.has(r)||(ns.set(r,0),nm(r,"evict"),nm(r,"modify"),nm(r,"reset"))}return e.prototype.init=function(t){var n=t.networkStatus||Ke.loading;return this.variables&&this.networkStatus!==Ke.loading&&!xt(this.variables,t.variables)&&(n=Ke.setVariables),xt(t.variables,this.variables)||(this.lastDiff=void 0),Object.assign(this,{document:t.document,variables:t.variables,networkError:null,graphQLErrors:this.graphQLErrors||[],networkStatus:n}),t.observableQuery&&this.setObservableQuery(t.observableQuery),t.lastRequestId&&(this.lastRequestId=t.lastRequestId),this},e.prototype.reset=function(){Lw(this),this.lastDiff=void 0,this.dirty=!1},e.prototype.getDiff=function(t){t===void 0&&(t=this.variables);var n=this.getDiffOptions(t);if(this.lastDiff&&xt(n,this.lastDiff.options))return this.lastDiff.diff;this.updateWatch(this.variables=t);var r=this.observableQuery;if(r&&r.options.fetchPolicy==="no-cache")return{complete:!1};var o=this.cache.diff(n);return this.updateLastDiff(o,n),o},e.prototype.updateLastDiff=function(t,n){this.lastDiff=t?{diff:t,options:n||this.getDiffOptions()}:void 0},e.prototype.getDiffOptions=function(t){var n;return t===void 0&&(t=this.variables),{query:this.document,variables:t,returnPartialData:!0,optimistic:!0,canonizeResults:(n=this.observableQuery)===null||n===void 0?void 0:n.options.canonizeResults}},e.prototype.setDiff=function(t){var n=this,r=this.lastDiff&&this.lastDiff.diff;this.updateLastDiff(t),!this.dirty&&!xt(r&&r.result,t&&t.result)&&(this.dirty=!0,this.notifyTimeout||(this.notifyTimeout=setTimeout(function(){return n.notify()},0)))},e.prototype.setObservableQuery=function(t){var n=this;t!==this.observableQuery&&(this.oqListener&&this.listeners.delete(this.oqListener),this.observableQuery=t,t?(t.queryInfo=this,this.listeners.add(this.oqListener=function(){var r=n.getDiff();r.fromOptimisticTransaction?t.observe():tm(t)})):delete this.oqListener)},e.prototype.notify=function(){var t=this;Lw(this),this.shouldNotify()&&this.listeners.forEach(function(n){return n(t)}),this.dirty=!1},e.prototype.shouldNotify=function(){if(!this.dirty||!this.listeners.size)return!1;if(to(this.networkStatus)&&this.observableQuery){var t=this.observableQuery.options.fetchPolicy;if(t!=="cache-only"&&t!=="cache-and-network")return!1}return!0},e.prototype.stop=function(){if(!this.stopped){this.stopped=!0,this.reset(),this.cancel(),this.cancel=e.prototype.cancel,this.subscriptions.forEach(function(n){return n.unsubscribe()});var t=this.observableQuery;t&&t.stopPolling()}},e.prototype.cancel=function(){},e.prototype.updateWatch=function(t){var n=this;t===void 0&&(t=this.variables);var r=this.observableQuery;if(!(r&&r.options.fetchPolicy==="no-cache")){var o=P(P({},this.getDiffOptions(t)),{watcher:this,callback:function(a){return n.setDiff(a)}});(!this.lastWatch||!xt(o,this.lastWatch))&&(this.cancel(),this.cancel=this.cache.watch(this.lastWatch=o))}},e.prototype.resetLastWrite=function(){this.lastWrite=void 0},e.prototype.shouldWrite=function(t,n){var r=this.lastWrite;return!(r&&r.dmCount===ns.get(this.cache)&&xt(n,r.variables)&&xt(t.data,r.result.data))},e.prototype.markResult=function(t,n,r){var o=this;this.graphQLErrors=Hr(t.errors)?t.errors:[],this.reset(),n.fetchPolicy==="no-cache"?this.updateLastDiff({result:t.data,complete:!0},this.getDiffOptions(n.variables)):r!==0&&(lf(t,n.errorPolicy)?this.cache.performTransaction(function(a){if(o.shouldWrite(t,n.variables))a.writeQuery({query:o.document,data:t.data,variables:n.variables,overwrite:r===1}),o.lastWrite={result:t,variables:n.variables,dmCount:ns.get(o.cache)};else if(o.lastDiff&&o.lastDiff.diff.complete){t.data=o.lastDiff.diff.result;return}var s=o.getDiffOptions(n.variables),u=a.diff(s);o.stopped||o.updateWatch(n.variables),o.updateLastDiff(u,s),u.complete&&(t.data=u.result)}):this.lastWrite=void 0)},e.prototype.markReady=function(){return this.networkError=null,this.networkStatus=Ke.ready},e.prototype.markError=function(t){return this.networkStatus=Ke.error,this.lastWrite=void 0,this.reset(),t.graphQLErrors&&(this.graphQLErrors=t.graphQLErrors),t.networkError&&(this.networkError=t.networkError),t},e}();function lf(e,t){t===void 0&&(t="none");var n=t==="ignore"||t==="all",r=!Ya(e);return!r&&n&&e.data&&(r=!0),r}var GM=Object.prototype.hasOwnProperty,$w=function(){function e(t){var n=t.cache,r=t.link,o=t.defaultOptions,a=t.queryDeduplication,s=a===void 0?!1:a,u=t.onBroadcast,l=t.ssrMode,c=l===void 0?!1:l,m=t.clientAwareness,me=m===void 0?{}:m,xe=t.localState,Ne=t.assumeImmutableResults;this.clientAwareness={},this.queries=new Map,this.fetchCancelFns=new Map,this.transformCache=new(rn?WeakMap:Map),this.queryIdCounter=1,this.requestIdCounter=1,this.mutationIdCounter=1,this.inFlightLinkObservables=new Map,this.cache=n,this.link=r,this.defaultOptions=o||Object.create(null),this.queryDeduplication=s,this.clientAwareness=me,this.localState=xe||new sf({cache:n}),this.ssrMode=c,this.assumeImmutableResults=!!Ne,(this.onBroadcast=u)&&(this.mutationStore=Object.create(null))}return e.prototype.stop=function(){var t=this;this.queries.forEach(function(n,r){t.stopQueryNoBroadcast(r)}),this.cancelPendingFetches(__DEV__?new Ee("QueryManager stopped while query was in flight"):new Ee(11))},e.prototype.cancelPendingFetches=function(t){this.fetchCancelFns.forEach(function(n){return n(t)}),this.fetchCancelFns.clear()},e.prototype.mutate=function(t){var n,r,o=t.mutation,a=t.variables,s=t.optimisticResponse,u=t.updateQueries,l=t.refetchQueries,c=l===void 0?[]:l,m=t.awaitRefetchQueries,me=m===void 0?!1:m,xe=t.update,Ne=t.onQueryUpdated,He=t.fetchPolicy,Ye=He===void 0?((n=this.defaultOptions.mutate)===null||n===void 0?void 0:n.fetchPolicy)||"network-only":He,Je=t.errorPolicy,vn=Je===void 0?((r=this.defaultOptions.mutate)===null||r===void 0?void 0:r.errorPolicy)||"none":Je,La=t.keepRootFields,sr=t.context;return pi(this,void 0,void 0,function(){var Zr,zs,za;return di(this,function(Hs){switch(Hs.label){case 0:return __DEV__?W(o,"mutation option is required. You must specify your GraphQL document in the mutation option."):W(o,12),__DEV__?W(Ye==="network-only"||Ye==="no-cache","Mutations support only 'network-only' or 'no-cache' fetchPolicy strings. The default `network-only` behavior automatically writes mutation results to the cache. Passing `no-cache` skips the cache write."):W(Ye==="network-only"||Ye==="no-cache",13),Zr=this.generateMutationId(),o=this.transform(o).document,a=this.getVariables(o,a),this.transform(o).hasClientExports?[4,this.localState.addExportedVariables(o,a,sr)]:[3,2];case 1:a=Hs.sent(),Hs.label=2;case 2:return zs=this.mutationStore&&(this.mutationStore[Zr]={mutation:o,variables:a,loading:!0,error:null}),s&&this.markMutationOptimistic(s,{mutationId:Zr,document:o,variables:a,fetchPolicy:Ye,errorPolicy:vn,context:sr,updateQueries:u,update:xe,keepRootFields:La}),this.broadcastQueries(),za=this,[2,new Promise(function(lc,Ty){return Vc(za.getObservableFromLink(o,P(P({},sr),{optimisticResponse:s}),a,!1),function(_y){if(Ya(_y)&&vn==="none")throw new yi({graphQLErrors:_y.errors});zs&&(zs.loading=!1,zs.error=null);var xy=P({},_y);return typeof c=="function"&&(c=c(xy)),vn==="ignore"&&Ya(xy)&&delete xy.errors,za.markMutationResult({mutationId:Zr,result:xy,document:o,variables:a,fetchPolicy:Ye,errorPolicy:vn,context:sr,update:xe,updateQueries:u,awaitRefetchQueries:me,refetchQueries:c,removeOptimistic:s?Zr:void 0,onQueryUpdated:Ne,keepRootFields:La})}).subscribe({next:function(_y){za.broadcastQueries(),lc(_y)},error:function(_y){zs&&(zs.loading=!1,zs.error=_y),s&&za.cache.removeOptimistic(Zr),za.broadcastQueries(),Ty(_y instanceof yi?_y:new yi({networkError:_y}))}})})]}})})},e.prototype.markMutationResult=function(t,n){var r=this;n===void 0&&(n=this.cache);var o=t.result,a=[],s=t.fetchPolicy==="no-cache";if(!s&&lf(o,t.errorPolicy)){a.push({result:o.data,dataId:"ROOT_MUTATION",query:t.document,variables:t.variables});var u=t.updateQueries;u&&this.queries.forEach(function(c,m){var me=c.observableQuery,xe=me&&me.queryName;if(!(!xe||!GM.call(u,xe))){var Ne=u[xe],He=r.queries.get(m),Ye=He.document,Je=He.variables,vn=n.diff({query:Ye,variables:Je,returnPartialData:!0,optimistic:!1}),La=vn.result,sr=vn.complete;if(sr&&La){var Zr=Ne(La,{mutationResult:o,queryName:Ye&&Ha(Ye)||void 0,queryVariables:Je});Zr&&a.push({result:Zr,dataId:"ROOT_QUERY",query:Ye,variables:Je})}}})}if(a.length>0||t.refetchQueries||t.update||t.onQueryUpdated||t.removeOptimistic){var l=[];if(this.refetchQueries({updateCache:function(c){s||a.forEach(function(xe){return c.write(xe)});var m=t.update;if(m){if(!s){var me=c.diff({id:"ROOT_MUTATION",query:r.transform(t.document).asQuery,variables:t.variables,optimistic:!1,returnPartialData:!0});me.complete&&(o=P(P({},o),{data:me.result}))}m(c,o,{context:t.context,variables:t.variables})}!s&&!t.keepRootFields&&c.modify({id:"ROOT_MUTATION",fields:function(xe,Ne){var He=Ne.fieldName,Ye=Ne.DELETE;return He==="__typename"?xe:Ye}})},include:t.refetchQueries,optimistic:!1,removeOptimistic:t.removeOptimistic,onQueryUpdated:t.onQueryUpdated||null}).forEach(function(c){return l.push(c)}),t.awaitRefetchQueries||t.onQueryUpdated)return Promise.all(l).then(function(){return o})}return Promise.resolve(o)},e.prototype.markMutationOptimistic=function(t,n){var r=this,o=typeof t=="function"?t(n.variables):t;return this.cache.recordOptimisticTransaction(function(a){try{r.markMutationResult(P(P({},n),{result:{data:o}}),a)}catch(s){__DEV__&&W.error(s)}},n.mutationId)},e.prototype.fetchQuery=function(t,n,r){return this.fetchQueryObservable(t,n,r).promise},e.prototype.getQueryStore=function(){var t=Object.create(null);return this.queries.forEach(function(n,r){t[r]={variables:n.variables,networkStatus:n.networkStatus,networkError:n.networkError,graphQLErrors:n.graphQLErrors}}),t},e.prototype.resetErrors=function(t){var n=this.queries.get(t);n&&(n.networkError=void 0,n.graphQLErrors=[])},e.prototype.transform=function(t){var n=this.transformCache;if(!n.has(t)){var r=this.cache.transformDocument(t),o=mh(this.cache.transformForLink(r)),a=this.localState.clientQuery(r),s=o&&this.localState.serverQuery(o),u={document:r,hasClientExports:sh(r),hasForcedResolvers:this.localState.shouldForceResolvers(r),clientQuery:a,serverQuery:s,defaultVars:zo(Vn(r)),asQuery:P(P({},r),{definitions:r.definitions.map(function(c){return c.kind==="OperationDefinition"&&c.operation!=="query"?P(P({},c),{operation:"query"}):c})})},l=function(c){c&&!n.has(c)&&n.set(c,u)};l(t),l(r),l(a),l(s)}return n.get(t)},e.prototype.getVariables=function(t,n){return P(P({},this.transform(t).defaultVars),n)},e.prototype.watchQuery=function(t){t=P(P({},t),{variables:this.getVariables(t.query,t.variables)}),typeof t.notifyOnNetworkStatusChange=="undefined"&&(t.notifyOnNetworkStatusChange=!1);var n=new uf(this),r=new af({queryManager:this,queryInfo:n,options:t});return this.queries.set(r.queryId,n),n.init({document:r.query,observableQuery:r,variables:r.variables}),r},e.prototype.query=function(t,n){var r=this;return n===void 0&&(n=this.generateQueryId()),__DEV__?W(t.query,"query option is required. You must specify your GraphQL document in the query option."):W(t.query,14),__DEV__?W(t.query.kind==="Document",'You must wrap the query string in a "gql" tag.'):W(t.query.kind==="Document",15),__DEV__?W(!t.returnPartialData,"returnPartialData option only supported on watchQuery."):W(!t.returnPartialData,16),__DEV__?W(!t.pollInterval,"pollInterval option only supported on watchQuery."):W(!t.pollInterval,17),this.fetchQuery(n,t).finally(function(){return r.stopQuery(n)})},e.prototype.generateQueryId=function(){return String(this.queryIdCounter++)},e.prototype.generateRequestId=function(){return this.requestIdCounter++},e.prototype.generateMutationId=function(){return String(this.mutationIdCounter++)},e.prototype.stopQueryInStore=function(t){this.stopQueryInStoreNoBroadcast(t),this.broadcastQueries()},e.prototype.stopQueryInStoreNoBroadcast=function(t){var n=this.queries.get(t);n&&n.stop()},e.prototype.clearStore=function(t){return t===void 0&&(t={discardWatches:!0}),this.cancelPendingFetches(__DEV__?new Ee("Store reset while query was in flight (not completed in link chain)"):new Ee(18)),this.queries.forEach(function(n){n.observableQuery?n.networkStatus=Ke.loading:n.stop()}),this.mutationStore&&(this.mutationStore=Object.create(null)),this.cache.reset(t)},e.prototype.getObservableQueries=function(t){var n=this;t===void 0&&(t="active");var r=new Map,o=new Map,a=new Set;return Array.isArray(t)&&t.forEach(function(s){typeof s=="string"?o.set(s,!1):lh(s)?o.set(n.transform(s).document,!1):Fe(s)&&s.query&&a.add(s)}),this.queries.forEach(function(s,u){var l=s.observableQuery,c=s.document;if(l){if(t==="all"){r.set(u,l);return}var m=l.queryName,me=l.options.fetchPolicy;if(me==="standby"||t==="active"&&!l.hasObservers())return;(t==="active"||m&&o.has(m)||c&&o.has(c))&&(r.set(u,l),m&&o.set(m,!0),c&&o.set(c,!0))}}),a.size&&a.forEach(function(s){var u=Au("legacyOneTimeQuery"),l=n.getQuery(u).init({document:s.query,variables:s.variables}),c=new af({queryManager:n,queryInfo:l,options:P(P({},s),{fetchPolicy:"network-only"})});W(c.queryId===u),l.setObservableQuery(c),r.set(u,c)}),__DEV__&&o.size&&o.forEach(function(s,u){s||__DEV__&&W.warn("Unknown query ".concat(typeof u=="string"?"named ":"").concat(JSON.stringify(u,null,2)," requested in refetchQueries options.include array"))}),r},e.prototype.reFetchObservableQueries=function(t){var n=this;t===void 0&&(t=!1);var r=[];return this.getObservableQueries(t?"all":"active").forEach(function(o,a){var s=o.options.fetchPolicy;o.resetLastResults(),(t||s!=="standby"&&s!=="cache-only")&&r.push(o.refetch()),n.getQuery(a).setDiff(null)}),this.broadcastQueries(),Promise.all(r)},e.prototype.setObservableQuery=function(t){this.getQuery(t.queryId).setObservableQuery(t)},e.prototype.startGraphQLSubscription=function(t){var n=this,r=t.query,o=t.fetchPolicy,a=t.errorPolicy,s=t.variables,u=t.context,l=u===void 0?{}:u;r=this.transform(r).document,s=this.getVariables(r,s);var c=function(me){return n.getObservableFromLink(r,l,me).map(function(xe){if(o!=="no-cache"&&(lf(xe,a)&&n.cache.write({query:r,result:xe.data,dataId:"ROOT_SUBSCRIPTION",variables:me}),n.broadcastQueries()),Ya(xe))throw new yi({graphQLErrors:xe.errors});return xe})};if(this.transform(r).hasClientExports){var m=this.localState.addExportedVariables(r,s,l).then(c);return new Oe(function(me){var xe=null;return m.then(function(Ne){return xe=Ne.subscribe(me)},me.error),function(){return xe&&xe.unsubscribe()}})}return c(s)},e.prototype.stopQuery=function(t){this.stopQueryNoBroadcast(t),this.broadcastQueries()},e.prototype.stopQueryNoBroadcast=function(t){this.stopQueryInStoreNoBroadcast(t),this.removeQuery(t)},e.prototype.removeQuery=function(t){this.fetchCancelFns.delete(t),this.queries.has(t)&&(this.getQuery(t).stop(),this.queries.delete(t))},e.prototype.broadcastQueries=function(){this.onBroadcast&&this.onBroadcast(),this.queries.forEach(function(t){return t.notify()})},e.prototype.getLocalState=function(){return this.localState},e.prototype.getObservableFromLink=function(t,n,r,o){var a=this,s;o===void 0&&(o=(s=n==null?void 0:n.queryDeduplication)!==null&&s!==void 0?s:this.queryDeduplication);var u,l=this.transform(t).serverQuery;if(l){var c=this,m=c.inFlightLinkObservables,me=c.link,xe={query:l,variables:r,operationName:Ha(l)||void 0,context:this.prepareContext(P(P({},n),{forceFetch:!o}))};if(n=xe.context,o){var Ne=m.get(l)||new Map;m.set(l,Ne);var He=Kr(r);if(u=Ne.get(He),!u){var Ye=new Qa([Ja(me,xe)]);Ne.set(He,u=Ye),Ye.cleanup(function(){Ne.delete(He)&&Ne.size<1&&m.delete(l)})}}else u=new Qa([Ja(me,xe)])}else u=new Qa([Oe.of({data:{}})]),n=this.prepareContext(n);var Je=this.transform(t).clientQuery;return Je&&(u=Vc(u,function(vn){return a.localState.runResolvers({document:Je,remoteResult:vn,context:n,variables:r})})),u},e.prototype.getResultsFromLink=function(t,n,r){var o=t.lastRequestId=this.generateRequestId();return Vc(this.getObservableFromLink(t.document,r.context,r.variables),function(a){var s=Hr(a.errors);if(o>=t.lastRequestId){if(s&&r.errorPolicy==="none")throw t.markError(new yi({graphQLErrors:a.errors}));t.markResult(a,r,n),t.markReady()}var u={data:a.data,loading:!1,networkStatus:Ke.ready};return s&&r.errorPolicy!=="ignore"&&(u.errors=a.errors,u.networkStatus=Ke.error),u},function(a){var s=Nw(a)?a:new yi({networkError:a});throw o>=t.lastRequestId&&t.markError(s),s})},e.prototype.fetchQueryObservable=function(t,n,r){var o=this;r===void 0&&(r=Ke.loading);var a=this.transform(n.query).document,s=this.getVariables(a,n.variables),u=this.getQuery(t),l=this.defaultOptions.watchQuery,c=n.fetchPolicy,m=c===void 0?l&&l.fetchPolicy||"cache-first":c,me=n.errorPolicy,xe=me===void 0?l&&l.errorPolicy||"none":me,Ne=n.returnPartialData,He=Ne===void 0?!1:Ne,Ye=n.notifyOnNetworkStatusChange,Je=Ye===void 0?!1:Ye,vn=n.context,La=vn===void 0?{}:vn,sr=Object.assign({},n,{query:a,variables:s,fetchPolicy:m,errorPolicy:xe,returnPartialData:He,notifyOnNetworkStatusChange:Je,context:La}),Zr=function(Hs){sr.variables=Hs;var lc=o.fetchQueryByPolicy(u,sr,r);return sr.fetchPolicy!=="standby"&&lc.length>0&&u.observableQuery&&u.observableQuery.applyNextFetchPolicy("after-fetch",n),lc},zs=function(){return o.fetchCancelFns.delete(t)};this.fetchCancelFns.set(t,function(Hs){zs(),setTimeout(function(){return za.cancel(Hs)})});var za=new Qa(this.transform(sr.query).hasClientExports?this.localState.addExportedVariables(sr.query,sr.variables,sr.context).then(Zr):Zr(sr.variables));return za.promise.then(zs,zs),za},e.prototype.refetchQueries=function(t){var n=this,r=t.updateCache,o=t.include,a=t.optimistic,s=a===void 0?!1:a,u=t.removeOptimistic,l=u===void 0?s?Au("refetchQueries"):void 0:u,c=t.onQueryUpdated,m=new Map;o&&this.getObservableQueries(o).forEach(function(xe,Ne){m.set(Ne,{oq:xe,lastDiff:n.getQuery(Ne).getDiff()})});var me=new Map;return r&&this.cache.batch({update:r,optimistic:s&&l||!1,removeOptimistic:l,onWatchUpdated:function(xe,Ne,He){var Ye=xe.watcher instanceof uf&&xe.watcher.observableQuery;if(Ye){if(c){m.delete(Ye.queryId);var Je=c(Ye,Ne,He);return Je===!0&&(Je=Ye.refetch()),Je!==!1&&me.set(Ye,Je),Je}c!==null&&m.set(Ye.queryId,{oq:Ye,lastDiff:He,diff:Ne})}}}),m.size&&m.forEach(function(xe,Ne){var He=xe.oq,Ye=xe.lastDiff,Je=xe.diff,vn;if(c){if(!Je){var La=He.queryInfo;La.reset(),Je=La.getDiff()}vn=c(He,Je,Ye)}(!c||vn===!0)&&(vn=He.refetch()),vn!==!1&&me.set(He,vn),Ne.indexOf("legacyOneTimeQuery")>=0&&n.stopQueryNoBroadcast(Ne)}),l&&this.cache.removeOptimistic(l),me},e.prototype.fetchQueryByPolicy=function(t,n,r){var o=this,a=n.query,s=n.variables,u=n.fetchPolicy,l=n.refetchWritePolicy,c=n.errorPolicy,m=n.returnPartialData,me=n.context,xe=n.notifyOnNetworkStatusChange,Ne=t.networkStatus;t.init({document:this.transform(a).document,variables:s,networkStatus:r});var He=function(){return t.getDiff(s)},Ye=function(Zr,zs){zs===void 0&&(zs=t.networkStatus||Ke.loading);var za=Zr.result;__DEV__&&!m&&!xt(za,{})&&rm(Zr.missing);var Hs=function(lc){return Oe.of(P({data:lc,loading:to(zs),networkStatus:zs},Zr.complete?null:{partial:!0}))};return za&&o.transform(a).hasForcedResolvers?o.localState.runResolvers({document:a,remoteResult:{data:za},context:me,variables:s,onlyRunForcedResolvers:!0}).then(function(lc){return Hs(lc.data||void 0)}):Hs(za)},Je=u==="no-cache"?0:r===Ke.refetch&&l!=="merge"?1:2,vn=function(){return o.getResultsFromLink(t,Je,{variables:s,context:me,fetchPolicy:u,errorPolicy:c})},La=xe&&typeof Ne=="number"&&Ne!==r&&to(r);switch(u){default:case"cache-first":{var sr=He();return sr.complete?[Ye(sr,t.markReady())]:m||La?[Ye(sr),vn()]:[vn()]}case"cache-and-network":{var sr=He();return sr.complete||m||La?[Ye(sr),vn()]:[vn()]}case"cache-only":return[Ye(He(),t.markReady())];case"network-only":return La?[Ye(He()),vn()]:[vn()];case"no-cache":return La?[Ye(t.getDiff()),vn()]:[vn()];case"standby":return[]}},e.prototype.getQuery=function(t){return t&&!this.queries.has(t)&&this.queries.set(t,new uf(this,t)),this.queries.get(t)},e.prototype.prepareContext=function(t){t===void 0&&(t={});var n=this.localState.prepareContext(t);return P(P({},n),{clientAwareness:this.clientAwareness})},e}(),Bw=!1,im=function(){function e(t){var n=this;this.resetStoreCallbacks=[],this.clearStoreCallbacks=[];var r=t.uri,o=t.credentials,a=t.headers,s=t.cache,u=t.ssrMode,l=u===void 0?!1:u,c=t.ssrForceFetchDelay,m=c===void 0?0:c,me=t.connectToDevTools,xe=me===void 0?typeof window=="object"&&!window.__APOLLO_CLIENT__&&__DEV__:me,Ne=t.queryDeduplication,He=Ne===void 0?!0:Ne,Ye=t.defaultOptions,Je=t.assumeImmutableResults,vn=Je===void 0?!1:Je,La=t.resolvers,sr=t.typeDefs,Zr=t.fragmentMatcher,zs=t.name,za=t.version,Hs=t.link;if(Hs||(Hs=r?new Ih({uri:r,credentials:o,headers:a}):nn.empty()),!s)throw __DEV__?new Ee(`To initialize Apollo Client, you must specify a 'cache' property in the options object. 
For more information, please visit: https://go.apollo.dev/c/docs`):new Ee(7);if(this.link=Hs,this.cache=s,this.disableNetworkFetches=l||m>0,this.queryDeduplication=He,this.defaultOptions=Ye||Object.create(null),this.typeDefs=sr,m&&setTimeout(function(){return n.disableNetworkFetches=!1},m),this.watchQuery=this.watchQuery.bind(this),this.query=this.query.bind(this),this.mutate=this.mutate.bind(this),this.resetStore=this.resetStore.bind(this),this.reFetchObservableQueries=this.reFetchObservableQueries.bind(this),xe&&typeof window=="object"&&(window.__APOLLO_CLIENT__=this),!Bw&&__DEV__&&(Bw=!0,typeof window!="undefined"&&window.document&&window.top===window.self&&!window.__APOLLO_DEVTOOLS_GLOBAL_HOOK__)){var lc=window.navigator,Ty=lc&&lc.userAgent,_y=void 0;typeof Ty=="string"&&(Ty.indexOf("Chrome/")>-1?_y="https://chrome.google.com/webstore/detail/apollo-client-developer-t/jdkknkkbebbapilgoeccciglkfbmbnfm":Ty.indexOf("Firefox/")>-1&&(_y="https://addons.mozilla.org/en-US/firefox/addon/apollo-developer-tools/")),_y&&__DEV__&&W.log("Download the Apollo DevTools for a better development experience: "+_y)}this.version=R0,this.localState=new sf({cache:s,client:this,resolvers:La,fragmentMatcher:Zr}),this.queryManager=new $w({cache:this.cache,link:this.link,defaultOptions:this.defaultOptions,queryDeduplication:He,ssrMode:l,clientAwareness:{name:zs,version:za},localState:this.localState,assumeImmutableResults:vn,onBroadcast:xe?function(){n.devToolsHookCb&&n.devToolsHookCb({action:{},state:{queries:n.queryManager.getQueryStore(),mutations:n.queryManager.mutationStore||{}},dataWithOptimisticResults:n.cache.extract(!0)})}:void 0})}return e.prototype.stop=function(){this.queryManager.stop()},e.prototype.watchQuery=function(t){return this.defaultOptions.watchQuery&&(t=Iu(this.defaultOptions.watchQuery,t)),this.disableNetworkFetches&&(t.fetchPolicy==="network-only"||t.fetchPolicy==="cache-and-network")&&(t=P(P({},t),{fetchPolicy:"cache-first"})),this.queryManager.watchQuery(t)},e.prototype.query=function(t){return this.defaultOptions.query&&(t=Iu(this.defaultOptions.query,t)),__DEV__?W(t.fetchPolicy!=="cache-and-network","The cache-and-network fetchPolicy does not work with client.query, because client.query can only return a single result. Please use client.watchQuery to receive multiple results from the cache and the network, or consider using a different fetchPolicy, such as cache-first or network-only."):W(t.fetchPolicy!=="cache-and-network",8),this.disableNetworkFetches&&t.fetchPolicy==="network-only"&&(t=P(P({},t),{fetchPolicy:"cache-first"})),this.queryManager.query(t)},e.prototype.mutate=function(t){return this.defaultOptions.mutate&&(t=Iu(this.defaultOptions.mutate,t)),this.queryManager.mutate(t)},e.prototype.subscribe=function(t){return this.queryManager.startGraphQLSubscription(t)},e.prototype.readQuery=function(t,n){return n===void 0&&(n=!1),this.cache.readQuery(t,n)},e.prototype.readFragment=function(t,n){return n===void 0&&(n=!1),this.cache.readFragment(t,n)},e.prototype.writeQuery=function(t){this.cache.writeQuery(t),this.queryManager.broadcastQueries()},e.prototype.writeFragment=function(t){this.cache.writeFragment(t),this.queryManager.broadcastQueries()},e.prototype.__actionHookForDevTools=function(t){this.devToolsHookCb=t},e.prototype.__requestRaw=function(t){return Ja(this.link,t)},e.prototype.resetStore=function(){var t=this;return Promise.resolve().then(function(){return t.queryManager.clearStore({discardWatches:!1})}).then(function(){return Promise.all(t.resetStoreCallbacks.map(function(n){return n()}))}).then(function(){return t.reFetchObservableQueries()})},e.prototype.clearStore=function(){var t=this;return Promise.resolve().then(function(){return t.queryManager.clearStore({discardWatches:!0})}).then(function(){return Promise.all(t.clearStoreCallbacks.map(function(n){return n()}))})},e.prototype.onResetStore=function(t){var n=this;return this.resetStoreCallbacks.push(t),function(){n.resetStoreCallbacks=n.resetStoreCallbacks.filter(function(r){return r!==t})}},e.prototype.onClearStore=function(t){var n=this;return this.clearStoreCallbacks.push(t),function(){n.clearStoreCallbacks=n.clearStoreCallbacks.filter(function(r){return r!==t})}},e.prototype.reFetchObservableQueries=function(t){return this.queryManager.reFetchObservableQueries(t)},e.prototype.refetchQueries=function(t){var n=this.queryManager.refetchQueries(t),r=[],o=[];n.forEach(function(s,u){r.push(u),o.push(s)});var a=Promise.all(o);return a.queries=r,a.results=o,a.catch(function(s){__DEV__&&W.debug("In client.refetchQueries, Promise.all promise rejected with error ".concat(s))}),a},e.prototype.getObservableQueries=function(t){return t===void 0&&(t="active"),this.queryManager.getObservableQueries(t)},e.prototype.extract=function(t){return this.cache.extract(t)},e.prototype.restore=function(t){return this.cache.restore(t)},e.prototype.addResolvers=function(t){this.localState.addResolvers(t)},e.prototype.setResolvers=function(t){this.localState.setResolvers(t)},e.prototype.getResolvers=function(){return this.localState.getResolvers()},e.prototype.setLocalStateFragmentMatcher=function(t){this.localState.setFragmentMatcher(t)},e.prototype.setLink=function(t){this.link=this.queryManager.link=t},e}();i0(Bo?"log":"silent");v();function QM(e){return Fe(e)&&"code"in e&&"reason"in e}var qw=function(e){Vt(t,e);function t(n){var r=e.call(this)||this;return r.client=n,r}return t.prototype.request=function(n){var r=this;return new Oe(function(o){return r.client.subscribe(P(P({},n),{query:Ua(n.query)}),{next:o.next.bind(o),complete:o.complete.bind(o),error:function(a){return a instanceof Error?o.error(a):QM(a)?o.error(new Error("Socket closed with event ".concat(a.code," ").concat(a.reason||""))):o.error(new yi({graphQLErrors:Array.isArray(a)?a:[a]}))}})})},t}(nn);v();v();v();function jr(e){return e===null?"null":Array.isArray(e)?"array":typeof e}function _i(e){return jr(e)==="object"}function Vw(e){return Array.isArray(e)&&e.length>0&&e.every(t=>"message"in t)}function om(e,t){return e.length<124?e:t}var zw="graphql-transport-ws",Vr;(function(e){e[e.InternalServerError=4500]="InternalServerError",e[e.InternalClientError=4005]="InternalClientError",e[e.BadRequest=4400]="BadRequest",e[e.BadResponse=4004]="BadResponse",e[e.Unauthorized=4401]="Unauthorized",e[e.Forbidden=4403]="Forbidden",e[e.SubprotocolNotAcceptable=4406]="SubprotocolNotAcceptable",e[e.ConnectionInitialisationTimeout=4408]="ConnectionInitialisationTimeout",e[e.ConnectionAcknowledgementTimeout=4504]="ConnectionAcknowledgementTimeout",e[e.SubscriberAlreadyExists=4409]="SubscriberAlreadyExists",e[e.TooManyInitialisationRequests=4429]="TooManyInitialisationRequests"})(Vr||(Vr={}));var Pt;(function(e){e.ConnectionInit="connection_init",e.ConnectionAck="connection_ack",e.Ping="ping",e.Pong="pong",e.Subscribe="subscribe",e.Next="next",e.Error="error",e.Complete="complete"})(Pt||(Pt={}));function am(e){if(!_i(e))throw new Error(`Message is expected to be an object, but got ${jr(e)}`);if(!e.type)throw new Error("Message is missing the 'type' property");if(typeof e.type!="string")throw new Error(`Message is expects the 'type' property to be a string, but got ${jr(e.type)}`);switch(e.type){case Pt.ConnectionInit:case Pt.ConnectionAck:case Pt.Ping:case Pt.Pong:{if("payload"in e&&!_i(e.payload))throw new Error(`"${e.type}" message expects the 'payload' property to be an object or missing, but got "${e.payload}"`);break}case Pt.Subscribe:{if(typeof e.id!="string")throw new Error(`"${e.type}" message expects the 'id' property to be a string, but got ${jr(e.id)}`);if(!e.id)throw new Error(`"${e.type}" message requires a non-empty 'id' property`);if(!_i(e.payload))throw new Error(`"${e.type}" message expects the 'payload' property to be an object, but got ${jr(e.payload)}`);if(typeof e.payload.query!="string")throw new Error(`"${e.type}" message payload expects the 'query' property to be a string, but got ${jr(e.payload.query)}`);if(e.payload.variables!=null&&!_i(e.payload.variables))throw new Error(`"${e.type}" message payload expects the 'variables' property to be a an object or nullish or missing, but got ${jr(e.payload.variables)}`);if(e.payload.operationName!=null&&jr(e.payload.operationName)!=="string")throw new Error(`"${e.type}" message payload expects the 'operationName' property to be a string or nullish or missing, but got ${jr(e.payload.operationName)}`);if(e.payload.extensions!=null&&!_i(e.payload.extensions))throw new Error(`"${e.type}" message payload expects the 'extensions' property to be a an object or nullish or missing, but got ${jr(e.payload.extensions)}`);break}case Pt.Next:{if(typeof e.id!="string")throw new Error(`"${e.type}" message expects the 'id' property to be a string, but got ${jr(e.id)}`);if(!e.id)throw new Error(`"${e.type}" message requires a non-empty 'id' property`);if(!_i(e.payload))throw new Error(`"${e.type}" message expects the 'payload' property to be an object, but got ${jr(e.payload)}`);break}case Pt.Error:{if(typeof e.id!="string")throw new Error(`"${e.type}" message expects the 'id' property to be a string, but got ${jr(e.id)}`);if(!e.id)throw new Error(`"${e.type}" message requires a non-empty 'id' property`);if(!Vw(e.payload))throw new Error(`"${e.type}" message expects the 'payload' property to be an array of GraphQL errors, but got ${JSON.stringify(e.payload)}`);break}case Pt.Complete:{if(typeof e.id!="string")throw new Error(`"${e.type}" message expects the 'id' property to be a string, but got ${jr(e.id)}`);if(!e.id)throw new Error(`"${e.type}" message requires a non-empty 'id' property`);break}default:throw new Error(`Invalid message 'type' property "${e.type}"`)}return e}function Uw(e,t){try{return am(e)}catch{if(typeof e!="string")throw new Error("Only strings are parsable messages");let n=JSON.parse(e,t);return am(n)}}function is(e,t){return am(e),JSON.stringify(e,t)}function Ww(e){let{url:t,connectionParams:n,lazy:r=!0,onNonLazyError:o=console.error,lazyCloseTimeout:a=0,keepAlive:s=0,disablePong:u,connectionAckWaitTimeout:l=0,retryAttempts:c=5,retryWait:m=async function(Dy){let Bg=1e3;for(let yy=0;yy<Dy;yy++)Bg*=2;await new Promise(yy=>setTimeout(yy,Bg+Math.floor(Math.random()*(3e3-300)+300)))},shouldRetry:me=cf,isFatalConnectionProblem:xe,on:Ne,webSocketImpl:He,generateID:Ye=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,Dy=>{let Bg=Math.random()*16|0;return(Dy=="x"?Bg:Bg&3|8).toString(16)})},jsonMessageReplacer:Je,jsonMessageReviver:vn}=e,La;if(He){if(!JM(He))throw new Error("Invalid WebSocket implementation provided");La=He}else typeof WebSocket!="undefined"?La=WebSocket:typeof global!="undefined"?La=global.WebSocket||global.MozWebSocket:typeof window!="undefined"&&(La=window.WebSocket||window.MozWebSocket);if(!La)throw new Error("WebSocket implementation missing; on Node you can `import WebSocket from 'ws';` and pass `webSocketImpl: WebSocket` to `createClient`");let sr=La,Zr=(()=>{let Dy=(()=>{let yy={};return{on(wy,Ay){return yy[wy]=Ay,()=>{delete yy[wy]}},emit(wy){var Ay;"id"in wy&&((Ay=yy[wy.id])===null||Ay===void 0||Ay.call(yy,wy))}}})(),Bg={connecting:Ne!=null&&Ne.connecting?[Ne.connecting]:[],opened:Ne!=null&&Ne.opened?[Ne.opened]:[],connected:Ne!=null&&Ne.connected?[Ne.connected]:[],ping:Ne!=null&&Ne.ping?[Ne.ping]:[],pong:Ne!=null&&Ne.pong?[Ne.pong]:[],message:Ne!=null&&Ne.message?[Dy.emit,Ne.message]:[Dy.emit],closed:Ne!=null&&Ne.closed?[Ne.closed]:[],error:Ne!=null&&Ne.error?[Ne.error]:[]};return{onMessage:Dy.on,on(yy,wy){let Ay=Bg[yy];return Ay.push(wy),()=>{Ay.splice(Ay.indexOf(wy),1)}},emit(yy,...wy){for(let Ay of[...Bg[yy]])Ay(...wy)}}})();function zs(Dy){let Bg=[Zr.on("error",yy=>{Bg.forEach(wy=>wy()),Dy(yy)}),Zr.on("closed",yy=>{Bg.forEach(wy=>wy()),Dy(yy)})]}let za,Hs=0,lc=!1,Ty=0,_y=!1;async function xy(){let[Dy,Bg]=await(za!=null?za:za=new Promise((Ay,$b)=>(async()=>{if(lc){if(await m(Ty),!Hs)return za=void 0,$b({code:1e3,reason:"All Subscriptions Gone"});Ty++}Zr.emit("connecting");let e0=new sr(typeof t=="function"?await t():t,zw),Hb,Yb;function Jb(){isFinite(s)&&s>0&&(clearTimeout(Yb),Yb=setTimeout(()=>{e0.readyState===sr.OPEN&&(e0.send(is({type:Pt.Ping})),Zr.emit("ping",!1,void 0))},s))}zs(y2=>{za=void 0,clearTimeout(Hb),clearTimeout(Yb),$b(y2),cf(y2)&&y2.code===4499&&(e0.close(4499,"Terminated"),e0.onerror=null,e0.onclose=null)}),e0.onerror=y2=>Zr.emit("error",y2),e0.onclose=y2=>Zr.emit("closed",y2),e0.onopen=async()=>{try{Zr.emit("opened",e0);let y2=typeof n=="function"?await n():n;if(e0.readyState!==sr.OPEN)return;e0.send(is(y2?{type:Pt.ConnectionInit,payload:y2}:{type:Pt.ConnectionInit},Je)),isFinite(l)&&l>0&&(Hb=setTimeout(()=>{e0.close(Vr.ConnectionAcknowledgementTimeout,"Connection acknowledgement timeout")},l)),Jb()}catch(y2){Zr.emit("error",y2),e0.close(Vr.InternalClientError,om(y2 instanceof Error?y2.message:new Error(y2).message,"Internal client error"))}};let l2=!1;e0.onmessage=({data:y2})=>{try{let Rb=Uw(y2,vn);if(Zr.emit("message",Rb),Rb.type==="ping"||Rb.type==="pong"){Zr.emit(Rb.type,!0,Rb.payload),Rb.type==="pong"?Jb():u||(e0.send(is(Rb.payload?{type:Pt.Pong,payload:Rb.payload}:{type:Pt.Pong})),Zr.emit("pong",!1,Rb.payload));return}if(l2)return;if(Rb.type!==Pt.ConnectionAck)throw new Error(`First message cannot be of type ${Rb.type}`);clearTimeout(Hb),l2=!0,Zr.emit("connected",e0,Rb.payload),lc=!1,Ty=0,Ay([e0,new Promise((i2,s2)=>zs(s2))])}catch(Rb){e0.onmessage=null,Zr.emit("error",Rb),e0.close(Vr.BadResponse,om(Rb instanceof Error?Rb.message:new Error(Rb).message,"Bad response"))}}})()));Dy.readyState===sr.CLOSING&&await Bg;let yy=()=>{},wy=new Promise(Ay=>yy=Ay);return[Dy,yy,Promise.race([wy.then(()=>{if(!Hs){let Ay=()=>Dy.close(1e3,"Normal Closure");isFinite(a)&&a>0?setTimeout(()=>{!Hs&&Dy.readyState===sr.OPEN&&Ay()},a):Ay()}}),Bg])]}function Bb(Dy){if(cf(Dy)&&(YM(Dy.code)||[Vr.InternalServerError,Vr.InternalClientError,Vr.BadRequest,Vr.BadResponse,Vr.Unauthorized,Vr.SubprotocolNotAcceptable,Vr.SubscriberAlreadyExists,Vr.TooManyInitialisationRequests].includes(Dy.code)))throw Dy;if(_y)return!1;if(cf(Dy)&&Dy.code===1e3)return Hs>0;if(!c||Ty>=c||!me(Dy)||(xe==null?void 0:xe(Dy)))throw Dy;return lc=!0}return r||(async()=>{for(Hs++;;)try{let[,,Dy]=await xy();await Dy}catch(Dy){try{if(!Bb(Dy))return}catch(Bg){return o==null?void 0:o(Bg)}}})(),{on:Zr.on,subscribe(Dy,Bg){let yy=Ye(),wy=!1,Ay=!1,$b=()=>{Hs--,wy=!0};return(async()=>{for(Hs++;;)try{let[e0,Hb,Yb]=await xy();if(wy)return Hb();let Jb=Zr.onMessage(yy,l2=>{switch(l2.type){case Pt.Next:{Bg.next(l2.payload);return}case Pt.Error:{Ay=!0,wy=!0,Bg.error(l2.payload),$b();return}case Pt.Complete:{wy=!0,$b();return}}});e0.send(is({id:yy,type:Pt.Subscribe,payload:Dy},Je)),$b=()=>{!wy&&e0.readyState===sr.OPEN&&e0.send(is({id:yy,type:Pt.Complete},Je)),Hs--,wy=!0,Hb()},await Yb.finally(Jb);return}catch(e0){if(!Bb(e0))return}})().then(()=>{Ay||Bg.complete()}).catch(e0=>{Bg.error(e0)}),()=>{wy||$b()}},async dispose(){if(_y=!0,za){let[Dy]=await za;Dy.close(1e3,"Normal Closure")}},terminate(){za&&Zr.emit("closed",{code:4499,reason:"Terminated",wasClean:!1})}}}function cf(e){return _i(e)&&"code"in e&&"reason"in e}function YM(e){return[1e3,1001,1006,1005,1012,1013,1013].includes(e)?!1:e>=1e3&&e<=1999}function JM(e){return typeof e=="function"&&"constructor"in e&&"CLOSED"in e&&"CLOSING"in e&&"CONNECTING"in e&&"OPEN"in e}function XM(){let e=new qw(Ww({url:localStorage.getItem("ad4minURL"),connectionParams:()=>({headers:{authorization:localStorage.getItem("ad4minToken")||""}})})),t=new im({link:e,cache:new of({resultCaching:!1,addTypename:!1}),defaultOptions:{watchQuery:{fetchPolicy:"no-cache"},query:{fetchPolicy:"no-cache"}}});return new Hw.Ad4mClient(t)}var ZM=XM(),$e=ZM;async function Kw({perspectiveUuid:e,channelId:t,from:n,to:r}){try{let o=await $e.perspective.queryProlog(e,`limit(200, order_by([desc(Timestamp)], flux_message("${t}", MessageExpr, Timestamp, Author, Reactions, Replies))).`),a=[];if(o)for(let s of o){let u=[];if(typeof s.Reactions!="string"){s.Reactions.head&&u.push({content:s.Reactions.head.args[0],timestamp:new Date(s.Reactions.head.args[1].args[0]),author:s.Reactions.head.args[1].args[1]});let c=s.Reactions.tail;for(;typeof c!="string";)u.push({content:c.head.args[0],timestamp:new Date(c.head.args[1].args[0]),author:c.head.args[1].args[1]}),c=c.tail}let l=[];if(typeof s.Replies!="string"){if(s.Replies.head){let m=ff.Literal.fromUrl(s.Replies.head.args[0]).get();l.push({content:m.data,timestamp:new Date(s.Replies.head.args[1].args[0]),author:m.author})}let c=s.Replies.tail;for(;typeof c!="string";){let m=ff.Literal.fromUrl(c.head.args[0]).get();l.push({content:m.data,timestamp:new Date(c.head.args[1].args[0]),author:m.author}),c=c.tail}}a.push({id:s.MessageExpr,author:s.Author,content:ff.Literal.fromUrl(s.MessageExpr).get().data,timestamp:new Date(s.Timestamp),reactions:u,replies:l})}return{keyedMessages:a.reduce((s,u)=>({...s,[u.id]:u}),{}),expressionLinkLength:o.length}}catch(o){throw new Error(o)}}v();var Gw=li($o());v();var pf="ad4m://self",df="flux://has_channel",bi="temp://directly_succeeded_by",as="flux://has_reply",Wn="flux://has_reaction",hf="sioc://has_member";async function Qw({perspectiveUuid:e,lastMessage:t,message:n}){try{let r=await $e.expression.create(n,"literal");await $e.perspective.addLink(e,new Gw.Link({source:t,target:r,predicate:bi}))}catch(r){throw new Error(r)}}v();async function mf({perspectiveUuid:e,added:t,removed:n}){try{let r=await $e.perspective.byUUID(e);return t&&r.addListener("link-added",t),n&&r.addListener("link-removed",n),r}catch(r){throw new Error(r)}}v();v();var Nu={name:e=>e.data.predicate==="rdf://name",description:e=>e.data.predicate==="rdf://description",language:e=>e.data.predicate==="language",dateCreated:e=>e.data.predicate==="rdf://dateCreated"},Go={message:e=>e.data.predicate===bi,reply:e=>e.data.predicate===as,reaction:e=>e.data.predicate===Wn,channel:e=>e.data.predicate===df,member:e=>e.data.predicate===hf};v();var gf="shortform-expression",Yw="group-expression";function eP(e){return $e.languages.meta(e.data.target)}function Jw(e){let t=e.map(n=>eP(n));return Promise.all(t)}function Xw(e){return e.reduce((t,n)=>{let r=n.templateSourceLanguageAddress;return n.name.endsWith(gf)?r=gf:n.name.endsWith(Yw)&&(r=Yw),{...t,[r]:n.address}},{})}async function Lu(e){var a;let t=await $e.perspective.byUUID(e);if(!t||!t.neighbourhood)throw new Error("Could not load meta data from perspective");let n=((a=t.neighbourhood.meta)==null?void 0:a.links)||[],r=n.filter(Nu.language),o=await Jw(r);return{name:n.find(Nu.name).data.target,description:n.find(Nu.description).data.target,languages:Xw(o),url:(t==null?void 0:t.sharedUrl)||"",dateCreated:n.find(Nu.dateCreated).data.target,sourceUrl:t==null?void 0:t.sharedUrl}}v();var sm=li($o());function um(e){try{let t=sm.Literal.fromUrl(e.data.target).get(),n;if(e.data.predicate===as){let r=sm.Literal.fromUrl(e.data.source).get();n={id:e.data.source,timestamp:r.timestamp,url:e.data.source,author:r.author,reactions:[],replies:[],content:r.data}}return{id:e.data.target,timestamp:t.timestamp,url:e.data.target,author:e.author,reactions:[],replies:[n],content:t.data}}catch(t){throw new Error(t)}}v();async function Zw({perspectiveUuid:e,linkExpression:t}){try{await $e.perspective.removeLink(e,t)}catch(n){throw new Error(n)}}v();var ex=li($o());async function tx({perspectiveUuid:e,messageUrl:t,reaction:n}){try{await $e.perspective.addLink(e,new ex.Link({source:t,target:n,predicate:Wn}))}catch(r){throw new Error(r)}}v();var lm=li($o());async function rx({perspectiveUuid:e,replyUrl:t,message:n,channelId:r}){try{let o=await $e.expression.create(n,"literal");await $e.perspective.addLink(e,new lm.Link({source:r,target:o,predicate:bi})),await $e.perspective.addLink(e,new lm.Link({source:t,target:o,predicate:as}))}catch(o){throw new Error(o)}}v();function nx(e,t){return Object.values(e).sort((n,r)=>t==="asc"?new Date(n.timestamp).getTime()-new Date(r.timestamp).getTime():new Date(r.timestamp).getTime()-new Date(n.timestamp).getTime())}v();async function Hn(){try{let e=await $e.agent.me(),t=await $e.agent.status();return{...e,...t}}catch(e){throw new Error(e)}}v();v();var gt=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:global,zt=Object.keys,wr=Array.isArray;typeof Promise!="undefined"&&!gt.Promise&&(gt.Promise=Promise);function Fr(e,t){return typeof t!="object"||zt(t).forEach(function(n){e[n]=t[n]}),e}var $u=Object.getPrototypeOf,tP={}.hasOwnProperty;function on(e,t){return tP.call(e,t)}function ss(e,t){typeof t=="function"&&(t=t($u(e))),(typeof Reflect=="undefined"?zt:Reflect.ownKeys)(t).forEach(n=>{wi(e,n,t[n])})}var ix=Object.defineProperty;function wi(e,t,n,r){ix(e,t,Fr(n&&on(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function us(e){return{from:function(t){return e.prototype=Object.create(t.prototype),wi(e.prototype,"constructor",e),{extend:ss.bind(null,e.prototype)}}}}var rP=Object.getOwnPropertyDescriptor;function cm(e,t){let n=rP(e,t),r;return n||(r=$u(e))&&cm(r,t)}var nP=[].slice;function vf(e,t,n){return nP.call(e,t,n)}function ox(e,t){return t(e)}function Bu(e){if(!e)throw new Error("Assertion Failed")}function ax(e){gt.setImmediate?setImmediate(e):setTimeout(e,0)}function sx(e,t){return e.reduce((n,r,o)=>{var a=t(r,o);return a&&(n[a[0]]=a[1]),n},{})}function iP(e,t,n){try{e.apply(null,n)}catch(r){t&&t(r)}}function xi(e,t){if(on(e,t))return e[t];if(!t)return e;if(typeof t!="string"){for(var n=[],r=0,o=t.length;r<o;++r){var a=xi(e,t[r]);n.push(a)}return n}var s=t.indexOf(".");if(s!==-1){var u=e[t.substr(0,s)];return u===void 0?void 0:xi(u,t.substr(s+1))}}function wn(e,t,n){if(!(!e||t===void 0)&&!("isFrozen"in Object&&Object.isFrozen(e)))if(typeof t!="string"&&"length"in t){Bu(typeof n!="string"&&"length"in n);for(var r=0,o=t.length;r<o;++r)wn(e,t[r],n[r])}else{var a=t.indexOf(".");if(a!==-1){var s=t.substr(0,a),u=t.substr(a+1);if(u==="")n===void 0?wr(e)&&!isNaN(parseInt(s))?e.splice(s,1):delete e[s]:e[s]=n;else{var l=e[s];l||(l=e[s]={}),wn(l,u,n)}}else n===void 0?wr(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function oP(e,t){typeof t=="string"?wn(e,t,void 0):"length"in t&&[].map.call(t,function(n){wn(e,n,void 0)})}function ux(e){var t={};for(var n in e)on(e,n)&&(t[n]=e[n]);return t}var aP=[].concat;function lx(e){return aP.apply([],e)}var cx="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(lx([8,16,32,64].map(e=>["Int","Uint","Float"].map(t=>t+e+"Array")))).filter(e=>gt[e]),sP=cx.map(e=>gt[e]);sx(cx,e=>[e,!0]);var ro=null;function qu(e){ro=typeof WeakMap!="undefined"&&new WeakMap;let t=fm(e);return ro=null,t}function fm(e){if(!e||typeof e!="object")return e;let t=ro&&ro.get(e);if(t)return t;if(wr(e)){t=[],ro&&ro.set(e,t);for(var n=0,r=e.length;n<r;++n)t.push(fm(e[n]))}else if(sP.indexOf(e.constructor)>=0)t=e;else{let a=$u(e);t=a===Object.prototype?{}:Object.create(a),ro&&ro.set(e,t);for(var o in e)on(e,o)&&(t[o]=fm(e[o]))}return t}var{toString:uP}={};function pm(e){return uP.call(e).slice(8,-1)}var dm=typeof Symbol!="undefined"?Symbol.iterator:"@@iterator",lP=typeof dm=="symbol"?function(e){var t;return e!=null&&(t=e[dm])&&t.apply(e)}:function(){return null},ls={};function Si(e){var t,n,r,o;if(arguments.length===1){if(wr(e))return e.slice();if(this===ls&&typeof e=="string")return[e];if(o=lP(e)){for(n=[];r=o.next(),!r.done;)n.push(r.value);return n}if(e==null)return[e];if(t=e.length,typeof t=="number"){for(n=new Array(t);t--;)n[t]=e[t];return n}return[e]}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}var hm=typeof Symbol!="undefined"?e=>e[Symbol.toStringTag]==="AsyncFunction":()=>!1,Kn=typeof location!="undefined"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function fx(e,t){Kn=e,px=t}var px=()=>!0,cP=!new Error("").stack;function Qo(){if(cP)try{throw Qo.arguments,new Error}catch(e){return e}return new Error}function mm(e,t){var n=e.stack;return n?(t=t||0,n.indexOf(e.name)===0&&(t+=(e.name+e.message).split(`
`).length),n.split(`
`).slice(t).filter(px).map(r=>`
`+r).join("")):""}var fP=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"],dx=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],gm=fP.concat(dx),pP={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function cs(e,t){this._e=Qo(),this.name=e,this.message=t}us(cs).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+mm(this._e,2))}},toString:function(){return this.name+": "+this.message}});function hx(e,t){return e+". Errors: "+Object.keys(t).map(n=>t[n].toString()).filter((n,r,o)=>o.indexOf(n)===r).join(`
`)}function yf(e,t,n,r){this._e=Qo(),this.failures=t,this.failedKeys=r,this.successCount=n,this.message=hx(e,t)}us(yf).from(cs);function Vu(e,t){this._e=Qo(),this.name="BulkError",this.failures=Object.keys(t).map(n=>t[n]),this.failuresByPos=t,this.message=hx(e,t)}us(Vu).from(cs);var dP=gm.reduce((e,t)=>(e[t]=t+"Error",e),{}),hP=cs,ge=gm.reduce((e,t)=>{var n=t+"Error";function r(o,a){this._e=Qo(),this.name=n,o?typeof o=="string"?(this.message=`${o}${a?`
 `+a:""}`,this.inner=a||null):typeof o=="object"&&(this.message=`${o.name} ${o.message}`,this.inner=o):(this.message=pP[t]||n,this.inner=null)}return us(r).from(hP),e[t]=r,e},{});ge.Syntax=SyntaxError;ge.Type=TypeError;ge.Range=RangeError;var mx=dx.reduce((e,t)=>(e[t+"Error"]=ge[t],e),{});function mP(e,t){if(!e||e instanceof cs||e instanceof TypeError||e instanceof SyntaxError||!e.name||!mx[e.name])return e;var n=new mx[e.name](t||e.message,e);return"stack"in e&&wi(n,"stack",{get:function(){return this.inner.stack}}),n}var _f=gm.reduce((e,t)=>(["Syntax","Type","Range"].indexOf(t)===-1&&(e[t+"Error"]=ge[t]),e),{});_f.ModifyError=yf;_f.DexieError=cs;_f.BulkError=Vu;function ut(){}function zu(e){return e}function gP(e,t){return e==null||e===zu?t:function(n){return t(e(n))}}function Yo(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function vP(e,t){return e===ut?t:function(){var n=e.apply(this,arguments);n!==void 0&&(arguments[0]=n);var r=this.onsuccess,o=this.onerror;this.onsuccess=null,this.onerror=null;var a=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?Yo(r,this.onsuccess):r),o&&(this.onerror=this.onerror?Yo(o,this.onerror):o),a!==void 0?a:n}}function yP(e,t){return e===ut?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?Yo(n,this.onsuccess):n),r&&(this.onerror=this.onerror?Yo(r,this.onerror):r)}}function _P(e,t){return e===ut?t:function(n){var r=e.apply(this,arguments);Fr(n,r);var o=this.onsuccess,a=this.onerror;this.onsuccess=null,this.onerror=null;var s=t.apply(this,arguments);return o&&(this.onsuccess=this.onsuccess?Yo(o,this.onsuccess):o),a&&(this.onerror=this.onerror?Yo(a,this.onerror):a),r===void 0?s===void 0?void 0:s:Fr(r,s)}}function bP(e,t){return e===ut?t:function(){return t.apply(this,arguments)===!1?!1:e.apply(this,arguments)}}function vm(e,t){return e===ut?t:function(){var n=e.apply(this,arguments);if(n&&typeof n.then=="function"){for(var r=this,o=arguments.length,a=new Array(o);o--;)a[o]=arguments[o];return n.then(function(){return t.apply(r,a)})}return t.apply(this,arguments)}}var Uu={},wP=100,xP=20,gx=100,[ym,bf,_m]=typeof Promise=="undefined"?[]:(()=>{let e=Promise.resolve();if(typeof crypto=="undefined"||!crypto.subtle)return[e,$u(e),e];let t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,$u(t),e]})(),vx=bf&&bf.then,wf=ym&&ym.constructor,bm=!!_m,wm=!1,SP=_m?()=>{_m.then(kf)}:gt.setImmediate?setImmediate.bind(null,kf):gt.MutationObserver?()=>{var e=document.createElement("div");new MutationObserver(()=>{kf(),e=null}).observe(e,{attributes:!0}),e.setAttribute("i","1")}:()=>{setTimeout(kf,0)},Wu=function(e,t){Hu.push([e,t]),xf&&(SP(),xf=!1)},xm=!0,xf=!0,Jo=[],Sf=[],Sm=null,Em=zu,fs={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Cx,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(e=>{try{Cx(e[0],e[1])}catch{}})}},ce=fs,Hu=[],Xo=0,Ef=[];function ee(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=ut,this._lib=!1;var t=this._PSD=ce;if(Kn&&(this._stackHolder=Qo(),this._prev=null,this._numPrev=0),typeof e!="function"){if(e!==Uu)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&Dm(this,this._value);return}this._state=null,this._value=null,++t.ref,_x(this,e)}var km={get:function(){var e=ce,t=Of;function n(r,o){var a=!e.global&&(e!==ce||t!==Of);let s=a&&!Ei();var u=new ee((l,c)=>{Cm(this,new yx(Af(r,e,a,s),Af(o,e,a,s),l,c,e))});return Kn&&xx(u,this),u}return n.prototype=Uu,n},set:function(e){wi(this,"then",e&&e.prototype===Uu?km:{get:function(){return e},set:km.set})}};ss(ee.prototype,{then:km,_then:function(e,t){Cm(this,new yx(null,null,e,t,ce))},catch:function(e){if(arguments.length===1)return this.then(null,e);var t=arguments[0],n=arguments[1];return typeof t=="function"?this.then(null,r=>r instanceof t?n(r):Df(r)):this.then(null,r=>r&&r.name===t?n(r):Df(r))},finally:function(e){return this.then(t=>(e(),t),t=>(e(),Df(t)))},stack:{get:function(){if(this._stack)return this._stack;try{wm=!0;var e=wx(this,[],xP),t=e.join(`
From previous: `);return this._state!==null&&(this._stack=t),t}finally{wm=!1}}},timeout:function(e,t){return e<1/0?new ee((n,r)=>{var o=setTimeout(()=>r(new ge.Timeout(t)),e);this.then(n,r).finally(clearTimeout.bind(null,o))}):this}});typeof Symbol!="undefined"&&Symbol.toStringTag&&wi(ee.prototype,Symbol.toStringTag,"Dexie.Promise");fs.env=Sx();function yx(e,t,n,r,o){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.resolve=n,this.reject=r,this.psd=o}ss(ee,{all:function(){var e=Si.apply(null,arguments).map(Tf);return new ee(function(t,n){e.length===0&&t([]);var r=e.length;e.forEach((o,a)=>ee.resolve(o).then(s=>{e[a]=s,--r||t(e)},n))})},resolve:e=>{if(e instanceof ee)return e;if(e&&typeof e.then=="function")return new ee((n,r)=>{e.then(n,r)});var t=new ee(Uu,!0,e);return xx(t,Sm),t},reject:Df,race:function(){var e=Si.apply(null,arguments).map(Tf);return new ee((t,n)=>{e.map(r=>ee.resolve(r).then(t,n))})},PSD:{get:()=>ce,set:e=>ce=e},totalEchoes:{get:()=>Of},newPSD:no,usePSD:ds,scheduler:{get:()=>Wu,set:e=>{Wu=e}},rejectionMapper:{get:()=>Em,set:e=>{Em=e}},follow:(e,t)=>new ee((n,r)=>no((o,a)=>{var s=ce;s.unhandleds=[],s.onunhandled=a,s.finalize=Yo(function(){kP(()=>{this.unhandleds.length===0?o():a(this.unhandleds[0])})},s.finalize),e()},t,n,r))});wf&&(wf.allSettled&&wi(ee,"allSettled",function(){let e=Si.apply(null,arguments).map(Tf);return new ee(t=>{e.length===0&&t([]);let n=e.length,r=new Array(n);e.forEach((o,a)=>ee.resolve(o).then(s=>r[a]={status:"fulfilled",value:s},s=>r[a]={status:"rejected",reason:s}).then(()=>--n||t(r)))})}),wf.any&&typeof AggregateError!="undefined"&&wi(ee,"any",function(){let e=Si.apply(null,arguments).map(Tf);return new ee((t,n)=>{e.length===0&&n(new AggregateError([]));let r=e.length,o=new Array(r);e.forEach((a,s)=>ee.resolve(a).then(u=>t(u),u=>{o[s]=u,--r||n(new AggregateError(o))}))})}));function _x(e,t){try{t(n=>{if(e._state===null){if(n===e)throw new TypeError("A promise cannot be resolved with itself.");var r=e._lib&&Ku();n&&typeof n.then=="function"?_x(e,(o,a)=>{n instanceof ee?n._then(o,a):n.then(o,a)}):(e._state=!0,e._value=n,bx(e)),r&&Gu()}},Dm.bind(null,e))}catch(n){Dm(e,n)}}function Dm(e,t){if(Sf.push(t),e._state===null){var n=e._lib&&Ku();t=Em(t),e._state=!1,e._value=t,Kn&&t!==null&&typeof t=="object"&&!t._promise&&iP(()=>{var r=cm(t,"stack");t._promise=e,wi(t,"stack",{get:()=>wm?r&&(r.get?r.get.apply(t):r.value):e.stack})}),DP(e),bx(e),n&&Gu()}}function bx(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)Cm(e,t[n]);var o=e._PSD;--o.ref||o.finalize(),Xo===0&&(++Xo,Wu(()=>{--Xo==0&&Om()},[]))}function Cm(e,t){if(e._state===null){e._listeners.push(t);return}var n=e._state?t.onFulfilled:t.onRejected;if(n===null)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++Xo,Wu(EP,[n,e,t])}function EP(e,t,n){try{Sm=t;var r,o=t._value;t._state?r=e(o):(Sf.length&&(Sf=[]),r=e(o),Sf.indexOf(o)===-1&&CP(t)),n.resolve(r)}catch(a){n.reject(a)}finally{Sm=null,--Xo==0&&Om(),--n.psd.ref||n.psd.finalize()}}function wx(e,t,n){if(t.length===n)return t;var r="";if(e._state===!1){var o=e._value,a,s;o!=null?(a=o.name||"Error",s=o.message||o,r=mm(o,0)):(a=o,s=""),t.push(a+(s?": "+s:"")+r)}return Kn&&(r=mm(e._stackHolder,2),r&&t.indexOf(r)===-1&&t.push(r),e._prev&&wx(e._prev,t,n)),t}function xx(e,t){var n=t?t._numPrev+1:0;n<wP&&(e._prev=t,e._numPrev=n)}function kf(){Ku()&&Gu()}function Ku(){var e=xm;return xm=!1,xf=!1,e}function Gu(){var e,t,n;do for(;Hu.length>0;)for(e=Hu,Hu=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}while(Hu.length>0);xm=!0,xf=!0}function Om(){var e=Jo;Jo=[],e.forEach(r=>{r._PSD.onunhandled.call(null,r._value,r)});for(var t=Ef.slice(0),n=t.length;n;)t[--n]()}function kP(e){function t(){e(),Ef.splice(Ef.indexOf(t),1)}Ef.push(t),++Xo,Wu(()=>{--Xo==0&&Om()},[])}function DP(e){Jo.some(t=>t._value===e._value)||Jo.push(e)}function CP(e){for(var t=Jo.length;t;)if(Jo[--t]._value===e._value){Jo.splice(t,1);return}}function Df(e){return new ee(Uu,!1,e)}function St(e,t){var n=ce;return function(){var r=Ku(),o=ce;try{return io(n,!0),e.apply(this,arguments)}catch(a){t&&t(a)}finally{io(o,!1),r&&Gu()}}}var xr={awaits:0,echoes:0,id:0},OP=0,Cf=[],Tm=0,Of=0,TP=0;function no(e,t,n,r){var o=ce,a=Object.create(o);a.parent=o,a.ref=0,a.global=!1,a.id=++TP;var s=fs.env;a.env=bm?{Promise:ee,PromiseProp:{value:ee,configurable:!0,writable:!0},all:ee.all,race:ee.race,allSettled:ee.allSettled,any:ee.any,resolve:ee.resolve,reject:ee.reject,nthen:kx(s.nthen,a),gthen:kx(s.gthen,a)}:{},t&&Fr(a,t),++o.ref,a.finalize=function(){--this.parent.ref||this.parent.finalize()};var u=ds(a,e,n,r);return a.ref===0&&a.finalize(),u}function ps(){return xr.id||(xr.id=++OP),++xr.awaits,xr.echoes+=gx,xr.id}function Ei(){return xr.awaits?(--xr.awaits==0&&(xr.id=0),xr.echoes=xr.awaits*gx,!0):!1}(""+vx).indexOf("[native code]")===-1&&(ps=Ei=ut);function Tf(e){return xr.echoes&&e&&e.constructor===wf?(ps(),e.then(t=>(Ei(),t),t=>(Ei(),rr(t)))):e}function AP(e){++Of,(!xr.echoes||--xr.echoes==0)&&(xr.echoes=xr.id=0),Cf.push(ce),io(e,!0)}function IP(){var e=Cf[Cf.length-1];Cf.pop(),io(e,!1)}function io(e,t){var n=ce;if((t?xr.echoes&&(!Tm++||e!==ce):Tm&&(!--Tm||e!==ce))&&Ex(t?AP.bind(null,e):IP),e!==ce&&(ce=e,n===fs&&(fs.env=Sx()),bm)){var r=fs.env.Promise,o=e.env;bf.then=o.nthen,r.prototype.then=o.gthen,(n.global||e.global)&&(Object.defineProperty(gt,"Promise",o.PromiseProp),r.all=o.all,r.race=o.race,r.resolve=o.resolve,r.reject=o.reject,o.allSettled&&(r.allSettled=o.allSettled),o.any&&(r.any=o.any))}}function Sx(){var e=gt.Promise;return bm?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(gt,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject,nthen:bf.then,gthen:e.prototype.then}:{}}function ds(e,t,n,r,o){var a=ce;try{return io(e,!0),t(n,r,o)}finally{io(a,!1)}}function Ex(e){vx.call(ym,e)}function Af(e,t,n,r){return typeof e!="function"?e:function(){var o=ce;n&&ps(),io(t,!0);try{return e.apply(this,arguments)}finally{io(o,!1),r&&Ex(Ei)}}}function kx(e,t){return function(n,r){return e.call(this,Af(n,t),Af(r,t))}}var Dx="unhandledrejection";function Cx(e,t){var n;try{n=t.onuncatched(e)}catch{}if(n!==!1)try{var r,o={promise:t,reason:e};if(gt.document&&document.createEvent?(r=document.createEvent("Event"),r.initEvent(Dx,!0,!0),Fr(r,o)):gt.CustomEvent&&(r=new CustomEvent(Dx,{detail:o}),Fr(r,o)),r&&gt.dispatchEvent&&(dispatchEvent(r),!gt.PromiseRejectionEvent&&gt.onunhandledrejection))try{gt.onunhandledrejection(r)}catch{}Kn&&r&&!r.defaultPrevented&&console.warn(`Unhandled rejection: ${e.stack||e}`)}catch{}}var rr=ee.reject;function Ox(e,t,n,r){if(!e.idbdb||!e._state.openComplete&&!ce.letThrough&&!e._vip){if(e._state.openComplete)return rr(new ge.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._options.autoOpen)return rr(new ge.DatabaseClosed);e.open().catch(ut)}return e._state.dbReadyPromise.then(()=>Ox(e,t,n,r))}else{var o=e._createTransaction(t,n,e._dbSchema);try{o.create()}catch(a){return rr(a)}return o._promise(t,(a,s)=>no(()=>(ce.trans=o,r(a,s,o)))).then(a=>o._completion.then(()=>a))}}var Tx="3.2.0",Zo=String.fromCharCode(65535),Am=-1/0,ki="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Ax="String expected.",Qu=[],If=typeof navigator!="undefined"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),MP=If,PP=If,Ix=e=>!/(dexie\.js|dexie\.min\.js)/.test(e),Mf="__dbnames",Im="readonly",Mm="readwrite";function ea(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var Mx={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Pf(e){return typeof e=="string"&&!/\./.test(e)?t=>(t[e]===void 0&&e in t&&(t=qu(t),delete t[e]),t):t=>t}var Px=class{_trans(e,t,n){let r=this._tx||ce.trans,o=this.name;function a(u,l,c){if(!c.schema[o])throw new ge.NotFound("Table "+o+" not part of transaction");return t(c.idbtrans,c)}let s=Ku();try{return r&&r.db===this.db?r===ce.trans?r._promise(e,a,n):no(()=>r._promise(e,a,n),{trans:r,transless:ce.transless||ce}):Ox(this.db,e,[this.name],a)}finally{s&&Gu()}}get(e,t){return e&&e.constructor===Object?this.where(e).first(t):this._trans("readonly",n=>this.core.get({trans:n,key:e}).then(r=>this.hook.reading.fire(r))).then(t)}where(e){if(typeof e=="string")return new this.db.WhereClause(this,e);if(wr(e))return new this.db.WhereClause(this,`[${e.join("+")}]`);let t=zt(e);if(t.length===1)return this.where(t[0]).equals(e[t[0]]);let n=this.schema.indexes.concat(this.schema.primKey).filter(l=>l.compound&&t.every(c=>l.keyPath.indexOf(c)>=0)&&l.keyPath.every(c=>t.indexOf(c)>=0))[0];if(n&&this.db._maxKey!==Zo)return this.where(n.name).equals(n.keyPath.map(l=>e[l]));!n&&Kn&&console.warn(`The query ${JSON.stringify(e)} on ${this.name} would benefit of a compound index [${t.join("+")}]`);let{idxByName:r}=this.schema,o=this.db._deps.indexedDB;function a(l,c){try{return o.cmp(l,c)===0}catch{return!1}}let[s,u]=t.reduce(([l,c],m)=>{let me=r[m],xe=e[m];return[l||me,l||!me?ea(c,me&&me.multi?Ne=>{let He=xi(Ne,m);return wr(He)&&He.some(Ye=>a(xe,Ye))}:Ne=>a(xe,xi(Ne,m))):c]},[null,null]);return s?this.where(s.name).equals(e[s.keyPath]).filter(u):n?this.filter(u):this.where(t).equals("")}filter(e){return this.toCollection().and(e)}count(e){return this.toCollection().count(e)}offset(e){return this.toCollection().offset(e)}limit(e){return this.toCollection().limit(e)}each(e){return this.toCollection().each(e)}toArray(e){return this.toCollection().toArray(e)}toCollection(){return new this.db.Collection(new this.db.WhereClause(this))}orderBy(e){return new this.db.Collection(new this.db.WhereClause(this,wr(e)?`[${e.join("+")}]`:e))}reverse(){return this.toCollection().reverse()}mapToClass(e){this.schema.mappedClass=e;let t=n=>{if(!n)return n;let r=Object.create(e.prototype);for(var o in n)if(on(n,o))try{r[o]=n[o]}catch{}return r};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=t,this.hook("reading",t),e}defineClass(){function e(t){Fr(this,t)}return this.mapToClass(e)}add(e,t){let{auto:n,keyPath:r}=this.schema.primKey,o=e;return r&&n&&(o=Pf(r)(e)),this._trans("readwrite",a=>this.core.mutate({trans:a,type:"add",keys:t!=null?[t]:null,values:[o]})).then(a=>a.numFailures?ee.reject(a.failures[0]):a.lastResult).then(a=>{if(r)try{wn(e,r,a)}catch{}return a})}update(e,t){if(typeof e=="object"&&!wr(e)){let n=xi(e,this.schema.primKey.keyPath);if(n===void 0)return rr(new ge.InvalidArgument("Given object does not contain its primary key"));try{typeof t!="function"?zt(t).forEach(r=>{wn(e,r,t[r])}):t(e,{value:e,primKey:n})}catch{}return this.where(":id").equals(n).modify(t)}else return this.where(":id").equals(e).modify(t)}put(e,t){let{auto:n,keyPath:r}=this.schema.primKey,o=e;return r&&n&&(o=Pf(r)(e)),this._trans("readwrite",a=>this.core.mutate({trans:a,type:"put",values:[o],keys:t!=null?[t]:null})).then(a=>a.numFailures?ee.reject(a.failures[0]):a.lastResult).then(a=>{if(r)try{wn(e,r,a)}catch{}return a})}delete(e){return this._trans("readwrite",t=>this.core.mutate({trans:t,type:"delete",keys:[e]})).then(t=>t.numFailures?ee.reject(t.failures[0]):void 0)}clear(){return this._trans("readwrite",e=>this.core.mutate({trans:e,type:"deleteRange",range:Mx})).then(e=>e.numFailures?ee.reject(e.failures[0]):void 0)}bulkGet(e){return this._trans("readonly",t=>this.core.getMany({keys:e,trans:t}).then(n=>n.map(r=>this.hook.reading.fire(r))))}bulkAdd(e,t,n){let r=Array.isArray(t)?t:void 0;n=n||(r?void 0:t);let o=n?n.allKeys:void 0;return this._trans("readwrite",a=>{let{auto:s,keyPath:u}=this.schema.primKey;if(u&&r)throw new ge.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(r&&r.length!==e.length)throw new ge.InvalidArgument("Arguments objects and keys must have the same length");let l=e.length,c=u&&s?e.map(Pf(u)):e;return this.core.mutate({trans:a,type:"add",keys:r,values:c,wantResults:o}).then(({numFailures:m,results:me,lastResult:xe,failures:Ne})=>{let He=o?me:xe;if(m===0)return He;throw new Vu(`${this.name}.bulkAdd(): ${m} of ${l} operations failed`,Ne)})})}bulkPut(e,t,n){let r=Array.isArray(t)?t:void 0;n=n||(r?void 0:t);let o=n?n.allKeys:void 0;return this._trans("readwrite",a=>{let{auto:s,keyPath:u}=this.schema.primKey;if(u&&r)throw new ge.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(r&&r.length!==e.length)throw new ge.InvalidArgument("Arguments objects and keys must have the same length");let l=e.length,c=u&&s?e.map(Pf(u)):e;return this.core.mutate({trans:a,type:"put",keys:r,values:c,wantResults:o}).then(({numFailures:m,results:me,lastResult:xe,failures:Ne})=>{let He=o?me:xe;if(m===0)return He;throw new Vu(`${this.name}.bulkPut(): ${m} of ${l} operations failed`,Ne)})})}bulkDelete(e){let t=e.length;return this._trans("readwrite",n=>this.core.mutate({trans:n,type:"delete",keys:e})).then(({numFailures:n,lastResult:r,failures:o})=>{if(n===0)return r;throw new Vu(`${this.name}.bulkDelete(): ${n} of ${t} operations failed`,o)})}};function Yu(e){var t={},n=function(u,l){if(l){for(var c=arguments.length,m=new Array(c-1);--c;)m[c-1]=arguments[c];return t[u].subscribe.apply(null,m),e}else if(typeof u=="string")return t[u]};n.addEventType=a;for(var r=1,o=arguments.length;r<o;++r)a(arguments[r]);return n;function a(u,l,c){if(typeof u=="object")return s(u);l||(l=bP),c||(c=ut);var m={subscribers:[],fire:c,subscribe:function(me){m.subscribers.indexOf(me)===-1&&(m.subscribers.push(me),m.fire=l(m.fire,me))},unsubscribe:function(me){m.subscribers=m.subscribers.filter(function(xe){return xe!==me}),m.fire=m.subscribers.reduce(l,c)}};return t[u]=n[u]=m,m}function s(u){zt(u).forEach(function(l){var c=u[l];if(wr(c))a(l,u[l][0],u[l][1]);else if(c==="asap")var m=a(l,zu,function(){for(var me=arguments.length,xe=new Array(me);me--;)xe[me]=arguments[me];m.subscribers.forEach(function(Ne){ax(function(){Ne.apply(null,xe)})})});else throw new ge.InvalidArgument("Invalid event config")})}}function Ju(e,t){return us(t).from({prototype:e}),t}function jP(e){return Ju(Px.prototype,function(t,n,r){this.db=e,this._tx=r,this.name=t,this.schema=n,this.hook=e._allTables[t]?e._allTables[t].hook:Yu(null,{creating:[vP,ut],reading:[gP,zu],updating:[_P,ut],deleting:[yP,ut]})})}function hs(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function Pm(e,t){e.filter=ea(e.filter,t)}function jm(e,t,n){var r=e.replayFilter;e.replayFilter=r?()=>ea(r(),t()):t,e.justLimit=n&&!r}function FP(e,t){e.isMatch=ea(e.isMatch,t)}function jf(e,t){if(e.isPrimKey)return t.primaryKey;let n=t.getIndexByKeyPath(e.index);if(!n)throw new ge.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function jx(e,t,n){let r=jf(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:r,range:e.range}})}function Ff(e,t,n,r){let o=e.replayFilter?ea(e.filter,e.replayFilter()):e.filter;if(e.or){let a={},s=(u,l,c)=>{if(!o||o(l,c,xe=>l.stop(xe),xe=>l.fail(xe))){var m=l.primaryKey,me=""+m;me==="[object ArrayBuffer]"&&(me=""+new Uint8Array(m)),on(a,me)||(a[me]=!0,t(u,l,c))}};return Promise.all([e.or._iterate(s,n),Fx(jx(e,r,n),e.algorithm,s,!e.keysOnly&&e.valueMapper)])}else return Fx(jx(e,r,n),ea(e.algorithm,o),t,!e.keysOnly&&e.valueMapper)}function Fx(e,t,n,r){var o=r?(s,u,l)=>n(r(s),u,l):n,a=St(o);return e.then(s=>{if(s)return s.start(()=>{var u=()=>s.continue();(!t||t(s,l=>u=l,l=>{s.stop(l),u=ut},l=>{s.fail(l),u=ut}))&&a(s.value,s,l=>u=l),u()})})}function Rr(e,t){try{let n=Rx(e),r=Rx(t);if(n!==r)return n==="Array"?1:r==="Array"?-1:n==="binary"?1:r==="binary"?-1:n==="string"?1:r==="string"?-1:n==="Date"?1:r!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return e>t?1:e<t?-1:0;case"binary":return NP(Nx(e),Nx(t));case"Array":return RP(e,t)}}catch{}return NaN}function RP(e,t){let n=e.length,r=t.length,o=n<r?n:r;for(let a=0;a<o;++a){let s=Rr(e[a],t[a]);if(s!==0)return s}return n===r?0:n<r?-1:1}function NP(e,t){let n=e.length,r=t.length,o=n<r?n:r;for(let a=0;a<o;++a)if(e[a]!==t[a])return e[a]<t[a]?-1:1;return n===r?0:n<r?-1:1}function Rx(e){let t=typeof e;if(t!=="object")return t;if(ArrayBuffer.isView(e))return"binary";let n=pm(e);return n==="ArrayBuffer"?"binary":n}function Nx(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var Lx=class{_read(e,t){var n=this._ctx;return n.error?n.table._trans(null,rr.bind(null,n.error)):n.table._trans("readonly",e).then(t)}_write(e){var t=this._ctx;return t.error?t.table._trans(null,rr.bind(null,t.error)):t.table._trans("readwrite",e,"locked")}_addAlgorithm(e){var t=this._ctx;t.algorithm=ea(t.algorithm,e)}_iterate(e,t){return Ff(this._ctx,e,t,this._ctx.table.core)}clone(e){var t=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return e&&Fr(n,e),t._ctx=n,t}raw(){return this._ctx.valueMapper=null,this}each(e){var t=this._ctx;return this._read(n=>Ff(t,e,n,t.table.core))}count(e){return this._read(t=>{let n=this._ctx,r=n.table.core;if(hs(n,!0))return r.count({trans:t,query:{index:jf(n,r.schema),range:n.range}}).then(a=>Math.min(a,n.limit));var o=0;return Ff(n,()=>(++o,!1),t,r).then(()=>o)}).then(e)}sortBy(e,t){let n=e.split(".").reverse(),r=n[0],o=n.length-1;function a(l,c){return c?a(l[n[c]],c-1):l[r]}var s=this._ctx.dir==="next"?1:-1;function u(l,c){var m=a(l,o),me=a(c,o);return m<me?-s:m>me?s:0}return this.toArray(function(l){return l.sort(u)}).then(t)}toArray(e){return this._read(t=>{var n=this._ctx;if(n.dir==="next"&&hs(n,!0)&&n.limit>0){let{valueMapper:r}=n,o=jf(n,n.table.core.schema);return n.table.core.query({trans:t,limit:n.limit,values:!0,query:{index:o,range:n.range}}).then(({result:a})=>r?a.map(r):a)}else{let r=[];return Ff(n,o=>r.push(o),t,n.table.core).then(()=>r)}},e)}offset(e){var t=this._ctx;return e<=0?this:(t.offset+=e,hs(t)?jm(t,()=>{var n=e;return(r,o)=>n===0?!0:n===1?(--n,!1):(o(()=>{r.advance(n),n=0}),!1)}):jm(t,()=>{var n=e;return()=>--n<0}),this)}limit(e){return this._ctx.limit=Math.min(this._ctx.limit,e),jm(this._ctx,()=>{var t=e;return function(n,r,o){return--t<=0&&r(o),t>=0}},!0),this}until(e,t){return Pm(this._ctx,function(n,r,o){return e(n.value)?(r(o),t):!0}),this}first(e){return this.limit(1).toArray(function(t){return t[0]}).then(e)}last(e){return this.reverse().first(e)}filter(e){return Pm(this._ctx,function(t){return e(t.value)}),FP(this._ctx,e),this}and(e){return this.filter(e)}or(e){return new this.db.WhereClause(this._ctx.table,e,this)}reverse(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this}desc(){return this.reverse()}eachKey(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(n,r){e(r.key,r)})}eachUniqueKey(e){return this._ctx.unique="unique",this.eachKey(e)}eachPrimaryKey(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(n,r){e(r.primaryKey,r)})}keys(e){var t=this._ctx;t.keysOnly=!t.isMatch;var n=[];return this.each(function(r,o){n.push(o.key)}).then(function(){return n}).then(e)}primaryKeys(e){var t=this._ctx;if(t.dir==="next"&&hs(t,!0)&&t.limit>0)return this._read(r=>{var o=jf(t,t.table.core.schema);return t.table.core.query({trans:r,values:!1,limit:t.limit,query:{index:o,range:t.range}})}).then(({result:r})=>r).then(e);t.keysOnly=!t.isMatch;var n=[];return this.each(function(r,o){n.push(o.primaryKey)}).then(function(){return n}).then(e)}uniqueKeys(e){return this._ctx.unique="unique",this.keys(e)}firstKey(e){return this.limit(1).keys(function(t){return t[0]}).then(e)}lastKey(e){return this.reverse().firstKey(e)}distinct(){var e=this._ctx,t=e.index&&e.table.schema.idxByName[e.index];if(!t||!t.multi)return this;var n={};return Pm(this._ctx,function(r){var o=r.primaryKey.toString(),a=on(n,o);return n[o]=!0,!a}),this}modify(e){var t=this._ctx;return this._write(n=>{var r;if(typeof e=="function")r=e;else{var o=zt(e),a=o.length;r=function(He){for(var Ye=!1,Je=0;Je<a;++Je){var vn=o[Je],La=e[vn];xi(He,vn)!==La&&(wn(He,vn,La),Ye=!0)}return Ye}}let s=t.table.core,{outbound:u,extractKey:l}=s.schema.primaryKey,c=this.db._options.modifyChunkSize||200,m=[],me=0,xe=[],Ne=(He,Ye)=>{let{failures:Je,numFailures:vn}=Ye;me+=He-vn;for(let La of zt(Je))m.push(Je[La])};return this.clone().primaryKeys().then(He=>{let Ye=Je=>{let vn=Math.min(c,He.length-Je);return s.getMany({trans:n,keys:He.slice(Je,Je+vn),cache:"immutable"}).then(La=>{let sr=[],Zr=[],zs=u?[]:null,za=[];for(let lc=0;lc<vn;++lc){let Ty=La[lc],_y={value:qu(Ty),primKey:He[Je+lc]};r.call(_y,_y.value,_y)!==!1&&(_y.value==null?za.push(He[Je+lc]):!u&&Rr(l(Ty),l(_y.value))!==0?(za.push(He[Je+lc]),sr.push(_y.value)):(Zr.push(_y.value),u&&zs.push(He[Je+lc])))}let Hs=hs(t)&&t.limit===1/0&&(typeof e!="function"||e===Fm)&&{index:t.index,range:t.range};return Promise.resolve(sr.length>0&&s.mutate({trans:n,type:"add",values:sr}).then(lc=>{for(let Ty in lc.failures)za.splice(parseInt(Ty),1);Ne(sr.length,lc)})).then(()=>(Zr.length>0||Hs&&typeof e=="object")&&s.mutate({trans:n,type:"put",keys:zs,values:Zr,criteria:Hs,changeSpec:typeof e!="function"&&e}).then(lc=>Ne(Zr.length,lc))).then(()=>(za.length>0||Hs&&e===Fm)&&s.mutate({trans:n,type:"delete",keys:za,criteria:Hs}).then(lc=>Ne(za.length,lc))).then(()=>He.length>Je+vn&&Ye(Je+c))})};return Ye(0).then(()=>{if(m.length>0)throw new yf("Error modifying one or more objects",m,me,xe);return He.length})})})}delete(){var e=this._ctx,t=e.range;return hs(e)&&(e.isPrimKey&&!PP||t.type===3)?this._write(n=>{let{primaryKey:r}=e.table.core.schema,o=t;return e.table.core.count({trans:n,query:{index:r,range:o}}).then(a=>e.table.core.mutate({trans:n,type:"deleteRange",range:o}).then(({failures:s,lastResult:u,results:l,numFailures:c})=>{if(c)throw new yf("Could not delete some values",Object.keys(s).map(m=>s[m]),a-c);return a-c}))}):this.modify(Fm)}},Fm=(e,t)=>t.value=null;function LP(e){return Ju(Lx.prototype,function(t,n){this.db=e;let r=Mx,o=null;if(n)try{r=n()}catch(l){o=l}let a=t._ctx,s=a.table,u=s.hook.reading.fire;this._ctx={table:s,index:a.index,isPrimKey:!a.index||s.schema.primKey.keyPath&&a.index===s.schema.primKey.name,range:r,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:o,or:a.or,valueMapper:u!==zu?u:null}})}function $P(e,t){return e<t?-1:e===t?0:1}function BP(e,t){return e>t?-1:e===t?0:1}function Gr(e,t,n){var r=e instanceof Rm?new e.Collection(e):e;return r._ctx.error=n?new n(t):new TypeError(t),r}function ms(e){return new e.Collection(e,()=>$x("")).limit(0)}function qP(e){return e==="next"?t=>t.toUpperCase():t=>t.toLowerCase()}function VP(e){return e==="next"?t=>t.toLowerCase():t=>t.toUpperCase()}function zP(e,t,n,r,o,a){for(var s=Math.min(e.length,r.length),u=-1,l=0;l<s;++l){var c=t[l];if(c!==r[l])return o(e[l],n[l])<0?e.substr(0,l)+n[l]+n.substr(l+1):o(e[l],r[l])<0?e.substr(0,l)+r[l]+n.substr(l+1):u>=0?e.substr(0,u)+t[u]+n.substr(u+1):null;o(e[l],c)<0&&(u=l)}return s<r.length&&a==="next"?e+n.substr(e.length):s<e.length&&a==="prev"?e.substr(0,n.length):u<0?null:e.substr(0,u)+r[u]+n.substr(u+1)}function Rf(e,t,n,r){var o,a,s,u,l,c,m,me=n.length;if(!n.every(Ye=>typeof Ye=="string"))return Gr(e,Ax);function xe(Ye){o=qP(Ye),a=VP(Ye),s=Ye==="next"?$P:BP;var Je=n.map(function(vn){return{lower:a(vn),upper:o(vn)}}).sort(function(vn,La){return s(vn.lower,La.lower)});u=Je.map(function(vn){return vn.upper}),l=Je.map(function(vn){return vn.lower}),c=Ye,m=Ye==="next"?"":r}xe("next");var Ne=new e.Collection(e,()=>oo(u[0],l[me-1]+r));Ne._ondirectionchange=function(Ye){xe(Ye)};var He=0;return Ne._addAlgorithm(function(Ye,Je,vn){var La=Ye.key;if(typeof La!="string")return!1;var sr=a(La);if(t(sr,l,He))return!0;for(var Zr=null,zs=He;zs<me;++zs){var za=zP(La,sr,u[zs],l[zs],s,c);za===null&&Zr===null?He=zs+1:(Zr===null||s(Zr,za)>0)&&(Zr=za)}return Je(Zr!==null?function(){Ye.continue(Zr+m)}:vn),!1}),Ne}function oo(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function $x(e){return{type:1,lower:e,upper:e}}var Rm=class{get Collection(){return this._ctx.table.db.Collection}between(e,t,n,r){n=n!==!1,r=r===!0;try{return this._cmp(e,t)>0||this._cmp(e,t)===0&&(n||r)&&!(n&&r)?ms(this):new this.Collection(this,()=>oo(e,t,!n,!r))}catch{return Gr(this,ki)}}equals(e){return e==null?Gr(this,ki):new this.Collection(this,()=>$x(e))}above(e){return e==null?Gr(this,ki):new this.Collection(this,()=>oo(e,void 0,!0))}aboveOrEqual(e){return e==null?Gr(this,ki):new this.Collection(this,()=>oo(e,void 0,!1))}below(e){return e==null?Gr(this,ki):new this.Collection(this,()=>oo(void 0,e,!1,!0))}belowOrEqual(e){return e==null?Gr(this,ki):new this.Collection(this,()=>oo(void 0,e))}startsWith(e){return typeof e!="string"?Gr(this,Ax):this.between(e,e+Zo,!0,!0)}startsWithIgnoreCase(e){return e===""?this.startsWith(e):Rf(this,(t,n)=>t.indexOf(n[0])===0,[e],Zo)}equalsIgnoreCase(e){return Rf(this,(t,n)=>t===n[0],[e],"")}anyOfIgnoreCase(){var e=Si.apply(ls,arguments);return e.length===0?ms(this):Rf(this,(t,n)=>n.indexOf(t)!==-1,e,"")}startsWithAnyOfIgnoreCase(){var e=Si.apply(ls,arguments);return e.length===0?ms(this):Rf(this,(t,n)=>n.some(r=>t.indexOf(r)===0),e,Zo)}anyOf(){let e=Si.apply(ls,arguments),t=this._cmp;try{e.sort(t)}catch{return Gr(this,ki)}if(e.length===0)return ms(this);let n=new this.Collection(this,()=>oo(e[0],e[e.length-1]));n._ondirectionchange=o=>{t=o==="next"?this._ascending:this._descending,e.sort(t)};let r=0;return n._addAlgorithm((o,a,s)=>{let u=o.key;for(;t(u,e[r])>0;)if(++r,r===e.length)return a(s),!1;return t(u,e[r])===0?!0:(a(()=>{o.continue(e[r])}),!1)}),n}notEqual(e){return this.inAnyRange([[Am,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})}noneOf(){let e=Si.apply(ls,arguments);if(e.length===0)return new this.Collection(this);try{e.sort(this._ascending)}catch{return Gr(this,ki)}let t=e.reduce((n,r)=>n?n.concat([[n[n.length-1][1],r]]):[[Am,r]],null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})}inAnyRange(e,t){let n=this._cmp,r=this._ascending,o=this._descending,a=this._min,s=this._max;if(e.length===0)return ms(this);if(!e.every(sr=>sr[0]!==void 0&&sr[1]!==void 0&&r(sr[0],sr[1])<=0))return Gr(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",ge.InvalidArgument);let u=!t||t.includeLowers!==!1,l=t&&t.includeUppers===!0;function c(sr,Zr){let zs=0,za=sr.length;for(;zs<za;++zs){let Hs=sr[zs];if(n(Zr[0],Hs[1])<0&&n(Zr[1],Hs[0])>0){Hs[0]=a(Hs[0],Zr[0]),Hs[1]=s(Hs[1],Zr[1]);break}}return zs===za&&sr.push(Zr),sr}let m=r;function me(sr,Zr){return m(sr[0],Zr[0])}let xe;try{xe=e.reduce(c,[]),xe.sort(me)}catch{return Gr(this,ki)}let Ne=0,He=l?sr=>r(sr,xe[Ne][1])>0:sr=>r(sr,xe[Ne][1])>=0,Ye=u?sr=>o(sr,xe[Ne][0])>0:sr=>o(sr,xe[Ne][0])>=0;function Je(sr){return!He(sr)&&!Ye(sr)}let vn=He,La=new this.Collection(this,()=>oo(xe[0][0],xe[xe.length-1][1],!u,!l));return La._ondirectionchange=sr=>{sr==="next"?(vn=He,m=r):(vn=Ye,m=o),xe.sort(me)},La._addAlgorithm((sr,Zr,zs)=>{for(var za=sr.key;vn(za);)if(++Ne,Ne===xe.length)return Zr(zs),!1;return Je(za)?!0:(this._cmp(za,xe[Ne][1])===0||this._cmp(za,xe[Ne][0])===0||Zr(()=>{m===r?sr.continue(xe[Ne][0]):sr.continue(xe[Ne][1])}),!1)}),La}startsWithAnyOf(){let e=Si.apply(ls,arguments);return e.every(t=>typeof t=="string")?e.length===0?ms(this):this.inAnyRange(e.map(t=>[t,t+Zo])):Gr(this,"startsWithAnyOf() only works with strings")}};function UP(e){return Ju(Rm.prototype,function(t,n,r){this.db=e,this._ctx={table:t,index:n===":id"?null:n,or:r};let o=e._deps.indexedDB;if(!o)throw new ge.MissingAPI;this._cmp=this._ascending=o.cmp.bind(o),this._descending=(a,s)=>o.cmp(s,a),this._max=(a,s)=>o.cmp(a,s)>0?a:s,this._min=(a,s)=>o.cmp(a,s)<0?a:s,this._IDBKeyRange=e._deps.IDBKeyRange})}function Gn(e){return St(function(t){return Xu(t),e(t.target.error),!1})}function Xu(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var Zu="storagemutated",ao="x-storagemutated-1",so=Yu(null,Zu),Bx=class{_lock(){return Bu(!ce.global),++this._reculock,this._reculock===1&&!ce.global&&(ce.lockOwnerFor=this),this}_unlock(){if(Bu(!ce.global),--this._reculock==0)for(ce.global||(ce.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{ds(e[1],e[0])}catch{}}return this}_locked(){return this._reculock&&ce.lockOwnerFor!==this}create(e){if(!this.mode)return this;let t=this.db.idbdb,n=this.db._state.dbOpenError;if(Bu(!this.idbtrans),!e&&!t)switch(n&&n.name){case"DatabaseClosedError":throw new ge.DatabaseClosed(n);case"MissingAPIError":throw new ge.MissingAPI(n.message,n);default:throw new ge.OpenFailed(n)}if(!this.active)throw new ge.TransactionInactive;return Bu(this._completion._state===null),e=this.idbtrans=e||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):t.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})),e.onerror=St(r=>{Xu(r),this._reject(e.error)}),e.onabort=St(r=>{Xu(r),this.active&&this._reject(new ge.Abort(e.error)),this.active=!1,this.on("abort").fire(r)}),e.oncomplete=St(()=>{this.active=!1,this._resolve(),"mutatedParts"in e&&so.storagemutated.fire(e.mutatedParts)}),this}_promise(e,t,n){if(e==="readwrite"&&this.mode!=="readwrite")return rr(new ge.ReadOnly("Transaction is readonly"));if(!this.active)return rr(new ge.TransactionInactive);if(this._locked())return new ee((o,a)=>{this._blockedFuncs.push([()=>{this._promise(e,t,n).then(o,a)},ce])});if(n)return no(()=>{var o=new ee((a,s)=>{this._lock();let u=t(a,s,this);u&&u.then&&u.then(a,s)});return o.finally(()=>this._unlock()),o._lib=!0,o});var r=new ee((o,a)=>{var s=t(o,a,this);s&&s.then&&s.then(o,a)});return r._lib=!0,r}_root(){return this.parent?this.parent._root():this}waitFor(e){var t=this._root();let n=ee.resolve(e);if(t._waitingFor)t._waitingFor=t._waitingFor.then(()=>n);else{t._waitingFor=n,t._waitingQueue=[];var r=t.idbtrans.objectStore(t.storeNames[0]);(function a(){for(++t._spinCount;t._waitingQueue.length;)t._waitingQueue.shift()();t._waitingFor&&(r.get(-1/0).onsuccess=a)})()}var o=t._waitingFor;return new ee((a,s)=>{n.then(u=>t._waitingQueue.push(St(a.bind(null,u))),u=>t._waitingQueue.push(St(s.bind(null,u)))).finally(()=>{t._waitingFor===o&&(t._waitingFor=null)})})}abort(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new ge.Abort))}table(e){let t=this._memoizedTables||(this._memoizedTables={});if(on(t,e))return t[e];let n=this.schema[e];if(!n)throw new ge.NotFound("Table "+e+" not part of transaction");let r=new this.db.Table(e,n,this);return r.core=this.db.core.table(e),t[e]=r,r}};function WP(e){return Ju(Bx.prototype,function(t,n,r,o,a){this.db=e,this.mode=t,this.storeNames=n,this.schema=r,this.chromeTransactionDurability=o,this.idbtrans=null,this.on=Yu(this,"complete","error","abort"),this.parent=a||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new ee((s,u)=>{this._resolve=s,this._reject=u}),this._completion.then(()=>{this.active=!1,this.on.complete.fire()},s=>{var u=this.active;return this.active=!1,this.on.error.fire(s),this.parent?this.parent._reject(s):u&&this.idbtrans&&this.idbtrans.abort(),rr(s)})})}function Nm(e,t,n,r,o,a,s){return{name:e,keyPath:t,unique:n,multi:r,auto:o,compound:a,src:(n&&!s?"&":"")+(r?"*":"")+(o?"++":"")+qx(t)}}function qx(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function Vx(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:sx(n,r=>[r.name,r])}}function HP(e){return e.length===1?e[0]:e}var el=e=>{try{return e.only([[]]),el=()=>[[]],[[]]}catch{return el=()=>Zo,Zo}};function Lm(e){return e==null?()=>{}:typeof e=="string"?KP(e):t=>xi(t,e)}function KP(e){return e.split(".").length===1?t=>t[e]:t=>xi(t,e)}function zx(e){return[].slice.call(e)}var GP=0;function tl(e){return e==null?":id":typeof e=="string"?e:`[${e.join("+")}]`}function QP(e,t,n){function r(m,me){let xe=zx(m.objectStoreNames);return{schema:{name:m.name,tables:xe.map(Ne=>me.objectStore(Ne)).map(Ne=>{let{keyPath:He,autoIncrement:Ye}=Ne,Je=wr(He),vn=He==null,La={},sr={name:Ne.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:vn,compound:Je,keyPath:He,autoIncrement:Ye,unique:!0,extractKey:Lm(He)},indexes:zx(Ne.indexNames).map(Zr=>Ne.index(Zr)).map(Zr=>{let{name:zs,unique:za,multiEntry:Hs,keyPath:lc}=Zr,Ty=wr(lc),_y={name:zs,compound:Ty,keyPath:lc,unique:za,multiEntry:Hs,extractKey:Lm(lc)};return La[tl(lc)]=_y,_y}),getIndexByKeyPath:Zr=>La[tl(Zr)]};return La[":id"]=sr.primaryKey,He!=null&&(La[tl(He)]=sr.primaryKey),sr})},hasGetAll:xe.length>0&&"getAll"in me.objectStore(xe[0])&&!(typeof navigator!="undefined"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function o(m){if(m.type===3)return null;if(m.type===4)throw new Error("Cannot convert never type to IDBKeyRange");let{lower:me,upper:xe,lowerOpen:Ne,upperOpen:He}=m;return me===void 0?xe===void 0?null:t.upperBound(xe,!!He):xe===void 0?t.lowerBound(me,!!Ne):t.bound(me,xe,!!Ne,!!He)}function a(m){let me=m.name;function xe({trans:Ye,type:Je,keys:vn,values:La,range:sr}){return new Promise((Zr,zs)=>{Zr=St(Zr);let za=Ye.objectStore(me),Hs=za.keyPath==null,lc=Je==="put"||Je==="add";if(!lc&&Je!=="delete"&&Je!=="deleteRange")throw new Error("Invalid operation type: "+Je);let{length:Ty}=vn||La||{length:1};if(vn&&La&&vn.length!==La.length)throw new Error("Given keys array must have same length as given values array.");if(Ty===0)return Zr({numFailures:0,failures:{},results:[],lastResult:void 0});let _y,xy=[],Bb=[],Dy=0,Bg=wy=>{++Dy,Xu(wy)};if(Je==="deleteRange"){if(sr.type===4)return Zr({numFailures:Dy,failures:Bb,results:[],lastResult:void 0});sr.type===3?xy.push(_y=za.clear()):xy.push(_y=za.delete(o(sr)))}else{let[wy,Ay]=lc?Hs?[La,vn]:[La,null]:[vn,null];if(lc)for(let $b=0;$b<Ty;++$b)xy.push(_y=Ay&&Ay[$b]!==void 0?za[Je](wy[$b],Ay[$b]):za[Je](wy[$b])),_y.onerror=Bg;else for(let $b=0;$b<Ty;++$b)xy.push(_y=za[Je](wy[$b])),_y.onerror=Bg}let yy=wy=>{let Ay=wy.target.result;xy.forEach(($b,e0)=>$b.error!=null&&(Bb[e0]=$b.error)),Zr({numFailures:Dy,failures:Bb,results:Je==="delete"?vn:xy.map($b=>$b.result),lastResult:Ay})};_y.onerror=wy=>{Bg(wy),yy(wy)},_y.onsuccess=yy})}function Ne({trans:Ye,values:Je,query:vn,reverse:La,unique:sr}){return new Promise((Zr,zs)=>{Zr=St(Zr);let{index:za,range:Hs}=vn,lc=Ye.objectStore(me),Ty=za.isPrimaryKey?lc:lc.index(za.name),_y=La?sr?"prevunique":"prev":sr?"nextunique":"next",xy=Je||!("openKeyCursor"in Ty)?Ty.openCursor(o(Hs),_y):Ty.openKeyCursor(o(Hs),_y);xy.onerror=Gn(zs),xy.onsuccess=St(Bb=>{let Dy=xy.result;if(!Dy){Zr(null);return}Dy.___id=++GP,Dy.done=!1;let Bg=Dy.continue.bind(Dy),yy=Dy.continuePrimaryKey;yy&&(yy=yy.bind(Dy));let wy=Dy.advance.bind(Dy),Ay=()=>{throw new Error("Cursor not started")},$b=()=>{throw new Error("Cursor not stopped")};Dy.trans=Ye,Dy.stop=Dy.continue=Dy.continuePrimaryKey=Dy.advance=Ay,Dy.fail=St(zs),Dy.next=function(){let e0=1;return this.start(()=>e0--?this.continue():this.stop()).then(()=>this)},Dy.start=e0=>{let Hb=new Promise((Jb,l2)=>{Jb=St(Jb),xy.onerror=Gn(l2),Dy.fail=l2,Dy.stop=y2=>{Dy.stop=Dy.continue=Dy.continuePrimaryKey=Dy.advance=$b,Jb(y2)}}),Yb=()=>{if(xy.result)try{e0()}catch(Jb){Dy.fail(Jb)}else Dy.done=!0,Dy.start=()=>{throw new Error("Cursor behind last entry")},Dy.stop()};return xy.onsuccess=St(Jb=>{xy.onsuccess=Yb,Yb()}),Dy.continue=Bg,Dy.continuePrimaryKey=yy,Dy.advance=wy,Yb(),Hb},Zr(Dy)},zs)})}function He(Ye){return Je=>new Promise((vn,La)=>{vn=St(vn);let{trans:sr,values:Zr,limit:zs,query:za}=Je,Hs=zs===1/0?void 0:zs,{index:lc,range:Ty}=za,_y=sr.objectStore(me),xy=lc.isPrimaryKey?_y:_y.index(lc.name),Bb=o(Ty);if(zs===0)return vn({result:[]});if(Ye){let Dy=Zr?xy.getAll(Bb,Hs):xy.getAllKeys(Bb,Hs);Dy.onsuccess=Bg=>vn({result:Bg.target.result}),Dy.onerror=Gn(La)}else{let Dy=0,Bg=Zr||!("openKeyCursor"in xy)?xy.openCursor(Bb):xy.openKeyCursor(Bb),yy=[];Bg.onsuccess=wy=>{let Ay=Bg.result;if(!Ay)return vn({result:yy});if(yy.push(Zr?Ay.value:Ay.primaryKey),++Dy===zs)return vn({result:yy});Ay.continue()},Bg.onerror=Gn(La)}})}return{name:me,schema:m,mutate:xe,getMany({trans:Ye,keys:Je}){return new Promise((vn,La)=>{vn=St(vn);let sr=Ye.objectStore(me),Zr=Je.length,zs=new Array(Zr),za=0,Hs=0,lc,Ty=xy=>{let Bb=xy.target;(zs[Bb._pos]=Bb.result)!=null,++Hs===za&&vn(zs)},_y=Gn(La);for(let xy=0;xy<Zr;++xy)Je[xy]!=null&&(lc=sr.get(Je[xy]),lc._pos=xy,lc.onsuccess=Ty,lc.onerror=_y,++za);za===0&&vn(zs)})},get({trans:Ye,key:Je}){return new Promise((vn,La)=>{vn=St(vn);let sr=Ye.objectStore(me).get(Je);sr.onsuccess=Zr=>vn(Zr.target.result),sr.onerror=Gn(La)})},query:He(u),openCursor:Ne,count({query:Ye,trans:Je}){let{index:vn,range:La}=Ye;return new Promise((sr,Zr)=>{let zs=Je.objectStore(me),za=vn.isPrimaryKey?zs:zs.index(vn.name),Hs=o(La),lc=Hs?za.count(Hs):za.count();lc.onsuccess=St(Ty=>sr(Ty.target.result)),lc.onerror=Gn(Zr)})}}}let{schema:s,hasGetAll:u}=r(e,n),l=s.tables.map(m=>a(m)),c={};return l.forEach(m=>c[m.name]=m),{stack:"dbcore",transaction:e.transaction.bind(e),table(m){if(!c[m])throw new Error(`Table '${m}' not found`);return c[m]},MIN_KEY:-1/0,MAX_KEY:el(t),schema:s}}function YP(e,t){return t.reduce((n,{create:r})=>({...n,...r(n)}),e)}function JP(e,t,{IDBKeyRange:n,indexedDB:r},o){return{dbcore:YP(QP(t,n,o),e.dbcore)}}function $m({_novip:e},t){let n=t.db,r=JP(e._middlewares,n,e._deps,t);e.core=r.dbcore,e.tables.forEach(o=>{let a=o.name;e.core.schema.tables.some(s=>s.name===a)&&(o.core=e.core.table(a),e[a]instanceof e.Table&&(e[a].core=o.core))})}function Nf({_novip:e},t,n,r){n.forEach(o=>{let a=r[o];t.forEach(s=>{let u=cm(s,o);(!u||"value"in u&&u.value===void 0)&&(s===e.Transaction.prototype||s instanceof e.Transaction?wi(s,o,{get(){return this.table(o)},set(l){ix(this,o,{value:l,writable:!0,configurable:!0,enumerable:!0})}}):s[o]=new e.Table(o,a))})})}function Bm({_novip:e},t){t.forEach(n=>{for(let r in n)n[r]instanceof e.Table&&delete n[r]})}function XP(e,t){return e._cfg.version-t._cfg.version}function ZP(e,t,n,r){let o=e._dbSchema,a=e._createTransaction("readwrite",e._storeNames,o);a.create(n),a._completion.catch(r);let s=a._reject.bind(a),u=ce.transless||ce;no(()=>{ce.trans=a,ce.transless=u,t===0?(zt(o).forEach(l=>{qm(n,l,o[l].primKey,o[l].indexes)}),$m(e,n),ee.follow(()=>e.on.populate.fire(a)).catch(s)):ej(e,t,a,n).catch(s)})}function ej({_novip:e},t,n,r){let o=[],a=e._versions,s=e._dbSchema=zm(e,e.idbdb,r),u=!1;a.filter(c=>c._cfg.version>=t).forEach(c=>{o.push(()=>{let m=s,me=c._cfg.dbschema;Um(e,m,r),Um(e,me,r),s=e._dbSchema=me;let xe=Ux(m,me);xe.add.forEach(He=>{qm(r,He[0],He[1].primKey,He[1].indexes)}),xe.change.forEach(He=>{if(He.recreate)throw new ge.Upgrade("Not yet support for changing primary key");{let Ye=r.objectStore(He.name);He.add.forEach(Je=>Vm(Ye,Je)),He.change.forEach(Je=>{Ye.deleteIndex(Je.name),Vm(Ye,Je)}),He.del.forEach(Je=>Ye.deleteIndex(Je))}});let Ne=c._cfg.contentUpgrade;if(Ne&&c._cfg.version>t){$m(e,r),n._memoizedTables={},u=!0;let He=ux(me);xe.del.forEach(La=>{He[La]=m[La]}),Bm(e,[e.Transaction.prototype]),Nf(e,[e.Transaction.prototype],zt(He),He),n.schema=He;let Ye=hm(Ne);Ye&&ps();let Je,vn=ee.follow(()=>{if(Je=Ne(n),Je&&Ye){var La=Ei.bind(null,null);Je.then(La,La)}});return Je&&typeof Je.then=="function"?ee.resolve(Je):vn.then(()=>Je)}}),o.push(m=>{if(!u||!MP){let me=c._cfg.dbschema;rj(me,m)}Bm(e,[e.Transaction.prototype]),Nf(e,[e.Transaction.prototype],e._storeNames,e._dbSchema),n.schema=e._dbSchema})});function l(){return o.length?ee.resolve(o.shift()(n.idbtrans)).then(l):ee.resolve()}return l().then(()=>{tj(s,r)})}function Ux(e,t){let n={del:[],add:[],change:[]},r;for(r in e)t[r]||n.del.push(r);for(r in t){let o=e[r],a=t[r];if(!o)n.add.push([r,a]);else{let s={name:r,def:a,recreate:!1,del:[],add:[],change:[]};if(""+(o.primKey.keyPath||"")!=""+(a.primKey.keyPath||"")||o.primKey.auto!==a.primKey.auto&&!If)s.recreate=!0,n.change.push(s);else{let u=o.idxByName,l=a.idxByName,c;for(c in u)l[c]||s.del.push(c);for(c in l){let m=u[c],me=l[c];m?m.src!==me.src&&s.change.push(me):s.add.push(me)}(s.del.length>0||s.add.length>0||s.change.length>0)&&n.change.push(s)}}}return n}function qm(e,t,n,r){let o=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(a=>Vm(o,a)),o}function tj(e,t){zt(e).forEach(n=>{t.db.objectStoreNames.contains(n)||qm(t,n,e[n].primKey,e[n].indexes)})}function rj(e,t){[].slice.call(t.db.objectStoreNames).forEach(n=>e[n]==null&&t.db.deleteObjectStore(n))}function Vm(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function zm(e,t,n){let r={};return vf(t.objectStoreNames,0).forEach(o=>{let a=n.objectStore(o),s=a.keyPath,u=Nm(qx(s),s||"",!1,!1,!!a.autoIncrement,s&&typeof s!="string",!0),l=[];for(let m=0;m<a.indexNames.length;++m){let me=a.index(a.indexNames[m]);s=me.keyPath;var c=Nm(me.name,s,!!me.unique,!!me.multiEntry,!1,s&&typeof s!="string",!1);l.push(c)}r[o]=Vx(o,u,l)}),r}function nj({_novip:e},t,n){e.verno=t.version/10;let r=e._dbSchema=zm(e,t,n);e._storeNames=vf(t.objectStoreNames,0),Nf(e,[e._allTables],zt(r),r)}function ij(e,t){let n=zm(e,e.idbdb,t),r=Ux(n,e._dbSchema);return!(r.add.length||r.change.some(o=>o.add.length||o.change.length))}function Um({_novip:e},t,n){let r=n.db.objectStoreNames;for(let o=0;o<r.length;++o){let a=r[o],s=n.objectStore(a);e._hasGetAll="getAll"in s;for(let u=0;u<s.indexNames.length;++u){let l=s.indexNames[u],c=s.index(l).keyPath,m=typeof c=="string"?c:"["+vf(c).join("+")+"]";if(t[a]){let me=t[a].idxByName[m];me&&(me.name=l,delete t[a].idxByName[m],t[a].idxByName[l]=me)}}}typeof navigator!="undefined"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&gt.WorkerGlobalScope&&gt instanceof gt.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}function oj(e){return e.split(",").map((t,n)=>{t=t.trim();let r=t.replace(/([&*]|\+\+)/g,""),o=/^\[/.test(r)?r.match(/^\[(.*)\]$/)[1].split("+"):r;return Nm(r,o||null,/\&/.test(t),/\*/.test(t),/\+\+/.test(t),wr(o),n===0)})}var Wx=class{_parseStoresSpec(e,t){zt(e).forEach(n=>{if(e[n]!==null){var r=oj(e[n]),o=r.shift();if(o.multi)throw new ge.Schema("Primary key cannot be multi-valued");r.forEach(a=>{if(a.auto)throw new ge.Schema("Only primary key can be marked as autoIncrement (++)");if(!a.keyPath)throw new ge.Schema("Index must have a name and cannot be an empty string")}),t[n]=Vx(n,o,r)}})}stores(e){let t=this.db;this._cfg.storesSource=this._cfg.storesSource?Fr(this._cfg.storesSource,e):e;let n=t._versions,r={},o={};return n.forEach(a=>{Fr(r,a._cfg.storesSource),o=a._cfg.dbschema={},a._parseStoresSpec(r,o)}),t._dbSchema=o,Bm(t,[t._allTables,t,t.Transaction.prototype]),Nf(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],zt(o),o),t._storeNames=zt(o),this}upgrade(e){return this._cfg.contentUpgrade=vm(this._cfg.contentUpgrade||ut,e),this}};function aj(e){return Ju(Wx.prototype,function(t){this.db=e,this._cfg={version:t,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function Wm(e,t){let n=e._dbNamesDB;return n||(n=e._dbNamesDB=new Ci(Mf,{addons:[],indexedDB:e,IDBKeyRange:t}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function Hm(e){return e&&typeof e.databases=="function"}function sj({indexedDB:e,IDBKeyRange:t}){return Hm(e)?Promise.resolve(e.databases()).then(n=>n.map(r=>r.name).filter(r=>r!==Mf)):Wm(e,t).toCollection().primaryKeys()}function uj({indexedDB:e,IDBKeyRange:t},n){!Hm(e)&&n!==Mf&&Wm(e,t).put({name:n}).catch(ut)}function lj({indexedDB:e,IDBKeyRange:t},n){!Hm(e)&&n!==Mf&&Wm(e,t).delete(n).catch(ut)}function Km(e){return no(function(){return ce.letThrough=!0,e()})}function cj(){var e=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!e||!indexedDB.databases)return Promise.resolve();var t;return new Promise(function(n){var r=function(){return indexedDB.databases().finally(n)};t=setInterval(r,100),r()}).finally(function(){return clearInterval(t)})}function fj(e){let t=e._state,{indexedDB:n}=e._deps;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(()=>t.dbOpenError?rr(t.dbOpenError):e);Kn&&(t.openCanceller._stackHolder=Qo()),t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;let r=t.openCanceller;function o(){if(t.openCanceller!==r)throw new ge.DatabaseClosed("db.open() was cancelled")}let a=t.dbReadyResolve,s=null,u=!1;return ee.race([r,(typeof navigator=="undefined"?ee.resolve():cj()).then(()=>new ee((l,c)=>{if(o(),!n)throw new ge.MissingAPI;let m=e.name,me=t.autoSchema?n.open(m):n.open(m,Math.round(e.verno*10));if(!me)throw new ge.MissingAPI;me.onerror=Gn(c),me.onblocked=St(e._fireOnBlocked),me.onupgradeneeded=St(xe=>{if(s=me.transaction,t.autoSchema&&!e._options.allowEmptyDB){me.onerror=Xu,s.abort(),me.result.close();let He=n.deleteDatabase(m);He.onsuccess=He.onerror=St(()=>{c(new ge.NoSuchDatabase(`Database ${m} doesnt exist`))})}else{s.onerror=Gn(c);var Ne=xe.oldVersion>Math.pow(2,62)?0:xe.oldVersion;u=Ne<1,e._novip.idbdb=me.result,ZP(e,Ne/10,s,c)}},c),me.onsuccess=St(()=>{s=null;let xe=e._novip.idbdb=me.result,Ne=vf(xe.objectStoreNames);if(Ne.length>0)try{let He=xe.transaction(HP(Ne),"readonly");t.autoSchema?nj(e,xe,He):(Um(e,e._dbSchema,He),ij(e,He)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),$m(e,He)}catch{}Qu.push(e),xe.onversionchange=St(He=>{t.vcFired=!0,e.on("versionchange").fire(He)}),xe.onclose=St(He=>{e.on("close").fire(He)}),u&&uj(e._deps,m),l()},c)}))]).then(()=>(o(),t.onReadyBeingFired=[],ee.resolve(Km(()=>e.on.ready.fire(e.vip))).then(function l(){if(t.onReadyBeingFired.length>0){let c=t.onReadyBeingFired.reduce(vm,ut);return t.onReadyBeingFired=[],ee.resolve(Km(()=>c(e.vip))).then(l)}}))).finally(()=>{t.onReadyBeingFired=null,t.isBeingOpened=!1}).then(()=>e).catch(l=>{t.dbOpenError=l;try{s&&s.abort()}catch{}return r===t.openCanceller&&e._close(),rr(l)}).finally(()=>{t.openComplete=!0,a()})}function Gm(e){var t=s=>e.next(s),n=s=>e.throw(s),r=a(t),o=a(n);function a(s){return u=>{var l=s(u),c=l.value;return l.done?c:!c||typeof c.then!="function"?wr(c)?Promise.all(c).then(r,o):r(c):c.then(r,o)}}return a(t)()}function pj(e,t,n){var r=arguments.length;if(r<2)throw new ge.InvalidArgument("Too few arguments");for(var o=new Array(r-1);--r;)o[r-1]=arguments[r];n=o.pop();var a=lx(o);return[e,a,n]}function dj(e,t,n,r,o){return ee.resolve().then(()=>{let a=ce.transless||ce,s=e._createTransaction(t,n,e._dbSchema,r),u={trans:s,transless:a};r?s.idbtrans=r.idbtrans:s.create();let l=hm(o);l&&ps();let c,m=ee.follow(()=>{if(c=o.call(s,s),c)if(l){var me=Ei.bind(null,null);c.then(me,me)}else typeof c.next=="function"&&typeof c.throw=="function"&&(c=Gm(c))},u);return(c&&typeof c.then=="function"?ee.resolve(c).then(me=>s.active?me:rr(new ge.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))):m.then(()=>c)).then(me=>(r&&s._resolve(),s._completion.then(()=>me))).catch(me=>(s._reject(me),rr(me)))})}function Lf(e,t,n){let r=wr(e)?e.slice():[e];for(let o=0;o<n;++o)r.push(t);return r}function hj(e){return{...e,table(t){let n=e.table(t),{schema:r}=n,o={},a=[];function s(me,xe,Ne){let He=tl(me),Ye=o[He]=o[He]||[],Je=me==null?0:typeof me=="string"?1:me.length,vn=xe>0,La={...Ne,isVirtual:vn,keyTail:xe,keyLength:Je,extractKey:Lm(me),unique:!vn&&Ne.unique};if(Ye.push(La),La.isPrimaryKey||a.push(La),Je>1){let sr=Je===2?me[0]:me.slice(0,Je-1);s(sr,xe+1,Ne)}return Ye.sort((sr,Zr)=>sr.keyTail-Zr.keyTail),La}let u=s(r.primaryKey.keyPath,0,r.primaryKey);o[":id"]=[u];for(let me of r.indexes)s(me.keyPath,0,me);function l(me){let xe=o[tl(me)];return xe&&xe[0]}function c(me,xe){return{type:me.type===1?2:me.type,lower:Lf(me.lower,me.lowerOpen?e.MAX_KEY:e.MIN_KEY,xe),lowerOpen:!0,upper:Lf(me.upper,me.upperOpen?e.MIN_KEY:e.MAX_KEY,xe),upperOpen:!0}}function m(me){let xe=me.query.index;return xe.isVirtual?{...me,query:{index:xe,range:c(me.query.range,xe.keyTail)}}:me}return{...n,schema:{...r,primaryKey:u,indexes:a,getIndexByKeyPath:l},count(me){return n.count(m(me))},query(me){return n.query(m(me))},openCursor(me){let{keyTail:xe,isVirtual:Ne,keyLength:He}=me.query.index;if(!Ne)return n.openCursor(me);function Ye(Je){function vn(La){La!=null?Je.continue(Lf(La,me.reverse?e.MAX_KEY:e.MIN_KEY,xe)):me.unique?Je.continue(Je.key.slice(0,He).concat(me.reverse?e.MIN_KEY:e.MAX_KEY,xe)):Je.continue()}return Object.create(Je,{continue:{value:vn},continuePrimaryKey:{value(La,sr){Je.continuePrimaryKey(Lf(La,e.MAX_KEY,xe),sr)}},primaryKey:{get(){return Je.primaryKey}},key:{get(){let La=Je.key;return He===1?La[0]:La.slice(0,He)}},value:{get(){return Je.value}}})}return n.openCursor(m(me)).then(Je=>Je&&Ye(Je))}}}}}var mj={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:hj};function Qm(e,t,n,r){return n=n||{},r=r||"",zt(e).forEach(o=>{if(!on(t,o))n[r+o]=void 0;else{var a=e[o],s=t[o];if(typeof a=="object"&&typeof s=="object"&&a&&s){let u=pm(a),l=pm(s);u!==l?n[r+o]=t[o]:u==="Object"?Qm(a,s,n,r+o+"."):a!==s&&(n[r+o]=t[o])}else a!==s&&(n[r+o]=t[o])}}),zt(t).forEach(o=>{on(e,o)||(n[r+o]=t[o])}),n}function gj(e,t){return t.type==="delete"?t.keys:t.keys||t.values.map(e.extractKey)}var vj={stack:"dbcore",name:"HooksMiddleware",level:2,create:e=>({...e,table(t){let n=e.table(t),{primaryKey:r}=n.schema;return{...n,mutate(o){let a=ce.trans,{deleting:s,creating:u,updating:l}=a.table(t).hook;switch(o.type){case"add":if(u.fire===ut)break;return a._promise("readwrite",()=>c(o),!0);case"put":if(u.fire===ut&&l.fire===ut)break;return a._promise("readwrite",()=>c(o),!0);case"delete":if(s.fire===ut)break;return a._promise("readwrite",()=>c(o),!0);case"deleteRange":if(s.fire===ut)break;return a._promise("readwrite",()=>m(o),!0)}return n.mutate(o);function c(xe){let Ne=ce.trans,He=xe.keys||gj(r,xe);if(!He)throw new Error("Keys missing");return xe=xe.type==="add"||xe.type==="put"?{...xe,keys:He}:{...xe},xe.type!=="delete"&&(xe.values=[...xe.values]),xe.keys&&(xe.keys=[...xe.keys]),yj(n,xe,He).then(Ye=>{let Je=He.map((vn,La)=>{let sr=Ye[La],Zr={onerror:null,onsuccess:null};if(xe.type==="delete")s.fire.call(Zr,vn,sr,Ne);else if(xe.type==="add"||sr===void 0){let zs=u.fire.call(Zr,vn,xe.values[La],Ne);vn==null&&zs!=null&&(vn=zs,xe.keys[La]=vn,r.outbound||wn(xe.values[La],r.keyPath,vn))}else{let zs=Qm(sr,xe.values[La]),za=l.fire.call(Zr,zs,vn,sr,Ne);if(za){let Hs=xe.values[La];Object.keys(za).forEach(lc=>{on(Hs,lc)?Hs[lc]=za[lc]:wn(Hs,lc,za[lc])})}}return Zr});return n.mutate(xe).then(({failures:vn,results:La,numFailures:sr,lastResult:Zr})=>{for(let zs=0;zs<He.length;++zs){let za=La?La[zs]:He[zs],Hs=Je[zs];za==null?Hs.onerror&&Hs.onerror(vn[zs]):Hs.onsuccess&&Hs.onsuccess(xe.type==="put"&&Ye[zs]?xe.values[zs]:za)}return{failures:vn,results:La,numFailures:sr,lastResult:Zr}}).catch(vn=>(Je.forEach(La=>La.onerror&&La.onerror(vn)),Promise.reject(vn)))})}function m(xe){return me(xe.trans,xe.range,1e4)}function me(xe,Ne,He){return n.query({trans:xe,values:!1,query:{index:r,range:Ne},limit:He}).then(({result:Ye})=>c({type:"delete",keys:Ye,trans:xe}).then(Je=>Je.numFailures>0?Promise.reject(Je.failures[0]):Ye.length<He?{failures:[],numFailures:0,lastResult:void 0}:me(xe,{...Ne,lower:Ye[Ye.length-1],lowerOpen:!0},He)))}}}}})};function yj(e,t,n){return t.type==="add"?Promise.resolve([]):e.getMany({trans:t.trans,keys:n,cache:"immutable"})}function Hx(e,t,n){try{if(!t||t.keys.length<e.length)return null;let r=[];for(let o=0,a=0;o<t.keys.length&&a<e.length;++o)Rr(t.keys[o],e[a])===0&&(r.push(n?qu(t.values[o]):t.values[o]),++a);return r.length===e.length?r:null}catch{return null}}var _j={stack:"dbcore",level:-1,create:e=>({table:t=>{let n=e.table(t);return{...n,getMany:r=>{if(!r.cache)return n.getMany(r);let o=Hx(r.keys,r.trans._cache,r.cache==="clone");return o?ee.resolve(o):n.getMany(r).then(a=>(r.trans._cache={keys:r.keys,values:r.cache==="clone"?qu(a):a},a))},mutate:r=>(r.type!=="add"&&(r.trans._cache=null),n.mutate(r))}}})};function Ym(e){return!("from"in e)}var Di=function(e,t){if(this)Fr(this,arguments.length?{d:1,from:e,to:arguments.length>1?t:e}:{d:0});else{let n=new Di;return e&&"d"in e&&Fr(n,e),n}};ss(Di.prototype,{add(e){return $f(this,e),this},addKey(e){return rl(this,e,e),this},addKeys(e){return e.forEach(t=>rl(this,t,t)),this},[dm](){return Jm(this)}});function rl(e,t,n){let r=Rr(t,n);if(isNaN(r))return;if(r>0)throw RangeError();if(Ym(e))return Fr(e,{from:t,to:n,d:1});let o=e.l,a=e.r;if(Rr(n,e.from)<0)return o?rl(o,t,n):e.l={from:t,to:n,d:1,l:null,r:null},Kx(e);if(Rr(t,e.to)>0)return a?rl(a,t,n):e.r={from:t,to:n,d:1,l:null,r:null},Kx(e);Rr(t,e.from)<0&&(e.from=t,e.l=null,e.d=a?a.d+1:1),Rr(n,e.to)>0&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1);let s=!e.r;o&&!e.l&&$f(e,o),a&&s&&$f(e,a)}function $f(e,t){function n(r,{from:o,to:a,l:s,r:u}){rl(r,o,a),s&&n(r,s),u&&n(r,u)}Ym(t)||n(e,t)}function bj(e,t){let n=Jm(t),r=n.next();if(r.done)return!1;let o=r.value,a=Jm(e),s=a.next(o.from),u=s.value;for(;!r.done&&!s.done;){if(Rr(u.from,o.to)<=0&&Rr(u.to,o.from)>=0)return!0;Rr(o.from,u.from)<0?o=(r=n.next(u.from)).value:u=(s=a.next(o.from)).value}return!1}function Jm(e){let t=Ym(e)?null:{s:0,n:e};return{next(n){let r=arguments.length>0;for(;t;)switch(t.s){case 0:if(t.s=1,r)for(;t.n.l&&Rr(n,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!r||Rr(n,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function Kx(e){var t,n;let r=(((t=e.r)===null||t===void 0?void 0:t.d)||0)-(((n=e.l)===null||n===void 0?void 0:n.d)||0),o=r>1?"r":r<-1?"l":"";if(o){let a=o==="r"?"l":"r",s={...e},u=e[o];e.from=u.from,e.to=u.to,e[o]=u[o],s[o]=u[a],e[a]=s,s.d=Gx(s)}e.d=Gx(e)}function Gx({r:e,l:t}){return(e?t?Math.max(e.d,t.d):e.d:t?t.d:0)+1}var wj={stack:"dbcore",level:0,create:e=>{let t=e.schema.name,n=new Di(e.MIN_KEY,e.MAX_KEY);return{...e,table:r=>{let o=e.table(r),{schema:a}=o,{primaryKey:s}=a,{extractKey:u,outbound:l}=s,c={...o,mutate:xe=>{let Ne=xe.trans,He=Ne.mutatedParts||(Ne.mutatedParts={}),Ye=za=>{let Hs=`idb://${t}/${r}/${za}`;return He[Hs]||(He[Hs]=new Di)},Je=Ye(""),vn=Ye(":dels"),{type:La}=xe,[sr,Zr]=xe.type==="deleteRange"?[xe.range]:xe.type==="delete"?[xe.keys]:xe.values.length<50?[[],xe.values]:[],zs=xe.trans._cache;return o.mutate(xe).then(za=>{if(wr(sr)){La!=="delete"&&(sr=za.results),Je.addKeys(sr);let Hs=Hx(sr,zs);!Hs&&La!=="add"&&vn.addKeys(sr),(Hs||Zr)&&xj(Ye,a,Hs,Zr)}else if(sr){let Hs={from:sr.lower,to:sr.upper};vn.add(Hs),Je.add(Hs)}else Je.add(n),vn.add(n),a.indexes.forEach(Hs=>Ye(Hs.name).add(n));return za})}},m=({query:{index:xe,range:Ne}})=>{var He,Ye;return[xe,new Di((He=Ne.lower)!==null&&He!==void 0?He:e.MIN_KEY,(Ye=Ne.upper)!==null&&Ye!==void 0?Ye:e.MAX_KEY)]},me={get:xe=>[s,new Di(xe.key)],getMany:xe=>[s,new Di().addKeys(xe.keys)],count:m,query:m,openCursor:m};return zt(me).forEach(xe=>{c[xe]=function(Ne){let{subscr:He}=ce;if(He){let Ye=Zr=>{let zs=`idb://${t}/${r}/${Zr}`;return He[zs]||(He[zs]=new Di)},Je=Ye(""),vn=Ye(":dels"),[La,sr]=me[xe](Ne);if(Ye(La.name||"").add(sr),!La.isPrimaryKey)if(xe==="count")vn.add(n);else{let Zr=xe==="query"&&l&&Ne.values&&o.query({...Ne,values:!1});return o[xe].apply(this,arguments).then(zs=>{if(xe==="query"){if(l&&Ne.values)return Zr.then(({result:Hs})=>(Je.addKeys(Hs),zs));let za=Ne.values?zs.result.map(u):zs.result;Ne.values?Je.addKeys(za):vn.addKeys(za)}else if(xe==="openCursor"){let za=zs,Hs=Ne.values;return za&&Object.create(za,{key:{get(){return vn.addKey(za.primaryKey),za.key}},primaryKey:{get(){let lc=za.primaryKey;return vn.addKey(lc),lc}},value:{get(){return Hs&&Je.addKey(za.primaryKey),za.value}}})}return zs})}}return o[xe].apply(this,arguments)}}),c}}}};function xj(e,t,n,r){function o(a){let s=e(a.name||"");function u(c){return c!=null?a.extractKey(c):null}let l=c=>a.multiEntry&&wr(c)?c.forEach(m=>s.addKey(m)):s.addKey(c);(n||r).forEach((c,m)=>{let me=n&&u(n[m]),xe=r&&u(r[m]);Rr(me,xe)!==0&&(me!=null&&l(me),xe!=null&&l(xe))})}t.indexes.forEach(o)}var Ci=class{constructor(e,t){this._middlewares={},this.verno=0;let n=Ci.dependencies;this._options=t={addons:Ci.addons,autoOpen:!0,indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange,...t},this._deps={indexedDB:t.indexedDB,IDBKeyRange:t.IDBKeyRange};let{addons:r}=t;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;let o={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:ut,dbReadyPromise:null,cancelOpen:ut,openCanceller:null,autoSchema:!0};o.dbReadyPromise=new ee(a=>{o.dbReadyResolve=a}),o.openCanceller=new ee((a,s)=>{o.cancelOpen=s}),this._state=o,this.name=e,this.on=Yu(this,"populate","blocked","versionchange","close",{ready:[vm,ut]}),this.on.ready.subscribe=ox(this.on.ready.subscribe,a=>(s,u)=>{Ci.vip(()=>{let l=this._state;if(l.openComplete)l.dbOpenError||ee.resolve().then(s),u&&a(s);else if(l.onReadyBeingFired)l.onReadyBeingFired.push(s),u&&a(s);else{a(s);let c=this;u||a(function m(){c.on.ready.unsubscribe(s),c.on.ready.unsubscribe(m)})}})}),this.Collection=LP(this),this.Table=jP(this),this.Transaction=WP(this),this.Version=aj(this),this.WhereClause=UP(this),this.on("versionchange",a=>{a.newVersion>0?console.warn(`Another connection wants to upgrade database '${this.name}'. Closing db now to resume the upgrade.`):console.warn(`Another connection wants to delete database '${this.name}'. Closing db now to resume the delete request.`),this.close()}),this.on("blocked",a=>{!a.newVersion||a.newVersion<a.oldVersion?console.warn(`Dexie.delete('${this.name}') was blocked`):console.warn(`Upgrade '${this.name}' blocked by other connection holding version ${a.oldVersion/10}`)}),this._maxKey=el(t.IDBKeyRange),this._createTransaction=(a,s,u,l)=>new this.Transaction(a,s,u,this._options.chromeTransactionDurability,l),this._fireOnBlocked=a=>{this.on("blocked").fire(a),Qu.filter(s=>s.name===this.name&&s!==this&&!s._state.vcFired).map(s=>s.on("versionchange").fire(a))},this.use(mj),this.use(vj),this.use(wj),this.use(_j),this.vip=Object.create(this,{_vip:{value:!0}}),r.forEach(a=>a(this))}version(e){if(isNaN(e)||e<.1)throw new ge.Type("Given version is not a positive number");if(e=Math.round(e*10)/10,this.idbdb||this._state.isBeingOpened)throw new ge.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);let t=this._versions;var n=t.filter(r=>r._cfg.version===e)[0];return n||(n=new this.Version(e),t.push(n),t.sort(XP),n.stores({}),this._state.autoSchema=!1,n)}_whenReady(e){return this.idbdb&&(this._state.openComplete||ce.letThrough||this._vip)?e():new ee((t,n)=>{if(this._state.openComplete)return n(new ge.DatabaseClosed(this._state.dbOpenError));if(!this._state.isBeingOpened){if(!this._options.autoOpen){n(new ge.DatabaseClosed);return}this.open().catch(ut)}this._state.dbReadyPromise.then(t,n)}).then(e)}use({stack:e,create:t,level:n,name:r}){r&&this.unuse({stack:e,name:r});let o=this._middlewares[e]||(this._middlewares[e]=[]);return o.push({stack:e,create:t,level:n!=null?n:10,name:r}),o.sort((a,s)=>a.level-s.level),this}unuse({stack:e,name:t,create:n}){return e&&this._middlewares[e]&&(this._middlewares[e]=this._middlewares[e].filter(r=>n?r.create!==n:t?r.name!==t:!1)),this}open(){return fj(this)}_close(){let e=this._state,t=Qu.indexOf(this);if(t>=0&&Qu.splice(t,1),this.idbdb){try{this.idbdb.close()}catch{}this._novip.idbdb=null}e.dbReadyPromise=new ee(n=>{e.dbReadyResolve=n}),e.openCanceller=new ee((n,r)=>{e.cancelOpen=r})}close(){this._close();let e=this._state;this._options.autoOpen=!1,e.dbOpenError=new ge.DatabaseClosed,e.isBeingOpened&&e.cancelOpen(e.dbOpenError)}delete(){let e=arguments.length>0,t=this._state;return new ee((n,r)=>{let o=()=>{this.close();var a=this._deps.indexedDB.deleteDatabase(this.name);a.onsuccess=St(()=>{lj(this._deps,this.name),n()}),a.onerror=Gn(r),a.onblocked=this._fireOnBlocked};if(e)throw new ge.InvalidArgument("Arguments not allowed in db.delete()");t.isBeingOpened?t.dbReadyPromise.then(o):o()})}backendDB(){return this.idbdb}isOpen(){return this.idbdb!==null}hasBeenClosed(){let e=this._state.dbOpenError;return e&&e.name==="DatabaseClosed"}hasFailed(){return this._state.dbOpenError!==null}dynamicallyOpened(){return this._state.autoSchema}get tables(){return zt(this._allTables).map(e=>this._allTables[e])}transaction(){let e=pj.apply(this,arguments);return this._transaction.apply(this,e)}_transaction(e,t,n){let r=ce.trans;(!r||r.db!==this||e.indexOf("!")!==-1)&&(r=null);let o=e.indexOf("?")!==-1;e=e.replace("!","").replace("?","");let a,s;try{if(s=t.map(l=>{var c=l instanceof this.Table?l.name:l;if(typeof c!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return c}),e=="r"||e===Im)a=Im;else if(e=="rw"||e==Mm)a=Mm;else throw new ge.InvalidArgument("Invalid transaction mode: "+e);if(r){if(r.mode===Im&&a===Mm)if(o)r=null;else throw new ge.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");r&&s.forEach(l=>{if(r&&r.storeNames.indexOf(l)===-1)if(o)r=null;else throw new ge.SubTransaction("Table "+l+" not included in parent transaction.")}),o&&r&&!r.active&&(r=null)}}catch(l){return r?r._promise(null,(c,m)=>{m(l)}):rr(l)}let u=dj.bind(null,this,a,s,r,n);return r?r._promise(a,u,"lock"):ce.trans?ds(ce.transless,()=>this._whenReady(u)):this._whenReady(u)}table(e){if(!on(this._allTables,e))throw new ge.InvalidTable(`Table ${e} does not exist`);return this._allTables[e]}},Sj=typeof Symbol!="undefined"&&"observable"in Symbol?Symbol.observable:"@@observable",Qx=class{constructor(e){this._subscribe=e}subscribe(e,t,n){return this._subscribe(!e||typeof e=="function"?{next:e,error:t,complete:n}:e)}[Sj](){return this}};function Yx(e,t){return zt(t).forEach(n=>{let r=e[n]||(e[n]=new Di);$f(r,t[n])}),e}function Ej(e){return new Qx(t=>{let n=hm(e);function r(Ne){n&&ps();let He=()=>no(e,{subscr:Ne,trans:null}),Ye=ce.trans?ds(ce.transless,He):He();return n&&Ye.then(Ei,Ei),Ye}let o=!1,a={},s={},u={get closed(){return o},unsubscribe:()=>{o=!0,so.storagemutated.unsubscribe(me)}};t.start&&t.start(u);let l=!1,c=!1;function m(){return zt(s).some(Ne=>a[Ne]&&bj(a[Ne],s[Ne]))}let me=Ne=>{Yx(a,Ne),m()&&xe()},xe=()=>{if(l||o)return;a={};let Ne={},He=r(Ne);c||(so(Zu,me),c=!0),l=!0,Promise.resolve(He).then(Ye=>{l=!1,!o&&(m()?xe():(a={},s=Ne,t.next&&t.next(Ye)))},Ye=>{l=!1,t.error&&t.error(Ye),u.unsubscribe()})};return xe(),u})}var Xm;try{Xm={indexedDB:gt.indexedDB||gt.mozIndexedDB||gt.webkitIndexedDB||gt.msIndexedDB,IDBKeyRange:gt.IDBKeyRange||gt.webkitIDBKeyRange}}catch{Xm={indexedDB:null,IDBKeyRange:null}}var ta=Ci;ss(ta,{..._f,delete(e){return new ta(e,{addons:[]}).delete()},exists(e){return new ta(e,{addons:[]}).open().then(t=>(t.close(),!0)).catch("NoSuchDatabaseError",()=>!1)},getDatabaseNames(e){try{return sj(ta.dependencies).then(e)}catch{return rr(new ge.MissingAPI)}},defineClass(){function e(t){Fr(this,t)}return e},ignoreTransaction(e){return ce.trans?ds(ce.transless,e):e()},vip:Km,async:function(e){return function(){try{var t=Gm(e.apply(this,arguments));return!t||typeof t.then!="function"?ee.resolve(t):t}catch(n){return rr(n)}}},spawn:function(e,t,n){try{var r=Gm(e.apply(n,t||[]));return!r||typeof r.then!="function"?ee.resolve(r):r}catch(o){return rr(o)}},currentTransaction:{get:()=>ce.trans||null},waitFor:function(e,t){let n=ee.resolve(typeof e=="function"?ta.ignoreTransaction(e):e).timeout(t||6e4);return ce.trans?ce.trans.waitFor(n):n},Promise:ee,debug:{get:()=>Kn,set:e=>{fx(e,e==="dexie"?()=>!0:Ix)}},derive:us,extend:Fr,props:ss,override:ox,Events:Yu,on:so,liveQuery:Ej,extendObservabilitySet:Yx,getByKeyPath:xi,setByKeyPath:wn,delByKeyPath:oP,shallowClone:ux,deepClone:qu,getObjectDiff:Qm,cmp:Rr,asap:ax,minKey:Am,addons:[],connections:Qu,errnames:dP,dependencies:Xm,semVer:Tx,version:Tx.split(".").map(e=>parseInt(e)).reduce((e,t,n)=>e+t/Math.pow(10,n*2))});ta.maxKey=el(ta.dependencies.IDBKeyRange);typeof dispatchEvent!="undefined"&&typeof addEventListener!="undefined"&&(so(Zu,e=>{if(!Oi){let t;If?(t=document.createEvent("CustomEvent"),t.initCustomEvent(ao,!0,!0,e)):t=new CustomEvent(ao,{detail:e}),Oi=!0,dispatchEvent(t),Oi=!1}}),addEventListener(ao,({detail:e})=>{Oi||Bf(e)}));function Bf(e){let t=Oi;try{Oi=!0,so.storagemutated.fire(e)}finally{Oi=t}}var Oi=!1;if(typeof BroadcastChannel!="undefined"){let e=new BroadcastChannel(ao);so(Zu,t=>{Oi||e.postMessage(t)}),e.onmessage=t=>{t.data&&Bf(t.data)}}else if(typeof self!="undefined"&&typeof navigator!="undefined"){so(Zu,t=>{try{Oi||(typeof localStorage!="undefined"&&localStorage.setItem(ao,JSON.stringify({trig:Math.random(),changedParts:t})),typeof self.clients=="object"&&[...self.clients.matchAll({includeUncontrolled:!0})].forEach(n=>n.postMessage({type:ao,changedParts:t})))}catch{}}),addEventListener("storage",t=>{if(t.key===ao){let n=JSON.parse(t.newValue);n&&Bf(n.changedParts)}});let e=self.document&&navigator.serviceWorker;e&&e.addEventListener("message",kj)}function kj({data:e}){e&&e.type===ao&&Bf(e.changedParts)}ee.rejectionMapper=mP;fx(Kn,Ix);v();v();v();function ra(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function qf(e){ra(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new Date(e.getTime()):typeof e=="number"||t==="[object Number]"?new Date(e):((typeof e=="string"||t==="[object String]")&&typeof console!="undefined"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn(new Error().stack)),new Date(NaN))}v();var Jx=6e4;v();function Zm(e,t){return ra(2,arguments),qf(e).getTime()-qf(t).getTime()}v();var Xx={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(e){return e<0?Math.ceil(e):Math.floor(e)}},Cj="trunc";function Zx(e){return e?Xx[e]:Xx[Cj]}v();function gs(e,t,n){ra(2,arguments);var r=Zm(e,t)/Jx;return Zx(n==null?void 0:n.roundingMethod)(r)}var Vf=class extends Ci{constructor(e,t=1){super(e),this.version(t).stores({messages:"id, expression, timestamp",profile:"id, expression, timestamp",ui:"id, data, timestamp"})}},eg=class{constructor(e,t=1){this.db=new Vf(e,t)}async save(e,t){await this.db.profile.put({id:e,expression:t,timestamp:new Date})}async get(e){let t=await this.db.profile.get(e),n=new Date;if(t&&gs(n,t.timestamp)<=5)return t.expression}},tg=class{constructor(e,t=1){this.db=new Vf(e,t)}async save(e,t){await this.db.messages.put({id:e,expression:t,timestamp:new Date})}async saveAll(e){let t=e.map(n=>({id:n.id,expression:n,timestamp:new Date}));await this.db.messages.bulkPut(t)}async get(e){let t=await this.db.messages.get(e),n=new Date;if(t&&gs(n,t.timestamp)<=5)return t.expression}async getAll(){return(await this.db.messages.toArray()).reduce((e,t)=>{let n=new Date;return t&&gs(n,t.timestamp)<=5?{...e,[t.id]:t.expression}:e},{})}},rg=class{constructor(e,t=1){this.db=new Vf(e,t)}async save(e,t){await this.db.ui.put({id:e,data:t})}async get(e){let t=await this.db.ui.get(e);if(t)return t.data}},eS={state:{isFetchingMessages:!1,keyedMessages:{},scrollPosition:0,hasNewMessage:!1,isMessageFromSelf:!1,showLoadMore:!0},methods:{loadMore:()=>null,sendReply:()=>null,removeReaction:()=>null,addReaction:()=>null,sendMessage:()=>null,saveScrollPos:()=>null,setHasNewMessage:()=>null,setIsMessageFromSelf:()=>null}},tS=ur(eS),ng,rS;function ig({perspectiveUuid:e,children:t,channelId:n}){Le(""),pt();let r=pt(),[o,a]=Le(eS.state),[s,u]=Le();pt(!1),we(()=>{l()},[]),we(()=>{n&&(ng=new rg(`${e}://${n}`),rS=new tg(`${e}://${n}`))},[n]);async function l(){let Hs=await Hn();u({...Hs})}let c=nx(o.keyedMessages,"asc");we(()=>{e&&n&&(ng.get("scroll-position").then(Hs=>{a(lc=>({...lc,scrollPosition:parseInt(Hs)}))}),He({again:!1}))},[e,n,s]),we(()=>(e&&m(),()=>{var Hs,lc;(Hs=r.current)==null||Hs.removeListener("link-added",xe),(lc=r.current)==null||lc.removeListener("link-removed",xe)}),[e]);async function m(){r.current=await mf({perspectiveUuid:e,added:xe,removed:Ne})}we(()=>{rS.saveAll(Object.values(o.keyedMessages))},[JSON.stringify(o.keyedMessages)]),we(()=>{ng.save("scroll-position",o.scrollPosition)},[o.scrollPosition]);function me(Hs,lc){return{...Hs,hasNewMessage:!0,keyedMessages:{...Hs.keyedMessages,[lc.id]:{...lc}}}}async function xe(Hs){console.log("Got message link",Hs);let lc=await Hn();if(Go.message(Hs)&&await $e.perspective.queryProlog(e,`triple("${n}", "${bi}", "${Hs.data.target}").`)){let Ty=um(Hs);Ty&&(a(_y=>me(_y,Ty)),a(_y=>({..._y,isMessageFromSelf:Hs.author===lc.did})))}if(Go.reply(Hs)&&await $e.perspective.queryProlog(e,`triple("${n}", "${bi}", "${Hs.data.source}").`)){let Ty=um(Hs);a(_y=>me(_y,Ty)),a(_y=>({..._y,isMessageFromSelf:Hs.author===lc.did}))}if(Go.reaction(Hs)){let Ty=Hs.data.source;a(_y=>{let xy=_y.keyedMessages[Ty];if(xy){let Bb=xy.reactions.find(Dy=>Dy.content===Hs.data.target&&Dy.author===Hs.author);return console.log({linkFound:Bb,link:Hs,message:xy}),Bb?_y:{..._y,keyedMessages:{..._y.keyedMessages,[Ty]:{...xy,reactions:[...xy.reactions,{author:Hs.author,content:Hs.data.target,timestamp:Hs.timestamp}]}}}}return _y})}}async function Ne(Hs){if(Hs.data.predicate===Wn){let lc=Hs.data.source;a(Ty=>{let _y=Ty.keyedMessages[lc];if(!_y)return Ty;function xy(Bb,Dy){return!(Bb.author===Dy.author&&Bb.content===Dy.data.target)}return{...Ty,keyedMessages:{...Ty.keyedMessages,[lc]:{..._y,reactions:_y.reactions.filter(Bb=>xy(Bb,Hs))}}}})}}async function He(Hs){console.log("Fetch messages with from: ",Hs.from,"and to: ",Hs.to),a(_y=>({..._y,isFetchingMessages:!0})),{...o.keyedMessages};let{keyedMessages:lc,expressionLinkLength:Ty}=await Kw({perspectiveUuid:e,channelId:n,from:Hs==null?void 0:Hs.from,to:Hs==null?void 0:Hs.to});a(_y=>({..._y,keyedMessages:{..._y.keyedMessages,...lc}})),a(_y=>({..._y,showLoadMore:Ty===35,isFetchingMessages:!1}))}async function Ye(Hs){Qw({perspectiveUuid:e,lastMessage:n,message:Hs})}async function Je(Hs,lc){return rx({perspectiveUuid:e,message:Hs,replyUrl:lc,channelId:n})}async function vn(Hs,lc){console.log("addReaction"),tx({perspectiveUuid:e,messageUrl:Hs,reaction:lc})}function La(Hs){a(lc=>({...lc,isMessageFromSelf:Hs}))}async function sr(Hs){return console.log("removeReaction",Hs),Zw({perspectiveUuid:e,linkExpression:Hs})}async function Zr(){let Hs=c[0];console.log("Loading more messages with oldest timestamp",Hs),He({from:Hs?new Date(Hs.timestamp):new Date,again:!1})}function zs(Hs){a(lc=>({...lc,scrollPosition:Hs}))}function za(Hs){a(lc=>({...lc,hasNewMessage:Hs}))}return Nt.createElement(tS.Provider,{value:{state:{...o,messages:c},methods:{loadMore:Zr,sendMessage:Ye,addReaction:vn,sendReply:Je,removeReaction:sr,saveScrollPos:zs,setHasNewMessage:za,setIsMessageFromSelf:La}}},t)}var na=tS;v();v();v();v();var nS="sioc://has_username",iS="sioc://has_given_name",oS="sioc://has_family_name",aS="sioc://has_profile_image",sS="sioc://has_profile_thumbnail_image",uS="flux://profile",lS="sioc://has_email",cS="sioc://has_bio",fS="sioc://has_bg_image";async function og(e){return new Promise(async(t,n)=>{setTimeout(()=>{t("")},1e3);try{let r=await $e.expression.get(e);r&&t(r.data.slice(1,-1)),t("")}catch(r){console.error(r),t("")}})}async function nl(e){let t=(await $e.agent.byDID(e)).perspective.links;var n=window.location.pathname.split("/")[2];let r=new eg(`${n}://profile`,1),o=await r.get(e);if(o)return o;let a={username:"",bio:"",email:"",profileBg:"",profilePicture:"",thumbnailPicture:"",givenName:"",familyName:"",did:e};for(let s of t.filter(u=>u.data.source===uS)){let u;switch(s.data.predicate){case nS:a.username=s.data.target;break;case cS:a.username=s.data.target;break;case iS:a.givenName=s.data.target;break;case oS:a.familyName=s.data.target;break;case aS:u=s.data.target,a.profilePicture=await og(u);break;case sS:u=s.data.target,a.thumbnailPicture=await og(u);break;case fS:u=s.data.target,a.profileBg=await og(u);break;case lS:a.email=s.data.target;break}}return r.save(e,a),a}async function pS({perspectiveUuid:e,neighbourhoodUrl:t,addProfile:n}){try{let r=await $e.perspective.queryProlog(e,`triple("${pf}", "${hf}", M).`);for(let o of r)nl(o.M).then(a=>{a&&n(a)})}catch(r){throw new Error(r)}}v();async function dS({perspectiveUuid:e,neighbourhoodUrl:t}){try{let n=await $e.perspective.queryProlog(e,`link("${pf}", "${df}", C, T, A).`),r={};if(n)for(let o of n){let a=o.C;r[a]={id:a,name:a,creatorDid:o.A}}return r}catch(n){throw new Error(n)}}var hS={state:{name:"",description:"",url:"",sourceUrl:"",languages:[],members:{},channels:{}},methods:{getProfile:e=>null}},mS=ur(hS);function ag({perspectiveUuid:e,children:t}){let[n,r]=Le(hS.state),o=pt();we(()=>{e&&c()},[e]),we(()=>{l(),u()},[n.url,n.sourceUrl]),we(()=>(e&&a(),()=>{var me;(me=o.current)==null||me.removeListener("link-added",s)}),[e]);async function a(){o.current=await mf({perspectiveUuid:e,added:s})}async function s(me){if(console.log("handle link added",me),Go.channel(me)){let xe={name:me.data.target,description:"",id:me.data.target};r(Ne=>Object.values(Ne.channels).find(He=>He.name===me.data.target)?Ne:{...Ne,channels:{...Ne.channels,[xe.id]:xe}})}Go.member(me)&&await m(me.data.target)}let u=async()=>{n.url&&await pS({perspectiveUuid:e,neighbourhoodUrl:n.sourceUrl||n.url,addProfile:me=>r(xe=>({...xe,members:{...xe.members,[me.did]:me}}))})},l=async()=>{if(n.url){let me=await dS({perspectiveUuid:e,neighbourhoodUrl:n.sourceUrl||n.url});r((xe,Ne)=>({...xe,channels:me}))}};async function c(){let me=await Lu(e);r({...n,name:me.name,description:me.description,url:me.url,sourceUrl:me.sourceUrl,members:{},channels:{}})}async function m(me){let xe=me.split("://").length>1?me.split("://")[1]:me;if(n.members[xe])return n.members[xe];{let Ne=await nl(me);return Ne?(r(He=>({...He,members:{...He.members,[Ne.did]:Ne}})),Ne):null}}return Nt.createElement(mS.Provider,{value:{state:n,methods:{getProfile:m}}},t)}var il=mS;v();var gS={state:{did:"",isInitialized:!1,isUnlocked:!1},methods:{}},vS=ur(gS);function sg({children:e}){let[t,n]=Le(gS.state);we(()=>{r()},[]);async function r(){let o=await Hn();n({...t,...o})}return Nt.createElement(vS.Provider,{value:{state:t,methods:{}}},e)}var ug=vS;v();v();fi();var yS={state:{currentReply:""},methods:{setCurrentReply:e=>null}},_S=ur(yS);function bS({children:e}){let[t,n]=Le(yS.state);return h(_S.Provider,{value:{state:t,methods:{setCurrentReply(r){n({...t,currentReply:r})}}}},e)}var vs=_S;v();v();v();v();v();v();function Sr(e){this.content=e}Sr.prototype={constructor:Sr,find:function(e){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===e)return t;return-1},get:function(e){var t=this.find(e);return t==-1?void 0:this.content[t+1]},update:function(e,t,n){var r=n&&n!=e?this.remove(n):this,o=r.find(e),a=r.content.slice();return o==-1?a.push(n||e,t):(a[o+1]=t,n&&(a[o]=n)),new Sr(a)},remove:function(e){var t=this.find(e);if(t==-1)return this;var n=this.content.slice();return n.splice(t,2),new Sr(n)},addToStart:function(e,t){return new Sr([e,t].concat(this.remove(e).content))},addToEnd:function(e,t){var n=this.remove(e).content.slice();return n.push(e,t),new Sr(n)},addBefore:function(e,t,n){var r=this.remove(t),o=r.content.slice(),a=r.find(e);return o.splice(a==-1?o.length:a,0,t,n),new Sr(o)},forEach:function(e){for(var t=0;t<this.content.length;t+=2)e(this.content[t],this.content[t+1])},prepend:function(e){return e=Sr.from(e),e.size?new Sr(e.content.concat(this.subtract(e).content)):this},append:function(e){return e=Sr.from(e),e.size?new Sr(this.subtract(e).content.concat(e.content)):this},subtract:function(e){var t=this;e=Sr.from(e);for(var n=0;n<e.content.length;n+=2)t=t.remove(e.content[n]);return t},get size(){return this.content.length>>1}};Sr.from=function(e){if(e instanceof Sr)return e;var t=[];if(e)for(var n in e)t.push(n,e[n]);return new Sr(t)};var Oj=Sr,lg=Oj;function wS(e,t,n){for(var r=0;;r++){if(r==e.childCount||r==t.childCount)return e.childCount==t.childCount?null:n;var o=e.child(r),a=t.child(r);if(o==a){n+=o.nodeSize;continue}if(!o.sameMarkup(a))return n;if(o.isText&&o.text!=a.text){for(var s=0;o.text[s]==a.text[s];s++)n++;return n}if(o.content.size||a.content.size){var u=wS(o.content,a.content,n+1);if(u!=null)return u}n+=o.nodeSize}}function xS(e,t,n,r){for(var o=e.childCount,a=t.childCount;;){if(o==0||a==0)return o==a?null:{a:n,b:r};var s=e.child(--o),u=t.child(--a),l=s.nodeSize;if(s==u){n-=l,r-=l;continue}if(!s.sameMarkup(u))return{a:n,b:r};if(s.isText&&s.text!=u.text){for(var c=0,m=Math.min(s.text.length,u.text.length);c<m&&s.text[s.text.length-c-1]==u.text[u.text.length-c-1];)c++,n--,r--;return{a:n,b:r}}if(s.content.size||u.content.size){var me=xS(s.content,u.content,n-1,r-1);if(me)return me}n-=l,r-=l}}var q=function(e,t){if(this.content=e,this.size=t||0,t==null)for(var n=0;n<e.length;n++)this.size+=e[n].nodeSize},zf={firstChild:{configurable:!0},lastChild:{configurable:!0},childCount:{configurable:!0}};q.prototype.nodesBetween=function(e,t,n,r,o){r===void 0&&(r=0);for(var a=0,s=0;s<t;a++){var u=this.content[a],l=s+u.nodeSize;if(l>e&&n(u,r+s,o,a)!==!1&&u.content.size){var c=s+1;u.nodesBetween(Math.max(0,e-c),Math.min(u.content.size,t-c),n,r+c)}s=l}};q.prototype.descendants=function(e){this.nodesBetween(0,this.size,e)};q.prototype.textBetween=function(e,t,n,r){var o="",a=!0;return this.nodesBetween(e,t,function(s,u){s.isText?(o+=s.text.slice(Math.max(e,u)-u,t-u),a=!n):s.isLeaf&&r?(o+=typeof r=="function"?r(s):r,a=!n):!a&&s.isBlock&&(o+=n,a=!0)},0),o};q.prototype.append=function(e){if(!e.size)return this;if(!this.size)return e;var t=this.lastChild,n=e.firstChild,r=this.content.slice(),o=0;for(t.isText&&t.sameMarkup(n)&&(r[r.length-1]=t.withText(t.text+n.text),o=1);o<e.content.length;o++)r.push(e.content[o]);return new q(r,this.size+e.size)};q.prototype.cut=function(e,t){if(t==null&&(t=this.size),e==0&&t==this.size)return this;var n=[],r=0;if(t>e)for(var o=0,a=0;a<t;o++){var s=this.content[o],u=a+s.nodeSize;u>e&&((a<e||u>t)&&(s.isText?s=s.cut(Math.max(0,e-a),Math.min(s.text.length,t-a)):s=s.cut(Math.max(0,e-a-1),Math.min(s.content.size,t-a-1))),n.push(s),r+=s.nodeSize),a=u}return new q(n,r)};q.prototype.cutByIndex=function(e,t){return e==t?q.empty:e==0&&t==this.content.length?this:new q(this.content.slice(e,t))};q.prototype.replaceChild=function(e,t){var n=this.content[e];if(n==t)return this;var r=this.content.slice(),o=this.size+t.nodeSize-n.nodeSize;return r[e]=t,new q(r,o)};q.prototype.addToStart=function(e){return new q([e].concat(this.content),this.size+e.nodeSize)};q.prototype.addToEnd=function(e){return new q(this.content.concat(e),this.size+e.nodeSize)};q.prototype.eq=function(e){if(this.content.length!=e.content.length)return!1;for(var t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0};zf.firstChild.get=function(){return this.content.length?this.content[0]:null};zf.lastChild.get=function(){return this.content.length?this.content[this.content.length-1]:null};zf.childCount.get=function(){return this.content.length};q.prototype.child=function(e){var t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t};q.prototype.maybeChild=function(e){return this.content[e]};q.prototype.forEach=function(e){for(var t=0,n=0;t<this.content.length;t++){var r=this.content[t];e(r,n,t),n+=r.nodeSize}};q.prototype.findDiffStart=function(e,t){return t===void 0&&(t=0),wS(this,e,t)};q.prototype.findDiffEnd=function(e,t,n){return t===void 0&&(t=this.size),n===void 0&&(n=e.size),xS(this,e,t,n)};q.prototype.findIndex=function(e,t){if(t===void 0&&(t=-1),e==0)return Uf(0,e);if(e==this.size)return Uf(this.content.length,e);if(e>this.size||e<0)throw new RangeError("Position "+e+" outside of fragment ("+this+")");for(var n=0,r=0;;n++){var o=this.child(n),a=r+o.nodeSize;if(a>=e)return a==e||t>0?Uf(n+1,a):Uf(n,r);r=a}};q.prototype.toString=function(){return"<"+this.toStringInner()+">"};q.prototype.toStringInner=function(){return this.content.join(", ")};q.prototype.toJSON=function(){return this.content.length?this.content.map(function(e){return e.toJSON()}):null};q.fromJSON=function(e,t){if(!t)return q.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new q(t.map(e.nodeFromJSON))};q.fromArray=function(e){if(!e.length)return q.empty;for(var t,n=0,r=0;r<e.length;r++){var o=e[r];n+=o.nodeSize,r&&o.isText&&e[r-1].sameMarkup(o)?(t||(t=e.slice(0,r)),t[t.length-1]=o.withText(t[t.length-1].text+o.text)):t&&t.push(o)}return new q(t||e,n)};q.from=function(e){if(!e)return q.empty;if(e instanceof q)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new q([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))};Object.defineProperties(q.prototype,zf);var cg={index:0,offset:0};function Uf(e,t){return cg.index=e,cg.offset=t,cg}q.empty=new q([],0);function Wf(e,t){if(e===t)return!0;if(!(e&&typeof e=="object")||!(t&&typeof t=="object"))return!1;var n=Array.isArray(e);if(Array.isArray(t)!=n)return!1;if(n){if(e.length!=t.length)return!1;for(var r=0;r<e.length;r++)if(!Wf(e[r],t[r]))return!1}else{for(var o in e)if(!(o in t)||!Wf(e[o],t[o]))return!1;for(var a in t)if(!(a in e))return!1}return!0}var ke=function(e,t){this.type=e,this.attrs=t};ke.prototype.addToSet=function(e){for(var t,n=!1,r=0;r<e.length;r++){var o=e[r];if(this.eq(o))return e;if(this.type.excludes(o.type))t||(t=e.slice(0,r));else{if(o.type.excludes(this.type))return e;!n&&o.type.rank>this.type.rank&&(t||(t=e.slice(0,r)),t.push(this),n=!0),t&&t.push(o)}}return t||(t=e.slice()),n||t.push(this),t};ke.prototype.removeFromSet=function(e){for(var t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e};ke.prototype.isInSet=function(e){for(var t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1};ke.prototype.eq=function(e){return this==e||this.type==e.type&&Wf(this.attrs,e.attrs)};ke.prototype.toJSON=function(){var e={type:this.type.name};for(var t in this.attrs){e.attrs=this.attrs;break}return e};ke.fromJSON=function(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");var n=e.marks[t.type];if(!n)throw new RangeError("There is no mark type "+t.type+" in this schema");return n.create(t.attrs)};ke.sameSet=function(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].eq(t[n]))return!1;return!0};ke.setFrom=function(e){if(!e||e.length==0)return ke.none;if(e instanceof ke)return[e];var t=e.slice();return t.sort(function(n,r){return n.type.rank-r.type.rank}),t};ke.none=[];function xn(e){var t=Error.call(this,e);return t.__proto__=xn.prototype,t}xn.prototype=Object.create(Error.prototype);xn.prototype.constructor=xn;xn.prototype.name="ReplaceError";var Y=function(e,t,n){this.content=e,this.openStart=t,this.openEnd=n},SS={size:{configurable:!0}};SS.size.get=function(){return this.content.size-this.openStart-this.openEnd};Y.prototype.insertAt=function(e,t){var n=kS(this.content,e+this.openStart,t,null);return n&&new Y(n,this.openStart,this.openEnd)};Y.prototype.removeBetween=function(e,t){return new Y(ES(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)};Y.prototype.eq=function(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd};Y.prototype.toString=function(){return this.content+"("+this.openStart+","+this.openEnd+")"};Y.prototype.toJSON=function(){if(!this.content.size)return null;var e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e};Y.fromJSON=function(e,t){if(!t)return Y.empty;var n=t.openStart||0,r=t.openEnd||0;if(typeof n!="number"||typeof r!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new Y(q.fromJSON(e,t.content),n,r)};Y.maxOpen=function(e,t){t===void 0&&(t=!0);for(var n=0,r=0,o=e.firstChild;o&&!o.isLeaf&&(t||!o.type.spec.isolating);o=o.firstChild)n++;for(var a=e.lastChild;a&&!a.isLeaf&&(t||!a.type.spec.isolating);a=a.lastChild)r++;return new Y(e,n,r)};Object.defineProperties(Y.prototype,SS);function ES(e,t,n){var r=e.findIndex(t),o=r.index,a=r.offset,s=e.maybeChild(o),u=e.findIndex(n),l=u.index,c=u.offset;if(a==t||s.isText){if(c!=n&&!e.child(l).isText)throw new RangeError("Removing non-flat range");return e.cut(0,t).append(e.cut(n))}if(o!=l)throw new RangeError("Removing non-flat range");return e.replaceChild(o,s.copy(ES(s.content,t-a-1,n-a-1)))}function kS(e,t,n,r){var o=e.findIndex(t),a=o.index,s=o.offset,u=e.maybeChild(a);if(s==t||u.isText)return r&&!r.canReplace(a,a,n)?null:e.cut(0,t).append(n).append(e.cut(t));var l=kS(u.content,t-s-1,n);return l&&e.replaceChild(a,u.copy(l))}Y.empty=new Y(q.empty,0,0);function Tj(e,t,n){if(n.openStart>e.depth)throw new xn("Inserted content deeper than insertion position");if(e.depth-n.openStart!=t.depth-n.openEnd)throw new xn("Inconsistent open depths");return DS(e,t,n,0)}function DS(e,t,n,r){var o=e.index(r),a=e.node(r);if(o==t.index(r)&&r<e.depth-n.openStart){var s=DS(e,t,n,r+1);return a.copy(a.content.replaceChild(o,s))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&e.depth==r&&t.depth==r){var u=e.parent,l=u.content;return oa(u,l.cut(0,e.parentOffset).append(n.content).append(l.cut(t.parentOffset)))}else{var c=Aj(n,e),m=c.start,me=c.end;return oa(a,OS(e,m,me,t,r))}else return oa(a,Hf(e,t,r))}function CS(e,t){if(!t.type.compatibleContent(e.type))throw new xn("Cannot join "+t.type.name+" onto "+e.type.name)}function fg(e,t,n){var r=e.node(n);return CS(r,t.node(n)),r}function ia(e,t){var n=t.length-1;n>=0&&e.isText&&e.sameMarkup(t[n])?t[n]=e.withText(t[n].text+e.text):t.push(e)}function ol(e,t,n,r){var o=(t||e).node(n),a=0,s=t?t.index(n):o.childCount;e&&(a=e.index(n),e.depth>n?a++:e.textOffset&&(ia(e.nodeAfter,r),a++));for(var u=a;u<s;u++)ia(o.child(u),r);t&&t.depth==n&&t.textOffset&&ia(t.nodeBefore,r)}function oa(e,t){if(!e.type.validContent(t))throw new xn("Invalid content for node "+e.type.name);return e.copy(t)}function OS(e,t,n,r,o){var a=e.depth>o&&fg(e,t,o+1),s=r.depth>o&&fg(n,r,o+1),u=[];return ol(null,e,o,u),a&&s&&t.index(o)==n.index(o)?(CS(a,s),ia(oa(a,OS(e,t,n,r,o+1)),u)):(a&&ia(oa(a,Hf(e,t,o+1)),u),ol(t,n,o,u),s&&ia(oa(s,Hf(n,r,o+1)),u)),ol(r,null,o,u),new q(u)}function Hf(e,t,n){var r=[];if(ol(null,e,n,r),e.depth>n){var o=fg(e,t,n+1);ia(oa(o,Hf(e,t,n+1)),r)}return ol(t,null,n,r),new q(r)}function Aj(e,t){for(var n=t.depth-e.openStart,r=t.node(n),o=r.copy(e.content),a=n-1;a>=0;a--)o=t.node(a).copy(q.from(o));return{start:o.resolveNoCache(e.openStart+n),end:o.resolveNoCache(o.content.size-e.openEnd-n)}}var Et=function(e,t,n){this.pos=e,this.path=t,this.depth=t.length/3-1,this.parentOffset=n},ys={parent:{configurable:!0},doc:{configurable:!0},textOffset:{configurable:!0},nodeAfter:{configurable:!0},nodeBefore:{configurable:!0}};Et.prototype.resolveDepth=function(e){return e==null?this.depth:e<0?this.depth+e:e};ys.parent.get=function(){return this.node(this.depth)};ys.doc.get=function(){return this.node(0)};Et.prototype.node=function(e){return this.path[this.resolveDepth(e)*3]};Et.prototype.index=function(e){return this.path[this.resolveDepth(e)*3+1]};Et.prototype.indexAfter=function(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)};Et.prototype.start=function(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1};Et.prototype.end=function(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size};Et.prototype.before=function(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]};Et.prototype.after=function(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize};ys.textOffset.get=function(){return this.pos-this.path[this.path.length-1]};ys.nodeAfter.get=function(){var e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;var n=this.pos-this.path[this.path.length-1],r=e.child(t);return n?e.child(t).cut(n):r};ys.nodeBefore.get=function(){var e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):e==0?null:this.parent.child(e-1)};Et.prototype.posAtIndex=function(e,t){t=this.resolveDepth(t);for(var n=this.path[t*3],r=t==0?0:this.path[t*3-1]+1,o=0;o<e;o++)r+=n.child(o).nodeSize;return r};Et.prototype.marks=function(){var e=this.parent,t=this.index();if(e.content.size==0)return ke.none;if(this.textOffset)return e.child(t).marks;var n=e.maybeChild(t-1),r=e.maybeChild(t);if(!n){var o=n;n=r,r=o}for(var a=n.marks,s=0;s<a.length;s++)a[s].type.spec.inclusive===!1&&(!r||!a[s].isInSet(r.marks))&&(a=a[s--].removeFromSet(a));return a};Et.prototype.marksAcross=function(e){var t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;for(var n=t.marks,r=e.parent.maybeChild(e.index()),o=0;o<n.length;o++)n[o].type.spec.inclusive===!1&&(!r||!n[o].isInSet(r.marks))&&(n=n[o--].removeFromSet(n));return n};Et.prototype.sharedDepth=function(e){for(var t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0};Et.prototype.blockRange=function(e,t){if(e===void 0&&(e=this),e.pos<this.pos)return e.blockRange(this);for(var n=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);n>=0;n--)if(e.pos<=this.end(n)&&(!t||t(this.node(n))))return new _s(this,e,n)};Et.prototype.sameParent=function(e){return this.pos-this.parentOffset==e.pos-e.parentOffset};Et.prototype.max=function(e){return e.pos>this.pos?e:this};Et.prototype.min=function(e){return e.pos<this.pos?e:this};Et.prototype.toString=function(){for(var e="",t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset};Et.resolve=function(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");for(var n=[],r=0,o=t,a=e;;){var s=a.content.findIndex(o),u=s.index,l=s.offset,c=o-l;if(n.push(a,u,r+l),!c||(a=a.child(u),a.isText))break;o=c-1,r+=l+1}return new Et(t,n,o)};Et.resolveCached=function(e,t){for(var n=0;n<pg.length;n++){var r=pg[n];if(r.pos==t&&r.doc==e)return r}var o=pg[dg]=Et.resolve(e,t);return dg=(dg+1)%Ij,o};Object.defineProperties(Et.prototype,ys);var pg=[],dg=0,Ij=12,_s=function(e,t,n){this.$from=e,this.$to=t,this.depth=n},bs={start:{configurable:!0},end:{configurable:!0},parent:{configurable:!0},startIndex:{configurable:!0},endIndex:{configurable:!0}};bs.start.get=function(){return this.$from.before(this.depth+1)};bs.end.get=function(){return this.$to.after(this.depth+1)};bs.parent.get=function(){return this.$from.node(this.depth)};bs.startIndex.get=function(){return this.$from.index(this.depth)};bs.endIndex.get=function(){return this.$to.indexAfter(this.depth)};Object.defineProperties(_s.prototype,bs);var Mj=Object.create(null),Te=function(e,t,n,r){this.type=e,this.attrs=t,this.content=n||q.empty,this.marks=r||ke.none},Qr={nodeSize:{configurable:!0},childCount:{configurable:!0},textContent:{configurable:!0},firstChild:{configurable:!0},lastChild:{configurable:!0},isBlock:{configurable:!0},isTextblock:{configurable:!0},inlineContent:{configurable:!0},isInline:{configurable:!0},isText:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0}};Qr.nodeSize.get=function(){return this.isLeaf?1:2+this.content.size};Qr.childCount.get=function(){return this.content.childCount};Te.prototype.child=function(e){return this.content.child(e)};Te.prototype.maybeChild=function(e){return this.content.maybeChild(e)};Te.prototype.forEach=function(e){this.content.forEach(e)};Te.prototype.nodesBetween=function(e,t,n,r){r===void 0&&(r=0),this.content.nodesBetween(e,t,n,r,this)};Te.prototype.descendants=function(e){this.nodesBetween(0,this.content.size,e)};Qr.textContent.get=function(){return this.textBetween(0,this.content.size,"")};Te.prototype.textBetween=function(e,t,n,r){return this.content.textBetween(e,t,n,r)};Qr.firstChild.get=function(){return this.content.firstChild};Qr.lastChild.get=function(){return this.content.lastChild};Te.prototype.eq=function(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)};Te.prototype.sameMarkup=function(e){return this.hasMarkup(e.type,e.attrs,e.marks)};Te.prototype.hasMarkup=function(e,t,n){return this.type==e&&Wf(this.attrs,t||e.defaultAttrs||Mj)&&ke.sameSet(this.marks,n||ke.none)};Te.prototype.copy=function(e){return e===void 0&&(e=null),e==this.content?this:new this.constructor(this.type,this.attrs,e,this.marks)};Te.prototype.mark=function(e){return e==this.marks?this:new this.constructor(this.type,this.attrs,this.content,e)};Te.prototype.cut=function(e,t){return e==0&&t==this.content.size?this:this.copy(this.content.cut(e,t))};Te.prototype.slice=function(e,t,n){if(t===void 0&&(t=this.content.size),n===void 0&&(n=!1),e==t)return Y.empty;var r=this.resolve(e),o=this.resolve(t),a=n?0:r.sharedDepth(t),s=r.start(a),u=r.node(a),l=u.content.cut(r.pos-s,o.pos-s);return new Y(l,r.depth-a,o.depth-a)};Te.prototype.replace=function(e,t,n){return Tj(this.resolve(e),this.resolve(t),n)};Te.prototype.nodeAt=function(e){for(var t=this;;){var n=t.content.findIndex(e),r=n.index,o=n.offset;if(t=t.maybeChild(r),!t)return null;if(o==e||t.isText)return t;e-=o+1}};Te.prototype.childAfter=function(e){var t=this.content.findIndex(e),n=t.index,r=t.offset;return{node:this.content.maybeChild(n),index:n,offset:r}};Te.prototype.childBefore=function(e){if(e==0)return{node:null,index:0,offset:0};var t=this.content.findIndex(e),n=t.index,r=t.offset;if(r<e)return{node:this.content.child(n),index:n,offset:r};var o=this.content.child(n-1);return{node:o,index:n-1,offset:r-o.nodeSize}};Te.prototype.resolve=function(e){return Et.resolveCached(this,e)};Te.prototype.resolveNoCache=function(e){return Et.resolve(this,e)};Te.prototype.rangeHasMark=function(e,t,n){var r=!1;return t>e&&this.nodesBetween(e,t,function(o){return n.isInSet(o.marks)&&(r=!0),!r}),r};Qr.isBlock.get=function(){return this.type.isBlock};Qr.isTextblock.get=function(){return this.type.isTextblock};Qr.inlineContent.get=function(){return this.type.inlineContent};Qr.isInline.get=function(){return this.type.isInline};Qr.isText.get=function(){return this.type.isText};Qr.isLeaf.get=function(){return this.type.isLeaf};Qr.isAtom.get=function(){return this.type.isAtom};Te.prototype.toString=function(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);var e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),TS(this.marks,e)};Te.prototype.contentMatchAt=function(e){var t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t};Te.prototype.canReplace=function(e,t,n,r,o){n===void 0&&(n=q.empty),r===void 0&&(r=0),o===void 0&&(o=n.childCount);var a=this.contentMatchAt(e).matchFragment(n,r,o),s=a&&a.matchFragment(this.content,t);if(!s||!s.validEnd)return!1;for(var u=r;u<o;u++)if(!this.type.allowsMarks(n.child(u).marks))return!1;return!0};Te.prototype.canReplaceWith=function(e,t,n,r){if(r&&!this.type.allowsMarks(r))return!1;var o=this.contentMatchAt(e).matchType(n),a=o&&o.matchFragment(this.content,t);return a?a.validEnd:!1};Te.prototype.canAppend=function(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)};Te.prototype.check=function(){if(!this.type.validContent(this.content))throw new RangeError("Invalid content for node "+this.type.name+": "+this.content.toString().slice(0,50));for(var e=ke.none,t=0;t<this.marks.length;t++)e=this.marks[t].addToSet(e);if(!ke.sameSet(e,this.marks))throw new RangeError("Invalid collection of marks for node "+this.type.name+": "+this.marks.map(function(n){return n.type.name}));this.content.forEach(function(n){return n.check()})};Te.prototype.toJSON=function(){var e={type:this.type.name};for(var t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(function(n){return n.toJSON()})),e};Te.fromJSON=function(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");var n=null;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=t.marks.map(e.markFromJSON)}if(t.type=="text"){if(typeof t.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(t.text,n)}var r=q.fromJSON(e,t.content);return e.nodeType(t.type).create(t.attrs,r,n)};Object.defineProperties(Te.prototype,Qr);var Pj=function(e){function t(r,o,a,s){if(e.call(this,r,o,null,s),!a)throw new RangeError("Empty text nodes are not allowed");this.text=a}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={textContent:{configurable:!0},nodeSize:{configurable:!0}};return t.prototype.toString=function(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):TS(this.marks,JSON.stringify(this.text))},n.textContent.get=function(){return this.text},t.prototype.textBetween=function(r,o){return this.text.slice(r,o)},n.nodeSize.get=function(){return this.text.length},t.prototype.mark=function(r){return r==this.marks?this:new t(this.type,this.attrs,this.text,r)},t.prototype.withText=function(r){return r==this.text?this:new t(this.type,this.attrs,r,this.marks)},t.prototype.cut=function(r,o){return r===void 0&&(r=0),o===void 0&&(o=this.text.length),r==0&&o==this.text.length?this:this.withText(this.text.slice(r,o))},t.prototype.eq=function(r){return this.sameMarkup(r)&&this.text==r.text},t.prototype.toJSON=function(){var r=e.prototype.toJSON.call(this);return r.text=this.text,r},Object.defineProperties(t.prototype,n),t}(Te);function TS(e,t){for(var n=e.length-1;n>=0;n--)t=e[n].type.name+"("+t+")";return t}var Er=function(e){this.validEnd=e,this.next=[],this.wrapCache=[]},Kf={inlineContent:{configurable:!0},defaultType:{configurable:!0},edgeCount:{configurable:!0}};Er.parse=function(e,t){var n=new Gf(e,t);if(n.next==null)return Er.empty;var r=IS(n);n.next&&n.err("Unexpected trailing text");var o=Bj($j(r));return qj(o,n),o};Er.prototype.matchType=function(e){for(var t=0;t<this.next.length;t+=2)if(this.next[t]==e)return this.next[t+1];return null};Er.prototype.matchFragment=function(e,t,n){t===void 0&&(t=0),n===void 0&&(n=e.childCount);for(var r=this,o=t;r&&o<n;o++)r=r.matchType(e.child(o).type);return r};Kf.inlineContent.get=function(){var e=this.next[0];return e?e.isInline:!1};Kf.defaultType.get=function(){for(var e=0;e<this.next.length;e+=2){var t=this.next[e];if(!(t.isText||t.hasRequiredAttrs()))return t}};Er.prototype.compatible=function(e){for(var t=0;t<this.next.length;t+=2)for(var n=0;n<e.next.length;n+=2)if(this.next[t]==e.next[n])return!0;return!1};Er.prototype.fillBefore=function(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=0);var r=[this];function o(a,s){var u=a.matchFragment(e,n);if(u&&(!t||u.validEnd))return q.from(s.map(function(xe){return xe.createAndFill()}));for(var l=0;l<a.next.length;l+=2){var c=a.next[l],m=a.next[l+1];if(!(c.isText||c.hasRequiredAttrs())&&r.indexOf(m)==-1){r.push(m);var me=o(m,s.concat(c));if(me)return me}}}return o(this,[])};Er.prototype.findWrapping=function(e){for(var t=0;t<this.wrapCache.length;t+=2)if(this.wrapCache[t]==e)return this.wrapCache[t+1];var n=this.computeWrapping(e);return this.wrapCache.push(e,n),n};Er.prototype.computeWrapping=function(e){for(var t=Object.create(null),n=[{match:this,type:null,via:null}];n.length;){var r=n.shift(),o=r.match;if(o.matchType(e)){for(var a=[],s=r;s.type;s=s.via)a.push(s.type);return a.reverse()}for(var u=0;u<o.next.length;u+=2){var l=o.next[u];!l.isLeaf&&!l.hasRequiredAttrs()&&!(l.name in t)&&(!r.type||o.next[u+1].validEnd)&&(n.push({match:l.contentMatch,type:l,via:r}),t[l.name]=!0)}}};Kf.edgeCount.get=function(){return this.next.length>>1};Er.prototype.edge=function(e){var t=e<<1;if(t>=this.next.length)throw new RangeError("There's no "+e+"th edge in this content match");return{type:this.next[t],next:this.next[t+1]}};Er.prototype.toString=function(){var e=[];function t(n){e.push(n);for(var r=1;r<n.next.length;r+=2)e.indexOf(n.next[r])==-1&&t(n.next[r])}return t(this),e.map(function(n,r){for(var o=r+(n.validEnd?"*":" ")+" ",a=0;a<n.next.length;a+=2)o+=(a?", ":"")+n.next[a].name+"->"+e.indexOf(n.next[a+1]);return o}).join(`
`)};Object.defineProperties(Er.prototype,Kf);Er.empty=new Er(!0);var Gf=function(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()},AS={next:{configurable:!0}};AS.next.get=function(){return this.tokens[this.pos]};Gf.prototype.eat=function(e){return this.next==e&&(this.pos++||!0)};Gf.prototype.err=function(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")};Object.defineProperties(Gf.prototype,AS);function IS(e){var t=[];do t.push(jj(e));while(e.eat("|"));return t.length==1?t[0]:{type:"choice",exprs:t}}function jj(e){var t=[];do t.push(Fj(e));while(e.next&&e.next!=")"&&e.next!="|");return t.length==1?t[0]:{type:"seq",exprs:t}}function Fj(e){for(var t=Lj(e);;)if(e.eat("+"))t={type:"plus",expr:t};else if(e.eat("*"))t={type:"star",expr:t};else if(e.eat("?"))t={type:"opt",expr:t};else if(e.eat("{"))t=Rj(e,t);else break;return t}function MS(e){/\D/.test(e.next)&&e.err("Expected number, got '"+e.next+"'");var t=Number(e.next);return e.pos++,t}function Rj(e,t){var n=MS(e),r=n;return e.eat(",")&&(e.next!="}"?r=MS(e):r=-1),e.eat("}")||e.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:t}}function Nj(e,t){var n=e.nodeTypes,r=n[t];if(r)return[r];var o=[];for(var a in n){var s=n[a];s.groups.indexOf(t)>-1&&o.push(s)}return o.length==0&&e.err("No node type or group '"+t+"' found"),o}function Lj(e){if(e.eat("(")){var t=IS(e);return e.eat(")")||e.err("Missing closing paren"),t}else if(/\W/.test(e.next))e.err("Unexpected token '"+e.next+"'");else{var n=Nj(e,e.next).map(function(r){return e.inline==null?e.inline=r.isInline:e.inline!=r.isInline&&e.err("Mixing inline and block content"),{type:"name",value:r}});return e.pos++,n.length==1?n[0]:{type:"choice",exprs:n}}}function $j(e){var t=[[]];return o(a(e,0),n()),t;function n(){return t.push([])-1}function r(s,u,l){var c={term:l,to:u};return t[s].push(c),c}function o(s,u){s.forEach(function(l){return l.to=u})}function a(s,u){if(s.type=="choice")return s.exprs.reduce(function(vn,La){return vn.concat(a(La,u))},[]);if(s.type=="seq")for(var l=0;;l++){var c=a(s.exprs[l],u);if(l==s.exprs.length-1)return c;o(c,u=n())}else if(s.type=="star"){var m=n();return r(u,m),o(a(s.expr,m),m),[r(m)]}else if(s.type=="plus"){var me=n();return o(a(s.expr,u),me),o(a(s.expr,me),me),[r(me)]}else{if(s.type=="opt")return[r(u)].concat(a(s.expr,u));if(s.type=="range"){for(var xe=u,Ne=0;Ne<s.min;Ne++){var He=n();o(a(s.expr,xe),He),xe=He}if(s.max==-1)o(a(s.expr,xe),xe);else for(var Ye=s.min;Ye<s.max;Ye++){var Je=n();r(xe,Je),o(a(s.expr,xe),Je),xe=Je}return[r(xe)]}else if(s.type=="name")return[r(u,null,s.value)]}}}function PS(e,t){return t-e}function jS(e,t){var n=[];return r(t),n.sort(PS);function r(o){var a=e[o];if(a.length==1&&!a[0].term)return r(a[0].to);n.push(o);for(var s=0;s<a.length;s++){var u=a[s],l=u.term,c=u.to;!l&&n.indexOf(c)==-1&&r(c)}}}function Bj(e){var t=Object.create(null);return n(jS(e,0));function n(r){var o=[];r.forEach(function(l){e[l].forEach(function(c){var m=c.term,me=c.to;if(m){var xe=o.indexOf(m),Ne=xe>-1&&o[xe+1];jS(e,me).forEach(function(He){Ne||o.push(m,Ne=[]),Ne.indexOf(He)==-1&&Ne.push(He)})}})});for(var a=t[r.join(",")]=new Er(r.indexOf(e.length-1)>-1),s=0;s<o.length;s+=2){var u=o[s+1].sort(PS);a.next.push(o[s],t[u.join(",")]||n(u))}return a}}function qj(e,t){for(var n=0,r=[e];n<r.length;n++){for(var o=r[n],a=!o.validEnd,s=[],u=0;u<o.next.length;u+=2){var l=o.next[u],c=o.next[u+1];s.push(l.name),a&&!(l.isText||l.hasRequiredAttrs())&&(a=!1),r.indexOf(c)==-1&&r.push(c)}a&&t.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function FS(e){var t=Object.create(null);for(var n in e){var r=e[n];if(!r.hasDefault)return null;t[n]=r.default}return t}function RS(e,t){var n=Object.create(null);for(var r in e){var o=t&&t[r];if(o===void 0){var a=e[r];if(a.hasDefault)o=a.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=o}return n}function NS(e){var t=Object.create(null);if(e)for(var n in e)t[n]=new LS(e[n]);return t}var Nr=function(e,t,n){this.name=e,this.schema=t,this.spec=n,this.groups=n.group?n.group.split(" "):[],this.attrs=NS(n.attrs),this.defaultAttrs=FS(this.attrs),this.contentMatch=null,this.markSet=null,this.inlineContent=null,this.isBlock=!(n.inline||e=="text"),this.isText=e=="text"},ws={isInline:{configurable:!0},isTextblock:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0},whitespace:{configurable:!0}};ws.isInline.get=function(){return!this.isBlock};ws.isTextblock.get=function(){return this.isBlock&&this.inlineContent};ws.isLeaf.get=function(){return this.contentMatch==Er.empty};ws.isAtom.get=function(){return this.isLeaf||this.spec.atom};ws.whitespace.get=function(){return this.spec.whitespace||(this.spec.code?"pre":"normal")};Nr.prototype.hasRequiredAttrs=function(){for(var e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1};Nr.prototype.compatibleContent=function(e){return this==e||this.contentMatch.compatible(e.contentMatch)};Nr.prototype.computeAttrs=function(e){return!e&&this.defaultAttrs?this.defaultAttrs:RS(this.attrs,e)};Nr.prototype.create=function(e,t,n){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Te(this,this.computeAttrs(e),q.from(t),ke.setFrom(n))};Nr.prototype.createChecked=function(e,t,n){if(t=q.from(t),!this.validContent(t))throw new RangeError("Invalid content for node "+this.name);return new Te(this,this.computeAttrs(e),t,ke.setFrom(n))};Nr.prototype.createAndFill=function(e,t,n){if(e=this.computeAttrs(e),t=q.from(t),t.size){var r=this.contentMatch.fillBefore(t);if(!r)return null;t=r.append(t)}var o=this.contentMatch.matchFragment(t).fillBefore(q.empty,!0);return o?new Te(this,e,t.append(o),ke.setFrom(n)):null};Nr.prototype.validContent=function(e){var t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(var n=0;n<e.childCount;n++)if(!this.allowsMarks(e.child(n).marks))return!1;return!0};Nr.prototype.allowsMarkType=function(e){return this.markSet==null||this.markSet.indexOf(e)>-1};Nr.prototype.allowsMarks=function(e){if(this.markSet==null)return!0;for(var t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0};Nr.prototype.allowedMarks=function(e){if(this.markSet==null)return e;for(var t,n=0;n<e.length;n++)this.allowsMarkType(e[n].type)?t&&t.push(e[n]):t||(t=e.slice(0,n));return t?t.length?t:ke.empty:e};Nr.compile=function(e,t){var n=Object.create(null);e.forEach(function(a,s){return n[a]=new Nr(a,t,s)});var r=t.spec.topNode||"doc";if(!n[r])throw new RangeError("Schema is missing its top node type ('"+r+"')");if(!n.text)throw new RangeError("Every schema needs a 'text' type");for(var o in n.text.attrs)throw new RangeError("The text node type should not have attributes");return n};Object.defineProperties(Nr.prototype,ws);var LS=function(e){this.hasDefault=Object.prototype.hasOwnProperty.call(e,"default"),this.default=e.default},$S={isRequired:{configurable:!0}};$S.isRequired.get=function(){return!this.hasDefault};Object.defineProperties(LS.prototype,$S);var Ti=function(e,t,n,r){this.name=e,this.schema=n,this.spec=r,this.attrs=NS(r.attrs),this.rank=t,this.excluded=null;var o=FS(this.attrs);this.instance=o&&new ke(this,o)};Ti.prototype.create=function(e){return!e&&this.instance?this.instance:new ke(this,RS(this.attrs,e))};Ti.compile=function(e,t){var n=Object.create(null),r=0;return e.forEach(function(o,a){return n[o]=new Ti(o,r++,t,a)}),n};Ti.prototype.removeFromSet=function(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e};Ti.prototype.isInSet=function(e){for(var t=0;t<e.length;t++)if(e[t].type==this)return e[t]};Ti.prototype.excludes=function(e){return this.excluded.indexOf(e)>-1};var uo=function(e){this.spec={};for(var t in e)this.spec[t]=e[t];this.spec.nodes=lg.from(e.nodes),this.spec.marks=lg.from(e.marks),this.nodes=Nr.compile(this.spec.nodes,this),this.marks=Ti.compile(this.spec.marks,this);var n=Object.create(null);for(var r in this.nodes){if(r in this.marks)throw new RangeError(r+" can not be both a node and a mark");var o=this.nodes[r],a=o.spec.content||"",s=o.spec.marks;o.contentMatch=n[a]||(n[a]=Er.parse(a,this.nodes)),o.inlineContent=o.contentMatch.inlineContent,o.markSet=s=="_"?null:s?BS(this,s.split(" ")):s==""||!o.inlineContent?[]:null}for(var u in this.marks){var l=this.marks[u],c=l.spec.excludes;l.excluded=c==null?[l]:c==""?[]:BS(this,c.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached=Object.create(null),this.cached.wrappings=Object.create(null)};uo.prototype.node=function(e,t,n,r){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof Nr){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(t,n,r)};uo.prototype.text=function(e,t){var n=this.nodes.text;return new Pj(n,n.defaultAttrs,e,ke.setFrom(t))};uo.prototype.mark=function(e,t){return typeof e=="string"&&(e=this.marks[e]),e.create(t)};uo.prototype.nodeFromJSON=function(e){return Te.fromJSON(this,e)};uo.prototype.markFromJSON=function(e){return ke.fromJSON(this,e)};uo.prototype.nodeType=function(e){var t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t};function BS(e,t){for(var n=[],r=0;r<t.length;r++){var o=t[r],a=e.marks[o],s=a;if(a)n.push(a);else for(var u in e.marks){var l=e.marks[u];(o=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(o)>-1)&&n.push(s=l)}if(!s)throw new SyntaxError("Unknown mark type: '"+t[r]+"'")}return n}var Yr=function(e,t){var n=this;this.schema=e,this.rules=t,this.tags=[],this.styles=[],t.forEach(function(r){r.tag?n.tags.push(r):r.style&&n.styles.push(r)}),this.normalizeLists=!this.tags.some(function(r){if(!/^(ul|ol)\b/.test(r.tag)||!r.node)return!1;var o=e.nodes[r.node];return o.contentMatch.matchType(o)})};Yr.prototype.parse=function(e,t){t===void 0&&(t={});var n=new ht(this,t,!1);return n.addAll(e,null,t.from,t.to),n.finish()};Yr.prototype.parseSlice=function(e,t){t===void 0&&(t={});var n=new ht(this,t,!0);return n.addAll(e,null,t.from,t.to),Y.maxOpen(n.finish())};Yr.prototype.matchTag=function(e,t,n){for(var r=n?this.tags.indexOf(n)+1:0;r<this.tags.length;r++){var o=this.tags[r];if(Uj(e,o.tag)&&(o.namespace===void 0||e.namespaceURI==o.namespace)&&(!o.context||t.matchesContext(o.context))){if(o.getAttrs){var a=o.getAttrs(e);if(a===!1)continue;o.attrs=a}return o}}};Yr.prototype.matchStyle=function(e,t,n,r){for(var o=r?this.styles.indexOf(r)+1:0;o<this.styles.length;o++){var a=this.styles[o];if(!(a.style.indexOf(e)!=0||a.context&&!n.matchesContext(a.context)||a.style.length>e.length&&(a.style.charCodeAt(e.length)!=61||a.style.slice(e.length+1)!=t))){if(a.getAttrs){var s=a.getAttrs(t);if(s===!1)continue;a.attrs=s}return a}}};Yr.schemaRules=function(e){var t=[];function n(u){for(var l=u.priority==null?50:u.priority,c=0;c<t.length;c++){var m=t[c],me=m.priority==null?50:m.priority;if(me<l)break}t.splice(c,0,u)}var r=function(u){var l=e.marks[u].spec.parseDOM;l&&l.forEach(function(c){n(c=zS(c)),c.mark=u})};for(var o in e.marks)r(o);var a=function(u){var l=e.nodes[s].spec.parseDOM;l&&l.forEach(function(c){n(c=zS(c)),c.node=s})};for(var s in e.nodes)a();return t};Yr.fromSchema=function(e){return e.cached.domParser||(e.cached.domParser=new Yr(e,Yr.schemaRules(e)))};var hg={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},Vj={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},qS={ol:!0,ul:!0},Qf=1,Yf=2,al=4;function VS(e,t,n){return t!=null?(t?Qf:0)|(t==="full"?Yf:0):e&&e.whitespace=="pre"?Qf|Yf:n&~al}var Ai=function(e,t,n,r,o,a,s){this.type=e,this.attrs=t,this.solid=o,this.match=a||(s&al?null:e.contentMatch),this.options=s,this.content=[],this.marks=n,this.activeMarks=ke.none,this.pendingMarks=r,this.stashMarks=[]};Ai.prototype.findWrapping=function(e){if(!this.match){if(!this.type)return[];var t=this.type.contentMatch.fillBefore(q.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{var n=this.type.contentMatch,r;return(r=n.findWrapping(e.type))?(this.match=n,r):null}}return this.match.findWrapping(e.type)};Ai.prototype.finish=function(e){if(!(this.options&Qf)){var t=this.content[this.content.length-1],n;t&&t.isText&&(n=/[ \t\r\n\u000c]+$/.exec(t.text))&&(t.text.length==n[0].length?this.content.pop():this.content[this.content.length-1]=t.withText(t.text.slice(0,t.text.length-n[0].length)))}var r=q.from(this.content);return!e&&this.match&&(r=r.append(this.match.fillBefore(q.empty,!0))),this.type?this.type.create(this.attrs,r,this.marks):r};Ai.prototype.popFromStashMark=function(e){for(var t=this.stashMarks.length-1;t>=0;t--)if(e.eq(this.stashMarks[t]))return this.stashMarks.splice(t,1)[0]};Ai.prototype.applyPending=function(e){for(var t=0,n=this.pendingMarks;t<n.length;t++){var r=n[t];(this.type?this.type.allowsMarkType(r.type):Hj(r.type,e))&&!r.isInSet(this.activeMarks)&&(this.activeMarks=r.addToSet(this.activeMarks),this.pendingMarks=r.removeFromSet(this.pendingMarks))}};Ai.prototype.inlineContext=function(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!hg.hasOwnProperty(e.parentNode.nodeName.toLowerCase())};var ht=function(e,t,n){this.parser=e,this.options=t,this.isOpen=n;var r=t.topNode,o,a=VS(null,t.preserveWhitespace,0)|(n?al:0);r?o=new Ai(r.type,r.attrs,ke.none,ke.none,!0,t.topMatch||r.type.contentMatch,a):n?o=new Ai(null,null,ke.none,ke.none,!0,null,a):o=new Ai(e.schema.topNodeType,null,ke.none,ke.none,!0,null,a),this.nodes=[o],this.open=0,this.find=t.findPositions,this.needsBlock=!1},mg={top:{configurable:!0},currentPos:{configurable:!0}};mg.top.get=function(){return this.nodes[this.open]};ht.prototype.addDOM=function(e){if(e.nodeType==3)this.addTextNode(e);else if(e.nodeType==1){var t=e.getAttribute("style"),n=t?this.readStyles(Wj(t)):null,r=this.top;if(n!=null)for(var o=0;o<n.length;o++)this.addPendingMark(n[o]);if(this.addElement(e),n!=null)for(var a=0;a<n.length;a++)this.removePendingMark(n[a],r)}};ht.prototype.addTextNode=function(e){var t=e.nodeValue,n=this.top;if(n.options&Yf||n.inlineContext(e)||/[^ \t\r\n\u000c]/.test(t)){if(n.options&Qf)n.options&Yf?t=t.replace(/\r\n?/g,`
`):t=t.replace(/\r?\n|\r/g," ");else if(t=t.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(t)&&this.open==this.nodes.length-1){var r=n.content[n.content.length-1],o=e.previousSibling;(!r||o&&o.nodeName=="BR"||r.isText&&/[ \t\r\n\u000c]$/.test(r.text))&&(t=t.slice(1))}t&&this.insertNode(this.parser.schema.text(t)),this.findInText(e)}else this.findInside(e)};ht.prototype.addElement=function(e,t){var n=e.nodeName.toLowerCase(),r;qS.hasOwnProperty(n)&&this.parser.normalizeLists&&zj(e);var o=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(r=this.parser.matchTag(e,this,t));if(o?o.ignore:Vj.hasOwnProperty(n))this.findInside(e),this.ignoreFallback(e);else if(!o||o.skip||o.closeParent){o&&o.closeParent?this.open=Math.max(0,this.open-1):o&&o.skip.nodeType&&(e=o.skip);var a,s=this.top,u=this.needsBlock;if(hg.hasOwnProperty(n))a=!0,s.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e);return}this.addAll(e),a&&this.sync(s),this.needsBlock=u}else this.addElementByRule(e,o,o.consuming===!1?r:null)};ht.prototype.leafFallback=function(e){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`))};ht.prototype.ignoreFallback=function(e){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"))};ht.prototype.readStyles=function(e){var t=ke.none;e:for(var n=0;n<e.length;n+=2)for(var r=null;;){var o=this.parser.matchStyle(e[n],e[n+1],this,r);if(!o)continue e;if(o.ignore)return null;if(t=this.parser.schema.marks[o.mark].create(o.attrs).addToSet(t),o.consuming===!1)r=o;else break}return t};ht.prototype.addElementByRule=function(e,t,n){var r=this,o,a,s,u;t.node?(a=this.parser.schema.nodes[t.node],a.isLeaf?this.insertNode(a.create(t.attrs))||this.leafFallback(e):o=this.enter(a,t.attrs,t.preserveWhitespace)):(s=this.parser.schema.marks[t.mark],u=s.create(t.attrs),this.addPendingMark(u));var l=this.top;if(a&&a.isLeaf)this.findInside(e);else if(n)this.addElement(e,n);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(function(m){return r.insertNode(m)});else{var c=t.contentElement;typeof c=="string"?c=e.querySelector(c):typeof c=="function"&&(c=c(e)),c||(c=e),this.findAround(e,c,!0),this.addAll(c,o)}o&&(this.sync(l),this.open--),u&&this.removePendingMark(u,l)};ht.prototype.addAll=function(e,t,n,r){for(var o=n||0,a=n?e.childNodes[n]:e.firstChild,s=r==null?null:e.childNodes[r];a!=s;a=a.nextSibling,++o)this.findAtPoint(e,o),this.addDOM(a),t&&hg.hasOwnProperty(a.nodeName.toLowerCase())&&this.sync(t);this.findAtPoint(e,o)};ht.prototype.findPlace=function(e){for(var t,n,r=this.open;r>=0;r--){var o=this.nodes[r],a=o.findWrapping(e);if(a&&(!t||t.length>a.length)&&(t=a,n=o,!a.length)||o.solid)break}if(!t)return!1;this.sync(n);for(var s=0;s<t.length;s++)this.enterInner(t[s],null,!1);return!0};ht.prototype.insertNode=function(e){if(e.isInline&&this.needsBlock&&!this.top.type){var t=this.textblockFromContext();t&&this.enterInner(t)}if(this.findPlace(e)){this.closeExtra();var n=this.top;n.applyPending(e.type),n.match&&(n.match=n.match.matchType(e.type));for(var r=n.activeMarks,o=0;o<e.marks.length;o++)(!n.type||n.type.allowsMarkType(e.marks[o].type))&&(r=e.marks[o].addToSet(r));return n.content.push(e.mark(r)),!0}return!1};ht.prototype.enter=function(e,t,n){var r=this.findPlace(e.create(t));return r&&this.enterInner(e,t,!0,n),r};ht.prototype.enterInner=function(e,t,n,r){this.closeExtra();var o=this.top;o.applyPending(e),o.match=o.match&&o.match.matchType(e,t);var a=VS(e,r,o.options);o.options&al&&o.content.length==0&&(a|=al),this.nodes.push(new Ai(e,t,o.activeMarks,o.pendingMarks,n,null,a)),this.open++};ht.prototype.closeExtra=function(e){var t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}};ht.prototype.finish=function(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)};ht.prototype.sync=function(e){for(var t=this.open;t>=0;t--)if(this.nodes[t]==e){this.open=t;return}};mg.currentPos.get=function(){this.closeExtra();for(var e=0,t=this.open;t>=0;t--){for(var n=this.nodes[t].content,r=n.length-1;r>=0;r--)e+=n[r].nodeSize;t&&e++}return e};ht.prototype.findAtPoint=function(e,t){if(this.find)for(var n=0;n<this.find.length;n++)this.find[n].node==e&&this.find[n].offset==t&&(this.find[n].pos=this.currentPos)};ht.prototype.findInside=function(e){if(this.find)for(var t=0;t<this.find.length;t++)this.find[t].pos==null&&e.nodeType==1&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)};ht.prototype.findAround=function(e,t,n){if(e!=t&&this.find){for(var r=0;r<this.find.length;r++)if(this.find[r].pos==null&&e.nodeType==1&&e.contains(this.find[r].node)){var o=t.compareDocumentPosition(this.find[r].node);o&(n?2:4)&&(this.find[r].pos=this.currentPos)}}};ht.prototype.findInText=function(e){if(this.find)for(var t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))};ht.prototype.matchesContext=function(e){var t=this;if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);var n=e.split("/"),r=this.options.context,o=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),a=-(r?r.depth+1:0)+(o?0:1),s=function(u,l){for(;u>=0;u--){var c=n[u];if(c==""){if(u==n.length-1||u==0)continue;for(;l>=a;l--)if(s(u-1,l))return!0;return!1}else{var m=l>0||l==0&&o?t.nodes[l].type:r&&l>=a?r.node(l-a).type:null;if(!m||m.name!=c&&m.groups.indexOf(c)==-1)return!1;l--}}return!0};return s(n.length-1,this.open)};ht.prototype.textblockFromContext=function(){var e=this.options.context;if(e)for(var t=e.depth;t>=0;t--){var n=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(var r in this.parser.schema.nodes){var o=this.parser.schema.nodes[r];if(o.isTextblock&&o.defaultAttrs)return o}};ht.prototype.addPendingMark=function(e){var t=Kj(e,this.top.pendingMarks);t&&this.top.stashMarks.push(t),this.top.pendingMarks=e.addToSet(this.top.pendingMarks)};ht.prototype.removePendingMark=function(e,t){for(var n=this.open;n>=0;n--){var r=this.nodes[n],o=r.pendingMarks.lastIndexOf(e);if(o>-1)r.pendingMarks=e.removeFromSet(r.pendingMarks);else{r.activeMarks=e.removeFromSet(r.activeMarks);var a=r.popFromStashMark(e);a&&r.type&&r.type.allowsMarkType(a.type)&&(r.activeMarks=a.addToSet(r.activeMarks))}if(r==t)break}};Object.defineProperties(ht.prototype,mg);function zj(e){for(var t=e.firstChild,n=null;t;t=t.nextSibling){var r=t.nodeType==1?t.nodeName.toLowerCase():null;r&&qS.hasOwnProperty(r)&&n?(n.appendChild(t),t=n):r=="li"?n=t:r&&(n=null)}}function Uj(e,t){return(e.matches||e.msMatchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector).call(e,t)}function Wj(e){for(var t=/\s*([\w-]+)\s*:\s*([^;]+)/g,n,r=[];n=t.exec(e);)r.push(n[1],n[2].trim());return r}function zS(e){var t={};for(var n in e)t[n]=e[n];return t}function Hj(e,t){var n=t.schema.nodes,r=function(s){var u=n[s];if(u.allowsMarkType(e)){var l=[],c=function(m){l.push(m);for(var me=0;me<m.edgeCount;me++){var xe=m.edge(me),Ne=xe.type,He=xe.next;if(Ne==t||l.indexOf(He)<0&&c(He))return!0}};if(c(u.contentMatch))return{v:!0}}};for(var o in n){var a=r(o);if(a)return a.v}}function Kj(e,t){for(var n=0;n<t.length;n++)if(e.eq(t[n]))return t[n]}var Qt=function(e,t){this.nodes=e||{},this.marks=t||{}};Qt.prototype.serializeFragment=function(e,t,n){var r=this;t===void 0&&(t={}),n||(n=gg(t).createDocumentFragment());var o=n,a=null;return e.forEach(function(s){if(a||s.marks.length){a||(a=[]);for(var u=0,l=0;u<a.length&&l<s.marks.length;){var c=s.marks[l];if(!r.marks[c.type.name]){l++;continue}if(!c.eq(a[u])||c.type.spec.spanning===!1)break;u+=2,l++}for(;u<a.length;)o=a.pop(),a.pop();for(;l<s.marks.length;){var m=s.marks[l++],me=r.serializeMark(m,s.isInline,t);me&&(a.push(m,o),o.appendChild(me.dom),o=me.contentDOM||me.dom)}}o.appendChild(r.serializeNodeInner(s,t))}),n};Qt.prototype.serializeNodeInner=function(e,t){t===void 0&&(t={});var n=Qt.renderSpec(gg(t),this.nodes[e.type.name](e)),r=n.dom,o=n.contentDOM;if(o){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");t.onContent?t.onContent(e,o,t):this.serializeFragment(e.content,t,o)}return r};Qt.prototype.serializeNode=function(e,t){t===void 0&&(t={});for(var n=this.serializeNodeInner(e,t),r=e.marks.length-1;r>=0;r--){var o=this.serializeMark(e.marks[r],e.isInline,t);o&&((o.contentDOM||o.dom).appendChild(n),n=o.dom)}return n};Qt.prototype.serializeMark=function(e,t,n){n===void 0&&(n={});var r=this.marks[e.type.name];return r&&Qt.renderSpec(gg(n),r(e,t))};Qt.renderSpec=function(e,t,n){if(n===void 0&&(n=null),typeof t=="string")return{dom:e.createTextNode(t)};if(t.nodeType!=null)return{dom:t};if(t.dom&&t.dom.nodeType!=null)return t;var r=t[0],o=r.indexOf(" ");o>0&&(n=r.slice(0,o),r=r.slice(o+1));var a=null,s=n?e.createElementNS(n,r):e.createElement(r),u=t[1],l=1;if(u&&typeof u=="object"&&u.nodeType==null&&!Array.isArray(u)){l=2;for(var c in u)if(u[c]!=null){var m=c.indexOf(" ");m>0?s.setAttributeNS(c.slice(0,m),c.slice(m+1),u[c]):s.setAttribute(c,u[c])}}for(var me=l;me<t.length;me++){var xe=t[me];if(xe===0){if(me<t.length-1||me>l)throw new RangeError("Content hole must be the only child of its parent node");return{dom:s,contentDOM:s}}else{var Ne=Qt.renderSpec(e,xe,n),He=Ne.dom,Ye=Ne.contentDOM;if(s.appendChild(He),Ye){if(a)throw new RangeError("Multiple content holes");a=Ye}}}return{dom:s,contentDOM:a}};Qt.fromSchema=function(e){return e.cached.domSerializer||(e.cached.domSerializer=new Qt(this.nodesFromSchema(e),this.marksFromSchema(e)))};Qt.nodesFromSchema=function(e){var t=US(e.nodes);return t.text||(t.text=function(n){return n.text}),t};Qt.marksFromSchema=function(e){return US(e.marks)};function US(e){var t={};for(var n in e){var r=e[n].spec.toDOM;r&&(t[n]=r)}return t}function gg(e){return e.document||window.document}v();var WS=65535,HS=Math.pow(2,16);function Gj(e,t){return e+t*HS}function KS(e){return e&WS}function Qj(e){return(e-(e&WS))/HS}var vg=function(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=null),this.pos=e,this.deleted=t,this.recover=n},fr=function(e,t){t===void 0&&(t=!1),this.ranges=e,this.inverted=t};fr.prototype.recover=function(e){var t=0,n=KS(e);if(!this.inverted)for(var r=0;r<n;r++)t+=this.ranges[r*3+2]-this.ranges[r*3+1];return this.ranges[n*3]+t+Qj(e)};fr.prototype.mapResult=function(e,t){return t===void 0&&(t=1),this._map(e,t,!1)};fr.prototype.map=function(e,t){return t===void 0&&(t=1),this._map(e,t,!0)};fr.prototype._map=function(e,t,n){for(var r=0,o=this.inverted?2:1,a=this.inverted?1:2,s=0;s<this.ranges.length;s+=3){var u=this.ranges[s]-(this.inverted?r:0);if(u>e)break;var l=this.ranges[s+o],c=this.ranges[s+a],m=u+l;if(e<=m){var me=l?e==u?-1:e==m?1:t:t,xe=u+r+(me<0?0:c);if(n)return xe;var Ne=e==(t<0?u:m)?null:Gj(s/3,e-u);return new vg(xe,t<0?e!=u:e!=m,Ne)}r+=c-l}return n?e+r:new vg(e+r)};fr.prototype.touches=function(e,t){for(var n=0,r=KS(t),o=this.inverted?2:1,a=this.inverted?1:2,s=0;s<this.ranges.length;s+=3){var u=this.ranges[s]-(this.inverted?n:0);if(u>e)break;var l=this.ranges[s+o],c=u+l;if(e<=c&&s==r*3)return!0;n+=this.ranges[s+a]-l}return!1};fr.prototype.forEach=function(e){for(var t=this.inverted?2:1,n=this.inverted?1:2,r=0,o=0;r<this.ranges.length;r+=3){var a=this.ranges[r],s=a-(this.inverted?o:0),u=a+(this.inverted?0:o),l=this.ranges[r+t],c=this.ranges[r+n];e(s,s+l,u,u+c),o+=c-l}};fr.prototype.invert=function(){return new fr(this.ranges,!this.inverted)};fr.prototype.toString=function(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)};fr.offset=function(e){return e==0?fr.empty:new fr(e<0?[0,-e,0]:[0,0,e])};fr.empty=new fr([]);var pr=function(e,t,n,r){this.maps=e||[],this.from=n||0,this.to=r!=null?r:this.maps.length,this.mirror=t};pr.prototype.slice=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=this.maps.length),new pr(this.maps,this.mirror,e,t)};pr.prototype.copy=function(){return new pr(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)};pr.prototype.appendMap=function(e,t){this.to=this.maps.push(e),t!=null&&this.setMirror(this.maps.length-1,t)};pr.prototype.appendMapping=function(e){for(var t=0,n=this.maps.length;t<e.maps.length;t++){var r=e.getMirror(t);this.appendMap(e.maps[t],r!=null&&r<t?n+r:null)}};pr.prototype.getMirror=function(e){if(this.mirror){for(var t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}};pr.prototype.setMirror=function(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)};pr.prototype.appendMappingInverted=function(e){for(var t=e.maps.length-1,n=this.maps.length+e.maps.length;t>=0;t--){var r=e.getMirror(t);this.appendMap(e.maps[t].invert(),r!=null&&r>t?n-r-1:null)}};pr.prototype.invert=function(){var e=new pr;return e.appendMappingInverted(this),e};pr.prototype.map=function(e,t){if(t===void 0&&(t=1),this.mirror)return this._map(e,t,!0);for(var n=this.from;n<this.to;n++)e=this.maps[n].map(e,t);return e};pr.prototype.mapResult=function(e,t){return t===void 0&&(t=1),this._map(e,t,!1)};pr.prototype._map=function(e,t,n){for(var r=!1,o=this.from;o<this.to;o++){var a=this.maps[o],s=a.mapResult(e,t);if(s.recover!=null){var u=this.getMirror(o);if(u!=null&&u>o&&u<this.to){o=u,e=this.maps[u].recover(s.recover);continue}}s.deleted&&(r=!0),e=s.pos}return n?e:new vg(e,r)};function xs(e){var t=Error.call(this,e);return t.__proto__=xs.prototype,t}xs.prototype=Object.create(Error.prototype);xs.prototype.constructor=xs;xs.prototype.name="TransformError";var kt=function(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new pr},yg={before:{configurable:!0},docChanged:{configurable:!0}};yg.before.get=function(){return this.docs.length?this.docs[0]:this.doc};kt.prototype.step=function(e){var t=this.maybeStep(e);if(t.failed)throw new xs(t.failed);return this};kt.prototype.maybeStep=function(e){var t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t};yg.docChanged.get=function(){return this.steps.length>0};kt.prototype.addStep=function(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t};Object.defineProperties(kt.prototype,yg);function Jf(){throw new Error("Override me")}var _g=Object.create(null),kr=function(){};kr.prototype.apply=function(e){return Jf()};kr.prototype.getMap=function(){return fr.empty};kr.prototype.invert=function(e){return Jf()};kr.prototype.map=function(e){return Jf()};kr.prototype.merge=function(e){return null};kr.prototype.toJSON=function(){return Jf()};kr.fromJSON=function(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");var n=_g[t.stepType];if(!n)throw new RangeError("No step type "+t.stepType+" defined");return n.fromJSON(e,t)};kr.jsonID=function(e,t){if(e in _g)throw new RangeError("Duplicate use of step JSON ID "+e);return _g[e]=t,t.prototype.jsonID=e,t};var Lr=function(e,t){this.doc=e,this.failed=t};Lr.ok=function(e){return new Lr(e,null)};Lr.fail=function(e){return new Lr(null,e)};Lr.fromReplace=function(e,t,n,r){try{return Lr.ok(e.replace(t,n,r))}catch(o){if(o instanceof xn)return Lr.fail(o.message);throw o}};var Sn=function(e){function t(n,r,o,a){e.call(this),this.from=n,this.to=r,this.slice=o,this.structure=!!a}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.apply=function(n){return this.structure&&bg(n,this.from,this.to)?Lr.fail("Structure replace would overwrite content"):Lr.fromReplace(n,this.from,this.to,this.slice)},t.prototype.getMap=function(){return new fr([this.from,this.to-this.from,this.slice.size])},t.prototype.invert=function(n){return new t(this.from,this.from+this.slice.size,n.slice(this.from,this.to))},t.prototype.map=function(n){var r=n.mapResult(this.from,1),o=n.mapResult(this.to,-1);return r.deleted&&o.deleted?null:new t(r.pos,Math.max(r.pos,o.pos),this.slice)},t.prototype.merge=function(n){if(!(n instanceof t)||n.structure||this.structure)return null;if(this.from+this.slice.size==n.from&&!this.slice.openEnd&&!n.slice.openStart){var r=this.slice.size+n.slice.size==0?Y.empty:new Y(this.slice.content.append(n.slice.content),this.slice.openStart,n.slice.openEnd);return new t(this.from,this.to+(n.to-n.from),r,this.structure)}else if(n.to==this.from&&!this.slice.openStart&&!n.slice.openEnd){var o=this.slice.size+n.slice.size==0?Y.empty:new Y(n.slice.content.append(this.slice.content),n.slice.openStart,this.slice.openEnd);return new t(n.from,this.to,o,this.structure)}else return null},t.prototype.toJSON=function(){var n={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(n.slice=this.slice.toJSON()),this.structure&&(n.structure=!0),n},t.fromJSON=function(n,r){if(typeof r.from!="number"||typeof r.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new t(r.from,r.to,Y.fromJSON(n,r.slice),!!r.structure)},t}(kr);kr.jsonID("replace",Sn);var nr=function(e){function t(n,r,o,a,s,u,l){e.call(this),this.from=n,this.to=r,this.gapFrom=o,this.gapTo=a,this.slice=s,this.insert=u,this.structure=!!l}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.apply=function(n){if(this.structure&&(bg(n,this.from,this.gapFrom)||bg(n,this.gapTo,this.to)))return Lr.fail("Structure gap-replace would overwrite content");var r=n.slice(this.gapFrom,this.gapTo);if(r.openStart||r.openEnd)return Lr.fail("Gap is not a flat range");var o=this.slice.insertAt(this.insert,r.content);return o?Lr.fromReplace(n,this.from,this.to,o):Lr.fail("Content does not fit in gap")},t.prototype.getMap=function(){return new fr([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])},t.prototype.invert=function(n){var r=this.gapTo-this.gapFrom;return new t(this.from,this.from+this.slice.size+r,this.from+this.insert,this.from+this.insert+r,n.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)},t.prototype.map=function(n){var r=n.mapResult(this.from,1),o=n.mapResult(this.to,-1),a=n.map(this.gapFrom,-1),s=n.map(this.gapTo,1);return r.deleted&&o.deleted||a<r.pos||s>o.pos?null:new t(r.pos,o.pos,a,s,this.slice,this.insert,this.structure)},t.prototype.toJSON=function(){var n={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(n.slice=this.slice.toJSON()),this.structure&&(n.structure=!0),n},t.fromJSON=function(n,r){if(typeof r.from!="number"||typeof r.to!="number"||typeof r.gapFrom!="number"||typeof r.gapTo!="number"||typeof r.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new t(r.from,r.to,r.gapFrom,r.gapTo,Y.fromJSON(n,r.slice),r.insert,!!r.structure)},t}(kr);kr.jsonID("replaceAround",nr);function bg(e,t,n){for(var r=e.resolve(t),o=n-t,a=r.depth;o>0&&a>0&&r.indexAfter(a)==r.node(a).childCount;)a--,o--;if(o>0)for(var s=r.node(a).maybeChild(r.indexAfter(a));o>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,o--}return!1}function Yj(e,t,n){return(t==0||e.canReplace(t,e.childCount))&&(n==e.childCount||e.canReplace(0,n))}function Ii(e){for(var t=e.parent,n=t.content.cutByIndex(e.startIndex,e.endIndex),r=e.depth;;--r){var o=e.$from.node(r),a=e.$from.index(r),s=e.$to.indexAfter(r);if(r<e.depth&&o.canReplace(a,s,n))return r;if(r==0||o.type.spec.isolating||!Yj(o,a,s))break}}kt.prototype.lift=function(e,t){for(var n=e.$from,r=e.$to,o=e.depth,a=n.before(o+1),s=r.after(o+1),u=a,l=s,c=q.empty,m=0,me=o,xe=!1;me>t;me--)xe||n.index(me)>0?(xe=!0,c=q.from(n.node(me).copy(c)),m++):u--;for(var Ne=q.empty,He=0,Ye=o,Je=!1;Ye>t;Ye--)Je||r.after(Ye+1)<r.end(Ye)?(Je=!0,Ne=q.from(r.node(Ye).copy(Ne)),He++):l++;return this.step(new nr(u,l,a,s,new Y(c.append(Ne),m,He),c.size-m,!0))};function Ss(e,t,n,r){r===void 0&&(r=e);var o=Jj(e,t),a=o&&Xj(r,t);return a?o.map(GS).concat({type:t,attrs:n}).concat(a.map(GS)):null}function GS(e){return{type:e,attrs:null}}function Jj(e,t){var n=e.parent,r=e.startIndex,o=e.endIndex,a=n.contentMatchAt(r).findWrapping(t);if(!a)return null;var s=a.length?a[0]:t;return n.canReplaceWith(r,o,s)?a:null}function Xj(e,t){var n=e.parent,r=e.startIndex,o=e.endIndex,a=n.child(r),s=t.contentMatch.findWrapping(a.type);if(!s)return null;for(var u=s.length?s[s.length-1]:t,l=u.contentMatch,c=r;l&&c<o;c++)l=l.matchType(n.child(c).type);return!l||!l.validEnd?null:s}kt.prototype.wrap=function(e,t){for(var n=q.empty,r=t.length-1;r>=0;r--)n=q.from(t[r].type.create(t[r].attrs,n));var o=e.start,a=e.end;return this.step(new nr(o,a,o,a,new Y(n,0,0),t.length,!0))};kt.prototype.setBlockType=function(e,t,n,r){var o=this;if(t===void 0&&(t=e),!n.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");var a=this.steps.length;return this.doc.nodesBetween(e,t,function(s,u){if(s.isTextblock&&!s.hasMarkup(n,r)&&Zj(o.doc,o.mapping.slice(a).map(u),n)){o.clearIncompatible(o.mapping.slice(a).map(u,1),n);var l=o.mapping.slice(a),c=l.map(u,1),m=l.map(u+s.nodeSize,1);return o.step(new nr(c,m,c+1,m-1,new Y(q.from(n.create(r,null,s.marks)),0,0),1,!0)),!1}}),this};function Zj(e,t,n){var r=e.resolve(t),o=r.index();return r.parent.canReplaceWith(o,o+1,n)}kt.prototype.setNodeMarkup=function(e,t,n,r){var o=this.doc.nodeAt(e);if(!o)throw new RangeError("No node at given position");t||(t=o.type);var a=t.create(n,null,r||o.marks);if(o.isLeaf)return this.replaceWith(e,e+o.nodeSize,a);if(!t.validContent(o.content))throw new RangeError("Invalid content for node type "+t.name);return this.step(new nr(e,e+o.nodeSize,e+1,e+o.nodeSize-1,new Y(q.from(a),0,0),1,!0))};function an(e,t,n,r){n===void 0&&(n=1);var o=e.resolve(t),a=o.depth-n,s=r&&r[r.length-1]||o.parent;if(a<0||o.parent.type.spec.isolating||!o.parent.canReplace(o.index(),o.parent.childCount)||!s.type.validContent(o.parent.content.cutByIndex(o.index(),o.parent.childCount)))return!1;for(var u=o.depth-1,l=n-2;u>a;u--,l--){var c=o.node(u),m=o.index(u);if(c.type.spec.isolating)return!1;var me=c.content.cutByIndex(m,c.childCount),xe=r&&r[l]||c;if(xe!=c&&(me=me.replaceChild(0,xe.type.create(xe.attrs))),!c.canReplace(m+1,c.childCount)||!xe.type.validContent(me))return!1}var Ne=o.indexAfter(a),He=r&&r[0];return o.node(a).canReplaceWith(Ne,Ne,He?He.type:o.node(a+1).type)}kt.prototype.split=function(e,t,n){t===void 0&&(t=1);for(var r=this.doc.resolve(e),o=q.empty,a=q.empty,s=r.depth,u=r.depth-t,l=t-1;s>u;s--,l--){o=q.from(r.node(s).copy(o));var c=n&&n[l];a=q.from(c?c.type.create(c.attrs,a):r.node(s).copy(a))}return this.step(new Sn(e,e,new Y(o.append(a),t,t),!0))};function aa(e,t){var n=e.resolve(t),r=n.index();return eF(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function eF(e,t){return e&&t&&!e.isLeaf&&e.canAppend(t)}kt.prototype.join=function(e,t){t===void 0&&(t=1);var n=new Sn(e-t,e+t,Y.empty,!0);return this.step(n)};function tF(e,t,n){var r=e.resolve(t);if(r.parent.canReplaceWith(r.index(),r.index(),n))return t;if(r.parentOffset==0)for(var o=r.depth-1;o>=0;o--){var a=r.index(o);if(r.node(o).canReplaceWith(a,a,n))return r.before(o+1);if(a>0)return null}if(r.parentOffset==r.parent.content.size)for(var s=r.depth-1;s>=0;s--){var u=r.indexAfter(s);if(r.node(s).canReplaceWith(u,u,n))return r.after(s+1);if(u<r.node(s).childCount)return null}}function QS(e,t,n){var r=e.resolve(t);if(!n.content.size)return t;for(var o=n.content,a=0;a<n.openStart;a++)o=o.firstChild.content;for(var s=1;s<=(n.openStart==0&&n.size?2:1);s++)for(var u=r.depth;u>=0;u--){var l=u==r.depth?0:r.pos<=(r.start(u+1)+r.end(u+1))/2?-1:1,c=r.index(u)+(l>0?1:0),m=r.node(u),me=!1;if(s==1)me=m.canReplace(c,c,o);else{var xe=m.contentMatchAt(c).findWrapping(o.firstChild.type);me=xe&&m.canReplaceWith(c,c,xe[0])}if(me)return l==0?r.pos:l<0?r.before(u+1):r.after(u+1)}return null}function wg(e,t,n){for(var r=[],o=0;o<e.childCount;o++){var a=e.child(o);a.content.size&&(a=a.copy(wg(a.content,t,a))),a.isInline&&(a=t(a,n,o)),r.push(a)}return q.fromArray(r)}var xg=function(e){function t(n,r,o){e.call(this),this.from=n,this.to=r,this.mark=o}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.apply=function(n){var r=this,o=n.slice(this.from,this.to),a=n.resolve(this.from),s=a.node(a.sharedDepth(this.to)),u=new Y(wg(o.content,function(l,c){return!l.isAtom||!c.type.allowsMarkType(r.mark.type)?l:l.mark(r.mark.addToSet(l.marks))},s),o.openStart,o.openEnd);return Lr.fromReplace(n,this.from,this.to,u)},t.prototype.invert=function(){return new sl(this.from,this.to,this.mark)},t.prototype.map=function(n){var r=n.mapResult(this.from,1),o=n.mapResult(this.to,-1);return r.deleted&&o.deleted||r.pos>=o.pos?null:new t(r.pos,o.pos,this.mark)},t.prototype.merge=function(n){if(n instanceof t&&n.mark.eq(this.mark)&&this.from<=n.to&&this.to>=n.from)return new t(Math.min(this.from,n.from),Math.max(this.to,n.to),this.mark)},t.prototype.toJSON=function(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},t.fromJSON=function(n,r){if(typeof r.from!="number"||typeof r.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new t(r.from,r.to,n.markFromJSON(r.mark))},t}(kr);kr.jsonID("addMark",xg);var sl=function(e){function t(n,r,o){e.call(this),this.from=n,this.to=r,this.mark=o}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.apply=function(n){var r=this,o=n.slice(this.from,this.to),a=new Y(wg(o.content,function(s){return s.mark(r.mark.removeFromSet(s.marks))}),o.openStart,o.openEnd);return Lr.fromReplace(n,this.from,this.to,a)},t.prototype.invert=function(){return new xg(this.from,this.to,this.mark)},t.prototype.map=function(n){var r=n.mapResult(this.from,1),o=n.mapResult(this.to,-1);return r.deleted&&o.deleted||r.pos>=o.pos?null:new t(r.pos,o.pos,this.mark)},t.prototype.merge=function(n){if(n instanceof t&&n.mark.eq(this.mark)&&this.from<=n.to&&this.to>=n.from)return new t(Math.min(this.from,n.from),Math.max(this.to,n.to),this.mark)},t.prototype.toJSON=function(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},t.fromJSON=function(n,r){if(typeof r.from!="number"||typeof r.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new t(r.from,r.to,n.markFromJSON(r.mark))},t}(kr);kr.jsonID("removeMark",sl);kt.prototype.addMark=function(e,t,n){var r=this,o=[],a=[],s=null,u=null;return this.doc.nodesBetween(e,t,function(l,c,m){if(l.isInline){var me=l.marks;if(!n.isInSet(me)&&m.type.allowsMarkType(n.type)){for(var xe=Math.max(c,e),Ne=Math.min(c+l.nodeSize,t),He=n.addToSet(me),Ye=0;Ye<me.length;Ye++)me[Ye].isInSet(He)||(s&&s.to==xe&&s.mark.eq(me[Ye])?s.to=Ne:o.push(s=new sl(xe,Ne,me[Ye])));u&&u.to==xe?u.to=Ne:a.push(u=new xg(xe,Ne,n))}}}),o.forEach(function(l){return r.step(l)}),a.forEach(function(l){return r.step(l)}),this};kt.prototype.removeMark=function(e,t,n){var r=this;n===void 0&&(n=null);var o=[],a=0;return this.doc.nodesBetween(e,t,function(s,u){if(s.isInline){a++;var l=null;if(n instanceof Ti)for(var c=s.marks,m;m=n.isInSet(c);)(l||(l=[])).push(m),c=m.removeFromSet(c);else n?n.isInSet(s.marks)&&(l=[n]):l=s.marks;if(l&&l.length)for(var me=Math.min(u+s.nodeSize,t),xe=0;xe<l.length;xe++){for(var Ne=l[xe],He=void 0,Ye=0;Ye<o.length;Ye++){var Je=o[Ye];Je.step==a-1&&Ne.eq(o[Ye].style)&&(He=Je)}He?(He.to=me,He.step=a):o.push({style:Ne,from:Math.max(u,e),to:me,step:a})}}}),o.forEach(function(s){return r.step(new sl(s.from,s.to,s.style))}),this};kt.prototype.clearIncompatible=function(e,t,n){n===void 0&&(n=t.contentMatch);for(var r=this.doc.nodeAt(e),o=[],a=e+1,s=0;s<r.childCount;s++){var u=r.child(s),l=a+u.nodeSize,c=n.matchType(u.type,u.attrs);if(!c)o.push(new Sn(a,l,Y.empty));else{n=c;for(var m=0;m<u.marks.length;m++)t.allowsMarkType(u.marks[m].type)||this.step(new sl(a,l,u.marks[m]))}a=l}if(!n.validEnd){var me=n.fillBefore(q.empty,!0);this.replace(a,a,new Y(me,0,0))}for(var xe=o.length-1;xe>=0;xe--)this.step(o[xe]);return this};function rF(e,t,n,r){if(n===void 0&&(n=t),r===void 0&&(r=Y.empty),t==n&&!r.size)return null;var o=e.resolve(t),a=e.resolve(n);return YS(o,a,r)?new Sn(t,n,r):new sn(o,a,r).fit()}kt.prototype.replace=function(e,t,n){t===void 0&&(t=e),n===void 0&&(n=Y.empty);var r=rF(this.doc,e,t,n);return r&&this.step(r),this};kt.prototype.replaceWith=function(e,t,n){return this.replace(e,t,new Y(q.from(n),0,0))};kt.prototype.delete=function(e,t){return this.replace(e,t,Y.empty)};kt.prototype.insert=function(e,t){return this.replaceWith(e,e,t)};function YS(e,t,n){return!n.openStart&&!n.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),n.content)}var sn=function(e,t,n){this.$to=t,this.$from=e,this.unplaced=n,this.frontier=[];for(var r=0;r<=e.depth;r++){var o=e.node(r);this.frontier.push({type:o.type,match:o.contentMatchAt(e.indexAfter(r))})}this.placed=q.empty;for(var a=e.depth;a>0;a--)this.placed=q.from(e.node(a).copy(this.placed))},JS={depth:{configurable:!0}};JS.depth.get=function(){return this.frontier.length-1};sn.prototype.fit=function(){for(;this.unplaced.size;){var e=this.findFittable();e?this.placeNodes(e):this.openMore()||this.dropNode()}var t=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,o=this.close(t<0?this.$to:r.doc.resolve(t));if(!o)return null;for(var a=this.placed,s=r.depth,u=o.depth;s&&u&&a.childCount==1;)a=a.firstChild.content,s--,u--;var l=new Y(a,s,u);if(t>-1)return new nr(r.pos,t,this.$to.pos,this.$to.end(),l,n);if(l.size||r.pos!=this.$to.pos)return new Sn(r.pos,o.pos,l)};sn.prototype.findFittable=function(){for(var e=1;e<=2;e++)for(var t=this.unplaced.openStart;t>=0;t--){var n=void 0,r=void 0;t?(r=Sg(this.unplaced.content,t-1).firstChild,n=r.content):n=this.unplaced.content;for(var o=n.firstChild,a=this.depth;a>=0;a--){var s=this.frontier[a],u=s.type,l=s.match,c=void 0,m=void 0;if(e==1&&(o?l.matchType(o.type)||(m=l.fillBefore(q.from(o),!1)):u.compatibleContent(r.type)))return{sliceDepth:t,frontierDepth:a,parent:r,inject:m};if(e==2&&o&&(c=l.findWrapping(o.type)))return{sliceDepth:t,frontierDepth:a,parent:r,wrap:c};if(r&&l.matchType(r.type))break}}};sn.prototype.openMore=function(){var e=this.unplaced,t=e.content,n=e.openStart,r=e.openEnd,o=Sg(t,n);return!o.childCount||o.firstChild.isLeaf?!1:(this.unplaced=new Y(t,n+1,Math.max(r,o.size+n>=t.size-r?n+1:0)),!0)};sn.prototype.dropNode=function(){var e=this.unplaced,t=e.content,n=e.openStart,r=e.openEnd,o=Sg(t,n);if(o.childCount<=1&&n>0){var a=t.size-n<=n+o.size;this.unplaced=new Y(ul(t,n-1,1),n-1,a?n-1:r)}else this.unplaced=new Y(ul(t,n,1),n,r)};sn.prototype.placeNodes=function(e){for(var t=e.sliceDepth,n=e.frontierDepth,r=e.parent,o=e.inject,a=e.wrap;this.depth>n;)this.closeFrontierNode();if(a)for(var s=0;s<a.length;s++)this.openFrontierNode(a[s]);var u=this.unplaced,l=r?r.content:u.content,c=u.openStart-t,m=0,me=[],xe=this.frontier[n],Ne=xe.match,He=xe.type;if(o){for(var Ye=0;Ye<o.childCount;Ye++)me.push(o.child(Ye));Ne=Ne.matchFragment(o)}for(var Je=l.size+t-(u.content.size-u.openEnd);m<l.childCount;){var vn=l.child(m),La=Ne.matchType(vn.type);if(!La)break;m++,(m>1||c==0||vn.content.size)&&(Ne=La,me.push(XS(vn.mark(He.allowedMarks(vn.marks)),m==1?c:0,m==l.childCount?Je:-1)))}var sr=m==l.childCount;sr||(Je=-1),this.placed=ll(this.placed,n,q.from(me)),this.frontier[n].match=Ne,sr&&Je<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(var Zr=0,zs=l;Zr<Je;Zr++){var za=zs.lastChild;this.frontier.push({type:za.type,match:za.contentMatchAt(za.childCount)}),zs=za.content}this.unplaced=sr?t==0?Y.empty:new Y(ul(u.content,t-1,1),t-1,Je<0?u.openEnd:t-1):new Y(ul(u.content,t,m),u.openStart,u.openEnd)};sn.prototype.mustMoveInline=function(){if(!this.$to.parent.isTextblock||this.$to.end()==this.$to.pos)return-1;var e=this.frontier[this.depth],t;if(!e.type.isTextblock||!Eg(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;for(var n=this.$to,r=n.depth,o=this.$to.after(r);r>1&&o==this.$to.end(--r);)++o;return o};sn.prototype.findCloseLevel=function(e){e:for(var t=Math.min(this.depth,e.depth);t>=0;t--){var n=this.frontier[t],r=n.match,o=n.type,a=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),s=Eg(e,t,o,r,a);if(s){for(var u=t-1;u>=0;u--){var l=this.frontier[u],c=l.match,m=l.type,me=Eg(e,u,m,c,!0);if(!me||me.childCount)continue e}return{depth:t,fit:s,move:a?e.doc.resolve(e.after(t+1)):e}}}};sn.prototype.close=function(e){var t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=ll(this.placed,t.depth,t.fit)),e=t.move;for(var n=t.depth+1;n<=e.depth;n++){var r=e.node(n),o=r.type.contentMatch.fillBefore(r.content,!0,e.index(n));this.openFrontierNode(r.type,r.attrs,o)}return e};sn.prototype.openFrontierNode=function(e,t,n){var r=this.frontier[this.depth];r.match=r.match.matchType(e),this.placed=ll(this.placed,this.depth,q.from(e.create(t,n))),this.frontier.push({type:e,match:e.contentMatch})};sn.prototype.closeFrontierNode=function(){var e=this.frontier.pop(),t=e.match.fillBefore(q.empty,!0);t.childCount&&(this.placed=ll(this.placed,this.frontier.length,t))};Object.defineProperties(sn.prototype,JS);function ul(e,t,n){return t==0?e.cutByIndex(n):e.replaceChild(0,e.firstChild.copy(ul(e.firstChild.content,t-1,n)))}function ll(e,t,n){return t==0?e.append(n):e.replaceChild(e.childCount-1,e.lastChild.copy(ll(e.lastChild.content,t-1,n)))}function Sg(e,t){for(var n=0;n<t;n++)e=e.firstChild.content;return e}function XS(e,t,n){if(t<=0)return e;var r=e.content;return t>1&&(r=r.replaceChild(0,XS(r.firstChild,t-1,r.childCount==1?n-1:0))),t>0&&(r=e.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(e.type.contentMatch.matchFragment(r).fillBefore(q.empty,!0)))),e.copy(r)}function Eg(e,t,n,r,o){var a=e.node(t),s=o?e.indexAfter(t):e.index(t);if(s==a.childCount&&!n.compatibleContent(a.type))return null;var u=r.fillBefore(a.content,!0,s);return u&&!nF(n,a.content,s)?u:null}function nF(e,t,n){for(var r=n;r<t.childCount;r++)if(!e.allowsMarks(t.child(r).marks))return!0;return!1}kt.prototype.replaceRange=function(e,t,n){if(!n.size)return this.deleteRange(e,t);var r=this.doc.resolve(e),o=this.doc.resolve(t);if(YS(r,o,n))return this.step(new Sn(e,t,n));var a=eE(r,this.doc.resolve(t));a[a.length-1]==0&&a.pop();var s=-(r.depth+1);a.unshift(s);for(var u=r.depth,l=r.pos-1;u>0;u--,l--){var c=r.node(u).type.spec;if(c.defining||c.isolating)break;a.indexOf(u)>-1?s=u:r.before(u)==l&&a.splice(1,0,-u)}for(var m=a.indexOf(s),me=[],xe=n.openStart,Ne=n.content,He=0;;He++){var Ye=Ne.firstChild;if(me.push(Ye),He==n.openStart)break;Ne=Ye.content}xe>0&&me[xe-1].type.spec.defining&&r.node(m).type!=me[xe-1].type?xe-=1:xe>=2&&me[xe-1].isTextblock&&me[xe-2].type.spec.defining&&r.node(m).type!=me[xe-2].type&&(xe-=2);for(var Je=n.openStart;Je>=0;Je--){var vn=(Je+xe+1)%(n.openStart+1),La=me[vn];if(La)for(var sr=0;sr<a.length;sr++){var Zr=a[(sr+m)%a.length],zs=!0;Zr<0&&(zs=!1,Zr=-Zr);var za=r.node(Zr-1),Hs=r.index(Zr-1);if(za.canReplaceWith(Hs,Hs,La.type,La.marks))return this.replace(r.before(Zr),zs?o.after(Zr):t,new Y(ZS(n.content,0,n.openStart,vn),vn,n.openEnd))}}for(var lc=this.steps.length,Ty=a.length-1;Ty>=0&&(this.replace(e,t,n),!(this.steps.length>lc));Ty--){var _y=a[Ty];_y<0||(e=r.before(_y),t=o.after(_y))}return this};function ZS(e,t,n,r,o){if(t<n){var a=e.firstChild;e=e.replaceChild(0,a.copy(ZS(a.content,t+1,n,r,a)))}if(t>r){var s=o.contentMatchAt(0),u=s.fillBefore(e).append(e);e=u.append(s.matchFragment(u).fillBefore(q.empty,!0))}return e}kt.prototype.replaceRangeWith=function(e,t,n){if(!n.isInline&&e==t&&this.doc.resolve(e).parent.content.size){var r=tF(this.doc,e,n.type);r!=null&&(e=t=r)}return this.replaceRange(e,t,new Y(q.from(n),0,0))};kt.prototype.deleteRange=function(e,t){for(var n=this.doc.resolve(e),r=this.doc.resolve(t),o=eE(n,r),a=0;a<o.length;a++){var s=o[a],u=a==o.length-1;if(u&&s==0||n.node(s).type.contentMatch.validEnd)return this.delete(n.start(s),r.end(s));if(s>0&&(u||n.node(s-1).canReplace(n.index(s-1),r.indexAfter(s-1))))return this.delete(n.before(s),r.after(s))}for(var l=1;l<=n.depth&&l<=r.depth;l++)if(e-n.start(l)==n.depth-l&&t>n.end(l)&&r.end(l)-t!=r.depth-l)return this.delete(n.before(l),t);return this.delete(e,t)};function eE(e,t){for(var n=[],r=Math.min(e.depth,t.depth),o=r;o>=0;o--){var a=e.start(o);if(a<e.pos-(e.depth-o)||t.end(o)>t.pos+(t.depth-o)||e.node(o).type.spec.isolating||t.node(o).type.spec.isolating)break;(a==t.start(o)||o==e.depth&&o==t.depth&&e.parent.inlineContent&&t.parent.inlineContent&&o&&t.start(o-1)==a-1)&&n.push(o)}return n}var kg=Object.create(null),ve=function(e,t,n){this.ranges=n||[new iF(e.min(t),e.max(t))],this.$anchor=e,this.$head=t},lo={anchor:{configurable:!0},head:{configurable:!0},from:{configurable:!0},to:{configurable:!0},$from:{configurable:!0},$to:{configurable:!0},empty:{configurable:!0}};lo.anchor.get=function(){return this.$anchor.pos};lo.head.get=function(){return this.$head.pos};lo.from.get=function(){return this.$from.pos};lo.to.get=function(){return this.$to.pos};lo.$from.get=function(){return this.ranges[0].$from};lo.$to.get=function(){return this.ranges[0].$to};lo.empty.get=function(){for(var e=this.ranges,t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0};ve.prototype.content=function(){return this.$from.node(0).slice(this.from,this.to,!0)};ve.prototype.replace=function(e,t){t===void 0&&(t=Y.empty);for(var n=t.content.lastChild,r=null,o=0;o<t.openEnd;o++)r=n,n=n.lastChild;for(var a=e.steps.length,s=this.ranges,u=0;u<s.length;u++){var l=s[u],c=l.$from,m=l.$to,me=e.mapping.slice(a);e.replaceRange(me.map(c.pos),me.map(m.pos),u?Y.empty:t),u==0&&tE(e,a,(n?n.isInline:r&&r.isTextblock)?-1:1)}};ve.prototype.replaceWith=function(e,t){for(var n=e.steps.length,r=this.ranges,o=0;o<r.length;o++){var a=r[o],s=a.$from,u=a.$to,l=e.mapping.slice(n),c=l.map(s.pos),m=l.map(u.pos);o?e.deleteRange(c,m):(e.replaceRangeWith(c,m,t),tE(e,n,t.isInline?-1:1))}};ve.findFrom=function(e,t,n){var r=e.parent.inlineContent?new Re(e):Es(e.node(0),e.parent,e.pos,e.index(),t,n);if(r)return r;for(var o=e.depth-1;o>=0;o--){var a=t<0?Es(e.node(0),e.node(o),e.before(o+1),e.index(o),t,n):Es(e.node(0),e.node(o),e.after(o+1),e.index(o)+1,t,n);if(a)return a}};ve.near=function(e,t){return t===void 0&&(t=1),this.findFrom(e,t)||this.findFrom(e,-t)||new En(e.node(0))};ve.atStart=function(e){return Es(e,e,0,0,1)||new En(e)};ve.atEnd=function(e){return Es(e,e,e.content.size,e.childCount,-1)||new En(e)};ve.fromJSON=function(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");var n=kg[t.type];if(!n)throw new RangeError("No selection type "+t.type+" defined");return n.fromJSON(e,t)};ve.jsonID=function(e,t){if(e in kg)throw new RangeError("Duplicate use of selection JSON ID "+e);return kg[e]=t,t.prototype.jsonID=e,t};ve.prototype.getBookmark=function(){return Re.between(this.$anchor,this.$head).getBookmark()};Object.defineProperties(ve.prototype,lo);ve.prototype.visible=!0;var iF=function(e,t){this.$from=e,this.$to=t},Re=function(e){function t(r,o){o===void 0&&(o=r),e.call(this,r,o)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={$cursor:{configurable:!0}};return n.$cursor.get=function(){return this.$anchor.pos==this.$head.pos?this.$head:null},t.prototype.map=function(r,o){var a=r.resolve(o.map(this.head));if(!a.parent.inlineContent)return e.near(a);var s=r.resolve(o.map(this.anchor));return new t(s.parent.inlineContent?s:a,a)},t.prototype.replace=function(r,o){if(o===void 0&&(o=Y.empty),e.prototype.replace.call(this,r,o),o==Y.empty){var a=this.$from.marksAcross(this.$to);a&&r.ensureMarks(a)}},t.prototype.eq=function(r){return r instanceof t&&r.anchor==this.anchor&&r.head==this.head},t.prototype.getBookmark=function(){return new cl(this.anchor,this.head)},t.prototype.toJSON=function(){return{type:"text",anchor:this.anchor,head:this.head}},t.fromJSON=function(r,o){if(typeof o.anchor!="number"||typeof o.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new t(r.resolve(o.anchor),r.resolve(o.head))},t.create=function(r,o,a){a===void 0&&(a=o);var s=r.resolve(o);return new this(s,a==o?s:r.resolve(a))},t.between=function(r,o,a){var s=r.pos-o.pos;if((!a||s)&&(a=s>=0?1:-1),!o.parent.inlineContent){var u=e.findFrom(o,a,!0)||e.findFrom(o,-a,!0);if(u)o=u.$head;else return e.near(o,a)}return r.parent.inlineContent||(s==0?r=o:(r=(e.findFrom(r,-a,!0)||e.findFrom(r,a,!0)).$anchor,r.pos<o.pos!=s<0&&(r=o))),new t(r,o)},Object.defineProperties(t.prototype,n),t}(ve);ve.jsonID("text",Re);var cl=function(e,t){this.anchor=e,this.head=t};cl.prototype.map=function(e){return new cl(e.map(this.anchor),e.map(this.head))};cl.prototype.resolve=function(e){return Re.between(e.resolve(this.anchor),e.resolve(this.head))};var ye=function(e){function t(n){var r=n.nodeAfter,o=n.node(0).resolve(n.pos+r.nodeSize);e.call(this,n,o),this.node=r}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.map=function(n,r){var o=r.mapResult(this.anchor),a=o.deleted,s=o.pos,u=n.resolve(s);return a?e.near(u):new t(u)},t.prototype.content=function(){return new Y(q.from(this.node),0,0)},t.prototype.eq=function(n){return n instanceof t&&n.anchor==this.anchor},t.prototype.toJSON=function(){return{type:"node",anchor:this.anchor}},t.prototype.getBookmark=function(){return new Xf(this.anchor)},t.fromJSON=function(n,r){if(typeof r.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new t(n.resolve(r.anchor))},t.create=function(n,r){return new this(n.resolve(r))},t.isSelectable=function(n){return!n.isText&&n.type.spec.selectable!==!1},t}(ve);ye.prototype.visible=!1;ve.jsonID("node",ye);var Xf=function(e){this.anchor=e};Xf.prototype.map=function(e){var t=e.mapResult(this.anchor),n=t.deleted,r=t.pos;return n?new cl(r,r):new Xf(r)};Xf.prototype.resolve=function(e){var t=e.resolve(this.anchor),n=t.nodeAfter;return n&&ye.isSelectable(n)?new ye(t):ve.near(t)};var En=function(e){function t(n){e.call(this,n.resolve(0),n.resolve(n.content.size))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.replace=function(n,r){if(r===void 0&&(r=Y.empty),r==Y.empty){n.delete(0,n.doc.content.size);var o=e.atStart(n.doc);o.eq(n.selection)||n.setSelection(o)}else e.prototype.replace.call(this,n,r)},t.prototype.toJSON=function(){return{type:"all"}},t.fromJSON=function(n){return new t(n)},t.prototype.map=function(n){return new t(n)},t.prototype.eq=function(n){return n instanceof t},t.prototype.getBookmark=function(){return oF},t}(ve);ve.jsonID("all",En);var oF={map:function(){return this},resolve:function(e){return new En(e)}};function Es(e,t,n,r,o,a){if(t.inlineContent)return Re.create(e,n);for(var s=r-(o>0?0:1);o>0?s<t.childCount:s>=0;s+=o){var u=t.child(s);if(u.isAtom){if(!a&&ye.isSelectable(u))return ye.create(e,n-(o<0?u.nodeSize:0))}else{var l=Es(e,u,n+o,o<0?u.childCount:0,o,a);if(l)return l}n+=u.nodeSize*o}}function tE(e,t,n){var r=e.steps.length-1;if(!(r<t)){var o=e.steps[r];if(o instanceof Sn||o instanceof nr){var a=e.mapping.maps[r],s;a.forEach(function(u,l,c,m){s==null&&(s=m)}),e.setSelection(ve.near(e.doc.resolve(s),n))}}}var rE=1,Zf=2,nE=4,aF=function(e){function t(r){e.call(this,r.doc),this.time=Date.now(),this.curSelection=r.selection,this.curSelectionFor=0,this.storedMarks=r.storedMarks,this.updated=0,this.meta=Object.create(null)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={selection:{configurable:!0},selectionSet:{configurable:!0},storedMarksSet:{configurable:!0},isGeneric:{configurable:!0},scrolledIntoView:{configurable:!0}};return n.selection.get=function(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection},t.prototype.setSelection=function(r){if(r.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=r,this.curSelectionFor=this.steps.length,this.updated=(this.updated|rE)&~Zf,this.storedMarks=null,this},n.selectionSet.get=function(){return(this.updated&rE)>0},t.prototype.setStoredMarks=function(r){return this.storedMarks=r,this.updated|=Zf,this},t.prototype.ensureMarks=function(r){return ke.sameSet(this.storedMarks||this.selection.$from.marks(),r)||this.setStoredMarks(r),this},t.prototype.addStoredMark=function(r){return this.ensureMarks(r.addToSet(this.storedMarks||this.selection.$head.marks()))},t.prototype.removeStoredMark=function(r){return this.ensureMarks(r.removeFromSet(this.storedMarks||this.selection.$head.marks()))},n.storedMarksSet.get=function(){return(this.updated&Zf)>0},t.prototype.addStep=function(r,o){e.prototype.addStep.call(this,r,o),this.updated=this.updated&~Zf,this.storedMarks=null},t.prototype.setTime=function(r){return this.time=r,this},t.prototype.replaceSelection=function(r){return this.selection.replace(this,r),this},t.prototype.replaceSelectionWith=function(r,o){var a=this.selection;return o!==!1&&(r=r.mark(this.storedMarks||(a.empty?a.$from.marks():a.$from.marksAcross(a.$to)||ke.none))),a.replaceWith(this,r),this},t.prototype.deleteSelection=function(){return this.selection.replace(this),this},t.prototype.insertText=function(r,o,a){a===void 0&&(a=o);var s=this.doc.type.schema;if(o==null)return r?this.replaceSelectionWith(s.text(r),!0):this.deleteSelection();if(!r)return this.deleteRange(o,a);var u=this.storedMarks;if(!u){var l=this.doc.resolve(o);u=a==o?l.marks():l.marksAcross(this.doc.resolve(a))}return this.replaceRangeWith(o,a,s.text(r,u)),this.selection.empty||this.setSelection(ve.near(this.selection.$to)),this},t.prototype.setMeta=function(r,o){return this.meta[typeof r=="string"?r:r.key]=o,this},t.prototype.getMeta=function(r){return this.meta[typeof r=="string"?r:r.key]},n.isGeneric.get=function(){for(var r in this.meta)return!1;return!0},t.prototype.scrollIntoView=function(){return this.updated|=nE,this},n.scrolledIntoView.get=function(){return(this.updated&nE)>0},Object.defineProperties(t.prototype,n),t}(kt);function iE(e,t){return!t||!e?e:e.bind(t)}var fl=function(e,t,n){this.name=e,this.init=iE(t.init,n),this.apply=iE(t.apply,n)},sF=[new fl("doc",{init:function(e){return e.doc||e.schema.topNodeType.createAndFill()},apply:function(e){return e.doc}}),new fl("selection",{init:function(e,t){return e.selection||ve.atStart(t.doc)},apply:function(e){return e.selection}}),new fl("storedMarks",{init:function(e){return e.storedMarks||null},apply:function(e,t,n,r){return r.selection.$cursor?e.storedMarks:null}}),new fl("scrollToSelection",{init:function(){return 0},apply:function(e,t){return e.scrolledIntoView?t+1:t}})],Dg=function(e,t){var n=this;this.schema=e,this.fields=sF.concat(),this.plugins=[],this.pluginsByKey=Object.create(null),t&&t.forEach(function(r){if(n.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");n.plugins.push(r),n.pluginsByKey[r.key]=r,r.spec.state&&n.fields.push(new fl(r.key,r.spec.state,r))})},dr=function(e){this.config=e},ep={schema:{configurable:!0},plugins:{configurable:!0},tr:{configurable:!0}};ep.schema.get=function(){return this.config.schema};ep.plugins.get=function(){return this.config.plugins};dr.prototype.apply=function(e){return this.applyTransaction(e).state};dr.prototype.filterTransaction=function(e,t){t===void 0&&(t=-1);for(var n=0;n<this.config.plugins.length;n++)if(n!=t){var r=this.config.plugins[n];if(r.spec.filterTransaction&&!r.spec.filterTransaction.call(r,e,this))return!1}return!0};dr.prototype.applyTransaction=function(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};for(var t=[e],n=this.applyInner(e),r=null;;){for(var o=!1,a=0;a<this.config.plugins.length;a++){var s=this.config.plugins[a];if(s.spec.appendTransaction){var u=r?r[a].n:0,l=r?r[a].state:this,c=u<t.length&&s.spec.appendTransaction.call(s,u?t.slice(u):t,l,n);if(c&&n.filterTransaction(c,a)){if(c.setMeta("appendedTransaction",e),!r){r=[];for(var m=0;m<this.config.plugins.length;m++)r.push(m<a?{state:n,n:t.length}:{state:this,n:0})}t.push(c),n=n.applyInner(c),o=!0}r&&(r[a]={state:n,n:t.length})}}if(!o)return{state:n,transactions:t}}};dr.prototype.applyInner=function(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");for(var t=new dr(this.config),n=this.config.fields,r=0;r<n.length;r++){var o=n[r];t[o.name]=o.apply(e,this[o.name],this,t)}for(var a=0;a<pl.length;a++)pl[a](this,e,t);return t};ep.tr.get=function(){return new aF(this)};dr.create=function(e){for(var t=new Dg(e.doc?e.doc.type.schema:e.schema,e.plugins),n=new dr(t),r=0;r<t.fields.length;r++)n[t.fields[r].name]=t.fields[r].init(e,n);return n};dr.prototype.reconfigure=function(e){for(var t=new Dg(this.schema,e.plugins),n=t.fields,r=new dr(t),o=0;o<n.length;o++){var a=n[o].name;r[a]=this.hasOwnProperty(a)?this[a]:n[o].init(e,r)}return r};dr.prototype.toJSON=function(e){var t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(function(a){return a.toJSON()})),e&&typeof e=="object")for(var n in e){if(n=="doc"||n=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");var r=e[n],o=r.spec.state;o&&o.toJSON&&(t[n]=o.toJSON.call(r,this[r.key]))}return t};dr.fromJSON=function(e,t,n){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");var r=new Dg(e.schema,e.plugins),o=new dr(r);return r.fields.forEach(function(a){if(a.name=="doc")o.doc=Te.fromJSON(e.schema,t.doc);else if(a.name=="selection")o.selection=ve.fromJSON(o.doc,t.selection);else if(a.name=="storedMarks")t.storedMarks&&(o.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(n)for(var s in n){var u=n[s],l=u.spec.state;if(u.key==a.name&&l&&l.fromJSON&&Object.prototype.hasOwnProperty.call(t,s)){o[a.name]=l.fromJSON.call(u,e,t[s],o);return}}o[a.name]=a.init(e,o)}}),o};dr.addApplyListener=function(e){pl.push(e)};dr.removeApplyListener=function(e){var t=pl.indexOf(e);t>-1&&pl.splice(t,1)};Object.defineProperties(dr.prototype,ep);var pl=[];function oE(e,t,n){for(var r in e){var o=e[r];o instanceof Function?o=o.bind(t):r=="handleDOMEvents"&&(o=oE(o,t,{})),n[r]=o}return n}var vt=function(e){this.props={},e.props&&oE(e.props,this,this.props),this.spec=e,this.key=e.key?e.key.key:aE("plugin")};vt.prototype.getState=function(e){return e[this.key]};var Cg=Object.create(null);function aE(e){return e in Cg?e+"$"+ ++Cg[e]:(Cg[e]=0,e+"$")}var yt=function(e){e===void 0&&(e="key"),this.key=aE(e)};yt.prototype.get=function(e){return e.config.pluginsByKey[this.key]};yt.prototype.getState=function(e){return e[this.key]};v();function tp(e,t){return e.selection.empty?!1:(t&&t(e.tr.deleteSelection().scrollIntoView()),!0)}function Og(e,t,n){var r=e.selection,o=r.$cursor;if(!o||(n?!n.endOfTextblock("backward",e):o.parentOffset>0))return!1;var a=sE(o);if(!a){var s=o.blockRange(),u=s&&Ii(s);return u==null?!1:(t&&t(e.tr.lift(s,u).scrollIntoView()),!0)}var l=a.nodeBefore;if(!l.type.spec.isolating&&fE(e,a,t))return!0;if(o.parent.content.size==0&&(ks(l,"end")||ye.isSelectable(l))){if(t){var c=e.tr.deleteRange(o.before(),o.after());c.setSelection(ks(l,"end")?ve.findFrom(c.doc.resolve(c.mapping.map(a.pos,-1)),-1):ye.create(c.doc,a.pos-l.nodeSize)),t(c.scrollIntoView())}return!0}return l.isAtom&&a.depth==o.depth-1?(t&&t(e.tr.delete(a.pos-l.nodeSize,a.pos).scrollIntoView()),!0):!1}function ks(e,t,n){for(;e;e=t=="start"?e.firstChild:e.lastChild){if(e.isTextblock)return!0;if(n&&e.childCount!=1)return!1}return!1}function Tg(e,t,n){var r=e.selection,o=r.$head,a=r.empty,s=o;if(!a)return!1;if(o.parent.isTextblock){if(n?!n.endOfTextblock("backward",e):o.parentOffset>0)return!1;s=sE(o)}var u=s&&s.nodeBefore;return!u||!ye.isSelectable(u)?!1:(t&&t(e.tr.setSelection(ye.create(e.doc,s.pos-u.nodeSize)).scrollIntoView()),!0)}function sE(e){if(!e.parent.type.spec.isolating)for(var t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}function Ag(e,t,n){var r=e.selection,o=r.$cursor;if(!o||(n?!n.endOfTextblock("forward",e):o.parentOffset<o.parent.content.size))return!1;var a=uE(o);if(!a)return!1;var s=a.nodeAfter;if(fE(e,a,t))return!0;if(o.parent.content.size==0&&(ks(s,"start")||ye.isSelectable(s))){if(t){var u=e.tr.deleteRange(o.before(),o.after());u.setSelection(ks(s,"start")?ve.findFrom(u.doc.resolve(u.mapping.map(a.pos)),1):ye.create(u.doc,u.mapping.map(a.pos))),t(u.scrollIntoView())}return!0}return s.isAtom&&a.depth==o.depth-1?(t&&t(e.tr.delete(a.pos,a.pos+s.nodeSize).scrollIntoView()),!0):!1}function Ig(e,t,n){var r=e.selection,o=r.$head,a=r.empty,s=o;if(!a)return!1;if(o.parent.isTextblock){if(n?!n.endOfTextblock("forward",e):o.parentOffset<o.parent.content.size)return!1;s=uE(o)}var u=s&&s.nodeAfter;return!u||!ye.isSelectable(u)?!1:(t&&t(e.tr.setSelection(ye.create(e.doc,s.pos)).scrollIntoView()),!0)}function uE(e){if(!e.parent.type.spec.isolating)for(var t=e.depth-1;t>=0;t--){var n=e.node(t);if(e.index(t)+1<n.childCount)return e.doc.resolve(e.after(t+1));if(n.type.spec.isolating)break}return null}function lE(e,t){var n=e.selection,r=n.$from,o=n.$to,a=r.blockRange(o),s=a&&Ii(a);return s==null?!1:(t&&t(e.tr.lift(a,s).scrollIntoView()),!0)}function Mg(e,t){var n=e.selection,r=n.$head,o=n.$anchor;return!r.parent.type.spec.code||!r.sameParent(o)?!1:(t&&t(e.tr.insertText(`
`).scrollIntoView()),!0)}function Pg(e){for(var t=0;t<e.edgeCount;t++){var n=e.edge(t),r=n.type;if(r.isTextblock&&!r.hasRequiredAttrs())return r}return null}function jg(e,t){var n=e.selection,r=n.$head,o=n.$anchor;if(!r.parent.type.spec.code||!r.sameParent(o))return!1;var a=r.node(-1),s=r.indexAfter(-1),u=Pg(a.contentMatchAt(s));if(!a.canReplaceWith(s,s,u))return!1;if(t){var l=r.after(),c=e.tr.replaceWith(l,l,u.createAndFill());c.setSelection(ve.near(c.doc.resolve(l),1)),t(c.scrollIntoView())}return!0}function Fg(e,t){var n=e.selection,r=n.$from,o=n.$to;if(n instanceof En||r.parent.inlineContent||o.parent.inlineContent)return!1;var a=Pg(o.parent.contentMatchAt(o.indexAfter()));if(!a||!a.isTextblock)return!1;if(t){var s=(!r.parentOffset&&o.index()<o.parent.childCount?r:o).pos,u=e.tr.insert(s,a.createAndFill());u.setSelection(Re.create(u.doc,s+1)),t(u.scrollIntoView())}return!0}function Rg(e,t){var n=e.selection,r=n.$cursor;if(!r||r.parent.content.size)return!1;if(r.depth>1&&r.after()!=r.end(-1)){var o=r.before();if(an(e.doc,o))return t&&t(e.tr.split(o).scrollIntoView()),!0}var a=r.blockRange(),s=a&&Ii(a);return s==null?!1:(t&&t(e.tr.lift(a,s).scrollIntoView()),!0)}function uF(e,t){var n=e.selection,r=n.$from,o=n.$to;if(e.selection instanceof ye&&e.selection.node.isBlock)return!r.parentOffset||!an(e.doc,r.pos)?!1:(t&&t(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.parent.isBlock)return!1;if(t){var a=o.parentOffset==o.parent.content.size,s=e.tr;(e.selection instanceof Re||e.selection instanceof En)&&s.deleteSelection();var u=r.depth==0?null:Pg(r.node(-1).contentMatchAt(r.indexAfter(-1))),l=a&&u?[{type:u}]:null,c=an(s.doc,s.mapping.map(r.pos),1,l);if(!l&&!c&&an(s.doc,s.mapping.map(r.pos),1,u&&[{type:u}])&&(l=[{type:u}],c=!0),c&&(s.split(s.mapping.map(r.pos),1,l),!a&&!r.parentOffset&&r.parent.type!=u)){var m=s.mapping.map(r.before()),me=s.doc.resolve(m);r.node(-1).canReplaceWith(me.index(),me.index()+1,u)&&s.setNodeMarkup(s.mapping.map(r.before()),u)}t(s.scrollIntoView())}return!0}function cE(e,t){var n=e.selection,r=n.$from,o=n.to,a,s=r.sharedDepth(o);return s==0?!1:(a=r.before(s),t&&t(e.tr.setSelection(ye.create(e.doc,a))),!0)}function lF(e,t){return t&&t(e.tr.setSelection(new En(e.doc))),!0}function cF(e,t,n){var r=t.nodeBefore,o=t.nodeAfter,a=t.index();return!r||!o||!r.type.compatibleContent(o.type)?!1:!r.content.size&&t.parent.canReplace(a-1,a)?(n&&n(e.tr.delete(t.pos-r.nodeSize,t.pos).scrollIntoView()),!0):!t.parent.canReplace(a,a+1)||!(o.isTextblock||aa(e.doc,t.pos))?!1:(n&&n(e.tr.clearIncompatible(t.pos,r.type,r.contentMatchAt(r.childCount)).join(t.pos).scrollIntoView()),!0)}function fE(e,t,n){var r=t.nodeBefore,o=t.nodeAfter,a,s;if(r.type.spec.isolating||o.type.spec.isolating)return!1;if(cF(e,t,n))return!0;var u=t.parent.canReplace(t.index(),t.index()+1);if(u&&(a=(s=r.contentMatchAt(r.childCount)).findWrapping(o.type))&&s.matchType(a[0]||o.type).validEnd){if(n){for(var l=t.pos+o.nodeSize,c=q.empty,m=a.length-1;m>=0;m--)c=q.from(a[m].create(null,c));c=q.from(r.copy(c));var me=e.tr.step(new nr(t.pos-1,l,t.pos,l,new Y(c,1,0),a.length,!0)),xe=l+2*a.length;aa(me.doc,xe)&&me.join(xe),n(me.scrollIntoView())}return!0}var Ne=ve.findFrom(t,1),He=Ne&&Ne.$from.blockRange(Ne.$to),Ye=He&&Ii(He);if(Ye!=null&&Ye>=t.depth)return n&&n(e.tr.lift(He,Ye).scrollIntoView()),!0;if(u&&ks(o,"start",!0)&&ks(r,"end")){for(var Je=r,vn=[];vn.push(Je),!Je.isTextblock;)Je=Je.lastChild;for(var La=o,sr=1;!La.isTextblock;La=La.firstChild)sr++;if(Je.canReplace(Je.childCount,Je.childCount,La.content)){if(n){for(var Zr=q.empty,zs=vn.length-1;zs>=0;zs--)Zr=q.from(vn[zs].copy(Zr));var za=e.tr.step(new nr(t.pos-vn.length,t.pos+o.nodeSize,t.pos+sr,t.pos+o.nodeSize-sr,new Y(Zr,vn.length,0),0,!0));n(za.scrollIntoView())}return!0}}return!1}function pE(e,t){return function(n,r){var o=n.selection,a=o.$from,s=o.$to,u=a.blockRange(s),l=u&&Ss(u,e,t);return l?(r&&r(n.tr.wrap(u,l).scrollIntoView()),!0):!1}}function Ng(e,t){return function(n,r){var o=n.selection,a=o.from,s=o.to,u=!1;return n.doc.nodesBetween(a,s,function(l,c){if(u)return!1;if(!(!l.isTextblock||l.hasMarkup(e,t)))if(l.type==e)u=!0;else{var m=n.doc.resolve(c),me=m.index();u=m.parent.canReplaceWith(me,me+1,e)}}),u?(r&&r(n.tr.setBlockType(a,s,e,t).scrollIntoView()),!0):!1}}function Lg(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return function(n,r,o){for(var a=0;a<e.length;a++)if(e[a](n,r,o))return!0;return!1}}var $g=Lg(tp,Og,Tg),dE=Lg(tp,Ag,Ig);Lg(Mg,Fg,Rg,uF);typeof navigator!="undefined"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os!="undefined"&&os.platform()=="darwin";v();function hE(e,t){return function(n,r){var o=n.selection,a=o.$from,s=o.$to,u=a.blockRange(s),l=!1,c=u;if(!u)return!1;if(u.depth>=2&&a.node(u.depth-1).type.compatibleContent(e)&&u.startIndex==0){if(a.index(u.depth-1)==0)return!1;var m=n.doc.resolve(u.start-2);c=new _s(m,m,u.depth),u.endIndex<u.parent.childCount&&(u=new _s(a,n.doc.resolve(s.end(u.depth)),u.depth)),l=!0}var me=Ss(c,e,t,u);return me?(r&&r(pF(n.tr,u,me,l,e).scrollIntoView()),!0):!1}}function pF(e,t,n,r,o){for(var a=q.empty,s=n.length-1;s>=0;s--)a=q.from(n[s].type.create(n[s].attrs,a));e.step(new nr(t.start-(r?2:0),t.end,t.start,t.end,new Y(a,0,0),n.length,!0));for(var u=0,l=0;l<n.length;l++)n[l].type==o&&(u=l+1);for(var c=n.length-u,m=t.start+n.length-(r?2:0),me=t.parent,xe=t.startIndex,Ne=t.endIndex,He=!0;xe<Ne;xe++,He=!1)!He&&an(e.doc,m,c)&&(e.split(m,c),m+=2*c),m+=me.child(xe).nodeSize;return e}function mE(e){return function(t,n){var r=t.selection,o=r.$from,a=r.$to,s=o.blockRange(a,function(u){return u.childCount&&u.firstChild.type==e});return s?n?o.node(s.depth-1).type==e?dF(t,n,e,s):hF(t,n,s):!0:!1}}function dF(e,t,n,r){var o=e.tr,a=r.end,s=r.$to.end(r.depth);return a<s&&(o.step(new nr(a-1,s,a,s,new Y(q.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new _s(o.doc.resolve(r.$from.pos),o.doc.resolve(s),r.depth)),t(o.lift(r,Ii(r)).scrollIntoView()),!0}function hF(e,t,n){for(var r=e.tr,o=n.parent,a=n.end,s=n.endIndex-1,u=n.startIndex;s>u;s--)a-=o.child(s).nodeSize,r.delete(a-1,a+1);var l=r.doc.resolve(n.start),c=l.nodeAfter;if(r.mapping.map(n.end)!=n.start+l.nodeAfter.nodeSize)return!1;var m=n.startIndex==0,me=n.endIndex==o.childCount,xe=l.node(-1),Ne=l.index(-1);if(!xe.canReplace(Ne+(m?0:1),Ne+1,c.content.append(me?q.empty:q.from(o))))return!1;var He=l.pos,Ye=He+c.nodeSize;return r.step(new nr(He-(m?1:0),Ye+(me?1:0),He+1,Ye-1,new Y((m?q.empty:q.from(o.copy(q.empty))).append(me?q.empty:q.from(o.copy(q.empty))),m?0:1,me?0:1),m?0:1)),t(r.scrollIntoView()),!0}function gE(e){return function(t,n){var r=t.selection,o=r.$from,a=r.$to,s=o.blockRange(a,function(Ye){return Ye.childCount&&Ye.firstChild.type==e});if(!s)return!1;var u=s.startIndex;if(u==0)return!1;var l=s.parent,c=l.child(u-1);if(c.type!=e)return!1;if(n){var m=c.lastChild&&c.lastChild.type==l.type,me=q.from(m?e.create():null),xe=new Y(q.from(e.create(null,q.from(l.type.create(null,me)))),m?3:1,0),Ne=s.start,He=s.end;n(t.tr.step(new nr(Ne-(m?3:1),He,Ne,He,xe,1,!0)).scrollIntoView())}return!0}}v();var z={};typeof navigator!="undefined"&&typeof document!="undefined"&&(rp=/Edge\/(\d+)/.exec(navigator.userAgent),qg=/MSIE \d/.test(navigator.userAgent),np=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),ip=z.ie=!!(qg||np||rp),z.ie_version=qg?document.documentMode||6:np?+np[1]:rp?+rp[1]:null,z.gecko=!ip&&/gecko\/(\d+)/i.test(navigator.userAgent),z.gecko_version=z.gecko&&+(/Firefox\/(\d+)/.exec(navigator.userAgent)||[0,0])[1],op=!ip&&/Chrome\/(\d+)/.exec(navigator.userAgent),z.chrome=!!op,z.chrome_version=op&&+op[1],z.safari=!ip&&/Apple Computer/.test(navigator.vendor),z.ios=z.safari&&(/Mobile\/\w+/.test(navigator.userAgent)||navigator.maxTouchPoints>2),z.mac=z.ios||/Mac/.test(navigator.platform),z.android=/Android \d/.test(navigator.userAgent),z.webkit="webkitFontSmoothing"in document.documentElement.style,z.webkit_version=z.webkit&&+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]);var rp,qg,np,ip,op,Jr=function(e){for(var t=0;;t++)if(e=e.previousSibling,!e)return t},Vg=function(e){var t=e.assignedSlot||e.parentNode;return t&&t.nodeType==11?t.host:t},vE=null,Mi=function(e,t,n){var r=vE||(vE=document.createRange());return r.setEnd(e,n!=null?n:e.nodeValue.length),r.setStart(e,t||0),r},dl=function(e,t,n,r){return n&&(yE(e,t,n,r,-1)||yE(e,t,n,r,1))},mF=/^(img|br|input|textarea|hr)$/i;function yE(e,t,n,r,o){for(;;){if(e==n&&t==r)return!0;if(t==(o<0?0:Qn(e))){var a=e.parentNode;if(a.nodeType!=1||vF(e)||mF.test(e.nodeName)||e.contentEditable=="false")return!1;t=Jr(e)+(o<0?0:1),e=a}else if(e.nodeType==1){if(e=e.childNodes[t+(o<0?-1:0)],e.contentEditable=="false")return!1;t=o<0?Qn(e):0}else return!1}}function Qn(e){return e.nodeType==3?e.nodeValue.length:e.childNodes.length}function gF(e,t,n){for(var r=t==0,o=t==Qn(e);r||o;){if(e==n)return!0;var a=Jr(e);if(e=e.parentNode,!e)return!1;r=r&&a==0,o=o&&a==Qn(e)}}function vF(e){for(var t,n=e;n&&!(t=n.pmViewDesc);n=n.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==e||t.contentDOM==e)}var zg=function(e){var t=e.isCollapsed;return t&&z.chrome&&e.rangeCount&&!e.getRangeAt(0).collapsed&&(t=!1),t};function Ds(e,t){var n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=e,n.key=n.code=t,n}function yF(e){return{left:0,right:e.documentElement.clientWidth,top:0,bottom:e.documentElement.clientHeight}}function fo(e,t){return typeof e=="number"?e:e[t]}function _F(e){var t=e.getBoundingClientRect(),n=t.width/e.offsetWidth||1,r=t.height/e.offsetHeight||1;return{left:t.left,right:t.left+e.clientWidth*n,top:t.top,bottom:t.top+e.clientHeight*r}}function _E(e,t,n){for(var r=e.someProp("scrollThreshold")||0,o=e.someProp("scrollMargin")||5,a=e.dom.ownerDocument,s=n||e.dom;s;s=Vg(s))if(s.nodeType==1){var u=s==a.body||s.nodeType!=1,l=u?yF(a):_F(s),c=0,m=0;if(t.top<l.top+fo(r,"top")?m=-(l.top-t.top+fo(o,"top")):t.bottom>l.bottom-fo(r,"bottom")&&(m=t.bottom-l.bottom+fo(o,"bottom")),t.left<l.left+fo(r,"left")?c=-(l.left-t.left+fo(o,"left")):t.right>l.right-fo(r,"right")&&(c=t.right-l.right+fo(o,"right")),c||m)if(u)a.defaultView.scrollBy(c,m);else{var me=s.scrollLeft,xe=s.scrollTop;m&&(s.scrollTop+=m),c&&(s.scrollLeft+=c);var Ne=s.scrollLeft-me,He=s.scrollTop-xe;t={left:t.left-Ne,top:t.top-He,right:t.right-Ne,bottom:t.bottom-He}}if(u)break}}function bF(e){for(var t=e.dom.getBoundingClientRect(),n=Math.max(0,t.top),r,o,a=(t.left+t.right)/2,s=n+1;s<Math.min(innerHeight,t.bottom);s+=5){var u=e.root.elementFromPoint(a,s);if(!(u==e.dom||!e.dom.contains(u))){var l=u.getBoundingClientRect();if(l.top>=n-20){r=u,o=l.top;break}}}return{refDOM:r,refTop:o,stack:bE(e.dom)}}function bE(e){for(var t=[],n=e.ownerDocument;e&&(t.push({dom:e,top:e.scrollTop,left:e.scrollLeft}),e!=n);e=Vg(e));return t}function wF(e){var t=e.refDOM,n=e.refTop,r=e.stack,o=t?t.getBoundingClientRect().top:0;wE(r,o==0?0:o-n)}function wE(e,t){for(var n=0;n<e.length;n++){var r=e[n],o=r.dom,a=r.top,s=r.left;o.scrollTop!=a+t&&(o.scrollTop=a+t),o.scrollLeft!=s&&(o.scrollLeft=s)}}var Cs=null;function xF(e){if(e.setActive)return e.setActive();if(Cs)return e.focus(Cs);var t=bE(e);e.focus(Cs==null?{get preventScroll(){return Cs={preventScroll:!0},!0}}:void 0),Cs||(Cs=!1,wE(t,0))}function xE(e,t){for(var n,r=2e8,o,a=0,s=t.top,u=t.top,l=e.firstChild,c=0;l;l=l.nextSibling,c++){var m=void 0;if(l.nodeType==1)m=l.getClientRects();else if(l.nodeType==3)m=Mi(l).getClientRects();else continue;for(var me=0;me<m.length;me++){var xe=m[me];if(xe.top<=s&&xe.bottom>=u){s=Math.max(xe.bottom,s),u=Math.min(xe.top,u);var Ne=xe.left>t.left?xe.left-t.left:xe.right<t.left?t.left-xe.right:0;if(Ne<r){n=l,r=Ne,o=Ne&&n.nodeType==3?{left:xe.right<t.left?xe.right:xe.left,top:t.top}:t,l.nodeType==1&&Ne&&(a=c+(t.left>=(xe.left+xe.right)/2?1:0));continue}}!n&&(t.left>=xe.right&&t.top>=xe.top||t.left>=xe.left&&t.top>=xe.bottom)&&(a=c+1)}}return n&&n.nodeType==3?SF(n,o):!n||r&&n.nodeType==1?{node:e,offset:a}:xE(n,o)}function SF(e,t){for(var n=e.nodeValue.length,r=document.createRange(),o=0;o<n;o++){r.setEnd(e,o+1),r.setStart(e,o);var a=po(r,1);if(a.top!=a.bottom&&Ug(t,a))return{node:e,offset:o+(t.left>=(a.left+a.right)/2?1:0)}}return{node:e,offset:0}}function Ug(e,t){return e.left>=t.left-1&&e.left<=t.right+1&&e.top>=t.top-1&&e.top<=t.bottom+1}function EF(e,t){var n=e.parentNode;return n&&/^li$/i.test(n.nodeName)&&t.left<e.getBoundingClientRect().left?n:e}function kF(e,t,n){var r=xE(t,n),o=r.node,a=r.offset,s=-1;if(o.nodeType==1&&!o.firstChild){var u=o.getBoundingClientRect();s=u.left!=u.right&&n.left>(u.left+u.right)/2?1:-1}return e.docView.posFromDOM(o,a,s)}function DF(e,t,n,r){for(var o=-1,a=t;a!=e.dom;){var s=e.docView.nearestDesc(a,!0);if(!s)return null;if(s.node.isBlock&&s.parent){var u=s.dom.getBoundingClientRect();if(u.left>r.left||u.top>r.top)o=s.posBefore;else if(u.right<r.left||u.bottom<r.top)o=s.posAfter;else break}a=s.dom.parentNode}return o>-1?o:e.docView.posFromDOM(t,n)}function SE(e,t,n){var r=e.childNodes.length;if(r&&n.top<n.bottom)for(var o=Math.max(0,Math.min(r-1,Math.floor(r*(t.top-n.top)/(n.bottom-n.top))-2)),a=o;;){var s=e.childNodes[a];if(s.nodeType==1)for(var u=s.getClientRects(),l=0;l<u.length;l++){var c=u[l];if(Ug(t,c))return SE(s,t,c)}if((a=(a+1)%r)==o)break}return e}function CF(e,t){var n,r,o=e.dom.ownerDocument,a,s;if(o.caretPositionFromPoint)try{var u=o.caretPositionFromPoint(t.left,t.top);u&&(n=u,a=n.offsetNode,s=n.offset)}catch{}if(!a&&o.caretRangeFromPoint){var l=o.caretRangeFromPoint(t.left,t.top);l&&(r=l,a=r.startContainer,s=r.startOffset)}var c=(e.root.elementFromPoint?e.root:o).elementFromPoint(t.left,t.top+1),m;if(!c||!e.dom.contains(c.nodeType!=1?c.parentNode:c)){var me=e.dom.getBoundingClientRect();if(!Ug(t,me)||(c=SE(e.dom,t,me),!c))return null}if(z.safari)for(var xe=c;a&&xe;xe=Vg(xe))xe.draggable&&(a=s=null);if(c=EF(c,t),a){if(z.gecko&&a.nodeType==1&&(s=Math.min(s,a.childNodes.length),s<a.childNodes.length)){var Ne=a.childNodes[s],He;Ne.nodeName=="IMG"&&(He=Ne.getBoundingClientRect()).right<=t.left&&He.bottom>t.top&&s++}a==e.dom&&s==a.childNodes.length-1&&a.lastChild.nodeType==1&&t.top>a.lastChild.getBoundingClientRect().bottom?m=e.state.doc.content.size:(s==0||a.nodeType!=1||a.childNodes[s-1].nodeName!="BR")&&(m=DF(e,a,s,t))}m==null&&(m=kF(e,c,t));var Ye=e.docView.nearestDesc(c,!0);return{pos:m,inside:Ye?Ye.posAtStart-Ye.border:-1}}function po(e,t){var n=e.getClientRects();return n.length?n[t<0?0:n.length-1]:e.getBoundingClientRect()}var OF=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function EE(e,t,n){var r=e.docView.domFromPos(t,n<0?-1:1),o=r.node,a=r.offset,s=z.webkit||z.gecko;if(o.nodeType==3)if(s&&(OF.test(o.nodeValue)||(n<0?!a:a==o.nodeValue.length))){var u=po(Mi(o,a,a),n);if(z.gecko&&a&&/\s/.test(o.nodeValue[a-1])&&a<o.nodeValue.length){var l=po(Mi(o,a-1,a-1),-1);if(l.top==u.top){var c=po(Mi(o,a,a+1),-1);if(c.top!=u.top)return hl(c,c.left<l.left)}}return u}else{var m=a,me=a,xe=n<0?1:-1;return n<0&&!a?(me++,xe=-1):n>=0&&a==o.nodeValue.length?(m--,xe=1):n<0?m--:me++,hl(po(Mi(o,m,me),xe),xe<0)}if(!e.state.doc.resolve(t).parent.inlineContent){if(a&&(n<0||a==Qn(o))){var Ne=o.childNodes[a-1];if(Ne.nodeType==1)return Wg(Ne.getBoundingClientRect(),!1)}if(a<Qn(o)){var He=o.childNodes[a];if(He.nodeType==1)return Wg(He.getBoundingClientRect(),!0)}return Wg(o.getBoundingClientRect(),n>=0)}if(a&&(n<0||a==Qn(o))){var Ye=o.childNodes[a-1],Je=Ye.nodeType==3?Mi(Ye,Qn(Ye)-(s?0:1)):Ye.nodeType==1&&(Ye.nodeName!="BR"||!Ye.nextSibling)?Ye:null;if(Je)return hl(po(Je,1),!1)}if(a<Qn(o)){for(var vn=o.childNodes[a];vn.pmViewDesc&&vn.pmViewDesc.ignoreForCoords;)vn=vn.nextSibling;var La=vn?vn.nodeType==3?Mi(vn,0,s?0:1):vn.nodeType==1?vn:null:null;if(La)return hl(po(La,-1),!0)}return hl(po(o.nodeType==3?Mi(o):o,-n),n>=0)}function hl(e,t){if(e.width==0)return e;var n=t?e.left:e.right;return{top:e.top,bottom:e.bottom,left:n,right:n}}function Wg(e,t){if(e.height==0)return e;var n=t?e.top:e.bottom;return{top:n,bottom:n,left:e.left,right:e.right}}function kE(e,t,n){var r=e.state,o=e.root.activeElement;r!=t&&e.updateState(t),o!=e.dom&&e.focus();try{return n()}finally{r!=t&&e.updateState(r),o!=e.dom&&o&&o.focus()}}function TF(e,t,n){var r=t.selection,o=n=="up"?r.$from:r.$to;return kE(e,t,function(){for(var a=e.docView.domFromPos(o.pos,n=="up"?-1:1),s=a.node;;){var u=e.docView.nearestDesc(s,!0);if(!u)break;if(u.node.isBlock){s=u.dom;break}s=u.dom.parentNode}for(var l=EE(e,o.pos,1),c=s.firstChild;c;c=c.nextSibling){var m=void 0;if(c.nodeType==1)m=c.getClientRects();else if(c.nodeType==3)m=Mi(c,0,c.nodeValue.length).getClientRects();else continue;for(var me=0;me<m.length;me++){var xe=m[me];if(xe.bottom>xe.top+1&&(n=="up"?l.top-xe.top>(xe.bottom-l.top)*2:xe.bottom-l.bottom>(l.bottom-xe.top)*2))return!1}}return!0})}var AF=/[\u0590-\u08ac]/;function IF(e,t,n){var r=t.selection,o=r.$head;if(!o.parent.isTextblock)return!1;var a=o.parentOffset,s=!a,u=a==o.parent.content.size,l=e.root.getSelection();return!AF.test(o.parent.textContent)||!l.modify?n=="left"||n=="backward"?s:u:kE(e,t,function(){var c=l.getRangeAt(0),m=l.focusNode,me=l.focusOffset,xe=l.caretBidiLevel;l.modify("move",n,"character");var Ne=o.depth?e.docView.domAfterPos(o.before()):e.dom,He=!Ne.contains(l.focusNode.nodeType==1?l.focusNode:l.focusNode.parentNode)||m==l.focusNode&&me==l.focusOffset;return l.removeAllRanges(),l.addRange(c),xe!=null&&(l.caretBidiLevel=xe),He})}var DE=null,CE=null,OE=!1;function MF(e,t,n){return DE==t&&CE==n?OE:(DE=t,CE=n,OE=n=="up"||n=="down"?TF(e,t,n):IF(e,t,n))}var kn=0,TE=1,ml=2,ho=3,lt=function(e,t,n,r){this.parent=e,this.children=t,this.dom=n,n.pmViewDesc=this,this.contentDOM=r,this.dirty=kn},Yn={size:{configurable:!0},border:{configurable:!0},posBefore:{configurable:!0},posAtStart:{configurable:!0},posAfter:{configurable:!0},posAtEnd:{configurable:!0},contentLost:{configurable:!0},domAtom:{configurable:!0},ignoreForCoords:{configurable:!0}};lt.prototype.matchesWidget=function(){return!1};lt.prototype.matchesMark=function(){return!1};lt.prototype.matchesNode=function(){return!1};lt.prototype.matchesHack=function(e){return!1};lt.prototype.parseRule=function(){return null};lt.prototype.stopEvent=function(){return!1};Yn.size.get=function(){for(var e=0,t=0;t<this.children.length;t++)e+=this.children[t].size;return e};Yn.border.get=function(){return 0};lt.prototype.destroy=function(){this.parent=null,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=null);for(var e=0;e<this.children.length;e++)this.children[e].destroy()};lt.prototype.posBeforeChild=function(e){for(var t=0,n=this.posAtStart;t<this.children.length;t++){var r=this.children[t];if(r==e)return n;n+=r.size}};Yn.posBefore.get=function(){return this.parent.posBeforeChild(this)};Yn.posAtStart.get=function(){return this.parent?this.parent.posBeforeChild(this)+this.border:0};Yn.posAfter.get=function(){return this.posBefore+this.size};Yn.posAtEnd.get=function(){return this.posAtStart+this.size-2*this.border};lt.prototype.localPosFromDOM=function(e,t,n){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(n<0){var r,o;if(e==this.contentDOM)r=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;r=e.previousSibling}for(;r&&!((o=r.pmViewDesc)&&o.parent==this);)r=r.previousSibling;return r?this.posBeforeChild(o)+o.size:this.posAtStart}else{var a,s;if(e==this.contentDOM)a=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;a=e.nextSibling}for(;a&&!((s=a.pmViewDesc)&&s.parent==this);)a=a.nextSibling;return a?this.posBeforeChild(s):this.posAtEnd}var u;if(e==this.dom&&this.contentDOM)u=t>Jr(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))u=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(t==0)for(var l=e;;l=l.parentNode){if(l==this.dom){u=!1;break}if(l.parentNode.firstChild!=l)break}if(u==null&&t==e.childNodes.length)for(var c=e;;c=c.parentNode){if(c==this.dom){u=!0;break}if(c.parentNode.lastChild!=c)break}}return(u!=null?u:n>0)?this.posAtEnd:this.posAtStart};lt.prototype.nearestDesc=function(e,t){for(var n=!0,r=e;r;r=r.parentNode){var o=this.getDesc(r);if(o&&(!t||o.node))if(n&&o.nodeDOM&&!(o.nodeDOM.nodeType==1?o.nodeDOM.contains(e.nodeType==1?e:e.parentNode):o.nodeDOM==e))n=!1;else return o}};lt.prototype.getDesc=function(e){for(var t=e.pmViewDesc,n=t;n;n=n.parent)if(n==this)return t};lt.prototype.posFromDOM=function(e,t,n){for(var r=e;r;r=r.parentNode){var o=this.getDesc(r);if(o)return o.localPosFromDOM(e,t,n)}return-1};lt.prototype.descAt=function(e){for(var t=0,n=0;t<this.children.length;t++){var r=this.children[t],o=n+r.size;if(n==e&&o!=n){for(;!r.border&&r.children.length;)r=r.children[0];return r}if(e<o)return r.descAt(e-n-r.border);n=o}};lt.prototype.domFromPos=function(e,t){if(!this.contentDOM)return{node:this.dom,offset:0};for(var n=0,r=0,o=0;n<this.children.length;n++){var a=this.children[n],s=o+a.size;if(s>e||a instanceof PE){r=e-o;break}o=s}if(r)return this.children[n].domFromPos(r-this.children[n].border,t);for(var u=void 0;n&&!(u=this.children[n-1]).size&&u instanceof AE&&u.widget.type.side>=0;n--);if(t<=0){for(var l,c=!0;l=n?this.children[n-1]:null,!(!l||l.dom.parentNode==this.contentDOM);n--,c=!1);return l&&t&&c&&!l.border&&!l.domAtom?l.domFromPos(l.size,t):{node:this.contentDOM,offset:l?Jr(l.dom)+1:0}}else{for(var m,me=!0;m=n<this.children.length?this.children[n]:null,!(!m||m.dom.parentNode==this.contentDOM);n++,me=!1);return m&&me&&!m.border&&!m.domAtom?m.domFromPos(0,t):{node:this.contentDOM,offset:m?Jr(m.dom):this.contentDOM.childNodes.length}}};lt.prototype.parseRange=function(e,t,n){if(n===void 0&&(n=0),this.children.length==0)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};for(var r=-1,o=-1,a=n,s=0;;s++){var u=this.children[s],l=a+u.size;if(r==-1&&e<=l){var c=a+u.border;if(e>=c&&t<=l-u.border&&u.node&&u.contentDOM&&this.contentDOM.contains(u.contentDOM))return u.parseRange(e,t,c);e=a;for(var m=s;m>0;m--){var me=this.children[m-1];if(me.size&&me.dom.parentNode==this.contentDOM&&!me.emptyChildAt(1)){r=Jr(me.dom)+1;break}e-=me.size}r==-1&&(r=0)}if(r>-1&&(l>t||s==this.children.length-1)){t=l;for(var xe=s+1;xe<this.children.length;xe++){var Ne=this.children[xe];if(Ne.size&&Ne.dom.parentNode==this.contentDOM&&!Ne.emptyChildAt(-1)){o=Jr(Ne.dom);break}t+=Ne.size}o==-1&&(o=this.contentDOM.childNodes.length);break}a=l}return{node:this.contentDOM,from:e,to:t,fromOffset:r,toOffset:o}};lt.prototype.emptyChildAt=function(e){if(this.border||!this.contentDOM||!this.children.length)return!1;var t=this.children[e<0?0:this.children.length-1];return t.size==0||t.emptyChildAt(e)};lt.prototype.domAfterPos=function(e){var t=this.domFromPos(e,0),n=t.node,r=t.offset;if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]};lt.prototype.setSelection=function(e,t,n,r){for(var o=Math.min(e,t),a=Math.max(e,t),s=0,u=0;s<this.children.length;s++){var l=this.children[s],c=u+l.size;if(o>u&&a<c)return l.setSelection(e-u-l.border,t-u-l.border,n,r);u=c}var m=this.domFromPos(e,e?-1:1),me=t==e?m:this.domFromPos(t,t?-1:1),xe=n.getSelection(),Ne=!1;if((z.gecko||z.safari)&&e==t){var He=m.node,Ye=m.offset;if(He.nodeType==3){if(Ne=Ye&&He.nodeValue[Ye-1]==`
`,Ne&&Ye==He.nodeValue.length)for(var Je=He,vn=void 0;Je;Je=Je.parentNode){if(vn=Je.nextSibling){vn.nodeName=="BR"&&(m=me={node:vn.parentNode,offset:Jr(vn)+1});break}var La=Je.pmViewDesc;if(La&&La.node&&La.node.isBlock)break}}else{var sr=He.childNodes[Ye-1];Ne=sr&&(sr.nodeName=="BR"||sr.contentEditable=="false")}}if(z.gecko&&xe.focusNode&&xe.focusNode!=me.node&&xe.focusNode.nodeType==1){var Zr=xe.focusNode.childNodes[xe.focusOffset];Zr&&Zr.contentEditable=="false"&&(r=!0)}if(!(!(r||Ne&&z.safari)&&dl(m.node,m.offset,xe.anchorNode,xe.anchorOffset)&&dl(me.node,me.offset,xe.focusNode,xe.focusOffset))){var zs=!1;if((xe.extend||e==t)&&!Ne){xe.collapse(m.node,m.offset);try{e!=t&&xe.extend(me.node,me.offset),zs=!0}catch(lc){if(!(lc instanceof DOMException))throw lc}}if(!zs){if(e>t){var za=m;m=me,me=za}var Hs=document.createRange();Hs.setEnd(me.node,me.offset),Hs.setStart(m.node,m.offset),xe.removeAllRanges(),xe.addRange(Hs)}}};lt.prototype.ignoreMutation=function(e){return!this.contentDOM&&e.type!="selection"};Yn.contentLost.get=function(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)};lt.prototype.markDirty=function(e,t){for(var n=0,r=0;r<this.children.length;r++){var o=this.children[r],a=n+o.size;if(n==a?e<=a&&t>=n:e<a&&t>n){var s=n+o.border,u=a-o.border;if(e>=s&&t<=u){this.dirty=e==n||t==a?ml:TE,e==s&&t==u&&(o.contentLost||o.dom.parentNode!=this.contentDOM)?o.dirty=ho:o.markDirty(e-s,t-s);return}else o.dirty=o.dom==o.contentDOM&&o.dom.parentNode==this.contentDOM?ml:ho}n=a}this.dirty=ml};lt.prototype.markParentsDirty=function(){for(var e=1,t=this.parent;t;t=t.parent,e++){var n=e==1?ml:TE;t.dirty<n&&(t.dirty=n)}};Yn.domAtom.get=function(){return!1};Yn.ignoreForCoords.get=function(){return!1};Object.defineProperties(lt.prototype,Yn);var mo=[],AE=function(e){function t(r,o,a,s){var u,l=o.type.toDOM;if(typeof l=="function"&&(l=l(a,function(){if(!u)return s;if(u.parent)return u.parent.posBeforeChild(u)})),!o.type.spec.raw){if(l.nodeType!=1){var c=document.createElement("span");c.appendChild(l),l=c}l.contentEditable=!1,l.classList.add("ProseMirror-widget")}e.call(this,r,mo,l,null),this.widget=o,u=this}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={domAtom:{configurable:!0}};return t.prototype.matchesWidget=function(r){return this.dirty==kn&&r.type.eq(this.widget.type)},t.prototype.parseRule=function(){return{ignore:!0}},t.prototype.stopEvent=function(r){var o=this.widget.spec.stopEvent;return o?o(r):!1},t.prototype.ignoreMutation=function(r){return r.type!="selection"||this.widget.spec.ignoreSelection},t.prototype.destroy=function(){this.widget.type.destroy(this.dom),e.prototype.destroy.call(this)},n.domAtom.get=function(){return!0},Object.defineProperties(t.prototype,n),t}(lt),PF=function(e){function t(r,o,a,s){e.call(this,r,mo,o,null),this.textDOM=a,this.text=s}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={size:{configurable:!0}};return n.size.get=function(){return this.text.length},t.prototype.localPosFromDOM=function(r,o){return r!=this.textDOM?this.posAtStart+(o?this.size:0):this.posAtStart+o},t.prototype.domFromPos=function(r){return{node:this.textDOM,offset:r}},t.prototype.ignoreMutation=function(r){return r.type==="characterData"&&r.target.nodeValue==r.oldValue},Object.defineProperties(t.prototype,n),t}(lt),ap=function(e){function t(n,r,o,a){e.call(this,n,[],o,a),this.mark=r}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.create=function(n,r,o,a){var s=a.nodeViews[r.type.name],u=s&&s(r,a,o);return(!u||!u.dom)&&(u=Qt.renderSpec(document,r.type.spec.toDOM(r,o))),new t(n,r,u.dom,u.contentDOM||u.dom)},t.prototype.parseRule=function(){return{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}},t.prototype.matchesMark=function(n){return this.dirty!=ho&&this.mark.eq(n)},t.prototype.markDirty=function(n,r){if(e.prototype.markDirty.call(this,n,r),this.dirty!=kn){for(var o=this.parent;!o.node;)o=o.parent;o.dirty<this.dirty&&(o.dirty=this.dirty),this.dirty=kn}},t.prototype.slice=function(n,r,o){var a=t.create(this.parent,this.mark,!0,o),s=this.children,u=this.size;r<u&&(s=Gg(s,r,u,o)),n>0&&(s=Gg(s,0,n,o));for(var l=0;l<s.length;l++)s[l].parent=a;return a.children=s,a},t}(lt),gl=function(e){function t(r,o,a,s,u,l,c,m,me){e.call(this,r,o.isLeaf?mo:[],u,l),this.nodeDOM=c,this.node=o,this.outerDeco=a,this.innerDeco=s,l&&this.updateChildren(m,me)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={size:{configurable:!0},border:{configurable:!0},domAtom:{configurable:!0}};return t.create=function(r,o,a,s,u,l){var c,m=u.nodeViews[o.type.name],me,xe=m&&m(o,u,function(){if(!me)return l;if(me.parent)return me.parent.posBeforeChild(me)},a,s),Ne=xe&&xe.dom,He=xe&&xe.contentDOM;if(o.isText){if(!Ne)Ne=document.createTextNode(o.text);else if(Ne.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else Ne||(c=Qt.renderSpec(document,o.type.spec.toDOM(o)),Ne=c.dom,He=c.contentDOM);!He&&!o.isText&&Ne.nodeName!="BR"&&(Ne.hasAttribute("contenteditable")||(Ne.contentEditable=!1),o.type.spec.draggable&&(Ne.draggable=!0));var Ye=Ne;return Ne=RE(Ne,a,o),xe?me=new jF(r,o,a,s,Ne,He,Ye,xe,u,l+1):o.isText?new ME(r,o,a,s,Ne,Ye,u):new t(r,o,a,s,Ne,He,Ye,u,l+1)},t.prototype.parseRule=function(){var r=this;if(this.node.type.spec.reparseInView)return null;var o={node:this.node.type.name,attrs:this.node.attrs};return this.node.type.whitespace=="pre"&&(o.preserveWhitespace="full"),this.contentDOM&&!this.contentLost?o.contentElement=this.contentDOM:o.getContent=function(){return r.contentDOM?q.empty:r.node.content},o},t.prototype.matchesNode=function(r,o,a){return this.dirty==kn&&r.eq(this.node)&&Kg(o,this.outerDeco)&&a.eq(this.innerDeco)},n.size.get=function(){return this.node.nodeSize},n.border.get=function(){return this.node.isLeaf?0:1},t.prototype.updateChildren=function(r,o){var a=this,s=this.node.inlineContent,u=o,l=r.composing&&this.localCompositionInfo(r,o),c=l&&l.pos>-1?l:null,m=l&&l.pos<0,me=new un(this,c&&c.node);LF(this.node,this.innerDeco,function(xe,Ne,He){xe.spec.marks?me.syncToMarks(xe.spec.marks,s,r):xe.type.side>=0&&!He&&me.syncToMarks(Ne==a.node.childCount?ke.none:a.node.child(Ne).marks,s,r),me.placeWidget(xe,r,u)},function(xe,Ne,He,Ye){me.syncToMarks(xe.marks,s,r);var Je;me.findNodeMatch(xe,Ne,He,Ye)||m&&r.state.selection.from>u&&r.state.selection.to<u+xe.nodeSize&&(Je=me.findIndexWithChild(l.node))>-1&&me.updateNodeAt(xe,Ne,He,Je,r)||me.updateNextNode(xe,Ne,He,r,Ye)||me.addNode(xe,Ne,He,r,u),u+=xe.nodeSize}),me.syncToMarks(mo,s,r),this.node.isTextblock&&me.addTextblockHacks(),me.destroyRest(),(me.changed||this.dirty==ml)&&(c&&this.protectLocalComposition(r,c),jE(this.contentDOM,this.children,r),z.ios&&$F(this.dom))},t.prototype.localCompositionInfo=function(r,o){var a=r.state.selection,s=a.from,u=a.to;if(!(!(r.state.selection instanceof Re)||s<o||u>o+this.node.content.size)){var l=r.root.getSelection(),c=BF(l.focusNode,l.focusOffset);if(!(!c||!this.dom.contains(c.parentNode)))if(this.node.inlineContent){var m=c.nodeValue,me=qF(this.node.content,m,s-o,u-o);return me<0?null:{node:c,pos:me,text:m}}else return{node:c,pos:-1}}},t.prototype.protectLocalComposition=function(r,o){var a=o.node,s=o.pos,u=o.text;if(!this.getDesc(a)){for(var l=a;l.parentNode!=this.contentDOM;l=l.parentNode){for(;l.previousSibling;)l.parentNode.removeChild(l.previousSibling);for(;l.nextSibling;)l.parentNode.removeChild(l.nextSibling);l.pmViewDesc&&(l.pmViewDesc=null)}var c=new PF(this,l,a,u);r.compositionNodes.push(c),this.children=Gg(this.children,s,s+u.length,r,c)}},t.prototype.update=function(r,o,a,s){return this.dirty==ho||!r.sameMarkup(this.node)?!1:(this.updateInner(r,o,a,s),!0)},t.prototype.updateInner=function(r,o,a,s){this.updateOuterDeco(o),this.node=r,this.innerDeco=a,this.contentDOM&&this.updateChildren(s,this.posAtStart),this.dirty=kn},t.prototype.updateOuterDeco=function(r){if(!Kg(r,this.outerDeco)){var o=this.nodeDOM.nodeType!=1,a=this.dom;this.dom=FE(this.dom,this.nodeDOM,Hg(this.outerDeco,this.node,o),Hg(r,this.node,o)),this.dom!=a&&(a.pmViewDesc=null,this.dom.pmViewDesc=this),this.outerDeco=r}},t.prototype.selectNode=function(){this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)},t.prototype.deselectNode=function(){this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable")},n.domAtom.get=function(){return this.node.isAtom},Object.defineProperties(t.prototype,n),t}(lt);function IE(e,t,n,r,o){return RE(r,t,e),new gl(null,e,t,n,r,r,r,o,0)}var ME=function(e){function t(r,o,a,s,u,l,c){e.call(this,r,o,a,s,u,null,l,c)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={domAtom:{configurable:!0}};return t.prototype.parseRule=function(){for(var r=this.nodeDOM.parentNode;r&&r!=this.dom&&!r.pmIsDeco;)r=r.parentNode;return{skip:r||!0}},t.prototype.update=function(r,o,a,s){return this.dirty==ho||this.dirty!=kn&&!this.inParent()||!r.sameMarkup(this.node)?!1:(this.updateOuterDeco(o),(this.dirty!=kn||r.text!=this.node.text)&&r.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=r.text,s.trackWrites==this.nodeDOM&&(s.trackWrites=null)),this.node=r,this.dirty=kn,!0)},t.prototype.inParent=function(){for(var r=this.parent.contentDOM,o=this.nodeDOM;o;o=o.parentNode)if(o==r)return!0;return!1},t.prototype.domFromPos=function(r){return{node:this.nodeDOM,offset:r}},t.prototype.localPosFromDOM=function(r,o,a){return r==this.nodeDOM?this.posAtStart+Math.min(o,this.node.text.length):e.prototype.localPosFromDOM.call(this,r,o,a)},t.prototype.ignoreMutation=function(r){return r.type!="characterData"&&r.type!="selection"},t.prototype.slice=function(r,o,a){var s=this.node.cut(r,o),u=document.createTextNode(s.text);return new t(this.parent,s,this.outerDeco,this.innerDeco,u,u,a)},t.prototype.markDirty=function(r,o){e.prototype.markDirty.call(this,r,o),this.dom!=this.nodeDOM&&(r==0||o==this.nodeDOM.nodeValue.length)&&(this.dirty=ho)},n.domAtom.get=function(){return!1},Object.defineProperties(t.prototype,n),t}(gl),PE=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={domAtom:{configurable:!0},ignoreForCoords:{configurable:!0}};return t.prototype.parseRule=function(){return{ignore:!0}},t.prototype.matchesHack=function(r){return this.dirty==kn&&this.dom.nodeName==r},n.domAtom.get=function(){return!0},n.ignoreForCoords.get=function(){return this.dom.nodeName=="IMG"},Object.defineProperties(t.prototype,n),t}(lt),jF=function(e){function t(n,r,o,a,s,u,l,c,m,me){e.call(this,n,r,o,a,s,u,l,m,me),this.spec=c}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.update=function(n,r,o,a){if(this.dirty==ho)return!1;if(this.spec.update){var s=this.spec.update(n,r,o);return s&&this.updateInner(n,r,o,a),s}else return!this.contentDOM&&!n.isLeaf?!1:e.prototype.update.call(this,n,r,o,a)},t.prototype.selectNode=function(){this.spec.selectNode?this.spec.selectNode():e.prototype.selectNode.call(this)},t.prototype.deselectNode=function(){this.spec.deselectNode?this.spec.deselectNode():e.prototype.deselectNode.call(this)},t.prototype.setSelection=function(n,r,o,a){this.spec.setSelection?this.spec.setSelection(n,r,o):e.prototype.setSelection.call(this,n,r,o,a)},t.prototype.destroy=function(){this.spec.destroy&&this.spec.destroy(),e.prototype.destroy.call(this)},t.prototype.stopEvent=function(n){return this.spec.stopEvent?this.spec.stopEvent(n):!1},t.prototype.ignoreMutation=function(n){return this.spec.ignoreMutation?this.spec.ignoreMutation(n):e.prototype.ignoreMutation.call(this,n)},t}(gl);function jE(e,t,n){for(var r=e.firstChild,o=!1,a=0;a<t.length;a++){var s=t[a],u=s.dom;if(u.parentNode==e){for(;u!=r;)r=NE(r),o=!0;r=r.nextSibling}else o=!0,e.insertBefore(u,r);if(s instanceof ap){var l=r?r.previousSibling:e.lastChild;jE(s.contentDOM,s.children,n),r=l?l.nextSibling:e.firstChild}}for(;r;)r=NE(r),o=!0;o&&n.trackWrites==e&&(n.trackWrites=null)}function vl(e){e&&(this.nodeName=e)}vl.prototype=Object.create(null);var sa=[new vl];function Hg(e,t,n){if(e.length==0)return sa;for(var r=n?sa[0]:new vl,o=[r],a=0;a<e.length;a++){var s=e[a].type.attrs;if(s){s.nodeName&&o.push(r=new vl(s.nodeName));for(var u in s){var l=s[u];l!=null&&(n&&o.length==1&&o.push(r=new vl(t.isInline?"span":"div")),u=="class"?r.class=(r.class?r.class+" ":"")+l:u=="style"?r.style=(r.style?r.style+";":"")+l:u!="nodeName"&&(r[u]=l))}}}return o}function FE(e,t,n,r){if(n==sa&&r==sa)return t;for(var o=t,a=0;a<r.length;a++){var s=r[a],u=n[a];if(a){var l=void 0;u&&u.nodeName==s.nodeName&&o!=e&&(l=o.parentNode)&&l.tagName.toLowerCase()==s.nodeName||(l=document.createElement(s.nodeName),l.pmIsDeco=!0,l.appendChild(o),u=sa[0]),o=l}FF(o,u||sa[0],s)}return o}function FF(e,t,n){for(var r in t)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&e.removeAttribute(r);for(var o in n)o!="class"&&o!="style"&&o!="nodeName"&&n[o]!=t[o]&&e.setAttribute(o,n[o]);if(t.class!=n.class){for(var a=t.class?t.class.split(" ").filter(Boolean):mo,s=n.class?n.class.split(" ").filter(Boolean):mo,u=0;u<a.length;u++)s.indexOf(a[u])==-1&&e.classList.remove(a[u]);for(var l=0;l<s.length;l++)a.indexOf(s[l])==-1&&e.classList.add(s[l]);e.classList.length==0&&e.removeAttribute("class")}if(t.style!=n.style){if(t.style)for(var c=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,m;m=c.exec(t.style);)e.style.removeProperty(m[1]);n.style&&(e.style.cssText+=n.style)}}function RE(e,t,n){return FE(e,e,sa,Hg(t,n,e.nodeType!=1))}function Kg(e,t){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].type.eq(t[n].type))return!1;return!0}function NE(e){var t=e.nextSibling;return e.parentNode.removeChild(e),t}var un=function(e,t){this.top=e,this.lock=t,this.index=0,this.stack=[],this.changed=!1,this.preMatch=RF(e.node.content,e)};un.prototype.destroyBetween=function(e,t){if(e!=t){for(var n=e;n<t;n++)this.top.children[n].destroy();this.top.children.splice(e,t-e),this.changed=!0}};un.prototype.destroyRest=function(){this.destroyBetween(this.index,this.top.children.length)};un.prototype.syncToMarks=function(e,t,n){for(var r=0,o=this.stack.length>>1,a=Math.min(o,e.length);r<a&&(r==o-1?this.top:this.stack[r+1<<1]).matchesMark(e[r])&&e[r].type.spec.spanning!==!1;)r++;for(;r<o;)this.destroyRest(),this.top.dirty=kn,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;for(;o<e.length;){this.stack.push(this.top,this.index+1);for(var s=-1,u=this.index;u<Math.min(this.index+3,this.top.children.length);u++)if(this.top.children[u].matchesMark(e[o])){s=u;break}if(s>-1)s>this.index&&(this.changed=!0,this.destroyBetween(this.index,s)),this.top=this.top.children[this.index];else{var l=ap.create(this.top,e[o],t,n);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,o++}};un.prototype.findNodeMatch=function(e,t,n,r){var o=-1,a;if(r>=this.preMatch.index&&(a=this.preMatch.matches[r-this.preMatch.index]).parent==this.top&&a.matchesNode(e,t,n))o=this.top.children.indexOf(a,this.index);else for(var s=this.index,u=Math.min(this.top.children.length,s+5);s<u;s++){var l=this.top.children[s];if(l.matchesNode(e,t,n)&&!this.preMatch.matched.has(l)){o=s;break}}return o<0?!1:(this.destroyBetween(this.index,o),this.index++,!0)};un.prototype.updateNodeAt=function(e,t,n,r,o){var a=this.top.children[r];return a.update(e,t,n,o)?(this.destroyBetween(this.index,r),this.index=r+1,!0):!1};un.prototype.findIndexWithChild=function(e){for(;;){var t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){var n=e.pmViewDesc;if(n){for(var r=this.index;r<this.top.children.length;r++)if(this.top.children[r]==n)return r}return-1}e=t}};un.prototype.updateNextNode=function(e,t,n,r,o){for(var a=this.index;a<this.top.children.length;a++){var s=this.top.children[a];if(s instanceof gl){var u=this.preMatch.matched.get(s);if(u!=null&&u!=o)return!1;var l=s.dom,c=this.lock&&(l==this.lock||l.nodeType==1&&l.contains(this.lock.parentNode))&&!(e.isText&&s.node&&s.node.isText&&s.nodeDOM.nodeValue==e.text&&s.dirty!=ho&&Kg(t,s.outerDeco));if(!c&&s.update(e,t,n,r))return this.destroyBetween(this.index,a),s.dom!=l&&(this.changed=!0),this.index++,!0;break}}return!1};un.prototype.addNode=function(e,t,n,r,o){this.top.children.splice(this.index++,0,gl.create(this.top,e,t,n,r,o)),this.changed=!0};un.prototype.placeWidget=function(e,t,n){var r=this.index<this.top.children.length?this.top.children[this.index]:null;if(r&&r.matchesWidget(e)&&(e==r.widget||!r.widget.type.toDOM.parentNode))this.index++;else{var o=new AE(this.top,e,t,n);this.top.children.splice(this.index++,0,o),this.changed=!0}};un.prototype.addTextblockHacks=function(){for(var e=this.top.children[this.index-1];e instanceof ap;)e=e.children[e.children.length-1];(!e||!(e instanceof ME)||/\n$/.test(e.node.text))&&((z.safari||z.chrome)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG"),this.addHackNode("BR"))};un.prototype.addHackNode=function(e){if(this.index<this.top.children.length&&this.top.children[this.index].matchesHack(e))this.index++;else{var t=document.createElement(e);e=="IMG"&&(t.className="ProseMirror-separator"),e=="BR"&&(t.className="ProseMirror-trailingBreak"),this.top.children.splice(this.index++,0,new PE(this.top,mo,t,null)),this.changed=!0}};function RF(e,t){var n=t,r=n.children.length,o=e.childCount,a=new Map,s=[];e:for(;o>0;){for(var u=void 0;;)if(r){var l=n.children[r-1];if(l instanceof ap)n=l,r=l.children.length;else{u=l,r--;break}}else{if(n==t)break e;r=n.parent.children.indexOf(n),n=n.parent}var c=u.node;if(c){if(c!=e.child(o-1))break;--o,a.set(u,o),s.push(u)}}return{index:o,matched:a,matches:s.reverse()}}function NF(e,t){return e.type.side-t.type.side}function LF(e,t,n,r){var o=t.locals(e),a=0;if(o.length==0){for(var s=0;s<e.childCount;s++){var u=e.child(s);r(u,o,t.forChild(a,u),s),a+=u.nodeSize}return}for(var l=0,c=[],m=null,me=0;;){if(l<o.length&&o[l].to==a){for(var xe=o[l++],Ne=void 0;l<o.length&&o[l].to==a;)(Ne||(Ne=[xe])).push(o[l++]);if(Ne){Ne.sort(NF);for(var He=0;He<Ne.length;He++)n(Ne[He],me,!!m)}else n(xe,me,!!m)}var Ye=void 0,Je=void 0;if(m)Je=-1,Ye=m,m=null;else if(me<e.childCount)Je=me,Ye=e.child(me++);else break;for(var vn=0;vn<c.length;vn++)c[vn].to<=a&&c.splice(vn--,1);for(;l<o.length&&o[l].from<=a&&o[l].to>a;)c.push(o[l++]);var La=a+Ye.nodeSize;if(Ye.isText){var sr=La;l<o.length&&o[l].from<sr&&(sr=o[l].from);for(var Zr=0;Zr<c.length;Zr++)c[Zr].to<sr&&(sr=c[Zr].to);sr<La&&(m=Ye.cut(sr-a),Ye=Ye.cut(0,sr-a),La=sr,Je=-1)}var zs=c.length?Ye.isInline&&!Ye.isLeaf?c.filter(function(za){return!za.inline}):c.slice():mo;r(Ye,zs,t.forChild(a,Ye),Je),a=La}}function $F(e){if(e.nodeName=="UL"||e.nodeName=="OL"){var t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t}}function BF(e,t){for(;;){if(e.nodeType==3)return e;if(e.nodeType==1&&t>0){if(e.childNodes.length>t&&e.childNodes[t].nodeType==3)return e.childNodes[t];e=e.childNodes[t-1],t=Qn(e)}else if(e.nodeType==1&&t<e.childNodes.length)e=e.childNodes[t],t=0;else return null}}function qF(e,t,n,r){for(var o=0,a=0;o<e.childCount&&a<=r;){var s=e.child(o++),u=a;if(a+=s.nodeSize,!!s.isText){for(var l=s.text;o<e.childCount;){var c=e.child(o++);if(a+=c.nodeSize,!c.isText)break;l+=c.text}if(a>=n&&u<r){var m=l.lastIndexOf(t,r-u-1);if(m>=0&&m+t.length+u>=n)return u+m}}}return-1}function Gg(e,t,n,r,o){for(var a=[],s=0,u=0;s<e.length;s++){var l=e[s],c=u,m=u+=l.size;c>=n||m<=t?a.push(l):(c<t&&a.push(l.slice(0,t-c,r)),o&&(a.push(o),o=null),m>n&&a.push(l.slice(n-c,l.size,r)))}return a}function LE(e,t){var n=e.root.getSelection(),r=e.state.doc;if(!n.focusNode)return null;var o=e.docView.nearestDesc(n.focusNode),a=o&&o.size==0,s=e.docView.posFromDOM(n.focusNode,n.focusOffset);if(s<0)return null;var u=r.resolve(s),l,c;if(zg(n)){for(l=u;o&&!o.node;)o=o.parent;if(o&&o.node.isAtom&&ye.isSelectable(o.node)&&o.parent&&!(o.node.isInline&&gF(n.focusNode,n.focusOffset,o.dom))){var m=o.posBefore;c=new ye(s==m?u:r.resolve(m))}}else{var me=e.docView.posFromDOM(n.anchorNode,n.anchorOffset);if(me<0)return null;l=r.resolve(me)}if(!c){var xe=t=="pointer"||e.state.selection.head<u.pos&&!a?1:-1;c=Yg(e,l,u,xe)}return c}function $E(e){return e.editable?e.hasFocus():Jg(e)&&document.activeElement&&document.activeElement.contains(e.dom)}function go(e,t){var n=e.state.selection;if(zE(e,n),!!$E(e)){if(!t&&e.mouseDown&&e.mouseDown.allowDefault){var r=e.root.getSelection(),o=e.domObserver.currentSelection;if(r.anchorNode&&dl(r.anchorNode,r.anchorOffset,o.anchorNode,o.anchorOffset)){e.mouseDown.delayedSelectionSync=!0,e.domObserver.setCurSelection();return}}if(e.domObserver.disconnectSelection(),e.cursorWrapper)zF(e);else{var a=n.anchor,s=n.head,u,l;BE&&!(n instanceof Re)&&(n.$from.parent.inlineContent||(u=qE(e,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(l=qE(e,n.to))),e.docView.setSelection(a,s,e.root,t),BE&&(u&&VE(u),l&&VE(l)),n.visible?e.dom.classList.remove("ProseMirror-hideselection"):(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&VF(e))}e.domObserver.setCurSelection(),e.domObserver.connectSelection()}}var BE=z.safari||z.chrome&&z.chrome_version<63;function qE(e,t){var n=e.docView.domFromPos(t,0),r=n.node,o=n.offset,a=o<r.childNodes.length?r.childNodes[o]:null,s=o?r.childNodes[o-1]:null;if(z.safari&&a&&a.contentEditable=="false")return Qg(a);if((!a||a.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(a)return Qg(a);if(s)return Qg(s)}}function Qg(e){return e.contentEditable="true",z.safari&&e.draggable&&(e.draggable=!1,e.wasDraggable=!0),e}function VE(e){e.contentEditable="false",e.wasDraggable&&(e.draggable=!0,e.wasDraggable=null)}function VF(e){var t=e.dom.ownerDocument;t.removeEventListener("selectionchange",e.hideSelectionGuard);var n=e.root.getSelection(),r=n.anchorNode,o=n.anchorOffset;t.addEventListener("selectionchange",e.hideSelectionGuard=function(){(n.anchorNode!=r||n.anchorOffset!=o)&&(t.removeEventListener("selectionchange",e.hideSelectionGuard),setTimeout(function(){(!$E(e)||e.state.selection.visible)&&e.dom.classList.remove("ProseMirror-hideselection")},20))})}function zF(e){var t=e.root.getSelection(),n=document.createRange(),r=e.cursorWrapper.dom,o=r.nodeName=="IMG";o?n.setEnd(r.parentNode,Jr(r)+1):n.setEnd(r,0),n.collapse(!1),t.removeAllRanges(),t.addRange(n),!o&&!e.state.selection.visible&&z.ie&&z.ie_version<=11&&(r.disabled=!0,r.disabled=!1)}function zE(e,t){if(t instanceof ye){var n=e.docView.descAt(t.from);n!=e.lastSelectedViewDesc&&(UE(e),n&&n.selectNode(),e.lastSelectedViewDesc=n)}else UE(e)}function UE(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=null)}function Yg(e,t,n,r){return e.someProp("createSelectionBetween",function(o){return o(e,t,n)})||Re.between(t,n,r)}function UF(e){return e.editable&&e.root.activeElement!=e.dom?!1:Jg(e)}function Jg(e){var t=e.root.getSelection();if(!t.anchorNode)return!1;try{return e.dom.contains(t.anchorNode.nodeType==3?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(t.focusNode.nodeType==3?t.focusNode.parentNode:t.focusNode))}catch{return!1}}function WF(e){var t=e.docView.domFromPos(e.state.selection.anchor,0),n=e.root.getSelection();return dl(t.node,t.offset,n.anchorNode,n.anchorOffset)}function Xg(e,t){var n=e.selection,r=n.$anchor,o=n.$head,a=t>0?r.max(o):r.min(o),s=a.parent.inlineContent?a.depth?e.doc.resolve(t>0?a.after():a.before()):null:a;return s&&ve.findFrom(s,t)}function ua(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function WE(e,t,n){var r=e.state.selection;if(r instanceof Re){if(!r.empty||n.indexOf("s")>-1)return!1;if(e.endOfTextblock(t>0?"right":"left")){var o=Xg(e.state,t);return o&&o instanceof ye?ua(e,o):!1}else if(!(z.mac&&n.indexOf("m")>-1)){var a=r.$head,s=a.textOffset?null:t<0?a.nodeBefore:a.nodeAfter,u;if(!s||s.isText)return!1;var l=t<0?a.pos-s.nodeSize:a.pos;return s.isAtom||(u=e.docView.descAt(l))&&!u.contentDOM?ye.isSelectable(s)?ua(e,new ye(t<0?e.state.doc.resolve(a.pos-s.nodeSize):a)):z.webkit?ua(e,new Re(e.state.doc.resolve(t<0?l:l+s.nodeSize))):!1:!1}}else{if(r instanceof ye&&r.node.isInline)return ua(e,new Re(t>0?r.$to:r.$from));var c=Xg(e.state,t);return c?ua(e,c):!1}}function sp(e){return e.nodeType==3?e.nodeValue.length:e.childNodes.length}function yl(e){var t=e.pmViewDesc;return t&&t.size==0&&(e.nextSibling||e.nodeName!="BR")}function Zg(e){var t=e.root.getSelection(),n=t.focusNode,r=t.focusOffset;if(n){var o,a,s=!1;for(z.gecko&&n.nodeType==1&&r<sp(n)&&yl(n.childNodes[r])&&(s=!0);;)if(r>0){if(n.nodeType!=1)break;var u=n.childNodes[r-1];if(yl(u))o=n,a=--r;else if(u.nodeType==3)n=u,r=n.nodeValue.length;else break}else{if(HE(n))break;for(var l=n.previousSibling;l&&yl(l);)o=n.parentNode,a=Jr(l),l=l.previousSibling;if(l)n=l,r=sp(n);else{if(n=n.parentNode,n==e.dom)break;r=0}}s?tv(e,t,n,r):o&&tv(e,t,o,a)}}function ev(e){var t=e.root.getSelection(),n=t.focusNode,r=t.focusOffset;if(n){for(var o=sp(n),a,s;;)if(r<o){if(n.nodeType!=1)break;var u=n.childNodes[r];if(yl(u))a=n,s=++r;else break}else{if(HE(n))break;for(var l=n.nextSibling;l&&yl(l);)a=l.parentNode,s=Jr(l)+1,l=l.nextSibling;if(l)n=l,r=0,o=sp(n);else{if(n=n.parentNode,n==e.dom)break;r=o=0}}a&&tv(e,t,a,s)}}function HE(e){var t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function tv(e,t,n,r){if(zg(t)){var o=document.createRange();o.setEnd(n,r),o.setStart(n,r),t.removeAllRanges(),t.addRange(o)}else t.extend&&t.extend(n,r);e.domObserver.setCurSelection();var a=e.state;setTimeout(function(){e.state==a&&go(e)},50)}function KE(e,t,n){var r=e.state.selection;if(r instanceof Re&&!r.empty||n.indexOf("s")>-1||z.mac&&n.indexOf("m")>-1)return!1;var o=r.$from,a=r.$to;if(!o.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){var s=Xg(e.state,t);if(s&&s instanceof ye)return ua(e,s)}if(!o.parent.inlineContent){var u=t<0?o:a,l=r instanceof En?ve.near(u,t):ve.findFrom(u,t);return l?ua(e,l):!1}return!1}function GE(e,t){if(!(e.state.selection instanceof Re))return!0;var n=e.state.selection,r=n.$head,o=n.$anchor,a=n.empty;if(!r.sameParent(o))return!0;if(!a)return!1;if(e.endOfTextblock(t>0?"forward":"backward"))return!0;var s=!r.textOffset&&(t<0?r.nodeBefore:r.nodeAfter);if(s&&!s.isText){var u=e.state.tr;return t<0?u.delete(r.pos-s.nodeSize,r.pos):u.delete(r.pos,r.pos+s.nodeSize),e.dispatch(u),!0}return!1}function QE(e,t,n){e.domObserver.stop(),t.contentEditable=n,e.domObserver.start()}function HF(e){if(!(!z.safari||e.state.selection.$head.parentOffset>0)){var t=e.root.getSelection(),n=t.focusNode,r=t.focusOffset;if(n&&n.nodeType==1&&r==0&&n.firstChild&&n.firstChild.contentEditable=="false"){var o=n.firstChild;QE(e,o,!0),setTimeout(function(){return QE(e,o,!1)},20)}}}function KF(e){var t="";return e.ctrlKey&&(t+="c"),e.metaKey&&(t+="m"),e.altKey&&(t+="a"),e.shiftKey&&(t+="s"),t}function GF(e,t){var n=t.keyCode,r=KF(t);return n==8||z.mac&&n==72&&r=="c"?GE(e,-1)||Zg(e):n==46||z.mac&&n==68&&r=="c"?GE(e,1)||ev(e):n==13||n==27?!0:n==37?WE(e,-1,r)||Zg(e):n==39?WE(e,1,r)||ev(e):n==38?KE(e,-1,r)||Zg(e):n==40?HF(e)||KE(e,1,r)||ev(e):r==(z.mac?"m":"c")&&(n==66||n==73||n==89||n==90)}function QF(e,t,n){var r=e.docView.parseRange(t,n),o=r.node,a=r.fromOffset,s=r.toOffset,u=r.from,l=r.to,c=e.root.getSelection(),m=null,me=c.anchorNode;if(me&&e.dom.contains(me.nodeType==1?me:me.parentNode)&&(m=[{node:me,offset:c.anchorOffset}],zg(c)||m.push({node:c.focusNode,offset:c.focusOffset})),z.chrome&&e.lastKeyCode===8)for(var xe=s;xe>a;xe--){var Ne=o.childNodes[xe-1],He=Ne.pmViewDesc;if(Ne.nodeName=="BR"&&!He){s=xe;break}if(!He||He.size)break}var Ye=e.state.doc,Je=e.someProp("domParser")||Yr.fromSchema(e.state.schema),vn=Ye.resolve(u),La=null,sr=Je.parse(o,{topNode:vn.parent,topMatch:vn.parent.contentMatchAt(vn.index()),topOpen:!0,from:a,to:s,preserveWhitespace:vn.parent.type.whitespace=="pre"?"full":!0,editableContent:!0,findPositions:m,ruleFromNode:YF,context:vn});if(m&&m[0].pos!=null){var Zr=m[0].pos,zs=m[1]&&m[1].pos;zs==null&&(zs=Zr),La={anchor:Zr+u,head:zs+u}}return{doc:sr,sel:La,from:u,to:l}}function YF(e){var t=e.pmViewDesc;if(t)return t.parseRule();if(e.nodeName=="BR"&&e.parentNode){if(z.safari&&/^(ul|ol)$/i.test(e.parentNode.nodeName)){var n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(e.parentNode.lastChild==e||z.safari&&/^(tr|table)$/i.test(e.parentNode.nodeName))return{ignore:!0}}else if(e.nodeName=="IMG"&&e.getAttribute("mark-placeholder"))return{ignore:!0}}function JF(e,t,n,r,o){if(t<0){var a=e.lastSelectionTime>Date.now()-50?e.lastSelectionOrigin:null,s=LE(e,a);if(s&&!e.state.selection.eq(s)){var u=e.state.tr.setSelection(s);a=="pointer"?u.setMeta("pointer",!0):a=="key"&&u.scrollIntoView(),e.dispatch(u)}return}var l=e.state.doc.resolve(t),c=l.sharedDepth(n);t=l.before(c+1),n=e.state.doc.resolve(n).after(c+1);var m=e.state.selection,me=QF(e,t,n);if(z.chrome&&e.cursorWrapper&&me.sel&&me.sel.anchor==e.cursorWrapper.deco.from){var xe=e.cursorWrapper.deco.type.toDOM.nextSibling,Ne=xe&&xe.nodeValue?xe.nodeValue.length:1;me.sel={anchor:me.sel.anchor+Ne,head:me.sel.anchor+Ne}}var He=e.state.doc,Ye=He.slice(me.from,me.to),Je,vn;e.lastKeyCode===8&&Date.now()-100<e.lastKeyCodeTime?(Je=e.state.selection.to,vn="end"):(Je=e.state.selection.from,vn="start"),e.lastKeyCode=null;var La=eR(Ye.content,me.doc.content,me.from,Je,vn);if(!La)if(r&&m instanceof Re&&!m.empty&&m.$head.sameParent(m.$anchor)&&!e.composing&&!(me.sel&&me.sel.anchor!=me.sel.head))La={start:m.from,endA:m.to,endB:m.to};else if((z.ios&&e.lastIOSEnter>Date.now()-225||z.android)&&o.some(function(wy){return wy.nodeName=="DIV"||wy.nodeName=="P"})&&e.someProp("handleKeyDown",function(wy){return wy(e,Ds(13,"Enter"))})){e.lastIOSEnter=0;return}else{if(me.sel){var sr=YE(e,e.state.doc,me.sel);sr&&!sr.eq(e.state.selection)&&e.dispatch(e.state.tr.setSelection(sr))}return}e.domChangeCount++,e.state.selection.from<e.state.selection.to&&La.start==La.endB&&e.state.selection instanceof Re&&(La.start>e.state.selection.from&&La.start<=e.state.selection.from+2?La.start=e.state.selection.from:La.endA<e.state.selection.to&&La.endA>=e.state.selection.to-2&&(La.endB+=e.state.selection.to-La.endA,La.endA=e.state.selection.to)),z.ie&&z.ie_version<=11&&La.endB==La.start+1&&La.endA==La.start&&La.start>me.from&&me.doc.textBetween(La.start-me.from-1,La.start-me.from+1)==" \xA0"&&(La.start--,La.endA--,La.endB--);var Zr=me.doc.resolveNoCache(La.start-me.from),zs=me.doc.resolveNoCache(La.endB-me.from),za=Zr.sameParent(zs)&&Zr.parent.inlineContent,Hs;if((z.ios&&e.lastIOSEnter>Date.now()-225&&(!za||o.some(function(wy){return wy.nodeName=="DIV"||wy.nodeName=="P"}))||!za&&Zr.pos<me.doc.content.size&&(Hs=ve.findFrom(me.doc.resolve(Zr.pos+1),1,!0))&&Hs.head==zs.pos)&&e.someProp("handleKeyDown",function(wy){return wy(e,Ds(13,"Enter"))})){e.lastIOSEnter=0;return}if(e.state.selection.anchor>La.start&&ZF(He,La.start,La.endA,Zr,zs)&&e.someProp("handleKeyDown",function(wy){return wy(e,Ds(8,"Backspace"))})){z.android&&z.chrome&&e.domObserver.suppressSelectionUpdates();return}z.chrome&&z.android&&La.toB==La.from&&(e.lastAndroidDelete=Date.now()),z.android&&!za&&Zr.start()!=zs.start()&&zs.parentOffset==0&&Zr.depth==zs.depth&&me.sel&&me.sel.anchor==me.sel.head&&me.sel.head==La.endA&&(La.endB-=2,zs=me.doc.resolveNoCache(La.endB-me.from),setTimeout(function(){e.someProp("handleKeyDown",function(wy){return wy(e,Ds(13,"Enter"))})},20));var lc=La.start,Ty=La.endA,_y,xy,Bb,Dy;if(za){if(Zr.pos==zs.pos)z.ie&&z.ie_version<=11&&Zr.parentOffset==0&&(e.domObserver.suppressSelectionUpdates(),setTimeout(function(){return go(e)},20)),_y=e.state.tr.delete(lc,Ty),xy=He.resolve(La.start).marksAcross(He.resolve(La.endA));else if(La.endA==La.endB&&(Dy=He.resolve(La.start))&&(Bb=XF(Zr.parent.content.cut(Zr.parentOffset,zs.parentOffset),Dy.parent.content.cut(Dy.parentOffset,La.endA-Dy.start()))))_y=e.state.tr,Bb.type=="add"?_y.addMark(lc,Ty,Bb.mark):_y.removeMark(lc,Ty,Bb.mark);else if(Zr.parent.child(Zr.index()).isText&&Zr.index()==zs.index()-(zs.textOffset?0:1)){var Bg=Zr.parent.textBetween(Zr.parentOffset,zs.parentOffset);if(e.someProp("handleTextInput",function(wy){return wy(e,lc,Ty,Bg)}))return;_y=e.state.tr.insertText(Bg,lc,Ty)}}if(_y||(_y=e.state.tr.replace(lc,Ty,me.doc.slice(La.start-me.from,La.endB-me.from))),me.sel){var yy=YE(e,_y.doc,me.sel);yy&&!(z.chrome&&z.android&&e.composing&&yy.empty&&(La.start!=La.endB||e.lastAndroidDelete<Date.now()-100)&&(yy.head==lc||yy.head==_y.mapping.map(Ty)-1)||z.ie&&yy.empty&&yy.head==lc)&&_y.setSelection(yy)}xy&&_y.ensureMarks(xy),e.dispatch(_y.scrollIntoView())}function YE(e,t,n){return Math.max(n.anchor,n.head)>t.content.size?null:Yg(e,t.resolve(n.anchor),t.resolve(n.head))}function XF(e,t){for(var n=e.firstChild.marks,r=t.firstChild.marks,o=n,a=r,s,u,l,c=0;c<r.length;c++)o=r[c].removeFromSet(o);for(var m=0;m<n.length;m++)a=n[m].removeFromSet(a);if(o.length==1&&a.length==0)u=o[0],s="add",l=function(Ne){return Ne.mark(u.addToSet(Ne.marks))};else if(o.length==0&&a.length==1)u=a[0],s="remove",l=function(Ne){return Ne.mark(u.removeFromSet(Ne.marks))};else return null;for(var me=[],xe=0;xe<t.childCount;xe++)me.push(l(t.child(xe)));if(q.from(me).eq(e))return{mark:u,type:s}}function ZF(e,t,n,r,o){if(!r.parent.isTextblock||n-t<=o.pos-r.pos||rv(r,!0,!1)<o.pos)return!1;var a=e.resolve(t);if(a.parentOffset<a.parent.content.size||!a.parent.isTextblock)return!1;var s=e.resolve(rv(a,!0,!0));return!s.parent.isTextblock||s.pos>n||rv(s,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(s.parent.content)}function rv(e,t,n){for(var r=e.depth,o=t?e.end():e.pos;r>0&&(t||e.indexAfter(r)==e.node(r).childCount);)r--,o++,t=!1;if(n)for(var a=e.node(r).maybeChild(e.indexAfter(r));a&&!a.isLeaf;)a=a.firstChild,o++;return o}function eR(e,t,n,r,o){var a=e.findDiffStart(t,n);if(a==null)return null;var s=e.findDiffEnd(t,n+e.size,n+t.size),u=s.a,l=s.b;if(o=="end"){var c=Math.max(0,a-Math.min(u,l));r-=u+c-a}if(u<a&&e.size<t.size){var m=r<=a&&r>=u?a-r:0;a-=m,l=a+(l-u),u=a}else if(l<a){var me=r<=a&&r>=l?a-r:0;a-=me,u=a+(u-l),l=a}return{start:a,endA:u,endB:l}}function JE(e,t){for(var n=[],r=t.content,o=t.openStart,a=t.openEnd;o>1&&a>1&&r.childCount==1&&r.firstChild.childCount==1;){o--,a--;var s=r.firstChild;n.push(s.type.name,s.attrs!=s.type.defaultAttrs?s.attrs:null),r=s.content}var u=e.someProp("clipboardSerializer")||Qt.fromSchema(e.state.schema),l=ok(),c=l.createElement("div");c.appendChild(u.serializeFragment(r,{document:l}));for(var m=c.firstChild,me;m&&m.nodeType==1&&(me=nk[m.nodeName.toLowerCase()]);){for(var xe=me.length-1;xe>=0;xe--){for(var Ne=l.createElement(me[xe]);c.firstChild;)Ne.appendChild(c.firstChild);c.appendChild(Ne),me[xe]!="tbody"&&(o++,a++)}m=c.firstChild}m&&m.nodeType==1&&m.setAttribute("data-pm-slice",o+" "+a+" "+JSON.stringify(n));var He=e.someProp("clipboardTextSerializer",function(Ye){return Ye(t)})||t.content.textBetween(0,t.content.size,`

`);return{dom:c,text:He}}function XE(e,t,n,r,o){var a,s=o.parent.type.spec.code,u;if(!n&&!t)return null;var l=t&&(r||s||!n);if(l){if(e.someProp("transformPastedText",function(zs){t=zs(t,s||r)}),s)return t?new Y(q.from(e.state.schema.text(t.replace(/\r\n?/g,`
`))),0,0):Y.empty;var c=e.someProp("clipboardTextParser",function(zs){return zs(t,o,r)});if(c)u=c;else{var m=o.marks(),me=e.state,xe=me.schema,Ne=Qt.fromSchema(xe);a=document.createElement("div"),t.split(/(?:\r\n?|\n)+/).forEach(function(zs){var za=a.appendChild(document.createElement("p"));zs&&za.appendChild(Ne.serializeNode(xe.text(zs,m)))})}}else e.someProp("transformPastedHTML",function(zs){n=zs(n)}),a=nR(n),z.webkit&&iR(a);var He=a&&a.querySelector("[data-pm-slice]"),Ye=He&&/^(\d+) (\d+) (.*)/.exec(He.getAttribute("data-pm-slice"));if(!u){var Je=e.someProp("clipboardParser")||e.someProp("domParser")||Yr.fromSchema(e.state.schema);u=Je.parseSlice(a,{preserveWhitespace:!!(l||Ye),context:o,ruleFromNode:function(zs){if(zs.nodeName=="BR"&&!zs.nextSibling&&zs.parentNode&&!tR.test(zs.parentNode.nodeName))return{ignore:!0}}})}if(Ye)u=oR(rk(u,+Ye[1],+Ye[2]),Ye[3]);else if(u=Y.maxOpen(rR(u.content,o),!0),u.openStart||u.openEnd){for(var vn=0,La=0,sr=u.content.firstChild;vn<u.openStart&&!sr.type.spec.isolating;vn++,sr=sr.firstChild);for(var Zr=u.content.lastChild;La<u.openEnd&&!Zr.type.spec.isolating;La++,Zr=Zr.lastChild);u=rk(u,vn,La)}return e.someProp("transformPasted",function(zs){u=zs(u)}),u}var tR=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function rR(e,t){if(e.childCount<2)return e;for(var n=function(a){var s=t.node(a),u=s.contentMatchAt(t.index(a)),l=void 0,c=[];if(e.forEach(function(m){if(c){var me=u.findWrapping(m.type),xe;if(!me)return c=null;if(xe=c.length&&l.length&&ek(me,l,m,c[c.length-1],0))c[c.length-1]=xe;else{c.length&&(c[c.length-1]=tk(c[c.length-1],l.length));var Ne=ZE(m,me);c.push(Ne),u=u.matchType(Ne.type,Ne.attrs),l=me}}}),c)return{v:q.from(c)}},r=t.depth;r>=0;r--){var o=n(r);if(o)return o.v}return e}function ZE(e,t,n){n===void 0&&(n=0);for(var r=t.length-1;r>=n;r--)e=t[r].create(null,q.from(e));return e}function ek(e,t,n,r,o){if(o<e.length&&o<t.length&&e[o]==t[o]){var a=ek(e,t,n,r.lastChild,o+1);if(a)return r.copy(r.content.replaceChild(r.childCount-1,a));var s=r.contentMatchAt(r.childCount);if(s.matchType(o==e.length-1?n.type:e[o+1]))return r.copy(r.content.append(q.from(ZE(n,e,o+1))))}}function tk(e,t){if(t==0)return e;var n=e.content.replaceChild(e.childCount-1,tk(e.lastChild,t-1)),r=e.contentMatchAt(e.childCount).fillBefore(q.empty,!0);return e.copy(n.append(r))}function nv(e,t,n,r,o,a){var s=t<0?e.firstChild:e.lastChild,u=s.content;return o<r-1&&(u=nv(u,t,n,r,o+1,a)),o>=n&&(u=t<0?s.contentMatchAt(0).fillBefore(u,e.childCount>1||a<=o).append(u):u.append(s.contentMatchAt(s.childCount).fillBefore(q.empty,!0))),e.replaceChild(t<0?0:e.childCount-1,s.copy(u))}function rk(e,t,n){return t<e.openStart&&(e=new Y(nv(e.content,-1,t,e.openStart,0,e.openEnd),t,e.openEnd)),n<e.openEnd&&(e=new Y(nv(e.content,1,n,e.openEnd,0,0),e.openStart,n)),e}var nk={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]},ik=null;function ok(){return ik||(ik=document.implementation.createHTMLDocument("title"))}function nR(e){var t=/^(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));var n=ok().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(e),o;if((o=r&&nk[r[1].toLowerCase()])&&(e=o.map(function(s){return"<"+s+">"}).join("")+e+o.map(function(s){return"</"+s+">"}).reverse().join("")),n.innerHTML=e,o)for(var a=0;a<o.length;a++)n=n.querySelector(o[a])||n;return n}function iR(e){for(var t=e.querySelectorAll(z.chrome?"span:not([class]):not([style])":"span.Apple-converted-space"),n=0;n<t.length;n++){var r=t[n];r.childNodes.length==1&&r.textContent=="\xA0"&&r.parentNode&&r.parentNode.replaceChild(e.ownerDocument.createTextNode(" "),r)}}function oR(e,t){if(!e.size)return e;var n=e.content.firstChild.type.schema,r;try{r=JSON.parse(t)}catch{return e}for(var o=e.content,a=e.openStart,s=e.openEnd,u=r.length-2;u>=0;u-=2){var l=n.nodes[r[u]];if(!l||l.hasRequiredAttrs())break;o=q.from(l.create(r[u+1],o)),a++,s++}return new Y(o,a,s)}var aR={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},iv=z.ie&&z.ie_version<=11,ov=function(){this.anchorNode=this.anchorOffset=this.focusNode=this.focusOffset=null};ov.prototype.set=function(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset};ov.prototype.eq=function(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset};var Xr=function(e,t){var n=this;this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=window.MutationObserver&&new window.MutationObserver(function(r){for(var o=0;o<r.length;o++)n.queue.push(r[o]);z.ie&&z.ie_version<=11&&r.some(function(a){return a.type=="childList"&&a.removedNodes.length||a.type=="characterData"&&a.oldValue.length>a.target.nodeValue.length})?n.flushSoon():n.flush()}),this.currentSelection=new ov,iv&&(this.onCharData=function(r){n.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),n.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.suppressingSelectionUpdates=!1};Xr.prototype.flushSoon=function(){var e=this;this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(function(){e.flushingSoon=-1,e.flush()},20))};Xr.prototype.forceFlush=function(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())};Xr.prototype.start=function(){this.observer&&this.observer.observe(this.view.dom,aR),iv&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()};Xr.prototype.stop=function(){var e=this;if(this.observer){var t=this.observer.takeRecords();if(t.length){for(var n=0;n<t.length;n++)this.queue.push(t[n]);window.setTimeout(function(){return e.flush()},20)}this.observer.disconnect()}iv&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()};Xr.prototype.connectSelection=function(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)};Xr.prototype.disconnectSelection=function(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)};Xr.prototype.suppressSelectionUpdates=function(){var e=this;this.suppressingSelectionUpdates=!0,setTimeout(function(){return e.suppressingSelectionUpdates=!1},50)};Xr.prototype.onSelectionChange=function(){if(UF(this.view)){if(this.suppressingSelectionUpdates)return go(this.view);if(z.ie&&z.ie_version<=11&&!this.view.state.selection.empty){var e=this.view.root.getSelection();if(e.focusNode&&dl(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}};Xr.prototype.setCurSelection=function(){this.currentSelection.set(this.view.root.getSelection())};Xr.prototype.ignoreSelectionChange=function(e){if(e.rangeCount==0)return!0;var t=e.getRangeAt(0).commonAncestorContainer,n=this.view.docView.nearestDesc(t);if(n&&n.ignoreMutation({type:"selection",target:t.nodeType==3?t.parentNode:t}))return this.setCurSelection(),!0};Xr.prototype.flush=function(){if(!(!this.view.docView||this.flushingSoon>-1)){var e=this.observer?this.observer.takeRecords():[];this.queue.length&&(e=this.queue.concat(e),this.queue.length=0);var t=this.view.root.getSelection(),n=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(t)&&Jg(this.view)&&!this.ignoreSelectionChange(t),r=-1,o=-1,a=!1,s=[];if(this.view.editable)for(var u=0;u<e.length;u++){var l=this.registerMutation(e[u],s);l&&(r=r<0?l.from:Math.min(l.from,r),o=o<0?l.to:Math.max(l.to,o),l.typeOver&&(a=!0))}if(z.gecko&&s.length>1){var c=s.filter(function(xe){return xe.nodeName=="BR"});if(c.length==2){var m=c[0],me=c[1];m.parentNode&&m.parentNode.parentNode==me.parentNode?me.remove():m.remove()}}(r>-1||n)&&(r>-1&&(this.view.docView.markDirty(r,o),sR(this.view)),this.handleDOMChange(r,o,a,s),this.view.docView.dirty?this.view.updateState(this.view.state):this.currentSelection.eq(t)||go(this.view),this.currentSelection.set(t))}};Xr.prototype.registerMutation=function(e,t){if(t.indexOf(e.target)>-1)return null;var n=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(n==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!n||n.ignoreMutation(e))return null;if(e.type=="childList"){for(var r=0;r<e.addedNodes.length;r++)t.push(e.addedNodes[r]);if(n.contentDOM&&n.contentDOM!=n.dom&&!n.contentDOM.contains(e.target))return{from:n.posBefore,to:n.posAfter};var o=e.previousSibling,a=e.nextSibling;if(z.ie&&z.ie_version<=11&&e.addedNodes.length)for(var s=0;s<e.addedNodes.length;s++){var u=e.addedNodes[s],l=u.previousSibling,c=u.nextSibling;(!l||Array.prototype.indexOf.call(e.addedNodes,l)<0)&&(o=l),(!c||Array.prototype.indexOf.call(e.addedNodes,c)<0)&&(a=c)}var m=o&&o.parentNode==e.target?Jr(o)+1:0,me=n.localPosFromDOM(e.target,m,-1),xe=a&&a.parentNode==e.target?Jr(a):e.target.childNodes.length,Ne=n.localPosFromDOM(e.target,xe,1);return{from:me,to:Ne}}else return e.type=="attributes"?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}};var ak=!1;function sR(e){ak||(ak=!0,getComputedStyle(e.dom).whiteSpace=="normal"&&console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."))}var zr={},$r={};function uR(e){e.shiftKey=!1,e.mouseDown=null,e.lastKeyCode=null,e.lastKeyCodeTime=0,e.lastClick={time:0,x:0,y:0,type:""},e.lastSelectionOrigin=null,e.lastSelectionTime=0,e.lastIOSEnter=0,e.lastIOSEnterFallbackTimeout=null,e.lastAndroidDelete=0,e.composing=!1,e.composingTimeout=null,e.compositionNodes=[],e.compositionEndedAt=-2e8,e.domObserver=new Xr(e,function(r,o,a,s){return JF(e,r,o,a,s)}),e.domObserver.start(),e.domChangeCount=0,e.eventHandlers=Object.create(null);var t=function(r){var o=zr[r];e.dom.addEventListener(r,e.eventHandlers[r]=function(a){cR(e,a)&&!sv(e,a)&&(e.editable||!(a.type in $r))&&o(e,a)})};for(var n in zr)t(n);z.safari&&e.dom.addEventListener("input",function(){return null}),av(e)}function la(e,t){e.lastSelectionOrigin=t,e.lastSelectionTime=Date.now()}function lR(e){e.domObserver.stop();for(var t in e.eventHandlers)e.dom.removeEventListener(t,e.eventHandlers[t]);clearTimeout(e.composingTimeout),clearTimeout(e.lastIOSEnterFallbackTimeout)}function av(e){e.someProp("handleDOMEvents",function(t){for(var n in t)e.eventHandlers[n]||e.dom.addEventListener(n,e.eventHandlers[n]=function(r){return sv(e,r)})})}function sv(e,t){return e.someProp("handleDOMEvents",function(n){var r=n[t.type];return r?r(e,t)||t.defaultPrevented:!1})}function cR(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(var n=t.target;n!=e.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(t))return!1;return!0}function fR(e,t){!sv(e,t)&&zr[t.type]&&(e.editable||!(t.type in $r))&&zr[t.type](e,t)}$r.keydown=function(e,t){if(e.shiftKey=t.keyCode==16||t.shiftKey,!uk(e,t)&&(e.lastKeyCode=t.keyCode,e.lastKeyCodeTime=Date.now(),!(z.android&&z.chrome&&t.keyCode==13)))if(t.keyCode!=229&&e.domObserver.forceFlush(),z.ios&&t.keyCode==13&&!t.ctrlKey&&!t.altKey&&!t.metaKey){var n=Date.now();e.lastIOSEnter=n,e.lastIOSEnterFallbackTimeout=setTimeout(function(){e.lastIOSEnter==n&&(e.someProp("handleKeyDown",function(r){return r(e,Ds(13,"Enter"))}),e.lastIOSEnter=0)},200)}else e.someProp("handleKeyDown",function(r){return r(e,t)})||GF(e,t)?t.preventDefault():la(e,"key")};$r.keyup=function(e,t){t.keyCode==16&&(e.shiftKey=!1)};$r.keypress=function(e,t){if(!(uk(e,t)||!t.charCode||t.ctrlKey&&!t.altKey||z.mac&&t.metaKey)){if(e.someProp("handleKeyPress",function(o){return o(e,t)})){t.preventDefault();return}var n=e.state.selection;if(!(n instanceof Re)||!n.$from.sameParent(n.$to)){var r=String.fromCharCode(t.charCode);e.someProp("handleTextInput",function(o){return o(e,n.$from.pos,n.$to.pos,r)})||e.dispatch(e.state.tr.insertText(r).scrollIntoView()),t.preventDefault()}}};function up(e){return{left:e.clientX,top:e.clientY}}function pR(e,t){var n=t.x-e.clientX,r=t.y-e.clientY;return n*n+r*r<100}function uv(e,t,n,r,o){if(r==-1)return!1;for(var a=e.state.doc.resolve(r),s=function(c){if(e.someProp(t,function(m){return c>a.depth?m(e,n,a.nodeAfter,a.before(c),o,!0):m(e,n,a.node(c),a.before(c),o,!1)}))return{v:!0}},u=a.depth+1;u>0;u--){var l=s(u);if(l)return l.v}return!1}function Os(e,t,n){e.focused||e.focus();var r=e.state.tr.setSelection(t);n=="pointer"&&r.setMeta("pointer",!0),e.dispatch(r)}function dR(e,t){if(t==-1)return!1;var n=e.state.doc.resolve(t),r=n.nodeAfter;return r&&r.isAtom&&ye.isSelectable(r)?(Os(e,new ye(n),"pointer"),!0):!1}function hR(e,t){if(t==-1)return!1;var n=e.state.selection,r,o;n instanceof ye&&(r=n.node);for(var a=e.state.doc.resolve(t),s=a.depth+1;s>0;s--){var u=s>a.depth?a.nodeAfter:a.node(s);if(ye.isSelectable(u)){r&&n.$from.depth>0&&s>=n.$from.depth&&a.before(n.$from.depth+1)==n.$from.pos?o=a.before(n.$from.depth):o=a.before(s);break}}return o!=null?(Os(e,ye.create(e.state.doc,o),"pointer"),!0):!1}function mR(e,t,n,r,o){return uv(e,"handleClickOn",t,n,r)||e.someProp("handleClick",function(a){return a(e,t,r)})||(o?hR(e,n):dR(e,n))}function gR(e,t,n,r){return uv(e,"handleDoubleClickOn",t,n,r)||e.someProp("handleDoubleClick",function(o){return o(e,t,r)})}function vR(e,t,n,r){return uv(e,"handleTripleClickOn",t,n,r)||e.someProp("handleTripleClick",function(o){return o(e,t,r)})||yR(e,n,r)}function yR(e,t,n){if(n.button!=0)return!1;var r=e.state.doc;if(t==-1)return r.inlineContent?(Os(e,Re.create(r,0,r.content.size),"pointer"),!0):!1;for(var o=r.resolve(t),a=o.depth+1;a>0;a--){var s=a>o.depth?o.nodeAfter:o.node(a),u=o.before(a);if(s.inlineContent)Os(e,Re.create(r,u+1,u+1+s.content.size),"pointer");else if(ye.isSelectable(s))Os(e,ye.create(r,u),"pointer");else continue;return!0}}function lv(e){return cp(e)}var sk=z.mac?"metaKey":"ctrlKey";zr.mousedown=function(e,t){e.shiftKey=t.shiftKey;var n=lv(e),r=Date.now(),o="singleClick";r-e.lastClick.time<500&&pR(t,e.lastClick)&&!t[sk]&&(e.lastClick.type=="singleClick"?o="doubleClick":e.lastClick.type=="doubleClick"&&(o="tripleClick")),e.lastClick={time:r,x:t.clientX,y:t.clientY,type:o};var a=e.posAtCoords(up(t));!a||(o=="singleClick"?(e.mouseDown&&e.mouseDown.done(),e.mouseDown=new lp(e,a,t,n)):(o=="doubleClick"?gR:vR)(e,a.pos,a.inside,t)?t.preventDefault():la(e,"pointer"))};var lp=function(e,t,n,r){var o=this;this.view=e,this.startDoc=e.state.doc,this.pos=t,this.event=n,this.flushed=r,this.selectNode=n[sk],this.allowDefault=n.shiftKey,this.delayedSelectionSync=!1;var a,s;if(t.inside>-1)a=e.state.doc.nodeAt(t.inside),s=t.inside;else{var u=e.state.doc.resolve(t.pos);a=u.parent,s=u.depth?u.before():0}this.mightDrag=null;var l=r?null:n.target,c=l?e.docView.nearestDesc(l,!0):null;this.target=c?c.dom:null;var m=e.state,me=m.selection;(n.button==0&&a.type.spec.draggable&&a.type.spec.selectable!==!1||me instanceof ye&&me.from<=s&&me.to>s)&&(this.mightDrag={node:a,pos:s,addAttr:this.target&&!this.target.draggable,setUneditable:this.target&&z.gecko&&!this.target.hasAttribute("contentEditable")}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(function(){o.view.mouseDown==o&&o.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),la(e,"pointer")};lp.prototype.done=function(){var e=this;this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(function(){return go(e.view)}),this.view.mouseDown=null};lp.prototype.up=function(e){if(this.done(),!!this.view.dom.contains(e.target.nodeType==3?e.target.parentNode:e.target)){var t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(up(e))),this.allowDefault||!t?la(this.view,"pointer"):mR(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||z.safari&&this.mightDrag&&!this.mightDrag.node.isAtom||z.chrome&&!(this.view.state.selection instanceof Re)&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(Os(this.view,ve.near(this.view.state.doc.resolve(t.pos)),"pointer"),e.preventDefault()):la(this.view,"pointer")}};lp.prototype.move=function(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0),la(this.view,"pointer"),e.buttons==0&&this.done()};zr.touchdown=function(e){lv(e),la(e,"pointer")};zr.contextmenu=function(e){return lv(e)};function uk(e,t){return e.composing?!0:z.safari&&Math.abs(t.timeStamp-e.compositionEndedAt)<500?(e.compositionEndedAt=-2e8,!0):!1}var _R=z.android?5e3:-1;$r.compositionstart=$r.compositionupdate=function(e){if(!e.composing){e.domObserver.flush();var t=e.state,n=t.selection.$from;if(t.selection.empty&&(t.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(function(u){return u.type.spec.inclusive===!1})))e.markCursor=e.state.storedMarks||n.marks(),cp(e,!0),e.markCursor=null;else if(cp(e),z.gecko&&t.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length)for(var r=e.root.getSelection(),o=r.focusNode,a=r.focusOffset;o&&o.nodeType==1&&a!=0;){var s=a<0?o.lastChild:o.childNodes[a-1];if(!s)break;if(s.nodeType==3){r.collapse(s,s.nodeValue.length);break}else o=s,a=-1}e.composing=!0}lk(e,_R)};$r.compositionend=function(e,t){e.composing&&(e.composing=!1,e.compositionEndedAt=t.timeStamp,lk(e,20))};function lk(e,t){clearTimeout(e.composingTimeout),t>-1&&(e.composingTimeout=setTimeout(function(){return cp(e)},t))}function ck(e){for(e.composing&&(e.composing=!1,e.compositionEndedAt=bR());e.compositionNodes.length>0;)e.compositionNodes.pop().markParentsDirty()}function bR(){var e=document.createEvent("Event");return e.initEvent("event",!0,!0),e.timeStamp}function cp(e,t){if(!(z.android&&e.domObserver.flushingSoon>=0)){if(e.domObserver.forceFlush(),ck(e),t||e.docView.dirty){var n=LE(e);return n&&!n.eq(e.state.selection)?e.dispatch(e.state.tr.setSelection(n)):e.updateState(e.state),!0}return!1}}function wR(e,t){if(e.dom.parentNode){var n=e.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(t),n.style.cssText="position: fixed; left: -10000px; top: 10px";var r=getSelection(),o=document.createRange();o.selectNodeContents(t),e.dom.blur(),r.removeAllRanges(),r.addRange(o),setTimeout(function(){n.parentNode&&n.parentNode.removeChild(n),e.focus()},50)}}var Ts=z.ie&&z.ie_version<15||z.ios&&z.webkit_version<604;zr.copy=$r.cut=function(e,t){var n=e.state.selection,r=t.type=="cut";if(!n.empty){var o=Ts?null:t.clipboardData,a=n.content(),s=JE(e,a),u=s.dom,l=s.text;o?(t.preventDefault(),o.clearData(),o.setData("text/html",u.innerHTML),o.setData("text/plain",l)):wR(e,u),r&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))}};function xR(e){return e.openStart==0&&e.openEnd==0&&e.content.childCount==1?e.content.firstChild:null}function SR(e,t){if(e.dom.parentNode){var n=e.shiftKey||e.state.selection.$from.parent.type.spec.code,r=e.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus(),setTimeout(function(){e.focus(),r.parentNode&&r.parentNode.removeChild(r),n?cv(e,r.value,null,t):cv(e,r.textContent,r.innerHTML,t)},50)}}function cv(e,t,n,r){var o=XE(e,t,n,e.shiftKey,e.state.selection.$from);if(e.someProp("handlePaste",function(u){return u(e,r,o||Y.empty)}))return!0;if(!o)return!1;var a=xR(o),s=a?e.state.tr.replaceSelectionWith(a,e.shiftKey):e.state.tr.replaceSelection(o);return e.dispatch(s.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}$r.paste=function(e,t){if(!(e.composing&&!z.android)){var n=Ts?null:t.clipboardData;n&&cv(e,n.getData("text/plain"),n.getData("text/html"),t)?t.preventDefault():SR(e,t)}};var ER=function(e,t){this.slice=e,this.move=t},fk=z.mac?"altKey":"ctrlKey";zr.dragstart=function(e,t){var n=e.mouseDown;if(n&&n.done(),!!t.dataTransfer){var r=e.state.selection,o=r.empty?null:e.posAtCoords(up(t));if(!(o&&o.pos>=r.from&&o.pos<=(r instanceof ye?r.to-1:r.to))){if(n&&n.mightDrag)e.dispatch(e.state.tr.setSelection(ye.create(e.state.doc,n.mightDrag.pos)));else if(t.target&&t.target.nodeType==1){var a=e.docView.nearestDesc(t.target,!0);a&&a.node.type.spec.draggable&&a!=e.docView&&e.dispatch(e.state.tr.setSelection(ye.create(e.state.doc,a.posBefore)))}}var s=e.state.selection.content(),u=JE(e,s),l=u.dom,c=u.text;t.dataTransfer.clearData(),t.dataTransfer.setData(Ts?"Text":"text/html",l.innerHTML),t.dataTransfer.effectAllowed="copyMove",Ts||t.dataTransfer.setData("text/plain",c),e.dragging=new ER(s,!t[fk])}};zr.dragend=function(e){var t=e.dragging;window.setTimeout(function(){e.dragging==t&&(e.dragging=null)},50)};$r.dragover=$r.dragenter=function(e,t){return t.preventDefault()};$r.drop=function(e,t){var n=e.dragging;if(e.dragging=null,!!t.dataTransfer){var r=e.posAtCoords(up(t));if(r){var o=e.state.doc.resolve(r.pos);if(o){var a=n&&n.slice;a?e.someProp("transformPasted",function(He){a=He(a)}):a=XE(e,t.dataTransfer.getData(Ts?"Text":"text/plain"),Ts?null:t.dataTransfer.getData("text/html"),!1,o);var s=n&&!t[fk];if(e.someProp("handleDrop",function(He){return He(e,t,a||Y.empty,s)})){t.preventDefault();return}if(a){t.preventDefault();var u=a?QS(e.state.doc,o.pos,a):o.pos;u==null&&(u=o.pos);var l=e.state.tr;s&&l.deleteSelection();var c=l.mapping.map(u),m=a.openStart==0&&a.openEnd==0&&a.content.childCount==1,me=l.doc;if(m?l.replaceRangeWith(c,c,a.content.firstChild):l.replaceRange(c,c,a),!l.doc.eq(me)){var xe=l.doc.resolve(c);if(m&&ye.isSelectable(a.content.firstChild)&&xe.nodeAfter&&xe.nodeAfter.sameMarkup(a.content.firstChild))l.setSelection(new ye(xe));else{var Ne=l.mapping.map(u);l.mapping.maps[l.mapping.maps.length-1].forEach(function(He,Ye,Je,vn){return Ne=vn}),l.setSelection(Yg(e,xe,l.doc.resolve(Ne)))}e.focus(),e.dispatch(l.setMeta("uiEvent","drop"))}}}}}};zr.focus=function(e){e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0,setTimeout(function(){e.docView&&e.hasFocus()&&!e.domObserver.currentSelection.eq(e.root.getSelection())&&go(e)},20))};zr.blur=function(e,t){e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),t.relatedTarget&&e.dom.contains(t.relatedTarget)&&e.domObserver.currentSelection.set({}),e.focused=!1)};zr.beforeinput=function(e,t){if(z.chrome&&z.android&&t.inputType=="deleteContentBackward"){e.domObserver.flushSoon();var n=e.domChangeCount;setTimeout(function(){if(e.domChangeCount==n&&(e.dom.blur(),e.focus(),!e.someProp("handleKeyDown",function(a){return a(e,Ds(8,"Backspace"))}))){var r=e.state.selection,o=r.$cursor;o&&o.pos>0&&e.dispatch(e.state.tr.delete(o.pos-1,o.pos).scrollIntoView())}},50)}};for(fv in $r)zr[fv]=$r[fv];var fv;function _l(e,t){if(e==t)return!0;for(var n in e)if(e[n]!==t[n])return!1;for(var r in t)if(!(r in e))return!1;return!0}var As=function(e,t){this.spec=t||ca,this.side=this.spec.side||0,this.toDOM=e};As.prototype.map=function(e,t,n,r){var o=e.mapResult(t.from+r,this.side<0?-1:1),a=o.pos,s=o.deleted;return s?null:new Yt(a-n,a-n,this)};As.prototype.valid=function(){return!0};As.prototype.eq=function(e){return this==e||e instanceof As&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&_l(this.spec,e.spec))};As.prototype.destroy=function(e){this.spec.destroy&&this.spec.destroy(e)};var Dn=function(e,t){this.spec=t||ca,this.attrs=e};Dn.prototype.map=function(e,t,n,r){var o=e.map(t.from+r,this.spec.inclusiveStart?-1:1)-n,a=e.map(t.to+r,this.spec.inclusiveEnd?1:-1)-n;return o>=a?null:new Yt(o,a,this)};Dn.prototype.valid=function(e,t){return t.from<t.to};Dn.prototype.eq=function(e){return this==e||e instanceof Dn&&_l(this.attrs,e.attrs)&&_l(this.spec,e.spec)};Dn.is=function(e){return e.type instanceof Dn};var bl=function(e,t){this.spec=t||ca,this.attrs=e};bl.prototype.map=function(e,t,n,r){var o=e.mapResult(t.from+r,1);if(o.deleted)return null;var a=e.mapResult(t.to+r,-1);return a.deleted||a.pos<=o.pos?null:new Yt(o.pos-n,a.pos-n,this)};bl.prototype.valid=function(e,t){var n=e.content.findIndex(t.from),r=n.index,o=n.offset,a;return o==t.from&&!(a=e.child(r)).isText&&o+a.nodeSize==t.to};bl.prototype.eq=function(e){return this==e||e instanceof bl&&_l(this.attrs,e.attrs)&&_l(this.spec,e.spec)};var Yt=function(e,t,n){this.from=e,this.to=t,this.type=n},pv={spec:{configurable:!0},inline:{configurable:!0}};Yt.prototype.copy=function(e,t){return new Yt(e,t,this.type)};Yt.prototype.eq=function(e,t){return t===void 0&&(t=0),this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to};Yt.prototype.map=function(e,t,n){return this.type.map(e,this,t,n)};Yt.widget=function(e,t,n){return new Yt(e,e,new As(t,n))};Yt.inline=function(e,t,n,r){return new Yt(e,t,new Dn(n,r))};Yt.node=function(e,t,n,r){return new Yt(e,t,new bl(n,r))};pv.spec.get=function(){return this.type.spec};pv.inline.get=function(){return this.type instanceof Dn};Object.defineProperties(Yt.prototype,pv);var fp=[],ca={},Xe=function(e,t){this.local=e&&e.length?e:fp,this.children=t&&t.length?t:fp};Xe.create=function(e,t){return t.length?pp(t,e,0,ca):hr};Xe.prototype.find=function(e,t,n){var r=[];return this.findInner(e!=null?e:0,t!=null?t:1e9,r,0,n),r};Xe.prototype.findInner=function(e,t,n,r,o){for(var a=0;a<this.local.length;a++){var s=this.local[a];s.from<=t&&s.to>=e&&(!o||o(s.spec))&&n.push(s.copy(s.from+r,s.to+r))}for(var u=0;u<this.children.length;u+=3)if(this.children[u]<t&&this.children[u+1]>e){var l=this.children[u]+1;this.children[u+2].findInner(e-l,t-l,n,r+l,o)}};Xe.prototype.map=function(e,t,n){return this==hr||e.maps.length==0?this:this.mapInner(e,t,0,0,n||ca)};Xe.prototype.mapInner=function(e,t,n,r,o){for(var a,s=0;s<this.local.length;s++){var u=this.local[s].map(e,n,r);u&&u.type.valid(t,u)?(a||(a=[])).push(u):o.onRemove&&o.onRemove(this.local[s].spec)}return this.children.length?kR(this.children,a,e,t,n,r,o):a?new Xe(a.sort(fa)):hr};Xe.prototype.add=function(e,t){return t.length?this==hr?Xe.create(e,t):this.addInner(e,t,0):this};Xe.prototype.addInner=function(e,t,n){var r=this,o,a=0;e.forEach(function(l,c){var m=c+n,me;if(me=dk(t,l,m)){for(o||(o=r.children.slice());a<o.length&&o[a]<c;)a+=3;o[a]==c?o[a+2]=o[a+2].addInner(l,me,m+1):o.splice(a,0,c,c+l.nodeSize,pp(me,l,m+1,ca)),a+=3}});for(var s=pk(a?hk(t):t,-n),u=0;u<s.length;u++)s[u].type.valid(e,s[u])||s.splice(u--,1);return new Xe(s.length?this.local.concat(s).sort(fa):this.local,o||this.children)};Xe.prototype.remove=function(e){return e.length==0||this==hr?this:this.removeInner(e,0)};Xe.prototype.removeInner=function(e,t){for(var n=this.children,r=this.local,o=0;o<n.length;o+=3){for(var a=void 0,s=n[o]+t,u=n[o+1]+t,l=0,c=void 0;l<e.length;l++)(c=e[l])&&c.from>s&&c.to<u&&(e[l]=null,(a||(a=[])).push(c));if(a){n==this.children&&(n=this.children.slice());var m=n[o+2].removeInner(a,s+1);m!=hr?n[o+2]=m:(n.splice(o,3),o-=3)}}if(r.length){for(var me=0,xe=void 0;me<e.length;me++)if(xe=e[me])for(var Ne=0;Ne<r.length;Ne++)r[Ne].eq(xe,t)&&(r==this.local&&(r=this.local.slice()),r.splice(Ne--,1))}return n==this.children&&r==this.local?this:r.length||n.length?new Xe(r,n):hr};Xe.prototype.forChild=function(e,t){if(this==hr)return this;if(t.isLeaf)return Xe.empty;for(var n,r,o=0;o<this.children.length;o+=3)if(this.children[o]>=e){this.children[o]==e&&(n=this.children[o+2]);break}for(var a=e+1,s=a+t.content.size,u=0;u<this.local.length;u++){var l=this.local[u];if(l.from<s&&l.to>a&&l.type instanceof Dn){var c=Math.max(a,l.from)-a,m=Math.min(s,l.to)-a;c<m&&(r||(r=[])).push(l.copy(c,m))}}if(r){var me=new Xe(r.sort(fa));return n?new ln([me,n]):me}return n||hr};Xe.prototype.eq=function(e){if(this==e)return!0;if(!(e instanceof Xe)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(var t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(var n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0};Xe.prototype.locals=function(e){return dv(this.localsInner(e))};Xe.prototype.localsInner=function(e){if(this==hr)return fp;if(e.inlineContent||!this.local.some(Dn.is))return this.local;for(var t=[],n=0;n<this.local.length;n++)this.local[n].type instanceof Dn||t.push(this.local[n]);return t};var hr=new Xe;Xe.empty=hr;Xe.removeOverlap=dv;var ln=function(e){this.members=e};ln.prototype.map=function(e,t){var n=this.members.map(function(r){return r.map(e,t,ca)});return ln.from(n)};ln.prototype.forChild=function(e,t){if(t.isLeaf)return Xe.empty;for(var n=[],r=0;r<this.members.length;r++){var o=this.members[r].forChild(e,t);o!=hr&&(o instanceof ln?n=n.concat(o.members):n.push(o))}return ln.from(n)};ln.prototype.eq=function(e){if(!(e instanceof ln)||e.members.length!=this.members.length)return!1;for(var t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0};ln.prototype.locals=function(e){for(var t,n=!0,r=0;r<this.members.length;r++){var o=this.members[r].localsInner(e);if(o.length)if(!t)t=o;else{n&&(t=t.slice(),n=!1);for(var a=0;a<o.length;a++)t.push(o[a])}}return t?dv(n?t:t.sort(fa)):fp};ln.from=function(e){switch(e.length){case 0:return hr;case 1:return e[0];default:return new ln(e)}};function kR(e,t,n,r,o,a,s){for(var u=e.slice(),l=function(xy,Bb,Dy,Bg){for(var yy=0;yy<u.length;yy+=3){var wy=u[yy+1],Ay=void 0;wy==-1||xy>wy+a||(Bb>=u[yy]+a?u[yy+1]=-1:Dy>=o&&(Ay=Bg-Dy-(Bb-xy))&&(u[yy]+=Ay,u[yy+1]+=Ay))}},c=0;c<n.maps.length;c++)n.maps[c].forEach(l);for(var m=!1,me=0;me<u.length;me+=3)if(u[me+1]==-1){var xe=n.map(e[me]+a),Ne=xe-o;if(Ne<0||Ne>=r.content.size){m=!0;continue}var He=n.map(e[me+1]+a,-1),Ye=He-o,Je=r.content.findIndex(Ne),vn=Je.index,La=Je.offset,sr=r.maybeChild(vn);if(sr&&La==Ne&&La+sr.nodeSize==Ye){var Zr=u[me+2].mapInner(n,sr,xe+1,e[me]+a+1,s);Zr!=hr?(u[me]=Ne,u[me+1]=Ye,u[me+2]=Zr):(u[me+1]=-2,m=!0)}else m=!0}if(m){var zs=DR(u,e,t||[],n,o,a,s),za=pp(zs,r,0,s);t=za.local;for(var Hs=0;Hs<u.length;Hs+=3)u[Hs+1]<0&&(u.splice(Hs,3),Hs-=3);for(var lc=0,Ty=0;lc<za.children.length;lc+=3){for(var _y=za.children[lc];Ty<u.length&&u[Ty]<_y;)Ty+=3;u.splice(Ty,0,za.children[lc],za.children[lc+1],za.children[lc+2])}}return new Xe(t&&t.sort(fa),u)}function pk(e,t){if(!t||!e.length)return e;for(var n=[],r=0;r<e.length;r++){var o=e[r];n.push(new Yt(o.from+t,o.to+t,o.type))}return n}function DR(e,t,n,r,o,a,s){function u(c,m){for(var me=0;me<c.local.length;me++){var xe=c.local[me].map(r,o,m);xe?n.push(xe):s.onRemove&&s.onRemove(c.local[me].spec)}for(var Ne=0;Ne<c.children.length;Ne+=3)u(c.children[Ne+2],c.children[Ne]+m+1)}for(var l=0;l<e.length;l+=3)e[l+1]==-1&&u(e[l+2],t[l]+a+1);return n}function dk(e,t,n){if(t.isLeaf)return null;for(var r=n+t.nodeSize,o=null,a=0,s=void 0;a<e.length;a++)(s=e[a])&&s.from>n&&s.to<r&&((o||(o=[])).push(s),e[a]=null);return o}function hk(e){for(var t=[],n=0;n<e.length;n++)e[n]!=null&&t.push(e[n]);return t}function pp(e,t,n,r){var o=[],a=!1;t.forEach(function(l,c){var m=dk(e,l,c+n);if(m){a=!0;var me=pp(m,l,n+c+1,r);me!=hr&&o.push(c,c+l.nodeSize,me)}});for(var s=pk(a?hk(e):e,-n).sort(fa),u=0;u<s.length;u++)s[u].type.valid(t,s[u])||(r.onRemove&&r.onRemove(s[u].spec),s.splice(u--,1));return s.length||o.length?new Xe(s,o):hr}function fa(e,t){return e.from-t.from||e.to-t.to}function dv(e){for(var t=e,n=0;n<t.length-1;n++){var r=t[n];if(r.from!=r.to)for(var o=n+1;o<t.length;o++){var a=t[o];if(a.from==r.from){a.to!=r.to&&(t==e&&(t=e.slice()),t[o]=a.copy(a.from,r.to),mk(t,o+1,a.copy(r.to,a.to)));continue}else{a.from<r.to&&(t==e&&(t=e.slice()),t[n]=r.copy(r.from,a.from),mk(t,o,r.copy(a.from,r.to)));break}}}return t}function mk(e,t,n){for(;t<e.length&&fa(n,e[t])>0;)t++;e.splice(t,0,n)}function hv(e){var t=[];return e.someProp("decorations",function(n){var r=n(e.state);r&&r!=hr&&t.push(r)}),e.cursorWrapper&&t.push(Xe.create(e.state.doc,[e.cursorWrapper.deco])),ln.from(t)}var Lt=function(e,t){this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(bk),this.dispatch=this.dispatch.bind(this),this._root=null,this.focused=!1,this.trackWrites=null,this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):e.apply?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=yk(this),this.markCursor=null,this.cursorWrapper=null,vk(this),this.nodeViews=_k(this),this.docView=IE(this.state.doc,gk(this),hv(this),this.dom,this),this.lastSelectedViewDesc=null,this.dragging=null,uR(this),this.prevDirectPlugins=[],this.pluginViews=[],this.updatePluginViews()},dp={props:{configurable:!0},root:{configurable:!0},isDestroyed:{configurable:!0}};dp.props.get=function(){if(this._props.state!=this.state){var e=this._props;this._props={};for(var t in e)this._props[t]=e[t];this._props.state=this.state}return this._props};Lt.prototype.update=function(e){e.handleDOMEvents!=this._props.handleDOMEvents&&av(this),this._props=e,e.plugins&&(e.plugins.forEach(bk),this.directPlugins=e.plugins),this.updateStateInner(e.state,!0)};Lt.prototype.setProps=function(e){var t={};for(var n in this._props)t[n]=this._props[n];t.state=this.state;for(var r in e)t[r]=e[r];this.update(t)};Lt.prototype.updateState=function(e){this.updateStateInner(e,this.state.plugins!=e.plugins)};Lt.prototype.updateStateInner=function(e,t){var n=this,r=this.state,o=!1,a=!1;if(e.storedMarks&&this.composing&&(ck(this),a=!0),this.state=e,t){var s=_k(this);OR(s,this.nodeViews)&&(this.nodeViews=s,o=!0),av(this)}this.editable=yk(this),vk(this);var u=hv(this),l=gk(this),c=t?"reset":e.scrollToSelection>r.scrollToSelection?"to selection":"preserve",m=o||!this.docView.matchesNode(e.doc,l,u);(m||!e.selection.eq(r.selection))&&(a=!0);var me=c=="preserve"&&a&&this.dom.style.overflowAnchor==null&&bF(this);if(a){this.domObserver.stop();var xe=m&&(z.ie||z.chrome)&&!this.composing&&!r.selection.empty&&!e.selection.empty&&CR(r.selection,e.selection);if(m){var Ne=z.chrome?this.trackWrites=this.root.getSelection().focusNode:null;(o||!this.docView.update(e.doc,l,u,this))&&(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=IE(e.doc,l,u,this.dom,this)),Ne&&!this.trackWrites&&(xe=!0)}xe||!(this.mouseDown&&this.domObserver.currentSelection.eq(this.root.getSelection())&&WF(this))?go(this,xe):(zE(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}if(this.updatePluginViews(r),c=="reset")this.dom.scrollTop=0;else if(c=="to selection"){var He=this.root.getSelection().focusNode;this.someProp("handleScrollToSelection",function(Ye){return Ye(n)})||(e.selection instanceof ye?_E(this,this.docView.domAfterPos(e.selection.from).getBoundingClientRect(),He):_E(this,this.coordsAtPos(e.selection.head,1),He))}else me&&wF(me)};Lt.prototype.destroyPluginViews=function(){for(var e;e=this.pluginViews.pop();)e.destroy&&e.destroy()};Lt.prototype.updatePluginViews=function(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(var t=0;t<this.directPlugins.length;t++){var n=this.directPlugins[t];n.spec.view&&this.pluginViews.push(n.spec.view(this))}for(var r=0;r<this.state.plugins.length;r++){var o=this.state.plugins[r];o.spec.view&&this.pluginViews.push(o.spec.view(this))}}else for(var a=0;a<this.pluginViews.length;a++){var s=this.pluginViews[a];s.update&&s.update(this,e)}};Lt.prototype.someProp=function(e,t){var n=this._props&&this._props[e],r;if(n!=null&&(r=t?t(n):n))return r;for(var o=0;o<this.directPlugins.length;o++){var a=this.directPlugins[o].props[e];if(a!=null&&(r=t?t(a):a))return r}var s=this.state.plugins;if(s)for(var u=0;u<s.length;u++){var l=s[u].props[e];if(l!=null&&(r=t?t(l):l))return r}};Lt.prototype.hasFocus=function(){return this.root.activeElement==this.dom};Lt.prototype.focus=function(){this.domObserver.stop(),this.editable&&xF(this.dom),go(this),this.domObserver.start()};dp.root.get=function(){var e=this._root;if(e==null){for(var t=this.dom.parentNode;t;t=t.parentNode)if(t.nodeType==9||t.nodeType==11&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=function(){return document.getSelection()}),this._root=t}return e||document};Lt.prototype.posAtCoords=function(e){return CF(this,e)};Lt.prototype.coordsAtPos=function(e,t){return t===void 0&&(t=1),EE(this,e,t)};Lt.prototype.domAtPos=function(e,t){return t===void 0&&(t=0),this.docView.domFromPos(e,t)};Lt.prototype.nodeDOM=function(e){var t=this.docView.descAt(e);return t?t.nodeDOM:null};Lt.prototype.posAtDOM=function(e,t,n){n===void 0&&(n=-1);var r=this.docView.posFromDOM(e,t,n);if(r==null)throw new RangeError("DOM position not inside the editor");return r};Lt.prototype.endOfTextblock=function(e,t){return MF(this,t||this.state,e)};Lt.prototype.destroy=function(){!this.docView||(lR(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],hv(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)};dp.isDestroyed.get=function(){return this.docView==null};Lt.prototype.dispatchEvent=function(e){return fR(this,e)};Lt.prototype.dispatch=function(e){var t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))};Object.defineProperties(Lt.prototype,dp);function gk(e){var t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(e.editable),t.translate="no",e.someProp("attributes",function(n){if(typeof n=="function"&&(n=n(e.state)),n)for(var r in n)r=="class"&&(t.class+=" "+n[r]),r=="style"?t.style=(t.style?t.style+";":"")+n[r]:!t[r]&&r!="contenteditable"&&r!="nodeName"&&(t[r]=String(n[r]))}),[Yt.node(0,e.state.doc.content.size,t)]}function vk(e){if(e.markCursor){var t=document.createElement("img");t.className="ProseMirror-separator",t.setAttribute("mark-placeholder","true"),e.cursorWrapper={dom:t,deco:Yt.widget(e.state.selection.head,t,{raw:!0,marks:e.markCursor})}}else e.cursorWrapper=null}function yk(e){return!e.someProp("editable",function(t){return t(e.state)===!1})}function CR(e,t){var n=Math.min(e.$anchor.sharedDepth(e.head),t.$anchor.sharedDepth(t.head));return e.$anchor.start(n)!=t.$anchor.start(n)}function _k(e){var t={};return e.someProp("nodeViews",function(n){for(var r in n)Object.prototype.hasOwnProperty.call(t,r)||(t[r]=n[r])}),t}function OR(e,t){var n=0,r=0;for(var o in e){if(e[o]!=t[o])return!0;n++}for(var a in t)r++;return n!=r}function bk(e){if(e.spec.state||e.spec.filterTransaction||e.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}v();v();var Pi={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",229:"q"},hp={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"',229:"Q"},wk=typeof navigator!="undefined"&&/Chrome\/(\d+)/.exec(navigator.userAgent),TR=typeof navigator!="undefined"&&/Apple Computer/.test(navigator.vendor),AR=typeof navigator!="undefined"&&/Gecko\/\d+/.test(navigator.userAgent),xk=typeof navigator!="undefined"&&/Mac/.test(navigator.platform),IR=typeof navigator!="undefined"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),MR=wk&&(xk||+wk[1]<57)||AR&&xk;for(Ut=0;Ut<10;Ut++)Pi[48+Ut]=Pi[96+Ut]=String(Ut);var Ut;for(Ut=1;Ut<=24;Ut++)Pi[Ut+111]="F"+Ut;var Ut;for(Ut=65;Ut<=90;Ut++)Pi[Ut]=String.fromCharCode(Ut+32),hp[Ut]=String.fromCharCode(Ut);var Ut;for(mp in Pi)hp.hasOwnProperty(mp)||(hp[mp]=Pi[mp]);var mp;function Sk(e){var t=MR&&(e.ctrlKey||e.altKey||e.metaKey)||(TR||IR)&&e.shiftKey&&e.key&&e.key.length==1,n=!t&&e.key||(e.shiftKey?hp:Pi)[e.keyCode]||e.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}var PR=typeof navigator!="undefined"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function jR(e){var t=e.split(/-(?!$)/),n=t[t.length-1];n=="Space"&&(n=" ");for(var r,o,a,s,u=0;u<t.length-1;u++){var l=t[u];if(/^(cmd|meta|m)$/i.test(l))s=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))o=!0;else if(/^s(hift)?$/i.test(l))a=!0;else if(/^mod$/i.test(l))PR?s=!0:o=!0;else throw new Error("Unrecognized modifier name: "+l)}return r&&(n="Alt-"+n),o&&(n="Ctrl-"+n),s&&(n="Meta-"+n),a&&(n="Shift-"+n),n}function FR(e){var t=Object.create(null);for(var n in e)t[jR(n)]=e[n];return t}function mv(e,t,n){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),n!==!1&&t.shiftKey&&(e="Shift-"+e),e}function Ek(e){return new vt({props:{handleKeyDown:RR(e)}})}function RR(e){var t=FR(e);return function(n,r){var o=Sk(r),a=o.length==1&&o!=" ",s,u=t[mv(o,r,!a)];if(u&&u(n.state,n.dispatch,n))return!0;if(a&&(r.shiftKey||r.altKey||r.metaKey||o.charCodeAt(0)>127)&&(s=Pi[r.keyCode])&&s!=o){var l=t[mv(s,r,!0)];if(l&&l(n.state,n.dispatch,n))return!0}else if(a&&r.shiftKey){var c=t[mv(o,r,!0)];if(c&&c(n.state,n.dispatch,n))return!0}return!1}}function NR(e){return Object.prototype.toString.call(e).slice(8,-1)}function gv(e){return NR(e)!=="Object"?!1:e.constructor===Object&&Object.getPrototypeOf(e)===Object.prototype}function gp(e,t){let n={...e};return gv(e)&&gv(t)&&Object.keys(t).forEach(r=>{gv(t[r])?r in e?n[r]=gp(e[r],t[r]):Object.assign(n,{[r]:t[r]}):Object.assign(n,{[r]:t[r]})}),n}function kk(e){return typeof e=="function"}function De(e,t=void 0,...n){return kk(e)?t?e.bind(t)(...n):e(...n):e}function ie(e,t,n){return e.config[t]===void 0&&e.parent?ie(e.parent,t,n):typeof e.config[t]=="function"?e.config[t].bind({...n,parent:e.parent?ie(e.parent,t,n):null}):e.config[t]}var Dr=class{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=De(ie(this,"addOptions",{name:this.name}))),this.storage=De(ie(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Dr(e)}configure(e={}){let t=this.extend();return t.options=gp(this.options,e),t.storage=De(ie(t,"addStorage",{name:t.name,options:t.options})),t}extend(e={}){let t=new Dr(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=De(ie(t,"addOptions",{name:t.name})),t.storage=De(ie(t,"addStorage",{name:t.name,options:t.options})),t}};function Dk(e,t,n){let{from:r,to:o}=t,{blockSeparator:a=`

`,textSerializers:s={}}=n||{},u="",l=!0;return e.nodesBetween(r,o,(c,m,me,xe)=>{var Ne;let He=s==null?void 0:s[c.type.name];He?(c.isBlock&&!l&&(u+=a,l=!0),u+=He({node:c,pos:m,parent:me,index:xe})):c.isText?(u+=(Ne=c==null?void 0:c.text)===null||Ne===void 0?void 0:Ne.slice(Math.max(r,m)-m,o-m),l=!1):c.isBlock&&!l&&(u+=a,l=!0)}),u}function Ck(e){return Object.fromEntries(Object.entries(e.nodes).filter(([,t])=>t.spec.toText).map(([t,n])=>[t,n.spec.toText]))}var LR=Dr.create({name:"clipboardTextSerializer",addProseMirrorPlugins(){return[new vt({key:new yt("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{let{editor:e}=this,{state:t,schema:n}=e,{doc:r,selection:o}=t,{ranges:a}=o,s=Math.min(...a.map(c=>c.$from.pos)),u=Math.max(...a.map(c=>c.$to.pos)),l=Ck(n);return Dk(r,{from:s,to:u},{textSerializers:l})}}})]}}),$R=()=>({editor:e,view:t})=>(requestAnimationFrame(()=>{e.isDestroyed||t.dom.blur()}),!0),BR=Object.freeze({__proto__:null,blur:$R}),qR=(e=!1)=>({commands:t})=>t.setContent("",e),VR=Object.freeze({__proto__:null,clearContent:qR}),zR=()=>({state:e,tr:t,dispatch:n})=>{let{selection:r}=t,{ranges:o}=r;return n&&o.forEach(({$from:a,$to:s})=>{e.doc.nodesBetween(a.pos,s.pos,(u,l)=>{if(u.type.isText)return;let{doc:c,mapping:m}=t,me=c.resolve(m.map(l)),xe=c.resolve(m.map(l+u.nodeSize)),Ne=me.blockRange(xe);if(!Ne)return;let He=Ii(Ne);if(u.type.isTextblock){let{defaultType:Ye}=me.parent.contentMatchAt(me.index());t.setNodeMarkup(Ne.start,Ye)}(He||He===0)&&t.lift(Ne,He)})}),!0},UR=Object.freeze({__proto__:null,clearNodes:zR}),WR=e=>t=>e(t),HR=Object.freeze({__proto__:null,command:WR}),KR=()=>({state:e,dispatch:t})=>Fg(e,t),GR=Object.freeze({__proto__:null,createParagraphNear:KR});function Wt(e,t){if(typeof e=="string"){if(!t.nodes[e])throw Error(`There is no node type named '${e}'. Maybe you forgot to add the extension?`);return t.nodes[e]}return e}var QR=e=>({tr:t,state:n,dispatch:r})=>{let o=Wt(e,n.schema),a=t.selection.$anchor;for(let s=a.depth;s>0;s-=1)if(a.node(s).type===o){if(r){let u=a.before(s),l=a.after(s);t.delete(u,l).scrollIntoView()}return!0}return!1},YR=Object.freeze({__proto__:null,deleteNode:QR}),JR=e=>({tr:t,dispatch:n})=>{let{from:r,to:o}=e;return n&&t.delete(r,o),!0},XR=Object.freeze({__proto__:null,deleteRange:JR}),ZR=()=>({state:e,dispatch:t})=>tp(e,t),eN=Object.freeze({__proto__:null,deleteSelection:ZR}),tN=()=>({commands:e})=>e.keyboardShortcut("Enter"),rN=Object.freeze({__proto__:null,enter:tN}),nN=()=>({state:e,dispatch:t})=>jg(e,t),iN=Object.freeze({__proto__:null,exitCode:nN});function vo(e,t){if(typeof e=="string"){if(!t.marks[e])throw Error(`There is no mark type named '${e}'. Maybe you forgot to add the extension?`);return t.marks[e]}return e}function vv(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function vp(e,t,n={strict:!0}){let r=Object.keys(t);return r.length?r.every(o=>n.strict?t[o]===e[o]:vv(t[o])?t[o].test(e[o]):t[o]===e[o]):!0}function yv(e,t,n={}){return e.find(r=>r.type===t&&vp(r.attrs,n))}function oN(e,t,n={}){return!!yv(e,t,n)}function _v(e,t,n={}){if(!e||!t)return;let r=e.parent.childAfter(e.parentOffset);if(!r.node)return;let o=yv(r.node.marks,t,n);if(!o)return;let a=e.index(),s=e.start()+r.offset,u=a+1,l=s+r.node.nodeSize;for(yv(r.node.marks,t,n);a>0&&o.isInSet(e.parent.child(a-1).marks);)a-=1,s-=e.parent.child(a).nodeSize;for(;u<e.parent.childCount&&oN(e.parent.child(u).marks,t,n);)l+=e.parent.child(u).nodeSize,u+=1;return{from:s,to:l}}var aN=(e,t={})=>({tr:n,state:r,dispatch:o})=>{let a=vo(e,r.schema),{doc:s,selection:u}=n,{$from:l,from:c,to:m}=u;if(o){let me=_v(l,a,t);if(me&&me.from<=c&&me.to>=m){let xe=Re.create(s,me.from,me.to);n.setSelection(xe)}}return!0},sN=Object.freeze({__proto__:null,extendMarkRange:aN}),uN=e=>t=>{let n=typeof e=="function"?e(t):e;for(let r=0;r<n.length;r+=1)if(n[r](t))return!0;return!1},lN=Object.freeze({__proto__:null,first:uN});function cN(e){var t;return((t=e.constructor)===null||t===void 0?void 0:t.toString().substring(0,5))==="class"}function bv(e){return e&&typeof e=="object"&&!Array.isArray(e)&&!cN(e)}function wv(e){return bv(e)&&e instanceof Re}function fN(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}function pa(e=0,t=0,n=0){return Math.min(Math.max(e,t),n)}function Ok(e,t=null){if(!t)return null;if(t==="start"||t===!0)return ve.atStart(e);if(t==="end")return ve.atEnd(e);if(t==="all")return Re.create(e,0,e.content.size);let n=ve.atStart(e).from,r=ve.atEnd(e).to,o=pa(t,n,r),a=pa(t,n,r);return Re.create(e,o,a)}var pN=(e=null,t)=>({editor:n,view:r,tr:o,dispatch:a})=>{t={scrollIntoView:!0,...t};let s=()=>{fN()&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),t!=null&&t.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&e===null||e===!1)return!0;if(a&&e===null&&!wv(n.state.selection))return s(),!0;let u=Ok(n.state.doc,e)||n.state.selection,l=n.state.selection.eq(u);return a&&(l||o.setSelection(u),l&&o.storedMarks&&o.setStoredMarks(o.storedMarks),s()),!0},dN=Object.freeze({__proto__:null,focus:pN}),hN=(e,t)=>n=>e.every((r,o)=>t(r,{...n,index:o})),mN=Object.freeze({__proto__:null,forEach:hN}),gN=(e,t)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},e,t),vN=Object.freeze({__proto__:null,insertContent:gN});function Tk(e){let t=`<body>${e}</body>`;return new window.DOMParser().parseFromString(t,"text/html").body}function yp(e,t,n){if(n={slice:!0,parseOptions:{},...n},typeof e=="object"&&e!==null)try{return Array.isArray(e)?q.fromArray(e.map(r=>t.nodeFromJSON(r))):t.nodeFromJSON(e)}catch(r){return console.warn("[tiptap warn]: Invalid content.","Passed value:",e,"Error:",r),yp("",t,n)}if(typeof e=="string"){let r=Yr.fromSchema(t);return n.slice?r.parseSlice(Tk(e),n.parseOptions).content:r.parse(Tk(e),n.parseOptions)}return yp("",t,n)}function yN(e,t,n){let r=e.steps.length-1;if(r<t)return;let o=e.steps[r];if(!(o instanceof Sn||o instanceof nr))return;let a=e.mapping.maps[r],s=0;a.forEach((u,l,c,m)=>{s===0&&(s=m)}),e.setSelection(ve.near(e.doc.resolve(s),n))}var _N=e=>e.toString().startsWith("<"),bN=(e,t,n)=>({tr:r,dispatch:o,editor:a})=>{if(o){n={parseOptions:{},updateSelection:!0,...n};let s=yp(t,a.schema,{parseOptions:{preserveWhitespace:"full",...n.parseOptions}});if(s.toString()==="<>")return!0;let{from:u,to:l}=typeof e=="number"?{from:e,to:e}:e,c=!0;if((_N(s)?s:[s]).forEach(m=>{m.check(),c=c?m.isBlock:!1}),u===l&&c){let{parent:m}=r.doc.resolve(u);m.isTextblock&&!m.type.spec.code&&!m.childCount&&(u-=1,l+=1)}r.replaceWith(u,l,s),n.updateSelection&&yN(r,r.steps.length-1,-1)}return!0},wN=Object.freeze({__proto__:null,insertContentAt:bN}),xN=()=>({state:e,dispatch:t})=>Og(e,t),SN=Object.freeze({__proto__:null,joinBackward:xN}),EN=()=>({state:e,dispatch:t})=>Ag(e,t),kN=Object.freeze({__proto__:null,joinForward:EN}),DN=typeof navigator!="undefined"?/Mac/.test(navigator.platform):!1;function CN(e){let t=e.split(/-(?!$)/),n=t[t.length-1];n==="Space"&&(n=" ");let r,o,a,s;for(let u=0;u<t.length-1;u+=1){let l=t[u];if(/^(cmd|meta|m)$/i.test(l))s=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))o=!0;else if(/^s(hift)?$/i.test(l))a=!0;else if(/^mod$/i.test(l))DN?s=!0:o=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(n=`Alt-${n}`),o&&(n=`Ctrl-${n}`),s&&(n=`Meta-${n}`),a&&(n=`Shift-${n}`),n}var ON=e=>({editor:t,view:n,tr:r,dispatch:o})=>{let a=CN(e).split(/-(?!$)/),s=a.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),u=new KeyboardEvent("keydown",{key:s==="Space"?" ":s,altKey:a.includes("Alt"),ctrlKey:a.includes("Ctrl"),metaKey:a.includes("Meta"),shiftKey:a.includes("Shift"),bubbles:!0,cancelable:!0}),l=t.captureTransaction(()=>{n.someProp("handleKeyDown",c=>c(n,u))});return l==null||l.steps.forEach(c=>{let m=c.map(r.mapping);m&&o&&r.maybeStep(m)}),!0},TN=Object.freeze({__proto__:null,keyboardShortcut:ON});function wl(e,t,n={}){let{from:r,to:o,empty:a}=e.selection,s=t?Wt(t,e.schema):null,u=[];e.doc.nodesBetween(r,o,(m,me)=>{if(m.isText)return;let xe=Math.max(r,me),Ne=Math.min(o,me+m.nodeSize);u.push({node:m,from:xe,to:Ne})});let l=o-r,c=u.filter(m=>s?s.name===m.node.type.name:!0).filter(m=>vp(m.node.attrs,n,{strict:!1}));return a?!!c.length:c.reduce((m,me)=>m+me.to-me.from,0)>=l}var AN=(e,t={})=>({state:n,dispatch:r})=>{let o=Wt(e,n.schema);return wl(n,o,t)?lE(n,r):!1},IN=Object.freeze({__proto__:null,lift:AN}),MN=()=>({state:e,dispatch:t})=>Rg(e,t),PN=Object.freeze({__proto__:null,liftEmptyBlock:MN}),jN=e=>({state:t,dispatch:n})=>{let r=Wt(e,t.schema);return mE(r)(t,n)},FN=Object.freeze({__proto__:null,liftListItem:jN}),RN=()=>({state:e,dispatch:t})=>Mg(e,t),NN=Object.freeze({__proto__:null,newlineInCode:RN});function _p(e,t){return t.nodes[e]?"node":t.marks[e]?"mark":null}function Ak(e,t){let n=typeof t=="string"?[t]:t;return Object.keys(e).reduce((r,o)=>(n.includes(o)||(r[o]=e[o]),r),{})}var LN=(e,t)=>({tr:n,state:r,dispatch:o})=>{let a=null,s=null,u=_p(typeof e=="string"?e:e.name,r.schema);return u?(u==="node"&&(a=Wt(e,r.schema)),u==="mark"&&(s=vo(e,r.schema)),o&&n.selection.ranges.forEach(l=>{r.doc.nodesBetween(l.$from.pos,l.$to.pos,(c,m)=>{a&&a===c.type&&n.setNodeMarkup(m,void 0,Ak(c.attrs,t)),s&&c.marks.length&&c.marks.forEach(me=>{s===me.type&&n.addMark(m,m+c.nodeSize,s.create(Ak(me.attrs,t)))})})}),!0):!1},$N=Object.freeze({__proto__:null,resetAttributes:LN}),BN=()=>({tr:e,dispatch:t})=>(t&&e.scrollIntoView(),!0),qN=Object.freeze({__proto__:null,scrollIntoView:BN}),VN=()=>({tr:e,commands:t})=>t.setTextSelection({from:0,to:e.doc.content.size}),zN=Object.freeze({__proto__:null,selectAll:VN}),UN=()=>({state:e,dispatch:t})=>Tg(e,t),WN=Object.freeze({__proto__:null,selectNodeBackward:UN}),HN=()=>({state:e,dispatch:t})=>Ig(e,t),KN=Object.freeze({__proto__:null,selectNodeForward:HN}),GN=()=>({state:e,dispatch:t})=>cE(e,t),QN=Object.freeze({__proto__:null,selectParentNode:GN});function Ik(e,t,n={}){return yp(e,t,{slice:!1,parseOptions:n})}var YN=(e,t=!1,n={})=>({tr:r,editor:o,dispatch:a})=>{let{doc:s}=r,u=Ik(e,o.schema,n),l=Re.create(s,0,s.content.size);return a&&r.setSelection(l).replaceSelectionWith(u,!1).setMeta("preventUpdate",!t),!0},JN=Object.freeze({__proto__:null,setContent:YN});function Mk(e,t){let n=vo(t,e.schema),{from:r,to:o,empty:a}=e.selection,s=[];a?(e.storedMarks&&s.push(...e.storedMarks),s.push(...e.selection.$head.marks())):e.doc.nodesBetween(r,o,l=>{s.push(...l.marks)});let u=s.find(l=>l.type.name===n.name);return u?{...u.attrs}:{}}var XN=(e,t={})=>({tr:n,state:r,dispatch:o})=>{let{selection:a}=n,{empty:s,ranges:u}=a,l=vo(e,r.schema);if(o)if(s){let c=Mk(r,l);n.addStoredMark(l.create({...c,...t}))}else u.forEach(c=>{let m=c.$from.pos,me=c.$to.pos;r.doc.nodesBetween(m,me,(xe,Ne)=>{let He=Math.max(Ne,m),Ye=Math.min(Ne+xe.nodeSize,me);xe.marks.find(Je=>Je.type===l)?xe.marks.forEach(Je=>{l===Je.type&&n.addMark(He,Ye,l.create({...Je.attrs,...t}))}):n.addMark(He,Ye,l.create(t))})});return!0},ZN=Object.freeze({__proto__:null,setMark:XN}),eL=(e,t)=>({tr:n})=>(n.setMeta(e,t),!0),tL=Object.freeze({__proto__:null,setMeta:eL}),rL=(e,t={})=>({state:n,dispatch:r,chain:o})=>{let a=Wt(e,n.schema);return a.isTextblock?o().command(({commands:s})=>Ng(a,t)(n)?!0:s.clearNodes()).command(({state:s})=>Ng(a,t)(s,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},nL=Object.freeze({__proto__:null,setNode:rL}),iL=e=>({tr:t,dispatch:n})=>{if(n){let{doc:r}=t,o=ve.atStart(r).from,a=ve.atEnd(r).to,s=pa(e,o,a),u=ye.create(r,s);t.setSelection(u)}return!0},oL=Object.freeze({__proto__:null,setNodeSelection:iL}),aL=e=>({tr:t,dispatch:n})=>{if(n){let{doc:r}=t,{from:o,to:a}=typeof e=="number"?{from:e,to:e}:e,s=ve.atStart(r).from,u=ve.atEnd(r).to,l=pa(o,s,u),c=pa(a,s,u),m=Re.create(r,l,c);t.setSelection(m)}return!0},sL=Object.freeze({__proto__:null,setTextSelection:aL}),uL=e=>({state:t,dispatch:n})=>{let r=Wt(e,t.schema);return gE(r)(t,n)},lL=Object.freeze({__proto__:null,sinkListItem:uL});function bp(e,t,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{let o=e.find(a=>a.type===t&&a.name===r);return o?o.attribute.keepOnSplit:!1}))}function cL(e){for(let t=0;t<e.edgeCount;t+=1){let{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function Pk(e,t){let n=e.storedMarks||e.selection.$to.parentOffset&&e.selection.$from.marks();if(n){let r=n.filter(o=>t==null?void 0:t.includes(o.type.name));e.tr.ensureMarks(r)}}var fL=({keepMarks:e=!0}={})=>({tr:t,state:n,dispatch:r,editor:o})=>{let{selection:a,doc:s}=t,{$from:u,$to:l}=a,c=o.extensionManager.attributes,m=bp(c,u.node().type.name,u.node().attrs);if(a instanceof ye&&a.node.isBlock)return!u.parentOffset||!an(s,u.pos)?!1:(r&&(e&&Pk(n,o.extensionManager.splittableMarks),t.split(u.pos).scrollIntoView()),!0);if(!u.parent.isBlock)return!1;if(r){let me=l.parentOffset===l.parent.content.size;a instanceof Re&&t.deleteSelection();let xe=u.depth===0?void 0:cL(u.node(-1).contentMatchAt(u.indexAfter(-1))),Ne=me&&xe?[{type:xe,attrs:m}]:void 0,He=an(t.doc,t.mapping.map(u.pos),1,Ne);if(!Ne&&!He&&an(t.doc,t.mapping.map(u.pos),1,xe?[{type:xe}]:void 0)&&(He=!0,Ne=xe?[{type:xe,attrs:m}]:void 0),He&&(t.split(t.mapping.map(u.pos),1,Ne),xe&&!me&&!u.parentOffset&&u.parent.type!==xe)){let Ye=t.mapping.map(u.before()),Je=t.doc.resolve(Ye);u.node(-1).canReplaceWith(Je.index(),Je.index()+1,xe)&&t.setNodeMarkup(t.mapping.map(u.before()),xe)}e&&Pk(n,o.extensionManager.splittableMarks),t.scrollIntoView()}return!0},pL=Object.freeze({__proto__:null,splitBlock:fL}),dL=e=>({tr:t,state:n,dispatch:r,editor:o})=>{var a;let s=Wt(e,n.schema),{$from:u,$to:l}=n.selection,c=n.selection.node;if(c&&c.isBlock||u.depth<2||!u.sameParent(l))return!1;let m=u.node(-1);if(m.type!==s)return!1;let me=o.extensionManager.attributes;if(u.parent.content.size===0&&u.node(-1).childCount===u.indexAfter(-1)){if(u.depth===2||u.node(-3).type!==s||u.index(-2)!==u.node(-2).childCount-1)return!1;if(r){let Je=q.empty,vn=u.index(-1)?1:u.index(-2)?2:3;for(let Hs=u.depth-vn;Hs>=u.depth-3;Hs-=1)Je=q.from(u.node(Hs).copy(Je));let La=u.indexAfter(-1)<u.node(-2).childCount?1:u.indexAfter(-2)<u.node(-3).childCount?2:3,sr=bp(me,u.node().type.name,u.node().attrs),Zr=((a=s.contentMatch.defaultType)===null||a===void 0?void 0:a.createAndFill(sr))||void 0;Je=Je.append(q.from(s.createAndFill(null,Zr)||void 0));let zs=u.before(u.depth-(vn-1));t.replace(zs,u.after(-La),new Y(Je,4-vn,0));let za=-1;t.doc.nodesBetween(zs,t.doc.content.size,(Hs,lc)=>{if(za>-1)return!1;Hs.isTextblock&&Hs.content.size===0&&(za=lc+1)}),za>-1&&t.setSelection(Re.near(t.doc.resolve(za))),t.scrollIntoView()}return!0}let xe=l.pos===u.end()?m.contentMatchAt(0).defaultType:null,Ne=bp(me,m.type.name,m.attrs),He=bp(me,u.node().type.name,u.node().attrs);t.delete(u.pos,l.pos);let Ye=xe?[{type:s,attrs:Ne},{type:xe,attrs:He}]:[{type:s,attrs:Ne}];return an(t.doc,u.pos,2)?(r&&t.split(u.pos,2,Ye).scrollIntoView(),!0):!1},hL=Object.freeze({__proto__:null,splitListItem:dL});function mL(e,t){for(let n=e.depth;n>0;n-=1){let r=e.node(n);if(t(r))return{pos:n>0?e.before(n):0,start:e.start(n),depth:n,node:r}}}function xl(e){return t=>mL(t.$from,e)}function wp(e){let t=e.filter(o=>o.type==="extension"),n=e.filter(o=>o.type==="node"),r=e.filter(o=>o.type==="mark");return{baseExtensions:t,nodeExtensions:n,markExtensions:r}}function xp(e,t){let{nodeExtensions:n}=wp(t),r=n.find(s=>s.name===e);if(!r)return!1;let o={name:r.name,options:r.options,storage:r.storage},a=De(ie(r,"group",o));return typeof a!="string"?!1:a.split(" ").includes("list")}var jk=(e,t)=>{let n=xl(a=>a.type===t)(e.selection);if(!n)return!0;let r=e.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;let o=e.doc.nodeAt(r);return n.node.type===(o==null?void 0:o.type)&&aa(e.doc,n.pos)&&e.join(n.pos),!0},Fk=(e,t)=>{let n=xl(a=>a.type===t)(e.selection);if(!n)return!0;let r=e.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;let o=e.doc.nodeAt(r);return n.node.type===(o==null?void 0:o.type)&&aa(e.doc,r)&&e.join(r),!0},gL=(e,t)=>({editor:n,tr:r,state:o,dispatch:a,chain:s,commands:u,can:l})=>{let{extensions:c}=n.extensionManager,m=Wt(e,o.schema),me=Wt(t,o.schema),{selection:xe}=o,{$from:Ne,$to:He}=xe,Ye=Ne.blockRange(He);if(!Ye)return!1;let Je=xl(vn=>xp(vn.type.name,c))(xe);if(Ye.depth>=1&&Je&&Ye.depth-Je.depth<=1){if(Je.node.type===m)return u.liftListItem(me);if(xp(Je.node.type.name,c)&&m.validContent(Je.node.content)&&a)return s().command(()=>(r.setNodeMarkup(Je.pos,m),!0)).command(()=>jk(r,m)).command(()=>Fk(r,m)).run()}return s().command(()=>l().wrapInList(m)?!0:u.clearNodes()).wrapInList(m).command(()=>jk(r,m)).command(()=>Fk(r,m)).run()},vL=Object.freeze({__proto__:null,toggleList:gL});function xv(e,t,n={}){let{empty:r,ranges:o}=e.selection,a=t?vo(t,e.schema):null;if(r)return!!(e.storedMarks||e.selection.$from.marks()).filter(m=>a?a.name===m.type.name:!0).find(m=>vp(m.attrs,n,{strict:!1}));let s=0,u=[];if(o.forEach(({$from:m,$to:me})=>{let xe=m.pos,Ne=me.pos;e.doc.nodesBetween(xe,Ne,(He,Ye)=>{if(!He.isText&&!He.marks.length)return;let Je=Math.max(xe,Ye),vn=Math.min(Ne,Ye+He.nodeSize);s+=vn-Je,u.push(...He.marks.map(La=>({mark:La,from:Je,to:vn})))})}),s===0)return!1;let l=u.filter(m=>a?a.name===m.mark.type.name:!0).filter(m=>vp(m.mark.attrs,n,{strict:!1})).reduce((m,me)=>m+me.to-me.from,0),c=u.filter(m=>a?m.mark.type!==a&&m.mark.type.excludes(a):!0).reduce((m,me)=>m+me.to-me.from,0);return(l>0?l+c:l)>=s}var yL=(e,t={},n={})=>({state:r,commands:o})=>{let{extendEmptyMarkRange:a=!1}=n,s=vo(e,r.schema);return xv(r,s,t)?o.unsetMark(s,{extendEmptyMarkRange:a}):o.setMark(s,t)},_L=Object.freeze({__proto__:null,toggleMark:yL}),bL=(e,t,n={})=>({state:r,commands:o})=>{let a=Wt(e,r.schema),s=Wt(t,r.schema);return wl(r,a,n)?o.setNode(s):o.setNode(a,n)},wL=Object.freeze({__proto__:null,toggleNode:bL}),xL=(e,t={})=>({state:n,commands:r})=>{let o=Wt(e,n.schema);return wl(n,o,t)?r.lift(o):r.wrapIn(o,t)},SL=Object.freeze({__proto__:null,toggleWrap:xL}),EL=()=>({state:e,dispatch:t})=>{let n=e.plugins;for(let r=0;r<n.length;r+=1){let o=n[r],a;if(o.spec.isInputRules&&(a=o.getState(e))){if(t){let s=e.tr,u=a.transform;for(let l=u.steps.length-1;l>=0;l-=1)s.step(u.steps[l].invert(u.docs[l]));if(a.text){let l=s.doc.resolve(a.from).marks();s.replaceWith(a.from,a.to,e.schema.text(a.text,l))}else s.delete(a.from,a.to)}return!0}}return!1},kL=Object.freeze({__proto__:null,undoInputRule:EL}),DL=()=>({tr:e,dispatch:t})=>{let{selection:n}=e,{empty:r,ranges:o}=n;return r||t&&o.forEach(a=>{e.removeMark(a.$from.pos,a.$to.pos)}),!0},CL=Object.freeze({__proto__:null,unsetAllMarks:DL}),OL=(e,t={})=>({tr:n,state:r,dispatch:o})=>{var a;let{extendEmptyMarkRange:s=!1}=t,{selection:u}=n,l=vo(e,r.schema),{$from:c,empty:m,ranges:me}=u;if(!o)return!0;if(m&&s){let{from:xe,to:Ne}=u,He=(a=c.marks().find(Je=>Je.type===l))===null||a===void 0?void 0:a.attrs,Ye=_v(c,l,He);Ye&&(xe=Ye.from,Ne=Ye.to),n.removeMark(xe,Ne,l)}else me.forEach(xe=>{n.removeMark(xe.$from.pos,xe.$to.pos,l)});return n.removeStoredMark(l),!0},TL=Object.freeze({__proto__:null,unsetMark:OL}),AL=(e,t={})=>({tr:n,state:r,dispatch:o})=>{let a=null,s=null,u=_p(typeof e=="string"?e:e.name,r.schema);return u?(u==="node"&&(a=Wt(e,r.schema)),u==="mark"&&(s=vo(e,r.schema)),o&&n.selection.ranges.forEach(l=>{let c=l.$from.pos,m=l.$to.pos;r.doc.nodesBetween(c,m,(me,xe)=>{a&&a===me.type&&n.setNodeMarkup(xe,void 0,{...me.attrs,...t}),s&&me.marks.length&&me.marks.forEach(Ne=>{if(s===Ne.type){let He=Math.max(xe,c),Ye=Math.min(xe+me.nodeSize,m);n.addMark(He,Ye,s.create({...Ne.attrs,...t}))}})})}),!0):!1},IL=Object.freeze({__proto__:null,updateAttributes:AL}),ML=(e,t={})=>({state:n,dispatch:r})=>{let o=Wt(e,n.schema);return pE(o,t)(n,r)},PL=Object.freeze({__proto__:null,wrapIn:ML}),jL=(e,t={})=>({state:n,dispatch:r})=>{let o=Wt(e,n.schema);return hE(o,t)(n,r)},FL=Object.freeze({__proto__:null,wrapInList:jL}),RL=Dr.create({name:"commands",addCommands(){return{...BR,...VR,...UR,...HR,...GR,...YR,...XR,...eN,...rN,...iN,...sN,...lN,...dN,...mN,...vN,...wN,...SN,...kN,...TN,...IN,...PN,...FN,...NN,...$N,...qN,...zN,...WN,...KN,...QN,...JN,...ZN,...tL,...nL,...oL,...sL,...lL,...pL,...hL,...vL,..._L,...wL,...SL,...kL,...CL,...TL,...IL,...PL,...FL}}}),NL=Dr.create({name:"editable",addProseMirrorPlugins(){return[new vt({key:new yt("editable"),props:{editable:()=>this.editor.options.editable}})]}}),LL=Dr.create({name:"focusEvents",addProseMirrorPlugins(){let{editor:e}=this;return[new vt({key:new yt("focusEvents"),props:{handleDOMEvents:{focus:(t,n)=>{e.isFocused=!0;let r=e.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1},blur:(t,n)=>{e.isFocused=!1;let r=e.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1}}}})]}});function Sp(e){let{state:t,transaction:n}=e,{selection:r}=n,{doc:o}=n,{storedMarks:a}=n;return{...t,schema:t.schema,plugins:t.plugins,apply:t.apply.bind(t),applyTransaction:t.applyTransaction.bind(t),reconfigure:t.reconfigure.bind(t),toJSON:t.toJSON.bind(t),get storedMarks(){return a},get selection(){return r},get doc(){return o},get tr(){return r=n.selection,o=n.doc,a=n.storedMarks,n}}}var Sl=class{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){let{rawCommands:e,editor:t,state:n}=this,{view:r}=t,{tr:o}=n,a=this.buildProps(o);return Object.fromEntries(Object.entries(e).map(([s,u])=>[s,(...l)=>{let c=u(...l)(a);return!o.getMeta("preventDispatch")&&!this.hasCustomState&&r.dispatch(o),c}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){let{rawCommands:n,editor:r,state:o}=this,{view:a}=r,s=[],u=!!e,l=e||o.tr,c=()=>(!u&&t&&!l.getMeta("preventDispatch")&&!this.hasCustomState&&a.dispatch(l),s.every(me=>me===!0)),m={...Object.fromEntries(Object.entries(n).map(([me,xe])=>[me,(...Ne)=>{let He=this.buildProps(l,t),Ye=xe(...Ne)(He);return s.push(Ye),m}])),run:c};return m}createCan(e){let{rawCommands:t,state:n}=this,r,o=e||n.tr,a=this.buildProps(o,r);return{...Object.fromEntries(Object.entries(t).map(([s,u])=>[s,(...l)=>u(...l)({...a,dispatch:r})])),chain:()=>this.createChain(o,r)}}buildProps(e,t=!0){let{rawCommands:n,editor:r,state:o}=this,{view:a}=r;o.storedMarks&&e.setStoredMarks(o.storedMarks);let s={tr:e,editor:r,view:a,state:Sp({state:o,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(n).map(([u,l])=>[u,(...c)=>l(...c)(s)]))}};return s}},$L=Dr.create({name:"keymap",addKeyboardShortcuts(){let e=()=>this.editor.commands.first(({commands:n})=>[()=>n.undoInputRule(),()=>n.command(({tr:r})=>{let{selection:o,doc:a}=r,{empty:s,$anchor:u}=o,{pos:l,parent:c}=u,m=ve.atStart(a).from===l;return!s||!m||!c.type.isTextblock||c.textContent.length?!1:n.clearNodes()}),()=>n.deleteSelection(),()=>n.joinBackward(),()=>n.selectNodeBackward()]),t=()=>this.editor.commands.first(({commands:n})=>[()=>n.deleteSelection(),()=>n.joinForward(),()=>n.selectNodeForward()]);return{Enter:()=>this.editor.commands.first(({commands:n})=>[()=>n.newlineInCode(),()=>n.createParagraphNear(),()=>n.liftEmptyBlock(),()=>n.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:e,"Mod-Backspace":e,"Shift-Backspace":e,Delete:t,"Mod-Delete":t,"Mod-a":()=>this.editor.commands.selectAll()}},addProseMirrorPlugins(){return[new vt({key:new yt("clearDocument"),appendTransaction:(e,t,n)=>{if(!(e.some(Ne=>Ne.docChanged)&&!t.doc.eq(n.doc)))return;let{empty:r,from:o,to:a}=t.selection,s=ve.atStart(t.doc).from,u=ve.atEnd(t.doc).to,l=o===s&&a===u,c=n.doc.textBetween(0,n.doc.content.size," "," ").length===0;if(r||!l||!c)return;let m=n.tr,me=Sp({state:n,transaction:m}),{commands:xe}=new Sl({editor:this.editor,state:me});if(xe.clearNodes(),!!m.steps.length)return m}})]}}),BL=Dr.create({name:"tabindex",addProseMirrorPlugins(){return[new vt({key:new yt("tabindex"),props:{attributes:{tabindex:"0"}}})]}}),qL=Object.freeze({__proto__:null,ClipboardTextSerializer:LR,Commands:RL,Editable:NL,FocusEvents:LL,Keymap:$L,Tabindex:BL});function VL(e,t){let n=Wt(t,e.schema),{from:r,to:o}=e.selection,a=[];e.doc.nodesBetween(r,o,u=>{a.push(u)});let s=a.reverse().find(u=>u.type.name===n.name);return s?{...s.attrs}:{}}function Sv(e,t){let n=_p(typeof t=="string"?t:t.name,e.schema);return n==="node"?VL(e,t):n==="mark"?Mk(e,t):{}}function zL(e,t,n={}){if(!t)return wl(e,null,n)||xv(e,null,n);let r=_p(t,e.schema);return r==="node"?wl(e,t,n):r==="mark"?xv(e,t,n):!1}function UL(e,t){let n=Qt.fromSchema(t).serializeFragment(e),r=document.implementation.createHTMLDocument().createElement("div");return r.appendChild(n),r.innerHTML}function WL(e,t){let n={from:0,to:e.content.size};return Dk(e,n,t)}function HL(e){var t;let n=(t=e.type.createAndFill())===null||t===void 0?void 0:t.toJSON(),r=e.toJSON();return JSON.stringify(n)===JSON.stringify(r)}function KL(e){let t=document.querySelector("style[data-tiptap-style]");if(t!==null)return t;let n=document.createElement("style");return n.setAttribute("data-tiptap-style",""),n.innerHTML=e,document.getElementsByTagName("head")[0].appendChild(n),n}var Ep=class{constructor(e){this.find=e.find,this.handler=e.handler}},GL=(e,t)=>{if(vv(t))return t.exec(e);let n=t(e);if(!n)return null;let r=[];return r.push(n.text),r.index=n.index,r.input=e,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function Ev(e){var t;let{editor:n,from:r,to:o,text:a,rules:s,plugin:u}=e,{view:l}=n;if(l.composing)return!1;let c=l.state.doc.resolve(r);if(c.parent.type.spec.code||!!(!((t=c.nodeBefore||c.nodeAfter)===null||t===void 0)&&t.marks.find(Ne=>Ne.type.spec.code)))return!1;let m=!1,me=500,xe=c.parent.textBetween(Math.max(0,c.parentOffset-me),c.parentOffset,void 0," ")+a;return s.forEach(Ne=>{if(m)return;let He=GL(xe,Ne.find);if(!He)return;let Ye=l.state.tr,Je=Sp({state:l.state,transaction:Ye}),vn={from:r-(He[0].length-a.length),to:o},{commands:La,chain:sr,can:Zr}=new Sl({editor:n,state:Je});Ne.handler({state:Je,range:vn,match:He,commands:La,chain:sr,can:Zr}),Ye.steps.length&&(Ye.setMeta(u,{transform:Ye,from:r,to:o,text:a}),l.dispatch(Ye),m=!0)}),m}function QL(e){let{editor:t,rules:n}=e,r=new vt({state:{init(){return null},apply(o,a){return o.getMeta(this)||(o.selectionSet||o.docChanged?null:a)}},props:{handleTextInput(o,a,s,u){return Ev({editor:t,from:a,to:s,text:u,rules:n,plugin:r})},handleDOMEvents:{compositionend:o=>(setTimeout(()=>{let{$cursor:a}=o.state.selection;a&&Ev({editor:t,from:a.pos,to:a.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(o,a){if(a.key!=="Enter")return!1;let{$cursor:s}=o.state.selection;return s?Ev({editor:t,from:s.pos,to:s.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function YL(e){return typeof e=="number"}var Rk=class{constructor(e){this.find=e.find,this.handler=e.handler}},JL=(e,t)=>{if(vv(t))return[...e.matchAll(t)];let n=t(e);return n?n.map(r=>{let o=[];return o.push(r.text),o.index=r.index,o.input=e,o.data=r.data,r.replaceWith&&(r.text.includes(r.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),o.push(r.replaceWith)),o}):[]};function XL(e){let{editor:t,state:n,from:r,to:o,rules:a}=e,{commands:s,chain:u,can:l}=new Sl({editor:t,state:n});n.doc.nodesBetween(r,o,(c,m)=>{if(!c.isTextblock||c.type.spec.code)return;let me=Math.max(r,m),xe=Math.min(o,m+c.content.size),Ne=c.textBetween(me-m,xe-m,void 0,"\uFFFC");a.forEach(He=>{JL(Ne,He.find).forEach(Ye=>{if(Ye.index===void 0)return;let Je=me+Ye.index+1,vn=Je+Ye[0].length,La={from:n.tr.mapping.map(Je),to:n.tr.mapping.map(vn)};He.handler({state:n,range:La,match:Ye,commands:s,chain:u,can:l})})})})}function ZL(e){let{editor:t,rules:n}=e,r=!1,o=new vt({props:{handlePaste:(a,s)=>{var u;let l=(u=s.clipboardData)===null||u===void 0?void 0:u.getData("text/html");return r=!!(l!=null&&l.includes("data-pm-slice")),!1}},appendTransaction:(a,s,u)=>{let l=a[0];if(!l.getMeta("paste")||r)return;let{doc:c,before:m}=l,me=m.content.findDiffStart(c.content),xe=m.content.findDiffEnd(c.content);if(!YL(me)||!xe||me===xe.b)return;let Ne=u.tr,He=Sp({state:u,transaction:Ne});if(XL({editor:t,state:He,from:Math.max(me-1,0),to:xe.b,rules:n,plugin:o}),!!Ne.steps.length)return Ne},isPasteRules:!0});return o}function Nk(e){let t=[],{nodeExtensions:n,markExtensions:r}=wp(e),o=[...n,...r],a={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0};return e.forEach(s=>{let u={name:s.name,options:s.options,storage:s.storage},l=ie(s,"addGlobalAttributes",u);!l||l().forEach(c=>{c.types.forEach(m=>{Object.entries(c.attributes).forEach(([me,xe])=>{t.push({type:m,name:me,attribute:{...a,...xe}})})})})}),o.forEach(s=>{let u={name:s.name,options:s.options,storage:s.storage},l=ie(s,"addAttributes",u);if(!l)return;let c=l();Object.entries(c).forEach(([m,me])=>{t.push({type:s.name,name:m,attribute:{...a,...me}})})}),t}function jt(...e){return e.filter(t=>!!t).reduce((t,n)=>{let r={...t};return Object.entries(n).forEach(([o,a])=>{if(!r[o]){r[o]=a;return}o==="class"?r[o]=[r[o],a].join(" "):o==="style"?r[o]=[r[o],a].join("; "):r[o]=a}),r},{})}function kv(e,t){return t.filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(e.attrs)||{}:{[n.name]:e.attrs[n.name]}).reduce((n,r)=>jt(n,r),{})}function e$(e={}){return Object.keys(e).length===0&&e.constructor===Object}function t$(e){return typeof e!="string"?e:e.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(e):e==="true"?!0:e==="false"?!1:e}function Lk(e,t){return e.style?e:{...e,getAttrs:n=>{let r=e.getAttrs?e.getAttrs(n):e.attrs;if(r===!1)return!1;let o=t.filter(a=>a.attribute.rendered).reduce((a,s)=>{let u=s.attribute.parseHTML?s.attribute.parseHTML(n):t$(n.getAttribute(s.name));return bv(u)&&console.warn(`[tiptap warn]: BREAKING CHANGE: "parseHTML" for your attribute "${s.name}" returns an object but should return the value itself. If this is expected you can ignore this message. This warning will be removed in one of the next releases. Further information: https://github.com/ueberdosis/tiptap/issues/1863`),u==null?a:{...a,[s.name]:u}},{});return{...r,...o}}}}function $k(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>t==="attrs"&&e$(n)?!1:n!=null))}function r$(e){var t;let n=Nk(e),{nodeExtensions:r,markExtensions:o}=wp(e),a=(t=r.find(l=>ie(l,"topNode")))===null||t===void 0?void 0:t.name,s=Object.fromEntries(r.map(l=>{let c=n.filter(Je=>Je.type===l.name),m={name:l.name,options:l.options,storage:l.storage},me=e.reduce((Je,vn)=>{let La=ie(vn,"extendNodeSchema",m);return{...Je,...La?La(l):{}}},{}),xe=$k({...me,content:De(ie(l,"content",m)),marks:De(ie(l,"marks",m)),group:De(ie(l,"group",m)),inline:De(ie(l,"inline",m)),atom:De(ie(l,"atom",m)),selectable:De(ie(l,"selectable",m)),draggable:De(ie(l,"draggable",m)),code:De(ie(l,"code",m)),defining:De(ie(l,"defining",m)),isolating:De(ie(l,"isolating",m)),attrs:Object.fromEntries(c.map(Je=>{var vn;return[Je.name,{default:(vn=Je==null?void 0:Je.attribute)===null||vn===void 0?void 0:vn.default}]}))}),Ne=De(ie(l,"parseHTML",m));Ne&&(xe.parseDOM=Ne.map(Je=>Lk(Je,c)));let He=ie(l,"renderHTML",m);He&&(xe.toDOM=Je=>He({node:Je,HTMLAttributes:kv(Je,c)}));let Ye=ie(l,"renderText",m);return Ye&&(xe.toText=Ye),[l.name,xe]})),u=Object.fromEntries(o.map(l=>{let c=n.filter(Ye=>Ye.type===l.name),m={name:l.name,options:l.options,storage:l.storage},me=e.reduce((Ye,Je)=>{let vn=ie(Je,"extendMarkSchema",m);return{...Ye,...vn?vn(l):{}}},{}),xe=$k({...me,inclusive:De(ie(l,"inclusive",m)),excludes:De(ie(l,"excludes",m)),group:De(ie(l,"group",m)),spanning:De(ie(l,"spanning",m)),code:De(ie(l,"code",m)),attrs:Object.fromEntries(c.map(Ye=>{var Je;return[Ye.name,{default:(Je=Ye==null?void 0:Ye.attribute)===null||Je===void 0?void 0:Je.default}]}))}),Ne=De(ie(l,"parseHTML",m));Ne&&(xe.parseDOM=Ne.map(Ye=>Lk(Ye,c)));let He=ie(l,"renderHTML",m);return He&&(xe.toDOM=Ye=>He({mark:Ye,HTMLAttributes:kv(Ye,c)})),[l.name,xe]}));return new uo({topNode:a,nodes:s,marks:u})}function Dv(e,t){return t.nodes[e]||t.marks[e]||null}function Bk(e,t){return Array.isArray(t)?t.some(n=>(typeof n=="string"?n:n.name)===e.name):t}function n$(e){let t=e.filter((n,r)=>e.indexOf(n)!==r);return[...new Set(t)]}var da=class{constructor(e,t){this.splittableMarks=[],this.editor=t,this.extensions=da.resolve(e),this.schema=r$(this.extensions),this.extensions.forEach(n=>{var r;this.editor.extensionStorage[n.name]=n.storage;let o={name:n.name,options:n.options,storage:n.storage,editor:this.editor,type:Dv(n.name,this.schema)};n.type==="mark"&&((r=De(ie(n,"keepOnSplit",o)))!==null&&r!==void 0?r:!0)&&this.splittableMarks.push(n.name);let a=ie(n,"onBeforeCreate",o);a&&this.editor.on("beforeCreate",a);let s=ie(n,"onCreate",o);s&&this.editor.on("create",s);let u=ie(n,"onUpdate",o);u&&this.editor.on("update",u);let l=ie(n,"onSelectionUpdate",o);l&&this.editor.on("selectionUpdate",l);let c=ie(n,"onTransaction",o);c&&this.editor.on("transaction",c);let m=ie(n,"onFocus",o);m&&this.editor.on("focus",m);let me=ie(n,"onBlur",o);me&&this.editor.on("blur",me);let xe=ie(n,"onDestroy",o);xe&&this.editor.on("destroy",xe)})}static resolve(e){let t=da.sort(da.flatten(e)),n=n$(t.map(r=>r.name));return n.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${n.map(r=>`'${r}'`).join(", ")}]. This can lead to issues.`),t}static flatten(e){return e.map(t=>{let n={name:t.name,options:t.options,storage:t.storage},r=ie(t,"addExtensions",n);return r?[t,...this.flatten(r())]:t}).flat(10)}static sort(e){let t=100;return e.sort((n,r)=>{let o=ie(n,"priority")||t,a=ie(r,"priority")||t;return o>a?-1:o<a?1:0})}get commands(){return this.extensions.reduce((e,t)=>{let n={name:t.name,options:t.options,storage:t.storage,editor:this.editor,type:Dv(t.name,this.schema)},r=ie(t,"addCommands",n);return r?{...e,...r()}:e},{})}get plugins(){let{editor:e}=this,t=da.sort([...this.extensions].reverse()),n=[],r=[],o=t.map(a=>{let s={name:a.name,options:a.options,storage:a.storage,editor:e,type:Dv(a.name,this.schema)},u=[],l=ie(a,"addKeyboardShortcuts",s);if(l){let xe=Object.fromEntries(Object.entries(l()).map(([He,Ye])=>[He,()=>Ye({editor:e})])),Ne=Ek(xe);u.push(Ne)}let c=ie(a,"addInputRules",s);Bk(a,e.options.enableInputRules)&&c&&n.push(...c());let m=ie(a,"addPasteRules",s);Bk(a,e.options.enablePasteRules)&&m&&r.push(...m());let me=ie(a,"addProseMirrorPlugins",s);if(me){let xe=me();u.push(...xe)}return u}).flat();return[QL({editor:e,rules:n}),ZL({editor:e,rules:r}),...o]}get attributes(){return Nk(this.extensions)}get nodeViews(){let{editor:e}=this,{nodeExtensions:t}=wp(this.extensions);return Object.fromEntries(t.filter(n=>!!ie(n,"addNodeView")).map(n=>{let r=this.attributes.filter(u=>u.type===n.name),o={name:n.name,options:n.options,storage:n.storage,editor:e,type:Wt(n.name,this.schema)},a=ie(n,"addNodeView",o);if(!a)return[];let s=(u,l,c,m)=>{let me=kv(u,r);return a()({editor:e,node:u,getPos:c,decorations:m,HTMLAttributes:me,extension:n})};return[n.name,s]}))}},qk=class{constructor(){this.callbacks={}}on(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}emit(e,...t){let n=this.callbacks[e];return n&&n.forEach(r=>r.apply(this,t)),this}off(e,t){let n=this.callbacks[e];return n&&(t?this.callbacks[e]=n.filter(r=>r!==t):delete this.callbacks[e]),this}removeAllListeners(){this.callbacks={}}},i$=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 1px !important;
  height: 1px !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`,Cv=class extends qk{constructor(e={}){super(),this.isFocused=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}))},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=KL(i$))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e){this.setOptions({editable:e})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,t){let n=kk(t)?t(e,this.state.plugins):[...this.state.plugins,e],r=this.state.reconfigure({plugins:n});this.view.updateState(r)}unregisterPlugin(e){if(this.isDestroyed)return;let t=typeof e=="string"?`${e}$`:e.key,n=this.state.reconfigure({plugins:this.state.plugins.filter(r=>!r.key.startsWith(t))});this.view.updateState(n)}createExtensionManager(){let e=[...this.options.enableCoreExtensions?Object.values(qL):[],...this.options.extensions].filter(t=>["extension","node","mark"].includes(t==null?void 0:t.type));this.extensionManager=new da(e,this)}createCommandManager(){this.commandManager=new Sl({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){let e=Ik(this.options.content,this.schema,this.options.parseOptions),t=Ok(e,this.options.autofocus);this.view=new Lt(this.options.element,{...this.options.editorProps,dispatchTransaction:this.dispatchTransaction.bind(this),state:dr.create({doc:e,selection:t})});let n=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(n),this.createNodeViews();let r=this.view.dom;r.editor=this}createNodeViews(){this.view.setProps({nodeViews:this.extensionManager.nodeViews})}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;let t=this.capturedTransaction;return this.capturedTransaction=null,t}dispatchTransaction(e){if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(a=>{var s;return(s=this.capturedTransaction)===null||s===void 0?void 0:s.step(a)});return}let t=this.state.apply(e),n=!this.state.selection.eq(t.selection);this.view.updateState(t),this.emit("transaction",{editor:this,transaction:e}),n&&this.emit("selectionUpdate",{editor:this,transaction:e});let r=e.getMeta("focus"),o=e.getMeta("blur");r&&this.emit("focus",{editor:this,event:r.event,transaction:e}),o&&this.emit("blur",{editor:this,event:o.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return Sv(this.state,e)}isActive(e,t){let n=typeof e=="string"?e:null,r=typeof e=="string"?t:e;return zL(this.state,n,r)}getJSON(){return this.state.doc.toJSON()}getHTML(){return UL(this.state.doc.content,this.schema)}getText(e){let{blockSeparator:t=`

`,textSerializers:n={}}=e||{};return WL(this.state.doc,{blockSeparator:t,textSerializers:{...n,...Ck(this.schema)}})}get isEmpty(){return HL(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){this.emit("destroy"),this.view&&this.view.destroy(),this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}},Ft=class{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=De(ie(this,"addOptions",{name:this.name}))),this.storage=De(ie(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Ft(e)}configure(e={}){let t=this.extend();return t.options=gp(this.options,e),t.storage=De(ie(t,"addStorage",{name:t.name,options:t.options})),t}extend(e={}){let t=new Ft(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=De(ie(t,"addOptions",{name:t.name})),t.storage=De(ie(t,"addStorage",{name:t.name,options:t.options})),t}},cn=class{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=De(ie(this,"addOptions",{name:this.name}))),this.storage=De(ie(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new cn(e)}configure(e={}){let t=this.extend();return t.options=gp(this.options,e),t.storage=De(ie(t,"addStorage",{name:t.name,options:t.options})),t}extend(e={}){let t=new cn(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=De(ie(t,"addOptions",{name:t.name})),t.storage=De(ie(t,"addStorage",{name:t.name,options:t.options})),t}};function El(e,t,n){let r=[];return e===t?n.resolve(e).marks().forEach(o=>{let a=n.resolve(e-1),s=_v(a,o.type);!s||r.push({mark:o,...s})}):n.nodesBetween(e,t,(o,a)=>{r.push(...o.marks.map(s=>({from:a,to:a+o.nodeSize,mark:s})))}),r}function yo(e){return new Ep({find:e.find,handler:({state:t,range:n,match:r})=>{let o=De(e.getAttributes,void 0,r);if(o===!1||o===null)return;let{tr:a}=t,s=r[r.length-1],u=r[0],l=n.to;if(s){let c=u.search(/\S/),m=n.from+u.indexOf(s),me=m+s.length;if(El(n.from,n.to,t.doc).filter(xe=>xe.mark.type.excluded.find(Ne=>Ne===e.type&&Ne!==xe.mark.type)).filter(xe=>xe.to>m).length)return null;me<n.to&&a.delete(me,n.to),m>n.from&&a.delete(n.from+c,m),l=n.from+c+s.length,a.addMark(n.from+c,l,e.type.create(o||{})),a.removeStoredMark(e.type)}}})}function Ov(e){return new Ep({find:e.find,handler:({state:t,range:n,match:r})=>{let o=t.doc.resolve(n.from),a=De(e.getAttributes,void 0,r)||{};if(!o.node(-1).canReplaceWith(o.index(-1),o.indexAfter(-1),e.type))return null;t.tr.delete(n.from,n.to).setBlockType(n.from,n.from,e.type,a)}})}function kp(e){return new Ep({find:e.find,handler:({state:t,range:n,match:r})=>{let o=De(e.getAttributes,void 0,r)||{},a=t.tr.delete(n.from,n.to),s=a.doc.resolve(n.from).blockRange(),u=s&&Ss(s,e.type,o);if(!u)return null;a.wrap(s,u);let l=a.doc.resolve(n.from-1).nodeBefore;l&&l.type===e.type&&aa(a.doc,n.from-1)&&(!e.joinPredicate||e.joinPredicate(r,l))&&a.join(n.from-1)}})}function Jn(e){return new Rk({find:e.find,handler:({state:t,range:n,match:r})=>{let o=De(e.getAttributes,void 0,r);if(o===!1||o===null)return;let{tr:a}=t,s=r[r.length-1],u=r[0],l=n.to;if(s){let c=u.search(/\S/),m=n.from+u.indexOf(s),me=m+s.length;if(El(n.from,n.to,t.doc).filter(xe=>xe.mark.type.excluded.find(Ne=>Ne===e.type&&Ne!==xe.mark.type)).filter(xe=>xe.to>m).length)return null;me<n.to&&a.delete(me,n.to),m>n.from&&a.delete(n.from+c,m),l=n.from+c+s.length,a.addMark(n.from+c,l,e.type.create(o||{})),a.removeStoredMark(e.type)}}})}function Vk(e,t){let n=new kt(e);return t.forEach(r=>{r.steps.forEach(o=>{n.step(o)})}),n}function zk(e,t,n){let r=[];return e.nodesBetween(t.from,t.to,(o,a)=>{n(o)&&r.push({node:o,pos:a})}),r}function o$(e,t=JSON.stringify){let n={};return e.filter(r=>{let o=t(r);return Object.prototype.hasOwnProperty.call(n,o)?!1:n[o]=!0})}function a$(e){let t=o$(e);return t.length===1?t:t.filter((n,r)=>!t.filter((o,a)=>a!==r).some(o=>n.oldRange.from>=o.oldRange.from&&n.oldRange.to<=o.oldRange.to&&n.newRange.from>=o.newRange.from&&n.newRange.to<=o.newRange.to))}function Uk(e){let{mapping:t,steps:n}=e,r=[];return t.maps.forEach((o,a)=>{let s=[];if(o.ranges.length)o.forEach((u,l)=>{s.push({from:u,to:l})});else{let{from:u,to:l}=n[a];if(u===void 0||l===void 0)return;s.push({from:u,to:l})}s.forEach(({from:u,to:l})=>{let c=t.slice(a).map(u,-1),m=t.slice(a).map(l),me=t.invert().map(c,-1),xe=t.invert().map(m);r.push({oldRange:{from:me,to:xe},newRange:{from:c,to:m}})})}),a$(r)}function Wk(e){return bv(e)&&e instanceof ye}function Dp(e,t,n){let r=0,o=e.state.doc.content.size,a=pa(t,r,o),s=pa(n,r,o),u=e.coordsAtPos(a),l=e.coordsAtPos(s,-1),c=Math.min(u.top,l.top),m=Math.max(u.bottom,l.bottom),me=Math.min(u.left,l.left),xe=Math.max(u.right,l.right),Ne=xe-me,He=m-c,Ye={top:c,bottom:m,left:me,right:xe,width:Ne,height:He,x:me,y:c};return{...Ye,toJSON:()=>Ye}}v();v();v();v();var Rt="top",Jt="bottom",Ht="right",$t="left",Cp="auto",_o=[Rt,Jt,Ht,$t],ji="start",ha="end",Hk="clippingParents",Op="viewport",Is="popper",Kk="reference",Tv=_o.reduce(function(e,t){return e.concat([t+"-"+ji,t+"-"+ha])},[]),Tp=[].concat(_o,[Cp]).reduce(function(e,t){return e.concat([t,t+"-"+ji,t+"-"+ha])},[]),s$="beforeRead",u$="read",l$="afterRead",c$="beforeMain",f$="main",p$="afterMain",d$="beforeWrite",h$="write",m$="afterWrite",Gk=[s$,u$,l$,c$,f$,p$,d$,h$,m$];v();v();v();function ir(e){return e?(e.nodeName||"").toLowerCase():null}v();v();function Bt(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function Xn(e){var t=Bt(e).Element;return e instanceof t||e instanceof Element}function Xt(e){var t=Bt(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function Ap(e){if(typeof ShadowRoot=="undefined")return!1;var t=Bt(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function g$(e){var t=e.state;Object.keys(t.elements).forEach(function(n){var r=t.styles[n]||{},o=t.attributes[n]||{},a=t.elements[n];!Xt(a)||!ir(a)||(Object.assign(a.style,r),Object.keys(o).forEach(function(s){var u=o[s];u===!1?a.removeAttribute(s):a.setAttribute(s,u===!0?"":u)}))})}function v$(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach(function(r){var o=t.elements[r],a=t.attributes[r]||{},s=Object.keys(t.styles.hasOwnProperty(r)?t.styles[r]:n[r]),u=s.reduce(function(l,c){return l[c]="",l},{});!Xt(o)||!ir(o)||(Object.assign(o.style,u),Object.keys(a).forEach(function(l){o.removeAttribute(l)}))})}}var kl={name:"applyStyles",enabled:!0,phase:"write",fn:g$,effect:v$,requires:["computeStyles"]};v();v();function or(e){return e.split("-")[0]}v();v();v();var Cn=Math.max,ma=Math.min,Fi=Math.round;function fn(e,t){t===void 0&&(t=!1);var n=e.getBoundingClientRect(),r=1,o=1;if(Xt(e)&&t){var a=e.offsetHeight,s=e.offsetWidth;s>0&&(r=Fi(n.width)/s||1),a>0&&(o=Fi(n.height)/a||1)}return{width:n.width/r,height:n.height/o,top:n.top/o,right:n.right/r,bottom:n.bottom/o,left:n.left/r,x:n.left/r,y:n.top/o}}function ga(e){var t=fn(e),n=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}v();function Dl(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&Ap(n)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}v();v();function Br(e){return Bt(e).getComputedStyle(e)}v();function Av(e){return["table","td","th"].indexOf(ir(e))>=0}v();v();function mr(e){return((Xn(e)?e.ownerDocument:e.document)||window.document).documentElement}function Ri(e){return ir(e)==="html"?e:e.assignedSlot||e.parentNode||(Ap(e)?e.host:null)||mr(e)}function Qk(e){return!Xt(e)||Br(e).position==="fixed"?null:e.offsetParent}function y$(e){var t=navigator.userAgent.toLowerCase().indexOf("firefox")!==-1,n=navigator.userAgent.indexOf("Trident")!==-1;if(n&&Xt(e)){var r=Br(e);if(r.position==="fixed")return null}for(var o=Ri(e);Xt(o)&&["html","body"].indexOf(ir(o))<0;){var a=Br(o);if(a.transform!=="none"||a.perspective!=="none"||a.contain==="paint"||["transform","perspective"].indexOf(a.willChange)!==-1||t&&a.willChange==="filter"||t&&a.filter&&a.filter!=="none")return o;o=o.parentNode}return null}function On(e){for(var t=Bt(e),n=Qk(e);n&&Av(n)&&Br(n).position==="static";)n=Qk(n);return n&&(ir(n)==="html"||ir(n)==="body"&&Br(n).position==="static")?t:n||y$(e)||t}v();function va(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}v();function ya(e,t,n){return Cn(e,ma(t,n))}function Yk(e,t,n){var r=ya(e,t,n);return r>n?n:r}v();v();function Cl(){return{top:0,right:0,bottom:0,left:0}}function Ol(e){return Object.assign({},Cl(),e)}v();function Tl(e,t){return t.reduce(function(n,r){return n[r]=e,n},{})}var _$=function(e,t){return e=typeof e=="function"?e(Object.assign({},t.rects,{placement:t.placement})):e,Ol(typeof e!="number"?e:Tl(e,_o))};function b$(e){var t,n=e.state,r=e.name,o=e.options,a=n.elements.arrow,s=n.modifiersData.popperOffsets,u=or(n.placement),l=va(u),c=[$t,Ht].indexOf(u)>=0,m=c?"height":"width";if(!(!a||!s)){var me=_$(o.padding,n),xe=ga(a),Ne=l==="y"?Rt:$t,He=l==="y"?Jt:Ht,Ye=n.rects.reference[m]+n.rects.reference[l]-s[l]-n.rects.popper[m],Je=s[l]-n.rects.reference[l],vn=On(a),La=vn?l==="y"?vn.clientHeight||0:vn.clientWidth||0:0,sr=Ye/2-Je/2,Zr=me[Ne],zs=La-xe[m]-me[He],za=La/2-xe[m]/2+sr,Hs=ya(Zr,za,zs),lc=l;n.modifiersData[r]=(t={},t[lc]=Hs,t.centerOffset=Hs-za,t)}}function w$(e){var t=e.state,n=e.options,r=n.element,o=r===void 0?"[data-popper-arrow]":r;o!=null&&(typeof o=="string"&&(o=t.elements.popper.querySelector(o),!o)||!Dl(t.elements.popper,o)||(t.elements.arrow=o))}var Jk={name:"arrow",enabled:!0,phase:"main",fn:b$,effect:w$,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};v();v();function pn(e){return e.split("-")[1]}var x$={top:"auto",right:"auto",bottom:"auto",left:"auto"};function S$(e){var t=e.x,n=e.y,r=window,o=r.devicePixelRatio||1;return{x:Fi(t*o)/o||0,y:Fi(n*o)/o||0}}function Xk(e){var t,n=e.popper,r=e.popperRect,o=e.placement,a=e.variation,s=e.offsets,u=e.position,l=e.gpuAcceleration,c=e.adaptive,m=e.roundOffsets,me=e.isFixed,xe=s.x,Ne=xe===void 0?0:xe,He=s.y,Ye=He===void 0?0:He,Je=typeof m=="function"?m({x:Ne,y:Ye}):{x:Ne,y:Ye};Ne=Je.x,Ye=Je.y;var vn=s.hasOwnProperty("x"),La=s.hasOwnProperty("y"),sr=$t,Zr=Rt,zs=window;if(c){var za=On(n),Hs="clientHeight",lc="clientWidth";if(za===Bt(n)&&(za=mr(n),Br(za).position!=="static"&&u==="absolute"&&(Hs="scrollHeight",lc="scrollWidth")),za=za,o===Rt||(o===$t||o===Ht)&&a===ha){Zr=Jt;var Ty=me&&zs.visualViewport?zs.visualViewport.height:za[Hs];Ye-=Ty-r.height,Ye*=l?1:-1}if(o===$t||(o===Rt||o===Jt)&&a===ha){sr=Ht;var _y=me&&zs.visualViewport?zs.visualViewport.width:za[lc];Ne-=_y-r.width,Ne*=l?1:-1}}var xy=Object.assign({position:u},c&&x$),Bb=m===!0?S$({x:Ne,y:Ye}):{x:Ne,y:Ye};if(Ne=Bb.x,Ye=Bb.y,l){var Dy;return Object.assign({},xy,(Dy={},Dy[Zr]=La?"0":"",Dy[sr]=vn?"0":"",Dy.transform=(zs.devicePixelRatio||1)<=1?"translate("+Ne+"px, "+Ye+"px)":"translate3d("+Ne+"px, "+Ye+"px, 0)",Dy))}return Object.assign({},xy,(t={},t[Zr]=La?Ye+"px":"",t[sr]=vn?Ne+"px":"",t.transform="",t))}function E$(e){var t=e.state,n=e.options,r=n.gpuAcceleration,o=r===void 0?!0:r,a=n.adaptive,s=a===void 0?!0:a,u=n.roundOffsets,l=u===void 0?!0:u,c={placement:or(t.placement),variation:pn(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:o,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,Xk(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:s,roundOffsets:l})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,Xk(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}var Zk={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:E$,data:{}};v();var Ip={passive:!0};function k$(e){var t=e.state,n=e.instance,r=e.options,o=r.scroll,a=o===void 0?!0:o,s=r.resize,u=s===void 0?!0:s,l=Bt(t.elements.popper),c=[].concat(t.scrollParents.reference,t.scrollParents.popper);return a&&c.forEach(function(m){m.addEventListener("scroll",n.update,Ip)}),u&&l.addEventListener("resize",n.update,Ip),function(){a&&c.forEach(function(m){m.removeEventListener("scroll",n.update,Ip)}),u&&l.removeEventListener("resize",n.update,Ip)}}var eD={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:k$,data:{}};v();v();var D$={left:"right",right:"left",bottom:"top",top:"bottom"};function Ms(e){return e.replace(/left|right|bottom|top/g,function(t){return D$[t]})}v();var C$={start:"end",end:"start"};function Mp(e){return e.replace(/start|end/g,function(t){return C$[t]})}v();v();v();v();v();function ba(e){var t=Bt(e),n=t.pageXOffset,r=t.pageYOffset;return{scrollLeft:n,scrollTop:r}}function wa(e){return fn(mr(e)).left+ba(e).scrollLeft}function Iv(e){var t=Bt(e),n=mr(e),r=t.visualViewport,o=n.clientWidth,a=n.clientHeight,s=0,u=0;return r&&(o=r.width,a=r.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(s=r.offsetLeft,u=r.offsetTop)),{width:o,height:a,x:s+wa(e),y:u}}v();function Mv(e){var t,n=mr(e),r=ba(e),o=(t=e.ownerDocument)==null?void 0:t.body,a=Cn(n.scrollWidth,n.clientWidth,o?o.scrollWidth:0,o?o.clientWidth:0),s=Cn(n.scrollHeight,n.clientHeight,o?o.scrollHeight:0,o?o.clientHeight:0),u=-r.scrollLeft+wa(e),l=-r.scrollTop;return Br(o||n).direction==="rtl"&&(u+=Cn(n.clientWidth,o?o.clientWidth:0)-a),{width:a,height:s,x:u,y:l}}v();v();v();function xa(e){var t=Br(e),n=t.overflow,r=t.overflowX,o=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+o+r)}function Pp(e){return["html","body","#document"].indexOf(ir(e))>=0?e.ownerDocument.body:Xt(e)&&xa(e)?e:Pp(Ri(e))}function bo(e,t){var n;t===void 0&&(t=[]);var r=Pp(e),o=r===((n=e.ownerDocument)==null?void 0:n.body),a=Bt(r),s=o?[a].concat(a.visualViewport||[],xa(r)?r:[]):r,u=t.concat(s);return o?u:u.concat(bo(Ri(s)))}v();function Ps(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function O$(e){var t=fn(e);return t.top=t.top+e.clientTop,t.left=t.left+e.clientLeft,t.bottom=t.top+e.clientHeight,t.right=t.left+e.clientWidth,t.width=e.clientWidth,t.height=e.clientHeight,t.x=t.left,t.y=t.top,t}function tD(e,t){return t===Op?Ps(Iv(e)):Xn(t)?O$(t):Ps(Mv(mr(e)))}function T$(e){var t=bo(Ri(e)),n=["absolute","fixed"].indexOf(Br(e).position)>=0,r=n&&Xt(e)?On(e):e;return Xn(r)?t.filter(function(o){return Xn(o)&&Dl(o,r)&&ir(o)!=="body"}):[]}function Pv(e,t,n){var r=t==="clippingParents"?T$(e):[].concat(t),o=[].concat(r,[n]),a=o[0],s=o.reduce(function(u,l){var c=tD(e,l);return u.top=Cn(c.top,u.top),u.right=ma(c.right,u.right),u.bottom=ma(c.bottom,u.bottom),u.left=Cn(c.left,u.left),u},tD(e,a));return s.width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s}v();function Al(e){var t=e.reference,n=e.element,r=e.placement,o=r?or(r):null,a=r?pn(r):null,s=t.x+t.width/2-n.width/2,u=t.y+t.height/2-n.height/2,l;switch(o){case Rt:l={x:s,y:t.y-n.height};break;case Jt:l={x:s,y:t.y+t.height};break;case Ht:l={x:t.x+t.width,y:u};break;case $t:l={x:t.x-n.width,y:u};break;default:l={x:t.x,y:t.y}}var c=o?va(o):null;if(c!=null){var m=c==="y"?"height":"width";switch(a){case ji:l[c]=l[c]-(t[m]/2-n[m]/2);break;case ha:l[c]=l[c]+(t[m]/2-n[m]/2);break}}return l}function Tn(e,t){t===void 0&&(t={});var n=t,r=n.placement,o=r===void 0?e.placement:r,a=n.boundary,s=a===void 0?Hk:a,u=n.rootBoundary,l=u===void 0?Op:u,c=n.elementContext,m=c===void 0?Is:c,me=n.altBoundary,xe=me===void 0?!1:me,Ne=n.padding,He=Ne===void 0?0:Ne,Ye=Ol(typeof He!="number"?He:Tl(He,_o)),Je=m===Is?Kk:Is,vn=e.rects.popper,La=e.elements[xe?Je:m],sr=Pv(Xn(La)?La:La.contextElement||mr(e.elements.popper),s,l),Zr=fn(e.elements.reference),zs=Al({reference:Zr,element:vn,strategy:"absolute",placement:o}),za=Ps(Object.assign({},vn,zs)),Hs=m===Is?za:Zr,lc={top:sr.top-Hs.top+Ye.top,bottom:Hs.bottom-sr.bottom+Ye.bottom,left:sr.left-Hs.left+Ye.left,right:Hs.right-sr.right+Ye.right},Ty=e.modifiersData.offset;if(m===Is&&Ty){var _y=Ty[o];Object.keys(lc).forEach(function(xy){var Bb=[Ht,Jt].indexOf(xy)>=0?1:-1,Dy=[Rt,Jt].indexOf(xy)>=0?"y":"x";lc[xy]+=_y[Dy]*Bb})}return lc}v();function jv(e,t){t===void 0&&(t={});var n=t,r=n.placement,o=n.boundary,a=n.rootBoundary,s=n.padding,u=n.flipVariations,l=n.allowedAutoPlacements,c=l===void 0?Tp:l,m=pn(r),me=m?u?Tv:Tv.filter(function(He){return pn(He)===m}):_o,xe=me.filter(function(He){return c.indexOf(He)>=0});xe.length===0&&(xe=me);var Ne=xe.reduce(function(He,Ye){return He[Ye]=Tn(e,{placement:Ye,boundary:o,rootBoundary:a,padding:s})[or(Ye)],He},{});return Object.keys(Ne).sort(function(He,Ye){return Ne[He]-Ne[Ye]})}function A$(e){if(or(e)===Cp)return[];var t=Ms(e);return[Mp(e),t,Mp(t)]}function I$(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var o=n.mainAxis,a=o===void 0?!0:o,s=n.altAxis,u=s===void 0?!0:s,l=n.fallbackPlacements,c=n.padding,m=n.boundary,me=n.rootBoundary,xe=n.altBoundary,Ne=n.flipVariations,He=Ne===void 0?!0:Ne,Ye=n.allowedAutoPlacements,Je=t.options.placement,vn=or(Je),La=vn===Je,sr=l||(La||!He?[Ms(Je)]:A$(Je)),Zr=[Je].concat(sr).reduce(function(y2,Rb){return y2.concat(or(Rb)===Cp?jv(t,{placement:Rb,boundary:m,rootBoundary:me,padding:c,flipVariations:He,allowedAutoPlacements:Ye}):Rb)},[]),zs=t.rects.reference,za=t.rects.popper,Hs=new Map,lc=!0,Ty=Zr[0],_y=0;_y<Zr.length;_y++){var xy=Zr[_y],Bb=or(xy),Dy=pn(xy)===ji,Bg=[Rt,Jt].indexOf(Bb)>=0,yy=Bg?"width":"height",wy=Tn(t,{placement:xy,boundary:m,rootBoundary:me,altBoundary:xe,padding:c}),Ay=Bg?Dy?Ht:$t:Dy?Jt:Rt;zs[yy]>za[yy]&&(Ay=Ms(Ay));var $b=Ms(Ay),e0=[];if(a&&e0.push(wy[Bb]<=0),u&&e0.push(wy[Ay]<=0,wy[$b]<=0),e0.every(function(y2){return y2})){Ty=xy,lc=!1;break}Hs.set(xy,e0)}if(lc)for(var Hb=He?3:1,Yb=function(y2){var Rb=Zr.find(function(i2){var s2=Hs.get(i2);if(s2)return s2.slice(0,y2).every(function(E2){return E2})});if(Rb)return Ty=Rb,"break"},Jb=Hb;Jb>0;Jb--){var l2=Yb(Jb);if(l2==="break")break}t.placement!==Ty&&(t.modifiersData[r]._skip=!0,t.placement=Ty,t.reset=!0)}}var rD={name:"flip",enabled:!0,phase:"main",fn:I$,requiresIfExists:["offset"],data:{_skip:!1}};v();function nD(e,t,n){return n===void 0&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function iD(e){return[Rt,Ht,Jt,$t].some(function(t){return e[t]>=0})}function M$(e){var t=e.state,n=e.name,r=t.rects.reference,o=t.rects.popper,a=t.modifiersData.preventOverflow,s=Tn(t,{elementContext:"reference"}),u=Tn(t,{altBoundary:!0}),l=nD(s,r),c=nD(u,o,a),m=iD(l),me=iD(c);t.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:m,hasPopperEscaped:me},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":m,"data-popper-escaped":me})}var oD={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:M$};v();function P$(e,t,n){var r=or(e),o=[$t,Rt].indexOf(r)>=0?-1:1,a=typeof n=="function"?n(Object.assign({},t,{placement:e})):n,s=a[0],u=a[1];return s=s||0,u=(u||0)*o,[$t,Ht].indexOf(r)>=0?{x:u,y:s}:{x:s,y:u}}function j$(e){var t=e.state,n=e.options,r=e.name,o=n.offset,a=o===void 0?[0,0]:o,s=Tp.reduce(function(m,me){return m[me]=P$(me,t.rects,a),m},{}),u=s[t.placement],l=u.x,c=u.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=c),t.modifiersData[r]=s}var aD={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:j$};v();function F$(e){var t=e.state,n=e.name;t.modifiersData[n]=Al({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}var sD={name:"popperOffsets",enabled:!0,phase:"read",fn:F$,data:{}};v();v();function Fv(e){return e==="x"?"y":"x"}function R$(e){var t=e.state,n=e.options,r=e.name,o=n.mainAxis,a=o===void 0?!0:o,s=n.altAxis,u=s===void 0?!1:s,l=n.boundary,c=n.rootBoundary,m=n.altBoundary,me=n.padding,xe=n.tether,Ne=xe===void 0?!0:xe,He=n.tetherOffset,Ye=He===void 0?0:He,Je=Tn(t,{boundary:l,rootBoundary:c,padding:me,altBoundary:m}),vn=or(t.placement),La=pn(t.placement),sr=!La,Zr=va(vn),zs=Fv(Zr),za=t.modifiersData.popperOffsets,Hs=t.rects.reference,lc=t.rects.popper,Ty=typeof Ye=="function"?Ye(Object.assign({},t.rects,{placement:t.placement})):Ye,_y=typeof Ty=="number"?{mainAxis:Ty,altAxis:Ty}:Object.assign({mainAxis:0,altAxis:0},Ty),xy=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,Bb={x:0,y:0};if(za){if(a){var Dy,Bg=Zr==="y"?Rt:$t,yy=Zr==="y"?Jt:Ht,wy=Zr==="y"?"height":"width",Ay=za[Zr],$b=Ay+Je[Bg],e0=Ay-Je[yy],Hb=Ne?-lc[wy]/2:0,Yb=La===ji?Hs[wy]:lc[wy],Jb=La===ji?-lc[wy]:-Hs[wy],l2=t.elements.arrow,y2=Ne&&l2?ga(l2):{width:0,height:0},Rb=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:Cl(),i2=Rb[Bg],s2=Rb[yy],E2=ya(0,Hs[wy],y2[wy]),L2=sr?Hs[wy]/2-Hb-E2-i2-_y.mainAxis:Yb-E2-i2-_y.mainAxis,T2=sr?-Hs[wy]/2+Hb+E2+s2+_y.mainAxis:Jb+E2+s2+_y.mainAxis,A2=t.elements.arrow&&On(t.elements.arrow),k_=A2?Zr==="y"?A2.clientTop||0:A2.clientLeft||0:0,Vb=(Dy=xy==null?void 0:xy[Zr])!=null?Dy:0,Qb=Ay+L2-Vb-k_,zb=Ay+T2-Vb,t2=ya(Ne?ma($b,Qb):$b,Ay,Ne?Cn(e0,zb):e0);za[Zr]=t2,Bb[Zr]=t2-Ay}if(u){var Zb,h2=Zr==="x"?Rt:$t,g2=Zr==="x"?Jt:Ht,Wb=za[zs],f2=zs==="y"?"height":"width",O2=Wb+Je[h2],C2=Wb-Je[g2],x2=[Rt,$t].indexOf(vn)!==-1,N2=(Zb=xy==null?void 0:xy[zs])!=null?Zb:0,U2=x2?O2:Wb-Hs[f2]-lc[f2]-N2+_y.altAxis,Q2=x2?Wb+Hs[f2]+lc[f2]-N2-_y.altAxis:C2,a2=Ne&&x2?Yk(U2,Wb,Q2):ya(Ne?U2:O2,Wb,Ne?Q2:C2);za[zs]=a2,Bb[zs]=a2-Wb}t.modifiersData[r]=Bb}}var uD={name:"preventOverflow",enabled:!0,phase:"main",fn:R$,requiresIfExists:["offset"]};v();v();v();v();function Rv(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function Nv(e){return e===Bt(e)||!Xt(e)?ba(e):Rv(e)}function N$(e){var t=e.getBoundingClientRect(),n=Fi(t.width)/e.offsetWidth||1,r=Fi(t.height)/e.offsetHeight||1;return n!==1||r!==1}function Lv(e,t,n){n===void 0&&(n=!1);var r=Xt(t),o=Xt(t)&&N$(t),a=mr(t),s=fn(e,o),u={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!n)&&((ir(t)!=="body"||xa(a))&&(u=Nv(t)),Xt(t)?(l=fn(t,!0),l.x+=t.clientLeft,l.y+=t.clientTop):a&&(l.x=wa(a))),{x:s.left+u.scrollLeft-l.x,y:s.top+u.scrollTop-l.y,width:s.width,height:s.height}}v();function L$(e){var t=new Map,n=new Set,r=[];e.forEach(function(a){t.set(a.name,a)});function o(a){n.add(a.name);var s=[].concat(a.requires||[],a.requiresIfExists||[]);s.forEach(function(u){if(!n.has(u)){var l=t.get(u);l&&o(l)}}),r.push(a)}return e.forEach(function(a){n.has(a.name)||o(a)}),r}function $v(e){var t=L$(e);return Gk.reduce(function(n,r){return n.concat(t.filter(function(o){return o.phase===r}))},[])}v();function Bv(e){var t;return function(){return t||(t=new Promise(function(n){Promise.resolve().then(function(){t=void 0,n(e())})})),t}}v();function qv(e){var t=e.reduce(function(n,r){var o=n[r.name];return n[r.name]=o?Object.assign({},o,r,{options:Object.assign({},o.options,r.options),data:Object.assign({},o.data,r.data)}):r,n},{});return Object.keys(t).map(function(n){return t[n]})}var lD={placement:"bottom",modifiers:[],strategy:"absolute"};function cD(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function fD(e){e===void 0&&(e={});var t=e,n=t.defaultModifiers,r=n===void 0?[]:n,o=t.defaultOptions,a=o===void 0?lD:o;return function(s,u,l){l===void 0&&(l=a);var c={placement:"bottom",orderedModifiers:[],options:Object.assign({},lD,a),modifiersData:{},elements:{reference:s,popper:u},attributes:{},styles:{}},m=[],me=!1,xe={state:c,setOptions:function(Ye){var Je=typeof Ye=="function"?Ye(c.options):Ye;He(),c.options=Object.assign({},a,c.options,Je),c.scrollParents={reference:Xn(s)?bo(s):s.contextElement?bo(s.contextElement):[],popper:bo(u)};var vn=$v(qv([].concat(r,c.options.modifiers)));return c.orderedModifiers=vn.filter(function(La){return La.enabled}),Ne(),xe.update()},forceUpdate:function(){if(!me){var Ye=c.elements,Je=Ye.reference,vn=Ye.popper;if(cD(Je,vn)){c.rects={reference:Lv(Je,On(vn),c.options.strategy==="fixed"),popper:ga(vn)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach(function(Ty){return c.modifiersData[Ty.name]=Object.assign({},Ty.data)});for(var La=0,sr=0;sr<c.orderedModifiers.length;sr++){if(c.reset===!0){c.reset=!1,sr=-1;continue}var Zr=c.orderedModifiers[sr],zs=Zr.fn,za=Zr.options,Hs=za===void 0?{}:za,lc=Zr.name;typeof zs=="function"&&(c=zs({state:c,options:Hs,name:lc,instance:xe})||c)}}}},update:Bv(function(){return new Promise(function(Ye){xe.forceUpdate(),Ye(c)})}),destroy:function(){He(),me=!0}};if(!cD(s,u))return xe;xe.setOptions(l).then(function(Ye){!me&&l.onFirstUpdate&&l.onFirstUpdate(Ye)});function Ne(){c.orderedModifiers.forEach(function(Ye){var Je=Ye.name,vn=Ye.options,La=vn===void 0?{}:vn,sr=Ye.effect;if(typeof sr=="function"){var Zr=sr({state:c,name:Je,instance:xe,options:La}),zs=function(){};m.push(Zr||zs)}})}function He(){m.forEach(function(Ye){return Ye()}),m=[]}return xe}}v();var $$=[eD,sD,Zk,kl,aD,rD,uD,Jk,oD],Vv=fD({defaultModifiers:$$}),B$="tippy-box",pD="tippy-content",q$="tippy-backdrop",dD="tippy-arrow",hD="tippy-svg-arrow",Sa={passive:!0,capture:!0},mD=function(){return document.body};function zv(e,t,n){if(Array.isArray(e)){var r=e[t];return r!=null?r:Array.isArray(n)?n[t]:n}return e}function Uv(e,t){var n={}.toString.call(e);return n.indexOf("[object")===0&&n.indexOf(t+"]")>-1}function gD(e,t){return typeof e=="function"?e.apply(void 0,t):e}function vD(e,t){if(t===0)return e;var n;return function(r){clearTimeout(n),n=setTimeout(function(){e(r)},t)}}function V$(e){return e.split(/\s+/).filter(Boolean)}function js(e){return[].concat(e)}function yD(e,t){e.indexOf(t)===-1&&e.push(t)}function z$(e){return e.filter(function(t,n){return e.indexOf(t)===n})}function U$(e){return e.split("-")[0]}function jp(e){return[].slice.call(e)}function _D(e){return Object.keys(e).reduce(function(t,n){return e[n]!==void 0&&(t[n]=e[n]),t},{})}function Il(){return document.createElement("div")}function Fp(e){return["Element","Fragment"].some(function(t){return Uv(e,t)})}function W$(e){return Uv(e,"NodeList")}function H$(e){return Uv(e,"MouseEvent")}function K$(e){return!!(e&&e._tippy&&e._tippy.reference===e)}function G$(e){return Fp(e)?[e]:W$(e)?jp(e):Array.isArray(e)?e:jp(document.querySelectorAll(e))}function Wv(e,t){e.forEach(function(n){n&&(n.style.transitionDuration=t+"ms")})}function bD(e,t){e.forEach(function(n){n&&n.setAttribute("data-state",t)})}function Q$(e){var t,n=js(e),r=n[0];return r!=null&&(t=r.ownerDocument)!=null&&t.body?r.ownerDocument:document}function Y$(e,t){var n=t.clientX,r=t.clientY;return e.every(function(o){var a=o.popperRect,s=o.popperState,u=o.props,l=u.interactiveBorder,c=U$(s.placement),m=s.modifiersData.offset;if(!m)return!0;var me=c==="bottom"?m.top.y:0,xe=c==="top"?m.bottom.y:0,Ne=c==="right"?m.left.x:0,He=c==="left"?m.right.x:0,Ye=a.top-r+me>l,Je=r-a.bottom-xe>l,vn=a.left-n+Ne>l,La=n-a.right-He>l;return Ye||Je||vn||La})}function Hv(e,t,n){var r=t+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(o){e[r](o,n)})}function wD(e,t){for(var n=t;n;){var r;if(e.contains(n))return!0;n=n.getRootNode==null||(r=n.getRootNode())==null?void 0:r.host}return!1}var Zn={isTouch:!1},xD=0;function J$(){Zn.isTouch||(Zn.isTouch=!0,window.performance&&document.addEventListener("mousemove",SD))}function SD(){var e=performance.now();e-xD<20&&(Zn.isTouch=!1,document.removeEventListener("mousemove",SD)),xD=e}function X$(){var e=document.activeElement;if(K$(e)){var t=e._tippy;e.blur&&!t.state.isVisible&&e.blur()}}function Z$(){document.addEventListener("touchstart",J$,Sa),window.addEventListener("blur",X$)}var eB=typeof window!="undefined"&&typeof document!="undefined",tB=eB?!!window.msCrypto:!1,rB={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},nB={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},An=Object.assign({appendTo:mD,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},rB,nB),iB=Object.keys(An),oB=function(e){var t=Object.keys(e);t.forEach(function(n){An[n]=e[n]})};function ED(e){var t=e.plugins||[],n=t.reduce(function(r,o){var a=o.name,s=o.defaultValue;if(a){var u;r[a]=e[a]!==void 0?e[a]:(u=An[a])!=null?u:s}return r},{});return Object.assign({},e,n)}function aB(e,t){var n=t?Object.keys(ED(Object.assign({},An,{plugins:t}))):iB,r=n.reduce(function(o,a){var s=(e.getAttribute("data-tippy-"+a)||"").trim();if(!s)return o;if(a==="content")o[a]=s;else try{o[a]=JSON.parse(s)}catch{o[a]=s}return o},{});return r}function kD(e,t){var n=Object.assign({},t,{content:gD(t.content,[e])},t.ignoreAttributes?{}:aB(e,t.plugins));return n.aria=Object.assign({},An.aria,n.aria),n.aria={expanded:n.aria.expanded==="auto"?t.interactive:n.aria.expanded,content:n.aria.content==="auto"?t.interactive?null:"describedby":n.aria.content},n}var sB=function(){return"innerHTML"};function Kv(e,t){e[sB()]=t}function DD(e){var t=Il();return e===!0?t.className=dD:(t.className=hD,Fp(e)?t.appendChild(e):Kv(t,e)),t}function CD(e,t){Fp(t.content)?(Kv(e,""),e.appendChild(t.content)):typeof t.content!="function"&&(t.allowHTML?Kv(e,t.content):e.textContent=t.content)}function Gv(e){var t=e.firstElementChild,n=jp(t.children);return{box:t,content:n.find(function(r){return r.classList.contains(pD)}),arrow:n.find(function(r){return r.classList.contains(dD)||r.classList.contains(hD)}),backdrop:n.find(function(r){return r.classList.contains(q$)})}}function OD(e){var t=Il(),n=Il();n.className=B$,n.setAttribute("data-state","hidden"),n.setAttribute("tabindex","-1");var r=Il();r.className=pD,r.setAttribute("data-state","hidden"),CD(r,e.props),t.appendChild(n),n.appendChild(r),o(e.props,e.props);function o(a,s){var u=Gv(t),l=u.box,c=u.content,m=u.arrow;s.theme?l.setAttribute("data-theme",s.theme):l.removeAttribute("data-theme"),typeof s.animation=="string"?l.setAttribute("data-animation",s.animation):l.removeAttribute("data-animation"),s.inertia?l.setAttribute("data-inertia",""):l.removeAttribute("data-inertia"),l.style.maxWidth=typeof s.maxWidth=="number"?s.maxWidth+"px":s.maxWidth,s.role?l.setAttribute("role",s.role):l.removeAttribute("role"),(a.content!==s.content||a.allowHTML!==s.allowHTML)&&CD(c,e.props),s.arrow?m?a.arrow!==s.arrow&&(l.removeChild(m),l.appendChild(DD(s.arrow))):l.appendChild(DD(s.arrow)):m&&l.removeChild(m)}return{popper:t,onUpdate:o}}OD.$$tippy=!0;var uB=1,Rp=[],Qv=[];function lB(e,t){var n=kD(e,Object.assign({},An,ED(_D(t)))),r,o,a,s=!1,u=!1,l=!1,c=!1,m,me,xe,Ne=[],He=vD(Qb,n.interactiveDebounce),Ye,Je=uB++,vn=null,La=z$(n.plugins),sr={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},Zr={id:Je,reference:e,popper:Il(),popperInstance:vn,props:n,state:sr,plugins:La,clearDelayTimeouts:U2,setProps:Q2,setContent:a2,show:S2,hide:n2,hideWithInteractivity:F2,enable:x2,disable:N2,unmount:M2,destroy:v2};if(!n.render)return Zr;var zs=n.render(Zr),za=zs.popper,Hs=zs.onUpdate;za.setAttribute("data-tippy-root",""),za.id="tippy-"+Zr.id,Zr.popper=za,e._tippy=Zr,za._tippy=Zr;var lc=La.map(function(o2){return o2.fn(Zr)}),Ty=e.hasAttribute("aria-expanded");return A2(),Hb(),Ay(),$b("onCreate",[Zr]),n.showOnCreate&&O2(),za.addEventListener("mouseenter",function(){Zr.props.interactive&&Zr.state.isVisible&&Zr.clearDelayTimeouts()}),za.addEventListener("mouseleave",function(){Zr.props.interactive&&Zr.props.trigger.indexOf("mouseenter")>=0&&Bg().addEventListener("mousemove",He)}),Zr;function _y(){var o2=Zr.props.touch;return Array.isArray(o2)?o2:[o2,0]}function xy(){return _y()[0]==="hold"}function Bb(){var o2;return!!((o2=Zr.props.render)!=null&&o2.$$tippy)}function Dy(){return Ye||e}function Bg(){var o2=Dy().parentNode;return o2?Q$(o2):document}function yy(){return Gv(za)}function wy(o2){return Zr.state.isMounted&&!Zr.state.isVisible||Zn.isTouch||m&&m.type==="focus"?0:zv(Zr.props.delay,o2?0:1,An.delay)}function Ay(o2){o2===void 0&&(o2=!1),za.style.pointerEvents=Zr.props.interactive&&!o2?"":"none",za.style.zIndex=""+Zr.props.zIndex}function $b(o2,b2,D2){if(D2===void 0&&(D2=!0),lc.forEach(function(z2){z2[o2]&&z2[o2].apply(z2,b2)}),D2){var j2;(j2=Zr.props)[o2].apply(j2,b2)}}function e0(){var o2=Zr.props.aria;if(o2.content){var b2="aria-"+o2.content,D2=za.id,j2=js(Zr.props.triggerTarget||e);j2.forEach(function(z2){var fF=z2.getAttribute(b2);if(Zr.state.isVisible)z2.setAttribute(b2,fF?fF+" "+D2:D2);else{var d2=fF&&fF.replace(D2,"").trim();d2?z2.setAttribute(b2,d2):z2.removeAttribute(b2)}})}}function Hb(){if(!(Ty||!Zr.props.aria.expanded)){var o2=js(Zr.props.triggerTarget||e);o2.forEach(function(b2){Zr.props.interactive?b2.setAttribute("aria-expanded",Zr.state.isVisible&&b2===Dy()?"true":"false"):b2.removeAttribute("aria-expanded")})}}function Yb(){Bg().removeEventListener("mousemove",He),Rp=Rp.filter(function(o2){return o2!==He})}function Jb(o2){if(!(Zn.isTouch&&(l||o2.type==="mousedown"))){var b2=o2.composedPath&&o2.composedPath()[0]||o2.target;if(!(Zr.props.interactive&&wD(za,b2))){if(js(Zr.props.triggerTarget||e).some(function(D2){return wD(D2,b2)})){if(Zn.isTouch||Zr.state.isVisible&&Zr.props.trigger.indexOf("click")>=0)return}else $b("onClickOutside",[Zr,o2]);Zr.props.hideOnClick===!0&&(Zr.clearDelayTimeouts(),Zr.hide(),u=!0,setTimeout(function(){u=!1}),Zr.state.isMounted||i2())}}}function l2(){l=!0}function y2(){l=!1}function Rb(){var o2=Bg();o2.addEventListener("mousedown",Jb,!0),o2.addEventListener("touchend",Jb,Sa),o2.addEventListener("touchstart",y2,Sa),o2.addEventListener("touchmove",l2,Sa)}function i2(){var o2=Bg();o2.removeEventListener("mousedown",Jb,!0),o2.removeEventListener("touchend",Jb,Sa),o2.removeEventListener("touchstart",y2,Sa),o2.removeEventListener("touchmove",l2,Sa)}function s2(o2,b2){L2(o2,function(){!Zr.state.isVisible&&za.parentNode&&za.parentNode.contains(za)&&b2()})}function E2(o2,b2){L2(o2,b2)}function L2(o2,b2){var D2=yy().box;function j2(z2){z2.target===D2&&(Hv(D2,"remove",j2),b2())}if(o2===0)return b2();Hv(D2,"remove",me),Hv(D2,"add",j2),me=j2}function T2(o2,b2,D2){D2===void 0&&(D2=!1);var j2=js(Zr.props.triggerTarget||e);j2.forEach(function(z2){z2.addEventListener(o2,b2,D2),Ne.push({node:z2,eventType:o2,handler:b2,options:D2})})}function A2(){xy()&&(T2("touchstart",Vb,{passive:!0}),T2("touchend",zb,{passive:!0})),V$(Zr.props.trigger).forEach(function(o2){if(o2!=="manual")switch(T2(o2,Vb),o2){case"mouseenter":T2("mouseleave",zb);break;case"focus":T2(tB?"focusout":"blur",t2);break;case"focusin":T2("focusout",t2);break}})}function k_(){Ne.forEach(function(o2){var b2=o2.node,D2=o2.eventType,j2=o2.handler,z2=o2.options;b2.removeEventListener(D2,j2,z2)}),Ne=[]}function Vb(o2){var b2,D2=!1;if(!(!Zr.state.isEnabled||Zb(o2)||u)){var j2=((b2=m)==null?void 0:b2.type)==="focus";m=o2,Ye=o2.currentTarget,Hb(),!Zr.state.isVisible&&H$(o2)&&Rp.forEach(function(z2){return z2(o2)}),o2.type==="click"&&(Zr.props.trigger.indexOf("mouseenter")<0||s)&&Zr.props.hideOnClick!==!1&&Zr.state.isVisible?D2=!0:O2(o2),o2.type==="click"&&(s=!D2),D2&&!j2&&C2(o2)}}function Qb(o2){var b2=o2.target,D2=Dy().contains(b2)||za.contains(b2);if(!(o2.type==="mousemove"&&D2)){var j2=f2().concat(za).map(function(z2){var fF,d2=z2._tippy,KC=(fF=d2.popperInstance)==null?void 0:fF.state;return KC?{popperRect:z2.getBoundingClientRect(),popperState:KC,props:n}:null}).filter(Boolean);Y$(j2,o2)&&(Yb(),C2(o2))}}function zb(o2){var b2=Zb(o2)||Zr.props.trigger.indexOf("click")>=0&&s;if(!b2){if(Zr.props.interactive){Zr.hideWithInteractivity(o2);return}C2(o2)}}function t2(o2){Zr.props.trigger.indexOf("focusin")<0&&o2.target!==Dy()||Zr.props.interactive&&o2.relatedTarget&&za.contains(o2.relatedTarget)||C2(o2)}function Zb(o2){return Zn.isTouch?xy()!==o2.type.indexOf("touch")>=0:!1}function h2(){g2();var o2=Zr.props,b2=o2.popperOptions,D2=o2.placement,j2=o2.offset,z2=o2.getReferenceClientRect,fF=o2.moveTransition,d2=Bb()?Gv(za).arrow:null,KC=z2?{getBoundingClientRect:z2,contextElement:z2.contextElement||Dy()}:e,mC={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(FC){var xO=FC.state;if(Bb()){var EC=yy(),gO=EC.box;["placement","reference-hidden","escaped"].forEach(function(YC){YC==="placement"?gO.setAttribute("data-placement",xO.placement):xO.attributes.popper["data-popper-"+YC]?gO.setAttribute("data-"+YC,""):gO.removeAttribute("data-"+YC)}),xO.attributes.popper={}}}},LO=[{name:"offset",options:{offset:j2}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!fF}},mC];Bb()&&d2&&LO.push({name:"arrow",options:{element:d2,padding:3}}),LO.push.apply(LO,(b2==null?void 0:b2.modifiers)||[]),Zr.popperInstance=Vv(KC,za,Object.assign({},b2,{placement:D2,onFirstUpdate:xe,modifiers:LO}))}function g2(){Zr.popperInstance&&(Zr.popperInstance.destroy(),Zr.popperInstance=null)}function Wb(){var o2=Zr.props.appendTo,b2,D2=Dy();Zr.props.interactive&&o2===mD||o2==="parent"?b2=D2.parentNode:b2=gD(o2,[D2]),b2.contains(za)||b2.appendChild(za),Zr.state.isMounted=!0,h2()}function f2(){return jp(za.querySelectorAll("[data-tippy-root]"))}function O2(o2){Zr.clearDelayTimeouts(),o2&&$b("onTrigger",[Zr,o2]),Rb();var b2=wy(!0),D2=_y(),j2=D2[0],z2=D2[1];Zn.isTouch&&j2==="hold"&&z2&&(b2=z2),b2?r=setTimeout(function(){Zr.show()},b2):Zr.show()}function C2(o2){if(Zr.clearDelayTimeouts(),$b("onUntrigger",[Zr,o2]),!Zr.state.isVisible){i2();return}if(!(Zr.props.trigger.indexOf("mouseenter")>=0&&Zr.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(o2.type)>=0&&s)){var b2=wy(!1);b2?o=setTimeout(function(){Zr.state.isVisible&&Zr.hide()},b2):a=requestAnimationFrame(function(){Zr.hide()})}}function x2(){Zr.state.isEnabled=!0}function N2(){Zr.hide(),Zr.state.isEnabled=!1}function U2(){clearTimeout(r),clearTimeout(o),cancelAnimationFrame(a)}function Q2(o2){if(!Zr.state.isDestroyed){$b("onBeforeUpdate",[Zr,o2]),k_();var b2=Zr.props,D2=kD(e,Object.assign({},b2,_D(o2),{ignoreAttributes:!0}));Zr.props=D2,A2(),b2.interactiveDebounce!==D2.interactiveDebounce&&(Yb(),He=vD(Qb,D2.interactiveDebounce)),b2.triggerTarget&&!D2.triggerTarget?js(b2.triggerTarget).forEach(function(j2){j2.removeAttribute("aria-expanded")}):D2.triggerTarget&&e.removeAttribute("aria-expanded"),Hb(),Ay(),Hs&&Hs(b2,D2),Zr.popperInstance&&(h2(),f2().forEach(function(j2){requestAnimationFrame(j2._tippy.popperInstance.forceUpdate)})),$b("onAfterUpdate",[Zr,o2])}}function a2(o2){Zr.setProps({content:o2})}function S2(){var o2=Zr.state.isVisible,b2=Zr.state.isDestroyed,D2=!Zr.state.isEnabled,j2=Zn.isTouch&&!Zr.props.touch,z2=zv(Zr.props.duration,0,An.duration);if(!(o2||b2||D2||j2)&&!Dy().hasAttribute("disabled")&&($b("onShow",[Zr],!1),Zr.props.onShow(Zr)!==!1)){if(Zr.state.isVisible=!0,Bb()&&(za.style.visibility="visible"),Ay(),Rb(),Zr.state.isMounted||(za.style.transition="none"),Bb()){var fF=yy(),d2=fF.box,KC=fF.content;Wv([d2,KC],0)}xe=function(){var mC;if(!(!Zr.state.isVisible||c)){if(c=!0,za.offsetHeight,za.style.transition=Zr.props.moveTransition,Bb()&&Zr.props.animation){var LO=yy(),FC=LO.box,xO=LO.content;Wv([FC,xO],z2),bD([FC,xO],"visible")}e0(),Hb(),yD(Qv,Zr),(mC=Zr.popperInstance)==null||mC.forceUpdate(),$b("onMount",[Zr]),Zr.props.animation&&Bb()&&E2(z2,function(){Zr.state.isShown=!0,$b("onShown",[Zr])})}},Wb()}}function n2(){var o2=!Zr.state.isVisible,b2=Zr.state.isDestroyed,D2=!Zr.state.isEnabled,j2=zv(Zr.props.duration,1,An.duration);if(!(o2||b2||D2)&&($b("onHide",[Zr],!1),Zr.props.onHide(Zr)!==!1)){if(Zr.state.isVisible=!1,Zr.state.isShown=!1,c=!1,s=!1,Bb()&&(za.style.visibility="hidden"),Yb(),i2(),Ay(!0),Bb()){var z2=yy(),fF=z2.box,d2=z2.content;Zr.props.animation&&(Wv([fF,d2],j2),bD([fF,d2],"hidden"))}e0(),Hb(),Zr.props.animation?Bb()&&s2(j2,Zr.unmount):Zr.unmount()}}function F2(o2){Bg().addEventListener("mousemove",He),yD(Rp,He),He(o2)}function M2(){Zr.state.isVisible&&Zr.hide(),Zr.state.isMounted&&(g2(),f2().forEach(function(o2){o2._tippy.unmount()}),za.parentNode&&za.parentNode.removeChild(za),Qv=Qv.filter(function(o2){return o2!==Zr}),Zr.state.isMounted=!1,$b("onHidden",[Zr]))}function v2(){Zr.state.isDestroyed||(Zr.clearDelayTimeouts(),Zr.unmount(),k_(),delete e._tippy,Zr.state.isDestroyed=!0,$b("onDestroy",[Zr]))}}function Ml(e,t){t===void 0&&(t={});var n=An.plugins.concat(t.plugins||[]);Z$();var r=Object.assign({},t,{plugins:n}),o=G$(e),a=o.reduce(function(s,u){var l=u&&lB(u,r);return l&&s.push(l),s},[]);return Fp(e)?a[0]:a}Ml.defaultProps=An;Ml.setDefaultProps=oB;Ml.currentInput=Zn;Object.assign({},kl,{effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow)}});Ml.setDefaultProps({render:OD});var wo=Ml,TD=class{constructor({editor:e,element:t,view:n,tippyOptions:r={},shouldShow:o}){this.preventHide=!1,this.shouldShow=({view:a,state:s,from:u,to:l})=>{let{doc:c,selection:m}=s,{empty:me}=m,xe=!c.textBetween(u,l).length&&wv(s.selection);return!(!a.hasFocus()||me||xe)},this.mousedownHandler=()=>{this.preventHide=!0},this.dragstartHandler=()=>{this.hide()},this.focusHandler=()=>{setTimeout(()=>this.update(this.editor.view))},this.blurHandler=({event:a})=>{var s;if(this.preventHide){this.preventHide=!1;return}(a==null?void 0:a.relatedTarget)&&((s=this.element.parentNode)===null||s===void 0?void 0:s.contains(a.relatedTarget))||this.hide()},this.editor=e,this.element=t,this.view=n,o&&(this.shouldShow=o),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.addEventListener("dragstart",this.dragstartHandler),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.tippyOptions=r,this.element.remove(),this.element.style.visibility="visible"}createTooltip(){let{element:e}=this.editor.options,t=!!e.parentElement;this.tippy||!t||(this.tippy=wo(e,{duration:0,getReferenceClientRect:null,content:this.element,interactive:!0,trigger:"manual",placement:"top",hideOnClick:"toggle",...this.tippyOptions}),this.tippy.popper.firstChild&&this.tippy.popper.firstChild.addEventListener("blur",n=>{this.blurHandler({event:n})}))}update(e,t){var n,r;let{state:o,composing:a}=e,{doc:s,selection:u}=o,l=t&&t.doc.eq(s)&&t.selection.eq(u);if(a||l)return;this.createTooltip();let{ranges:c}=u,m=Math.min(...c.map(xe=>xe.$from.pos)),me=Math.max(...c.map(xe=>xe.$to.pos));if(!(!((n=this.shouldShow)===null||n===void 0)&&n.call(this,{editor:this.editor,view:e,state:o,oldState:t,from:m,to:me}))){this.hide();return}(r=this.tippy)===null||r===void 0||r.setProps({getReferenceClientRect:()=>{if(Wk(o.selection)){let xe=e.nodeDOM(m);if(xe)return xe.getBoundingClientRect()}return Dp(e,m,me)}}),this.show()}show(){var e;(e=this.tippy)===null||e===void 0||e.show()}hide(){var e;(e=this.tippy)===null||e===void 0||e.hide()}destroy(){var e;(e=this.tippy)===null||e===void 0||e.destroy(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.removeEventListener("dragstart",this.dragstartHandler),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler)}},AD=e=>new vt({key:typeof e.pluginKey=="string"?new yt(e.pluginKey):e.pluginKey,view:t=>new TD({view:t,...e})});Dr.create({name:"bubbleMenu",addOptions(){return{element:null,tippyOptions:{},pluginKey:"bubbleMenu",shouldShow:null}},addProseMirrorPlugins(){return this.options.element?[AD({pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,tippyOptions:this.options.tippyOptions,shouldShow:this.options.shouldShow})]:[]}});v();var ID=class{constructor({editor:e,element:t,view:n,tippyOptions:r={},shouldShow:o}){this.preventHide=!1,this.shouldShow=({view:a,state:s})=>{let{selection:u}=s,{$anchor:l,empty:c}=u,m=l.depth===1,me=l.parent.isTextblock&&!l.parent.type.spec.code&&!l.parent.textContent;return!(!a.hasFocus()||!c||!m||!me)},this.mousedownHandler=()=>{this.preventHide=!0},this.focusHandler=()=>{setTimeout(()=>this.update(this.editor.view))},this.blurHandler=({event:a})=>{var s;if(this.preventHide){this.preventHide=!1;return}(a==null?void 0:a.relatedTarget)&&((s=this.element.parentNode)===null||s===void 0?void 0:s.contains(a.relatedTarget))||this.hide()},this.editor=e,this.element=t,this.view=n,o&&(this.shouldShow=o),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.tippyOptions=r,this.element.remove(),this.element.style.visibility="visible"}createTooltip(){let{element:e}=this.editor.options,t=!!e.parentElement;this.tippy||!t||(this.tippy=wo(e,{duration:0,getReferenceClientRect:null,content:this.element,interactive:!0,trigger:"manual",placement:"right",hideOnClick:"toggle",...this.tippyOptions}),this.tippy.popper.firstChild&&this.tippy.popper.firstChild.addEventListener("blur",n=>{this.blurHandler({event:n})}))}update(e,t){var n,r;let{state:o}=e,{doc:a,selection:s}=o,{from:u,to:l}=s;if(!(t&&t.doc.eq(a)&&t.selection.eq(s))){if(this.createTooltip(),!(!((n=this.shouldShow)===null||n===void 0)&&n.call(this,{editor:this.editor,view:e,state:o,oldState:t}))){this.hide();return}(r=this.tippy)===null||r===void 0||r.setProps({getReferenceClientRect:()=>Dp(e,u,l)}),this.show()}}show(){var e;(e=this.tippy)===null||e===void 0||e.show()}hide(){var e;(e=this.tippy)===null||e===void 0||e.hide()}destroy(){var e;(e=this.tippy)===null||e===void 0||e.destroy(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler)}},MD=e=>new vt({key:typeof e.pluginKey=="string"?new yt(e.pluginKey):e.pluginKey,view:t=>new ID({view:t,...e})});Dr.create({name:"floatingMenu",addOptions(){return{element:null,tippyOptions:{},pluginKey:"floatingMenu",shouldShow:null}},addProseMirrorPlugins(){return this.options.element?[MD({pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,tippyOptions:this.options.tippyOptions,shouldShow:this.options.shouldShow})]:[]}});var PD=class extends Cv{constructor(){super(...arguments),this.contentComponent=null}};function cB(){let[,e]=Le(0);return()=>e(t=>t+1)}var jD=(e={},t=[])=>{let[n,r]=Le(null),o=cB();return we(()=>{let a=new PD(e);return r(a),a.on("transaction",()=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{o()})})}),()=>{a.destroy()}},t),n};function fB(e){return!!(typeof e=="function"&&e.prototype&&e.prototype.isReactComponent)}function pB(e){var t;return typeof e=="object"&&((t=e.$$typeof)===null||t===void 0?void 0:t.toString())==="Symbol(react.forward_ref)"}var Yv=class{constructor(e,{editor:t,props:n={},as:r="div",className:o=""}){this.ref=null,this.id=Math.floor(Math.random()*4294967295).toString(),this.component=e,this.editor=t,this.props=n,this.element=document.createElement(r),this.element.classList.add("react-renderer"),o&&this.element.classList.add(...o.split(" ")),this.render()}render(){var e;let t=this.component,n=this.props;(fB(t)||pB(t))&&(n.ref=r=>{this.ref=r}),this.reactElement=Nt.createElement(t,{...n}),!((e=this.editor)===null||e===void 0)&&e.contentComponent&&this.editor.contentComponent.setState({renderers:this.editor.contentComponent.state.renderers.set(this.id,this)})}updateProps(e={}){this.props={...this.props,...e},this.render()}destroy(){var e;if(!((e=this.editor)===null||e===void 0)&&e.contentComponent){let{renderers:t}=this.editor.contentComponent.state;t.delete(this.id),this.editor.contentComponent.setState({renderers:t})}}},dB=ur({onDragStart:void 0}),hB=()=>st(dB),mB=({renderers:e})=>Nt.createElement(Nt.Fragment,null,Array.from(e).map(([t,n])=>Nt.createPortal(n.reactElement,n.element,t))),FD=class extends Nt.Component{constructor(e){super(e),this.editorContentRef=Nt.createRef(),this.state={renderers:new Map}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){let{editor:e}=this.props;if(e&&e.options.element){if(e.contentComponent)return;let t=this.editorContentRef.current;t.append(...e.options.element.childNodes),e.setOptions({element:t}),e.contentComponent=this,e.createNodeViews()}}componentWillUnmount(){let{editor:e}=this.props;if(!e||(e.isDestroyed||e.view.setProps({nodeViews:{}}),e.contentComponent=null,!e.options.element.firstChild))return;let t=document.createElement("div");t.append(...e.options.element.childNodes),e.setOptions({element:t})}render(){let{editor:e,...t}=this.props;return Nt.createElement(Nt.Fragment,null,Nt.createElement("div",{ref:this.editorContentRef,...t}),Nt.createElement(mB,{renderers:this.state.renderers}))}},RD=Nt.memo(FD);Nt.forwardRef((e,t)=>{let{onDragStart:n}=hB(),r=e.as||"div";return Nt.createElement(r,{...e,ref:t,"data-node-view-wrapper":"",onDragStart:n,style:{...e.style,whiteSpace:"normal"}})});v();var gB=/^\s*([-+*])\s$/,ND=Ft.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:e}){return["ul",jt(this.options.HTMLAttributes,e),0]},addCommands(){return{toggleBulletList:()=>({commands:e})=>e.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){return[kp({find:gB,type:this.type})]}});v();var LD=Ft.create({name:"listItem",addOptions(){return{HTMLAttributes:{}}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:e}){return["li",jt(this.options.HTMLAttributes,e),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}});v();var $D=Ft.create({name:"text",group:"inline"});v();var vB=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))$/,yB=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))/g,_B=/(?:^|\s)((?:_)((?:[^_]+))(?:_))$/,bB=/(?:^|\s)((?:_)((?:[^_]+))(?:_))/g,BD=cn.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:e=>e.style.fontStyle!=="normal"&&null},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:e}){return["em",jt(this.options.HTMLAttributes,e),0]},addCommands(){return{setItalic:()=>({commands:e})=>e.setMark(this.name),toggleItalic:()=>({commands:e})=>e.toggleMark(this.name),unsetItalic:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[yo({find:vB,type:this.type}),yo({find:_B,type:this.type})]},addPasteRules(){return[Jn({find:yB,type:this.type}),Jn({find:bB,type:this.type})]}});v();var wB=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))$/,xB=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))/g,SB=/(?:^|\s)((?:__)((?:[^__]+))(?:__))$/,EB=/(?:^|\s)((?:__)((?:[^__]+))(?:__))/g,qD=cn.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:e=>e.style.fontWeight!=="normal"&&null},{style:"font-weight",getAttrs:e=>/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}]},renderHTML({HTMLAttributes:e}){return["strong",jt(this.options.HTMLAttributes,e),0]},addCommands(){return{setBold:()=>({commands:e})=>e.setMark(this.name),toggleBold:()=>({commands:e})=>e.toggleMark(this.name),unsetBold:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold()}},addInputRules(){return[yo({find:wB,type:this.type}),yo({find:SB,type:this.type})]},addPasteRules(){return[Jn({find:xB,type:this.type}),Jn({find:EB,type:this.type})]}});v();var kB=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))$/,DB=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))/g,VD=cn.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:e=>e.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:e}){return["s",jt(this.options.HTMLAttributes,e),0]},addCommands(){return{setStrike:()=>({commands:e})=>e.setMark(this.name),toggleStrike:()=>({commands:e})=>e.toggleMark(this.name),unsetStrike:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-x":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[yo({find:kB,type:this.type})]},addPasteRules(){return[Jn({find:DB,type:this.type})]}});v();var zD=Ft.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:e}){return["p",jt(this.options.HTMLAttributes,e),0]},addCommands(){return{setParagraph:()=>({commands:e})=>e.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}});v();var UD=Ft.create({name:"doc",topNode:!0,content:"block+"});v();var CB=/^```([a-z]+)?[\s\n]$/,OB=/^~~~([a-z]+)?[\s\n]$/,WD=Ft.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:null,parseHTML:e=>{var t;let{languageClassPrefix:n}=this.options;return[...((t=e.firstElementChild)===null||t===void 0?void 0:t.classList)||[]].filter(o=>o.startsWith(n)).map(o=>o.replace(n,""))[0]||null},renderHTML:e=>e.language?{class:this.options.languageClassPrefix+e.language}:null}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({HTMLAttributes:e}){return["pre",this.options.HTMLAttributes,["code",e,0]]},addCommands(){return{setCodeBlock:e=>({commands:t})=>t.setNode(this.name,e),toggleCodeBlock:e=>({commands:t})=>t.toggleNode(this.name,"paragraph",e)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{let{empty:e,$anchor:t}=this.editor.state.selection,n=t.pos===1;return!e||t.parent.type.name!==this.name?!1:n||!t.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:e})=>{if(!this.options.exitOnTripleEnter)return!1;let{state:t}=e,{selection:n}=t,{$from:r,empty:o}=n;if(!o||r.parent.type!==this.type)return!1;let a=r.parentOffset===r.parent.nodeSize-2,s=r.parent.textContent.endsWith(`

`);return!a||!s?!1:e.chain().command(({tr:u})=>(u.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:e})=>{if(!this.options.exitOnArrowDown)return!1;let{state:t}=e,{selection:n,doc:r}=t,{$from:o,empty:a}=n;if(!a||o.parent.type!==this.type||o.parentOffset!==o.parent.nodeSize-2)return!1;let s=o.after();return s===void 0||r.nodeAt(s)?!1:e.commands.exitCode()}}},addInputRules(){return[Ov({find:CB,type:this.type,getAttributes:e=>({language:e[1]})}),Ov({find:OB,type:this.type,getAttributes:e=>({language:e[1]})})]},addProseMirrorPlugins(){return[new vt({key:new yt("codeBlockVSCodeHandler"),props:{handlePaste:(e,t)=>{if(!t.clipboardData||this.editor.isActive(this.type.name))return!1;let n=t.clipboardData.getData("text/plain"),r=t.clipboardData.getData("vscode-editor-data"),o=r?JSON.parse(r):void 0,a=o==null?void 0:o.mode;if(!n||!a)return!1;let{tr:s}=e.state;return s.replaceSelectionWith(this.type.create({language:a})),s.setSelection(Re.near(s.doc.resolve(Math.max(0,s.selection.from-2)))),s.insertText(n.replace(/\r\n?/g,`
`)),s.setMeta("paste",!0),e.dispatch(s),!0}}})]}});v();v();v();var Np=200,gr=function(){};gr.prototype.append=function(e){return e.length?(e=gr.from(e),!this.length&&e||e.length<Np&&this.leafAppend(e)||this.length<Np&&e.leafPrepend(this)||this.appendInner(e)):this};gr.prototype.prepend=function(e){return e.length?gr.from(e).append(this):this};gr.prototype.appendInner=function(e){return new TB(this,e)};gr.prototype.slice=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=this.length),e>=t?gr.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))};gr.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};gr.prototype.forEach=function(e,t,n){t===void 0&&(t=0),n===void 0&&(n=this.length),t<=n?this.forEachInner(e,t,n,0):this.forEachInvertedInner(e,t,n,0)};gr.prototype.map=function(e,t,n){t===void 0&&(t=0),n===void 0&&(n=this.length);var r=[];return this.forEach(function(o,a){return r.push(e(o,a))},t,n),r};gr.from=function(e){return e instanceof gr?e:e&&e.length?new HD(e):gr.empty};var HD=function(e){function t(r){e.call(this),this.values=r}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(r,o){return r==0&&o==this.length?this:new t(this.values.slice(r,o))},t.prototype.getInner=function(r){return this.values[r]},t.prototype.forEachInner=function(r,o,a,s){for(var u=o;u<a;u++)if(r(this.values[u],s+u)===!1)return!1},t.prototype.forEachInvertedInner=function(r,o,a,s){for(var u=o-1;u>=a;u--)if(r(this.values[u],s+u)===!1)return!1},t.prototype.leafAppend=function(r){if(this.length+r.length<=Np)return new t(this.values.concat(r.flatten()))},t.prototype.leafPrepend=function(r){if(this.length+r.length<=Np)return new t(r.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(t.prototype,n),t}(gr);gr.empty=new HD([]);var TB=function(e){function t(n,r){e.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(n){return n<this.left.length?this.left.get(n):this.right.get(n-this.left.length)},t.prototype.forEachInner=function(n,r,o,a){var s=this.left.length;if(r<s&&this.left.forEachInner(n,r,Math.min(o,s),a)===!1||o>s&&this.right.forEachInner(n,Math.max(r-s,0),Math.min(this.length,o)-s,a+s)===!1)return!1},t.prototype.forEachInvertedInner=function(n,r,o,a){var s=this.left.length;if(r>s&&this.right.forEachInvertedInner(n,r-s,Math.max(o,s)-s,a+s)===!1||o<s&&this.left.forEachInvertedInner(n,Math.min(r,s),o,a)===!1)return!1},t.prototype.sliceInner=function(n,r){if(n==0&&r==this.length)return this;var o=this.left.length;return r<=o?this.left.slice(n,r):n>=o?this.right.slice(n-o,r-o):this.left.slice(n,o).append(this.right.slice(0,r-o))},t.prototype.leafAppend=function(n){var r=this.right.leafAppend(n);if(r)return new t(this.left,r)},t.prototype.leafPrepend=function(n){var r=this.left.leafPrepend(n);if(r)return new t(r,this.right)},t.prototype.appendInner=function(n){return this.left.depth>=Math.max(this.right.depth,n.depth)+1?new t(this.left,new t(this.right,n)):new t(this,n)},t}(gr),AB=gr,Jv=AB,IB=500,vr=function(e,t){this.items=e,this.eventCount=t};vr.prototype.popEvent=function(e,t){var n=this;if(this.eventCount==0)return null;for(var r=this.items.length;;r--){var o=this.items.get(r-1);if(o.selection){--r;break}}var a,s;t&&(a=this.remapping(r,this.items.length),s=a.maps.length);var u=e.tr,l,c,m=[],me=[];return this.items.forEach(function(xe,Ne){if(!xe.step){a||(a=n.remapping(r,Ne+1),s=a.maps.length),s--,me.push(xe);return}if(a){me.push(new ei(xe.map));var He=xe.step.map(a.slice(s)),Ye;He&&u.maybeStep(He).doc&&(Ye=u.mapping.maps[u.mapping.maps.length-1],m.push(new ei(Ye,null,null,m.length+me.length))),s--,Ye&&a.appendMap(Ye,s)}else u.maybeStep(xe.step);if(xe.selection)return l=a?xe.selection.map(a.slice(s)):xe.selection,c=new vr(n.items.slice(0,r).append(me.reverse().concat(m)),n.eventCount-1),!1},this.items.length,0),{remaining:c,transform:u,selection:l}};vr.prototype.addTransform=function(e,t,n,r){for(var o=[],a=this.eventCount,s=this.items,u=!r&&s.length?s.get(s.length-1):null,l=0;l<e.steps.length;l++){var c=e.steps[l].invert(e.docs[l]),m=new ei(e.mapping.maps[l],c,t),me=void 0;(me=u&&u.merge(m))&&(m=me,l?o.pop():s=s.slice(0,s.length-1)),o.push(m),t&&(a++,t=null),r||(u=m)}var xe=a-n.depth;return xe>PB&&(s=MB(s,xe),a-=xe),new vr(s.append(o),a)};vr.prototype.remapping=function(e,t){var n=new pr;return this.items.forEach(function(r,o){var a=r.mirrorOffset!=null&&o-r.mirrorOffset>=e?n.maps.length-r.mirrorOffset:null;n.appendMap(r.map,a)},e,t),n};vr.prototype.addMaps=function(e){return this.eventCount==0?this:new vr(this.items.append(e.map(function(t){return new ei(t)})),this.eventCount)};vr.prototype.rebased=function(e,t){if(!this.eventCount)return this;var n=[],r=Math.max(0,this.items.length-t),o=e.mapping,a=e.steps.length,s=this.eventCount;this.items.forEach(function(xe){xe.selection&&s--},r);var u=t;this.items.forEach(function(xe){var Ne=o.getMirror(--u);if(Ne!=null){a=Math.min(a,Ne);var He=o.maps[Ne];if(xe.step){var Ye=e.steps[Ne].invert(e.docs[Ne]),Je=xe.selection&&xe.selection.map(o.slice(u+1,Ne));Je&&s++,n.push(new ei(He,Ye,Je))}else n.push(new ei(He))}},r);for(var l=[],c=t;c<a;c++)l.push(new ei(o.maps[c]));var m=this.items.slice(0,r).append(l).append(n),me=new vr(m,s);return me.emptyItemCount()>IB&&(me=me.compress(this.items.length-n.length)),me};vr.prototype.emptyItemCount=function(){var e=0;return this.items.forEach(function(t){t.step||e++}),e};vr.prototype.compress=function(e){e===void 0&&(e=this.items.length);var t=this.remapping(0,e),n=t.maps.length,r=[],o=0;return this.items.forEach(function(a,s){if(s>=e)r.push(a),a.selection&&o++;else if(a.step){var u=a.step.map(t.slice(n)),l=u&&u.getMap();if(n--,l&&t.appendMap(l,n),u){var c=a.selection&&a.selection.map(t.slice(n));c&&o++;var m=new ei(l.invert(),u,c),me,xe=r.length-1;(me=r.length&&r[xe].merge(m))?r[xe]=me:r.push(m)}}else a.map&&n--},this.items.length,0),new vr(Jv.from(r.reverse()),o)};vr.empty=new vr(Jv.empty,0);function MB(e,t){var n;return e.forEach(function(r,o){if(r.selection&&t--==0)return n=o,!1}),e.slice(n)}var ei=function(e,t,n,r){this.map=e,this.step=t,this.selection=n,this.mirrorOffset=r};ei.prototype.merge=function(e){if(this.step&&e.step&&!e.selection){var t=e.step.merge(this.step);if(t)return new ei(t.getMap().invert(),t,this.selection)}};var xo=function(e,t,n,r){this.done=e,this.undone=t,this.prevRanges=n,this.prevTime=r},PB=20;function jB(e,t,n,r){var o=n.getMeta(So),a;if(o)return o.historyState;n.getMeta(RB)&&(e=new xo(e.done,e.undone,null,0));var s=n.getMeta("appendedTransaction");if(n.steps.length==0)return e;if(s&&s.getMeta(So))return s.getMeta(So).redo?new xo(e.done.addTransform(n,null,r,Lp(t)),e.undone,KD(n.mapping.maps[n.steps.length-1]),e.prevTime):new xo(e.done,e.undone.addTransform(n,null,r,Lp(t)),null,e.prevTime);if(n.getMeta("addToHistory")!==!1&&!(s&&s.getMeta("addToHistory")===!1)){var u=e.prevTime==0||!s&&(e.prevTime<(n.time||0)-r.newGroupDelay||!FB(n,e.prevRanges)),l=s?Xv(e.prevRanges,n.mapping):KD(n.mapping.maps[n.steps.length-1]);return new xo(e.done.addTransform(n,u?t.selection.getBookmark():null,r,Lp(t)),vr.empty,l,n.time)}else return(a=n.getMeta("rebased"))?new xo(e.done.rebased(n,a),e.undone.rebased(n,a),Xv(e.prevRanges,n.mapping),e.prevTime):new xo(e.done.addMaps(n.mapping.maps),e.undone.addMaps(n.mapping.maps),Xv(e.prevRanges,n.mapping),e.prevTime)}function FB(e,t){if(!t)return!1;if(!e.docChanged)return!0;var n=!1;return e.mapping.maps[0].forEach(function(r,o){for(var a=0;a<t.length;a+=2)r<=t[a+1]&&o>=t[a]&&(n=!0)}),n}function KD(e){var t=[];return e.forEach(function(n,r,o,a){return t.push(o,a)}),t}function Xv(e,t){if(!e)return null;for(var n=[],r=0;r<e.length;r+=2){var o=t.map(e[r],1),a=t.map(e[r+1],-1);o<=a&&n.push(o,a)}return n}function GD(e,t,n,r){var o=Lp(t),a=So.get(t).spec.config,s=(r?e.undone:e.done).popEvent(t,o);if(s){var u=s.selection.resolve(s.transform.doc),l=(r?e.done:e.undone).addTransform(s.transform,t.selection.getBookmark(),a,o),c=new xo(r?l:s.remaining,r?s.remaining:l,null,0);n(s.transform.setSelection(u).setMeta(So,{redo:r,historyState:c}).scrollIntoView())}}var Zv=!1,QD=null;function Lp(e){var t=e.plugins;if(QD!=t){Zv=!1,QD=t;for(var n=0;n<t.length;n++)if(t[n].spec.historyPreserveItems){Zv=!0;break}}return Zv}var So=new yt("history"),RB=new yt("closeHistory");function YD(e){return e={depth:e&&e.depth||100,newGroupDelay:e&&e.newGroupDelay||500},new vt({key:So,state:{init:function(){return new xo(vr.empty,vr.empty,null,0)},apply:function(t,n,r){return jB(n,r,t,e)}},config:e,props:{handleDOMEvents:{beforeinput:function(t,n){var r=n.inputType=="historyUndo"?ey(t.state,t.dispatch):n.inputType=="historyRedo"?ty(t.state,t.dispatch):!1;return r&&n.preventDefault(),r}}}})}function ey(e,t){var n=So.getState(e);return!n||n.done.eventCount==0?!1:(t&&GD(n,e,t,!1),!0)}function ty(e,t){var n=So.getState(e);return!n||n.undone.eventCount==0?!1:(t&&GD(n,e,t,!0),!0)}var JD=Dr.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:e,dispatch:t})=>ey(e,t),redo:()=>({state:e,dispatch:t})=>ty(e,t)}},addProseMirrorPlugins(){return[YD(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Mod-y":()=>this.editor.commands.redo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-\u044F":()=>this.editor.commands.undo(),"Shift-Mod-\u044F":()=>this.editor.commands.redo()}}});v();v();function ry(e){this.j={},this.jr=[],this.jd=null,this.t=e}ry.prototype={accepts:function(){return!!this.t},tt:function(e,t){if(t&&t.j)return this.j[e]=t,t;var n=t,r=this.j[e];if(r)return n&&(r.t=n),r;r=ot();var o=$p(this,e);return o?(Object.assign(r.j,o.j),r.jr.append(o.jr),r.jr=o.jd,r.t=n||o.t):r.t=n,this.j[e]=r,r}};var ot=function(){return new ry},fe=function(e){return new ry(e)},G=function(e,t,n){e.j[t]||(e.j[t]=n)},ar=function(e,t,n){e.jr.push([t,n])},$p=function(e,t){var n=e.j[t];if(n)return n;for(var r=0;r<e.jr.length;r++){var o=e.jr[r][0],a=e.jr[r][1];if(o.test(t))return a}return e.jd},Ae=function(e,t,n){for(var r=0;r<t.length;r++)G(e,t[r],n)},NB=function(e,t){for(var n=0;n<t.length;n++){var r=t[n][0],o=t[n][1];G(e,r,o)}},Ea=function(e,t,n,r){for(var o=0,a=t.length,s;o<a&&(s=e.j[t[o]]);)e=s,o++;if(o>=a)return[];for(;o<a-1;)s=r(),G(e,t[o],s),e=s,o++;G(e,t[a-1],n)},In="DOMAIN",Ni="LOCALHOST",ti="TLD",dn="NUM",Fs="PROTOCOL",ny="MAILTO",XD="WS",iy="NL",Rs="OPENBRACE",Pl="OPENBRACKET",jl="OPENANGLEBRACKET",Fl="OPENPAREN",ka="CLOSEBRACE",Ns="CLOSEBRACKET",Ls="CLOSEANGLEBRACKET",$s="CLOSEPAREN",Bp="AMPERSAND",qp="APOSTROPHE",Vp="ASTERISK",Bs="AT",zp="BACKSLASH",Up="BACKTICK",Wp="CARET",Rl="COLON",oy="COMMA",Hp="DOLLAR",Eo="DOT",Kp="EQUALS",ay="EXCLAMATION",Gp="HYPHEN",Qp="PERCENT",Yp="PIPE",Jp="PLUS",Xp="POUND",Zp="QUERY",sy="QUOTE",uy="SEMI",Li="SLASH",ed="TILDE",td="UNDERSCORE",rd="SYM",LB=Object.freeze({__proto__:null,DOMAIN:In,LOCALHOST:Ni,TLD:ti,NUM:dn,PROTOCOL:Fs,MAILTO:ny,WS:XD,NL:iy,OPENBRACE:Rs,OPENBRACKET:Pl,OPENANGLEBRACKET:jl,OPENPAREN:Fl,CLOSEBRACE:ka,CLOSEBRACKET:Ns,CLOSEANGLEBRACKET:Ls,CLOSEPAREN:$s,AMPERSAND:Bp,APOSTROPHE:qp,ASTERISK:Vp,AT:Bs,BACKSLASH:zp,BACKTICK:Up,CARET:Wp,COLON:Rl,COMMA:oy,DOLLAR:Hp,DOT:Eo,EQUALS:Kp,EXCLAMATION:ay,HYPHEN:Gp,PERCENT:Qp,PIPE:Yp,PLUS:Jp,POUND:Xp,QUERY:Zp,QUOTE:sy,SEMI:uy,SLASH:Li,TILDE:ed,UNDERSCORE:td,SYM:rd}),ZD="aaa aarp abarth abb abbott abbvie abc able abogado abudhabi ac academy accenture accountant accountants aco actor ad adac ads adult ae aeg aero aetna af afamilycompany afl africa ag agakhan agency ai aig airbus airforce airtel akdn al alfaromeo alibaba alipay allfinanz allstate ally alsace alstom am amazon americanexpress americanfamily amex amfam amica amsterdam analytics android anquan anz ao aol apartments app apple aq aquarelle ar arab aramco archi army arpa art arte as asda asia associates at athleta attorney au auction audi audible audio auspost author auto autos avianca aw aws ax axa az azure ba baby baidu banamex bananarepublic band bank bar barcelona barclaycard barclays barefoot bargains baseball basketball bauhaus bayern bb bbc bbt bbva bcg bcn bd be beats beauty beer bentley berlin best bestbuy bet bf bg bh bharti bi bible bid bike bing bingo bio biz bj black blackfriday blockbuster blog bloomberg blue bm bms bmw bn bnpparibas bo boats boehringer bofa bom bond boo book booking bosch bostik boston bot boutique box br bradesco bridgestone broadway broker brother brussels bs bt budapest bugatti build builders business buy buzz bv bw by bz bzh ca cab cafe cal call calvinklein cam camera camp cancerresearch canon capetown capital capitalone car caravan cards care career careers cars casa case cash casino cat catering catholic cba cbn cbre cbs cc cd center ceo cern cf cfa cfd cg ch chanel channel charity chase chat cheap chintai christmas chrome church ci cipriani circle cisco citadel citi citic city cityeats ck cl claims cleaning click clinic clinique clothing cloud club clubmed cm cn co coach codes coffee college cologne com comcast commbank community company compare computer comsec condos construction consulting contact contractors cooking cookingchannel cool coop corsica country coupon coupons courses cpa cr credit creditcard creditunion cricket crown crs cruise cruises csc cu cuisinella cv cw cx cy cymru cyou cz dabur dad dance data date dating datsun day dclk dds de deal dealer deals degree delivery dell deloitte delta democrat dental dentist desi design dev dhl diamonds diet digital direct directory discount discover dish diy dj dk dm dnp do docs doctor dog domains dot download drive dtv dubai duck dunlop dupont durban dvag dvr dz earth eat ec eco edeka edu education ee eg email emerck energy engineer engineering enterprises epson equipment er ericsson erni es esq estate et etisalat eu eurovision eus events exchange expert exposed express extraspace fage fail fairwinds faith family fan fans farm farmers fashion fast fedex feedback ferrari ferrero fi fiat fidelity fido film final finance financial fire firestone firmdale fish fishing fit fitness fj fk flickr flights flir florist flowers fly fm fo foo food foodnetwork football ford forex forsale forum foundation fox fr free fresenius frl frogans frontdoor frontier ftr fujitsu fujixerox fun fund furniture futbol fyi ga gal gallery gallo gallup game games gap garden gay gb gbiz gd gdn ge gea gent genting george gf gg ggee gh gi gift gifts gives giving gl glade glass gle global globo gm gmail gmbh gmo gmx gn godaddy gold goldpoint golf goo goodyear goog google gop got gov gp gq gr grainger graphics gratis green gripe grocery group gs gt gu guardian gucci guge guide guitars guru gw gy hair hamburg hangout haus hbo hdfc hdfcbank health healthcare help helsinki here hermes hgtv hiphop hisamitsu hitachi hiv hk hkt hm hn hockey holdings holiday homedepot homegoods homes homesense honda horse hospital host hosting hot hoteles hotels hotmail house how hr hsbc ht hu hughes hyatt hyundai ibm icbc ice icu id ie ieee ifm ikano il im imamat imdb immo immobilien in inc industries infiniti info ing ink institute insurance insure int international intuit investments io ipiranga iq ir irish is ismaili ist istanbul it itau itv iveco jaguar java jcb je jeep jetzt jewelry jio jll jm jmp jnj jo jobs joburg jot joy jp jpmorgan jprs juegos juniper kaufen kddi ke kerryhotels kerrylogistics kerryproperties kfh kg kh ki kia kim kinder kindle kitchen kiwi km kn koeln komatsu kosher kp kpmg kpn kr krd kred kuokgroup kw ky kyoto kz la lacaixa lamborghini lamer lancaster lancia land landrover lanxess lasalle lat latino latrobe law lawyer lb lc lds lease leclerc lefrak legal lego lexus lgbt li lidl life lifeinsurance lifestyle lighting like lilly limited limo lincoln linde link lipsy live living lixil lk llc llp loan loans locker locus loft lol london lotte lotto love lpl lplfinancial lr ls lt ltd ltda lu lundbeck luxe luxury lv ly ma macys madrid maif maison makeup man management mango map market marketing markets marriott marshalls maserati mattel mba mc mckinsey md me med media meet melbourne meme memorial men menu merckmsd mg mh miami microsoft mil mini mint mit mitsubishi mk ml mlb mls mm mma mn mo mobi mobile moda moe moi mom monash money monster mormon mortgage moscow moto motorcycles mov movie mp mq mr ms msd mt mtn mtr mu museum mutual mv mw mx my mz na nab nagoya name nationwide natura navy nba nc ne nec net netbank netflix network neustar new news next nextdirect nexus nf nfl ng ngo nhk ni nico nike nikon ninja nissan nissay nl no nokia northwesternmutual norton now nowruz nowtv np nr nra nrw ntt nu nyc nz obi observer off office okinawa olayan olayangroup oldnavy ollo om omega one ong onl online onyourside ooo open oracle orange org organic origins osaka otsuka ott ovh pa page panasonic paris pars partners parts party passagens pay pccw pe pet pf pfizer pg ph pharmacy phd philips phone photo photography photos physio pics pictet pictures pid pin ping pink pioneer pizza pk pl place play playstation plumbing plus pm pn pnc pohl poker politie porn post pr pramerica praxi press prime pro prod productions prof progressive promo properties property protection pru prudential ps pt pub pw pwc py qa qpon quebec quest qvc racing radio raid re read realestate realtor realty recipes red redstone redumbrella rehab reise reisen reit reliance ren rent rentals repair report republican rest restaurant review reviews rexroth rich richardli ricoh ril rio rip rmit ro rocher rocks rodeo rogers room rs rsvp ru rugby ruhr run rw rwe ryukyu sa saarland safe safety sakura sale salon samsclub samsung sandvik sandvikcoromant sanofi sap sarl sas save saxo sb sbi sbs sc sca scb schaeffler schmidt scholarships school schule schwarz science scjohnson scot sd se search seat secure security seek select sener services ses seven sew sex sexy sfr sg sh shangrila sharp shaw shell shia shiksha shoes shop shopping shouji show showtime si silk sina singles site sj sk ski skin sky skype sl sling sm smart smile sn sncf so soccer social softbank software sohu solar solutions song sony soy spa space sport spot spreadbetting sr srl ss st stada staples star statebank statefarm stc stcgroup stockholm storage store stream studio study style su sucks supplies supply support surf surgery suzuki sv swatch swiftcover swiss sx sy sydney systems sz tab taipei talk taobao target tatamotors tatar tattoo tax taxi tc tci td tdk team tech technology tel temasek tennis teva tf tg th thd theater theatre tiaa tickets tienda tiffany tips tires tirol tj tjmaxx tjx tk tkmaxx tl tm tmall tn to today tokyo tools top toray toshiba total tours town toyota toys tr trade trading training travel travelchannel travelers travelersinsurance trust trv tt tube tui tunes tushu tv tvs tw tz ua ubank ubs ug uk unicom university uno uol ups us uy uz va vacations vana vanguard vc ve vegas ventures verisign versicherung vet vg vi viajes video vig viking villas vin vip virgin visa vision viva vivo vlaanderen vn vodka volkswagen volvo vote voting voto voyage vu vuelos wales walmart walter wang wanggou watch watches weather weatherchannel webcam weber website wed wedding weibo weir wf whoswho wien wiki williamhill win windows wine winners wme wolterskluwer woodside work works world wow ws wtc wtf xbox xerox xfinity xihuan xin xxx xyz yachts yahoo yamaxun yandex ye yodobashi yoga yokohama you youtube yt yun za zappos zara zero zip zm zone zuerich zw verm\xF6gensberater-ctb verm\xF6gensberatung-pwb \u03B5\u03BB \u03B5\u03C5 \u0431\u0433 \u0431\u0435\u043B \u0434\u0435\u0442\u0438 \u0435\u044E \u043A\u0430\u0442\u043E\u043B\u0438\u043A \u043A\u043E\u043C \u049B\u0430\u0437 \u043C\u043A\u0434 \u043C\u043E\u043D \u043C\u043E\u0441\u043A\u0432\u0430 \u043E\u043D\u043B\u0430\u0439\u043D \u043E\u0440\u0433 \u0440\u0443\u0441 \u0440\u0444 \u0441\u0430\u0439\u0442 \u0441\u0440\u0431 \u0443\u043A\u0440 \u10D2\u10D4 \u0570\u0561\u0575 \u05D9\u05E9\u05E8\u05D0\u05DC \u05E7\u05D5\u05DD \u0627\u0628\u0648\u0638\u0628\u064A \u0627\u062A\u0635\u0627\u0644\u0627\u062A \u0627\u0631\u0627\u0645\u0643\u0648 \u0627\u0644\u0627\u0631\u062F\u0646 \u0627\u0644\u0628\u062D\u0631\u064A\u0646 \u0627\u0644\u062C\u0632\u0627\u0626\u0631 \u0627\u0644\u0633\u0639\u0648\u062F\u064A\u0629 \u0627\u0644\u0639\u0644\u064A\u0627\u0646 \u0627\u0644\u0645\u063A\u0631\u0628 \u0627\u0645\u0627\u0631\u0627\u062A \u0627\u06CC\u0631\u0627\u0646 \u0628\u0627\u0631\u062A \u0628\u0627\u0632\u0627\u0631 \u0628\u06BE\u0627\u0631\u062A \u0628\u064A\u062A\u0643 \u067E\u0627\u06A9\u0633\u062A\u0627\u0646 \u0680\u0627\u0631\u062A \u062A\u0648\u0646\u0633 \u0633\u0648\u062F\u0627\u0646 \u0633\u0648\u0631\u064A\u0629 \u0634\u0628\u0643\u0629 \u0639\u0631\u0627\u0642 \u0639\u0631\u0628 \u0639\u0645\u0627\u0646 \u0641\u0644\u0633\u0637\u064A\u0646 \u0642\u0637\u0631 \u0643\u0627\u062B\u0648\u0644\u064A\u0643 \u0643\u0648\u0645 \u0645\u0635\u0631 \u0645\u0644\u064A\u0633\u064A\u0627 \u0645\u0648\u0631\u064A\u062A\u0627\u0646\u064A\u0627 \u0645\u0648\u0642\u0639 \u0647\u0645\u0631\u0627\u0647 \u0915\u0949\u092E \u0928\u0947\u091F \u092D\u093E\u0930\u0924 \u092D\u093E\u0930\u0924\u092E\u094D \u092D\u093E\u0930\u094B\u0924 \u0938\u0902\u0917\u0920\u0928 \u09AC\u09BE\u0982\u09B2\u09BE \u09AD\u09BE\u09B0\u09A4 \u09AD\u09BE\u09F0\u09A4 \u0A2D\u0A3E\u0A30\u0A24 \u0AAD\u0ABE\u0AB0\u0AA4 \u0B2D\u0B3E\u0B30\u0B24 \u0B87\u0BA8\u0BCD\u0BA4\u0BBF\u0BAF\u0BBE \u0B87\u0BB2\u0B99\u0BCD\u0B95\u0BC8 \u0B9A\u0BBF\u0B99\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0BC2\u0BB0\u0BCD \u0C2D\u0C3E\u0C30\u0C24\u0C4D \u0CAD\u0CBE\u0CB0\u0CA4 \u0D2D\u0D3E\u0D30\u0D24\u0D02 \u0DBD\u0D82\u0D9A\u0DCF \u0E04\u0E2D\u0E21 \u0E44\u0E17\u0E22 \u0EA5\u0EB2\u0EA7 \uB2F7\uB137 \uB2F7\uCEF4 \uC0BC\uC131 \uD55C\uAD6D \u30A2\u30DE\u30BE\u30F3 \u30B0\u30FC\u30B0\u30EB \u30AF\u30E9\u30A6\u30C9 \u30B3\u30E0 \u30B9\u30C8\u30A2 \u30BB\u30FC\u30EB \u30D5\u30A1\u30C3\u30B7\u30E7\u30F3 \u30DD\u30A4\u30F3\u30C8 \u307F\u3093\u306A \u4E16\u754C \u4E2D\u4FE1 \u4E2D\u56FD \u4E2D\u570B \u4E2D\u6587\u7F51 \u4E9A\u9A6C\u900A \u4F01\u4E1A \u4F5B\u5C71 \u4FE1\u606F \u5065\u5EB7 \u516B\u5366 \u516C\u53F8 \u516C\u76CA \u53F0\u6E7E \u53F0\u7063 \u5546\u57CE \u5546\u5E97 \u5546\u6807 \u5609\u91CC \u5609\u91CC\u5927\u9152\u5E97 \u5728\u7EBF \u5927\u4F17\u6C7D\u8F66 \u5927\u62FF \u5929\u4E3B\u6559 \u5A31\u4E50 \u5BB6\u96FB \u5E7F\u4E1C \u5FAE\u535A \u6148\u5584 \u6211\u7231\u4F60 \u624B\u673A \u62DB\u8058 \u653F\u52A1 \u653F\u5E9C \u65B0\u52A0\u5761 \u65B0\u95FB \u65F6\u5C1A \u66F8\u7C4D \u673A\u6784 \u6DE1\u9A6C\u9521 \u6E38\u620F \u6FB3\u9580 \u70B9\u770B \u79FB\u52A8 \u7EC4\u7EC7\u673A\u6784 \u7F51\u5740 \u7F51\u5E97 \u7F51\u7AD9 \u7F51\u7EDC \u8054\u901A \u8BFA\u57FA\u4E9A \u8C37\u6B4C \u8D2D\u7269 \u901A\u8CA9 \u96C6\u56E2 \u96FB\u8A0A\u76C8\u79D1 \u98DE\u5229\u6D66 \u98DF\u54C1 \u9910\u5385 \u9999\u683C\u91CC\u62C9 \u9999\u6E2F".split(" "),Nl=/(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/,Ll=/(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26A7\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5-\uDED7\uDEDD-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFC\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDDFF\uDE70-\uDE74\uDE78-\uDE7C\uDE80-\uDE86\uDE90-\uDEAC\uDEB0-\uDEBA\uDEC0-\uDEC5\uDED0-\uDED9\uDEE0-\uDEE7\uDEF0-\uDEF6])/,$l=/\uFE0F/,Bl=/\d/,eC=/\s/;function $B(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=ot(),n=fe(dn),r=fe(In),o=ot(),a=fe(XD),s=[[Bl,r],[Nl,r],[Ll,r],[$l,r]],u=function(){var sr=fe(In);return sr.j={"-":o},sr.jr=[].concat(s),sr},l=function(sr){var Zr=u();return Zr.t=sr,Zr};NB(t,[["'",fe(qp)],["{",fe(Rs)],["[",fe(Pl)],["<",fe(jl)],["(",fe(Fl)],["}",fe(ka)],["]",fe(Ns)],[">",fe(Ls)],[")",fe($s)],["&",fe(Bp)],["*",fe(Vp)],["@",fe(Bs)],["`",fe(Up)],["^",fe(Wp)],[":",fe(Rl)],[",",fe(oy)],["$",fe(Hp)],[".",fe(Eo)],["=",fe(Kp)],["!",fe(ay)],["-",fe(Gp)],["%",fe(Qp)],["|",fe(Yp)],["+",fe(Jp)],["#",fe(Xp)],["?",fe(Zp)],['"',fe(sy)],["/",fe(Li)],[";",fe(uy)],["~",fe(ed)],["_",fe(td)],["\\",fe(zp)]]),G(t,`
`,fe(iy)),ar(t,eC,a),G(a,`
`,ot()),ar(a,eC,a);for(var c=0;c<ZD.length;c++)Ea(t,ZD[c],l(ti),u);var m=u(),me=u(),xe=u(),Ne=u();Ea(t,"file",m,u),Ea(t,"ftp",me,u),Ea(t,"http",xe,u),Ea(t,"mailto",Ne,u);var He=u(),Ye=fe(Fs),Je=fe(ny);G(me,"s",He),G(me,":",Ye),G(xe,"s",He),G(xe,":",Ye),G(m,":",Ye),G(He,":",Ye),G(Ne,":",Je);for(var vn=u(),La=0;La<e.length;La++)Ea(t,e[La],vn,u);return G(vn,":",Ye),Ea(t,"localhost",l(Ni),u),ar(t,Bl,n),ar(t,Nl,r),ar(t,Ll,r),ar(t,$l,r),ar(n,Bl,n),ar(n,Nl,r),ar(n,Ll,r),ar(n,$l,r),G(n,"-",o),G(r,"-",o),G(o,"-",o),ar(r,Bl,r),ar(r,Nl,r),ar(r,Ll,r),ar(r,$l,r),ar(o,Bl,r),ar(o,Nl,r),ar(o,Ll,r),ar(o,$l,r),t.jd=fe(rd),t}function BB(e,t){for(var n=qB(t.replace(/[A-Z]/g,function(Ne){return Ne.toLowerCase()})),r=n.length,o=[],a=0,s=0;s<r;){for(var u=e,l=null,c=0,m=null,me=-1,xe=-1;s<r&&(l=$p(u,n[s]));)u=l,u.accepts()?(me=0,xe=0,m=u):me>=0&&(me+=n[s].length,xe++),c+=n[s].length,a+=n[s].length,s++;a-=me,s-=xe,c-=me,o.push({t:m.t,v:t.substr(a-c,c),s:a-c,e:a})}return o}function qB(e){for(var t=[],n=e.length,r=0;r<n;){var o=e.charCodeAt(r),a=void 0,s=o<55296||o>56319||r+1===n||(a=e.charCodeAt(r+1))<56320||a>57343?e[r]:e.slice(r,r+2);t.push(s),r+=s.length}return t}var Cr={defaultProtocol:"http",events:null,format:tC,formatHref:tC,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:0,className:null,attributes:null,ignoreTags:[]};function tC(e){return e}function zB(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=Object.create(e.prototype);for(var o in n)r[o]=n[o];return r.constructor=t,t.prototype=r,t}function id(){}id.prototype={t:"token",isLink:!1,toString:function(){return this.v},toHref:function(){return this.toString()},startIndex:function(){return this.tk[0].s},endIndex:function(){return this.tk[this.tk.length-1].e},toObject:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Cr.defaultProtocol;return{type:this.t,value:this.v,isLink:this.isLink,href:this.toHref(e),start:this.startIndex(),end:this.endIndex()}}};function Da(e,t){function n(r,o){this.t=e,this.v=r,this.tk=o}return zB(id,n,t),n}var rC=Da("email",{isLink:!0}),ly=Da("email",{isLink:!0,toHref:function(){return"mailto:"+this.toString()}}),cy=Da("text"),nC=Da("nl"),ko=Da("url",{isLink:!0,toHref:function(){for(var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Cr.defaultProtocol,t=this.tk,n=!1,r=!1,o=[],a=0;t[a].t===Fs;)n=!0,o.push(t[a].v),a++;for(;t[a].t===Li;)r=!0,o.push(t[a].v),a++;for(;a<t.length;a++)o.push(t[a].v);return o=o.join(""),n||r||(o="".concat(e,"://").concat(o)),o},hasProtocol:function(){return this.tk[0].t===Fs}}),UB=Object.freeze({__proto__:null,MultiToken:id,Base:id,createTokenClass:Da,MailtoEmail:rC,Email:ly,Text:cy,Nl:nC,Url:ko});function WB(){var e=ot(),t=ot(),n=ot(),r=ot(),o=ot(),a=ot(),s=ot(),u=fe(ko),l=ot(),c=fe(ko),m=fe(ko),me=ot(),xe=ot(),Ne=ot(),He=ot(),Ye=ot(),Je=fe(ko),vn=fe(ko),La=fe(ko),sr=fe(ko),Zr=ot(),zs=ot(),za=ot(),Hs=ot(),lc=ot(),Ty=ot(),_y=fe(ly),xy=ot(),Bb=fe(ly),Dy=fe(rC),Bg=ot(),yy=ot(),wy=ot(),Ay=ot(),$b=fe(nC);G(e,iy,$b),G(e,Fs,t),G(e,ny,n),G(t,Li,r),G(r,Li,o),G(e,ti,a),G(e,In,a),G(e,Ni,u),G(e,dn,a),G(o,ti,m),G(o,In,m),G(o,dn,m),G(o,Ni,m),G(a,Eo,s),G(lc,Eo,Ty),G(s,ti,u),G(s,In,a),G(s,dn,a),G(s,Ni,a),G(Ty,ti,_y),G(Ty,In,lc),G(Ty,dn,lc),G(Ty,Ni,lc),G(u,Eo,s),G(_y,Eo,Ty),G(u,Rl,l),G(u,Li,m),G(l,dn,c),G(c,Li,m),G(_y,Rl,xy),G(xy,dn,Bb);var e0=[Bp,Vp,Bs,zp,Up,Wp,Hp,In,Kp,Gp,Ni,dn,Qp,Yp,Jp,Xp,Fs,Li,rd,ed,ti,td],Hb=[qp,Ls,ka,Ns,$s,Rl,oy,Eo,ay,jl,Rs,Pl,Fl,Zp,sy,uy];G(m,Rs,xe),G(m,Pl,Ne),G(m,jl,He),G(m,Fl,Ye),G(me,Rs,xe),G(me,Pl,Ne),G(me,jl,He),G(me,Fl,Ye),G(xe,ka,m),G(Ne,Ns,m),G(He,Ls,m),G(Ye,$s,m),G(Je,ka,m),G(vn,Ns,m),G(La,Ls,m),G(sr,$s,m),G(Zr,ka,m),G(zs,Ns,m),G(za,Ls,m),G(Hs,$s,m),Ae(xe,e0,Je),Ae(Ne,e0,vn),Ae(He,e0,La),Ae(Ye,e0,sr),Ae(xe,Hb,Zr),Ae(Ne,Hb,zs),Ae(He,Hb,za),Ae(Ye,Hb,Hs),Ae(Je,e0,Je),Ae(vn,e0,vn),Ae(La,e0,La),Ae(sr,e0,sr),Ae(Je,Hb,Je),Ae(vn,Hb,vn),Ae(La,Hb,La),Ae(sr,Hb,sr),Ae(Zr,e0,Je),Ae(zs,e0,vn),Ae(za,e0,La),Ae(Hs,e0,sr),Ae(Zr,Hb,Zr),Ae(zs,Hb,zs),Ae(za,Hb,za),Ae(Hs,Hb,Hs),Ae(m,e0,m),Ae(me,e0,m),Ae(m,Hb,me),Ae(me,Hb,me),G(n,ti,Dy),G(n,In,Dy),G(n,dn,Dy),G(n,Ni,Dy),Ae(Dy,e0,Dy),Ae(Dy,Hb,Bg),Ae(Bg,e0,Dy),Ae(Bg,Hb,Bg);var Yb=[Bp,qp,Vp,zp,Up,Wp,ka,Hp,In,Kp,Gp,dn,Rs,Qp,Yp,Jp,Xp,Zp,Li,rd,ed,ti,td];return Ae(a,Yb,yy),G(a,Bs,wy),Ae(u,Yb,yy),G(u,Bs,wy),Ae(s,Yb,yy),Ae(yy,Yb,yy),G(yy,Bs,wy),G(yy,Eo,Ay),Ae(Ay,Yb,yy),G(wy,ti,lc),G(wy,In,lc),G(wy,dn,lc),G(wy,Ni,_y),e}function HB(e,t,n){for(var r=n.length,o=0,a=[],s=[];o<r;){for(var u=e,l=null,c=null,m=0,me=null,xe=-1;o<r&&!(l=$p(u,n[o].t));)s.push(n[o++]);for(;o<r&&(c=l||$p(u,n[o].t));)l=null,u=c,u.accepts()?(xe=0,me=u):xe>=0&&xe++,o++,m++;if(xe<0)for(var Ne=o-m;Ne<o;Ne++)s.push(n[Ne]);else{s.length>0&&(a.push(fy(cy,t,s)),s=[]),o-=xe,m-=xe;var He=me.t,Ye=n.slice(o-m,o);a.push(fy(He,t,Ye))}}return s.length>0&&a.push(fy(cy,t,s)),a}function fy(e,t,n){var r=n[0].s,o=n[n.length-1].e,a=t.substr(r,o-r);return new e(a,n)}var Mn={scanner:null,parser:null,pluginQueue:[],customProtocols:[],initialized:!1};function KB(){Mn.scanner={start:$B(Mn.customProtocols),tokens:LB},Mn.parser={start:WB(),tokens:UB};for(var e={createTokenClass:Da},t=0;t<Mn.pluginQueue.length;t++)Mn.pluginQueue[t][1]({scanner:Mn.scanner,parser:Mn.parser,utils:e});Mn.initialized=!0}function iC(e){return Mn.initialized||KB(),HB(Mn.parser.start,e,BB(Mn.scanner.start,e))}function od(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,n=iC(e),r=[],o=0;o<n.length;o++){var a=n[o];a.isLink&&(!t||a.t===t)&&r.push(a.toObject())}return r}function py(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,n=iC(e);return n.length===1&&n[0].isLink&&(!t||n[0].t===t)}function GB(e){return new vt({key:new yt("autolink"),appendTransaction:(t,n,r)=>{if(!(t.some(u=>u.docChanged)&&!n.doc.eq(r.doc)))return;let{tr:o}=r,a=Vk(n.doc,t),{mapping:s}=a;if(Uk(a).forEach(({oldRange:u,newRange:l})=>{El(u.from,u.to,n.doc).filter(c=>c.mark.type===e.type).forEach(c=>{let m=s.map(c.from),me=s.map(c.to),xe=El(m,me,r.doc).filter(La=>La.mark.type===e.type);if(!xe.length)return;let Ne=xe[0],He=n.doc.textBetween(c.from,c.to,void 0," "),Ye=r.doc.textBetween(Ne.from,Ne.to,void 0," "),Je=py(He),vn=py(Ye);Je&&!vn&&o.removeMark(Ne.from,Ne.to,e.type)}),zk(r.doc,l,c=>c.isTextblock).forEach(c=>{let m=r.doc.textBetween(c.pos,c.pos+c.node.nodeSize,void 0," ");od(m).filter(me=>me.isLink).map(me=>({...me,from:c.pos+me.start+1,to:c.pos+me.end+1})).filter(me=>{let xe=l.from>=me.from&&l.from<=me.to,Ne=l.to>=me.from&&l.to<=me.to;return xe||Ne}).forEach(me=>{o.addMark(me.from,me.to,e.type.create({href:me.href}))})})}),!!o.steps.length)return o}})}function QB(e){return new vt({key:new yt("handleClickLink"),props:{handleClick:(t,n,r)=>{var o;let a=Sv(t.state,e.type.name);return((o=r.target)===null||o===void 0?void 0:o.closest("a"))&&a.href?(window.open(a.href,a.target),!0):!1}}})}function YB(e){return new vt({key:new yt("handlePasteLink"),props:{handlePaste:(t,n,r)=>{let{state:o}=t,{selection:a}=o,{empty:s}=a;if(s)return!1;let u="";r.content.forEach(c=>{u+=c.textContent});let l=od(u).find(c=>c.isLink&&c.value===u);return!u||!l?!1:(e.editor.commands.setMark(e.type,{href:l.href}),!0)}}})}var oC=cn.create({name:"link",priority:1e3,keepOnSplit:!1,inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,linkOnPaste:!0,autolink:!0,HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow"}}},addAttributes(){return{href:{default:null},target:{default:this.options.HTMLAttributes.target}}},parseHTML(){return[{tag:"a[href]"}]},renderHTML({HTMLAttributes:e}){return["a",jt(this.options.HTMLAttributes,e),0]},addCommands(){return{setLink:e=>({commands:t})=>t.setMark(this.name,e),toggleLink:e=>({commands:t})=>t.toggleMark(this.name,e,{extendEmptyMarkRange:!0}),unsetLink:()=>({commands:e})=>e.unsetMark(this.name,{extendEmptyMarkRange:!0})}},addPasteRules(){return[Jn({find:e=>od(e).filter(t=>t.isLink).map(t=>({text:t.value,index:t.start,data:t})),type:this.type,getAttributes:e=>{var t;return{href:(t=e.data)===null||t===void 0?void 0:t.href}}})]},addProseMirrorPlugins(){let e=[];return this.options.autolink&&e.push(GB({type:this.type})),this.options.openOnClick&&e.push(QB({type:this.type})),this.options.linkOnPaste&&e.push(YB({editor:this.editor,type:this.type})),e}});v();var JB=/^(\d+)\.\s$/,aC=Ft.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:e=>e.hasAttribute("start")?parseInt(e.getAttribute("start")||"",10):1}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:e}){let{start:t,...n}=e;return t===1?["ol",jt(this.options.HTMLAttributes,n),0]:["ol",jt(this.options.HTMLAttributes,e),0]},addCommands(){return{toggleOrderedList:()=>({commands:e})=>e.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){return[kp({find:JB,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1]})]}});v();v();function XB(e){let{char:t,allowSpaces:n,prefixSpace:r,startOfLine:o,$position:a}=e,s=t.split("").map(La=>`\\${La}`).join(""),u=new RegExp(`\\s${s}$`),l=o?"^":"",c=n?new RegExp(`${l}${s}.*?(?=\\s${s}|$)`,"gm"):new RegExp(`${l}(?:^)?${s}[^\\s${s}]*`,"gm"),m=a.depth<=0?0:a.before(),me=a.pos,xe=a.doc.textBetween(m,me,"\0","\0"),Ne=Array.from(xe.matchAll(c)).pop();if(!Ne||Ne.input===void 0||Ne.index===void 0)return null;let He=Ne.input.slice(Math.max(0,Ne.index-1),Ne.index),Ye=/^[\s\0]?$/.test(He);if(r&&!Ye)return null;let Je=Ne.index+a.start(),vn=Je+Ne[0].length;return n&&u.test(xe.slice(vn-1,vn+1))&&(Ne[0]+=" ",vn+=1),Je<a.pos&&vn>=a.pos?{range:{from:Je,to:vn},query:Ne[0].slice(t.length),text:Ne[0]}:null}var ZB=new yt("suggestion");function sC({pluginKey:e=ZB,editor:t,char:n="@",allowSpaces:r=!1,prefixSpace:o=!0,startOfLine:a=!1,decorationTag:s="span",decorationClass:u="suggestion",command:l=()=>null,items:c=()=>[],render:m=()=>({}),allow:me=()=>!0}){let xe,Ne=m==null?void 0:m();return new vt({key:e,view(){return{update:async(He,Ye)=>{var Je,vn,La,sr,Zr;let zs=(Je=this.key)===null||Je===void 0?void 0:Je.getState(Ye),za=(vn=this.key)===null||vn===void 0?void 0:vn.getState(He.state),Hs=zs.active&&za.active&&zs.range.from!==za.range.from,lc=!zs.active&&za.active,Ty=zs.active&&!za.active,_y=!lc&&!Ty&&zs.query!==za.query,xy=lc||Hs,Bb=_y&&!Hs,Dy=Ty||Hs;if(!xy&&!Bb&&!Dy)return;let Bg=Dy&&!xy?zs:za,yy=document.querySelector(`[data-decoration-id="${Bg.decorationId}"]`);xe={editor:t,range:Bg.range,query:Bg.query,text:Bg.text,items:Bb||xy?await c({editor:t,query:Bg.query}):[],command:wy=>{l({editor:t,range:Bg.range,props:wy})},decorationNode:yy,clientRect:yy?()=>{var wy;let{decorationId:Ay}=(wy=this.key)===null||wy===void 0?void 0:wy.getState(t.state);return document.querySelector(`[data-decoration-id="${Ay}"]`).getBoundingClientRect()}:null},Dy&&((La=Ne==null?void 0:Ne.onExit)===null||La===void 0||La.call(Ne,xe)),Bb&&((sr=Ne==null?void 0:Ne.onUpdate)===null||sr===void 0||sr.call(Ne,xe)),xy&&((Zr=Ne==null?void 0:Ne.onStart)===null||Zr===void 0||Zr.call(Ne,xe))},destroy:()=>{var He;!xe||(He=Ne==null?void 0:Ne.onExit)===null||He===void 0||He.call(Ne,xe)}}},state:{init(){return{active:!1,range:{},query:null,text:null,composing:!1}},apply(He,Ye){let{composing:Je}=t.view,{selection:vn}=He,{empty:La,from:sr}=vn,Zr={...Ye};if(Zr.composing=Je,La||t.view.composing){(sr<Ye.range.from||sr>Ye.range.to)&&!Je&&!Ye.composing&&(Zr.active=!1);let zs=XB({char:n,allowSpaces:r,prefixSpace:o,startOfLine:a,$position:vn.$from}),za=`id_${Math.floor(Math.random()*4294967295)}`;zs&&me({editor:t,range:zs.range})?(Zr.active=!0,Zr.decorationId=Ye.decorationId?Ye.decorationId:za,Zr.range=zs.range,Zr.query=zs.query,Zr.text=zs.text):Zr.active=!1}else Zr.active=!1;return Zr.active||(Zr.decorationId=null,Zr.range={},Zr.query=null,Zr.text=null),Zr}},props:{handleKeyDown(He,Ye){var Je;let{active:vn,range:La}=this.getState(He.state);return vn&&((Je=Ne==null?void 0:Ne.onKeyDown)===null||Je===void 0?void 0:Je.call(Ne,{view:He,event:Ye,range:La}))||!1},decorations(He){let{active:Ye,range:Je,decorationId:vn}=this.getState(He);return Ye?Xe.create(He.doc,[Yt.inline(Je.from,Je.to,{nodeName:s,class:u,"data-decoration-id":vn})]):null}}})}var ad=e=>Ft.create({name:e,addOptions:()=>({name:e,HTMLAttributes:{},renderLabel({options:t,node:n}){var r;return`${t.suggestion.char}${(r=n.attrs.label)!=null?r:n.attrs.id}`},suggestion:{char:"@",pluginKey:new yt(e),command:({editor:t,range:n,props:r})=>{var o,a;(a=(o=t.view.state.selection.$to.nodeAfter)==null?void 0:o.text)!=null&&a.startsWith(" ")&&(n.to+=1),t.chain().focus().insertContentAt(n,[{type:e,attrs:r},{type:"text",text:" "}]).run()},allow:({editor:t,range:n})=>t.can().insertContentAt(n,{type:e})}}),group:"inline",inline:!0,selectable:!0,atom:!0,addAttributes(){return{id:{default:null,parseHTML:t=>t.getAttribute("data-id"),renderHTML:t=>t.id?{"data-id":t.id}:{}},label:{default:null,parseHTML:t=>t.getAttribute("data-label"),renderHTML:t=>t.label?{"data-label":t.label}:{}}}},parseHTML(){return[{tag:`span[data-mention="${e}"]`}]},renderHTML({node:t,HTMLAttributes:n}){return["span",jt({"data-mention":e},this.options.HTMLAttributes,n),this.options.renderLabel({options:this.options,node:t})]},renderText({node:t}){return this.options.renderLabel({options:this.options,node:t})},addKeyboardShortcuts(){return{Backspace:()=>this.editor.commands.command(({tr:t,state:n})=>{let r=!1,{selection:o}=n,{empty:a,anchor:s}=o;return a?(n.doc.nodesBetween(s-1,s,(u,l)=>{if(u.type.name===this.name)return r=!0,t.insertText(this.options.suggestion.char||"",l,l+u.nodeSize),!1}),r):!1})}},addProseMirrorPlugins(){return[sC({editor:this.editor,...this.options.suggestion})]}});v();var uC=Ft.create({name:"hardBreak",addOptions:()=>({HTMLAttributes:{}}),inline:!0,group:"inline",selectable:!1,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:e}){return["br",jt(this.options.HTMLAttributes,e)]},addCommands(){return{setHardBreak:()=>e=>{let{state:t,editor:n}=e,r=Wt("listItem",t.schema);return e.commands.first([()=>e.commands.exitCode(),()=>{if(t.selection.$anchor.node().textContent.length<=0){let o=xl(a=>xp(a.type.name,n.extensionManager.extensions))(t.selection);if(o)return e.commands.toggleList(o.node.type,r),e.commands.createParagraphNear()}return e.commands.splitListItem(r)},()=>e.commands.insertContent({type:this.name})])}}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}});v();v();fi();var sd=class extends br{constructor(){super(),this.state={selectedIndex:0},this.selectItem=this.selectItem.bind(this)}onKeyDown({event:e}){return e.key==="ArrowUp"?(this.upHandler(),!0):e.key==="ArrowDown"?(this.downHandler(),!0):e.key==="Enter"||e.key==="Tab"?(this.enterHandler(),!0):!1}upHandler(){this.setState({selectedIndex:(this.state.selectedIndex+this.props.items.length-1)%this.props.items.length})}downHandler(){this.setState({selectedIndex:(this.state.selectedIndex+1)%this.props.items.length})}enterHandler(){this.selectItem(this.state.selectedIndex)}selectItem(e){let t=this.props.items[e];t&&this.props.command(t)}componentDidUpdate(e,t){e.items.length!==this.props.items.length&&this.setState({selectedIndex:0})}render(){let{items:e}=this.props,{selectedIndex:t}=this.state;return h("div",null,h("j-menu",null,e.map((n,r)=>h("j-menu-item",{active:r===t,key:r,onClick:()=>this.selectItem(r)},n.label))))}};function ql(){let e=null,t=null;return{onStart:n=>{e=new Yv(sd,{props:n,editor:n.editor}),t=wo("body",{getReferenceClientRect:n.clientRect,appendTo:()=>document.body,content:e.element,showOnCreate:!0,interactive:!0,trigger:"manual",placement:"bottom-start"})},onUpdate(n){e.updateProps(n),t[0].setProps({getReferenceClientRect:n.clientRect})},onKeyDown(n){var r;return(r=e.ref)==null?void 0:r.onKeyDown(n)},onExit(){t[0].destroy(),e.destroy()}}}var ET=li(ST());v();var Qz=`._editorWrapper_14kzo_1 {
  padding-left: var(--j-space-400);
  padding-right: var(--j-space-400);
  padding-top: var(--j-space-300);
  padding-bottom: var(--j-space-300);
  border-radius: var(--j-border-radius);
  border: 1px solid var(--j-border-color);
  display: flex;
  box-sizing: border-box;
}

._editorContent_14kzo_12 {
  width: 100%;
  padding-top: var(--j-space-200);
}

._editorParagraph_14kzo_17:first-of-type {
  padding-top: 0;
  margin-top: 0;
}
._editorParagraph_14kzo_17:last-of-type {
  padding-bottom: 0;
  margin-bottom: 0;
}

._editorMentions_14kzo_26 {
  cursor: pointer;
  padding: 2px var(--j-space-200);
  border-radius: var(--j-border-radius);
  background: var(--j-color-primary-100);
  color: var(--j-color-primary-700);
}`;document.head.appendChild(document.createElement("style")).appendChild(document.createTextNode(Qz));var Oa={editorWrapper:"_editorWrapper_14kzo_1",editorContent:"_editorContent_14kzo_12",editorParagraph:"_editorParagraph_14kzo_17",editorMentions:"_editorMentions_14kzo_26"};function Iy({value:e,onChange:t,onSend:n,members:r=[],channels:o=[]}){let[a,s]=Le(!1),u=pt(),{state:{currentReply:l}}=st(vs),c=pt(n),m=pt(r),me=pt(o);we(()=>{c.current=n},[n]),we(()=>{m.current=r},[r]),we(()=>{me.current=o},[o]),we(()=>{u.current&&u.current.addEventListener("emoji-click",Ne)},[u.current]);let xe=jD({content:e,enableInputRules:!1,editorProps:{attributes:{style:"outline: 0"}},extensions:[UD.extend({addKeyboardShortcuts:()=>({Enter:He=>{let Ye=He.editor.getHTML();return c.current(Ye),!0}})}),$D,zD.configure({HTMLAttributes:{class:Oa.editorParagraph}}),oC,qD,VD,BD,uC,LD,ND,aC,JD,WD,ad("emoji").configure({HTMLAttributes:{class:"emoji"},renderLabel({options:He,node:Ye}){var Je;return(Je=Ye.attrs.label)!=null?Je:Ye.attrs.id},suggestion:{char:":",items:({query:He})=>Object.entries(ET.default.emoji).map(([Ye,Je])=>({id:Ye,label:Je})).filter(Ye=>Ye.id.startsWith(He)).slice(0,10),render:ql}}),ad("neighbourhood-mention").configure({HTMLAttributes:{class:Oa.editorMentions},renderLabel({options:He,node:Ye}){var Je;return`${He.suggestion.char}${(Je=Ye.attrs.label)!=null?Je:Ye.attrs.id}`},suggestion:{char:"#",items:({query:He})=>me.current.filter(Ye=>Ye.label.toLowerCase().startsWith(He.toLowerCase())).slice(0,5),render:ql}}),ad("agent-mention").configure({HTMLAttributes:{class:Oa.editorMentions},renderLabel({options:He,node:Ye}){var Je;return`${He.suggestion.char}${(Je=Ye.attrs.label)!=null?Je:Ye.attrs.id}`},suggestion:{char:"@",items:({query:He})=>m.current.filter(Ye=>Ye.label.toLowerCase().startsWith(He.toLowerCase())).slice(0,5),render:ql}})],onUpdate:He=>{let Ye=He.editor.getJSON();t(Ye)}},[m,me]);we(()=>{xe&&e.length===0&&xe.commands.setContent(e)},[e]),we(()=>{l&&xe.commands.focus()},[l]);function Ne(He){if(xe){let Ye=xe.view.state.selection;xe.chain().focus().insertContentAt(Ye,[{type:"emoji",attrs:{label:He.detail.unicode,id:He.detail.emoji.shortcodes[0],trigger:":"}},{type:"text",text:" "}]).run()}}return h("div",{class:Oa.editor},a&&h("div",null,h("j-button",{variant:"ghost",size:"sm",style:{color:xe.isActive("bold")?"var(--j-color-primary-500)":"inherit"},onClick:()=>xe==null?void 0:xe.chain().toggleBold().focus().run()},h("j-icon",{size:"sm",name:"type-bold"})),h("j-button",{variant:"ghost",size:"sm",style:{color:xe.isActive("italic")?"var(--j-color-primary-500)":"inherit"},onClick:()=>xe==null?void 0:xe.chain().toggleItalic().focus().run()},h("j-icon",{size:"sm",name:"type-italic"})),h("j-button",{variant:"ghost",size:"sm",style:{color:xe.isActive("strike")?"var(--j-color-primary-500)":"inherit"},onClick:()=>xe==null?void 0:xe.chain().toggleStrike().focus().run()},h("j-icon",{size:"sm",name:"type-strikethrough"})),h("j-button",{variant:"ghost",size:"sm",style:{color:xe.isActive("bulletList")?"var(--j-color-primary-500)":"inherit"},onClick:()=>xe==null?void 0:xe.chain().focus().toggleBulletList().run()},h("j-icon",{size:"sm",name:"list-ul"})),h("j-button",{variant:"ghost",size:"sm",style:{color:xe.isActive("orderedList")?"var(--j-color-primary-500)":"inherit"},onClick:()=>xe==null?void 0:xe.chain().focus().toggleOrderedList().run()},h("j-icon",{size:"sm",name:"list-ol"}))),h("div",{class:Oa.editorWrapper},h(RD,{class:Oa.editorContent,editor:xe}),h("j-flex",null,h("j-popover",{placement:"top"},h("j-button",{slot:"trigger",variant:"ghost",size:"sm"},h("j-icon",{size:"sm",name:"emoji-smile"})),h("div",{slot:"content"},h("emoji-picker",{ref:u,onEmojiClick:Ne}))),h("j-button",{variant:"ghost",size:"sm",onClick:()=>s(!a)},h("j-icon",{size:"sm",name:"type"})),h("j-button",{onClick:()=>c.current(xe.getHTML()),variant:"primary",size:"sm",square:!0,circle:!0},h("j-icon",{size:"sm",name:"send"})))))}v();var Yz=`._footer_8eu9n_1 {
  position: relative;
  border-top: 1px solid var(--j-border-color);
  padding: var(--j-space-400) var(--j-space-500) var(--j-space-400) var(--j-space-500);
}

._currentReply_8eu9n_7 {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding-bottom: var(--j-space-400);
  max-height: 200px;
  overflow-y: auto;
}`;document.head.appendChild(document.createElement("style")).appendChild(document.createTextNode(Yz));var My={footer:"_footer_8eu9n_1",currentReply:"_currentReply_8eu9n_7"};function Py(){let{state:{members:e,channels:t,url:n,sourceUrl:r}}=st(il),[o,a]=Le(""),{state:{keyedMessages:s},methods:{sendMessage:u,sendReply:l}}=st(na),{state:{currentReply:c},methods:{setCurrentReply:m}}=st(vs),me=s[c],xe=e[me==null?void 0:me.author]||{};function Ne(Je){Je.replace(/( |<([^>]+)>)/gi,"")&&(me?l(Je,me.id):u(Je),a(""),m(""))}let He=Lo(()=>Object.values(e).map(Je=>({label:Je.username,id:Je.did,trigger:"@"})),[e]),Ye=Lo(()=>Object.values(t).map(Je=>({label:Je.name,id:Je.id,trigger:"#"})),[t]);return h("footer",{class:My.footer},c&&h("div",{class:My.currentReply},h("j-text",{size:"400",nomargin:!0},"Replying to @",xe.username),h("j-button",{onClick:()=>m(""),square:!0,circle:!0,size:"xs",variant:"subtle"},h("j-icon",{size:"sm",name:"x"}))),h(Iy,{value:o,onChange:a,onSend:Ne,members:He,channels:Ye}))}v();v();v();v();var Jz=`._message_1oun4_1 {
  padding-top: var(--j-space-300);
  padding-bottom: var(--j-space-300);
  padding-left: var(--j-space-500);
  display: grid;
  position: relative;
  grid-template-columns: 60px 1fr;
  column-gap: var(--j-space-100);
}
._message_1oun4_1:hover {
  background: rgba(0, 0, 0, 0.02);
}
._message_1oun4_1 ._messageAvatar_1oun4_13 {
  cursor: pointer;
}
._message_1oun4_1 ._timestamp_1oun4_16 {
  font-size: var(--j-font-size-300);
  color: var(--j-color-ui-300);
}
._message_1oun4_1 ._timestampLeft_1oun4_20 {
  font-size: var(--j-font-size-300);
  color: var(--j-color-ui-300);
  opacity: 0;
}
._message_1oun4_1:hover ._timestampLeft_1oun4_20 {
  opacity: 1;
}
._message_1oun4_1 ._chat-view-toolbar_1oun4_28 {
  position: absolute;
  opacity: 0;
  position: absolute;
  right: 0;
  top: 0;
  height: 40px;
  background: none;
  -webkit-app-region: drag;
}
._message_1oun4_1:hover ._chat-view-toolbar_1oun4_28 {
  opacity: 1;
}
._message_1oun4_1 ._messageItemContent_1oun4_41 p:first-of-type {
  user-select: text !important;
  margin-top: 0;
}
._message_1oun4_1 ._messageItemContent_1oun4_41 p:last-of-type {
  user-select: text !important;
  margin-bottom: 0;
}
._message_1oun4_1 ._messageUsername_1oun4_49 {
  cursor: pointer;
  color: var(--j-color-black);
  font-size: var(--j-font-size-500);
  font-weight: 400;
}
._message_1oun4_1 ._messageUsername_1oun4_49:hover {
  text-decoration: underline;
}
._message_1oun4_1 ._messageUsernameNoMargin_1oun4_58 {
  color: var(--j-color-ui-600);
  font-size: var(--j-font-size-500);
  font-weight: 400;
}

._messageItemHeader_1oun4_64 {
  display: flex;
  align-items: center;
  gap: var(--j-space-200);
  margin-bottom: var(--j-space-200);
}

._replyLineWrapper_1oun4_71 {
  position: relative;
}

._replyLine_1oun4_71 {
  display: block;
  position: absolute;
  top: 5px;
  right: 0;
  width: 70%;
  height: 15px;
  border-left: 2px solid var(--j-color-ui-200);
  border-top: 2px solid var(--j-color-ui-200);
  border-top-left-radius: var(--j-border-radius);
}

._messageFlex_1oun4_87 {
  display: flex;
  gap: var(--j-space-200);
  align-items: center;
  margin-bottom: var(--j-space-200);
}

._replyContent_1oun4_94 {
  max-height: 15px;
  line-height: 15px;
  overflow: hidden;
  text-overflow: ellipsis;
  font-size: 12px;
  color: var(--j-color-ui-400);
}

._replyContent_1oun4_94 p:first-of-type {
  margin-top: 0;
}

._messageToolbar_1oun4_107 {
  display: flex;
  position: absolute;
  z-index: 100;
  background: var(--j-color-white);
  border-radius: var(--j-border-radius);
  box-shadow: var(--j-depth-100);
  top: -10px;
  right: var(--j-space-500);
}

._emojiButton_1oun4_118 {
  background: var(--j-color-white);
  color: var(--j-color-black);
  display: flex;
  gap: var(--j-space-200);
  align-items: center;
  cursor: pointer;
  border-radius: var(--j-border-radius);
  border: 1px solid var(--j-color-ui-200);
}

._emojiButtonActive_1oun4_129 {
  background-color: var(--j-color-primary-50);
  border: 1px solid var(--j-color-primary-500);
}

j-tooltip::part(base) {
  display: inline;
}`;document.head.appendChild(document.createElement("style")).appendChild(document.createTextNode(Jz));var Kt={message:"_message_1oun4_1",messageAvatar:"_messageAvatar_1oun4_13",timestamp:"_timestamp_1oun4_16",timestampLeft:"_timestampLeft_1oun4_20","chat-view-toolbar":"_chat-view-toolbar_1oun4_28",messageItemContent:"_messageItemContent_1oun4_41",messageUsername:"_messageUsername_1oun4_49",messageUsernameNoMargin:"_messageUsernameNoMargin_1oun4_58",messageItemHeader:"_messageItemHeader_1oun4_64",replyLineWrapper:"_replyLineWrapper_1oun4_71",replyLine:"_replyLine_1oun4_71",messageFlex:"_messageFlex_1oun4_87",replyContent:"_replyContent_1oun4_94",messageToolbar:"_messageToolbar_1oun4_107",emojiButton:"_emojiButton_1oun4_118",emojiButtonActive:"_emojiButtonActive_1oun4_129"};function jy({onReplyClick:e,onOpenEmojiPicker:t}){return h("div",{class:Kt.messageToolbar},h("j-button",{onClick:t,variant:"ghost",size:"sm"},h("j-icon",{size:"sm",name:"emoji-smile"})),h("j-button",{onClick:e,variant:"ghost",size:"sm"},h("j-icon",{size:"sm",name:"reply"})))}v();function Xz(e){let t=e.reduce((n,r)=>{let o=n[r.content]||{authors:[],count:0};return{...n,[r.content]:{authors:[...o.authors,r.author],content:r.content,count:o.count+1}}},{});return Object.values(t)}function Fy({onEmojiClick:e,reactions:t=[]}){let n=Xz(t),{state:r}=st(ug);return h("div",{style:{display:"flex",gap:"var(--j-space-200)"}},n.map((o,a)=>{let s=o.authors.find(u=>u===r.did)?Kt.emojiButtonActive:"";return h("button",{class:`${Kt.emojiButton} ${s}`,onClick:()=>e(o.content),key:a},h("span",null,String.fromCodePoint(parseInt(`0x${o.content}`))),h("span",null,o.count))}))}v();v();function qt(e){if(e===null||e===!0||e===!1)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}v();v();function _e(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function et(e){_e(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new Date(e.getTime()):typeof e=="number"||t==="[object Number]"?new Date(e):((typeof e=="string"||t==="[object String]")&&typeof console!="undefined"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn(new Error().stack)),new Date(NaN))}v();function Ry(e,t){_e(2,arguments);var n=et(e).getTime(),r=qt(t);return new Date(n+r)}v();v();function qi(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}v();function ld(e){_e(1,arguments);var t=et(e);return t.setHours(0,0,0,0),t}var Zz=864e5;function Ny(e,t){_e(2,arguments);var n=ld(e),r=ld(t),o=n.getTime()-qi(n),a=r.getTime()-qi(r);return Math.round((o-a)/Zz)}v();var Kl=6e4,Ly=36e5;v();v();function $y(e){return _e(1,arguments),e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function By(e){if(_e(1,arguments),!$y(e)&&typeof e!="number")return!1;var t=et(e);return!isNaN(Number(t))}v();function qy(e,t){return _e(2,arguments),et(e).getTime()-et(t).getTime()}v();var kT={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(e){return e<0?Math.ceil(e):Math.floor(e)}},tU="trunc";function DT(e){return e?kT[e]:kT[tU]}v();function cd(e,t,n){_e(2,arguments);var r=qy(e,t)/Kl;return DT(n==null?void 0:n.roundingMethod)(r)}v();v();v();var rU={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},nU=function(e,t,n){var r,o=rU[e];return typeof o=="string"?r=o:t===1?r=o.one:r=o.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r},CT=nU;v();v();function Gl(e){return function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.width?String(t.width):e.defaultWidth,r=e.formats[n]||e.formats[e.defaultWidth];return r}}var iU={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},oU={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},aU={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},sU={date:Gl({formats:iU,defaultWidth:"full"}),time:Gl({formats:oU,defaultWidth:"full"}),dateTime:Gl({formats:aU,defaultWidth:"full"})},OT=sU;v();var uU={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},lU=function(e,t,n,r){return uU[e]},TT=lU;v();v();function Ta(e){return function(t,n){var r=n||{},o=r.context?String(r.context):"standalone",a;if(o==="formatting"&&e.formattingValues){var s=e.defaultFormattingWidth||e.defaultWidth,u=r.width?String(r.width):s;a=e.formattingValues[u]||e.formattingValues[s]}else{var l=e.defaultWidth,c=r.width?String(r.width):e.defaultWidth;a=e.values[c]||e.values[l]}var m=e.argumentCallback?e.argumentCallback(t):t;return a[m]}}var cU={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},fU={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},pU={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},dU={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},hU={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},mU={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},gU=function(e,t){var n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},vU={ordinalNumber:gU,era:Ta({values:cU,defaultWidth:"wide"}),quarter:Ta({values:fU,defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:Ta({values:pU,defaultWidth:"wide"}),day:Ta({values:dU,defaultWidth:"wide"}),dayPeriod:Ta({values:hU,defaultWidth:"wide",formattingValues:mU,defaultFormattingWidth:"wide"})},AT=vU;v();v();function Aa(e){return function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.width,o=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],a=t.match(o);if(!a)return null;var s=a[0],u=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(u)?_U(u,function(me){return me.test(s)}):yU(u,function(me){return me.test(s)}),c;c=e.valueCallback?e.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;var m=t.slice(s.length);return{value:c,rest:m}}}function yU(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t(e[n]))return n}function _U(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n}v();function Vy(e){return function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=t.match(e.matchPattern);if(!r)return null;var o=r[0],a=t.match(e.parsePattern);if(!a)return null;var s=e.valueCallback?e.valueCallback(a[0]):a[0];s=n.valueCallback?n.valueCallback(s):s;var u=t.slice(o.length);return{value:s,rest:u}}}var bU=/^(\d+)(th|st|nd|rd)?/i,wU=/\d+/i,xU={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},SU={any:[/^b/i,/^(a|c)/i]},EU={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},kU={any:[/1/i,/2/i,/3/i,/4/i]},DU={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},CU={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},OU={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},TU={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},AU={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},IU={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},MU={ordinalNumber:Vy({matchPattern:bU,parsePattern:wU,valueCallback:function(e){return parseInt(e,10)}}),era:Aa({matchPatterns:xU,defaultMatchWidth:"wide",parsePatterns:SU,defaultParseWidth:"any"}),quarter:Aa({matchPatterns:EU,defaultMatchWidth:"wide",parsePatterns:kU,defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:Aa({matchPatterns:DU,defaultMatchWidth:"wide",parsePatterns:CU,defaultParseWidth:"any"}),day:Aa({matchPatterns:OU,defaultMatchWidth:"wide",parsePatterns:TU,defaultParseWidth:"any"}),dayPeriod:Aa({matchPatterns:AU,defaultMatchWidth:"any",parsePatterns:IU,defaultParseWidth:"any"})},IT=MU,PU={code:"en-US",formatDistance:CT,formatLong:OT,formatRelative:TT,localize:AT,match:IT,options:{weekStartsOn:0,firstWeekContainsDate:1}},fd=PU;v();function Gs(e,t){_e(2,arguments);var n=qt(t);return Ry(e,-n)}v();v();var jU=864e5;function zy(e){_e(1,arguments);var t=et(e),n=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var r=t.getTime(),o=n-r;return Math.floor(o/jU)+1}v();v();function Do(e){_e(1,arguments);var t=1,n=et(e),r=n.getUTCDay(),o=(r<t?7:0)+r-t;return n.setUTCDate(n.getUTCDate()-o),n.setUTCHours(0,0,0,0),n}v();v();function Ql(e){_e(1,arguments);var t=et(e),n=t.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(n+1,0,4),r.setUTCHours(0,0,0,0);var o=Do(r),a=new Date(0);a.setUTCFullYear(n,0,4),a.setUTCHours(0,0,0,0);var s=Do(a);return t.getTime()>=o.getTime()?n+1:t.getTime()>=s.getTime()?n:n-1}function Uy(e){_e(1,arguments);var t=Ql(e),n=new Date(0);n.setUTCFullYear(t,0,4),n.setUTCHours(0,0,0,0);var r=Do(n);return r}var FU=6048e5;function Wy(e){_e(1,arguments);var t=et(e),n=Do(t).getTime()-Uy(t).getTime();return Math.round(n/FU)+1}v();v();function Co(e,t){_e(1,arguments);var n=t||{},r=n.locale,o=r&&r.options&&r.options.weekStartsOn,a=o==null?0:qt(o),s=n.weekStartsOn==null?a:qt(n.weekStartsOn);if(!(s>=0&&s<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var u=et(e),l=u.getUTCDay(),c=(l<s?7:0)+l-s;return u.setUTCDate(u.getUTCDate()-c),u.setUTCHours(0,0,0,0),u}v();v();function Yl(e,t){_e(1,arguments);var n=et(e),r=n.getUTCFullYear(),o=t||{},a=o.locale,s=a&&a.options&&a.options.firstWeekContainsDate,u=s==null?1:qt(s),l=o.firstWeekContainsDate==null?u:qt(o.firstWeekContainsDate);if(!(l>=1&&l<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var c=new Date(0);c.setUTCFullYear(r+1,0,l),c.setUTCHours(0,0,0,0);var m=Co(c,t),me=new Date(0);me.setUTCFullYear(r,0,l),me.setUTCHours(0,0,0,0);var xe=Co(me,t);return n.getTime()>=m.getTime()?r+1:n.getTime()>=xe.getTime()?r:r-1}function Hy(e,t){_e(1,arguments);var n=t||{},r=n.locale,o=r&&r.options&&r.options.firstWeekContainsDate,a=o==null?1:qt(o),s=n.firstWeekContainsDate==null?a:qt(n.firstWeekContainsDate),u=Yl(e,t),l=new Date(0);l.setUTCFullYear(u,0,s),l.setUTCHours(0,0,0,0);var c=Co(l,t);return c}var RU=6048e5;function Ky(e,t){_e(1,arguments);var n=et(e),r=Co(n,t).getTime()-Hy(n,t).getTime();return Math.round(r/RU)+1}v();function Ve(e,t){for(var n=e<0?"-":"",r=Math.abs(e).toString();r.length<t;)r="0"+r;return n+r}v();var NU={y:function(e,t){var n=e.getUTCFullYear(),r=n>0?n:1-n;return Ve(t==="yy"?r%100:r,t.length)},M:function(e,t){var n=e.getUTCMonth();return t==="M"?String(n+1):Ve(n+1,2)},d:function(e,t){return Ve(e.getUTCDate(),t.length)},a:function(e,t){var n=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h:function(e,t){return Ve(e.getUTCHours()%12||12,t.length)},H:function(e,t){return Ve(e.getUTCHours(),t.length)},m:function(e,t){return Ve(e.getUTCMinutes(),t.length)},s:function(e,t){return Ve(e.getUTCSeconds(),t.length)},S:function(e,t){var n=t.length,r=e.getUTCMilliseconds(),o=Math.floor(r*Math.pow(10,n-3));return Ve(o,t.length)}},Vi=NU,Qs={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},LU={G:function(e,t,n){var r=e.getUTCFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){var r=e.getUTCFullYear(),o=r>0?r:1-r;return n.ordinalNumber(o,{unit:"year"})}return Vi.y(e,t)},Y:function(e,t,n,r){var o=Yl(e,r),a=o>0?o:1-o;if(t==="YY"){var s=a%100;return Ve(s,2)}return t==="Yo"?n.ordinalNumber(a,{unit:"year"}):Ve(a,t.length)},R:function(e,t){var n=Ql(e);return Ve(n,t.length)},u:function(e,t){var n=e.getUTCFullYear();return Ve(n,t.length)},Q:function(e,t,n){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return Ve(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return Ve(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){var r=e.getUTCMonth();switch(t){case"M":case"MM":return Vi.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){var r=e.getUTCMonth();switch(t){case"L":return String(r+1);case"LL":return Ve(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){var o=Ky(e,r);return t==="wo"?n.ordinalNumber(o,{unit:"week"}):Ve(o,t.length)},I:function(e,t,n){var r=Wy(e);return t==="Io"?n.ordinalNumber(r,{unit:"week"}):Ve(r,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getUTCDate(),{unit:"date"}):Vi.d(e,t)},D:function(e,t,n){var r=zy(e);return t==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):Ve(r,t.length)},E:function(e,t,n){var r=e.getUTCDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){var o=e.getUTCDay(),a=(o-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(a);case"ee":return Ve(a,2);case"eo":return n.ordinalNumber(a,{unit:"day"});case"eee":return n.day(o,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(o,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(o,{width:"short",context:"formatting"});case"eeee":default:return n.day(o,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){var o=e.getUTCDay(),a=(o-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(a);case"cc":return Ve(a,t.length);case"co":return n.ordinalNumber(a,{unit:"day"});case"ccc":return n.day(o,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(o,{width:"narrow",context:"standalone"});case"cccccc":return n.day(o,{width:"short",context:"standalone"});case"cccc":default:return n.day(o,{width:"wide",context:"standalone"})}},i:function(e,t,n){var r=e.getUTCDay(),o=r===0?7:r;switch(t){case"i":return String(o);case"ii":return Ve(o,t.length);case"io":return n.ordinalNumber(o,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){var r=e.getUTCHours(),o=r/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},b:function(e,t,n){var r=e.getUTCHours(),o;switch(r===12?o=Qs.noon:r===0?o=Qs.midnight:o=r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},B:function(e,t,n){var r=e.getUTCHours(),o;switch(r>=17?o=Qs.evening:r>=12?o=Qs.afternoon:r>=4?o=Qs.morning:o=Qs.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){var r=e.getUTCHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Vi.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getUTCHours(),{unit:"hour"}):Vi.H(e,t)},K:function(e,t,n){var r=e.getUTCHours()%12;return t==="Ko"?n.ordinalNumber(r,{unit:"hour"}):Ve(r,t.length)},k:function(e,t,n){var r=e.getUTCHours();return r===0&&(r=24),t==="ko"?n.ordinalNumber(r,{unit:"hour"}):Ve(r,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):Vi.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):Vi.s(e,t)},S:function(e,t){return Vi.S(e,t)},X:function(e,t,n,r){var o=r._originalDate||e,a=o.getTimezoneOffset();if(a===0)return"Z";switch(t){case"X":return PT(a);case"XXXX":case"XX":return Ia(a);case"XXXXX":case"XXX":default:return Ia(a,":")}},x:function(e,t,n,r){var o=r._originalDate||e,a=o.getTimezoneOffset();switch(t){case"x":return PT(a);case"xxxx":case"xx":return Ia(a);case"xxxxx":case"xxx":default:return Ia(a,":")}},O:function(e,t,n,r){var o=r._originalDate||e,a=o.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+MT(a,":");case"OOOO":default:return"GMT"+Ia(a,":")}},z:function(e,t,n,r){var o=r._originalDate||e,a=o.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+MT(a,":");case"zzzz":default:return"GMT"+Ia(a,":")}},t:function(e,t,n,r){var o=r._originalDate||e,a=Math.floor(o.getTime()/1e3);return Ve(a,t.length)},T:function(e,t,n,r){var o=r._originalDate||e,a=o.getTime();return Ve(a,t.length)}};function MT(e,t){var n=e>0?"-":"+",r=Math.abs(e),o=Math.floor(r/60),a=r%60;if(a===0)return n+String(o);var s=t||"";return n+String(o)+s+Ve(a,2)}function PT(e,t){if(e%60==0){var n=e>0?"-":"+";return n+Ve(Math.abs(e)/60,2)}return Ia(e,t)}function Ia(e,t){var n=t||"",r=e>0?"-":"+",o=Math.abs(e),a=Ve(Math.floor(o/60),2),s=Ve(o%60,2);return r+a+n+s}var jT=LU;v();function FT(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}}function RT(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}}function $U(e,t){var n=e.match(/(P+)(p+)?/)||[],r=n[1],o=n[2];if(!o)return FT(e,t);var a;switch(r){case"P":a=t.dateTime({width:"short"});break;case"PP":a=t.dateTime({width:"medium"});break;case"PPP":a=t.dateTime({width:"long"});break;case"PPPP":default:a=t.dateTime({width:"full"});break}return a.replace("{{date}}",FT(r,t)).replace("{{time}}",RT(o,t))}var BU={p:RT,P:$U},NT=BU;v();var qU=["D","DD"],VU=["YY","YYYY"];function LT(e){return qU.indexOf(e)!==-1}function $T(e){return VU.indexOf(e)!==-1}function Gy(e,t,n){if(e==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://git.io/fxCyr"));if(e==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://git.io/fxCyr"));if(e==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://git.io/fxCyr"));if(e==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://git.io/fxCyr"))}var zU=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,UU=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,WU=/^'([^]*?)'?$/,HU=/''/g,KU=/[a-zA-Z]/;function Oo(e,t,n){_e(2,arguments);var r=String(t),o=n||{},a=o.locale||fd,s=a.options&&a.options.firstWeekContainsDate,u=s==null?1:qt(s),l=o.firstWeekContainsDate==null?u:qt(o.firstWeekContainsDate);if(!(l>=1&&l<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var c=a.options&&a.options.weekStartsOn,m=c==null?0:qt(c),me=o.weekStartsOn==null?m:qt(o.weekStartsOn);if(!(me>=0&&me<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!a.localize)throw new RangeError("locale must contain localize property");if(!a.formatLong)throw new RangeError("locale must contain formatLong property");var xe=et(e);if(!By(xe))throw new RangeError("Invalid time value");var Ne=qi(xe),He=Gs(xe,Ne),Ye={firstWeekContainsDate:l,weekStartsOn:me,locale:a,_originalDate:xe},Je=r.match(UU).map(function(vn){var La=vn[0];if(La==="p"||La==="P"){var sr=NT[La];return sr(vn,a.formatLong,Ye)}return vn}).join("").match(zU).map(function(vn){if(vn==="''")return"'";var La=vn[0];if(La==="'")return GU(vn);var sr=jT[La];if(sr)return!o.useAdditionalWeekYearTokens&&$T(vn)&&Gy(vn,t,e),!o.useAdditionalDayOfYearTokens&&LT(vn)&&Gy(vn,t,e),sr(He,vn,a.localize,Ye);if(La.match(KU))throw new RangeError("Format string contains an unescaped latin alphabet character `"+La+"`");return vn}).join("");return Je}function GU(e){return e.match(WU)[1].replace(HU,"'")}v();function pd(e,t,n){_e(2,arguments);var r=et(e),o=et(t),a=n||{},s=a.locale,u=s===void 0?fd:s,l=a.weekStartsOn,c=l===void 0?0:l;if(!u.localize)throw new RangeError("locale must contain localize property");if(!u.formatLong)throw new RangeError("locale must contain formatLong property");if(!u.formatRelative)throw new RangeError("locale must contain formatRelative property");var m=Ny(r,o);if(isNaN(m))throw new RangeError("Invalid time value");var me;m<-6?me="other":m<-1?me="lastWeek":m<0?me="yesterday":m<1?me="today":m<2?me="tomorrow":m<7?me="nextWeek":me="other";var xe=Gs(r,qi(r)),Ne=Gs(o,qi(o)),He=u.formatRelative(me,xe,Ne,{locale:u,weekStartsOn:c});return Oo(r,He,{locale:u,weekStartsOn:c})}v();function Jl(e,t){_e(1,arguments);var n=t||{},r=n.additionalDigits==null?2:qt(n.additionalDigits);if(r!==2&&r!==1&&r!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(!(typeof e=="string"||Object.prototype.toString.call(e)==="[object String]"))return new Date(NaN);var o=XU(e),a;if(o.date){var s=ZU(o.date,r);a=eW(s.restDateString,s.year)}if(!a||isNaN(a.getTime()))return new Date(NaN);var u=a.getTime(),l=0,c;if(o.time&&(l=tW(o.time),isNaN(l)))return new Date(NaN);if(o.timezone){if(c=rW(o.timezone),isNaN(c))return new Date(NaN)}else{var m=new Date(u+l),me=new Date(0);return me.setFullYear(m.getUTCFullYear(),m.getUTCMonth(),m.getUTCDate()),me.setHours(m.getUTCHours(),m.getUTCMinutes(),m.getUTCSeconds(),m.getUTCMilliseconds()),me}return new Date(u+l+c)}var dd={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},QU=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,YU=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,JU=/^([+-])(\d{2})(?::?(\d{2}))?$/;function XU(e){var t={},n=e.split(dd.dateTimeDelimiter),r;if(n.length>2)return t;if(/:/.test(n[0])?r=n[0]:(t.date=n[0],r=n[1],dd.timeZoneDelimiter.test(t.date)&&(t.date=e.split(dd.timeZoneDelimiter)[0],r=e.substr(t.date.length,e.length))),r){var o=dd.timezone.exec(r);o?(t.time=r.replace(o[1],""),t.timezone=o[1]):t.time=r}return t}function ZU(e,t){var n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),r=e.match(n);if(!r)return{year:NaN,restDateString:""};var o=r[1]?parseInt(r[1]):null,a=r[2]?parseInt(r[2]):null;return{year:a===null?o:a*100,restDateString:e.slice((r[1]||r[2]).length)}}function eW(e,t){if(t===null)return new Date(NaN);var n=e.match(QU);if(!n)return new Date(NaN);var r=!!n[4],o=Xl(n[1]),a=Xl(n[2])-1,s=Xl(n[3]),u=Xl(n[4]),l=Xl(n[5])-1;if(r)return sW(t,u,l)?nW(t,u,l):new Date(NaN);var c=new Date(0);return!oW(t,a,s)||!aW(t,o)?new Date(NaN):(c.setUTCFullYear(t,a,Math.max(o,s)),c)}function Xl(e){return e?parseInt(e):1}function tW(e){var t=e.match(YU);if(!t)return NaN;var n=Qy(t[1]),r=Qy(t[2]),o=Qy(t[3]);return uW(n,r,o)?n*Ly+r*Kl+o*1e3:NaN}function Qy(e){return e&&parseFloat(e.replace(",","."))||0}function rW(e){if(e==="Z")return 0;var t=e.match(JU);if(!t)return 0;var n=t[1]==="+"?-1:1,r=parseInt(t[2]),o=t[3]&&parseInt(t[3])||0;return lW(r,o)?n*(r*Ly+o*Kl):NaN}function nW(e,t,n){var r=new Date(0);r.setUTCFullYear(e,0,4);var o=r.getUTCDay()||7,a=(t-1)*7+n+1-o;return r.setUTCDate(r.getUTCDate()+a),r}var iW=[31,null,31,30,31,30,31,31,30,31,30,31];function BT(e){return e%400==0||e%4==0&&e%100!=0}function oW(e,t,n){return t>=0&&t<=11&&n>=1&&n<=(iW[t]||(BT(e)?29:28))}function aW(e,t){return t>=1&&t<=(BT(e)?366:365)}function sW(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}function uW(e,t,n){return e===24?t===0&&n===0:n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}function lW(e,t){return t>=0&&t<=59}v();v();var cW=`._skeleton_1qen2_1 {
  border-radius: var(--j-border-radius);
  background: linear-gradient(90deg, var(--j-color-ui-100) 0%, var(--j-color-ui-200) 50%, var(--j-color-ui-100) 100%);
  animation: _placeHolderShimmer_1qen2_1 10s linear infinite;
}

._skeleton_1qen2_1._skeletonCircle_1qen2_7 {
  width: 60px;
  height: 60px;
  border-radius: 50%;
  animation: _placeHolderShimmer_1qen2_1 30s linear infinite;
}

@keyframes _placeHolderShimmer_1qen2_1 {
  0% {
    background-position: -500px 0;
  }
  100% {
    background-position: 500px 0;
  }
}`;document.head.appendChild(document.createElement("style")).appendChild(document.createTextNode(cW));var Yy={skeleton:"_skeleton_1qen2_1",placeHolderShimmer:"_placeHolderShimmer_1qen2_1",skeletonCircle:"_skeletonCircle_1qen2_7"};function Ys({width:e="100%",height:t=20,variant:n="rectangle"}){return h("div",{class:`${Yy.skeleton} ${n==="circle"?Yy.skeletonCircle:""}`,style:{width:e,height:t}})}function Jy({index:e,showAvatar:t,onOpenEmojiPicker:n,mainRef:r}){var zs,za;let[o,a]=Le(!1),s=pt(null),{state:{members:u}}=st(il),{state:{messages:l,keyedMessages:c},methods:{addReaction:m,removeReaction:me}}=st(na),{state:{currentReply:xe},methods:{setCurrentReply:Ne}}=st(vs),He=l[e];function Ye(){Ne(He.id)}async function Je(Hs){console.log({utf:Hs});let lc=await Hn(),Ty=He.reactions.find(_y=>(console.log({reaction:_y,utf:Hs}),_y.author===lc.did&&_y.content===Hs));Ty?me({author:Ty.author,data:{predicate:Wn,target:Ty.content,source:He.id},proof:{invalid:!1,key:"",signature:"",valid:!0},timestamp:Ty.timestamp}):m(He.id,Hs)}we(()=>{var _y,xy,Bb,Dy,Bg,yy;let Hs=s.current.querySelectorAll("[data-mention]"),lc=s.current.querySelectorAll(".emoji");for(let wy of lc){let Ay=wy;if(((_y=Ay.parentNode)==null?void 0:_y.nodeName)!=="J-TOOLTIP"){var Ty=document.createElement("j-tooltip");Ty.title=`:${Ay.dataset.id}:`,Ty.classList.add("emojitoolip"),Ty.placement="top",(xy=Ay.parentNode)==null||xy.insertBefore(Ty,Ay),Ty.appendChild(Ay),((Bg=(Dy=(Bb=Ay.parentNode)==null?void 0:Bb.nextSibling)==null?void 0:Dy.textContent)==null?void 0:Bg.trim().length)===0&&((yy=Ay.parentNode)==null||yy.nextSibling.remove())}}for(let wy of Hs){let Ay=wy;Ay.addEventListener("click",()=>{if(Ay.innerText.startsWith("#")){let $b=new CustomEvent("perspective-click",{detail:{uuid:Ay.dataset.id},bubbles:!0});r==null||r.dispatchEvent($b)}else if(Ay.innerText.startsWith("@")){let $b=new CustomEvent("agent-click",{detail:{did:Ay.dataset.id},bubbles:!0});r==null||r.dispatchEvent($b)}})}},[s]);function vn(Hs){let lc=new CustomEvent("agent-click",{detail:{did:Hs},bubbles:!0});r==null||r.dispatchEvent(lc)}let La=u[He.author]||{},sr=u[(zs=He==null?void 0:He.replies[0])==null?void 0:zs.author]||{},Zr=He==null?void 0:He.replies[0];return h("div",{onMouseOver:()=>a(!0),onMouseLeave:()=>a(!1),class:Kt.message,isReplying:((za=c[xe])==null?void 0:za.id)===He.id},Zr&&h(Fragment,null,h("div",{class:Kt.replyLineWrapper},h("div",{class:Kt.replyLine})),h("div",{class:Kt.messageFlex},h("div",{class:Kt.messageFlex,onClick:()=>vn(sr==null?void 0:sr.did)},sr!=null&&sr.did?h("j-avatar",{class:Kt.messageAvatar,style:"--j-avatar-size: 20px",src:sr==null?void 0:sr.thumbnailPicture,hash:sr==null?void 0:sr.did}):h(Ys,{variant:"circle",width:20,height:20}),sr.username?h("div",{class:Kt.messageUsernameNoMargin},sr==null?void 0:sr.username):h("div",{style:{marginBottom:5}},h(Ys,{width:60,height:20}))),h("div",{class:Kt.replyContent,dangerouslySetInnerHTML:{__html:Zr.content}}))),h("div",null,Zr||t?h("j-flex",null,La!=null&&La.did?h("j-avatar",{class:Kt.messageAvatar,src:La==null?void 0:La.thumbnailPicture,hash:La==null?void 0:La.did,onClick:()=>vn(La==null?void 0:La.did)}):h(Ys,{variant:"circle",width:42,height:42})):h("small",{class:Kt.timestampLeft,"data-rh":!0,"data-timestamp":Oo(new Date(He.timestamp),"EEEE, MMMM d, yyyy, HH:MM")},Oo(new Date(He.timestamp),"HH:MM "))),h("div",null,(Zr||t)&&h("header",{class:Kt.messageItemHeader},La!=null&&La.username?h("div",{onClick:()=>vn(La==null?void 0:La.did),class:Kt.messageUsername},La==null?void 0:La.username):h("div",{style:{marginBottom:5}},h(Ys,{width:60,height:20})),h("small",{class:Kt.timestamp,"data-rh":!0,"data-timestamp":Oo(new Date(He.timestamp),"EEEE, MMMM d, yyyy, HH:MM")},pd(new Date(He.timestamp),new Date))),h("div",{ref:s,class:Kt.messageItemContent,dangerouslySetInnerHTML:{__html:He.content}}),He.reactions.length>0&&h("j-box",{pt:"400"},h(Fy,{onEmojiClick:Je,reactions:He.reactions}))),h("div",null,o&&h(jy,{onReplyClick:Ye,onOpenEmojiPicker:n})))}v();v();v();var hd=0,To=1,Js=2,qT=4;function Xs(e,t){return function(n){return e(t(n))}}function fW(e,t){return t(e)}function Xy(e,t){return function(n){return e(t,n)}}function Zy(e,t){return function(){return e(t)}}function Zs(e,t){return t(e),e}function bt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t}function pW(e){e()}function e_(e){return function(){return e}}function dW(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(){t.map(pW)}}function Ao(){}function Be(e,t){return e(To,t)}function ze(e,t){e(hd,t)}function md(e){e(Js)}function hn(e){return e(qT)}function pe(e,t){return Be(e,Xy(t,hd))}function Io(e,t){var n=e(To,function(r){n(),t(r)});return n}function he(){var e=[];return function(t,n){switch(t){case Js:e.splice(0,e.length);return;case To:return e.push(n),function(){var r=e.indexOf(n);r>-1&&e.splice(r,1)};case hd:e.slice().forEach(function(r){r(n)});return;default:throw new Error("unrecognized action "+t)}}}function J(e){var t=e,n=he();return function(r,o){switch(r){case To:var a=o;a(t);break;case hd:t=o;break;case qT:return t}return n(r,o)}}function VT(e){var t,n,r=function(){return t&&t()};return function(o,a){switch(o){case To:return a?n===a?void 0:(r(),n=a,t=Be(e,a),t):(r(),Ao);case Js:r(),n=null;return;default:throw new Error("unrecognized action "+o)}}}function Ur(e){return Zs(he(),function(t){return pe(e,t)})}function Or(e,t){return Zs(J(t),function(n){return pe(e,n)})}function hW(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return t.reduceRight(fW,r)}}function H(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var o=hW.apply(void 0,n);return function(a,s){switch(a){case To:return Be(e,o(s));case Js:md(e);return;default:throw new Error("unrecognized action "+a)}}}function zT(e,t){return e===t}function Dt(e){e===void 0&&(e=zT);var t;return function(n){return function(r){e(t,r)||(t=r,n(r))}}}function Ce(e){return function(t){return function(n){e(n)&&t(n)}}}function ne(e){return function(t){return Xs(t,e)}}function zi(e){return function(t){return function(){return t(e)}}}function ri(e,t){return function(n){return function(r){return n(t=e(t,r))}}}function Zl(e){return function(t){return function(n){e>0?e--:t(n)}}}function Ma(e){var t,n;return function(r){return function(o){t=o,!n&&(n=setTimeout(function(){n=void 0,r(t)},e))}}}function t_(e){var t,n;return function(r){return function(o){t=o,n&&clearTimeout(n),n=setTimeout(function(){r(t)},e)}}}function je(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=new Array(t.length),o=0,a=null,s=Math.pow(2,t.length)-1;return t.forEach(function(u,l){var c=Math.pow(2,l);Be(u,function(m){var me=o;o=o|c,r[l]=m,me!==s&&o===s&&a&&(a(),a=null)})}),function(u){return function(l){var c=function(){return u([l].concat(r))};o===s?c():a=c}}}function r_(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r,o){switch(r){case To:return dW.apply(void 0,t.map(function(a){return Be(a,o)}));case Js:return;default:throw new Error("unrecognized action "+r)}}}function Me(e,t){return t===void 0&&(t=zT),H(e,Dt(t))}function yr(){for(var e=he(),t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var o=new Array(n.length),a=0,s=Math.pow(2,n.length)-1;return n.forEach(function(u,l){var c=Math.pow(2,l);Be(u,function(m){o[l]=m,a=a|c,a===s&&ze(e,o)})}),function(u,l){switch(u){case To:return a===s&&l(o),Be(e,l);case Js:return md(e);default:throw new Error("unrecognized action "+u)}}}function We(e,t,n){t===void 0&&(t=[]);var r=n===void 0?{singleton:!0}:n,o=r.singleton;return{id:mW(),constructor:e,dependencies:t,singleton:o}}var mW=function(){return Symbol()};function UT(e){var t=new Map,n=function r(o){var a=o.id,s=o.constructor,u=o.dependencies,l=o.singleton;if(l&&t.has(a))return t.get(a);var c=s(u.map(function(m){return r(m)}));return l&&t.set(a,c),c};return n(e)}function gW(e,t){if(e==null)return{};var n={},r=Object.keys(e),o,a;for(a=0;a<r.length;a++)o=r[a],!(t.indexOf(o)>=0)&&(n[o]=e[o]);return n}function vW(e,t){if(e){if(typeof e=="string")return WT(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return WT(e,t)}}function WT(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function n_(e,t){var n=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=vW(e))||t&&e&&typeof e.length=="number"){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var yW=["children"];function _W(e,t){for(var n={},r={},o=0,a=e.length;o<a;)r[e[o]]=1,o+=1;for(var s in t)r.hasOwnProperty(s)||(n[s]=t[s]);return n}var gd=typeof document!="undefined"?No:we;function vd(e,t,n){var r=Object.keys(t.required||{}),o=Object.keys(t.optional||{}),a=Object.keys(t.methods||{}),s=Object.keys(t.events||{}),u=ur({});function l(Ye,Je){Ye.propsReady&&ze(Ye.propsReady,!1);for(var vn=n_(r),La;!(La=vn()).done;){var sr=La.value,Zr=Ye[t.required[sr]];ze(Zr,Je[sr])}for(var zs=n_(o),za;!(za=zs()).done;){var Hs=za.value;if(Hs in Je){var lc=Ye[t.optional[Hs]];ze(lc,Je[Hs])}}Ye.propsReady&&ze(Ye.propsReady,!0)}function c(Ye){return a.reduce(function(Je,vn){return Je[vn]=function(La){var sr=Ye[t.methods[vn]];ze(sr,La)},Je},{})}function m(Ye){return s.reduce(function(Je,vn){return Je[vn]=VT(Ye[t.events[vn]]),Je},{})}var me=Yd(function(Ye,Je){var vn=Ye.children,La=gW(Ye,yW),sr=Le(function(){return Zs(UT(e),function(Hs){return l(Hs,La)})}),Zr=sr[0],zs=Le(Zy(m,Zr)),za=zs[0];return gd(function(){for(var Hs=n_(s),lc;!(lc=Hs()).done;){var Ty=lc.value;Ty in La&&Be(za[Ty],La[Ty])}return function(){Object.values(za).map(md)}},[La,za,Zr]),gd(function(){l(Zr,La)}),kc(Je,e_(c(Zr))),h(u.Provider,{value:Zr},n?h(n,_W([].concat(r,o,s),La),vn):vn)}),xe=function(Ye){return Ki(Xy(ze,st(u)[Ye]),[Ye])},Ne=function(Ye){var Je=st(u),vn=Je[Ye],La=Le(Zy(hn,vn)),sr=La[0],Zr=La[1];return gd(function(){return Be(vn,function(zs){zs!==sr&&Zr(e_(zs))})},[vn,sr]),sr},He=function(Ye,Je){var vn=st(u),La=vn[Ye];gd(function(){return Be(La,Je)},[Je,La])};return{Component:me,usePublisher:xe,useEmitterValue:Ne,useEmitter:He}}function be(){return be=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},be.apply(this,arguments)}function eu(e,t){if(e==null)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)t.indexOf(n=a[r])>=0||(o[n]=e[n]);return o}function HT(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Pa(e,t){var n=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(o,a){if(o){if(typeof o=="string")return HT(o,a);var s=Object.prototype.toString.call(o).slice(8,-1);return s==="Object"&&o.constructor&&(s=o.constructor.name),s==="Map"||s==="Set"?Array.from(o):s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?HT(o,a):void 0}}(e))||t&&e&&typeof e.length=="number"){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ec,Gt,bW=typeof document!="undefined"?No:we;(function(e){e[e.DEBUG=0]="DEBUG",e[e.INFO=1]="INFO",e[e.WARN=2]="WARN",e[e.ERROR=3]="ERROR"})(Gt||(Gt={}));var wW=((ec={})[Gt.DEBUG]="debug",ec[Gt.INFO]="log",ec[Gt.WARN]="warn",ec[Gt.ERROR]="error",ec),Mo=We(function(){var e=J(Gt.ERROR);return{log:J(function(t,n,r){var o;r===void 0&&(r=Gt.INFO),r>=((o=(typeof globalThis=="undefined"?window:globalThis).VIRTUOSO_LOG_LEVEL)!=null?o:hn(e))&&console[wW[r]]("%creact-virtuoso: %c%s %o","color: #0253b3; font-weight: bold","color: initial",t,n)}),logLevel:e}},[],{singleton:!0});function i_(e,t){t===void 0&&(t=!0);var n=pt(null),r=function(a){};if(typeof ResizeObserver!="undefined"){var o=new ResizeObserver(function(a){var s=a[0].target;s.offsetParent!==null&&e(s)});r=function(a){a&&t?(o.observe(a),n.current=a):(n.current&&o.unobserve(n.current),n.current=null)}}return{ref:n,callbackRef:r}}function Po(e,t){return t===void 0&&(t=!0),i_(e,t).callbackRef}function KT(e,t,n,r,o,a,s){return i_(function(u){for(var l=function(He,Ye,Je,vn){var La=He.length;if(La===0)return null;for(var sr=[],Zr=0;Zr<La;Zr++){var zs=He.item(Zr);if(zs&&zs.dataset.index!==void 0){var za=parseInt(zs.dataset.index),Hs=parseFloat(zs.dataset.knownSize),lc=Ye(zs,"offsetHeight");if(lc===0&&vn("Zero-sized element, this should not happen",{child:zs},Gt.ERROR),lc!==Hs){var Ty=sr[sr.length-1];sr.length===0||Ty.size!==lc||Ty.endIndex!==za-1?sr.push({startIndex:za,endIndex:za,size:lc}):sr[sr.length-1].endIndex++}}}return sr}(u.children,t,0,o),c=u.parentElement;!c.dataset.virtuosoScroller;)c=c.parentElement;var m=c.firstElementChild.dataset.viewportType==="window",me=s?s.scrollTop:m?window.pageYOffset||document.documentElement.scrollTop:c.scrollTop,xe=s?s.scrollHeight:m?document.documentElement.scrollHeight:c.scrollHeight,Ne=s?s.offsetHeight:m?window.innerHeight:c.offsetHeight;r({scrollTop:Math.max(me,0),scrollHeight:xe,viewportHeight:Ne}),a==null||a(function(He,Ye,Je){return Ye==="normal"||Ye!=null&&Ye.endsWith("px")||Je("row-gap was not resolved to pixel value correctly",Ye,Gt.WARN),Ye==="normal"?0:parseInt(Ye!=null?Ye:"0",10)}(0,getComputedStyle(u).rowGap,o)),l!==null&&e(l)},n)}function Ui(e,t){return Math.round(e.getBoundingClientRect()[t])}function GT(e,t){return Math.abs(e-t)<1.01}function QT(e,t,n,r,o){r===void 0&&(r=Ao);var a=pt(null),s=pt(null),u=pt(null),l=pt(!1),c=Ki(function(m){var me=m.target,xe=me===window||me===document,Ne=xe?window.pageYOffset||document.documentElement.scrollTop:me.scrollTop,He=xe?document.documentElement.scrollHeight:me.scrollHeight,Ye=xe?window.innerHeight:me.offsetHeight,Je=function(){e({scrollTop:Math.max(Ne,0),scrollHeight:He,viewportHeight:Ye})};l.current?Jd(Je):Je(),l.current=!1,s.current!==null&&(Ne===s.current||Ne<=0||Ne===He-Ye)&&(s.current=null,t(!0),u.current&&(clearTimeout(u.current),u.current=null))},[e,t]);return we(function(){var m=o||a.current;return r(o||a.current),c({target:m}),m.addEventListener("scroll",c,{passive:!0}),function(){r(null),m.removeEventListener("scroll",c)}},[a,c,n,r,o]),{scrollerRef:a,scrollByCallback:function(m){l.current=!0,a.current.scrollBy(m)},scrollToCallback:function(m){var me=a.current;if(me&&(!("offsetHeight"in me)||me.offsetHeight!==0)){var xe,Ne,He,Ye=m.behavior==="smooth";if(me===window?(Ne=Math.max(Ui(document.documentElement,"height"),document.documentElement.scrollHeight),xe=window.innerHeight,He=document.documentElement.scrollTop):(Ne=me.scrollHeight,xe=Ui(me,"height"),He=me.scrollTop),m.top=Math.ceil(Math.max(Math.min(Ne-xe,m.top),0)),GT(xe,Ne)||m.top===He)return e({scrollTop:He,scrollHeight:Ne,viewportHeight:xe}),void(Ye&&t(!0));Ye?(s.current=m.top,u.current&&clearTimeout(u.current),u.current=setTimeout(function(){u.current=null,s.current=null,t(!0)},1e3)):s.current=null,me.scrollTo(m)}}}}var Wr=We(function(){var e=he(),t=he(),n=J(0),r=he(),o=J(0),a=he(),s=he(),u=J(0),l=J(0),c=J(0),m=J(0),me=he(),xe=he(),Ne=J(!1),He=J(!1);return pe(H(e,ne(function(Ye){return Ye.scrollTop})),t),pe(H(e,ne(function(Ye){return Ye.scrollHeight})),s),pe(t,o),{scrollContainerState:e,scrollTop:t,viewportHeight:a,headerHeight:u,fixedHeaderHeight:l,fixedFooterHeight:c,footerHeight:m,scrollHeight:s,smoothScrollTargetReached:r,react18ConcurrentRendering:He,scrollTo:me,scrollBy:xe,statefulScrollTop:o,deviation:n,scrollingInProgress:Ne}},[],{singleton:!0}),tc={lvl:0};function YT(e,t,n,r,o){return r===void 0&&(r=tc),o===void 0&&(o=tc),{k:e,v:t,lvl:n,l:r,r:o}}function wt(e){return e===tc}function rc(){return tc}function o_(e,t){if(wt(e))return tc;var n=e.k,r=e.l,o=e.r;if(t===n){if(wt(r))return o;if(wt(o))return r;var a=JT(r);return u_(_r(e,{k:a[0],v:a[1],l:XT(r)}))}return u_(_r(e,t<n?{l:o_(r,t)}:{r:o_(o,t)}))}function ni(e,t,n){if(n===void 0&&(n="k"),wt(e))return[-1/0,void 0];if(e[n]===t)return[e.k,e.v];if(e[n]<t){var r=ni(e.r,t,n);return r[0]===-1/0?[e.k,e.v]:r}return ni(e.l,t,n)}function ii(e,t,n){return wt(e)?YT(t,n,1):t===e.k?_r(e,{k:t,v:n}):function(r){return l_(e1(r))}(_r(e,t<e.k?{l:ii(e.l,t,n)}:{r:ii(e.r,t,n)}))}function a_(e,t,n){if(wt(e))return[];var r=e.k,o=e.v,a=e.r,s=[];return r>t&&(s=s.concat(a_(e.l,t,n))),r>=t&&r<=n&&s.push({k:r,v:o}),r<=n&&(s=s.concat(a_(a,t,n))),s}function yd(e){return wt(e)?[]:[].concat(yd(e.l),[{k:e.k,v:e.v}],yd(e.r))}function JT(e){return wt(e.r)?[e.k,e.v]:JT(e.r)}function XT(e){return wt(e.r)?e.l:u_(_r(e,{r:XT(e.r)}))}function _r(e,t){return YT(t.k!==void 0?t.k:e.k,t.v!==void 0?t.v:e.v,t.lvl!==void 0?t.lvl:e.lvl,t.l!==void 0?t.l:e.l,t.r!==void 0?t.r:e.r)}function s_(e){return wt(e)||e.lvl>e.r.lvl}function u_(e){var t=e.l,n=e.r,r=e.lvl;if(n.lvl>=r-1&&t.lvl>=r-1)return e;if(r>n.lvl+1){if(s_(t))return e1(_r(e,{lvl:r-1}));if(wt(t)||wt(t.r))throw new Error("Unexpected empty nodes");return _r(t.r,{l:_r(t,{r:t.r.l}),r:_r(e,{l:t.r.r,lvl:r-1}),lvl:r})}if(s_(e))return l_(_r(e,{lvl:r-1}));if(wt(n)||wt(n.l))throw new Error("Unexpected empty nodes");var o=n.l,a=s_(o)?n.lvl-1:n.lvl;return _r(o,{l:_r(e,{r:o.l,lvl:r-1}),r:l_(_r(n,{l:o.r,lvl:a})),lvl:o.lvl+1})}function _d(e,t,n){return wt(e)?[]:ZT(a_(e,ni(e,t)[0],n),function(r){return{index:r.k,value:r.v}})}function ZT(e,t){var n=e.length;if(n===0)return[];for(var r=t(e[0]),o=r.index,a=r.value,s=[],u=1;u<n;u++){var l=t(e[u]),c=l.index,m=l.value;s.push({start:o,end:c-1,value:a}),o=c,a=m}return s.push({start:o,end:1/0,value:a}),s}function l_(e){var t=e.r,n=e.lvl;return wt(t)||wt(t.r)||t.lvl!==n||t.r.lvl!==n?e:_r(t,{l:_r(e,{r:t.l}),lvl:n+1})}function e1(e){var t=e.l;return wt(t)||t.lvl!==e.lvl?e:_r(t,{r:_r(e,{l:t.r})})}function bd(e,t,n,r){r===void 0&&(r=0);for(var o=e.length-1;r<=o;){var a=Math.floor((r+o)/2),s=n(e[a],t);if(s===0)return a;if(s===-1){if(o-r<2)return a-1;o=a-1}else{if(o===r)return a;r=a+1}}throw new Error("Failed binary finding record in array - "+e.join(",")+", searched for "+t)}function t1(e,t,n){return e[bd(e,t,n)]}var c_=We(function(){return{recalcInProgress:J(!1)}},[],{singleton:!0});function xW(e){var t=e.size,n=e.startIndex,r=e.endIndex;return function(o){return o.start===n&&(o.end===r||o.end===1/0)&&o.value===t}}function f_(e,t){var n=e.index;return t===n?0:t<n?-1:1}function SW(e,t){var n=e.offset;return t===n?0:t<n?-1:1}function EW(e){return{index:e.index,value:e}}function r1(e,t,n,r){var o=e,a=0,s=0,u=0,l=0;if(t!==0){u=o[l=bd(o,t-1,f_)].offset;var c=ni(n,t-1);a=c[0],s=c[1],o.length&&o[l].size===ni(n,t)[1]&&(l-=1),o=o.slice(0,l+1)}else o=[];for(var m,me=Pa(_d(n,t,1/0));!(m=me()).done;){var xe=m.value,Ne=xe.start,He=xe.value,Ye=Ne-a,Je=Ye*s+u+Ye*r;o.push({offset:Je,size:He,index:Ne}),a=Ne,u=Je,s=He}return{offsetTree:o,lastIndex:a,lastOffset:u,lastSize:s}}function kW(e,t){var n=t[0],r=t[1],o=t[3];n.length>0&&(0,t[2])("received item sizes",n,Gt.DEBUG);var a=e.sizeTree,s=a,u=0;if(r.length>0&&wt(a)&&n.length===2){var l=n[0].size,c=n[1].size;s=r.reduce(function(Ne,He){return ii(ii(Ne,He,l),He+1,c)},s)}else{var m=function(Ne,He){for(var Ye,Je=wt(Ne)?0:1/0,vn=Pa(He);!(Ye=vn()).done;){var La=Ye.value,sr=La.size,Zr=La.startIndex,zs=La.endIndex;if(Je=Math.min(Je,Zr),wt(Ne))Ne=ii(Ne,0,sr);else{var za=_d(Ne,Zr-1,zs+1);if(!za.some(xW(La))){for(var Hs,lc=!1,Ty=!1,_y=Pa(za);!(Hs=_y()).done;){var xy=Hs.value,Bb=xy.start,Dy=xy.end,Bg=xy.value;lc?(zs>=Bb||sr===Bg)&&(Ne=o_(Ne,Bb)):(Ty=Bg!==sr,lc=!0),Dy>zs&&zs>=Bb&&Bg!==sr&&(Ne=ii(Ne,zs+1,Bg))}Ty&&(Ne=ii(Ne,Zr,sr))}}}return[Ne,Je]}(s,n);s=m[0],u=m[1]}if(s===a)return e;var me=r1(e.offsetTree,u,s,o),xe=me.offsetTree;return{sizeTree:s,offsetTree:xe,lastIndex:me.lastIndex,lastOffset:me.lastOffset,lastSize:me.lastSize,groupOffsetTree:r.reduce(function(Ne,He){return ii(Ne,He,nc(He,xe,o))},rc()),groupIndices:r}}function nc(e,t,n){if(t.length===0)return 0;var r=t1(t,e,f_),o=e-r.index,a=r.size*o+(o-1)*n+r.offset;return a>0?a+n:a}function n1(e,t,n){if(function(o){return o.groupIndex!==void 0}(e))return t.groupIndices[e.groupIndex]+1;var r=i1(e.index==="LAST"?n:e.index,t);return Math.max(0,r,Math.min(n,r))}function i1(e,t){if(!wd(t))return e;for(var n=0;t.groupIndices[n]<=e+n;)n++;return e+n}function wd(e){return!wt(e.groupOffsetTree)}var DW={offsetHeight:"height",offsetWidth:"width"},Wi=We(function(e){var t=e[0].log,n=e[1].recalcInProgress,r=he(),o=he(),a=Or(o,0),s=he(),u=he(),l=J(0),c=J([]),m=J(void 0),me=J(void 0),xe=J(function(zs,za){return Ui(zs,DW[za])}),Ne=J(void 0),He=J(0),Ye={offsetTree:[],sizeTree:rc(),groupOffsetTree:rc(),lastIndex:0,lastOffset:0,lastSize:0,groupIndices:[]},Je=Or(H(r,je(c,t,He),ri(kW,Ye),Dt()),Ye);pe(H(c,Ce(function(zs){return zs.length>0}),je(Je,He),ne(function(zs){var za=zs[0],Hs=zs[1],lc=zs[2],Ty=za.reduce(function(_y,xy,Bb){return ii(_y,xy,nc(xy,Hs.offsetTree,lc)||Bb)},rc());return be({},Hs,{groupIndices:za,groupOffsetTree:Ty})})),Je),pe(H(o,je(Je),Ce(function(zs){return zs[0]<zs[1].lastIndex}),ne(function(zs){var za=zs[1];return[{startIndex:zs[0],endIndex:za.lastIndex,size:za.lastSize}]})),r),pe(m,me);var vn=Or(H(m,ne(function(zs){return zs===void 0})),!0);pe(H(me,Ce(function(zs){return zs!==void 0&&wt(hn(Je).sizeTree)}),ne(function(zs){return[{startIndex:0,endIndex:0,size:zs}]})),r);var La=Ur(H(r,je(Je),ri(function(zs,za){var Hs=za[1];return{changed:Hs!==zs.sizes,sizes:Hs}},{changed:!1,sizes:Ye}),ne(function(zs){return zs.changed})));Be(H(l,ri(function(zs,za){return{diff:zs.prev-za,prev:za}},{diff:0,prev:0}),ne(function(zs){return zs.diff})),function(zs){zs>0?(ze(n,!0),ze(s,zs)):zs<0&&ze(u,zs)}),Be(H(l,je(t)),function(zs){zs[0]<0&&(0,zs[1])("`firstItemIndex` prop should not be set to less than zero. If you don't know the total count, just use a very high value",{firstItemIndex:l},Gt.ERROR)});var sr=Ur(s);pe(H(s,je(Je),ne(function(zs){var za=zs[0],Hs=zs[1];if(Hs.groupIndices.length>0)throw new Error("Virtuoso: prepending items does not work with groups");return yd(Hs.sizeTree).reduce(function(lc,Ty){var _y=Ty.k,xy=Ty.v;return{ranges:[].concat(lc.ranges,[{startIndex:lc.prevIndex,endIndex:_y+za-1,size:lc.prevSize}]),prevIndex:_y+za,prevSize:xy}},{ranges:[],prevIndex:0,prevSize:Hs.lastSize}).ranges})),r);var Zr=Ur(H(u,je(Je,He),ne(function(zs){return nc(-zs[0],zs[1].offsetTree,zs[2])})));return pe(H(u,je(Je,He),ne(function(zs){var za=zs[0],Hs=zs[1],lc=zs[2];if(Hs.groupIndices.length>0)throw new Error("Virtuoso: shifting items does not work with groups");var Ty=yd(Hs.sizeTree).reduce(function(_y,xy){var Bb=xy.v;return ii(_y,Math.max(0,xy.k+za),Bb)},rc());return be({},Hs,{sizeTree:Ty},r1(Hs.offsetTree,0,Ty,lc))})),Je),{data:Ne,totalCount:o,sizeRanges:r,groupIndices:c,defaultItemSize:me,fixedItemSize:m,unshiftWith:s,shiftWith:u,shiftWithOffset:Zr,beforeUnshiftWith:sr,firstItemIndex:l,gap:He,sizes:Je,listRefresh:La,statefulTotalCount:a,trackItemSizes:vn,itemSize:xe}},bt(Mo,c_),{singleton:!0}),CW=typeof document!="undefined"&&"scrollBehavior"in document.documentElement.style;function o1(e){var t=typeof e=="number"?{index:e}:e;return t.align||(t.align="start"),t.behavior&&CW||(t.behavior="auto"),t.offset||(t.offset=0),t}var ic=We(function(e){var t=e[0],n=t.sizes,r=t.totalCount,o=t.listRefresh,a=t.gap,s=e[1],u=s.scrollingInProgress,l=s.viewportHeight,c=s.scrollTo,m=s.smoothScrollTargetReached,me=s.headerHeight,xe=s.footerHeight,Ne=s.fixedHeaderHeight,He=s.fixedFooterHeight,Ye=e[2].log,Je=he(),vn=J(0),La=null,sr=null,Zr=null;function zs(){La&&(La(),La=null),Zr&&(Zr(),Zr=null),sr&&(clearTimeout(sr),sr=null),ze(u,!1)}return pe(H(Je,je(n,l,r,vn,me,xe,Ye),je(a,Ne,He),ne(function(za){var Hs=za[0],lc=Hs[0],Ty=Hs[1],_y=Hs[2],xy=Hs[3],Bb=Hs[4],Dy=Hs[5],Bg=Hs[6],yy=Hs[7],wy=za[1],Ay=za[2],$b=za[3],e0=o1(lc),Hb=e0.align,Yb=e0.behavior,Jb=e0.offset,l2=xy-1,y2=n1(e0,Ty,l2),Rb=nc(y2,Ty.offsetTree,wy)+Dy;Hb==="end"?(Rb+=Ay+ni(Ty.sizeTree,y2)[1]-_y+$b,y2===l2&&(Rb+=Bg)):Hb==="center"?Rb+=(Ay+ni(Ty.sizeTree,y2)[1]-_y+$b)/2:Rb-=Bb,Jb&&(Rb+=Jb);var i2=function(E2){zs(),E2?(yy("retrying to scroll to",{location:lc},Gt.DEBUG),ze(Je,lc)):yy("list did not change, scroll successful",{},Gt.DEBUG)};if(zs(),Yb==="smooth"){var s2=!1;Zr=Be(o,function(E2){s2=s2||E2}),La=Io(m,function(){i2(s2)})}else La=Io(H(o,function(E2){var L2=setTimeout(function(){E2(!1)},150);return function(T2){T2&&(E2(!0),clearTimeout(L2))}}),i2);return sr=setTimeout(function(){zs()},1200),ze(u,!0),yy("scrolling from index to",{index:y2,top:Rb,behavior:Yb},Gt.DEBUG),{top:Rb,behavior:Yb}})),c),{scrollToIndex:Je,topListHeight:vn}},bt(Wi,Wr,Mo),{singleton:!0}),oc="up",OW={atBottom:!1,notAtBottomBecause:"NOT_SHOWING_LAST_ITEM",state:{offsetBottom:0,scrollTop:0,viewportHeight:0,scrollHeight:0}},ac=We(function(e){var t=e[0],n=t.scrollContainerState,r=t.scrollTop,o=t.viewportHeight,a=t.headerHeight,s=t.footerHeight,u=t.scrollBy,l=J(!1),c=J(!0),m=he(),me=he(),xe=J(4),Ne=J(0),He=Or(H(r_(H(Me(r),Zl(1),zi(!0)),H(Me(r),Zl(1),zi(!1),t_(100))),Dt()),!1),Ye=Or(H(r_(H(u,zi(!0)),H(u,zi(!1),t_(200))),Dt()),!1);pe(H(yr(Me(r),Me(Ne)),ne(function(Zr){return Zr[0]<=Zr[1]}),Dt()),c),pe(H(c,Ma(50)),me);var Je=Ur(H(yr(n,Me(o),Me(a),Me(s),Me(xe)),ri(function(Zr,zs){var za,Hs,lc=zs[0],Ty=lc.scrollTop,_y=lc.scrollHeight,xy=zs[1],Bb={viewportHeight:xy,scrollTop:Ty,scrollHeight:_y};return Ty+xy-_y>-zs[4]?(Ty>Zr.state.scrollTop?(za="SCROLLED_DOWN",Hs=Zr.state.scrollTop-Ty):(za="SIZE_DECREASED",Hs=Zr.state.scrollTop-Ty||Zr.scrollTopDelta),{atBottom:!0,state:Bb,atBottomBecause:za,scrollTopDelta:Hs}):{atBottom:!1,notAtBottomBecause:Bb.scrollHeight>Zr.state.scrollHeight?"SIZE_INCREASED":xy<Zr.state.viewportHeight?"VIEWPORT_HEIGHT_DECREASING":Ty<Zr.state.scrollTop?"SCROLLING_UPWARDS":"NOT_FULLY_SCROLLED_TO_LAST_ITEM_BOTTOM",state:Bb}},OW),Dt(function(Zr,zs){return Zr&&Zr.atBottom===zs.atBottom}))),vn=Or(H(n,ri(function(Zr,zs){var za=zs.scrollTop,Hs=zs.scrollHeight,lc=zs.viewportHeight;return GT(Zr.scrollHeight,Hs)?{scrollTop:za,scrollHeight:Hs,jump:0,changed:!1}:Zr.scrollTop!==za&&Hs-(za+lc)<1?{scrollHeight:Hs,scrollTop:za,jump:Zr.scrollTop-za,changed:!0}:{scrollHeight:Hs,scrollTop:za,jump:0,changed:!0}},{scrollHeight:0,jump:0,scrollTop:0,changed:!1}),Ce(function(Zr){return Zr.changed}),ne(function(Zr){return Zr.jump})),0);pe(H(Je,ne(function(Zr){return Zr.atBottom})),l),pe(H(l,Ma(50)),m);var La=J("down");pe(H(n,ne(function(Zr){return Zr.scrollTop}),Dt(),ri(function(Zr,zs){return hn(Ye)?{direction:Zr.direction,prevScrollTop:zs}:{direction:zs<Zr.prevScrollTop?oc:"down",prevScrollTop:zs}},{direction:"down",prevScrollTop:0}),ne(function(Zr){return Zr.direction})),La),pe(H(n,Ma(50),zi("none")),La);var sr=J(0);return pe(H(He,Ce(function(Zr){return!Zr}),zi(0)),sr),pe(H(r,Ma(100),je(He),Ce(function(Zr){return!!Zr[1]}),ri(function(Zr,zs){return[Zr[1],zs[0]]},[0,0]),ne(function(Zr){return Zr[1]-Zr[0]})),sr),{isScrolling:He,isAtTop:c,isAtBottom:l,atBottomState:Je,atTopStateChange:me,atBottomStateChange:m,scrollDirection:La,atBottomThreshold:xe,atTopThreshold:Ne,scrollVelocity:sr,lastJumpDueToItemResize:vn}},bt(Wr)),ja=We(function(e){var t=e[0].log,n=J(!1),r=Ur(H(n,Ce(function(o){return o}),Dt()));return Be(n,function(o){o&&hn(t)("props updated",{},Gt.DEBUG)}),{propsReady:n,didMount:r}},bt(Mo),{singleton:!0}),p_=We(function(e){var t=e[0],n=t.sizes,r=t.listRefresh,o=t.defaultItemSize,a=e[1].scrollTop,s=e[2].scrollToIndex,u=e[3].didMount,l=J(!0),c=J(0);return pe(H(u,je(c),Ce(function(m){return!!m[1]}),zi(!1)),l),Be(H(yr(r,u),je(l,n,o),Ce(function(m){var me=m[1],xe=m[3];return m[0][1]&&(!wt(m[2].sizeTree)||xe!==void 0)&&!me}),je(c)),function(m){var me=m[1];setTimeout(function(){Io(a,function(){ze(l,!0)}),ze(s,me)})}),{scrolledToInitialItem:l,initialTopMostItemIndex:c}},bt(Wi,Wr,ic,ja),{singleton:!0});function a1(e){return!!e&&(e==="smooth"?"smooth":"auto")}var TW=We(function(e){var t=e[0],n=t.totalCount,r=t.listRefresh,o=e[1],a=o.isAtBottom,s=o.atBottomState,u=e[2].scrollToIndex,l=e[3].scrolledToInitialItem,c=e[4],m=c.propsReady,me=c.didMount,xe=e[5].log,Ne=e[6].scrollingInProgress,He=J(!1),Ye=he(),Je=null;function vn(sr){ze(u,{index:"LAST",align:"end",behavior:sr})}function La(sr){var Zr=Io(s,function(zs){!sr||zs.atBottom||zs.notAtBottomBecause!=="SIZE_INCREASED"||Je||(hn(xe)("scrolling to bottom due to increased size",{},Gt.DEBUG),vn("auto"))});setTimeout(Zr,100)}return Be(H(yr(H(Me(n),Zl(1)),me),je(Me(He),a,l,Ne),ne(function(sr){var Zr=sr[0],zs=Zr[0],za=Zr[1]&&sr[3],Hs="auto";return za&&(Hs=function(lc,Ty){return typeof lc=="function"?a1(lc(Ty)):Ty&&a1(lc)}(sr[1],sr[2]||sr[4]),za=za&&!!Hs),{totalCount:zs,shouldFollow:za,followOutputBehavior:Hs}}),Ce(function(sr){return sr.shouldFollow})),function(sr){var Zr=sr.totalCount,zs=sr.followOutputBehavior;Je&&(Je(),Je=null),Je=Io(r,function(){hn(xe)("following output to ",{totalCount:Zr},Gt.DEBUG),vn(zs),Je=null})}),Be(H(yr(Me(He),n,m),Ce(function(sr){return sr[0]&&sr[2]}),ri(function(sr,Zr){var zs=Zr[1];return{refreshed:sr.value===zs,value:zs}},{refreshed:!1,value:0}),Ce(function(sr){return sr.refreshed}),je(He,n)),function(sr){La(sr[1]!==!1)}),Be(Ye,function(){La(hn(He)!==!1)}),Be(yr(Me(He),s),function(sr){var Zr=sr[1];sr[0]&&!Zr.atBottom&&Zr.notAtBottomBecause==="VIEWPORT_HEIGHT_DECREASING"&&vn("auto")}),{followOutput:He,autoscrollToBottom:Ye}},bt(Wi,ac,ic,p_,ja,Mo,Wr));function AW(e){return e.reduce(function(t,n){return t.groupIndices.push(t.totalCount),t.totalCount+=n+1,t},{totalCount:0,groupIndices:[]})}var s1=We(function(e){var t=e[0],n=t.totalCount,r=t.groupIndices,o=t.sizes,a=e[1],s=a.scrollTop,u=a.headerHeight,l=he(),c=he(),m=Ur(H(l,ne(AW)));return pe(H(m,ne(function(me){return me.totalCount})),n),pe(H(m,ne(function(me){return me.groupIndices})),r),pe(H(yr(s,o,u),Ce(function(me){return wd(me[1])}),ne(function(me){return ni(me[1].groupOffsetTree,Math.max(me[0]-me[2],0),"v")[0]}),Dt(),ne(function(me){return[me]})),c),{groupCounts:l,topItemsIndexes:c}},bt(Wi,Wr));function sc(e,t){return!(!e||e[0]!==t[0]||e[1]!==t[1])}function u1(e,t){return!(!e||e.startIndex!==t.startIndex||e.endIndex!==t.endIndex)}function l1(e,t,n){return typeof e=="number"?n===oc&&t==="top"||n==="down"&&t==="bottom"?e:0:n===oc?t==="top"?e.main:e.reverse:t==="bottom"?e.main:e.reverse}function c1(e,t){return typeof e=="number"?e:e[t]||0}var d_=We(function(e){var t=e[0],n=t.scrollTop,r=t.viewportHeight,o=t.deviation,a=t.headerHeight,s=t.fixedHeaderHeight,u=he(),l=J(0),c=J(0),m=J(0),me=Or(H(yr(Me(n),Me(r),Me(a),Me(u,sc),Me(m),Me(l),Me(s),Me(o),Me(c)),ne(function(xe){var Ne=xe[0],He=xe[1],Ye=xe[2],Je=xe[3],vn=Je[0],La=Je[1],sr=xe[4],Zr=xe[6],zs=xe[7],za=xe[8],Hs=Ne-zs,lc=xe[5]+Zr,Ty=Math.max(Ye-Hs,0),_y="none",xy=c1(za,"top"),Bb=c1(za,"bottom");return vn-=zs,La+=Ye+Zr,(vn+=Ye+Zr)>Ne+lc-xy&&(_y=oc),(La-=zs)<Ne-Ty+He+Bb&&(_y="down"),_y!=="none"?[Math.max(Hs-Ye-l1(sr,"top",_y)-xy,0),Hs-Ty-Zr+He+l1(sr,"bottom",_y)+Bb]:null}),Ce(function(xe){return xe!=null}),Dt(sc)),[0,0]);return{listBoundary:u,overscan:m,topListHeight:l,increaseViewportBy:c,visibleRange:me}},bt(Wr),{singleton:!0}),f1={items:[],topItems:[],offsetTop:0,offsetBottom:0,top:0,bottom:0,topListHeight:0,totalCount:0,firstItemIndex:0};function p1(e,t,n){if(e.length===0)return[];if(!wd(t))return e.map(function(m){return be({},m,{index:m.index+n,originalIndex:m.index})});for(var r,o=[],a=_d(t.groupOffsetTree,e[0].index,e[e.length-1].index),s=void 0,u=0,l=Pa(e);!(r=l()).done;){var c=r.value;(!s||s.end<c.index)&&(s=a.shift(),u=t.groupIndices.indexOf(s.start)),o.push(be({},c.index===s.start?{type:"group",index:u}:{index:c.index-(u+1)+n,groupIndex:u},{size:c.size,offset:c.offset,originalIndex:c.index,data:c.data}))}return o}function xd(e,t,n,r,o,a){var s=0,u=0;if(e.length>0){s=e[0].offset;var l=e[e.length-1];u=l.offset+l.size}var c=n-o.lastIndex,m=s,me=o.lastOffset+c*o.lastSize+(c-1)*r-u;return{items:p1(e,o,a),topItems:p1(t,o,a),topListHeight:t.reduce(function(xe,Ne){return Ne.size+xe},0),offsetTop:s,offsetBottom:me,top:m,bottom:u,totalCount:n,firstItemIndex:a}}var tu=We(function(e){var t=e[0],n=t.sizes,r=t.totalCount,o=t.data,a=t.firstItemIndex,s=t.gap,u=e[1],l=e[2],c=l.visibleRange,m=l.listBoundary,me=l.topListHeight,xe=e[3],Ne=xe.scrolledToInitialItem,He=xe.initialTopMostItemIndex,Ye=e[4].topListHeight,Je=e[5],vn=e[6].didMount,La=e[7].recalcInProgress,sr=J([]),Zr=he();pe(u.topItemsIndexes,sr);var zs=Or(H(yr(vn,La,Me(c,sc),Me(r),Me(n),Me(He),Ne,Me(sr),Me(a),Me(s),o),Ce(function(za){return za[0]&&!za[1]}),ne(function(za){var Hs=za[2],lc=Hs[0],Ty=Hs[1],_y=za[3],xy=za[5],Bb=za[6],Dy=za[7],Bg=za[8],yy=za[9],wy=za[10],Ay=za[4],$b=Ay.sizeTree,e0=Ay.offsetTree;if(_y===0||lc===0&&Ty===0)return be({},f1,{totalCount:_y});if(wt($b))return xd(function(Qb,zb,t2){if(wd(zb)){var Zb=i1(Qb,zb);return[{index:ni(zb.groupOffsetTree,Zb)[0],size:0,offset:0},{index:Zb,size:0,offset:0,data:t2&&t2[0]}]}return[{index:Qb,size:0,offset:0,data:t2&&t2[0]}]}(function(Qb,zb){return typeof Qb=="number"?Qb:Qb.index==="LAST"?zb-1:Qb.index}(xy,_y),Ay,wy),[],_y,yy,Ay,Bg);var Hb=[];if(Dy.length>0)for(var Yb,Jb=Dy[0],l2=Dy[Dy.length-1],y2=0,Rb=Pa(_d($b,Jb,l2));!(Yb=Rb()).done;)for(var i2=Yb.value,s2=i2.value,E2=Math.max(i2.start,Jb),L2=Math.min(i2.end,l2),T2=E2;T2<=L2;T2++)Hb.push({index:T2,size:s2,offset:y2,data:wy&&wy[T2]}),y2+=s2;if(!Bb)return xd([],Hb,_y,yy,Ay,Bg);var A2=Dy.length>0?Dy[Dy.length-1]+1:0,k_=function(Qb,zb,t2,Zb){return Zb===void 0&&(Zb=0),Zb>0&&(zb=Math.max(zb,t1(Qb,Zb,f_).offset)),ZT((g2=t2,f2=bd(h2=Qb,zb,Wb=SW),O2=bd(h2,g2,Wb,f2),h2.slice(f2,O2+1)),EW);var h2,g2,Wb,f2,O2}(e0,lc,Ty,A2);if(k_.length===0)return null;var Vb=_y-1;return xd(Zs([],function(Qb){for(var zb,t2=Pa(k_);!(zb=t2()).done;){var Zb=zb.value,h2=Zb.value,g2=h2.offset,Wb=Zb.start,f2=h2.size;if(h2.offset<lc){var O2=(Wb+=Math.floor((lc-h2.offset+yy)/(f2+yy)))-Zb.start;g2+=O2*f2+O2*yy}Wb<A2&&(g2+=(A2-Wb)*f2,Wb=A2);for(var C2=Math.min(Zb.end,Vb),x2=Wb;x2<=C2&&!(g2>=Ty);x2++)Qb.push({index:x2,size:f2,offset:g2,data:wy&&wy[x2]}),g2+=f2+yy}}),Hb,_y,yy,Ay,Bg)}),Ce(function(za){return za!==null}),Dt()),f1);return pe(H(o,Ce(function(za){return za!==void 0}),ne(function(za){return za.length})),r),pe(H(zs,ne(function(za){return za.topListHeight})),Ye),pe(Ye,me),pe(H(zs,ne(function(za){return[za.top,za.bottom]})),m),pe(H(zs,ne(function(za){return za.items})),Zr),be({listState:zs,topItemsIndexes:sr,endReached:Ur(H(zs,Ce(function(za){return za.items.length>0}),je(r,o),Ce(function(za){var Hs=za[0].items;return Hs[Hs.length-1].originalIndex===za[1]-1}),ne(function(za){return[za[1]-1,za[2]]}),Dt(sc),ne(function(za){return za[0]}))),startReached:Ur(H(zs,Ma(200),Ce(function(za){var Hs=za.items;return Hs.length>0&&Hs[0].originalIndex===za.topItems.length}),ne(function(za){return za.items[0].index}),Dt())),rangeChanged:Ur(H(zs,Ce(function(za){return za.items.length>0}),ne(function(za){for(var Hs=za.items,lc=0,Ty=Hs.length-1;Hs[lc].type==="group"&&lc<Ty;)lc++;for(;Hs[Ty].type==="group"&&Ty>lc;)Ty--;return{startIndex:Hs[lc].index,endIndex:Hs[Ty].index}}),Dt(u1))),itemsRendered:Zr},Je)},bt(Wi,s1,d_,p_,ic,ac,ja,c_),{singleton:!0}),IW=We(function(e){var t=e[0],n=t.sizes,r=t.firstItemIndex,o=t.data,a=t.gap,s=e[1].listState,u=e[2].didMount,l=J(0);return pe(H(u,je(l),Ce(function(c){return c[1]!==0}),je(n,r,a,o),ne(function(c){var m=c[0][1],me=c[1],xe=c[2],Ne=c[3],He=c[4],Ye=He===void 0?[]:He,Je=0;if(me.groupIndices.length>0)for(var vn,La=Pa(me.groupIndices);!((vn=La()).done||vn.value-Je>=m);)Je++;var sr=m+Je;return xd(Array.from({length:sr}).map(function(Zr,zs){return{index:zs,size:0,offset:0,data:Ye[zs]}}),[],sr,Ne,me,xe)})),s),{initialItemCount:l}},bt(Wi,tu,ja),{singleton:!0}),d1=We(function(e){var t=e[0].scrollVelocity,n=J(!1),r=he(),o=J(!1);return pe(H(t,je(o,n,r),Ce(function(a){return!!a[1]}),ne(function(a){var s=a[0],u=a[1],l=a[2],c=a[3],m=u.enter;if(l){if((0,u.exit)(s,c))return!1}else if(m(s,c))return!0;return l}),Dt()),n),Be(H(yr(n,t,r),je(o)),function(a){var s=a[0],u=a[1];return s[0]&&u&&u.change&&u.change(s[1],s[2])}),{isSeeking:n,scrollSeekConfiguration:o,scrollVelocity:t,scrollSeekRangeChanged:r}},bt(ac),{singleton:!0}),MW=We(function(e){var t=e[0].topItemsIndexes,n=J(0);return pe(H(n,Ce(function(r){return r>0}),ne(function(r){return Array.from({length:r}).map(function(o,a){return a})})),t),{topItemCount:n}},bt(tu)),h_=We(function(e){var t=e[0],n=t.footerHeight,r=t.headerHeight,o=t.fixedHeaderHeight,a=t.fixedFooterHeight,s=e[1].listState,u=he(),l=Or(H(yr(n,a,r,o,s),ne(function(c){var m=c[4];return c[0]+c[1]+c[2]+c[3]+m.offsetBottom+m.bottom})),0);return pe(Me(l),u),{totalListHeight:l,totalListHeightChanged:u}},bt(Wr,tu),{singleton:!0});function h1(e){var t,n=!1;return function(){return n||(n=!0,t=e()),t}}var PW=h1(function(){return/iP(ad|hone|od).+Version\/[\d.]+.*Safari/i.test(navigator.userAgent)}),jW=We(function(e){var t=e[0],n=t.scrollBy,r=t.scrollTop,o=t.deviation,a=t.scrollingInProgress,s=e[1],u=s.isScrolling,l=s.isAtBottom,c=s.scrollDirection,m=e[3],me=m.beforeUnshiftWith,xe=m.shiftWithOffset,Ne=m.sizes,He=m.gap,Ye=e[4].log,Je=e[5].recalcInProgress,vn=Ur(H(e[2].listState,je(s.lastJumpDueToItemResize),ri(function(sr,Zr){var zs=sr[1],za=Zr[0],Hs=za.items,lc=za.totalCount,Ty=za.bottom+za.offsetBottom,_y=0;return sr[2]===lc&&zs.length>0&&Hs.length>0&&(Hs[0].originalIndex===0&&zs[0].originalIndex===0||(_y=Ty-sr[3])!=0&&(_y+=Zr[1])),[_y,Hs,lc,Ty]},[0,[],0,0]),Ce(function(sr){return sr[0]!==0}),je(r,c,a,l,Ye),Ce(function(sr){return!sr[3]&&sr[1]!==0&&sr[2]===oc}),ne(function(sr){var Zr=sr[0][0];return(0,sr[5])("Upward scrolling compensation",{amount:Zr},Gt.DEBUG),Zr})));function La(sr){sr>0?(ze(n,{top:-sr,behavior:"auto"}),ze(o,0)):(ze(o,0),ze(n,{top:-sr,behavior:"auto"}))}return Be(H(vn,je(o,u)),function(sr){var Zr=sr[0],zs=sr[1];sr[2]&&PW()?ze(o,zs-Zr):La(-Zr)}),Be(H(yr(Or(u,!1),o,Je),Ce(function(sr){return!sr[0]&&!sr[2]&&sr[1]!==0}),ne(function(sr){return sr[1]}),Ma(1)),La),pe(H(xe,ne(function(sr){return{top:-sr}})),n),Be(H(me,je(Ne,He),ne(function(sr){var Zr=sr[0];return Zr*sr[1].lastSize+Zr*sr[2]})),function(sr){ze(o,sr),requestAnimationFrame(function(){ze(n,{top:sr}),requestAnimationFrame(function(){ze(o,0),ze(Je,!1)})})}),{deviation:o}},bt(Wr,ac,tu,Wi,Mo,c_)),FW=We(function(e){var t=e[0].totalListHeight,n=e[1].didMount,r=e[2].scrollTo,o=J(0);return Be(H(n,je(o),Ce(function(a){return a[1]!==0}),ne(function(a){return{top:a[1]}})),function(a){Io(H(t,Ce(function(s){return s!==0})),function(){setTimeout(function(){ze(r,a)})})}),{initialScrollTop:o}},bt(h_,ja,Wr),{singleton:!0}),RW=We(function(e){var t=e[0].viewportHeight,n=e[1].totalListHeight,r=J(!1);return{alignToBottom:r,paddingTopAddition:Or(H(yr(r,t,n),Ce(function(o){return o[0]}),ne(function(o){return Math.max(0,o[1]-o[2])}),Dt()),0)}},bt(Wr,h_),{singleton:!0}),m1=We(function(e){var t=e[0],n=t.scrollTo,r=t.scrollContainerState,o=he(),a=he(),s=he(),u=J(!1),l=J(void 0);return pe(H(yr(o,a),ne(function(c){var m=c[0],me=m.viewportHeight,xe=m.scrollHeight;return{scrollTop:Math.max(0,m.scrollTop-c[1].offsetTop),scrollHeight:xe,viewportHeight:me}})),r),pe(H(n,je(a),ne(function(c){var m=c[0];return be({},m,{top:m.top+c[1].offsetTop})})),s),{useWindowScroll:u,customScrollParent:l,windowScrollContainerState:o,windowViewportRect:a,windowScrollTo:s}},bt(Wr)),NW=["done","behavior","align"],LW=We(function(e){var t=e[0],n=t.sizes,r=t.totalCount,o=t.gap,a=e[1],s=a.scrollTop,u=a.viewportHeight,l=a.headerHeight,c=a.scrollingInProgress,m=e[2].scrollToIndex,me=he();return pe(H(me,je(n,u,r,l,s,o),ne(function(xe){var Ne=xe[0],He=xe[1],Ye=xe[2],Je=xe[3],vn=xe[4],La=xe[5],sr=xe[6],Zr=Ne.done,zs=Ne.behavior,za=Ne.align,Hs=eu(Ne,NW),lc=null,Ty=n1(Ne,He,Je-1),_y=nc(Ty,He.offsetTree,sr)+vn;return _y<La?lc=be({},Hs,{behavior:zs,align:za!=null?za:"start"}):_y+ni(He.sizeTree,Ty)[1]>La+Ye&&(lc=be({},Hs,{behavior:zs,align:za!=null?za:"end"})),lc?Zr&&Io(H(c,Zl(1),Ce(function(xy){return xy===!1})),Zr):Zr&&Zr(),lc}),Ce(function(xe){return xe!==null})),m),{scrollIntoView:me}},bt(Wi,Wr,ic,tu,Mo),{singleton:!0}),$W=["listState","topItemsIndexes"],BW=We(function(e){return be({},e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])},bt(d_,IW,ja,d1,h_,FW,RW,m1,LW)),g1=We(function(e){var t=e[0],n=t.totalCount,r=t.sizeRanges,o=t.fixedItemSize,a=t.defaultItemSize,s=t.trackItemSizes,u=t.itemSize,l=t.data,c=t.firstItemIndex,m=t.groupIndices,me=t.statefulTotalCount,xe=t.gap,Ne=e[1],He=Ne.initialTopMostItemIndex,Ye=Ne.scrolledToInitialItem,Je=e[2],vn=e[3],La=e[4],sr=La.listState,Zr=La.topItemsIndexes,zs=eu(La,$W),za=e[5].scrollToIndex,Hs=e[7].topItemCount,lc=e[8].groupCounts,Ty=e[9],_y=e[10];return pe(zs.rangeChanged,Ty.scrollSeekRangeChanged),pe(H(Ty.windowViewportRect,ne(function(xy){return xy.visibleHeight})),Je.viewportHeight),be({totalCount:n,data:l,firstItemIndex:c,sizeRanges:r,initialTopMostItemIndex:He,scrolledToInitialItem:Ye,topItemsIndexes:Zr,topItemCount:Hs,groupCounts:lc,fixedItemHeight:o,defaultItemHeight:a,gap:xe},vn,{statefulTotalCount:me,listState:sr,scrollToIndex:za,trackItemSizes:s,itemSize:u,groupIndices:m},zs,Ty,Je,_y)},bt(Wi,p_,Wr,TW,tu,ic,jW,MW,s1,BW,Mo)),v1=h1(function(){if(typeof document=="undefined")return"sticky";var e=document.createElement("div");return e.style.position="-webkit-sticky",e.style.position==="-webkit-sticky"?"-webkit-sticky":"sticky"});function m_(e,t){var n=pt(null),r=Ki(function(l){if(l!==null&&l.offsetParent){var c,m,me=l.getBoundingClientRect(),xe=me.width;if(t){var Ne=t.getBoundingClientRect(),He=me.top-Ne.top;c=Ne.height-Math.max(0,He),m=He+t.scrollTop}else c=window.innerHeight-Math.max(0,me.top),m=me.top+window.pageYOffset;n.current={offsetTop:m,visibleHeight:c,visibleWidth:xe},e(n.current)}},[e,t]),o=i_(r),a=o.callbackRef,s=o.ref,u=Ki(function(){r(s.current)},[r,s]);return we(function(){if(t){t.addEventListener("scroll",u);var l=new ResizeObserver(u);return l.observe(t),function(){t.removeEventListener("scroll",u),l.unobserve(t)}}return window.addEventListener("scroll",u),window.addEventListener("resize",u),function(){window.removeEventListener("scroll",u),window.removeEventListener("resize",u)}},[u,t]),a}var Sd=ur(void 0),qW=["placeholder"],VW=["style","children"],zW=["style","children"];function g_(e){return e}var UW=We(function(){var e=J(function(l){return"Item "+l}),t=J(null),n=J(function(l){return"Group "+l}),r=J({}),o=J(g_),a=J("div"),s=J(Ao),u=function(l,c){return c===void 0&&(c=null),Or(H(r,ne(function(m){return m[l]}),Dt()),c)};return{context:t,itemContent:e,groupContent:n,components:r,computeItemKey:o,headerFooterTag:a,scrollerRef:s,FooterComponent:u("Footer"),HeaderComponent:u("Header"),TopItemListComponent:u("TopItemList"),ListComponent:u("List","div"),ItemComponent:u("Item","div"),GroupComponent:u("Group","div"),ScrollerComponent:u("Scroller","div"),EmptyPlaceholder:u("EmptyPlaceholder"),ScrollSeekPlaceholder:u("ScrollSeekPlaceholder")}});function ru(e,t){var n=he();return Be(n,function(){return console.warn("react-virtuoso: You are using a deprecated property. "+t,"color: red;","color: inherit;","color: blue;")}),pe(n,e),n}var WW=We(function(e){var t=e[0],n=e[1],r={item:ru(n.itemContent,"Rename the %citem%c prop to %citemContent."),group:ru(n.groupContent,"Rename the %cgroup%c prop to %cgroupContent."),topItems:ru(t.topItemCount,"Rename the %ctopItems%c prop to %ctopItemCount."),itemHeight:ru(t.fixedItemHeight,"Rename the %citemHeight%c prop to %cfixedItemHeight."),scrollingStateChange:ru(t.isScrolling,"Rename the %cscrollingStateChange%c prop to %cisScrolling."),adjustForPrependedItems:he(),maxHeightCacheSize:he(),footer:he(),header:he(),HeaderContainer:he(),FooterContainer:he(),ItemContainer:he(),ScrollContainer:he(),GroupContainer:he(),ListContainer:he(),emptyComponent:he(),scrollSeek:he()};function o(a,s,u){pe(H(a,je(n.components),ne(function(l){var c,m=l[0],me=l[1];return console.warn("react-virtuoso: "+u+" property is deprecated. Pass components."+s+" instead."),be({},me,((c={})[s]=m,c))})),n.components)}return Be(r.adjustForPrependedItems,function(){console.warn("react-virtuoso: adjustForPrependedItems is no longer supported. Use the firstItemIndex property instead - https://virtuoso.dev/prepend-items.","color: red;","color: inherit;","color: blue;")}),Be(r.maxHeightCacheSize,function(){console.warn("react-virtuoso: maxHeightCacheSize is no longer necessary. Setting it has no effect - remove it from your code.")}),Be(r.HeaderContainer,function(){console.warn("react-virtuoso: HeaderContainer is deprecated. Use headerFooterTag if you want to change the wrapper of the header component and pass components.Header to change its contents.")}),Be(r.FooterContainer,function(){console.warn("react-virtuoso: FooterContainer is deprecated. Use headerFooterTag if you want to change the wrapper of the footer component and pass components.Footer to change its contents.")}),Be(r.scrollSeek,function(a){var s=a.placeholder,u=eu(a,qW);console.warn("react-virtuoso: scrollSeek property is deprecated. Pass scrollSeekConfiguration and specify the placeholder in components.ScrollSeekPlaceholder instead."),ze(n.components,be({},hn(n.components),{ScrollSeekPlaceholder:s})),ze(t.scrollSeekConfiguration,u)}),o(r.footer,"Footer","footer"),o(r.header,"Header","header"),o(r.ItemContainer,"Item","ItemContainer"),o(r.ListContainer,"List","ListContainer"),o(r.ScrollContainer,"Scroller","ScrollContainer"),o(r.emptyComponent,"EmptyPlaceholder","emptyComponent"),o(r.GroupContainer,"Group","GroupContainer"),be({},t,n,r)},bt(g1,UW)),HW=function(e){return h("div",{style:{height:e.height}})},KW={position:v1(),zIndex:1,overflowAnchor:"none"},GW={overflowAnchor:"none"},y1=en(function(e){var t=e.showTopList,n=t!==void 0&&t,r=qe("listState"),o=mn("sizeRanges"),a=qe("useWindowScroll"),s=qe("customScrollParent"),u=mn("windowScrollContainerState"),l=mn("scrollContainerState"),c=s||a?u:l,m=qe("itemContent"),me=qe("context"),xe=qe("groupContent"),Ne=qe("trackItemSizes"),He=qe("itemSize"),Ye=qe("log"),Je=mn("gap"),vn=KT(o,He,Ne,n?Ao:c,Ye,Je,s).callbackRef,La=Le(0),sr=La[0],Zr=La[1];b_("deviation",function(yy){sr!==yy&&Zr(yy)});var zs=qe("EmptyPlaceholder"),za=qe("ScrollSeekPlaceholder")||HW,Hs=qe("ListComponent"),lc=qe("ItemComponent"),Ty=qe("GroupComponent"),_y=qe("computeItemKey"),xy=qe("isSeeking"),Bb=qe("groupIndices").length>0,Dy=qe("paddingTopAddition"),Bg=n?{}:{boxSizing:"border-box",paddingTop:r.offsetTop+Dy,paddingBottom:r.offsetBottom,marginTop:sr};return!n&&r.totalCount===0&&zs?h(zs,Zt(zs,me)):h(Hs,be({},Zt(Hs,me),{ref:vn,style:Bg,"data-test-id":n?"virtuoso-top-item-list":"virtuoso-item-list"}),(n?r.topItems:r.items).map(function(yy){var wy=yy.originalIndex,Ay=_y(wy+r.firstItemIndex,yy.data,me);return xy?h(za,be({},Zt(za,me),{key:Ay,index:yy.index,height:yy.size,type:yy.type||"item"},yy.type==="group"?{}:{groupIndex:yy.groupIndex})):yy.type==="group"?h(Ty,be({},Zt(Ty,me),{key:Ay,"data-index":wy,"data-known-size":yy.size,"data-item-index":yy.index,style:KW}),xe(yy.index)):h(lc,be({},Zt(lc,me),{key:Ay,"data-index":wy,"data-known-size":yy.size,"data-item-index":yy.index,"data-item-group-index":yy.groupIndex,style:GW}),Bb?m(yy.index,yy.groupIndex,yy.data,me):m(yy.index,yy.data,me))}))}),QW={height:"100%",outline:"none",overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},nu={width:"100%",height:"100%",position:"absolute",top:0},YW={width:"100%",position:v1(),top:0};function Zt(e,t){if(typeof e!="string")return{context:t}}var JW=en(function(){var e=qe("HeaderComponent"),t=mn("headerHeight"),n=qe("headerFooterTag"),r=Po(function(a){return t(Ui(a,"height"))}),o=qe("context");return e?h(n,{ref:r},h(e,Zt(e,o))):null}),XW=en(function(){var e=qe("FooterComponent"),t=mn("footerHeight"),n=qe("headerFooterTag"),r=Po(function(a){return t(Ui(a,"height"))}),o=qe("context");return e?h(n,{ref:r},h(e,Zt(e,o))):null});function v_(e){var t=e.usePublisher,n=e.useEmitter,r=e.useEmitterValue;return en(function(o){var a=o.style,s=o.children,u=eu(o,VW),l=t("scrollContainerState"),c=r("ScrollerComponent"),m=t("smoothScrollTargetReached"),me=r("scrollerRef"),xe=r("context"),Ne=QT(l,m,c,me),He=Ne.scrollerRef,Ye=Ne.scrollByCallback;return n("scrollTo",Ne.scrollToCallback),n("scrollBy",Ye),h(c,be({ref:He,style:be({},QW,a),"data-test-id":"virtuoso-scroller","data-virtuoso-scroller":!0,tabIndex:0},u,Zt(c,xe)),s)})}function y_(e){var t=e.usePublisher,n=e.useEmitter,r=e.useEmitterValue;return en(function(o){var a=o.style,s=o.children,u=eu(o,zW),l=t("windowScrollContainerState"),c=r("ScrollerComponent"),m=t("smoothScrollTargetReached"),me=r("totalListHeight"),xe=r("deviation"),Ne=r("customScrollParent"),He=r("context"),Ye=QT(l,m,c,Ao,Ne),Je=Ye.scrollerRef,vn=Ye.scrollByCallback,La=Ye.scrollToCallback;return bW(function(){return Je.current=Ne||window,function(){Je.current=null}},[Je,Ne]),n("windowScrollTo",La),n("scrollBy",vn),h(c,be({style:be({position:"relative"},a,me!==0?{height:me+xe}:{}),"data-virtuoso-scroller":!0},u,Zt(c,He)),s)})}var ZW=function(e){var t=e.children,n=st(Sd),r=mn("viewportHeight"),o=mn("fixedItemHeight"),a=Po(Xs(r,function(s){return Ui(s,"height")}));return we(function(){n&&(r(n.viewportHeight),o(n.itemHeight))},[n,r,o]),h("div",{style:nu,ref:a,"data-viewport-type":"element"},t)},eH=function(e){var t=e.children,n=st(Sd),r=mn("windowViewportRect"),o=mn("fixedItemHeight"),a=qe("customScrollParent"),s=m_(r,a);return we(function(){n&&(o(n.itemHeight),r({offsetTop:0,visibleHeight:n.viewportHeight,visibleWidth:100}))},[n,r,o]),h("div",{ref:s,style:nu,"data-viewport-type":"window"},t)},tH=function(e){var t=e.children,n=qe("TopItemListComponent"),r=qe("headerHeight"),o=be({},YW,{marginTop:r+"px"}),a=qe("context");return h(n||"div",{style:o,context:a},t)},Ed=vd(WW,{required:{},optional:{context:"context",followOutput:"followOutput",firstItemIndex:"firstItemIndex",itemContent:"itemContent",groupContent:"groupContent",overscan:"overscan",increaseViewportBy:"increaseViewportBy",totalCount:"totalCount",topItemCount:"topItemCount",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",groupCounts:"groupCounts",atBottomThreshold:"atBottomThreshold",atTopThreshold:"atTopThreshold",computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",fixedItemHeight:"fixedItemHeight",itemSize:"itemSize",scrollSeekConfiguration:"scrollSeekConfiguration",headerFooterTag:"headerFooterTag",data:"data",initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",react18ConcurrentRendering:"react18ConcurrentRendering",item:"item",group:"group",topItems:"topItems",itemHeight:"itemHeight",scrollingStateChange:"scrollingStateChange",maxHeightCacheSize:"maxHeightCacheSize",footer:"footer",header:"header",ItemContainer:"ItemContainer",ScrollContainer:"ScrollContainer",ListContainer:"ListContainer",GroupContainer:"GroupContainer",emptyComponent:"emptyComponent",HeaderContainer:"HeaderContainer",FooterContainer:"FooterContainer",scrollSeek:"scrollSeek"},methods:{scrollToIndex:"scrollToIndex",scrollIntoView:"scrollIntoView",scrollTo:"scrollTo",scrollBy:"scrollBy",adjustForPrependedItems:"adjustForPrependedItems",autoscrollToBottom:"autoscrollToBottom"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},en(function(e){var t=qe("useWindowScroll"),n=qe("topItemsIndexes").length>0,r=qe("customScrollParent"),o=r||t?eH:ZW;return h(r||t?iH:nH,be({},e),h(o,null,h(JW,null),h(y1,null),h(XW,null)),n&&h(tH,null,h(y1,{showTopList:!0})))})),rH=Ed.Component,mn=Ed.usePublisher,qe=Ed.useEmitterValue,b_=Ed.useEmitter,nH=v_({usePublisher:mn,useEmitterValue:qe,useEmitter:b_}),iH=y_({usePublisher:mn,useEmitterValue:qe,useEmitter:b_}),_1={items:[],offsetBottom:0,offsetTop:0,top:0,bottom:0,itemHeight:0,itemWidth:0},oH={items:[{index:0}],offsetBottom:0,offsetTop:0,top:0,bottom:0,itemHeight:0,itemWidth:0},b1=Math.round,w1=Math.ceil,w_=Math.floor,x_=Math.min,uc=Math.max;function x1(e,t){return Array.from({length:t-e+1}).map(function(n,r){return{index:r+e}})}function aH(e,t){return e&&e.column===t.column&&e.row===t.row}var sH=We(function(e){var t=e[0],n=t.overscan,r=t.visibleRange,o=t.listBoundary,a=e[1],s=a.scrollTop,u=a.viewportHeight,l=a.scrollBy,c=a.scrollTo,m=a.smoothScrollTargetReached,me=a.scrollContainerState,xe=e[2],Ne=e[3],He=e[4],Ye=He.propsReady,Je=He.didMount,vn=e[5],La=vn.windowViewportRect,sr=vn.windowScrollTo,Zr=vn.useWindowScroll,zs=vn.customScrollParent,za=vn.windowScrollContainerState,Hs=e[6],lc=J(0),Ty=J(0),_y=J(_1),xy=J({height:0,width:0}),Bb=J({height:0,width:0}),Dy=he(),Bg=he(),yy=J(0),wy=J({row:0,column:0});pe(H(Je,je(Ty),Ce(function(Yb){return Yb[1]!==0}),ne(function(Yb){return{items:x1(0,Yb[1]-1),top:0,bottom:0,offsetBottom:0,offsetTop:0,itemHeight:0,itemWidth:0}})),_y),pe(H(yr(Me(lc),r,Me(wy,aH),Me(Bb,function(Yb,Jb){return Yb&&Yb.width===Jb.width&&Yb.height===Jb.height})),je(xy),ne(function(Yb){var Jb=Yb[0],l2=Jb[0],y2=Jb[1],Rb=y2[0],i2=y2[1],s2=Jb[2],E2=Jb[3],L2=Yb[1],T2=s2.row,A2=E2.height,k_=E2.width,Vb=L2.width;if(l2===0||Vb===0)return _1;if(k_===0)return oH;var Qb=E1(Vb,k_,s2.column),zb=Qb*w_((Rb+T2)/(A2+T2)),t2=Qb*w1((i2+T2)/(A2+T2))-1;t2=uc(0,x_(l2-1,t2));var Zb=x1(zb=x_(t2,uc(0,zb)),t2),h2=S1(L2,s2,E2,Zb),g2=h2.top,Wb=h2.bottom,f2=w1(l2/Qb);return{items:Zb,offsetTop:g2,offsetBottom:f2*A2+(f2-1)*T2-Wb,top:g2,bottom:Wb,itemHeight:A2,itemWidth:k_}})),_y),pe(H(xy,ne(function(Yb){return Yb.height})),u),pe(H(yr(xy,Bb,_y,wy),ne(function(Yb){var Jb=S1(Yb[0],Yb[3],Yb[1],Yb[2].items);return[Jb.top,Jb.bottom]}),Dt(sc)),o);var Ay=Ur(H(Me(_y),Ce(function(Yb){return Yb.items.length>0}),je(lc),Ce(function(Yb){var Jb=Yb[0].items;return Jb[Jb.length-1].index===Yb[1]-1}),ne(function(Yb){return Yb[1]-1}),Dt())),$b=Ur(H(Me(_y),Ce(function(Yb){var Jb=Yb.items;return Jb.length>0&&Jb[0].index===0}),zi(0),Dt())),e0=Ur(H(Me(_y),Ce(function(Yb){return Yb.items.length>0}),ne(function(Yb){var Jb=Yb.items;return{startIndex:Jb[0].index,endIndex:Jb[Jb.length-1].index}}),Dt(u1)));pe(e0,Ne.scrollSeekRangeChanged),pe(H(Dy,je(xy,Bb,lc,wy),ne(function(Yb){var Jb=Yb[1],l2=Yb[2],y2=Yb[3],Rb=Yb[4],i2=o1(Yb[0]),s2=i2.align,E2=i2.behavior,L2=i2.offset,T2=i2.index;T2==="LAST"&&(T2=y2-1);var A2=S_(Jb,Rb,l2,T2=uc(0,T2,x_(y2-1,T2)));return s2==="end"?A2=b1(A2-Jb.height+l2.height):s2==="center"&&(A2=b1(A2-Jb.height/2+l2.height/2)),L2&&(A2+=L2),{top:A2,behavior:E2}})),c);var Hb=Or(H(_y,ne(function(Yb){return Yb.offsetBottom+Yb.bottom})),0);return pe(H(La,ne(function(Yb){return{width:Yb.visibleWidth,height:Yb.visibleHeight}})),xy),be({totalCount:lc,viewportDimensions:xy,itemDimensions:Bb,scrollTop:s,scrollHeight:Bg,overscan:n,scrollBy:l,scrollTo:c,scrollToIndex:Dy,smoothScrollTargetReached:m,windowViewportRect:La,windowScrollTo:sr,useWindowScroll:Zr,customScrollParent:zs,windowScrollContainerState:za,deviation:yy,scrollContainerState:me,initialItemCount:Ty,gap:wy},Ne,{gridState:_y,totalListHeight:Hb},xe,{startReached:$b,endReached:Ay,rangeChanged:e0,propsReady:Ye},Hs)},bt(d_,Wr,ac,d1,ja,m1,Mo));function S1(e,t,n,r){var o=n.height;return o===void 0||r.length===0?{top:0,bottom:0}:{top:S_(e,t,n,r[0].index),bottom:S_(e,t,n,r[r.length-1].index)+o}}function S_(e,t,n,r){var o=E1(e.width,n.width,t.column),a=w_(r/o),s=a*n.height+uc(0,a-1)*t.row;return s>0?s+t.row:s}function E1(e,t,n){return uc(1,w_((e+n)/(t+n)))}var uH=["placeholder"],lH=We(function(){var e=J(function(l){return"Item "+l}),t=J({}),n=J(null),r=J("virtuoso-grid-item"),o=J("virtuoso-grid-list"),a=J(g_),s=J(Ao),u=function(l,c){return c===void 0&&(c=null),Or(H(t,ne(function(m){return m[l]}),Dt()),c)};return{context:n,itemContent:e,components:t,computeItemKey:a,itemClassName:r,listClassName:o,scrollerRef:s,ListComponent:u("List","div"),ItemComponent:u("Item","div"),ScrollerComponent:u("Scroller","div"),ScrollSeekPlaceholder:u("ScrollSeekPlaceholder","div")}}),cH=We(function(e){var t=e[0],n=e[1],r={item:ru(n.itemContent,"Rename the %citem%c prop to %citemContent."),ItemContainer:he(),ScrollContainer:he(),ListContainer:he(),emptyComponent:he(),scrollSeek:he()};function o(a,s,u){pe(H(a,je(n.components),ne(function(l){var c,m=l[0],me=l[1];return console.warn("react-virtuoso: "+u+" property is deprecated. Pass components."+s+" instead."),be({},me,((c={})[s]=m,c))})),n.components)}return Be(r.scrollSeek,function(a){var s=a.placeholder,u=eu(a,uH);console.warn("react-virtuoso: scrollSeek property is deprecated. Pass scrollSeekConfiguration and specify the placeholder in components.ScrollSeekPlaceholder instead."),ze(n.components,be({},hn(n.components),{ScrollSeekPlaceholder:s})),ze(t.scrollSeekConfiguration,u)}),o(r.ItemContainer,"Item","ItemContainer"),o(r.ListContainer,"List","ListContainer"),o(r.ScrollContainer,"Scroller","ScrollContainer"),be({},t,n,r)},bt(sH,lH)),fH=en(function(){var e=Tr("gridState"),t=Tr("listClassName"),n=Tr("itemClassName"),r=Tr("itemContent"),o=Tr("computeItemKey"),a=Tr("isSeeking"),s=Fa("scrollHeight"),u=Tr("ItemComponent"),l=Tr("ListComponent"),c=Tr("ScrollSeekPlaceholder"),m=Tr("context"),me=Fa("itemDimensions"),xe=Fa("gap"),Ne=Tr("log"),He=Po(function(Ye){s(Ye.parentElement.parentElement.scrollHeight);var Je=Ye.firstChild;Je&&me(Je.getBoundingClientRect()),xe({row:D1("row-gap",getComputedStyle(Ye).rowGap,Ne),column:D1("column-gap",getComputedStyle(Ye).columnGap,Ne)})});return h(l,be({ref:He,className:t},Zt(l,m),{style:{paddingTop:e.offsetTop,paddingBottom:e.offsetBottom}}),e.items.map(function(Ye){var Je=o(Ye.index);return a?h(c,be({key:Je},Zt(c,m),{index:Ye.index,height:e.itemHeight,width:e.itemWidth})):h(u,be({},Zt(u,m),{className:n,"data-index":Ye.index,key:Je}),r(Ye.index,m))}))}),pH=function(e){var t=e.children,n=Fa("viewportDimensions"),r=Po(function(o){n(o.getBoundingClientRect())});return h("div",{style:nu,ref:r},t)},dH=function(e){var t=e.children,n=m_(Fa("windowViewportRect"),Tr("customScrollParent"));return h("div",{ref:n,style:nu},t)},kd=vd(cH,{optional:{context:"context",totalCount:"totalCount",overscan:"overscan",itemContent:"itemContent",components:"components",computeItemKey:"computeItemKey",initialItemCount:"initialItemCount",scrollSeekConfiguration:"scrollSeekConfiguration",listClassName:"listClassName",itemClassName:"itemClassName",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",item:"item",ItemContainer:"ItemContainer",ScrollContainer:"ScrollContainer",ListContainer:"ListContainer",scrollSeek:"scrollSeek"},methods:{scrollTo:"scrollTo",scrollBy:"scrollBy",scrollToIndex:"scrollToIndex"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange"}},en(function(e){var t=be({},e),n=Tr("useWindowScroll"),r=Tr("customScrollParent"),o=r||n?dH:pH;return h(r||n?mH:hH,be({},t),h(o,null,h(fH,null)))})),Fa=kd.usePublisher,Tr=kd.useEmitterValue,k1=kd.useEmitter,hH=v_({usePublisher:Fa,useEmitterValue:Tr,useEmitter:k1}),mH=y_({usePublisher:Fa,useEmitterValue:Tr,useEmitter:k1});function D1(e,t,n){return t==="normal"||t!=null&&t.endsWith("px")||n(e+" was not resolved to pixel value correctly",t,Gt.WARN),t==="normal"?0:parseInt(t!=null?t:"0",10)}var gH=We(function(){var e=J(function(l){return h("td",null,"Item $",l)}),t=J(null),n=J(null),r=J(null),o=J({}),a=J(g_),s=J(Ao),u=function(l,c){return c===void 0&&(c=null),Or(H(o,ne(function(m){return m[l]}),Dt()),c)};return{context:t,itemContent:e,fixedHeaderContent:n,fixedFooterContent:r,components:o,computeItemKey:a,scrollerRef:s,TableComponent:u("Table","table"),TableHeadComponent:u("TableHead","thead"),TableFooterComponent:u("TableFoot","tfoot"),TableBodyComponent:u("TableBody","tbody"),TableRowComponent:u("TableRow","tr"),ScrollerComponent:u("Scroller","div"),EmptyPlaceholder:u("EmptyPlaceholder"),ScrollSeekPlaceholder:u("ScrollSeekPlaceholder"),FillerRow:u("FillerRow")}}),vH=We(function(e){return be({},e[0],e[1])},bt(g1,gH)),yH=function(e){return h("tr",null,h("td",{style:{height:e.height}}))},_H=function(e){return h("tr",null,h("td",{style:{height:e.height,padding:0,border:0}}))},bH=en(function(){var e=tt("listState"),t=Pn("sizeRanges"),n=tt("useWindowScroll"),r=tt("customScrollParent"),o=Pn("windowScrollContainerState"),a=Pn("scrollContainerState"),s=r||n?o:a,u=tt("itemContent"),l=tt("trackItemSizes"),c=KT(t,tt("itemSize"),l,s,tt("log"),void 0,r),m=c.callbackRef,me=c.ref,xe=Le(0),Ne=xe[0],He=xe[1];E_("deviation",function(yy){Ne!==yy&&(me.current.style.marginTop=yy+"px",He(yy))});var Ye=tt("EmptyPlaceholder"),Je=tt("ScrollSeekPlaceholder")||yH,vn=tt("FillerRow")||_H,La=tt("TableBodyComponent"),sr=tt("TableRowComponent"),Zr=tt("computeItemKey"),zs=tt("isSeeking"),za=tt("paddingTopAddition"),Hs=tt("firstItemIndex"),lc=tt("statefulTotalCount"),Ty=tt("context");if(lc===0&&Ye)return h(Ye,Zt(Ye,Ty));var _y=e.offsetTop+za+Ne,xy=e.offsetBottom,Bb=_y>0?h(vn,{height:_y,key:"padding-top"}):null,Dy=xy>0?h(vn,{height:xy,key:"padding-bottom"}):null,Bg=e.items.map(function(yy){var wy=yy.originalIndex,Ay=Zr(wy+Hs,yy.data,Ty);return zs?h(Je,be({},Zt(Je,Ty),{key:Ay,index:yy.index,height:yy.size,type:yy.type||"item"})):h(sr,be({},Zt(sr,Ty),{key:Ay,"data-index":wy,"data-known-size":yy.size,"data-item-index":yy.index,style:{overflowAnchor:"none"}}),u(yy.index,yy.data,Ty))});return h(La,be({ref:m,"data-test-id":"virtuoso-item-list"},Zt(La,Ty)),[Bb].concat(Bg,[Dy]))}),wH=function(e){var t=e.children,n=st(Sd),r=Pn("viewportHeight"),o=Pn("fixedItemHeight"),a=Po(Xs(r,function(s){return Ui(s,"height")}));return we(function(){n&&(r(n.viewportHeight),o(n.itemHeight))},[n,r,o]),h("div",{style:nu,ref:a,"data-viewport-type":"element"},t)},xH=function(e){var t=e.children,n=st(Sd),r=Pn("windowViewportRect"),o=Pn("fixedItemHeight"),a=tt("customScrollParent"),s=m_(r,a);return we(function(){n&&(o(n.itemHeight),r({offsetTop:0,visibleHeight:n.viewportHeight,visibleWidth:100}))},[n,r,o]),h("div",{ref:s,style:nu,"data-viewport-type":"window"},t)},Dd=vd(vH,{required:{},optional:{context:"context",followOutput:"followOutput",firstItemIndex:"firstItemIndex",itemContent:"itemContent",fixedHeaderContent:"fixedHeaderContent",fixedFooterContent:"fixedFooterContent",overscan:"overscan",increaseViewportBy:"increaseViewportBy",totalCount:"totalCount",topItemCount:"topItemCount",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",groupCounts:"groupCounts",atBottomThreshold:"atBottomThreshold",atTopThreshold:"atTopThreshold",computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",fixedItemHeight:"fixedItemHeight",itemSize:"itemSize",scrollSeekConfiguration:"scrollSeekConfiguration",data:"data",initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",react18ConcurrentRendering:"react18ConcurrentRendering"},methods:{scrollToIndex:"scrollToIndex",scrollIntoView:"scrollIntoView",scrollTo:"scrollTo",scrollBy:"scrollBy"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},en(function(e){var t=tt("useWindowScroll"),n=tt("customScrollParent"),r=Pn("fixedHeaderHeight"),o=Pn("fixedFooterHeight"),a=tt("fixedHeaderContent"),s=tt("fixedFooterContent"),u=tt("context"),l=Po(Xs(r,function(vn){return Ui(vn,"height")})),c=Po(Xs(o,function(vn){return Ui(vn,"height")})),m=n||t?EH:SH,me=n||t?xH:wH,xe=tt("TableComponent"),Ne=tt("TableHeadComponent"),He=tt("TableFooterComponent"),Ye=a?h(Ne,be({key:"TableHead",style:{zIndex:1,position:"sticky",top:0},ref:l},Zt(Ne,u)),a()):null,Je=s?h(He,be({key:"TableFoot",style:{zIndex:1,position:"sticky",bottom:0},ref:c},Zt(He,u)),s()):null;return h(m,be({},e),h(me,null,h(xe,be({style:{borderSpacing:0}},Zt(xe,u)),[Ye,h(bH,{key:"TableBody"}),Je])))})),Pn=Dd.usePublisher,tt=Dd.useEmitterValue,E_=Dd.useEmitter,SH=v_({usePublisher:Pn,useEmitterValue:tt,useEmitter:E_}),EH=y_({usePublisher:Pn,useEmitterValue:tt,useEmitter:E_}),C1=rH;fi();var A1=li(T1());v();var CH=`._react-hint_1qhe8_1 {
	padding: 5px;
	position: absolute;
	z-index: 9999;
	cursor: default;
	animation: .5s _fadeIn_1qhe8_1;
}

._react-hint__content_1qhe8_9 {
	padding: 10px;
	border-radius: 5px;
	background: #000;
	color: #fff;
}

._react-hint_1qhe8_1:after {
	content: '';
	width: 0;
	height: 0;
	margin: auto;
	display: block;
	position: absolute;
	top: 0;
	left: 0;
	right: 0;
	bottom: 0;
	border: 5px solid transparent;
}

._react-hint--top_1qhe8_30:after {
	top: auto;
	border-bottom: none;
	border-top-color: #000;
}

._react-hint--left_1qhe8_36:after {
	left: auto;
	border-right: none;
	border-left-color: #000;
}

._react-hint--right_1qhe8_42:after {
	right: auto;
	border-left: none;
	border-right-color: #000;
}

._react-hint--bottom_1qhe8_48:after {
	bottom: auto;
	border-top: none;
	border-bottom-color: #000;
}

@keyframes _fadeIn_1qhe8_1 {
	from {
		opacity: 0;
	}

	to {
		opacity: 1;
	}
}
`;document.head.appendChild(document.createElement("style")).appendChild(document.createTextNode(CH));v();var OH=`._main_1t0ck_1 {
  flex: 1;
  position: relative;
}

._newMessagesButton_1t0ck_6 {
  position: absolute;
  top: var(--j-space-500);
  left: 50%;
  z-index: 10;
  transform: translateX(-50%);
}

._reactHint_1t0ck_14 {
  position: absolute;
  z-index: 99;
  font-size: var(--j-font-size-400);
  font-weight: 500;
  padding: var(--j-space-300) var(--j-space-300);
  background: var(--j-color-ui-800);
  color: var(--j-color-ui-200);
  border-radius: var(--j-border-radius);
  white-space: nowrap;
  z-index: 999;
  margin-left: 10px;
}

._arrow_1t0ck_28,
._arrow_1t0ck_28::before {
  position: absolute;
  width: 8px;
  height: 8px;
  background: var(--j-color-ui-800);
}

._arrow_1t0ck_28 {
  visibility: hidden;
}

._arrow_1t0ck_28::before {
  visibility: visible;
  content: "";
  transform: rotate(45deg);
  left: -12px;
  top: -14px;
}`;document.head.appendChild(document.createElement("style")).appendChild(document.createTextNode(OH));var cc={main:"_main_1t0ck_1",newMessagesButton:"_newMessagesButton_1t0ck_6",reactHint:"_reactHint_1t0ck_14",arrow:"_arrow_1t0ck_28"},TH=(0,A1.default)({createElement:h,Component:br,createRef:pu});function D_({perspectiveUuid:e,mainRef:t,channelId:n}){let r=pt(document.createElement("emoji-picker")),[o,a]=Le(!0),[s,u]=Le(!1),l=pt(),{state:{messages:c,isFetchingMessages:m,scrollPosition:me,hasNewMessage:xe,isMessageFromSelf:Ne,showLoadMore:He},methods:{loadMore:Ye,removeReaction:Je,addReaction:vn,saveScrollPos:La,setHasNewMessage:sr,setIsMessageFromSelf:Zr}}=st(na);we(()=>{l.current&&c.length>0&&!s&&(me?l.current.scrollToIndex({index:me}):l.current.scrollToIndex({index:c.length}),u(!0))},[c,s,me]),we(()=>{if(o&&xe){zs();let _y=new CustomEvent("hide-notification-indicator",{detail:{uuid:n},bubbles:!0});t==null||t.dispatchEvent(_y)}},[xe,o]),we(()=>{if(Ne){zs();let _y=new CustomEvent("hide-notification-indicator",{detail:{uuid:n},bubbles:!0});t==null||t.dispatchEvent(_y)}},[Ne]),we(()=>{if(o){let _y=new CustomEvent("hide-notification-indicator",{detail:{uuid:n},bubbles:!0});t==null||t.dispatchEvent(_y)}},[o]);function zs(){l.current&&(l.current.scrollToIndex({index:c.length-1}),sr(!1))}function za(_y){let xy=c[_y-1],Bb=c[_y];return!xy||!Bb||xy.author!==Bb.author?!0:xy.author===Bb.author&&cd(Jl(Bb.timestamp),Jl(xy.timestamp))>=2}function Hs(_y,xy){r.current.setAttribute("message-index",xy.toString()),wo(_y.target,{content:r.current,trigger:"click",appendTo:document.body,interactive:!0,onShow:()=>{r.current.addEventListener("emoji-click",lc)},onHide:()=>{r.current.removeEventListener("emoji-click",lc)}}).show()}async function lc(_y){let xy=_y.detail.unicode.codePointAt(0).toString(16),Bb=_y.target.getAttribute("message-index"),Dy=c[parseInt(Bb)],Bg=await Hn(),yy=Dy.reactions.find(wy=>wy.author===Bg.did&&wy.content===xy);yy?Je({author:yy.author,data:{predicate:Wn,target:yy.content,source:Dy.id},proof:{invalid:!1,key:"",signature:"",valid:!0},timestamp:yy.timestamp}):vn(Dy.id,xy)}let Ty=({startIndex:_y})=>{typeof _y=="number"&&s&&(La(_y),Zr(!1))};return h("main",{class:cc.main},xe&&!o&&h("j-button",{class:cc.newMessagesButton,variant:"primary",onClick:zs},"New messages"),h(C1,{components:{Header:()=>He?h("j-box",{py:"500"},h("j-flex",{a:"center",j:"center"},m?h("j-flex",{a:"center",gap:"300"},h("span",null,"Loading"),h("j-spinner",{size:"xxs"})):h("j-button",{size:"sm",onClick:Ye,variant:"subtle"},"Load more"))):h("j-box",{py:"500"},h("j-flex",{a:"center",j:"center"},h("j-text",null,"You have reached the end...")))},ref:l,alignToBottom:!0,startReached:()=>console.log("start reached"),atBottomStateChange:_y=>{o!==_y&&(_y&&sr(!1),a(o))},style:{height:"100%"},overscan:20,totalCount:c.length,rangeChanged:Ty,initialTopMostItemIndex:me||0,itemContent:_y=>h(Jy,{onOpenEmojiPicker:xy=>Hs(xy,_y),showAvatar:za(_y),index:_y,mainRef:t})}),h(TH,{position:"right",className:cc.reactHint,events:{hover:!0},onRenderContent:_y=>h("div",null,h("span",null,_y.dataset.timestamp),h("div",{class:cc.arrow}))}))}v();var AH=`._container_117jb_1 {
  height: 100%;
  display: flex;
  flex-direction: column;
  overflow: hidden;
}`;document.head.appendChild(document.createElement("style")).appendChild(document.createTextNode(AH));var I1={container:"_container_117jb_1"},IH=({perspectiveUuid:e,channel:t})=>{let[n,r]=Le(null);return h("div",{class:I1.container,ref:r},h(D_,{perspectiveUuid:e,channelId:t,mainRef:n}),h(Py,null))},M1=({perspectiveUuid:e="",port:t="",channel:n=""})=>h(bS,null,h(sg,null,h(ag,{perspectiveUuid:e},h(ig,{perspectiveUuid:e,channelId:n},h(IH,{perspectiveUuid:e,channel:n})))));window.ResizeObserver||(window.ResizeObserver=ResizeObserver);customElements.get("emoji-picker")===void 0&&Promise.resolve().then(()=>(MA(),IA)).then(e=>{console.log("imported?")});var iK=Ec.toCustomElement(M1,["perspective-uuid","port","channel"],{shadow:!1}),uue=iK;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */const _sfc_main$i=defineComponent({components:{Skeleton},props:["did","langAddress"],emits:["openCompleteProfile"],data(){return{profile:null}},watch:{did:{handler:async function(e){this.profile=null,typeof e=="string"&&(this.profile=await getProfile(e))},immediate:!0}}}),_hoisted_1$i={key:0,p:"800"},_hoisted_2$h={a:"center",direction:"column",gap:"500"},_hoisted_3$h=["hash","src"],_hoisted_4$f={key:0,variant:"heading-sm",nomargin:""},_hoisted_5$c={variant:"body"},_hoisted_6$9={key:1,variant:"subheading"},_hoisted_7$9={key:1,p:"800"},_hoisted_8$8={a:"center",direction:"column",gap:"500"};function _sfc_render$i(e,t,n,r,o,a){const s=resolveComponent("Skeleton");return e.profile?(openBlock(),createElementBlock("j-box",_hoisted_1$i,[createBaseVNode("j-flex",_hoisted_2$h,[createBaseVNode("j-avatar",{style:{"--j-avatar-size":"100px"},hash:e.did,src:e.profile.profilePicture},null,8,_hoisted_3$h),e.profile.familyName||e.profile.givenName?(openBlock(),createElementBlock("j-text",_hoisted_4$f,toDisplayString(`${e.profile.givenName} ${e.profile.familyName}`),1)):createCommentVNode("",!0),createBaseVNode("j-text",_hoisted_5$c," @"+toDisplayString(e.profile.username),1),e.profile.bio?(openBlock(),createElementBlock("j-text",_hoisted_6$9,toDisplayString(e.profile.bio),1)):createCommentVNode("",!0),createBaseVNode("j-button",{variant:"primary",onClick:t[0]||(t[0]=()=>e.$emit("openCompleteProfile"))}," View complete profile ")])])):(openBlock(),createElementBlock("j-box",_hoisted_7$9,[createBaseVNode("j-flex",_hoisted_8$8,[createVNode(s,{variant:"circle",width:"100px",height:"100px"}),createVNode(s)])]))}var Profile=_export_sfc(_sfc_main$i,[["render",_sfc_render$i]]);const PERSPECTIVE_VIEW_EVENT_ELEMENT="perspective-view-event-element";class EventBus{constructor(t){this.bus=document.getElementsByTagName(t!=null?t:PERSPECTIVE_VIEW_EVENT_ELEMENT)[0],this.bus||(this.bus=document.createElement(t!=null?t:PERSPECTIVE_VIEW_EVENT_ELEMENT)),document.body.append(this.bus)}addEventListener(t,n){this.bus.addEventListener(t,n)}removeEventListener(t,n){this.bus.addEventListener(t,n)}dispatchEvent(t,n={}){this.bus.dispatchEvent(new CustomEvent(t,{detail:n}))}}const useEventEmitter=()=>ref(new EventBus);var ChannelView_vue_vue_type_style_index_0_lang="";const _sfc_main$h=defineComponent({name:"ChannelView",props:["channelId","communityId"],components:{Profile},setup(){const e=useAppStore(),t=useDataStore(),n=ref([]),r=ref({}),o=ref(!1),a=useEventEmitter();return{appStore:e,dataStore:t,script:null,memberMentions:n,activeProfile:r,showProfile:o,bus:a}},mounted(){customElements.get("perspective-view")===void 0&&customElements.define("perspective-view",uue)},computed:{port(){return parseInt(localStorage.getItem("ad4minPort")||"")||12e3},community(){const e=this.communityId;return this.dataStore.getCommunity(e)},channel(){const e=this.communityId,t=this.channelId;return this.dataStore.getChannel(e,t)}},methods:{toggleSidebar(){this.appStore.toggleSidebar()},onAgentClick({detail:e}){this.toggleProfile(!0,e.did)},onPerspectiveClick({detail:e}){e.uuid&&this.$router.push({name:"channel",params:{channelId:e.uuid,communityId:this.community.neighbourhood.perspective.uuid}})},onHideNotificationIndicator({detail:e}){const{channelId:t}=this.$route.params;console.log("hide notification indicator",e),this.dataStore.setHasNewMessages({communityId:this.community.neighbourhood.perspective.uuid,channelId:t,value:!1})},toggleProfile(e,t){e?this.activeProfile=t:this.activeProfile=void 0,this.showProfile=e},async handleProfileClick(e){const t=await hb$1();this.activeProfile=e;const n=await t.agent.me();e===n.did?this.$router.push({name:"home",params:{did:e}}):this.$router.push({name:"profile",params:{did:e,communityId:this.community.neighbourhood.perspective.uuid}})}}}),_hoisted_1$h={class:"channel-view",style:{height:"100%"}},_hoisted_2$g={class:"channel-view__header"},_hoisted_3$g=createBaseVNode("j-icon",{color:"ui-800",size:"md",name:"arrow-left-short"},null,-1),_hoisted_4$e=[_hoisted_3$g],_hoisted_5$b={color:"black",variant:"heading-md"},_hoisted_6$8=["port","channel","perspective-uuid"],_hoisted_7$8=["open"];function _sfc_render$h(e,t,n,r,o,a){const s=resolveComponent("Profile");return openBlock(),createElementBlock("div",_hoisted_1$h,[createBaseVNode("div",_hoisted_2$g,[createBaseVNode("j-button",{class:"channel-view__sidebar-toggle",variant:"ghost",onClick:t[0]||(t[0]=()=>e.toggleSidebar())},_hoisted_4$e),createBaseVNode("j-text",_hoisted_5$b,"# "+toDisplayString(e.channel.name),1)]),createBaseVNode("perspective-view",{class:"perspective-view",port:e.port,channel:e.channelId,"perspective-uuid":e.communityId,onAgentClick:t[1]||(t[1]=(...u)=>e.onAgentClick&&e.onAgentClick(...u)),onPerspectiveClick:t[2]||(t[2]=(...u)=>e.onPerspectiveClick&&e.onPerspectiveClick(...u)),onHideNotificationIndicator:t[3]||(t[3]=(...u)=>e.onHideNotificationIndicator&&e.onHideNotificationIndicator(...u))},null,40,_hoisted_6$8),e.activeProfile?(openBlock(),createElementBlock("j-modal",{key:0,size:"xs",open:e.showProfile,onToggle:t[5]||(t[5]=u=>e.toggleProfile(u.target.open,e.activeProfile))},[createVNode(s,{did:e.activeProfile,onOpenCompleteProfile:t[4]||(t[4]=()=>e.handleProfileClick(e.activeProfile))},null,8,["did"])],40,_hoisted_7$8)):createCommentVNode("",!0)])}var ChannelView=_export_sfc(_sfc_main$h,[["render",_sfc_render$h]]);const _sfc_main$g=defineComponent({name:"CommunityView",components:{EditCommunity,CreateChannel,ChannelView,CommunityMembers,CommunitySidebar,CommunitySettings,SidebarLayout},setup(){const e=useAppStore(),t=useDataStore();return{loadedChannels:ref({}),appStore:e,dataStore:t}},data(){return{hasCopied:!1}},watch:{"$route.params.communityId":{handler:function(e){e&&(this.dataStore.fetchNeighbourhoodMembers(e),this.dataStore.fetchNeighbourhoodMetadata(e),this.dataStore.fetchNeighbourhoodChannels(e),this.handleThemeChange(e),this.goToActiveChannel(e))},immediate:!0},"$route.params.channelId":{handler:function(e){if(e){this.dataStore.setCurrentChannelId({communityId:this.communityId,channelId:e});const t=this.dataStore.getChannel(this.communityId,e);t&&(this.loadedChannels={...this.loadedChannels,[t.id]:!0})}},immediate:!0}},methods:{...mapState(useDataStore,["getChannelStates"]),...mapActions(useAppStore,["setShowCreateChannel","setShowEditCommunity","setShowCommunityMembers","setShowInviteCode","setShowCommunitySettings"]),goToActiveChannel(e){if(!e)return;const t=this.dataStore.getChannelStates(e)[0].name,n=this.community.state.currentChannelId||t;n&&this.$router.push({name:"channel",params:{communityId:e,channelId:n}})},handleThemeChange(e){var t;if(e)this.appStore.changeCurrentTheme((t=this.community.state)!=null&&t.useLocalTheme?e:"global");else{this.appStore.changeCurrentTheme("global");return}},getInviteCode(){const e=this.community.neighbourhood.neighbourhoodUrl,t=document.createElement("textarea");t.value=`Hey! Here is an invite code to join my private community on Flux: ${e}`,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t),this.hasCopied=!0,this.appStore.showSuccessToast({message:"Your custom invite code is copied to your clipboard!"})}},computed:{communityId(){return this.$route.params.communityId},channelId(){return this.$route.params.channelId},modals(){return this.appStore.modals},community(){const e=this.communityId;return this.dataStore.getCommunity(e)},channels(){return this.dataStore.getChannels}}}),_hoisted_1$g=["open"],_hoisted_2$f=["open"],_hoisted_3$f=["open"],_hoisted_4$d=["open"],_hoisted_5$a={p:"800"},_hoisted_6$7=createBaseVNode("j-text",{variant:"heading"},"Invite people",-1),_hoisted_7$7=createBaseVNode("j-text",{variant:"ingress"}," Copy and send this code to the people you want to join your community ",-1),_hoisted_8$7=["value"],_hoisted_9$6=["name"],_hoisted_10$6=["open"];function _sfc_render$g(e,t,n,r,o,a){const s=resolveComponent("community-sidebar"),u=resolveComponent("channel-view"),l=resolveComponent("sidebar-layout"),c=resolveComponent("community-members"),m=resolveComponent("edit-community"),me=resolveComponent("create-channel"),xe=resolveComponent("community-settings");return openBlock(),createElementBlock(Fragment$1,null,[createVNode(l,null,{sidebar:withCtx(()=>[createVNode(s,{community:e.community},null,8,["community"])]),default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment$1,null,renderList(e.channels,Ne=>(openBlock(),createElementBlock("div",{style:normalizeStyle([{height:"100%"},{height:Ne.name===e.channelId&&Ne.sourcePerspective===e.communityId?"100%":"0"}]),key:Ne.id},[e.loadedChannels[Ne.id]?withDirectives((openBlock(),createBlock(u,{key:0,channelId:Ne.name,communityId:Ne.sourcePerspective},null,8,["channelId","communityId"])),[[vShow,Ne.name===e.channelId&&Ne.sourcePerspective===e.communityId]]):createCommentVNode("",!0)],4))),128))]),_:1}),createBaseVNode("j-modal",{open:e.modals.showCommunityMembers,onToggle:t[1]||(t[1]=Ne=>e.setShowCommunityMembers(Ne.target.open))},[e.modals.showCommunityMembers?(openBlock(),createBlock(c,{key:0,onClose:t[0]||(t[0]=()=>e.setShowCommunityMembers(!1))})):createCommentVNode("",!0)],40,_hoisted_1$g),createBaseVNode("j-modal",{size:"sm",open:e.modals.showEditCommunity,onToggle:t[4]||(t[4]=Ne=>e.setShowEditCommunity(Ne.target.open))},[e.modals.showEditCommunity?(openBlock(),createBlock(m,{key:0,onSubmit:t[2]||(t[2]=()=>e.setShowEditCommunity(!1)),onCancel:t[3]||(t[3]=()=>e.setShowEditCommunity(!1))})):createCommentVNode("",!0)],40,_hoisted_2$f),createBaseVNode("j-modal",{open:e.modals.showCreateChannel,onToggle:t[7]||(t[7]=Ne=>e.setShowCreateChannel(Ne.target.open))},[e.modals.showCreateChannel?(openBlock(),createBlock(me,{key:0,onSubmit:t[5]||(t[5]=()=>e.setShowCreateChannel(!1)),onCancel:t[6]||(t[6]=()=>e.setShowCreateChannel(!1))})):createCommentVNode("",!0)],40,_hoisted_3$f),createBaseVNode("j-modal",{size:"sm",open:e.modals.showInviteCode,onToggle:t[10]||(t[10]=Ne=>e.setShowInviteCode(Ne.target.open))},[createBaseVNode("j-box",_hoisted_5$a,[_hoisted_6$7,_hoisted_7$7,createBaseVNode("j-input",{onClick:t[9]||(t[9]=Ne=>Ne.target.select()),size:"lg",readonly:"",value:e.community.neighbourhood.neighbourhoodUrl},[createBaseVNode("j-button",{onClick:t[8]||(t[8]=withModifiers((...Ne)=>e.getInviteCode&&e.getInviteCode(...Ne),["stop"])),variant:"ghost",slot:"end"},[createBaseVNode("j-icon",{name:e.hasCopied?"clipboard-check":"clipboard"},null,8,_hoisted_9$6)])],8,_hoisted_8$7)])],40,_hoisted_4$d),createBaseVNode("j-modal",{open:e.modals.showCommunitySettings,onToggle:t[11]||(t[11]=Ne=>e.setShowCommunitySettings(Ne.target.open))},[createVNode(xe)],40,_hoisted_10$6)],64)}var CommunityView=_export_sfc(_sfc_main$g,[["render",_sfc_render$g]]);const _sfc_main$f=defineComponent({setup(){return{appStore:useAppStore(),showConfirm:ref(!1)}},methods:{cleanState(){window.api.send("cleanState")},getLogs(){window.api.send("copyLogs"),this.appStore.showSuccessToast({message:"Log file called debug.log been copied to your desktop, please upload to Junto Discord, thanks <3"})}}}),_hoisted_1$f={pb:"800"},_hoisted_2$e=createBaseVNode("j-box",{pb:"300"},[createBaseVNode("j-text",{variant:"label"},"Flux Privacy Policy")],-1),_hoisted_3$e=createBaseVNode("j-icon",{size:"sm",name:"trash"},null,-1);function _sfc_render$f(e,t,n,r,o,a){return openBlock(),createElementBlock("j-box",_hoisted_1$f,[_hoisted_2$e,createBaseVNode("j-button",{size:"md",variant:"primary",onClick:t[0]||(t[0]=s=>e.showConfirm=!0)},[_hoisted_3$e,createTextVNode(" Clear state ")])])}var Privacy=_export_sfc(_sfc_main$f,[["render",_sfc_render$f]]),Settings_vue_vue_type_style_index_0_scoped_true_lang="";const _sfc_main$e=defineComponent({components:{ThemeEditor,Privacy},setup(){return{appStore:useAppStore()}},data(){return{currentView:"theme-editor"}},methods:{updateGlobalTheme(e){this.appStore.updateGlobalTheme(e)}},computed:{theme(){return this.appStore.globalTheme}}}),_withScopeId$b=e=>(pushScopeId("data-v-018a2000"),e=e(),popScopeId(),e),_hoisted_1$e={p:"800"},_hoisted_2$d=_withScopeId$b(()=>createBaseVNode("j-box",{pl:"500",pb:"800"},[createBaseVNode("j-text",{variant:"heading-sm"},"Settings")],-1)),_hoisted_3$d={class:"settings"},_hoisted_4$c={class:"settings__sidebar"},_hoisted_5$9=["value"],_hoisted_6$6=_withScopeId$b(()=>createBaseVNode("j-tab-item",{value:"theme-editor"},[createBaseVNode("j-icon",{size:"sm",name:"eye",slot:"start"}),createTextVNode(" Appearance ")],-1)),_hoisted_7$6=_withScopeId$b(()=>createBaseVNode("j-tab-item",{value:"privacy"},[createBaseVNode("j-icon",{size:"sm",name:"lock",slot:"start"}),createTextVNode(" Privacy ")],-1)),_hoisted_8$6=[_hoisted_6$6,_hoisted_7$6],_hoisted_9$5={class:"settings__content"},_hoisted_10$5={key:2};function _sfc_render$e(e,t,n,r,o,a){const s=resolveComponent("theme-editor"),u=resolveComponent("privacy");return openBlock(),createElementBlock("j-box",_hoisted_1$e,[_hoisted_2$d,createBaseVNode("div",_hoisted_3$d,[createBaseVNode("aside",_hoisted_4$c,[createBaseVNode("j-tabs",{full:"",vertical:"",value:e.currentView,onChange:t[0]||(t[0]=l=>e.currentView=l.target.value)},_hoisted_8$6,40,_hoisted_5$9)]),createBaseVNode("div",_hoisted_9$5,[e.currentView==="theme-editor"?(openBlock(),createBlock(s,{key:0,onUpdate:e.updateGlobalTheme,theme:e.theme},null,8,["onUpdate","theme"])):createCommentVNode("",!0),e.currentView==="privacy"?(openBlock(),createBlock(u,{key:1})):createCommentVNode("",!0),e.currentView==="updates"?(openBlock(),createElementBlock("div",_hoisted_10$5,[createBaseVNode("j-button",{onClick:t[1]||(t[1]=(...l)=>e.updateApp.func&&e.updateApp.func(...l)),variant:"primary"},toDisplayString(e.updateApp.text),1)])):createCommentVNode("",!0)])])])}var Settings=_export_sfc(_sfc_main$e,[["render",_sfc_render$e],["__scopeId","data-v-018a2000"]]),ProfileCards_vue_vue_type_style_index_0_scoped_true_lang="";const _sfc_main$d=defineComponent({props:["title","description","image","sameAgent"],emits:["delete","edit"],data(){return{showContextMenu:!1}},computed:{computedTitle(){return this.title.length>15?`${this.title.substring(0,15)}...`:this.title},computedDescription(){return this.description.length>20?`${this.description.substring(0,15)}...`:this.description}}}),_withScopeId$a=e=>(pushScopeId("data-v-78aac3ed"),e=e(),popScopeId(),e),_hoisted_1$d={class:"container"},_hoisted_2$c={class:"img"},_hoisted_3$c=["src"],_hoisted_4$b={j:"between"},_hoisted_5$8={style:{cursor:"pointer"}},_hoisted_6$5={nomargin:"",size:"600",color:"black"},_hoisted_7$5={nomargin:""},_hoisted_8$5=["open"],_hoisted_9$4=_withScopeId$a(()=>createBaseVNode("j-icon",{name:"three-dots"},null,-1)),_hoisted_10$4=[_hoisted_9$4],_hoisted_11$4={slot:"content"};function _sfc_render$d(e,t,n,r,o,a){return openBlock(),createElementBlock("div",_hoisted_1$d,[createBaseVNode("div",null,[createBaseVNode("div",_hoisted_2$c,[e.image?(openBlock(),createElementBlock("img",{key:0,src:e.image},null,8,_hoisted_3$c)):createCommentVNode("",!0)])]),createBaseVNode("j-flex",_hoisted_4$b,[createBaseVNode("div",_hoisted_5$8,[createBaseVNode("j-text",_hoisted_6$5,toDisplayString(e.title),1),createBaseVNode("j-text",_hoisted_7$5,toDisplayString(e.description),1)])]),e.sameAgent?(openBlock(),createElementBlock("j-popover",{key:0,placement:"auto",event:"click",open:e.showContextMenu,onToggle:t[3]||(t[3]=s=>e.showContextMenu=s.target.open)},[createBaseVNode("j-button",{class:"menu-button",slot:"trigger",onClick:t[0]||(t[0]=withModifiers(()=>e.showContextMenu=!e.showContextMenu,["stop"])),variant:"ghost",squared:"",size:"sm"},_hoisted_10$4),createBaseVNode("j-menu",_hoisted_11$4,[createBaseVNode("j-menu-item",{onClick:t[1]||(t[1]=withModifiers(()=>e.$emit("edit"),["stop"]))},"Edit"),createBaseVNode("j-menu-item",{onClick:t[2]||(t[2]=withModifiers(()=>e.$emit("delete"),["stop"]))},"Delete")])],40,_hoisted_8$5)):createCommentVNode("",!0)])}var ProfileCard=_export_sfc(_sfc_main$d,[["render",_sfc_render$d],["__scopeId","data-v-78aac3ed"]]),SimpleImageAdd_vue_vue_type_style_index_0_scoped_true_lang="";const _sfc_main$c=defineComponent({props:["area","isEditing"],emits:["cancel","submit","changeStep"],setup(){const e=ref([]),t=ref(""),n=ref(!1),{value:r,error:o,errorMessage:a,isValid:s,validate:u}=useValidation({initialValue:"",rules:[{check:l=>!l,message:"Title is required"},{check:l=>l.length<3,message:"Should be 3 or more characters"}]});return{title:r,titleError:o,titleErrorMessage:a,titleIsValid:s,validateTitle:u,description:t,imgs:e,isAddLink:n}},watch:{area:{handler:function(e){var t,n,r;this.title=(t=e==null?void 0:e.has_name)!=null?t:"",this.description=(n=e==null?void 0:e.has_description)!=null?n:"",this.imgs=(r=e==null?void 0:e.has_images)!=null?r:[]},immediate:!0,deep:!0}},computed:{canCreateLink(){return this.titleIsValid}},methods:{onFileClick(){var e;(e=document.getElementById("simpleAreaImgInput"))==null||e.click()},selectFile(e){const t=e.target.files||e.dataTransfer.files;if(!!t.length){var n=new FileReader;n.onload=r=>{var a;const o=(a=r.target)==null?void 0:a.result;this.imgs.push(o)},n.readAsDataURL(t[0])}},async createLink(){var me,xe,Ne,He,Ye;const e=await hb$1();this.isAddLink=!0,useDataStore();const t=useUserStore(),n=useAppStore(),r=t.getAgentProfileProxyPerspectiveId,o=(me=t.getUser)==null?void 0:me.agent.did,a=await getAgentLinks(o,r),s={};a.forEach(Je=>{const vn=Je.data.predicate.split("://")[1];s[Je.data.source]||(s[Je.data.source]={[vn]:vn==="has_post"?Je.data.target:Je.data.predicate.split("://")[1]}),s[Je.data.source][vn]=Je.data.predicate.split("://")[1]}),console.log("preLinks",a);const u=await nanoid();let l=(Ne=(xe=this.area)==null?void 0:xe.id)!=null?Ne:`area://${u}`;if((He=this.area)!=null&&He.id||await e.perspective.addLink(r,new lib.exports.Link({source:FLUX_PROFILE,target:l,predicate:HAS_AREA})),(Ye=this.area)!=null&&Ye.id){const Je=a.filter(vn=>{var La;return vn.data.source===((La=this.area)==null?void 0:La.id)});for(const vn of Je){const La=removeTypeName(vn);await e.perspective.removeLink(r,La)}}await e.perspective.addLink(r,new lib.exports.Link({source:l,target:AREA_SIMPLE_AREA,predicate:AREA_TYPE})),await e.perspective.addLink(r,new lib.exports.Link({source:l,target:`text://${this.title}`,predicate:AREA_HAS_NAME})),await e.perspective.addLink(r,new lib.exports.Link({source:l,target:`text://${this.description}`,predicate:AREA_HAS_DESCRIPTION}));for(let Je=0;Je<this.imgs.length;Je++){const vn=this.imgs[Je],La=await e.expression.create(vn,NOTE_IPFS_EXPRESSION_OFFICIAL);await e.perspective.addLink(r,new lib.exports.Link({source:l,target:La,predicate:AREA_HAS_IMAGES}))}const c=await getAgentLinks(o,r),m=[];for(const Je in c){const vn=JSON.parse(JSON.stringify(c[Je]));vn.__typename=void 0,vn.data.__typename=void 0,vn.proof.__typename=void 0,m.push(vn)}await e.agent.updatePublicPerspective({links:m}),n.showSuccessToast({message:"Link added to agent perspective"}),this.title="",this.description="",this.isAddLink=!1,this.imgs=[],this.$emit("submit")}}}),_withScopeId$9=e=>(pushScopeId("data-v-5579c646"),e=e(),popScopeId(),e),_hoisted_1$c={direction:"column",gap:"400",class:"steps"},_hoisted_2$b=_withScopeId$9(()=>createBaseVNode("j-text",{variant:"heading"},"Gallery",-1)),_hoisted_3$b=["value","error","errorText"],_hoisted_4$a=["value"],_hoisted_5$7=_withScopeId$9(()=>createBaseVNode("j-text",null,"Images",-1)),_hoisted_6$4={class:"grid"},_hoisted_7$4=["onClick"],_hoisted_8$4=_withScopeId$9(()=>createBaseVNode("j-icon",{name:"x-circle"},null,-1)),_hoisted_9$3=[_hoisted_8$4],_hoisted_10$3=_withScopeId$9(()=>createBaseVNode("j-icon",{name:"plus",size:"lg"},null,-1)),_hoisted_11$3=_withScopeId$9(()=>createBaseVNode("j-text",null,"Add Link",-1)),_hoisted_12$1={gap:"400"},_hoisted_13$1={key:0,slot:"start",name:"arrow-left-short"},_hoisted_14$1=["disabled","loading"],_hoisted_15$1=_withScopeId$9(()=>createBaseVNode("j-icon",{slot:"end",name:"add"},null,-1));function _sfc_render$c(e,t,n,r,o,a){return openBlock(),createElementBlock("j-flex",_hoisted_1$c,[_hoisted_2$b,createBaseVNode("j-input",{label:"Title",size:"xl",value:e.title,onInput:t[0]||(t[0]=s=>e.title=s.target.value),error:e.titleError,errorText:e.titleErrorMessage,onBlur:t[1]||(t[1]=s=>e.validateTitle)},null,40,_hoisted_3$b),createBaseVNode("j-input",{label:"Description",size:"xl",value:e.description,onInput:t[2]||(t[2]=s=>e.description=s.target.value)},null,40,_hoisted_4$a),_hoisted_5$7,createBaseVNode("div",_hoisted_6$4,[(openBlock(!0),createElementBlock(Fragment$1,null,renderList(e.imgs,(s,u)=>(openBlock(),createElementBlock("div",{key:`${s}-${u}`,class:"img_container"},[createBaseVNode("div",{class:"img_bg",style:normalizeStyle({backgroundImage:`url(${s})`})},null,4),createBaseVNode("div",{class:"close",onClick:()=>e.imgs.splice(u,1)},_hoisted_9$3,8,_hoisted_7$4)]))),128)),createBaseVNode("div",{class:"add",onClick:t[4]||(t[4]=(...s)=>e.onFileClick&&e.onFileClick(...s))},[_hoisted_10$3,_hoisted_11$3,createBaseVNode("input",{id:"simpleAreaImgInput",style:{display:"none"},type:"file",onChange:t[3]||(t[3]=withModifiers((...s)=>e.selectFile&&e.selectFile(...s),["prevent"]))},null,32)])]),createBaseVNode("j-flex",_hoisted_12$1,[createBaseVNode("j-button",{full:"",style:{width:"100%"},size:"lg",onClick:t[5]||(t[5]=s=>e.$emit("cancel"))},[e.isEditing?createCommentVNode("",!0):(openBlock(),createElementBlock("j-icon",_hoisted_13$1)),createTextVNode(" "+toDisplayString(e.isEditing?"Cancel":"Back"),1)]),createBaseVNode("j-button",{style:{width:"100%"},full:"",disabled:e.isAddLink||!e.canCreateLink,loading:e.isAddLink,size:"lg",variant:"primary",onClick:t[6]||(t[6]=(...s)=>e.createLink&&e.createLink(...s))},[_hoisted_15$1,createTextVNode(" "+toDisplayString(e.isEditing?"Save":"Add link"),1)],8,_hoisted_14$1)])])}var SimpleImageAdd=_export_sfc(_sfc_main$c,[["render",_sfc_render$c],["__scopeId","data-v-5579c646"]]),CommunityAdd_vue_vue_type_style_index_0_scoped_true_lang="";const _sfc_main$b=defineComponent({props:["area","isEditing"],emits:["cancel","submit"],components:{AvatarUpload},setup(){const e=ref(!1),t=ref(""),n=ref(""),{value:r,error:o,errorMessage:a,isValid:s,validate:u}=useValidation({initialValue:"",rules:[{check:Ne=>!Ne,message:"Title is required"},{check:Ne=>Ne.length<3,message:"Should be 3 or more characters"}]}),{value:l,error:c,errorMessage:m,isValid:me,validate:xe}=useValidation({initialValue:"",rules:[{check:Ne=>!Ne,message:"link is required"},{check:Ne=>Ne.length<3,message:"Should be 3 or more characters"},{check:Ne=>!Ne.startsWith("neighbourhood://"),message:"Please add a valid neighbourhood link"}]});return{title:r,titleError:o,titleErrorMessage:a,titleIsValid:s,validateTitle:u,description:n,link:l,linkError:c,linkErrorMessage:m,linkIsValid:me,validateLink:xe,isAddLink:e,newProfileImage:t}},computed:{canCreateLink(){return this.titleIsValid},canAddLink(){return this.linkIsValid}},watch:{area:{handler:function(e){var t,n,r,o;this.title=(t=e==null?void 0:e.has_name)!=null?t:"",this.description=(n=e==null?void 0:e.has_description)!=null?n:"",this.link=(r=e==null?void 0:e.has_post)!=null?r:"",this.newProfileImage=(o=e==null?void 0:e.has_image)!=null?o:""},immediate:!0,deep:!0}},methods:{async createLink(){var t,n,r,o,a;const e=await hb$1();if(this.canCreateLink&&!this.isAddLink){this.isAddLink=!0;const s=useDataStore(),u=useUserStore(),l=useAppStore(),c=u.getAgentProfileProxyPerspectiveId,m=(t=u.getUser)==null?void 0:t.agent.did,me=await getAgentLinks(m,c),xe={};me.forEach(sr=>{const Zr=sr.data.predicate.split("://")[1];xe[sr.data.source]||(xe[sr.data.source]={[Zr]:Zr==="has_post"?sr.data.target:sr.data.predicate.split("://")[1]}),xe[sr.data.source][Zr]=sr.data.predicate.split("://")[1]}),console.log("preLinks",me);const Ne=await nanoid();let He=(r=(n=this.area)==null?void 0:n.id)!=null?r:`area://${Ne}`;if((o=this.area)!=null&&o.id||await e.perspective.addLink(c,new lib.exports.Link({source:FLUX_PROFILE,target:He,predicate:HAS_AREA})),(a=this.area)!=null&&a.id){const sr=me.filter(Zr=>{var zs;return Zr.data.source===((zs=this.area)==null?void 0:zs.id)});for(const Zr of sr){const zs=removeTypeName(Zr);await e.perspective.removeLink(c,zs)}}await e.perspective.addLink(c,new lib.exports.Link({source:He,target:this.link,predicate:HAS_POST})),await e.perspective.addLink(c,new lib.exports.Link({source:He,target:AREA_COMMUNITY,predicate:AREA_TYPE})),await e.perspective.addLink(c,new lib.exports.Link({source:He,target:`text://${this.title}`,predicate:AREA_HAS_NAME})),await e.perspective.addLink(c,new lib.exports.Link({source:He,target:`text://${this.description}`,predicate:AREA_HAS_DESCRIPTION}));const Ye=s.getCommunities.find(sr=>sr.neighbourhood.neighbourhoodUrl===this.link);console.log(Ye);const Je=this.newProfileImage||(Ye==null?void 0:Ye.neighbourhood.image);if(Je){const sr=await e.expression.create(Je,NOTE_IPFS_EXPRESSION_OFFICIAL);await e.perspective.addLink(c,new lib.exports.Link({source:He,target:sr,predicate:AREA_HAS_IMAGE}))}const vn=await getAgentLinks(m,c),La=[];for(const sr in vn){const Zr=JSON.parse(JSON.stringify(vn[sr]));Zr.__typename=void 0,Zr.data.__typename=void 0,Zr.proof.__typename=void 0,La.push(Zr)}await e.agent.updatePublicPerspective({links:La}),this.link="",l.showSuccessToast({message:"Link added to agent perspective"}),this.title="",this.description="",this.link="",this.newProfileImage="",this.isAddLink=!1,this.$emit("submit")}},addLink(){this.validateLink();const t=useDataStore().getCommunities.find(n=>n.neighbourhood.neighbourhoodUrl===this.link);console.log(t),this.area||(this.title=t==null?void 0:t.neighbourhood.name,this.description=t==null?void 0:t.neighbourhood.description,this.newProfileImage=t==null?void 0:t.neighbourhood.image)}}}),_withScopeId$8=e=>(pushScopeId("data-v-19cdd829"),e=e(),popScopeId(),e),_hoisted_1$b={direction:"column",gap:"400",class:"steps"},_hoisted_2$a=_withScopeId$8(()=>createBaseVNode("j-text",{variant:"heading"},"Add a link to profile",-1)),_hoisted_3$a=["value","error","errorText","loading"],_hoisted_4$9={gap:"500",a:"center"},_hoisted_5$6={style:{width:"100%"},direction:"column",gap:"300"},_hoisted_6$3=["value","error","errorText"],_hoisted_7$3=["value"],_hoisted_8$3={gap:"400"},_hoisted_9$2={key:0,slot:"start",name:"arrow-left-short"},_hoisted_10$2=["disabled","loading"],_hoisted_11$2=_withScopeId$8(()=>createBaseVNode("j-icon",{slot:"end",name:"add"},null,-1));function _sfc_render$b(e,t,n,r,o,a){const s=resolveComponent("avatar-upload");return openBlock(),createElementBlock("j-flex",_hoisted_1$b,[_hoisted_2$a,createBaseVNode("j-input",{label:"Neighbourhood link",size:"xl",value:e.link,onInput:t[0]||(t[0]=u=>e.link=u.target.value),error:e.linkError,errorText:e.linkErrorMessage,onBlur:t[1]||(t[1]=(...u)=>e.addLink&&e.addLink(...u)),loading:e.isAddLink,variant:"primary"},null,40,_hoisted_3$a),createBaseVNode("j-flex",_hoisted_4$9,[createVNode(s,{size:"4rem",value:e.newProfileImage,onChange:t[2]||(t[2]=u=>e.newProfileImage=u),icon:"camera"},null,8,["value"]),createBaseVNode("j-flex",_hoisted_5$6,[createBaseVNode("j-input",{label:"Title",size:"xl",value:e.title,onInput:t[3]||(t[3]=u=>e.title=u.target.value),error:e.titleError,errorText:e.titleErrorMessage,onBlur:t[4]||(t[4]=u=>e.validateTitle)},null,40,_hoisted_6$3),createBaseVNode("j-input",{label:"Description",size:"xl",value:e.description,onInput:t[5]||(t[5]=u=>e.description=u.target.value),onKeydown:t[6]||(t[6]=withKeys((...u)=>e.createLink&&e.createLink(...u),["enter"]))},null,40,_hoisted_7$3)])]),createBaseVNode("j-flex",_hoisted_8$3,[createBaseVNode("j-button",{full:"",style:{width:"100%"},size:"lg",onClick:t[7]||(t[7]=u=>e.$emit("cancel"))},[e.isEditing?createCommentVNode("",!0):(openBlock(),createElementBlock("j-icon",_hoisted_9$2)),createTextVNode(" "+toDisplayString(e.isEditing?"Cancel":"Back"),1)]),createBaseVNode("j-button",{style:{width:"100%"},full:"",disabled:e.isAddLink||!e.canCreateLink,loading:e.isAddLink,size:"lg",variant:"primary",onClick:t[8]||(t[8]=(...u)=>e.createLink&&e.createLink(...u))},[_hoisted_11$2,createTextVNode(" "+toDisplayString(e.isEditing?"Save":"Add link"),1)],8,_hoisted_10$2)])])}var CommunityAdd=_export_sfc(_sfc_main$b,[["render",_sfc_render$b],["__scopeId","data-v-19cdd829"]]),WebLinkAdd_vue_vue_type_style_index_0_scoped_true_lang="";const _sfc_main$a=defineComponent({props:["step","area","isEditing"],emits:["cancel","submit"],components:{AvatarUpload},setup(){const e=ref(!1),t=ref(""),n=ref(""),{value:r,error:o,errorMessage:a,isValid:s,validate:u}=useValidation({initialValue:"",rules:[{check:Ne=>!Ne,message:"Title is required"},{check:Ne=>Ne.length<3,message:"Should be 3 or more characters"}]}),{value:l,error:c,errorMessage:m,isValid:me,validate:xe}=useValidation({initialValue:"",rules:[{check:Ne=>!Ne,message:"link is required"},{check:Ne=>Ne.length<3,message:"Should be 3 or more characters"},{check:Ne=>!/[(http(s)?)://(www.)?a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/.test(Ne),message:"Link is invalid"}]});return{title:r,titleError:o,titleErrorMessage:a,titleIsValid:s,validateTitle:u,description:n,link:l,linkError:c,linkErrorMessage:m,linkIsValid:me,validateLink:xe,isAddLink:e,newProfileImage:t}},computed:{canCreateLink(){return this.titleIsValid},canAddLink(){return this.linkIsValid}},watch:{area:{handler:function(e){var t,n,r,o;this.title=(t=e==null?void 0:e.has_name)!=null?t:"",this.description=(n=e==null?void 0:e.has_description)!=null?n:"",this.link=(r=e==null?void 0:e.has_post)!=null?r:"",this.newProfileImage=(o=e==null?void 0:e.has_image)!=null?o:""},immediate:!0,deep:!0}},methods:{async getMeta(){try{const e=await fetch("http://url-metadata.herokuapp.com/api/metadata?url="+this.link),{data:t}=await e.json();console.log({data:t}),this.title=t.title,this.description=t.description;const n=new FileReader;n.onloadend=()=>{const s=n.result;console.log({base64data:s}),s&&(this.newProfileImage=s.toString())};const{hostname:r}=new URL(this.link),o=await fetch("https://services.keeweb.info/favicon/"+r);console.log(o);const a=await o.blob();console.log(a),n.readAsDataURL(a)}catch(e){console.log(e)}},async createLink(){var e,t,n,r,o;if(this.canCreateLink&&!this.isAddLink){const a=await hb$1();this.isAddLink=!0;const s=useUserStore(),u=useAppStore(),l=s.getAgentProfileProxyPerspectiveId,c=(e=s.getUser)==null?void 0:e.agent.did,m=await getAgentLinks(c,l),me={};m.forEach(Je=>{const vn=Je.data.predicate.split("://")[1];me[Je.data.source]||(me[Je.data.source]={[vn]:vn==="has_post"?Je.data.target:Je.data.predicate.split("://")[1]}),me[Je.data.source][vn]=Je.data.predicate.split("://")[1]}),console.log("preLinks",m);const xe=await nanoid();let Ne=(n=(t=this.area)==null?void 0:t.id)!=null?n:`area://${xe}`;if((r=this.area)!=null&&r.id||await a.perspective.addLink(l,new lib.exports.Link({source:FLUX_PROFILE,target:Ne,predicate:HAS_AREA})),(o=this.area)!=null&&o.id){const Je=m.filter(vn=>{var La;return vn.data.source===((La=this.area)==null?void 0:La.id)});for(const vn of Je){const La=removeTypeName(vn);await a.perspective.removeLink(l,La)}}if(await a.perspective.addLink(l,new lib.exports.Link({source:Ne,target:this.link,predicate:HAS_POST})),await a.perspective.addLink(l,new lib.exports.Link({source:Ne,target:AREA_WEBLINK,predicate:AREA_TYPE})),await a.perspective.addLink(l,new lib.exports.Link({source:Ne,target:`text://${this.title}`,predicate:AREA_HAS_NAME})),await a.perspective.addLink(l,new lib.exports.Link({source:Ne,target:`text://${this.description}`,predicate:AREA_HAS_DESCRIPTION})),this.newProfileImage){const Je=await a.expression.create(this.newProfileImage,NOTE_IPFS_EXPRESSION_OFFICIAL);await a.perspective.addLink(l,new lib.exports.Link({source:Ne,target:Je,predicate:AREA_HAS_IMAGE}))}const He=await getAgentLinks(c,l),Ye=[];for(const Je in He){const vn=JSON.parse(JSON.stringify(He[Je]));vn.__typename=void 0,vn.data.__typename=void 0,vn.proof.__typename=void 0,Ye.push(vn)}await a.agent.updatePublicPerspective({links:Ye}),this.link="",u.showSuccessToast({message:"Link added to agent perspective"}),this.title="",this.description="",this.link="",this.newProfileImage="",this.isAddLink=!1,this.$emit("submit")}},addLink(){this.validateLink()}}}),_withScopeId$7=e=>(pushScopeId("data-v-f95cf24c"),e=e(),popScopeId(),e),_hoisted_1$a={direction:"column",gap:"400",class:"steps"},_hoisted_2$9=_withScopeId$7(()=>createBaseVNode("j-text",{variant:"heading"},"Add a link to profile",-1)),_hoisted_3$9=["value","error","errorText"],_hoisted_4$8={a:"center",gap:"500"},_hoisted_5$5={style:{width:"100%"},gap:"400",direction:"column"},_hoisted_6$2=["value","error","errorText"],_hoisted_7$2=["value"],_hoisted_8$2={gap:"400"},_hoisted_9$1={key:0,slot:"start",name:"arrow-left-short"},_hoisted_10$1=["disabled","loading"],_hoisted_11$1=_withScopeId$7(()=>createBaseVNode("j-icon",{slot:"end",name:"add"},null,-1));function _sfc_render$a(e,t,n,r,o,a){const s=resolveComponent("avatar-upload");return openBlock(),createElementBlock("j-flex",_hoisted_1$a,[_hoisted_2$9,createBaseVNode("j-input",{label:"Web link",size:"xl",value:e.link,onInput:t[0]||(t[0]=u=>e.link=u.target.value),error:e.linkError,errorText:e.linkErrorMessage,onBlur:t[1]||(t[1]=(...u)=>e.getMeta&&e.getMeta(...u))},null,40,_hoisted_3$9),createBaseVNode("j-flex",_hoisted_4$8,[createVNode(s,{size:"3rem",value:e.newProfileImage,onChange:t[2]||(t[2]=u=>e.newProfileImage=u),icon:"camera"},null,8,["value"]),createBaseVNode("j-flex",_hoisted_5$5,[createBaseVNode("j-input",{label:"Title",size:"xl",value:e.title,onInput:t[3]||(t[3]=u=>e.title=u.target.value),error:e.titleError,errorText:e.titleErrorMessage,onBlur:t[4]||(t[4]=u=>e.validateTitle)},null,40,_hoisted_6$2),createBaseVNode("j-input",{label:"Description",size:"xl",value:e.description,onInput:t[5]||(t[5]=u=>e.description=u.target.value),onKeydown:t[6]||(t[6]=withKeys((...u)=>e.createLink&&e.createLink(...u),["enter"]))},null,40,_hoisted_7$2)])]),createBaseVNode("j-flex",_hoisted_8$2,[createBaseVNode("j-button",{full:"",style:{width:"100%"},size:"lg",onClick:t[7]||(t[7]=u=>e.$emit("cancel"))},[e.isEditing?createCommentVNode("",!0):(openBlock(),createElementBlock("j-icon",_hoisted_9$1)),createTextVNode(" "+toDisplayString(e.isEditing?"Cancel":"Back"),1)]),createBaseVNode("j-button",{style:{width:"100%"},full:"",disabled:e.isAddLink||!e.canCreateLink,loading:e.isAddLink,size:"lg",variant:"primary",onClick:t[8]||(t[8]=(...u)=>e.createLink&&e.createLink(...u))},[_hoisted_11$1,createTextVNode(" "+toDisplayString(e.isEditing?"Save":"Add link"),1)],8,_hoisted_10$1)])])}var WebLinkAdd=_export_sfc(_sfc_main$a,[["render",_sfc_render$a],["__scopeId","data-v-f95cf24c"]]),ProfileAddLink_vue_vue_type_style_index_0_scoped_true_lang="";const _sfc_main$9=defineComponent({emits:["cancel","submit"],setup(){const e=ref(null),t=ref(1);return{linkType:e,step:t}},methods:{onSubmit(){this.step=1,this.$emit("submit")},onGoBack(){this.step=1},selectLinkType(e){this.linkType=e,this.step=2}},components:{SimpleImageAdd,CommunityAdd,WebLinkAdd}}),_withScopeId$6=e=>(pushScopeId("data-v-38e56e0e"),e=e(),popScopeId(),e),_hoisted_1$9={class:"container"},_hoisted_2$8={key:0,direction:"column",gap:"400",class:"steps"},_hoisted_3$8=_withScopeId$6(()=>createBaseVNode("j-text",{variant:"heading"},"Add a link to profile",-1)),_hoisted_4$7={key:1};function _sfc_render$9(e,t,n,r,o,a){const s=resolveComponent("simple-image-add"),u=resolveComponent("community-add"),l=resolveComponent("web-link-add");return openBlock(),createElementBlock("div",_hoisted_1$9,[e.step===1?(openBlock(),createElementBlock("j-flex",_hoisted_2$8,[_hoisted_3$8,createBaseVNode("j-button",{full:"",onClick:t[0]||(t[0]=()=>e.selectLinkType("community"))},"Add Community"),createBaseVNode("j-button",{full:"",onClick:t[1]||(t[1]=()=>e.selectLinkType("webLink"))},"Add a web link"),createBaseVNode("j-button",{full:"",onClick:t[2]||(t[2]=()=>e.selectLinkType("simpleArea"))},"Add Gallery")])):(openBlock(),createElementBlock("div",_hoisted_4$7,[e.linkType==="simpleArea"?(openBlock(),createBlock(s,{key:0,onCancel:e.onGoBack,onSubmit:e.onSubmit,onChangeStep:t[3]||(t[3]=c=>e.step=c)},null,8,["onCancel","onSubmit"])):createCommentVNode("",!0),e.linkType==="community"?(openBlock(),createBlock(u,{key:1,onCancel:e.onGoBack,onSubmit:e.onSubmit,onChangeStep:t[4]||(t[4]=c=>e.step=c)},null,8,["onCancel","onSubmit"])):createCommentVNode("",!0),e.linkType==="webLink"?(openBlock(),createBlock(l,{key:2,onCancel:e.onGoBack,onSubmit:e.onSubmit,onChangeStep:t[5]||(t[5]=c=>e.step=c)},null,8,["onCancel","onSubmit"])):createCommentVNode("",!0)]))])}var ProfileAddLink=_export_sfc(_sfc_main$9,[["render",_sfc_render$9],["__scopeId","data-v-38e56e0e"]]),ProfileEditLink_vue_vue_type_style_index_0_scoped_true_lang="";const _sfc_main$8=defineComponent({props:["area"],emits:["cancel","submit"],setup(){return{linkType:ref(null)}},watch:{area:{handler:function(e){e&&(this.linkType=e.area_type)},immediate:!0}},methods:{onSubmit(){this.$emit("submit")},onCancel(){this.$emit("cancel")},selectLinkType(e){this.linkType=e}},components:{SimpleImageAdd,CommunityAdd,WebLinkAdd}}),_hoisted_1$8={class:"container"};function _sfc_render$8(e,t,n,r,o,a){const s=resolveComponent("simple-image-add"),u=resolveComponent("community-add"),l=resolveComponent("web-link-add");return openBlock(),createElementBlock("div",_hoisted_1$8,[e.linkType==="simpleArea"?(openBlock(),createBlock(s,{key:0,isEditing:!0,onSubmit:e.onSubmit,onCancel:e.onCancel,area:e.area},null,8,["onSubmit","onCancel","area"])):createCommentVNode("",!0),e.linkType==="community"?(openBlock(),createBlock(u,{key:1,isEditing:!0,onSubmit:e.onSubmit,onCancel:e.onCancel,area:e.area},null,8,["onSubmit","onCancel","area"])):createCommentVNode("",!0),e.linkType==="webLink"?(openBlock(),createBlock(l,{key:2,isEditing:!0,onSubmit:e.onSubmit,onCancel:e.onCancel,area:e.area},null,8,["onSubmit","onCancel","area"])):createCommentVNode("",!0)])}var ProfileEditLink=_export_sfc(_sfc_main$8,[["render",_sfc_render$8],["__scopeId","data-v-59a57117"]]),ProfileJoinLink_vue_vue_type_style_index_0_scoped_true_lang="";const _sfc_main$7=defineComponent({props:["joiningLink"],emits:["cancel","submit"],setup(){return{dataStore:useDataStore(),isJoiningCommunity:ref(!1)}},methods:{joinCommunity(){this.isJoiningCommunity=!0,this.dataStore.joinCommunity({joiningLink:this.joiningLink}).then(()=>{this.$emit("submit")}).finally(()=>{this.isJoiningCommunity=!1})}}}),_withScopeId$5=e=>(pushScopeId("data-v-134517a1"),e=e(),popScopeId(),e),_hoisted_1$7={pt:"1000",pb:"800",px:"700"},_hoisted_2$7=_withScopeId$5(()=>createBaseVNode("j-text",{variant:"heading-sm"},"Join Community",-1)),_hoisted_3$7=_withScopeId$5(()=>createBaseVNode("j-text",{variant:"body"},"You are not part of this community, would you like to join this community?",-1)),_hoisted_4$6=["disabled","loading"];function _sfc_render$7(e,t,n,r,o,a){return openBlock(),createElementBlock("j-box",_hoisted_1$7,[_hoisted_2$7,_hoisted_3$7,createBaseVNode("j-button",{disabled:e.isJoiningCommunity||!e.joiningLink,loading:e.isJoiningCommunity,onClick:t[0]||(t[0]=(...s)=>e.joinCommunity&&e.joinCommunity(...s)),size:"lg",full:"",variant:"primary"}," Join Community ",8,_hoisted_4$6)])}var ProfileJoinLink=_export_sfc(_sfc_main$7,[["render",_sfc_render$7],["__scopeId","data-v-134517a1"]]),style="",ImgUpload_vue_vue_type_style_index_0_scoped_true_lang="";const _sfc_main$6=defineComponent({components:{Cropper:fe$1},emits:["change","hide"],props:{value:String,disabled:Boolean,hash:String,icon:{default:"person-fill",type:String}},data(){return{tempProfileImage:null}},methods:{onFileClick(){var e;(e=document.getElementById("bannerFileInput"))==null||e.click()},selectFile(e){const t=e.target.files||e.dataTransfer.files;if(!!t.length){var n=new FileReader;n.onload=r=>{var a;const o=(a=r.target)==null?void 0:a.result;this.tempProfileImage=o},n.readAsDataURL(t[0])}},clearImage(){this.tempProfileImage=null},selectImage(){const t=this.$refs.cropper.getResult().canvas.toDataURL();this.tempProfileImage=null,this.$emit("change",t)}},watch:{tempProfileImage(){this.$emit("hide",this.tempProfileImage!==null)}}}),_hoisted_1$6={direction:"column",gap:"400",a:"center"},_hoisted_2$6={class:"img-upload__avatar"},_hoisted_3$6=["src"],_hoisted_4$5={key:1,variant:"link",size:"sm"},_hoisted_5$4=["disabled"],_hoisted_6$1=["open"],_hoisted_7$1={class:"cropper"},_hoisted_8$1={pt:"300"};function _sfc_render$6(e,t,n,r,o,a){const s=resolveComponent("cropper");return openBlock(),createElementBlock(Fragment$1,null,[createBaseVNode("div",{class:"img-upload",id:"fileInputButton",onClick:t[1]||(t[1]=(...u)=>e.onFileClick&&e.onFileClick(...u))},[createBaseVNode("j-flex",_hoisted_1$6,[createBaseVNode("div",_hoisted_2$6,[e.value?(openBlock(),createElementBlock("img",{key:0,src:e.value},null,8,_hoisted_3$6)):createCommentVNode("",!0),e.value?createCommentVNode("",!0):(openBlock(),createElementBlock("j-button",_hoisted_4$5,"Upload image")),e.value?(openBlock(),createElementBlock("j-button",{key:2,class:"remove",onClick:t[0]||(t[0]=withModifiers(u=>e.$emit("change",null),["prevent"])),size:"sm"}," Remove image ")):createCommentVNode("",!0)])])]),createBaseVNode("input",{disabled:e.disabled,id:"bannerFileInput",style:{display:"none"},type:"file",onChange:t[2]||(t[2]=withModifiers((...u)=>e.selectFile&&e.selectFile(...u),["prevent"]))},null,40,_hoisted_5$4),(openBlock(),createBlock(Teleport,{to:"#popup-target"},[createBaseVNode("j-modal",{open:e.tempProfileImage!==null},[createBaseVNode("j-box",null,[createBaseVNode("div",_hoisted_7$1,[createVNode(s,{ref:"cropper",class:"cropper__element",backgroundClass:"cropper__background",src:e.tempProfileImage,"stencil-props":{aspectRatio:12/4}},null,8,["src"]),createBaseVNode("j-box",_hoisted_8$1,[createBaseVNode("j-button",{onClick:t[3]||(t[3]=(...u)=>e.clearImage&&e.clearImage(...u))},"Cancel"),createBaseVNode("j-button",{variant:"primary",onClick:t[4]||(t[4]=(...u)=>e.selectImage&&e.selectImage(...u))},"Ok")])])])],8,_hoisted_6$1)]))],64)}var ImgUpload=_export_sfc(_sfc_main$6,[["render",_sfc_render$6],["__scopeId","data-v-2dac856c"]]),EditProfile_vue_vue_type_style_index_0_scoped_true_lang="";const _sfc_main$5=defineComponent({emits:["cancel","submit"],props:["bg","preBio"],components:{AvatarUpload,ImgUpload},setup(){const e=useUserStore(),t=useAppStore();return{userStore:e,appStore:t}},data(){return{isUpdatingProfile:!1,profilePicture:"",username:"",bio:"",link:"",profileBg:"",profileBgChanged:!1,bioChanged:!1,hideContainer:!1}},computed:{userProfile(){return this.userStore.profile},userDid(){return this.userStore.agent.did}},watch:{"userProfile.profilePicture":{handler:async function(e){var t,n;(t=this.userStore.profile)!=null&&t.profilePicture?this.profilePicture=await getImage((n=this.userStore.profile)==null?void 0:n.profilePicture):this.profilePicture=""},immediate:!0},"userProfile.username":{handler:function(e){this.username=e},immediate:!0},preBio(){this.bio=this.preBio},bg(){this.profileBg=this.bg},bio(){this.bioChanged=this.bio!==this.preBio},profileBg(){this.profileBgChanged=this.profileBg!==this.bg}},methods:{async updateProfile(){this.isUpdatingProfile=!0,this.userStore.updateProfile({username:this.username,profilePicture:this.profilePicture,bio:this.bio,profileBg:this.profileBg}).then(()=>{this.$emit("submit")}).finally(()=>{this.isUpdatingProfile=!1})}}}),_withScopeId$4=e=>(pushScopeId("data-v-5ebc8ccc"),e=e(),popScopeId(),e),_hoisted_1$5={direction:"column",gap:"700"},_hoisted_2$5=_withScopeId$4(()=>createBaseVNode("j-text",{variant:"heading-sm"},"Edit profile",-1)),_hoisted_3$5=["value"],_hoisted_4$4=["value"];function _sfc_render$5(e,t,n,r,o,a){var l;const s=resolveComponent("img-upload"),u=resolveComponent("avatar-upload");return openBlock(),createElementBlock("j-box",{p:"800",style:normalizeStyle({display:e.hideContainer?"none":"block"})},[createBaseVNode("j-flex",_hoisted_1$5,[_hoisted_2$5,createVNode(s,{value:e.profileBg,onChange:t[0]||(t[0]=c=>e.profileBg=c),onHide:t[1]||(t[1]=c=>e.hideContainer=c)},null,8,["value"]),createVNode(u,{hash:e.userDid,value:e.profilePicture,onChange:t[2]||(t[2]=c=>e.profilePicture=c)},null,8,["hash","value"]),createBaseVNode("j-input",{size:"lg",label:"Username",onKeydown:t[3]||(t[3]=withKeys((...c)=>e.updateProfile&&e.updateProfile(...c),["enter"])),value:(l=e.userProfile)==null?void 0:l.username,onInput:t[4]||(t[4]=c=>e.username=c.target.value)},null,40,_hoisted_3$5),createBaseVNode("j-input",{size:"lg",label:"Bio",onKeydown:t[5]||(t[5]=withKeys((...c)=>e.updateProfile&&e.updateProfile(...c),["enter"])),value:e.bio,onInput:t[6]||(t[6]=c=>e.bio=c.target.value)},null,40,_hoisted_4$4),createBaseVNode("div",null,[createBaseVNode("j-button",{size:"lg",onClick:t[7]||(t[7]=c=>e.$emit("cancel"))}," Cancel "),createBaseVNode("j-button",{size:"lg",variant:"primary",onClick:t[8]||(t[8]=(...c)=>e.updateProfile&&e.updateProfile(...c))}," Save ")])])],4)}var EditProfile=_export_sfc(_sfc_main$5,[["render",_sfc_render$5],["__scopeId","data-v-5ebc8ccc"]]),ProfileView_vue_vue_type_style_index_0_scoped_true_lang="";const _sfc_main$4=defineComponent({name:"ProfileView",components:{ProfileCard,ProfileAddLink,ProfileEditLink,ProfileJoinLink,EditProfile},setup(){const e=useAppStore(),t=useDataStore(),n=useUserStore();return{appStore:e,dataStore:t,userStore:n}},data(){return{currentTab:"communities",profile:{},showAddlinkModal:!1,showEditlinkModal:!1,showJoinCommunityModal:!1,profileLinks:[],profilebg:"",joiningLink:"",sameAgent:!1,editArea:null}},beforeCreate(){this.appStore.changeCurrentTheme("global")},methods:{setAddLinkModal(e){this.showAddlinkModal=e},setEditLinkModal(e,t){this.showEditlinkModal=e,this.editArea=t},setShowJoinCommunityModal(e){this.showJoinCommunityModal=e},async getAgentAreas(){const e=await hb$1(),t=this.$route.params.did,n=await e.agent.me(),o=useUserStore().getAgentProfileProxyPerspectiveId,a=(await getAgentLinks(t||n.did,t===n.did||t===void 0?o:void 0)).filter(u=>!u.data.source.startsWith("flux://")&&!u.data.source.startsWith(t||n.did));console.log(a);const s={};for(const u of a){const l=u.data.predicate.split("://")[1];if(s[u.data.source]||(s[u.data.source]={id:u.data.source}),l==="has_post")s[u.data.source][l]=u.data.target.replace("text://","");else if(l==="has_images"||l==="has_image")try{const c=u.data.target,m=await e.expression.get(c);m&&(s[u.data.source][l]||(s[u.data.source][l]=[],s[u.data.source].has_image=m.data.slice(1,-1)),l==="has_images"?s[u.data.source][l].push(m.data.slice(1,-1)):s[u.data.source][l]=m.data.slice(1,-1))}catch(c){console.log("Error encountered while parsing images",c)}else s[u.data.source][l]=u.data.target.split("://")[1]}console.log(s),this.profileLinks=Object.values(s).filter(u=>u.id!==FLUX_PROFILE)},async getAgentProfile(){const e=await hb$1(),t=this.$route.params.did,n=await e.agent.me();this.profile=await getProfile(t||n.did),console.log("profile",this.profileLinks,this.profile)},onLinkClick(e){const t=useDataStore();if(e.area_type==="community"){const n=t.getCommunities.find(r=>r.neighbourhood.neighbourhoodUrl===e.has_post);console.log(n,this.showJoinCommunityModal,this.showAddlinkModal),n?this.$router.push({name:"community",params:{communityId:n==null?void 0:n.neighbourhood.perspective.uuid}}):(this.showJoinCommunityModal=!0,this.joiningLink=e.has_post)}else e.area_type==="webLink"?window.open(e.has_post,"_blank"):e.area_type==="simpleArea"&&this.$router.push({name:"profile-feed",params:{fid:e.id}})},async deleteLinks(e){const t=await hb$1(),n=useUserStore(),r=await t.agent.me(),o=n.getAgentProfileProxyPerspectiveId,a=await getAgentLinks(r.did,o),s=[];for(const u of a){const l=JSON.parse(JSON.stringify(u));l.__typename=void 0,l.data.__typename=void 0,l.proof.__typename=void 0,u.data.source===e||u.data.target===e?(console.log(u),await t.perspective.removeLink(o,l)):s.push(l)}this.profileLinks=this.profileLinks.filter(u=>u.id!==e),await t.agent.updatePublicPerspective({links:s})},...mapActions(useAppStore,["setShowEditProfile","setShowCreateCommunity"])},async created(){const e=await hb$1();this.getAgentProfile(),this.getAgentAreas();const t=this.$route.params.did,n=await e.agent.me();this.sameAgent=t===n.did,(t===void 0||t.length===0)&&(this.sameAgent=!0)},watch:{showAddlinkModal(){this.showAddlinkModal||(this.getAgentProfile(),this.getAgentAreas())},showEditlinkModal(){this.showEditlinkModal||(this.getAgentProfile(),this.getAgentAreas())},"modals.showEditProfile"(){this.modals.showEditProfile||(this.getAgentProfile(),this.getAgentAreas())}},computed:{communities(){return this.dataStore.getCommunities},modals(){return this.appStore.modals}}}),_withScopeId$3=e=>(pushScopeId("data-v-7dad678a"),e=e(),popScopeId(),e),_hoisted_1$4={class:"profile__container"},_hoisted_2$4={key:0,class:"profile"},_hoisted_3$4={class:"profile__layout"},_hoisted_4$3={class:"profile__info"},_hoisted_5$3={class:"profile__avatar"},_hoisted_6=["hash","src"],_hoisted_7=_withScopeId$3(()=>createBaseVNode("j-icon",{size:"sm",name:"pen"},null,-1)),_hoisted_8=[_hoisted_7],_hoisted_9={pt:"400",pb:"300"},_hoisted_10={key:0,nomargin:"",variant:"heading-sm"},_hoisted_11={nomargin:"",size:"500",weight:"500",color:"ui-500"},_hoisted_12={pt:"400"},_hoisted_13={key:0,nomargin:"",size:"500",color:"ui-800"},_hoisted_14={class:"profile__content"},_hoisted_15={py:"500"},_hoisted_16=["value"],_hoisted_17={value:"communities"},_hoisted_18={value:"weblinks"},_hoisted_19={key:0,class:"grid"},_hoisted_20=["did"],_hoisted_21={color:"black",nomargin:""},_hoisted_22=_withScopeId$3(()=>createBaseVNode("j-icon",{name:"plus",size:"xl"},null,-1)),_hoisted_23=_withScopeId$3(()=>createBaseVNode("j-text",null,"Add Community",-1)),_hoisted_24=[_hoisted_22,_hoisted_23],_hoisted_25={key:1,class:"grid"},_hoisted_26=_withScopeId$3(()=>createBaseVNode("j-icon",{name:"plus",size:"xl"},null,-1)),_hoisted_27=_withScopeId$3(()=>createBaseVNode("j-text",null,"Add Link",-1)),_hoisted_28=[_hoisted_26,_hoisted_27],_hoisted_29=_withScopeId$3(()=>createBaseVNode("j-icon",{name:"arrow-left",size:"lg"},null,-1)),_hoisted_30=[_hoisted_29],_hoisted_31=["open"],_hoisted_32=["open"],_hoisted_33=["open"],_hoisted_34=["open"];function _sfc_render$4(e,t,n,r,o,a){var Ne;const s=resolveComponent("router-link"),u=resolveComponent("ProfileCard"),l=resolveComponent("ProfileAddLink"),c=resolveComponent("ProfileEditLink"),m=resolveComponent("ProfileJoinLink"),me=resolveComponent("edit-profile"),xe=resolveComponent("router-view");return openBlock(),createElementBlock(Fragment$1,null,[createBaseVNode("div",_hoisted_1$4,[createBaseVNode("div",{style:normalizeStyle({backgroundImage:`url(${e.profilebg})`}),class:"profile__bg"},null,4),e.profile?(openBlock(),createElementBlock("div",_hoisted_2$4,[createBaseVNode("div",_hoisted_3$4,[createBaseVNode("div",_hoisted_4$3,[createBaseVNode("div",_hoisted_5$3,[createBaseVNode("j-avatar",{class:"avatar",hash:e.userStore.agent.did,src:e.profile.profilePicture},null,8,_hoisted_6),e.sameAgent?(openBlock(),createElementBlock("j-button",{key:0,variant:"ghost",onClick:t[0]||(t[0]=()=>e.setShowEditProfile(!0))},_hoisted_8)):createCommentVNode("",!0)]),createBaseVNode("j-box",_hoisted_9,[e.profile.familyName||e.profile.givenName?(openBlock(),createElementBlock("j-text",_hoisted_10,toDisplayString(`${e.profile.givenName} ${e.profile.familyName}`),1)):createCommentVNode("",!0),createBaseVNode("j-text",_hoisted_11," @"+toDisplayString(e.profile.username),1)]),createBaseVNode("j-box",_hoisted_12,[e.profile.bio?(openBlock(),createElementBlock("j-text",_hoisted_13,toDisplayString(e.profile.bio||"No bio yet"),1)):createCommentVNode("",!0)])]),createBaseVNode("div",_hoisted_14,[createBaseVNode("j-box",_hoisted_15,[createBaseVNode("j-tabs",{onChange:t[1]||(t[1]=He=>e.currentTab=He.target.value),value:e.currentTab},[createBaseVNode("j-tab-item",_hoisted_17,"Communities ("+toDisplayString(e.communities.length)+")",1),createBaseVNode("j-tab-item",_hoisted_18,"Weblinks ("+toDisplayString(e.profileLinks.length)+")",1)],40,_hoisted_16)]),e.currentTab==="communities"?(openBlock(),createElementBlock("div",_hoisted_19,[(openBlock(!0),createElementBlock(Fragment$1,null,renderList(e.communities,(He,Ye)=>(openBlock(),createBlock(s,{class:"community-item",to:{name:"community",params:{communityId:He.state.perspectiveUuid}},key:Ye},{default:withCtx(()=>[createBaseVNode("j-avatar",{size:"xl",did:He.state.perspectiveUuid},null,8,_hoisted_20),createBaseVNode("j-text",_hoisted_21,toDisplayString(He.neighbourhood.name),1)]),_:2},1032,["to"]))),128)),e.sameAgent?(openBlock(),createElementBlock("div",{key:0,class:"add",onClick:t[2]||(t[2]=()=>e.setShowCreateCommunity(!0))},_hoisted_24)):createCommentVNode("",!0)])):createCommentVNode("",!0),e.currentTab==="weblinks"?(openBlock(),createElementBlock("div",_hoisted_25,[(openBlock(!0),createElementBlock(Fragment$1,null,renderList(e.profileLinks,He=>(openBlock(),createBlock(u,{key:He.id,title:He.has_name,description:He.has_description,image:He.has_image,sameAgent:e.sameAgent,onClick:()=>e.onLinkClick(He),onDelete:()=>e.deleteLinks(He.id),onEdit:()=>e.setEditLinkModal(!0,He)},null,8,["title","description","image","sameAgent","onClick","onDelete","onEdit"]))),128)),e.sameAgent?(openBlock(),createElementBlock("div",{key:0,class:"add",onClick:t[3]||(t[3]=()=>e.showAddlinkModal=!0)},_hoisted_28)):createCommentVNode("",!0)])):createCommentVNode("",!0)])])])):createCommentVNode("",!0),e.$route.name!=="home"?(openBlock(),createElementBlock("div",{key:1,class:"back",onClick:t[4]||(t[4]=()=>e.$router.back())},_hoisted_30)):createCommentVNode("",!0)]),e.showAddlinkModal?(openBlock(),createElementBlock("j-modal",{key:0,size:"lg",open:e.showAddlinkModal,onToggle:t[7]||(t[7]=He=>e.setAddLinkModal(He.target.open))},[createVNode(l,{onSubmit:t[5]||(t[5]=()=>e.setAddLinkModal(!1)),onCancel:t[6]||(t[6]=()=>e.setAddLinkModal(!1))})],40,_hoisted_31)):createCommentVNode("",!0),e.showEditlinkModal?(openBlock(),createElementBlock("j-modal",{key:1,size:"lg",open:e.showEditlinkModal,onToggle:t[10]||(t[10]=He=>e.setEditLinkModal(He.target.open,e.editArea))},[createVNode(c,{onSubmit:t[8]||(t[8]=()=>e.setEditLinkModal(!1,e.editArea)),onCancel:t[9]||(t[9]=()=>e.setEditLinkModal(!1,e.editArea)),area:e.editArea},null,8,["area"])],40,_hoisted_32)):createCommentVNode("",!0),e.showJoinCommunityModal?(openBlock(),createElementBlock("j-modal",{key:2,size:"lg",open:e.showJoinCommunityModal,onToggle:t[13]||(t[13]=He=>e.setShowJoinCommunityModal(He.target.open))},[createVNode(m,{onSubmit:t[11]||(t[11]=()=>e.setShowJoinCommunityModal(!1)),onCancel:t[12]||(t[12]=()=>e.setShowJoinCommunityModal(!1)),joiningLink:e.joiningLink},null,8,["joiningLink"])],40,_hoisted_33)):createCommentVNode("",!0),e.modals.showEditProfile?(openBlock(),createElementBlock("j-modal",{key:3,open:e.modals.showEditProfile,onToggle:t[16]||(t[16]=He=>e.setShowEditProfile(He.target.open))},[createVNode(me,{onSubmit:t[14]||(t[14]=()=>e.setShowEditProfile(!1)),onCancel:t[15]||(t[15]=()=>e.setShowEditProfile(!1)),bg:e.profilebg,preBio:((Ne=e.profile)==null?void 0:Ne.bio)||""},null,8,["bg","preBio"])],40,_hoisted_34)):createCommentVNode("",!0),createVNode(xe)],64)}var ProfileView=_export_sfc(_sfc_main$4,[["render",_sfc_render$4],["__scopeId","data-v-7dad678a"]]),ConnectView_vue_vue_type_style_index_0_scoped_true_lang="";const _sfc_main$3=defineComponent({name:"ChannelView",components:{}}),_withScopeId$2=e=>(pushScopeId("data-v-63b228e8"),e=e(),popScopeId(),e),_hoisted_1$3={class:"container"},_hoisted_2$3=_withScopeId$2(()=>createBaseVNode("j-text",{variant:"heading-lg"}," Trying to connect to ad4m",-1)),_hoisted_3$3=_withScopeId$2(()=>createBaseVNode("j-text",{variant:"body"}," Are you sure ad4m is downloaded and running?",-1)),_hoisted_4$2=_withScopeId$2(()=>createBaseVNode("j-text",{variant:"body"},[createTextVNode(" Download the latest version "),createBaseVNode("a",{target:"_blank",href:"https://github.com/perspect3vism/ad4min/releases/latest"},"here"),createTextVNode(". We will automatically detect when it is running, and you can use a completely decentralized version of Flux, if it doesn't connect automatically refresh the page. ")],-1)),_hoisted_5$2=[_hoisted_2$3,_hoisted_3$3,_hoisted_4$2];function _sfc_render$3(e,t,n,r,o,a){return openBlock(),createElementBlock("div",_hoisted_1$3,_hoisted_5$2)}var ConnectView=_export_sfc(_sfc_main$3,[["render",_sfc_render$3],["__scopeId","data-v-63b228e8"]]),UnlockAgent_vue_vue_type_style_index_0_scoped_true_lang="";const _sfc_main$2=defineComponent({name:"UnlockAgent",components:{}}),_withScopeId$1=e=>(pushScopeId("data-v-3c426077"),e=e(),popScopeId(),e),_hoisted_1$2={class:"container"},_hoisted_2$2=_withScopeId$1(()=>createBaseVNode("j-text",{variant:"heading-lg"},"You agent is locked",-1)),_hoisted_3$2=[_hoisted_2$2];function _sfc_render$2(e,t,n,r,o,a){return openBlock(),createElementBlock("div",_hoisted_1$2,_hoisted_3$2)}var UnlockAgent=_export_sfc(_sfc_main$2,[["render",_sfc_render$2],["__scopeId","data-v-3c426077"]]),expandableImg_vue_vue_type_style_index_0_scoped_true_lang="";const _sfc_main$1=defineComponent({ininheritAttrs:!1,setup(){const e=ref(),t=ref();return{clonedEl:e,closeButtonRef:t}},data(){return{expanded:!1}},methods:{closeViewer(){console.log("clicked"),this.expanded=!1}},watch:{expanded(e){this.$nextTick(()=>{e?(this.clonedEl=this.$el.cloneNode(!0),this.closeButtonRef=this.clonedEl.querySelector(".close-button"),console.log(this.clonedEl),this.closeButtonRef.addEventListener("click",this.closeViewer),document.body.appendChild(this.clonedEl),document.body.style.overflow="hidden",setTimeout(()=>{this.clonedEl.style.opacity=1},0)):(this.clonedEl.style.opacity=0,setTimeout(()=>{this.clonedEl.remove(),this.clonedEl=null,this.closeButtonRef=null,document.body.style.overflow="auto"},250))})}}}),_withScopeId=e=>(pushScopeId("data-v-4b46bd36"),e=e(),popScopeId(),e),_hoisted_1$1=_withScopeId(()=>createBaseVNode("j-icon",{name:"x",size:"xl"},null,-1)),_hoisted_2$1=[_hoisted_1$1],_hoisted_3$1={key:1,class:"expand-button"},_hoisted_4$1=_withScopeId(()=>createBaseVNode("j-icon",{name:"arrows-angle-expand"},null,-1)),_hoisted_5$1=[_hoisted_4$1];function _sfc_render$1(e,t,n,r,o,a){return openBlock(),createElementBlock("div",{class:normalizeClass(["expandable-image",{expanded:e.expanded}]),onClick:t[1]||(t[1]=s=>e.expanded=!0)},[e.expanded?(openBlock(),createElementBlock("div",{key:0,class:"close-button",onClick:t[0]||(t[0]=(...s)=>e.closeViewer&&e.closeViewer(...s))},_hoisted_2$1)):(openBlock(),createElementBlock("div",_hoisted_3$1,_hoisted_5$1))],2)}var ExpandableImage=_export_sfc(_sfc_main$1,[["render",_sfc_render$1],["__scopeId","data-v-4b46bd36"]]),ProfileFeed_vue_vue_type_style_index_0_scoped_true_lang="";const _sfc_main=defineComponent({name:"ProfileFeed",components:{ExpandableImage},setup(){const e=useAppStore();return{link:ref({}),appStore:e}},mounted(){console.log("this.$route.params.",this.$route.params,this.$props),this.getAgentAreas(this.$route.params.fid)},beforeCreate(){this.appStore.changeCurrentTheme("global")},methods:{async getAgentAreas(e){const t=await hb$1(),n=this.$route.params.did,r=await t.agent.me(),a=useUserStore().getAgentProfileProxyPerspectiveId,s=(await getAgentLinks(n||r.did,n===r.did||n===void 0?a:void 0)).filter(l=>!l.data.source.startsWith("flux://"));console.log("linking",s);const u={};for(const l of s){const c=l.data.predicate.split("://")[1];if(u[l.data.source]||(u[l.data.source]={id:l.data.source}),c==="has_post")u[l.data.source][c]=l.data.target.replace("text://","");else if(c==="has_images"||c==="has_image")try{const m=l.data.target;console.log("expUrl",m);const me=await t.expression.get(m);console.log("image",me),me&&(u[l.data.source][c]||(u[l.data.source][c]=[],u[l.data.source].has_image=me.data.slice(1,-1)),u[l.data.source][c].push(me.data.slice(1,-1)))}catch(m){console.log("Error encountered while parsing images",m)}else u[l.data.source][c]=l.data.target.split("://")[1]}this.link=u[e],console.log("preArea",u)}}}),_hoisted_1={a:"center",direction:"column",class:"outer_container"},_hoisted_2={a:"start",direction:"column",class:"inner_container"},_hoisted_3={variant:"heading"},_hoisted_4={variant:"subheading"},_hoisted_5={class:"grid"};function _sfc_render(e,t,n,r,o,a){const s=resolveComponent("expandable-image");return openBlock(),createElementBlock("div",_hoisted_1,[createBaseVNode("div",_hoisted_2,[createBaseVNode("j-text",_hoisted_3,toDisplayString(e.link.has_name),1),createBaseVNode("j-text",_hoisted_4,toDisplayString(e.link.has_description),1),createBaseVNode("div",_hoisted_5,[(openBlock(!0),createElementBlock(Fragment$1,null,renderList(e.link.has_images,(u,l)=>(openBlock(),createBlock(s,{class:"img",style:normalizeStyle({backgroundImage:`url(${u})`}),key:`img-${l}`},null,8,["style"]))),128))])])])}var ProfileFeed=_export_sfc(_sfc_main,[["render",_sfc_render],["__scopeId","data-v-06b25c1c"]]);const routes=[{path:"/connect",name:"connect",component:ConnectView},{path:"/unlock",name:"unlock",component:UnlockAgent},{path:"/signup",name:"signup",component:SignUp},{path:"/",name:"main",component:MainView,redirect:{name:"home"},children:[{path:"home",name:"home",component:ProfileView},{path:"feed/:fid",name:"profile-feed",component:ProfileFeed},{path:"communities/:communityId",name:"community",component:CommunityView,children:[{path:":channelId",name:"channel",component:ChannelView}]},{path:"profile/:did",name:"profile",component:ProfileView},{path:"settings",name:"settings",component:Settings}]}],router=createRouter({history:createWebHashHistory(),routes});function checkConnection(){return new Promise(async(e,t)=>{const n=setTimeout(()=>{e(!1)},1e3);await(await hb$1()).agent.status(),clearTimeout(n),e(!0)})}router.beforeEach(async(e,t,n)=>{try{if(await checkConnection()){const o=await hb$1(),{perspective:a}=await o.agent.me();!(a==null?void 0:a.links.find(u=>u.data.source.startsWith("flux://")))&&e.name!=="signup"?n("/signup"):n()}else n()}catch(r){console.log({e:r,to:e}),e.name!=="unlock"&&r.message==="Cannot extractByTags from a ciphered wallet. You must unlock first."?n("/unlock"):e.name!=="connect"&&r.message==="Couldn't find an open port"?n("/connect"):n()}});(()=>{var e=Object.defineProperty,t=Object.defineProperties,n=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,u=($a,Ws,O1)=>Ws in $a?e($a,Ws,{enumerable:!0,configurable:!0,writable:!0,value:O1}):$a[Ws]=O1,l=($a,Ws)=>{for(var O1 in Ws||(Ws={}))a.call(Ws,O1)&&u($a,O1,Ws[O1]);if(o)for(var O1 of o(Ws))s.call(Ws,O1)&&u($a,O1,Ws[O1]);return $a},c=($a,Ws)=>t($a,r(Ws)),m=($a,Ws,O1,W_)=>{for(var Lb=W_>1?void 0:W_?n(Ws,O1):Ws,Kb=$a.length-1,Gb;Kb>=0;Kb--)(Gb=$a[Kb])&&(Lb=(W_?Gb(Ws,O1,Lb):Gb(Lb))||Lb);return W_&&Lb&&e(Ws,O1,Lb),Lb},me=($a,Ws,O1)=>new Promise((W_,Lb)=>{var Kb=r2=>{try{p2(O1.next(r2))}catch(m2){Lb(m2)}},Gb=r2=>{try{p2(O1.throw(r2))}catch(m2){Lb(m2)}},p2=r2=>r2.done?W_(r2.value):Promise.resolve(r2.value).then(Kb,Gb);p2((O1=O1.apply($a,Ws)).next())}),xe=window.ShadowRoot&&(window.ShadyCSS===void 0||window.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,Ne=Symbol(),He=class{constructor($a,Ws){if(Ws!==Ne)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=$a}get styleSheet(){return xe&&this.t===void 0&&(this.t=new CSSStyleSheet,this.t.replaceSync(this.cssText)),this.t}toString(){return this.cssText}},Ye=new Map,Je=$a=>{let Ws=Ye.get($a);return Ws===void 0&&Ye.set($a,Ws=new He($a,Ne)),Ws},vn=$a=>Je(typeof $a=="string"?$a:$a+""),La=($a,...Ws)=>{let O1=$a.length===1?$a[0]:Ws.reduce((W_,Lb,Kb)=>W_+(Gb=>{if(Gb instanceof He)return Gb.cssText;if(typeof Gb=="number")return Gb;throw Error("Value passed to 'css' function must be a 'css' function result: "+Gb+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(Lb)+$a[Kb+1],$a[0]);return Je(O1)},sr=($a,Ws)=>{xe?$a.adoptedStyleSheets=Ws.map(O1=>O1 instanceof CSSStyleSheet?O1:O1.styleSheet):Ws.forEach(O1=>{let W_=document.createElement("style");W_.textContent=O1.cssText,$a.appendChild(W_)})},Zr=xe?$a=>$a:$a=>$a instanceof CSSStyleSheet?(Ws=>{let O1="";for(let W_ of Ws.cssRules)O1+=W_.cssText;return vn(O1)})($a):$a,zs,za,Hs,lc,Ty={toAttribute($a,Ws){switch(Ws){case Boolean:$a=$a?"":null;break;case Object:case Array:$a=$a==null?$a:JSON.stringify($a)}return $a},fromAttribute($a,Ws){let O1=$a;switch(Ws){case Boolean:O1=$a!==null;break;case Number:O1=$a===null?null:Number($a);break;case Object:case Array:try{O1=JSON.parse($a)}catch{O1=null}}return O1}},_y=($a,Ws)=>Ws!==$a&&(Ws==Ws||$a==$a),xy={attribute:!0,type:String,converter:Ty,reflect:!1,hasChanged:_y},Bb=class extends HTMLElement{constructor(){super(),this.\u03A0i=new Map,this.\u03A0o=void 0,this.\u03A0l=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this.\u03A0h=null,this.u()}static addInitializer($a){var Ws;(Ws=this.v)!==null&&Ws!==void 0||(this.v=[]),this.v.push($a)}static get observedAttributes(){this.finalize();let $a=[];return this.elementProperties.forEach((Ws,O1)=>{let W_=this.\u03A0p(O1,Ws);W_!==void 0&&(this.\u03A0m.set(W_,O1),$a.push(W_))}),$a}static createProperty($a,Ws=xy){if(Ws.state&&(Ws.attribute=!1),this.finalize(),this.elementProperties.set($a,Ws),!Ws.noAccessor&&!this.prototype.hasOwnProperty($a)){let O1=typeof $a=="symbol"?Symbol():"__"+$a,W_=this.getPropertyDescriptor($a,O1,Ws);W_!==void 0&&Object.defineProperty(this.prototype,$a,W_)}}static getPropertyDescriptor($a,Ws,O1){return{get(){return this[Ws]},set(W_){let Lb=this[$a];this[Ws]=W_,this.requestUpdate($a,Lb,O1)},configurable:!0,enumerable:!0}}static getPropertyOptions($a){return this.elementProperties.get($a)||xy}static finalize(){if(this.hasOwnProperty("finalized"))return!1;this.finalized=!0;let $a=Object.getPrototypeOf(this);if($a.finalize(),this.elementProperties=new Map($a.elementProperties),this.\u03A0m=new Map,this.hasOwnProperty("properties")){let Ws=this.properties,O1=[...Object.getOwnPropertyNames(Ws),...Object.getOwnPropertySymbols(Ws)];for(let W_ of O1)this.createProperty(W_,Ws[W_])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles($a){let Ws=[];if(Array.isArray($a)){let O1=new Set($a.flat(1/0).reverse());for(let W_ of O1)Ws.unshift(Zr(W_))}else $a!==void 0&&Ws.push(Zr($a));return Ws}static \u03A0p($a,Ws){let O1=Ws.attribute;return O1===!1?void 0:typeof O1=="string"?O1:typeof $a=="string"?$a.toLowerCase():void 0}u(){var $a;this.\u03A0g=new Promise(Ws=>this.enableUpdating=Ws),this.L=new Map,this.\u03A0_(),this.requestUpdate(),($a=this.constructor.v)===null||$a===void 0||$a.forEach(Ws=>Ws(this))}addController($a){var Ws,O1;((Ws=this.\u03A0U)!==null&&Ws!==void 0?Ws:this.\u03A0U=[]).push($a),this.renderRoot!==void 0&&this.isConnected&&((O1=$a.hostConnected)===null||O1===void 0||O1.call($a))}removeController($a){var Ws;(Ws=this.\u03A0U)===null||Ws===void 0||Ws.splice(this.\u03A0U.indexOf($a)>>>0,1)}\u03A0_(){this.constructor.elementProperties.forEach(($a,Ws)=>{this.hasOwnProperty(Ws)&&(this.\u03A0i.set(Ws,this[Ws]),delete this[Ws])})}createRenderRoot(){var $a;let Ws=($a=this.shadowRoot)!==null&&$a!==void 0?$a:this.attachShadow(this.constructor.shadowRootOptions);return sr(Ws,this.constructor.elementStyles),Ws}connectedCallback(){var $a;this.renderRoot===void 0&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),($a=this.\u03A0U)===null||$a===void 0||$a.forEach(Ws=>{var O1;return(O1=Ws.hostConnected)===null||O1===void 0?void 0:O1.call(Ws)}),this.\u03A0l&&(this.\u03A0l(),this.\u03A0o=this.\u03A0l=void 0)}enableUpdating($a){}disconnectedCallback(){var $a;($a=this.\u03A0U)===null||$a===void 0||$a.forEach(Ws=>{var O1;return(O1=Ws.hostDisconnected)===null||O1===void 0?void 0:O1.call(Ws)}),this.\u03A0o=new Promise(Ws=>this.\u03A0l=Ws)}attributeChangedCallback($a,Ws,O1){this.K($a,O1)}\u03A0j($a,Ws,O1=xy){var W_,Lb;let Kb=this.constructor.\u03A0p($a,O1);if(Kb!==void 0&&O1.reflect===!0){let Gb=((Lb=(W_=O1.converter)===null||W_===void 0?void 0:W_.toAttribute)!==null&&Lb!==void 0?Lb:Ty.toAttribute)(Ws,O1.type);this.\u03A0h=$a,Gb==null?this.removeAttribute(Kb):this.setAttribute(Kb,Gb),this.\u03A0h=null}}K($a,Ws){var O1,W_,Lb;let Kb=this.constructor,Gb=Kb.\u03A0m.get($a);if(Gb!==void 0&&this.\u03A0h!==Gb){let p2=Kb.getPropertyOptions(Gb),r2=p2.converter,m2=(Lb=(W_=(O1=r2)===null||O1===void 0?void 0:O1.fromAttribute)!==null&&W_!==void 0?W_:typeof r2=="function"?r2:null)!==null&&Lb!==void 0?Lb:Ty.fromAttribute;this.\u03A0h=Gb,this[Gb]=m2(Ws,p2.type),this.\u03A0h=null}}requestUpdate($a,Ws,O1){let W_=!0;$a!==void 0&&(((O1=O1||this.constructor.getPropertyOptions($a)).hasChanged||_y)(this[$a],Ws)?(this.L.has($a)||this.L.set($a,Ws),O1.reflect===!0&&this.\u03A0h!==$a&&(this.\u03A0k===void 0&&(this.\u03A0k=new Map),this.\u03A0k.set($a,O1))):W_=!1),!this.isUpdatePending&&W_&&(this.\u03A0g=this.\u03A0q())}\u03A0q(){return me(this,null,function*(){this.isUpdatePending=!0;try{for(yield this.\u03A0g;this.\u03A0o;)yield this.\u03A0o}catch(Ws){Promise.reject(Ws)}let $a=this.performUpdate();return $a!=null&&(yield $a),!this.isUpdatePending})}performUpdate(){var $a;if(!this.isUpdatePending)return;this.hasUpdated,this.\u03A0i&&(this.\u03A0i.forEach((W_,Lb)=>this[Lb]=W_),this.\u03A0i=void 0);let Ws=!1,O1=this.L;try{Ws=this.shouldUpdate(O1),Ws?(this.willUpdate(O1),($a=this.\u03A0U)===null||$a===void 0||$a.forEach(W_=>{var Lb;return(Lb=W_.hostUpdate)===null||Lb===void 0?void 0:Lb.call(W_)}),this.update(O1)):this.\u03A0$()}catch(W_){throw Ws=!1,this.\u03A0$(),W_}Ws&&this.E(O1)}willUpdate($a){}E($a){var Ws;(Ws=this.\u03A0U)===null||Ws===void 0||Ws.forEach(O1=>{var W_;return(W_=O1.hostUpdated)===null||W_===void 0?void 0:W_.call(O1)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated($a)),this.updated($a)}\u03A0$(){this.L=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this.\u03A0g}shouldUpdate($a){return!0}update($a){this.\u03A0k!==void 0&&(this.\u03A0k.forEach((Ws,O1)=>this.\u03A0j(O1,this[O1],Ws)),this.\u03A0k=void 0),this.\u03A0$()}updated($a){}firstUpdated($a){}};Bb.finalized=!0,Bb.elementProperties=new Map,Bb.elementStyles=[],Bb.shadowRootOptions={mode:"open"},(za=(zs=globalThis).reactiveElementPlatformSupport)===null||za===void 0||za.call(zs,{ReactiveElement:Bb}),((Hs=(lc=globalThis).reactiveElementVersions)!==null&&Hs!==void 0?Hs:lc.reactiveElementVersions=[]).push("1.0.0-rc.2");var Dy,Bg,yy,wy,Ay=globalThis.trustedTypes,$b=Ay?Ay.createPolicy("lit-html",{createHTML:$a=>$a}):void 0,e0=`lit$${(Math.random()+"").slice(9)}$`,Hb="?"+e0,Yb=`<${Hb}>`,Jb=document,l2=($a="")=>Jb.createComment($a),y2=$a=>$a===null||typeof $a!="object"&&typeof $a!="function",Rb=Array.isArray,i2=$a=>{var Ws;return Rb($a)||typeof((Ws=$a)===null||Ws===void 0?void 0:Ws[Symbol.iterator])=="function"},s2=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,E2=/-->/g,L2=/>/g,T2=/>|[ 	\n\r](?:([^\s"'>=/]+)([ 	\n\r]*=[ 	\n\r]*(?:[^ 	\n\r"'`<>=]|("|')|))|$)/g,A2=/'/g,k_=/"/g,Vb=/^(?:script|style|textarea)$/i,Qb=$a=>(Ws,...O1)=>({_$litType$:$a,strings:Ws,values:O1}),zb=Qb(1),t2=Symbol.for("lit-noChange"),Zb=Symbol.for("lit-nothing"),h2=new WeakMap,g2=($a,Ws,O1)=>{var W_,Lb;let Kb=(W_=O1==null?void 0:O1.renderBefore)!==null&&W_!==void 0?W_:Ws,Gb=Kb._$litPart$;if(Gb===void 0){let p2=(Lb=O1==null?void 0:O1.renderBefore)!==null&&Lb!==void 0?Lb:null;Kb._$litPart$=Gb=new N2(Ws.insertBefore(l2(),p2),p2,void 0,O1)}return Gb.I($a),Gb},Wb=Jb.createTreeWalker(Jb,129,null,!1),f2=($a,Ws)=>{let O1=$a.length-1,W_=[],Lb,Kb=Ws===2?"<svg>":"",Gb=s2;for(let r2=0;r2<O1;r2++){let m2=$a[r2],P2,R2,B2=-1,W2=0;for(;W2<m2.length&&(Gb.lastIndex=W2,R2=Gb.exec(m2),R2!==null);)W2=Gb.lastIndex,Gb===s2?R2[1]==="!--"?Gb=E2:R2[1]!==void 0?Gb=L2:R2[2]!==void 0?(Vb.test(R2[2])&&(Lb=RegExp("</"+R2[2],"g")),Gb=T2):R2[3]!==void 0&&(Gb=T2):Gb===T2?R2[0]===">"?(Gb=Lb!=null?Lb:s2,B2=-1):R2[1]===void 0?B2=-2:(B2=Gb.lastIndex-R2[2].length,P2=R2[1],Gb=R2[3]===void 0?T2:R2[3]==='"'?k_:A2):Gb===k_||Gb===A2?Gb=T2:Gb===E2||Gb===L2?Gb=s2:(Gb=T2,Lb=void 0);let q2=Gb===T2&&$a[r2+1].startsWith("/>")?" ":"";Kb+=Gb===s2?m2+Yb:B2>=0?(W_.push(P2),m2.slice(0,B2)+"$lit$"+m2.slice(B2)+e0+q2):m2+e0+(B2===-2?(W_.push(void 0),r2):q2)}let p2=Kb+($a[O1]||"<?>")+(Ws===2?"</svg>":"");return[$b!==void 0?$b.createHTML(p2):p2,W_]},O2=class{constructor({strings:$a,_$litType$:Ws},O1){let W_;this.parts=[];let Lb=0,Kb=0,Gb=$a.length-1,p2=this.parts,[r2,m2]=f2($a,Ws);if(this.el=O2.createElement(r2,O1),Wb.currentNode=this.el.content,Ws===2){let P2=this.el.content,R2=P2.firstChild;R2.remove(),P2.append(...R2.childNodes)}for(;(W_=Wb.nextNode())!==null&&p2.length<Gb;){if(W_.nodeType===1){if(W_.hasAttributes()){let P2=[];for(let R2 of W_.getAttributeNames())if(R2.endsWith("$lit$")||R2.startsWith(e0)){let B2=m2[Kb++];if(P2.push(R2),B2!==void 0){let W2=W_.getAttribute(B2.toLowerCase()+"$lit$").split(e0),q2=/([.?@])?(.*)/.exec(B2);p2.push({type:1,index:Lb,name:q2[2],strings:W2,ctor:q2[1]==="."?Q2:q2[1]==="?"?a2:q2[1]==="@"?S2:U2})}else p2.push({type:6,index:Lb})}for(let R2 of P2)W_.removeAttribute(R2)}if(Vb.test(W_.tagName)){let P2=W_.textContent.split(e0),R2=P2.length-1;if(R2>0){W_.textContent=Ay?Ay.emptyScript:"";for(let B2=0;B2<R2;B2++)W_.append(P2[B2],l2()),Wb.nextNode(),p2.push({type:2,index:++Lb});W_.append(P2[R2],l2())}}}else if(W_.nodeType===8)if(W_.data===Hb)p2.push({type:2,index:Lb});else{let P2=-1;for(;(P2=W_.data.indexOf(e0,P2+1))!==-1;)p2.push({type:7,index:Lb}),P2+=e0.length-1}Lb++}}static createElement($a,Ws){let O1=Jb.createElement("template");return O1.innerHTML=$a,O1}};function C2($a,Ws,O1=$a,W_){var Lb,Kb,Gb,p2;if(Ws===t2)return Ws;let r2=W_!==void 0?(Lb=O1.\u03A3i)===null||Lb===void 0?void 0:Lb[W_]:O1.\u03A3o,m2=y2(Ws)?void 0:Ws._$litDirective$;return(r2==null?void 0:r2.constructor)!==m2&&((Kb=r2==null?void 0:r2.O)===null||Kb===void 0||Kb.call(r2,!1),m2===void 0?r2=void 0:(r2=new m2($a),r2.T($a,O1,W_)),W_!==void 0?((Gb=(p2=O1).\u03A3i)!==null&&Gb!==void 0?Gb:p2.\u03A3i=[])[W_]=r2:O1.\u03A3o=r2),r2!==void 0&&(Ws=C2($a,r2.S($a,Ws.values),r2,W_)),Ws}var x2=class{constructor($a,Ws){this.l=[],this.N=void 0,this.D=$a,this.M=Ws}u($a){var Ws;let{el:{content:O1},parts:W_}=this.D,Lb=((Ws=$a==null?void 0:$a.creationScope)!==null&&Ws!==void 0?Ws:Jb).importNode(O1,!0);Wb.currentNode=Lb;let Kb=Wb.nextNode(),Gb=0,p2=0,r2=W_[0];for(;r2!==void 0;){if(Gb===r2.index){let m2;r2.type===2?m2=new N2(Kb,Kb.nextSibling,this,$a):r2.type===1?m2=new r2.ctor(Kb,r2.name,r2.strings,this,$a):r2.type===6&&(m2=new n2(Kb,this,$a)),this.l.push(m2),r2=W_[++p2]}Gb!==(r2==null?void 0:r2.index)&&(Kb=Wb.nextNode(),Gb++)}return Lb}v($a){let Ws=0;for(let O1 of this.l)O1!==void 0&&(O1.strings!==void 0?(O1.I($a,O1,Ws),Ws+=O1.strings.length-2):O1.I($a[Ws])),Ws++}},N2=class{constructor($a,Ws,O1,W_){this.type=2,this.N=void 0,this.A=$a,this.B=Ws,this.M=O1,this.options=W_}setConnected($a){var Ws;(Ws=this.P)===null||Ws===void 0||Ws.call(this,$a)}get parentNode(){return this.A.parentNode}get startNode(){return this.A}get endNode(){return this.B}I($a,Ws=this){$a=C2(this,$a,Ws),y2($a)?$a===Zb||$a==null||$a===""?(this.H!==Zb&&this.R(),this.H=Zb):$a!==this.H&&$a!==t2&&this.m($a):$a._$litType$!==void 0?this._($a):$a.nodeType!==void 0?this.$($a):i2($a)?this.g($a):this.m($a)}k($a,Ws=this.B){return this.A.parentNode.insertBefore($a,Ws)}$($a){this.H!==$a&&(this.R(),this.H=this.k($a))}m($a){let Ws=this.A.nextSibling;Ws!==null&&Ws.nodeType===3&&(this.B===null?Ws.nextSibling===null:Ws===this.B.previousSibling)?Ws.data=$a:this.$(Jb.createTextNode($a)),this.H=$a}_($a){var Ws;let{values:O1,_$litType$:W_}=$a,Lb=typeof W_=="number"?this.C($a):(W_.el===void 0&&(W_.el=O2.createElement(W_.h,this.options)),W_);if(((Ws=this.H)===null||Ws===void 0?void 0:Ws.D)===Lb)this.H.v(O1);else{let Kb=new x2(Lb,this),Gb=Kb.u(this.options);Kb.v(O1),this.$(Gb),this.H=Kb}}C($a){let Ws=h2.get($a.strings);return Ws===void 0&&h2.set($a.strings,Ws=new O2($a)),Ws}g($a){Rb(this.H)||(this.H=[],this.R());let Ws=this.H,O1,W_=0;for(let Lb of $a)W_===Ws.length?Ws.push(O1=new N2(this.k(l2()),this.k(l2()),this,this.options)):O1=Ws[W_],O1.I(Lb),W_++;W_<Ws.length&&(this.R(O1&&O1.B.nextSibling,W_),Ws.length=W_)}R($a=this.A.nextSibling,Ws){var O1;for((O1=this.P)===null||O1===void 0||O1.call(this,!1,!0,Ws);$a&&$a!==this.B;){let W_=$a.nextSibling;$a.remove(),$a=W_}}},U2=class{constructor($a,Ws,O1,W_,Lb){this.type=1,this.H=Zb,this.N=void 0,this.V=void 0,this.element=$a,this.name=Ws,this.M=W_,this.options=Lb,O1.length>2||O1[0]!==""||O1[1]!==""?(this.H=Array(O1.length-1).fill(Zb),this.strings=O1):this.H=Zb}get tagName(){return this.element.tagName}I($a,Ws=this,O1,W_){let Lb=this.strings,Kb=!1;if(Lb===void 0)$a=C2(this,$a,Ws,0),Kb=!y2($a)||$a!==this.H&&$a!==t2,Kb&&(this.H=$a);else{let Gb=$a,p2,r2;for($a=Lb[0],p2=0;p2<Lb.length-1;p2++)r2=C2(this,Gb[O1+p2],Ws,p2),r2===t2&&(r2=this.H[p2]),Kb||(Kb=!y2(r2)||r2!==this.H[p2]),r2===Zb?$a=Zb:$a!==Zb&&($a+=(r2!=null?r2:"")+Lb[p2+1]),this.H[p2]=r2}Kb&&!W_&&this.W($a)}W($a){$a===Zb?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,$a!=null?$a:"")}},Q2=class extends U2{constructor(){super(...arguments),this.type=3}W($a){this.element[this.name]=$a===Zb?void 0:$a}},a2=class extends U2{constructor(){super(...arguments),this.type=4}W($a){$a&&$a!==Zb?this.element.setAttribute(this.name,""):this.element.removeAttribute(this.name)}},S2=class extends U2{constructor(){super(...arguments),this.type=5}I($a,Ws=this){var O1;if(($a=(O1=C2(this,$a,Ws,0))!==null&&O1!==void 0?O1:Zb)===t2)return;let W_=this.H,Lb=$a===Zb&&W_!==Zb||$a.capture!==W_.capture||$a.once!==W_.once||$a.passive!==W_.passive,Kb=$a!==Zb&&(W_===Zb||Lb);Lb&&this.element.removeEventListener(this.name,this,W_),Kb&&this.element.addEventListener(this.name,this,$a),this.H=$a}handleEvent($a){var Ws,O1;typeof this.H=="function"?this.H.call((O1=(Ws=this.options)===null||Ws===void 0?void 0:Ws.host)!==null&&O1!==void 0?O1:this.element,$a):this.H.handleEvent($a)}},n2=class{constructor($a,Ws,O1){this.element=$a,this.type=6,this.N=void 0,this.V=void 0,this.M=Ws,this.options=O1}I($a){C2(this,$a)}};(Bg=(Dy=globalThis).litHtmlPlatformSupport)===null||Bg===void 0||Bg.call(Dy,O2,N2),((yy=(wy=globalThis).litHtmlVersions)!==null&&yy!==void 0?yy:wy.litHtmlVersions=[]).push("2.0.0-rc.3");var F2,M2,v2,o2,b2,D2;((F2=(D2=globalThis).litElementVersions)!==null&&F2!==void 0?F2:D2.litElementVersions=[]).push("3.0.0-rc.2");var j2=class extends Bb{constructor(){super(...arguments),this.renderOptions={host:this},this.\u03A6t=void 0}createRenderRoot(){var $a,Ws;let O1=super.createRenderRoot();return($a=(Ws=this.renderOptions).renderBefore)!==null&&$a!==void 0||(Ws.renderBefore=O1.firstChild),O1}update($a){let Ws=this.render();super.update($a),this.\u03A6t=g2(Ws,this.renderRoot,this.renderOptions)}connectedCallback(){var $a;super.connectedCallback(),($a=this.\u03A6t)===null||$a===void 0||$a.setConnected(!0)}disconnectedCallback(){var $a;super.disconnectedCallback(),($a=this.\u03A6t)===null||$a===void 0||$a.setConnected(!1)}render(){return t2}};j2.finalized=!0,j2._$litElement$=!0,(v2=(M2=globalThis).litElementHydrateSupport)===null||v2===void 0||v2.call(M2,{LitElement:j2}),(b2=(o2=globalThis).litElementPlatformSupport)===null||b2===void 0||b2.call(o2,{LitElement:j2});var z2=$a=>Ws=>typeof Ws=="function"?((O1,W_)=>(window.customElements.define(O1,W_),W_))($a,Ws):((O1,W_)=>{let{kind:Lb,elements:Kb}=W_;return{kind:Lb,elements:Kb,finisher(Gb){window.customElements.define(O1,Gb)}}})($a,Ws),fF=($a,Ws)=>Ws.kind==="method"&&Ws.descriptor&&!("value"in Ws.descriptor)?c(l({},Ws),{finisher(O1){O1.createProperty(Ws.key,$a)}}):{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:Ws.key,initializer(){typeof Ws.initializer=="function"&&(this[Ws.key]=Ws.initializer.call(this))},finisher(O1){O1.createProperty(Ws.key,$a)}};function d2($a){return(Ws,O1)=>O1!==void 0?((W_,Lb,Kb)=>{Lb.constructor.createProperty(Kb,W_)})($a,Ws,O1):fF($a,Ws)}function KC($a){return d2(c(l({},$a),{state:!0,attribute:!1}))}var mC=La`
  :host {
    box-sizing: border-box;
  }

  :host *,
  :host *:before,
  :host *:after {
    box-sizing: inherit;
  }

  :host *:focus {
    outline: 0;
  }

  [hidden] {
    display: none !important;
  }

  ::-webkit-scrollbar {
    width: var(--j-scrollbar-width);
  }

  ::-webkit-scrollbar-track {
    background-image: var(--j-scrollbar-background-image);
    background: var(--j-scrollbar-background);
  }

  ::-webkit-scrollbar-corner {
    background: var(--j-scrollbar-corner-background);
  }

  ::-webkit-scrollbar-thumb {
    box-shadow: var(--j-scrollbar-thumb-box-shadow);
    border-radius: var(--j-scrollbar-thumb-border-radius);
    background-color: var(--j-scrollbar-thumb-background);
  }
`,LO=La`
  :host {
    --j-button-opacity: 1;
    --j-button-text-decoration: none;
    --j-button-depth: none;
    --j-button-display: inline-flex;
    --j-button-width: initial;
    --j-button-padding: 0 var(--j-space-400);
    --j-button-bg: var(--j-color-white);
    --j-button-border: 1px solid var(--j-color-primary-600);
    --j-button-color: var(--j-color-primary-600);
    --j-button-height: var(--j-size-md);
    --j-button-border-radius: var(--j-border-radius);
    --j-button-font-size: var(--j-font-size-500);
  }
  [part="base"] {
    opacity: var(--j-button-opacity);
    text-decoration: var(--j-button-text-decoration);
    transition: box-shadow 0.2s ease;
    cursor: pointer;
    border: 0;
    gap: var(--j-space-400);
    align-items: center;
    justify-content: center;
    box-shadow: var(--j-button-depth);
    display: var(--j-button-display);
    width: var(--j-button-width);
    padding: var(--j-button-padding);
    height: var(--j-button-height);
    border-radius: var(--j-button-border-radius);
    background: var(--j-button-bg);
    color: var(--j-button-color);
    fill: var(--j-button-color);
    font-size: var(--j-button-font-size);
    font-family: inherit;
    font-weight: 600;
    border: var(--j-button-border);
    position: relative;
  }

  :host([disabled]) [part="base"] {
    --j-button-opacity: 0.5;
    cursor: default;
  }

  j-spinner {
    display: none;
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translateX(-50%) translateY(-50%);
  }

  :host([loading]) j-spinner {
    display: block;
    --j-spinner-color: var(--j-button-color);
  }

  :host([loading]) [part="base"] slot {
    visibility: hidden;
    opacity: 0;
  }

  :host([variant="primary"]) {
    --j-button-bg: var(--j-color-primary-600);
    --j-button-color: var(--j-color-white);
    --j-button-border: 1px solid transparent;
  }

  :host([variant="primary"]:hover) {
    --j-button-bg: var(--j-color-primary-700);
    cursor: pointer;
  }

  :host([variant="link"]) {
    --j-button-color: var(--j-color-primary-700);
    --j-button-bg: transparent;
    --j-button-border: 1px solid transparent;
  }

  :host([variant="link"]:hover) {
    --j-button-bg: transparent;
    --j-button-text-decoration: underline;
    --j-button-color: var(--j-color-primary-600);
  }

  :host([variant="subtle"]) {
    --j-button-bg: var(--j-color-ui-50);
    --j-button-color: var(--j-color-ui-800);
    --j-button-border: 1px solid transparent;
  }

  :host([variant="subtle"]:hover) {
    --j-button-color: var(--j-color-black);
    --j-button-bg: var(--j-color-ui-100);
  }

  :host([variant="ghost"]) {
    --j-button-opacity: 0.75;
    --j-button-bg: transparent;
    --j-button-color: currentColor;
    --j-button-border: 1px solid transparent;
  }

  :host([variant="ghost"]:hover) {
    --j-button-opacity: 1;
  }

  :host([size="xs"]) {
    --j-button-font-size: var(--j-font-size-400);
    --j-button-padding: 0 var(--j-space-200);
    --j-button-height: var(--j-size-xs);
  }

  :host([size="sm"]) {
    --j-button-font-size: var(--j-font-size-400);
    --j-button-padding: 0 var(--j-space-300);
    --j-button-height: var(--j-size-sm);
  }
  :host([size="lg"]) {
    --j-button-font-size: var(--j-font-size-500);
    --j-button-height: var(--j-size-lg);
    --j-button-padding: 0 var(--j-space-600);
  }
  :host([size="xl"]) {
    --j-button-font-size: var(--j-font-size-600);
    --j-button-height: var(--j-size-xl);
    --j-button-padding: 0 var(--j-space-600);
  }
  :host([full]) {
    --j-button-display: flex;
    --j-button-width: 100%;
  }
  :host([square]) {
    --j-button-padding: 0;
    --j-button-width: var(--j-button-height);
  }
  :host([circle]) {
    --j-button-border-radius: 50%;
  }
`,FC=class extends j2{constructor(){super(...arguments),this.variant=null,this.size=null,this.disabled=!1,this.loading=!1,this.square=!1,this.full=!1,this.circle=!1}handleClick($a){(this.disabled||this.loading)&&($a.preventDefault(),$a.stopPropagation())}render(){return zb`
      <button @click=${this.handleClick} part="base">
        <j-spinner size="sm"></j-spinner>
        <slot name="start"></slot>
        <slot></slot>
        <slot name="end"></slot>
      </button>
    `}};FC.styles=[mC,LO],m([d2({type:String,reflect:!0})],FC.prototype,"variant",2),m([d2({type:String,reflect:!0})],FC.prototype,"size",2),m([d2({type:Boolean,reflect:!0})],FC.prototype,"disabled",2),m([d2({type:Boolean,reflect:!0})],FC.prototype,"loading",2),m([d2({type:Boolean,reflect:!0})],FC.prototype,"square",2),m([d2({type:Boolean,reflect:!0})],FC.prototype,"full",2),m([d2({type:Boolean,reflect:!0})],FC.prototype,"circle",2),FC=m([z2("j-button")],FC);var xO=La`
  :host {
    --j-text-transform: normal;
    --j-text-color: var(--j-color-ui-800);
    --j-text-weight: initial;
    --j-text-font-size: var(--j-font-size-500);
    --j-text-margin-bottom: 0;
    --j-text-display: block;
    --j-text-family: inherit;
    --j-text-letter-spacing: normal;
    --j-text-heading-letter-spacing: 2px;
    --j-text-heading-family: inherit;
  }

  :host > *:first-child {
    margin: 0;
    letter-spacing: var(--j-text-letter-spacing);
    font-family: var(--j-text-family);
    text-transform: var(--j-text-transform);
    display: var(--j-text-display);
    color: var(--j-text-color);
    font-weight: var(--j-text-weight);
    font-size: var(--j-text-font-size);
    margin-bottom: var(--j-text-margin-bottom);
  }

  :host([inline]) {
    --j-text-display: inline-block;
  }

  :host([uppercase]) {
    --j-text-transform: uppercase;
  }

  :host([variant="heading"]) {
    --j-text-color: var(--j-color-black);
    --j-text-font-size: var(--j-font-size-800);
    --j-text-weight: 600;
    --j-text-margin-bottom: var(--j-space-400);
    --j-text-family: var(--j-text-heading-family);
    --j-text-letter-spacing: var(--j-text-heading-letter-spacing);
  }

  :host([variant="heading-sm"]) {
    --j-text-color: var(--j-color-black);
    --j-text-font-size: var(--j-font-size-700);
    --j-text-weight: 600;
    --j-text-margin-bottom: var(--j-space-300);
    --j-text-family: var(--j-text-heading-family);
    --j-text-letter-spacing: var(--j-text-heading-letter-spacing);
  }

  :host([variant="heading-lg"]) {
    --j-text-color: var(--j-color-black);
    --j-text-font-size: var(--j-font-size-900);
    --j-text-weight: 600;
    --j-text-margin-bottom: var(--j-space-600);
    --j-text-family: var(--j-text-heading-family);
    --j-text-letter-spacing: var(--j-text-heading-letter-spacing);
  }

  :host([variant="subheading"]) {
    --j-text-color: var(--j-color-black);
    --j-text-font-size: var(--j-font-size-700);
    --j-text-weight: 400;
    --j-text-margin-bottom: var(--j-space-600);
    --j-text-family: var(--j-text-heading-family);
    --j-text-letter-spacing: var(--j-text-heading-letter-spacing);
  }

  :host([variant="ingress"]) {
    --j-text-color: var(--j-color-ui-700);
    --j-text-font-size: var(--j-font-size-600);
    --j-text-weight: 400;
    --j-text-margin-bottom: var(--j-space-500);
  }

  :host([variant="body"]) {
    --j-text-color: var(--j-color-ui-600);
    --j-text-font-size: var(--j-font-size-500);
    --j-text-weight: 400;
    --j-text-margin-bottom: var(--j-space-400);
  }

  :host([variant="footnote"]) {
    --j-text-color: var(--j-color-ui-600);
    --j-text-font-size: var(--j-font-size-400);
    --j-text-weight: 400;
    --j-text-margin-bottom: var(--j-space-300);
  }

  :host([variant="label"]) {
    --j-text-display: block;
    --j-text-color: var(--j-color-ui-500);
    --j-text-font-size: var(--j-font-size-500);
    --j-text-weight: 500;
    --j-text-margin-bottom: var(--j-space-300);
  }

  :host([nomargin]) {
    --j-text-margin-bottom: 0;
  }
`,EC=class extends j2{constructor(){super(...arguments),this.size=null,this.variant="body",this.tag=null,this.nomargin=!1,this.inline=!1,this.uppercase=!1,this.color=null,this.weight=null}shouldUpdate($a){return $a.has("size")&&(this.size?this.style.setProperty("--j-text-font-size",`var(--j-font-size-${this.size})`):this.style.removeProperty("--j-text-font-size")),$a.has("weight")&&(this.weight?this.style.setProperty("--j-text-weight",this.weight):this.style.removeProperty("--j-text-weight")),$a.has("color")&&(this.color?this.style.setProperty("--j-text-color",`var(--j-color-${this.color})`):this.style.removeProperty("--j-text-color")),!0}render(){switch(this.tag){case"h1":return zb`<h1 part="base"><slot></slot></h1>`;case"h2":return zb`<h2 part="base"><slot></slot></h2>`;case"h3":return zb`<h3 part="base"><slot></slot></h3>`;case"h4":return zb`<h4 part="base"><slot></slot></h4>`;case"h5":return zb`<h5 part="base"><slot></slot></h5>`;case"h6":return zb`<h6 part="base"><slot></slot></h6>`;case"p":return zb`<p part="base"><slot></slot></p>`;case"small":return zb`<small part="base"><slot></slot></small>`;case"b":return zb`<b part="base"><slot></slot></b>`;case"i":return zb`<i part="base"><slot></slot></i>`;case"span":return zb`<span part="base"><slot></slot></span>`;case"label":return zb`<label part="base"><slot></slot></label>`;case"div":return zb`<div part="base"><slot></slot></div>`;default:return zb`<div part="base"><slot></slot></div>`}}};EC.styles=[mC,xO],m([d2({type:String,reflect:!0})],EC.prototype,"size",2),m([d2({type:String,reflect:!0})],EC.prototype,"variant",2),m([d2({type:String,reflect:!0})],EC.prototype,"tag",2),m([d2({type:Boolean,reflect:!0})],EC.prototype,"nomargin",2),m([d2({type:Boolean,reflect:!0})],EC.prototype,"inline",2),m([d2({type:Boolean,reflect:!0})],EC.prototype,"uppercase",2),m([d2({type:String,reflect:!0})],EC.prototype,"color",2),m([d2({type:String,reflect:!0})],EC.prototype,"weight",2),EC=m([z2("j-text")],EC);function gO($a,Ws){let O1=new CSSStyleSheet;return O1.replaceSync(`:host { ${$a}: ${Ws}; }`),O1}function YC($a,Ws,O1="0"){return Ws?`var(--${$a}-${Ws})`:O1}var wO=La`
  :host {
    --j-box-bg-color: none;
    --j-box-bg-color-hover: none;
    --j-box-border-color: none;
    --j-box-border-color-hover: none;
    --j-box-display: block;
    --j-box-padding: 0px;
    --j-box-margin: 0px;
  }
  :host([inline]) {
    --j-box-display: inline-block;
  }
  [part="base"] {
    background-color: var(--j-box-bg-color);
    padding: var(--j-box-padding);
    margin: var(--j-box-margin);
  }
`,eT=class extends j2{constructor(){super(...arguments),this.p=null,this.pl=null,this.pr=null,this.pt=null,this.pb=null,this.px=null,this.py=null,this.m=null,this.ml=null,this.mr=null,this.mt=null,this.mb=null,this.mx=null,this.my=null,this.bg=null}shouldUpdate(){let $a=new CSSStyleSheet;return $a.replaceSync(`
      :host {
        --j-box-bg-color: var(--j-color-${this.bg});
        --j-box-padding: 
          ${YC("j-space",this.pt||this.py||this.p)}
          ${YC("j-space",this.pr||this.px||this.p)}
          ${YC("j-space",this.pb||this.py||this.p)}
          ${YC("j-space",this.pl||this.px||this.p)};
        --j-box-margin: 
          ${YC("j-space",this.mt||this.my||this.m)}
          ${YC("j-space",this.mr||this.mx||this.m)}
          ${YC("j-space",this.mb||this.my||this.m)}
          ${YC("j-space",this.ml||this.mx||this.m)}  
      }
    `),sr(this.shadowRoot,[wO,mC,$a]),!0}render(){return zb`
      <div part="base">
        <slot></slot>
      </div>
    `}};eT.styles=[mC,wO],m([d2({type:String,reflect:!0})],eT.prototype,"p",2),m([d2({type:String,reflect:!0})],eT.prototype,"pl",2),m([d2({type:String,reflect:!0})],eT.prototype,"pr",2),m([d2({type:String,reflect:!0})],eT.prototype,"pt",2),m([d2({type:String,reflect:!0})],eT.prototype,"pb",2),m([d2({type:String,reflect:!0})],eT.prototype,"px",2),m([d2({type:String,reflect:!0})],eT.prototype,"py",2),m([d2({type:String,reflect:!0})],eT.prototype,"m",2),m([d2({type:String,reflect:!0})],eT.prototype,"ml",2),m([d2({type:String,reflect:!0})],eT.prototype,"mr",2),m([d2({type:String,reflect:!0})],eT.prototype,"mt",2),m([d2({type:String,reflect:!0})],eT.prototype,"mb",2),m([d2({type:String,reflect:!0})],eT.prototype,"mx",2),m([d2({type:String,reflect:!0})],eT.prototype,"my",2),m([d2({type:String,reflect:!0})],eT.prototype,"bg",2),eT=m([z2("j-box")],eT);var rT="top",uO="bottom",PC="right",iT="left",eO="auto",I2=[rT,uO,PC,iT],EO="start",H4="end",tO="clippingParents",E4="viewport",HO="popper",K4="reference",AO=I2.reduce(function($a,Ws){return $a.concat([Ws+"-"+EO,Ws+"-"+H4])},[]),D6=[].concat(I2,[eO]).reduce(function($a,Ws){return $a.concat([Ws,Ws+"-"+EO,Ws+"-"+H4])},[]),G6="beforeRead",RO="read",wT="afterRead",IC="beforeMain",H6="main",YO="afterMain",o6="beforeWrite",w2="write",K6="afterWrite",BC=[G6,RO,wT,IC,H6,YO,o6,w2,K6];function xT($a){return $a?($a.nodeName||"").toLowerCase():null}function FO($a){if($a==null)return window;if($a.toString()!=="[object Window]"){var Ws=$a.ownerDocument;return Ws&&Ws.defaultView||window}return $a}function gC($a){var Ws=FO($a).Element;return $a instanceof Ws||$a instanceof Element}function Z2($a){var Ws=FO($a).HTMLElement;return $a instanceof Ws||$a instanceof HTMLElement}function hC($a){if(typeof ShadowRoot=="undefined")return!1;var Ws=FO($a).ShadowRoot;return $a instanceof Ws||$a instanceof ShadowRoot}function a6($a){var Ws=$a.state;Object.keys(Ws.elements).forEach(function(O1){var W_=Ws.styles[O1]||{},Lb=Ws.attributes[O1]||{},Kb=Ws.elements[O1];!Z2(Kb)||!xT(Kb)||(Object.assign(Kb.style,W_),Object.keys(Lb).forEach(function(Gb){var p2=Lb[Gb];p2===!1?Kb.removeAttribute(Gb):Kb.setAttribute(Gb,p2===!0?"":p2)}))})}function s6($a){var Ws=$a.state,O1={popper:{position:Ws.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(Ws.elements.popper.style,O1.popper),Ws.styles=O1,Ws.elements.arrow&&Object.assign(Ws.elements.arrow.style,O1.arrow),function(){Object.keys(Ws.elements).forEach(function(W_){var Lb=Ws.elements[W_],Kb=Ws.attributes[W_]||{},Gb=Object.keys(Ws.styles.hasOwnProperty(W_)?Ws.styles[W_]:O1[W_]),p2=Gb.reduce(function(r2,m2){return r2[m2]="",r2},{});!Z2(Lb)||!xT(Lb)||(Object.assign(Lb.style,p2),Object.keys(Kb).forEach(function(r2){Lb.removeAttribute(r2)}))})}}var u6={name:"applyStyles",enabled:!0,phase:"write",fn:a6,effect:s6,requires:["computeStyles"]};function SC($a){return $a.split("-")[0]}function cO($a){var Ws=$a.getBoundingClientRect();return{width:Ws.width,height:Ws.height,top:Ws.top,right:Ws.right,bottom:Ws.bottom,left:Ws.left,x:Ws.left,y:Ws.top}}function l6($a){var Ws=cO($a),O1=$a.offsetWidth,W_=$a.offsetHeight;return Math.abs(Ws.width-O1)<=1&&(O1=Ws.width),Math.abs(Ws.height-W_)<=1&&(W_=Ws.height),{x:$a.offsetLeft,y:$a.offsetTop,width:O1,height:W_}}function VC($a,Ws){var O1=Ws.getRootNode&&Ws.getRootNode();if($a.contains(Ws))return!0;if(O1&&hC(O1)){var W_=Ws;do{if(W_&&$a.isSameNode(W_))return!0;W_=W_.parentNode||W_.host}while(W_)}return!1}function vT($a){return FO($a).getComputedStyle($a)}function W6($a){return["table","td","th"].indexOf(xT($a))>=0}function pO($a){return((gC($a)?$a.ownerDocument:$a.document)||window.document).documentElement}function wC($a){return xT($a)==="html"?$a:$a.assignedSlot||$a.parentNode||(hC($a)?$a.host:null)||pO($a)}function uT($a){return!Z2($a)||vT($a).position==="fixed"?null:$a.offsetParent}function Xb($a){var Ws=navigator.userAgent.toLowerCase().indexOf("firefox")!==-1,O1=navigator.userAgent.indexOf("Trident")!==-1;if(O1&&Z2($a)){var W_=vT($a);if(W_.position==="fixed")return null}for(var Lb=wC($a);Z2(Lb)&&["html","body"].indexOf(xT(Lb))<0;){var Kb=vT(Lb);if(Kb.transform!=="none"||Kb.perspective!=="none"||Kb.contain==="paint"||["transform","perspective"].indexOf(Kb.willChange)!==-1||Ws&&Kb.willChange==="filter"||Ws&&Kb.filter&&Kb.filter!=="none")return Lb;Lb=Lb.parentNode}return null}function Fb($a){for(var Ws=FO($a),O1=uT($a);O1&&W6(O1)&&vT(O1).position==="static";)O1=uT(O1);return O1&&(xT(O1)==="html"||xT(O1)==="body"&&vT(O1).position==="static")?Ws:O1||Xb($a)||Ws}function V2($a){return["top","bottom"].indexOf($a)>=0?"x":"y"}var OC=Math.max,bT=Math.min,W4=Math.round;function D4($a,Ws,O1){return OC($a,bT(Ws,O1))}function hO(){return{top:0,right:0,bottom:0,left:0}}function G2($a){return Object.assign({},hO(),$a)}function RC($a,Ws){return Ws.reduce(function(O1,W_){return O1[W_]=$a,O1},{})}var T6=function($a,Ws){return $a=typeof $a=="function"?$a(Object.assign({},Ws.rects,{placement:Ws.placement})):$a,G2(typeof $a!="number"?$a:RC($a,I2))};function Q6($a){var Ws,O1=$a.state,W_=$a.name,Lb=$a.options,Kb=O1.elements.arrow,Gb=O1.modifiersData.popperOffsets,p2=SC(O1.placement),r2=V2(p2),m2=[iT,PC].indexOf(p2)>=0,P2=m2?"height":"width";if(!(!Kb||!Gb)){var R2=T6(Lb.padding,O1),B2=l6(Kb),W2=r2==="y"?rT:iT,q2=r2==="y"?uO:PC,lC=O1.rects.reference[P2]+O1.rects.reference[r2]-Gb[r2]-O1.rects.popper[P2],fC=Gb[r2]-O1.rects.reference[r2],bC=Fb(Kb),QC=bC?r2==="y"?bC.clientHeight||0:bC.clientWidth||0:0,LC=lC/2-fC/2,Y2=R2[W2],aT=QC-B2[P2]-R2[q2],GC=QC/2-B2[P2]/2+LC,HC=D4(Y2,GC,aT),qA=r2;O1.modifiersData[W_]=(Ws={},Ws[qA]=HC,Ws.centerOffset=HC-GC,Ws)}}function c6($a){var Ws=$a.state,O1=$a.options,W_=O1.element,Lb=W_===void 0?"[data-popper-arrow]":W_;Lb!=null&&(typeof Lb=="string"&&(Lb=Ws.elements.popper.querySelector(Lb),!Lb)||!VC(Ws.elements.popper,Lb)||(Ws.elements.arrow=Lb))}var Q4={name:"arrow",enabled:!0,phase:"main",fn:Q6,effect:c6,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]},d6={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Y6($a){var Ws=$a.x,O1=$a.y,W_=window,Lb=W_.devicePixelRatio||1;return{x:W4(W4(Ws*Lb)/Lb)||0,y:W4(W4(O1*Lb)/Lb)||0}}function XC($a){var Ws,O1=$a.popper,W_=$a.popperRect,Lb=$a.placement,Kb=$a.offsets,Gb=$a.position,p2=$a.gpuAcceleration,r2=$a.adaptive,m2=$a.roundOffsets,P2=m2===!0?Y6(Kb):typeof m2=="function"?m2(Kb):Kb,R2=P2.x,B2=R2===void 0?0:R2,W2=P2.y,q2=W2===void 0?0:W2,lC=Kb.hasOwnProperty("x"),fC=Kb.hasOwnProperty("y"),bC=iT,QC=rT,LC=window;if(r2){var Y2=Fb(O1),aT="clientHeight",GC="clientWidth";Y2===FO(O1)&&(Y2=pO(O1),vT(Y2).position!=="static"&&(aT="scrollHeight",GC="scrollWidth")),Y2=Y2,Lb===rT&&(QC=uO,q2-=Y2[aT]-W_.height,q2*=p2?1:-1),Lb===iT&&(bC=PC,B2-=Y2[GC]-W_.width,B2*=p2?1:-1)}var HC=Object.assign({position:Gb},r2&&d6);if(p2){var qA;return Object.assign({},HC,(qA={},qA[QC]=fC?"0":"",qA[bC]=lC?"0":"",qA.transform=(LC.devicePixelRatio||1)<2?"translate("+B2+"px, "+q2+"px)":"translate3d("+B2+"px, "+q2+"px, 0)",qA))}return Object.assign({},HC,(Ws={},Ws[QC]=fC?q2+"px":"",Ws[bC]=lC?B2+"px":"",Ws.transform="",Ws))}function R4($a){var Ws=$a.state,O1=$a.options,W_=O1.gpuAcceleration,Lb=W_===void 0?!0:W_,Kb=O1.adaptive,Gb=Kb===void 0?!0:Kb,p2=O1.roundOffsets,r2=p2===void 0?!0:p2,m2={placement:SC(Ws.placement),popper:Ws.elements.popper,popperRect:Ws.rects.popper,gpuAcceleration:Lb};Ws.modifiersData.popperOffsets!=null&&(Ws.styles.popper=Object.assign({},Ws.styles.popper,XC(Object.assign({},m2,{offsets:Ws.modifiersData.popperOffsets,position:Ws.options.strategy,adaptive:Gb,roundOffsets:r2})))),Ws.modifiersData.arrow!=null&&(Ws.styles.arrow=Object.assign({},Ws.styles.arrow,XC(Object.assign({},m2,{offsets:Ws.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:r2})))),Ws.attributes.popper=Object.assign({},Ws.attributes.popper,{"data-popper-placement":Ws.placement})}var XO={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:R4,data:{}},H2={passive:!0};function X6($a){var Ws=$a.state,O1=$a.instance,W_=$a.options,Lb=W_.scroll,Kb=Lb===void 0?!0:Lb,Gb=W_.resize,p2=Gb===void 0?!0:Gb,r2=FO(Ws.elements.popper),m2=[].concat(Ws.scrollParents.reference,Ws.scrollParents.popper);return Kb&&m2.forEach(function(P2){P2.addEventListener("scroll",O1.update,H2)}),p2&&r2.addEventListener("resize",O1.update,H2),function(){Kb&&m2.forEach(function(P2){P2.removeEventListener("scroll",O1.update,H2)}),p2&&r2.removeEventListener("resize",O1.update,H2)}}var cC={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:X6,data:{}},cT={left:"right",right:"left",bottom:"top",top:"bottom"};function Y4($a){return $a.replace(/left|right|bottom|top/g,function(Ws){return cT[Ws]})}var p6={start:"end",end:"start"};function h6($a){return $a.replace(/start|end/g,function(Ws){return p6[Ws]})}function BO($a){var Ws=FO($a),O1=Ws.pageXOffset,W_=Ws.pageYOffset;return{scrollLeft:O1,scrollTop:W_}}function f6($a){return cO(pO($a)).left+BO($a).scrollLeft}function N4($a){var Ws=FO($a),O1=pO($a),W_=Ws.visualViewport,Lb=O1.clientWidth,Kb=O1.clientHeight,Gb=0,p2=0;return W_&&(Lb=W_.width,Kb=W_.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(Gb=W_.offsetLeft,p2=W_.offsetTop)),{width:Lb,height:Kb,x:Gb+f6($a),y:p2}}function M4($a){var Ws,O1=pO($a),W_=BO($a),Lb=(Ws=$a.ownerDocument)==null?void 0:Ws.body,Kb=OC(O1.scrollWidth,O1.clientWidth,Lb?Lb.scrollWidth:0,Lb?Lb.clientWidth:0),Gb=OC(O1.scrollHeight,O1.clientHeight,Lb?Lb.scrollHeight:0,Lb?Lb.clientHeight:0),p2=-W_.scrollLeft+f6($a),r2=-W_.scrollTop;return vT(Lb||O1).direction==="rtl"&&(p2+=OC(O1.clientWidth,Lb?Lb.clientWidth:0)-Kb),{width:Kb,height:Gb,x:p2,y:r2}}function S4($a){var Ws=vT($a),O1=Ws.overflow,W_=Ws.overflowX,Lb=Ws.overflowY;return/auto|scroll|overlay|hidden/.test(O1+Lb+W_)}function m6($a){return["html","body","#document"].indexOf(xT($a))>=0?$a.ownerDocument.body:Z2($a)&&S4($a)?$a:m6(wC($a))}function qO($a,Ws){var O1;Ws===void 0&&(Ws=[]);var W_=m6($a),Lb=W_===((O1=$a.ownerDocument)==null?void 0:O1.body),Kb=FO(W_),Gb=Lb?[Kb].concat(Kb.visualViewport||[],S4(W_)?W_:[]):W_,p2=Ws.concat(Gb);return Lb?p2:p2.concat(qO(wC(Gb)))}function C4($a){return Object.assign({},$a,{left:$a.x,top:$a.y,right:$a.x+$a.width,bottom:$a.y+$a.height})}function nO($a){var Ws=cO($a);return Ws.top=Ws.top+$a.clientTop,Ws.left=Ws.left+$a.clientLeft,Ws.bottom=Ws.top+$a.clientHeight,Ws.right=Ws.left+$a.clientWidth,Ws.width=$a.clientWidth,Ws.height=$a.clientHeight,Ws.x=Ws.left,Ws.y=Ws.top,Ws}function g6($a,Ws){return Ws===E4?C4(N4($a)):Z2(Ws)?nO(Ws):C4(M4(pO($a)))}function O6($a){var Ws=qO(wC($a)),O1=["absolute","fixed"].indexOf(vT($a).position)>=0,W_=O1&&Z2($a)?Fb($a):$a;return gC(W_)?Ws.filter(function(Lb){return gC(Lb)&&VC(Lb,W_)&&xT(Lb)!=="body"}):[]}function x6($a,Ws,O1){var W_=Ws==="clippingParents"?O6($a):[].concat(Ws),Lb=[].concat(W_,[O1]),Kb=Lb[0],Gb=Lb.reduce(function(p2,r2){var m2=g6($a,r2);return p2.top=OC(m2.top,p2.top),p2.right=bT(m2.right,p2.right),p2.bottom=bT(m2.bottom,p2.bottom),p2.left=OC(m2.left,p2.left),p2},g6($a,Kb));return Gb.width=Gb.right-Gb.left,Gb.height=Gb.bottom-Gb.top,Gb.x=Gb.left,Gb.y=Gb.top,Gb}function j4($a){return $a.split("-")[1]}function P6($a){var Ws=$a.reference,O1=$a.element,W_=$a.placement,Lb=W_?SC(W_):null,Kb=W_?j4(W_):null,Gb=Ws.x+Ws.width/2-O1.width/2,p2=Ws.y+Ws.height/2-O1.height/2,r2;switch(Lb){case rT:r2={x:Gb,y:Ws.y-O1.height};break;case uO:r2={x:Gb,y:Ws.y+Ws.height};break;case PC:r2={x:Ws.x+Ws.width,y:p2};break;case iT:r2={x:Ws.x-O1.width,y:p2};break;default:r2={x:Ws.x,y:Ws.y}}var m2=Lb?V2(Lb):null;if(m2!=null){var P2=m2==="y"?"height":"width";switch(Kb){case EO:r2[m2]=r2[m2]-(Ws[P2]/2-O1[P2]/2);break;case H4:r2[m2]=r2[m2]+(Ws[P2]/2-O1[P2]/2);break}}return r2}function L4($a,Ws){Ws===void 0&&(Ws={});var O1=Ws,W_=O1.placement,Lb=W_===void 0?$a.placement:W_,Kb=O1.boundary,Gb=Kb===void 0?tO:Kb,p2=O1.rootBoundary,r2=p2===void 0?E4:p2,m2=O1.elementContext,P2=m2===void 0?HO:m2,R2=O1.altBoundary,B2=R2===void 0?!1:R2,W2=O1.padding,q2=W2===void 0?0:W2,lC=G2(typeof q2!="number"?q2:RC(q2,I2)),fC=P2===HO?K4:HO,bC=$a.elements.reference,QC=$a.rects.popper,LC=$a.elements[B2?fC:P2],Y2=x6(gC(LC)?LC:LC.contextElement||pO($a.elements.popper),Gb,r2),aT=cO(bC),GC=P6({reference:aT,element:QC,strategy:"absolute",placement:Lb}),HC=C4(Object.assign({},QC,GC)),qA=P2===HO?HC:aT,aO={top:Y2.top-qA.top+lC.top,bottom:qA.bottom-Y2.bottom+lC.bottom,left:Y2.left-qA.left+lC.left,right:qA.right-Y2.right+lC.right},b4=$a.modifiersData.offset;if(P2===HO&&b4){var w4=b4[Lb];Object.keys(aO).forEach(function(F4){var bO=[PC,uO].indexOf(F4)>=0?1:-1,U4=[rT,uO].indexOf(F4)>=0?"y":"x";aO[F4]+=w4[U4]*bO})}return aO}function CC($a,Ws){Ws===void 0&&(Ws={});var O1=Ws,W_=O1.placement,Lb=O1.boundary,Kb=O1.rootBoundary,Gb=O1.padding,p2=O1.flipVariations,r2=O1.allowedAutoPlacements,m2=r2===void 0?D6:r2,P2=j4(W_),R2=P2?p2?AO:AO.filter(function(q2){return j4(q2)===P2}):I2,B2=R2.filter(function(q2){return m2.indexOf(q2)>=0});B2.length===0&&(B2=R2);var W2=B2.reduce(function(q2,lC){return q2[lC]=L4($a,{placement:lC,boundary:Lb,rootBoundary:Kb,padding:Gb})[SC(lC)],q2},{});return Object.keys(W2).sort(function(q2,lC){return W2[q2]-W2[lC]})}function I6($a){if(SC($a)===eO)return[];var Ws=Y4($a);return[h6($a),Ws,h6(Ws)]}function X4($a){var Ws=$a.state,O1=$a.options,W_=$a.name;if(!Ws.modifiersData[W_]._skip){for(var Lb=O1.mainAxis,Kb=Lb===void 0?!0:Lb,Gb=O1.altAxis,p2=Gb===void 0?!0:Gb,r2=O1.fallbackPlacements,m2=O1.padding,P2=O1.boundary,R2=O1.rootBoundary,B2=O1.altBoundary,W2=O1.flipVariations,q2=W2===void 0?!0:W2,lC=O1.allowedAutoPlacements,fC=Ws.options.placement,bC=SC(fC),QC=bC===fC,LC=r2||(QC||!q2?[Y4(fC)]:I6(fC)),Y2=[fC].concat(LC).reduce(function(I4,GO){return I4.concat(SC(GO)===eO?CC(Ws,{placement:GO,boundary:P2,rootBoundary:R2,padding:m2,flipVariations:q2,allowedAutoPlacements:lC}):GO)},[]),aT=Ws.rects.reference,GC=Ws.rects.popper,HC=new Map,qA=!0,aO=Y2[0],b4=0;b4<Y2.length;b4++){var w4=Y2[b4],F4=SC(w4),bO=j4(w4)===EO,U4=[rT,uO].indexOf(F4)>=0,A6=U4?"width":"height",n6=L4(Ws,{placement:w4,boundary:P2,rootBoundary:R2,altBoundary:B2,padding:m2}),G4=U4?bO?PC:iT:bO?uO:rT;aT[A6]>GC[A6]&&(G4=Y4(G4));var u5=Y4(G4),r6=[];if(Kb&&r6.push(n6[F4]<=0),p2&&r6.push(n6[G4]<=0,n6[u5]<=0),r6.every(function(I4){return I4})){aO=w4,qA=!1;break}HC.set(w4,r6)}if(qA)for(var q6=q2?3:1,l5=function(I4){var GO=Y2.find(function(c5){var z6=HC.get(c5);if(z6)return z6.slice(0,I4).every(function(F6){return F6})});if(GO)return aO=GO,"break"},i6=q6;i6>0;i6--){var V6=l5(i6);if(V6==="break")break}Ws.placement!==aO&&(Ws.modifiersData[W_]._skip=!0,Ws.placement=aO,Ws.reset=!0)}}var ZO={name:"flip",enabled:!0,phase:"main",fn:X4,requiresIfExists:["offset"],data:{_skip:!1}};function R6($a,Ws,O1){return O1===void 0&&(O1={x:0,y:0}),{top:$a.top-Ws.height-O1.y,right:$a.right-Ws.width+O1.x,bottom:$a.bottom-Ws.height+O1.y,left:$a.left-Ws.width-O1.x}}function u2($a){return[rT,PC,uO,iT].some(function(Ws){return $a[Ws]>=0})}function pC($a){var Ws=$a.state,O1=$a.name,W_=Ws.rects.reference,Lb=Ws.rects.popper,Kb=Ws.modifiersData.preventOverflow,Gb=L4(Ws,{elementContext:"reference"}),p2=L4(Ws,{altBoundary:!0}),r2=R6(Gb,W_),m2=R6(p2,Lb,Kb),P2=u2(r2),R2=u2(m2);Ws.modifiersData[O1]={referenceClippingOffsets:r2,popperEscapeOffsets:m2,isReferenceHidden:P2,hasPopperEscaped:R2},Ws.attributes.popper=Object.assign({},Ws.attributes.popper,{"data-popper-reference-hidden":P2,"data-popper-escaped":R2})}var pT={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:pC};function J4($a,Ws,O1){var W_=SC($a),Lb=[iT,rT].indexOf(W_)>=0?-1:1,Kb=typeof O1=="function"?O1(Object.assign({},Ws,{placement:$a})):O1,Gb=Kb[0],p2=Kb[1];return Gb=Gb||0,p2=(p2||0)*Lb,[iT,PC].indexOf(W_)>=0?{x:p2,y:Gb}:{x:Gb,y:p2}}function N6($a){var Ws=$a.state,O1=$a.options,W_=$a.name,Lb=O1.offset,Kb=Lb===void 0?[0,0]:Lb,Gb=D6.reduce(function(P2,R2){return P2[R2]=J4(R2,Ws.rects,Kb),P2},{}),p2=Gb[Ws.placement],r2=p2.x,m2=p2.y;Ws.modifiersData.popperOffsets!=null&&(Ws.modifiersData.popperOffsets.x+=r2,Ws.modifiersData.popperOffsets.y+=m2),Ws.modifiersData[W_]=Gb}var J6={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:N6};function Z6($a){var Ws=$a.state,O1=$a.name;Ws.modifiersData[O1]=P6({reference:Ws.rects.reference,element:Ws.rects.popper,strategy:"absolute",placement:Ws.placement})}var e5={name:"popperOffsets",enabled:!0,phase:"read",fn:Z6,data:{}};function v6($a){return $a==="x"?"y":"x"}function JC($a){var Ws=$a.state,O1=$a.options,W_=$a.name,Lb=O1.mainAxis,Kb=Lb===void 0?!0:Lb,Gb=O1.altAxis,p2=Gb===void 0?!1:Gb,r2=O1.boundary,m2=O1.rootBoundary,P2=O1.altBoundary,R2=O1.padding,B2=O1.tether,W2=B2===void 0?!0:B2,q2=O1.tetherOffset,lC=q2===void 0?0:q2,fC=L4(Ws,{boundary:r2,rootBoundary:m2,padding:R2,altBoundary:P2}),bC=SC(Ws.placement),QC=j4(Ws.placement),LC=!QC,Y2=V2(bC),aT=v6(Y2),GC=Ws.modifiersData.popperOffsets,HC=Ws.rects.reference,qA=Ws.rects.popper,aO=typeof lC=="function"?lC(Object.assign({},Ws.rects,{placement:Ws.placement})):lC,b4={x:0,y:0};if(GC){if(Kb||p2){var w4=Y2==="y"?rT:iT,F4=Y2==="y"?uO:PC,bO=Y2==="y"?"height":"width",U4=GC[Y2],A6=GC[Y2]+fC[w4],n6=GC[Y2]-fC[F4],G4=W2?-qA[bO]/2:0,u5=QC===EO?HC[bO]:qA[bO],r6=QC===EO?-qA[bO]:-HC[bO],q6=Ws.elements.arrow,l5=W2&&q6?l6(q6):{width:0,height:0},i6=Ws.modifiersData["arrow#persistent"]?Ws.modifiersData["arrow#persistent"].padding:hO(),V6=i6[w4],I4=i6[F4],GO=D4(0,HC[bO],l5[bO]),c5=LC?HC[bO]/2-G4-GO-V6-aO:u5-GO-V6-aO,z6=LC?-HC[bO]/2+G4+GO+I4+aO:r6+GO+I4+aO,F6=Ws.elements.arrow&&Fb(Ws.elements.arrow),O5=F6?Y2==="y"?F6.clientTop||0:F6.clientLeft||0:0,m5=Ws.modifiersData.offset?Ws.modifiersData.offset[Ws.placement][Y2]:0,g5=GC[Y2]+c5-m5-O5,v5=GC[Y2]+z6-m5;if(Kb){var y5=D4(W2?bT(A6,g5):A6,U4,W2?OC(n6,v5):n6);GC[Y2]=y5,b4[Y2]=y5-U4}if(p2){var x5=Y2==="x"?rT:iT,P5=Y2==="x"?uO:PC,U6=GC[aT],_5=U6+fC[x5],b5=U6-fC[P5],w5=D4(W2?bT(_5,g5):_5,U6,W2?OC(b5,v5):b5);GC[aT]=w5,b4[aT]=w5-U6}}Ws.modifiersData[W_]=b4}}var y6={name:"preventOverflow",enabled:!0,phase:"main",fn:JC,requiresIfExists:["offset"]};function UC($a){return{scrollLeft:$a.scrollLeft,scrollTop:$a.scrollTop}}function Z4($a){return $a===FO($a)||!Z2($a)?BO($a):UC($a)}function $4($a,Ws,O1){O1===void 0&&(O1=!1);var W_=pO(Ws),Lb=cO($a),Kb=Z2(Ws),Gb={scrollLeft:0,scrollTop:0},p2={x:0,y:0};return(Kb||!Kb&&!O1)&&((xT(Ws)!=="body"||S4(W_))&&(Gb=Z4(Ws)),Z2(Ws)?(p2=cO(Ws),p2.x+=Ws.clientLeft,p2.y+=Ws.clientTop):W_&&(p2.x=f6(W_))),{x:Lb.left+Gb.scrollLeft-p2.x,y:Lb.top+Gb.scrollTop-p2.y,width:Lb.width,height:Lb.height}}function kC($a){var Ws=new Map,O1=new Set,W_=[];$a.forEach(function(Kb){Ws.set(Kb.name,Kb)});function Lb(Kb){O1.add(Kb.name);var Gb=[].concat(Kb.requires||[],Kb.requiresIfExists||[]);Gb.forEach(function(p2){if(!O1.has(p2)){var r2=Ws.get(p2);r2&&Lb(r2)}}),W_.push(Kb)}return $a.forEach(function(Kb){O1.has(Kb.name)||Lb(Kb)}),W_}function K2($a){var Ws=kC($a);return BC.reduce(function(O1,W_){return O1.concat(Ws.filter(function(Lb){return Lb.phase===W_}))},[])}function t5($a){var Ws;return function(){return Ws||(Ws=new Promise(function(O1){Promise.resolve().then(function(){Ws=void 0,O1($a())})})),Ws}}function xC($a){var Ws=$a.reduce(function(O1,W_){var Lb=O1[W_.name];return O1[W_.name]=Lb?Object.assign({},Lb,W_,{options:Object.assign({},Lb.options,W_.options),data:Object.assign({},Lb.data,W_.data)}):W_,O1},{});return Object.keys(Ws).map(function(O1){return Ws[O1]})}var g4={placement:"bottom",modifiers:[],strategy:"absolute"};function k4(){for(var $a=arguments.length,Ws=new Array($a),O1=0;O1<$a;O1++)Ws[O1]=arguments[O1];return!Ws.some(function(W_){return!(W_&&typeof W_.getBoundingClientRect=="function")})}function n5($a){$a===void 0&&($a={});var Ws=$a,O1=Ws.defaultModifiers,W_=O1===void 0?[]:O1,Lb=Ws.defaultOptions,Kb=Lb===void 0?g4:Lb;return function(Gb,p2,r2){r2===void 0&&(r2=Kb);var m2={placement:"bottom",orderedModifiers:[],options:Object.assign({},g4,Kb),modifiersData:{},elements:{reference:Gb,popper:p2},attributes:{},styles:{}},P2=[],R2=!1,B2={state:m2,setOptions:function(lC){q2(),m2.options=Object.assign({},Kb,m2.options,lC),m2.scrollParents={reference:gC(Gb)?qO(Gb):Gb.contextElement?qO(Gb.contextElement):[],popper:qO(p2)};var fC=K2(xC([].concat(W_,m2.options.modifiers)));return m2.orderedModifiers=fC.filter(function(bC){return bC.enabled}),W2(),B2.update()},forceUpdate:function(){if(!R2){var lC=m2.elements,fC=lC.reference,bC=lC.popper;if(k4(fC,bC)){m2.rects={reference:$4(fC,Fb(bC),m2.options.strategy==="fixed"),popper:l6(bC)},m2.reset=!1,m2.placement=m2.options.placement,m2.orderedModifiers.forEach(function(aO){return m2.modifiersData[aO.name]=Object.assign({},aO.data)});for(var QC=0,LC=0;LC<m2.orderedModifiers.length;LC++){if(m2.reset===!0){m2.reset=!1,LC=-1;continue}var Y2=m2.orderedModifiers[LC],aT=Y2.fn,GC=Y2.options,HC=GC===void 0?{}:GC,qA=Y2.name;typeof aT=="function"&&(m2=aT({state:m2,options:HC,name:qA,instance:B2})||m2)}}}},update:t5(function(){return new Promise(function(lC){B2.forceUpdate(),lC(m2)})}),destroy:function(){q2(),R2=!0}};if(!k4(Gb,p2))return B2;B2.setOptions(r2).then(function(lC){!R2&&r2.onFirstUpdate&&r2.onFirstUpdate(lC)});function W2(){m2.orderedModifiers.forEach(function(lC){var fC=lC.name,bC=lC.options,QC=bC===void 0?{}:bC,LC=lC.effect;if(typeof LC=="function"){var Y2=LC({state:m2,name:fC,instance:B2,options:QC}),aT=function(){};P2.push(Y2||aT)}})}function q2(){P2.forEach(function(lC){return lC()}),P2=[]}return B2}}var MO=[cC,e5,XO,u6,J6,ZO,y6,Q4,pT],B4=n5({defaultModifiers:MO}),_6=($a=0,Ws=0)=>()=>({width:0,height:0,top:Ws,right:$a,bottom:Ws,left:$a}),b6=La`
  :host [part="content"] {
    z-index: 999;
    display: none;
  }
  :host([open]) [part="content"] {
    display: inline-block;
  }
`,VO=class extends j2{constructor(){super(),this.open=!1,this.placement="auto",this.event="click",this.clientY=0,this.clientX=0,this._createPopover=this._createPopover.bind(this)}get triggerPart(){return this.renderRoot.querySelector("[part='trigger']")}get contentPart(){return this.renderRoot.querySelector("[part='content']")}get triggerAssignedNode(){return this.renderRoot.querySelector("[name='trigger']").assignedNodes()[0]}get contentAssignedNode(){return this.renderRoot.querySelector("[name='content']").assignedNodes()[0]}firstUpdated(){let $a=this.triggerPart;$a.addEventListener(this.event,Ws=>{Ws.preventDefault(),this.clientY=Ws.clientY,this.clientX=Ws.clientX,this.open=!this.open}),this.event==="mouseover"&&($a.addEventListener("mouseover",()=>this.open=!0),$a.addEventListener("mouseleave",()=>this.open=!1),$a.addEventListener("mouseleave",()=>this.open=!1)),window.addEventListener("mousedown",Ws=>{var O1=Ws.path||Ws.composedPath&&Ws.composedPath();let W_=O1.includes(this.triggerAssignedNode);!O1.includes(this.contentAssignedNode)&&!W_&&(this.open=!1)})}_createPopover(){let $a=this.triggerPart,Ws=this.contentPart;if(this.event==="contextmenu"){let O1={contextElement:$a,getBoundingClientRect:_6()},W_=B4(O1,Ws,{placement:this.placement,strategy:"fixed",modifiers:[{name:"offset",options:{offset:[10,10]}}]});O1.getBoundingClientRect=_6(this.clientX,this.clientY),W_.update()}else B4($a,Ws,{placement:this.placement,strategy:"fixed",modifiers:[{name:"offset",options:{offset:[10,10]}},{name:"computeStyles",options:{gpuAcceleration:!1}}]})}shouldUpdate($a){return $a.has("open")&&(this.dispatchEvent(new CustomEvent("toggle",{bubbles:!0})),this.open&&this._createPopover()),!0}render(){return zb`
      <div part="base">
        <span part="trigger"><slot name="trigger"></slot></span>
        <span part="content"><slot name="content"></slot></span>
      </div>
    `}};VO.styles=[mC,b6],m([d2({type:Boolean,reflect:!0})],VO.prototype,"open",2),m([d2({type:String,reflect:!0})],VO.prototype,"placement",2),m([d2({type:String,reflect:!0})],VO.prototype,"event",2),m([KC()],VO.prototype,"clientY",2),m([KC()],VO.prototype,"clientX",2),VO=m([z2("j-popover")],VO);var M6=La`
  [part="base"] {
    border-radius: var(--j-border-radius);
    padding: var(--j-space-300) 0;
    min-width: 200px;
    background: var(--j-color-white);
    border: 1px solid var(--j-border-color);
    overflow: hidden;
  }
`,w6=class extends j2{render(){return zb` <div part="base" role="menu"><slot></slot></div>`}};w6.styles=[mC,M6],w6=m([z2("j-menu")],w6);var T4=La`
  :host {
    --j-menu-group-item-cursor: default;
    --j-menu-group-item-title-padding-left: var(--j-space-500);
  }
  :host([collapsible]) {
    --j-menu-group-item-cursor: pointer;
    --j-menu-group-item-title-padding-left: var(--j-space-800);
  }
  [part="summary"] {
    position: relative;
    cursor: var(--j-menu-group-item-cursor);
    list-style: none;
    display: flex;
    align-items: center;
    padding-left: var(--j-menu-group-item-title-padding-left);
    margin-bottom: var(--j-space-200);
    -webkit-appearance: none;
  }
  [part="summary"]::marker,
  [part="summary"]::-webkit-details-marker {
    display: none;
  }

  [part="summary"]:hover {
    color: var(--j-color-ui-700);
  }
  :host([collapsible]) [part="summary"]:after {
    top: 50%;
    left: var(--j-space-500);
    position: absolute;
    display: block;
    content: "";
    border-right: 1px solid var(--j-color-ui-500);
    border-bottom: 1px solid var(--j-color-ui-500);
    width: 4px;
    height: 4px;
    transition: all 0.2s ease;
    transform: rotate(-45deg) translateX(-50%);
    transform-origin: center;
  }
  :host([open][collapsible]) [part="summary"]:after {
    transform: rotate(45deg) translateX(-50%);
  }
  [name="start"]::slotted(*) {
    margin-left: var(--j-space-400);
  }
  [name="end"]::slotted(*) {
    margin-right: var(--j-space-400);
  }
  [part="title"] {
    text-transform: uppercase;
    font-size: var(--j-font-size-400);
    color: var(--j-color-ui-400);
    font-weight: 500;
    flex: 1;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }
  [part="content"] {
  }
`,y4=class extends j2{constructor(){super(...arguments),this.collapsible=!1,this.open=!1,this.title=null}collapsibleContent(){return zb`<details
      .open=${this.open}
      @toggle=${$a=>this.open=$a.target.open}
      part="base"
      role="menuitem"
    >
      <summary part="summary">
        <slot part="start" name="start"></slot>
        <div part="title">${this.title}</div>
        <slot part="end" name="end"></slot>
      </summary>
      <div part="content">
        <slot></slot>
      </div>
    </details>`}normal(){return zb`<div part="base" role="menuitem">
      <div part="summary">
        <slot part="start" name="start"></slot>
        <div part="title">${this.title}</div>
        <slot part="end" name="end"></slot>
      </div>
      <div part="content">
        <slot></slot>
      </div>
    </div>`}render(){return this.collapsible?this.collapsibleContent():this.normal()}};y4.styles=[T4,mC],m([d2({type:Boolean,reflect:!0})],y4.prototype,"collapsible",2),m([d2({type:Boolean,reflect:!0})],y4.prototype,"open",2),m([d2({type:String,reflect:!0})],y4.prototype,"title",2),y4=m([z2("j-menu-group-item")],y4);var r5=La`
  :host {
    --j-menu-item-gap: var(--j-space-300);
    --j-menu-item-border-left: none;
    --j-menu-item-border-radius: none;
    --j-menu-item-height: var(--j-size-md);
    --j-menu-item-bg: transparent;
    --j-menu-item-color: var(--j-color-ui-600);
    --j-menu-item-padding: 0 var(--j-space-500) 0 var(--j-space-500);
    --j-menu-item-font-weight: 600;
    --j-menu-item-font-size: var(--j-font-size-500);
  }
  :host(:hover) {
    --j-menu-item-color: var(--j-color-ui-700);
    --j-menu-item-bg: var(--j-color-ui-50);
  }
  :host([active]) {
    --j-menu-item-bg: var(--j-color-ui-50);
    --j-menu-item-color: var(--j-color-ui-600);
  }
  :host([selected]) {
    --j-menu-item-bg: var(--j-color-primary-100);
    --j-menu-item-color: var(--j-color-primary-700);
  }
  :host([size="sm"]) {
    --j-menu-item-gap: var(--j-space-300);
    --j-menu-item-font-size: var(--j-font-size-400);
    --j-menu-item-height: var(--j-size-sm);
  }
  :host([size="lg"]) {
    --j-menu-item-gap: var(--j-space-400);
    --j-menu-item-height: var(--j-size-lg);
  }
  :host([size="xl"]) {
    --j-menu-item-gap: var(--j-space-500);
    --j-menu-item-height: var(--j-size-xl);
  }
  :host(:last-of-type) [part="base"] {
    margin-bottom: 0;
  }
  [part="base"] {
    display: flex;
    align-items: center;
    gap: var(--j-menu-item-gap);
    border-radius: var(--j-menu-item-border-radius);
    background: var(--j-menu-item-bg);
    text-decoration: none;
    cursor: pointer;
    font-size: var(--j-menu-item-font-size);
    height: var(--j-menu-item-height);
    padding: var(--j-menu-item-padding);
    color: var(--j-menu-item-color);
    font-weight: var(--j-menu-item-font-weight);
    border-left: var(--j-menu-item-border-left);
  }
  [part="content"] {
    flex: 1;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }
`,DO=class extends j2{constructor(){super(...arguments),this.selected=!1,this.active=!1,this._value=null,this._label=null}get label(){return this._label||this.getAttribute("label")||this.innerText}set label($a){this._label=$a,this.setAttribute("label",$a)}get value(){return this._value||this.getAttribute("value")||this.innerText}set value($a){this._value=$a,this.setAttribute("value",$a)}render(){return zb`<div part="base" role="menuitem">
      <slot name="start"></slot>
      <div part="content">
        <slot></slot>
      </div>
      <slot name="end"></slot>
    </div>`}};DO.styles=[mC,r5],m([d2({type:Boolean,reflect:!0})],DO.prototype,"selected",2),m([d2({type:Boolean,reflect:!0})],DO.prototype,"active",2),m([KC()],DO.prototype,"_value",2),m([KC()],DO.prototype,"_label",2),DO=m([z2("j-menu-item")],DO);var i5=La`
  :host {
    --j-radio-button-size: 16px;
    --j-radio-button-gap: var(--j-space-300);
    --j-radio-button-font-size: 0 var(--j-font-size-500);
    --j-radio-button-indicator-color: var(--j-color-ui-500);
  }
  :host([full]) label {
    display: flex;
    width: 100%;
  }
  :host([disabled]) label {
    opacity: 0.5;
    cursor: default;
  }
  :host([checked]) {
    --j-radio-button-indicator-color: var(--j-color-primary-500);
  }
  :host([size="sm"]) {
    --j-radio-button-size: 10px;
    --j-radio-button-font-size: var(--j-font-size-400);
  }
  :host([size="lg"]) {
    --j-radio-button-size: 20px;
    --j-radio-button-font-size: var(--j-font-size-600);
  }
  label {
    display: inline-flex;
    gap: var(--j-radio-button-gap);
    font-size: var(--j-radio-button-font-size);
    align-items: center;
    cursor: pointer;
    position: relative;
  }
  input {
    position: absolute;
    clip: rect(1px 1px 1px 1px);
    clip: rect(1px, 1px, 1px, 1px);
    vertical-align: middle;
  }
  span {
    display: block;
  }
  i {
    display: block;
    border-radius: 50%;
    border: 2px solid var(--j-radio-button-indicator-color);
    width: var(--j-radio-button-size);
    height: var(--j-radio-button-size);
    position: relative;
  }
  input:checked ~ i:after {
    position: absolute;
    display: block;
    content: "";
    width: calc(var(--j-radio-button-size) / 2);
    height: calc(var(--j-radio-button-size) / 2);
    background: var(--j-radio-button-indicator-color);
    border-radius: 50%;
    left: 50%;
    top: 50%;
    transform: translateX(-50%) translateY(-50%);
  }
`,_4=class extends j2{constructor(){super(),this.value=null,this.name=null,this.size=null,this.full=!1,this.disabled=!1,this._checked=!1,this.focus=this.focus.bind(this),this.selectNext=this.selectNext.bind(this),this.selectPrevious=this.selectPrevious.bind(this),this._handleChange=this._handleChange.bind(this),this._handleKeyPress=this._handleKeyPress.bind(this)}static get properties(){return{checked:{type:Boolean,reflect:!0},disabled:{type:Boolean},full:{type:Boolean},size:{type:String},name:{type:String,reflect:!0},value:{type:String}}}static get styles(){return[i5,mC]}get options(){return[...document.querySelectorAll(`[name="${this.name}"]`)]}get currentCheckedItem(){return this.options.find($a=>$a.checked)}get formElement(){return this.shadowRoot.querySelector("input")}get checked(){return this._checked}set checked($a){$a!==this._checked&&($a===!0&&this.currentCheckedItem&&(this.currentCheckedItem.checked=!1),this.formElement&&(this.formElement.checked=$a),$a?this.setAttribute("checked",""):this.removeAttribute("checked"),this._checked=$a,this.requestUpdate())}selectNext(){let $a=this.options,Ws=$a.findIndex(W_=>W_.checked),O1=$a.length===Ws+1?0:Ws+1;$a[O1].focus(),$a[O1].checked=!0}selectPrevious(){let $a=this.options,Ws=$a.findIndex(W_=>W_.checked),O1=Ws===0?$a.length-1:Ws-1;$a[O1].focus(),$a[O1].checked=!0}focus(){this.formElement.focus()}_handleChange($a){$a.stopPropagation(),this.checked=$a.target.checked,this.dispatchEvent(new CustomEvent("change",$a))}_handleKeyPress($a){$a.keyCode===37&&this.selectPrevious(),$a.keyCode===39&&this.selectNext()}render(){return zb`
      <label part="base">
        <input
          name=${this.name}
          ?disabled=${this.disabled}
          @keydown=${this._handleKeyPress}
          @change=${this._handleChange}
          ?checked=${this.checked}
          value=${this.value}
          type="radio"
        />
        <i></i>
        <span><slot></slot></span>
      </label>
    `}};customElements.define("j-radio-button",_4);var PI={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},vO=$a=>(...Ws)=>({_$litDirective$:$a,values:Ws}),j6=class{constructor($a){}T($a,Ws,O1){this.\u03A3dt=$a,this.M=Ws,this.\u03A3ct=O1}S($a,Ws){return this.update($a,Ws)}update($a,Ws){return this.render(...Ws)}},yO=class extends j6{constructor($a){if(super($a),this.vt=Zb,$a.type!==PI.CHILD)throw Error(this.constructor.directiveName+"() can only be used in child bindings")}render($a){if($a===Zb)return this.Vt=void 0,this.vt=$a;if($a===t2)return $a;if(typeof $a!="string")throw Error(this.constructor.directiveName+"() called with a non-string value");if($a===this.vt)return this.Vt;this.vt=$a;let Ws=[$a];return Ws.raw=Ws,this.Vt={_$litType$:this.constructor.resultType,strings:Ws,values:[]}}};yO.directiveName="unsafeHTML",yO.resultType=1;var E6=class extends yO{};E6.directiveName="unsafeSVG",E6.resultType=2;var S6=vO(E6);function q4($a,Ws,O1){return parseInt($a.substr(Ws,O1),16)}function C6($a){return $a|=0,$a<0?"00":$a<16?"0"+$a.toString(16):$a<256?$a.toString(16):"ff"}function _O($a,Ws,O1){return O1=O1<0?O1+6:O1>6?O1-6:O1,C6(255*(O1<1?$a+(Ws-$a)*O1:O1<3?Ws:O1<4?$a+(Ws-$a)*(4-O1):$a))}function o5($a){if(/^#[0-9a-f]{3,8}$/i.test($a)){let Ws,O1=$a.length;if(O1<6){let W_=$a[1],Lb=$a[2],Kb=$a[3],Gb=$a[4]||"";Ws="#"+W_+W_+Lb+Lb+Kb+Kb+Gb+Gb}return(O1==7||O1>8)&&(Ws=$a),Ws}}function $6($a,Ws,O1){let W_;if(Ws==0){let Lb=C6(O1*255);W_=Lb+Lb+Lb}else{let Lb=O1<=.5?O1*(Ws+1):O1+Ws-O1*Ws,Kb=O1*2-Lb;W_=_O(Kb,Lb,$a*6+2)+_O(Kb,Lb,$a*6)+_O(Kb,Lb,$a*6-2)}return"#"+W_}function UO($a,Ws,O1){let W_=[.55,.5,.5,.46,.6,.55,.55],Lb=W_[$a*6+.5|0];return O1=O1<.5?O1*Lb*2:Lb+(O1-.5)*(1-Lb)*2,$6($a,Ws,O1)}var yC=typeof window!="undefined"?window:typeof self!="undefined"?self:typeof commonjsGlobal!="undefined"?commonjsGlobal:{},V4={V:"jdenticon_config",n:"config"},by={};function d($a,Ws){let O1=typeof $a=="object"&&$a||by[V4.n]||yC[V4.V]||{},W_=O1.lightness||{},Lb=O1.saturation||{},Kb="color"in Lb?Lb.color:Lb,Gb=Lb.grayscale,p2=O1.backColor,r2=O1.padding;function m2(R2,B2){let W2=W_[R2];return W2&&W2.length>1||(W2=B2),function(q2){return q2=W2[0]+q2*(W2[1]-W2[0]),q2<0?0:q2>1?1:q2}}function P2(R2){let B2=O1.hues,W2;return B2&&B2.length>0&&(W2=B2[0|.999*R2*B2.length]),typeof W2=="number"?(W2/360%1+1)%1:R2}return{W:P2,o:typeof Kb=="number"?Kb:.5,D:typeof Gb=="number"?Gb:0,p:m2("color",[.4,.8]),F:m2("grayscale",[.3,.9]),G:o5(p2),X:typeof $a=="number"?$a:typeof r2=="number"?r2:Ws}}var de=class{constructor($a,Ws){this.x=$a,this.y=Ws}},Se=class{constructor($a,Ws,O1,W_){this.q=$a,this.t=Ws,this.H=O1,this.Y=W_}I($a,Ws,O1,W_){let Lb=this.q+this.H,Kb=this.t+this.H,Gb=this.Y;return Gb===1?new de(Lb-Ws-(W_||0),this.t+$a):Gb===2?new de(Lb-$a-(O1||0),Kb-Ws-(W_||0)):Gb===3?new de(this.q+Ws,Kb-$a-(O1||0)):new de(this.q+$a,this.t+Ws)}},Ue=new Se(0,0,0,0),Ge=class{constructor($a){this.J=$a,this.u=Ue}g($a,Ws){let O1=Ws?-2:2,W_=[];for(let Lb=Ws?$a.length-2:0;Lb<$a.length&&Lb>=0;Lb+=O1)W_.push(this.u.I($a[Lb],$a[Lb+1]));this.J.g(W_)}h($a,Ws,O1,W_){let Lb=this.u.I($a,Ws,O1,O1);this.J.h(Lb,O1,W_)}i($a,Ws,O1,W_,Lb){this.g([$a,Ws,$a+O1,Ws,$a+O1,Ws+W_,$a,Ws+W_],Lb)}j($a,Ws,O1,W_,Lb,Kb){let Gb=[$a+O1,Ws,$a+O1,Ws+W_,$a,Ws+W_,$a,Ws];Gb.splice((Lb||0)%4*2,2),this.g(Gb,Kb)}K($a,Ws,O1,W_,Lb){this.g([$a+O1/2,Ws,$a+O1,Ws+W_/2,$a+O1/2,Ws+W_,$a,Ws+W_/2],Lb)}};function Qe($a,Ws,O1,W_){$a=$a%14;let Lb,Kb,Gb,p2,r2,m2;$a?$a==1?(Gb=0|O1*.5,p2=0|O1*.8,Ws.j(O1-Gb,0,Gb,p2,2)):$a==2?(Gb=0|O1/3,Ws.i(Gb,Gb,O1-Gb,O1-Gb)):$a==3?(r2=O1*.1,m2=O1<6?1:O1<8?2:0|O1*.25,r2=r2>1?0|r2:r2>.5?1:r2,Ws.i(m2,m2,O1-r2-m2,O1-r2-m2)):$a==4?(Kb=0|O1*.15,Gb=0|O1*.5,Ws.h(O1-Gb-Kb,O1-Gb-Kb,Gb)):$a==5?(r2=O1*.1,m2=r2*4,m2>3&&(m2=0|m2),Ws.i(0,0,O1,O1),Ws.g([m2,m2,O1-r2,m2,m2+(O1-m2-r2)/2,O1-r2],!0)):$a==6?Ws.g([0,0,O1,0,O1,O1*.7,O1*.4,O1*.4,O1*.7,O1,0,O1]):$a==7?Ws.j(O1/2,O1/2,O1/2,O1/2,3):$a==8?(Ws.i(0,0,O1,O1/2),Ws.i(0,O1/2,O1/2,O1/2),Ws.j(O1/2,O1/2,O1/2,O1/2,1)):$a==9?(r2=O1*.14,m2=O1<4?1:O1<6?2:0|O1*.35,r2=O1<8?r2:0|r2,Ws.i(0,0,O1,O1),Ws.i(m2,m2,O1-m2-r2,O1-m2-r2,!0)):$a==10?(r2=O1*.12,m2=r2*3,Ws.i(0,0,O1,O1),Ws.h(m2,m2,O1-r2-m2,!0)):$a==11?Ws.j(O1/2,O1/2,O1/2,O1/2,3):$a==12?(Kb=O1*.25,Ws.i(0,0,O1,O1),Ws.K(Kb,Kb,O1-Kb,O1-Kb,!0)):!W_&&(Kb=O1*.4,Gb=O1*1.2,Ws.h(Kb,Kb,Gb)):(Lb=O1*.42,Ws.g([0,0,O1,0,O1,O1-Lb*2,O1-Lb,O1,0,O1]))}function gn($a,Ws,O1){$a=$a%4;let W_;$a?$a==1?Ws.j(0,O1/2,O1,O1/2,0):$a==2?Ws.K(0,0,O1,O1):(W_=O1/6,Ws.h(W_,W_,O1-2*W_)):Ws.j(0,0,O1,O1,0)}function Bi($a,Ws){return $a=Ws.W($a),[UO($a,Ws.D,Ws.F(0)),UO($a,Ws.o,Ws.p(.5)),UO($a,Ws.D,Ws.F(1)),UO($a,Ws.o,Ws.p(1)),UO($a,Ws.o,Ws.p(0))]}function Ks($a,Ws,O1){let W_=d(O1,.08);W_.G&&$a.m(W_.G);let Lb=$a.k,Kb=.5+Lb*W_.X|0;Lb-=Kb*2;let Gb=new Ge($a),p2=0|Lb/4,r2=0|Kb+Lb/2-p2*2,m2=0|Kb+Lb/2-p2*2;function P2(fC,bC,QC,LC,Y2){let aT=q4(Ws,QC,1),GC=LC?q4(Ws,LC,1):0;$a.L(B2[W2[fC]]);for(let HC=0;HC<Y2.length;HC++)Gb.u=new Se(r2+Y2[HC][0]*p2,m2+Y2[HC][1]*p2,p2,GC++%4),bC(aT,Gb,p2,HC);$a.M()}let R2=q4(Ws,-7)/268435455,B2=Bi(R2,W_),W2=[],q2;function lC(fC){if(fC.indexOf(q2)>=0){for(let bC=0;bC<fC.length;bC++)if(W2.indexOf(fC[bC])>=0)return!0}}for(let fC=0;fC<3;fC++)q2=q4(Ws,8+fC,1)%B2.length,(lC([0,4])||lC([2,3]))&&(q2=1),W2.push(q2);P2(0,gn,2,3,[[1,0],[2,0],[2,3],[1,3],[0,1],[3,1],[3,2],[0,2]]),P2(1,gn,4,5,[[0,0],[3,0],[3,3],[0,3]]),P2(2,Qe,1,null,[[1,1],[2,1],[2,2],[1,2]]),$a.finish()}function gy($a){let Ws=40,O1=16;var W_=0,Lb=0,Kb=encodeURI($a)+"%80",Gb=[],p2,r2=[],m2=1732584193,P2=4023233417,R2=~m2,B2=~P2,W2=3285377520,q2=[m2,P2,R2,B2,W2],lC=0,fC="";function bC(QC,LC){return QC<<LC|QC>>>32-LC}for(;W_<Kb.length;Lb++)Gb[Lb>>2]=Gb[Lb>>2]|(Kb[W_]=="%"?parseInt(Kb.substring(W_+1,W_+=3),16):Kb.charCodeAt(W_++))<<(3-(Lb&3))*8;for(p2=((Lb+7>>6)+1)*O1,Gb[p2-1]=Lb*8-8;lC<p2;lC+=O1){for(W_=0;W_<80;W_++)Lb=bC(m2,5)+W2+(W_<20?(P2&R2^~P2&B2)+1518500249:W_<40?(P2^R2^B2)+1859775393:W_<60?(P2&R2^P2&B2^R2&B2)+2400959708:(P2^R2^B2)+3395469782)+(r2[W_]=W_<O1?Gb[lC+W_]|0:bC(r2[W_-3]^r2[W_-8]^r2[W_-14]^r2[W_-16],1)),W2=B2,B2=R2,R2=bC(P2,30),P2=m2,m2=Lb;q2[0]=m2=q2[0]+m2|0,q2[1]=P2=q2[1]+P2|0,q2[2]=R2=q2[2]+R2|0,q2[3]=B2=q2[3]+B2|0,q2[4]=W2=q2[4]+W2|0}for(W_=0;W_<Ws;W_++)fC+=(q2[W_>>3]>>>(7-(W_&7))*4&15).toString(16);return fC}function Cy($a){return/^[0-9a-f]{11,}$/i.test($a)&&$a}function Oy($a){return gy($a==null?"":""+$a)}function Nb($a){return($a*10+.5|0)/10}var qb=class{constructor(){this.v=""}g($a){let Ws="";for(let O1=0;O1<$a.length;O1++)Ws+=(O1?"L":"M")+Nb($a[O1].x)+" "+Nb($a[O1].y);this.v+=Ws+"Z"}h($a,Ws,O1){let W_=O1?0:1,Lb=Nb(Ws/2),Kb=Nb(Ws),Gb="a"+Lb+","+Lb+" 0 1,"+W_+" ";this.v+="M"+Nb($a.x)+" "+Nb($a.y+Ws/2)+Gb+Kb+",0"+Gb+-Kb+",0"}},Ub=class{constructor($a){this.A,this.B={},this.N=$a,this.k=$a.k}m($a){let Ws=/^(#......)(..)?/.exec($a),O1=Ws[2]?q4(Ws[2],0)/255:1;this.N.m(Ws[1],O1)}L($a){this.A=this.B[$a]||(this.B[$a]=new qb)}M(){}g($a){this.A.g($a)}h($a,Ws,O1){this.A.h($a,Ws,O1)}finish(){let $a=this.B;for(let Ws in $a)$a.hasOwnProperty(Ws)&&this.N.O(Ws,$a[Ws].v)}},e2={P:"http://www.w3.org/2000/svg",R:"width",S:"height"},c2=class{constructor($a){this.k=$a,this.C='<svg xmlns="'+e2.P+'" width="'+$a+'" height="'+$a+'" viewBox="0 0 '+$a+" "+$a+'">'}m($a,Ws){Ws&&(this.C+='<rect width="100%" height="100%" fill="'+$a+'" opacity="'+Ws.toFixed(2)+'"/>')}O($a,Ws){this.C+='<path fill="'+$a+'" d="'+Ws+'"/>'}toString(){return this.C+"</svg>"}};function k2($a,Ws,O1){let W_=new c2(Ws);return Ks(new Ub(W_),Cy($a)||Oy($a),O1),W_.toString()}typeof document!="undefined"&&document.querySelectorAll.bind(document);var $2=La`
  :host {
    display: contents;
    --j-avatar-size: var(--j-size-md);
    --j-avatar-box-shadow: none;
    --j-avatar-border: none;
    --j-avatar-color: var(--j-color-white);
    --j-avatar-bg: var(--j-color-ui-200);
  }
  :host([src]) {
    --j-avatar-bg: transparent;
  }
  :host([selected]) {
    --j-avatar-box-shadow: 0px 0px 0px 2px var(--j-color-primary-500);
  }
  :host([online]):before {
    position: absolute;
    right: 0;
    bottom: 0;
    content: "";
    display: block;
    width: 25%;
    height: 25%;
    border-radius: 50%;
    background: var(--j-color-primary-500);
  }
  :host([size="xs"]) {
    --j-avatar-size: var(--j-size-xs);
  }
  :host([size="sm"]) {
    --j-avatar-size: var(--j-size-sm);
  }
  :host([size="lg"]) {
    --j-avatar-size: var(--j-size-lg);
  }
  :host([size="xl"]) {
    --j-avatar-size: var(--j-size-xl);
  }
  [part="base"] {
    cursor: inherit;
    box-shadow: var(--j-avatar-box-shadow);
    color: var(--j-avatar-color);
    background: var(--j-avatar-bg);
    border: var(--j-avatar-border);
    padding: 0;
    width: var(--j-avatar-size);
    height: var(--j-avatar-size);
    border-radius: 50%;
  }

  svg {
    width: var(--j-avatar-size);
    height: var(--j-avatar-size);
  }

  [part="icon"] {
    --j-icon-size: calc(var(--j-avatar-size) * 0.6);
  }

  [part="img"] {
    width: 100%;
    height: 100%;
    border-radius: 50%;
  }

  [part="initials"] {
    font-weight: 600;
    text-transform: uppercase;
  }
`,_2=class extends j2{constructor(){super(...arguments),this.src=null,this.hash=null,this.selected=!1,this.online=!1,this.initials=null,this.icon="person-fill",this.size=null}firstUpdated(){this.shadowRoot.querySelector("#identicon"),this.hash}render(){return this.src?zb`<button part="base">
        <img part="img" src=${this.src} />
      </button>`:this.hash?S6(k2(this.hash||"",100)):this.initials?zb`<button part="base">
        <span part="initials">${this.initials}</span>
      </button>`:zb`<button part="base">
      <j-icon part="icon" name=${this.icon}></j-icon>
    </button>`}};_2.styles=[mC,$2],m([d2({type:String,reflect:!0})],_2.prototype,"src",2),m([d2({type:Uint8Array,reflect:!0})],_2.prototype,"hash",2),m([d2({type:Boolean,reflect:!0})],_2.prototype,"selected",2),m([d2({type:Boolean,reflect:!0})],_2.prototype,"online",2),m([d2({type:String,reflect:!0})],_2.prototype,"initials",2),m([d2({type:String})],_2.prototype,"icon",2),m([d2({type:String,reflect:!0})],_2.prototype,"size",2),_2=m([z2("j-avatar")],_2);var X2=$a=>$a!=null?$a:Zb,J2=La`
  :host {
    --j-input-label-size: var(--j-font-size-500);
    --j-input-height: var(--j-size-md);
    --j-input-padding: var(--j-space-400);
  }
  :host([size="sm"]) {
    --j-input-height: var(--j-size-sm);
  }
  :host([size="lg"]) {
    --j-input-height: var(--j-size-lg);
  }
  :host([size="xl"]) {
    --j-input-height: var(--j-size-xl);
    --j-input-padding: var(--j-space-500);
  }
  [part="base"] {
    display: block;
  }
  [part="input-wrapper"] {
    display: flex;
    align-items: center;
    position: relative;
    height: var(--j-input-height);
    font-size: var(--j-font-size-400);
    color: var(--j-color-black);
    background: var(--j-color-white);
    border-radius: var(--j-border-radius);
    border: 1px solid var(--j-border-color);
    width: 100%;
    min-width: 200px;
    padding: 0px;
  }
  [part="input-wrapper"]:hover {
    border: 1px solid var(--j-border-color-strong);
  }
  [part="input-wrapper"]:focus-within {
    border: 1px solid var(--j-color-focus);
  }
  [part="input-field"] {
    border: 0;
    flex: 1;
    background: none;
    outline: 0;
    color: var(--j-color-black);
    font-size: inherit;
    height: 100%;
    width: 100%;
    padding: 0px var(--j-input-padding);
  }
  [part="input-field"]::placeholder {
    color: var(--j-color-ui-400);
  }
  [part="help-text"],
  [part="error-text"] {
    margin-top: var(--j-space-300);
    font-size: var(--j-font-size-400);
  }
  [part="error-text"] {
    color: var(--j-color-danger-500);
  }
  [part="start"]::slotted(*) {
    padding-left: var(--j-space-400);
  }
  [part="end"]::slotted(*) {
    padding-right: var(--j-space-400);
  }
`,rO=class extends j2{constructor(){super(),this.value=null,this._initialValue=null,this.max=null,this.min=null,this.maxlength=null,this.minlength=null,this.pattern=null,this.label=null,this.size=null,this.placeholder=null,this.errorText=null,this.helpText=null,this.autocomplete=!1,this.autovalidate=!1,this.autofocus=!1,this.disabled=!1,this.full=!1,this.error=!1,this.required=!1,this.readonly=!1,this.type="text",this.onFocus=this.onFocus.bind(this),this.onBlur=this.onBlur.bind(this)}static get properties(){return{errorText:{type:String,attribute:"errortext"},helpText:{type:String,attribute:"helptext"},size:{type:String,reflect:!0},placeholder:{type:String},label:{type:String},full:{type:Boolean,reflect:!0},value:{type:String,reflect:!0},error:{type:Boolean,reflect:!0},max:{type:Number},min:{type:Number},maxlength:{type:Number},minlength:{type:Number},pattern:{type:String},autocomplete:{type:Boolean},autovalidate:{type:Boolean},autofocus:{type:Boolean},disabled:{type:Boolean,reflect:!0},readonly:{type:Boolean,reflect:!0},required:{type:Boolean,reflect:!0},type:{type:String}}}static get styles(){return[J2,mC]}connectedCallback(){super.connectedCallback(),this._initialValue=this.value}onInput($a){$a.stopPropagation(),this.value=$a.target.value,this.dispatchEvent(new CustomEvent("input",$a))}onChange($a){$a.stopPropagation(),this.value=$a.target.value,this.dispatchEvent(new CustomEvent("change",$a))}select(){this.renderRoot.querySelector("input").select()}onFocus($a){$a.stopPropagation(),this.value=$a.target.value,this.dispatchEvent(new CustomEvent("change",$a))}onBlur($a){if($a.stopPropagation(),this.autovalidate){let Ws=this.renderRoot.querySelector("input").checkValidity(),O1=this.renderRoot.querySelector("input").validationMessage;this.errorText||(this.errorText=O1),Ws?this.error=!1:this.error=!0,this.dispatchEvent(new CustomEvent("validate",$a))}this.dispatchEvent(new CustomEvent("blur",$a))}render(){return zb`
      <div part="base">
        ${this.label&&zb`
          <j-text tag="label" variant="label" part="label"
            >${this.label}
          </j-text>
        `}
        <div part="input-wrapper">
          <slot part="start" name="start"></slot>
          <input
            part="input-field"
            .value=${this.value}
            max=${X2(this.max)}
            min=${X2(this.min)}
            maxlength=${X2(this.maxlength)}
            minlength=${X2(this.minlength)}
            pattern="${X2(this.pattern)}"
            placeholder="${X2(this.placeholder)}"
            type=${X2(this.type)}
            @input=${this.onInput}
            @blur=${this.onBlur}
            @focus=${this.onFocus}
            @change=${this.onChange}
            @invalid=${this.onInvalid}
            ?autocomplete=${this.autocomplete}
            ?autofocus=${this.autofocus}
            ?readonly=${this.readonly}
            ?required=${this.required}
            ?disabled=${this.disabled}
          />
          <slot part="end" name="end"></slot>
        </div>
        ${this.error?this.errorText?zb`<div part="error-text">${this.errorText}</div>`:null:this.helpText?zb`<div part="help-text">${this.helpText}</div>`:null}
      </div>
    `}};customElements.define("j-input",rO);var OO=La`
  :host {
    --j-checkbox-size: var(--j-size-md);
  }
  :host([size="sm"]) {
    --j-checkbox-size: var(--j-size-sm);
  }
  :host([size="lg"]) {
    --j-checkbox-size: var(--j-size-lg);
  }
  :host([disabled]) [part="base"] {
    opacity: 0.5;
    cursor: default;
  }
  input {
    position: absolute;
    clip: rect(1px 1px 1px 1px);
    clip: rect(1px, 1px, 1px, 1px);
    vertical-align: middle;
  }
  [part="base"] {
    cursor: pointer;
    display: flex;
    height: var(--j-checkbox-size);
    align-items: center;
    gap: var(--j-space-400);
  }
  :host(:not([disabled]):not([checked]))
    [part="base"]:hover
    [part="indicator"] {
    border-color: var(--j-color-ui-300);
  }
  [part="indicator"] {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    border: 1px solid var(--j-color-ui-200);
    width: calc(var(--j-checkbox-size) * 0.6);
    height: calc(var(--j-checkbox-size) * 0.6);
    border-radius: var(--j-border-radius);
    color: var(--j-color-white);
  }
  [part="checkmark"] {
    display: none;
  }
  :host([checked]) [part="checkmark"] {
    display: contents;
  }
  :host([checked]) [part="indicator"] {
    border-color: var(--j-color-primary-500);
    background: var(--j-color-primary-500);
  }
`,iO=class extends j2{constructor(){super(),this.checked=!1,this.full=!1,this.disabled=!1,this.size=null,this.value=null,this._handleChange=this._handleChange.bind(this)}static get properties(){return{checked:{type:Boolean,reflect:!0},disabled:{type:Boolean,reflect:!0},full:{type:Boolean,reflect:!0},size:{type:String,reflect:!0},value:{type:String}}}static get styles(){return[OO,mC]}_handleChange($a){$a.stopPropagation(),this.checked=$a.target.checked,this.dispatchEvent(new CustomEvent("change",$a))}render(){return zb`
      <label part="base">
        <input
          ?disabled=${this.disabled}
          @change=${this._handleChange}
          ?checked=${this.checked}
          value=${this.value}
          type="checkbox"
        />
        <span aria-hidden="true" part="indicator">
          <slot part="checkmark" name="checkmark">
            <j-icon name="check"></j-icon>
          </slot>
        </span>
        <span part="label"><slot></slot></span>
      </label>
    `}};customElements.define("j-checkbox",iO);var AC={32:"space",27:"escape",13:"enter",8:"backspace",38:"up",40:"down"},hT=La`
  :host {
  }
  [part="base"] {
    position: relative;
  }
  [part="input"]::part(input-field) {
    cursor: pointer;
  }
  [part="menu"] {
    background: var(--j-color-white);
    position: absolute;
    left: 0;
    top: 120%;
    max-height: 200px;
    overflow-y: auto;
    width: 100%;
    border: 1px solid var(--j-color-ui-100);
    border-radius: var(--j-border-radius);
    visibility: hidden;
  }
  :host([open]) [part="menu"] {
    height: fit-content;
    visibility: visible;
    z-index: 999;
  }
`,PA=class extends j2{constructor(){super(),this.value=null,this.label=null,this.open=!1,this.inputValue=null,this._handleClickOutside=this._handleClickOutside.bind(this),this._handleKeyDown=this._handleKeyDown.bind(this),this._handleInputClick=this._handleInputClick.bind(this),this._handleOptionClick=this._handleOptionClick.bind(this),this._handleSlotChange=this._handleSlotChange.bind(this),this._handleNavMouseOver=this._handleNavMouseOver.bind(this)}get optionElements(){return[...this.querySelectorAll("*")].filter($a=>$a.value)}get selectedElement(){return this.optionElements.find($a=>$a.value===this.value)}get activeElement(){return this.optionElements.find($a=>$a.hasAttribute("active"))}firstUpdated(){let $a=this.selectedElement;this.inputValue=($a==null?void 0:$a.label)||($a==null?void 0:$a.value)||""}connectedCallback(){super.connectedCallback(),this.addEventListener("keydown",this._handleKeyDown),window.addEventListener("click",this._handleClickOutside)}disconnectedCallback(){window.removeEventListener("click",this._handleClickOutside),super.disconnectedCallback()}_handleOptionClick($a){this.open=!1,this.value=$a.target.value,this.inputValue=$a.target.label}_handleClickOutside($a){let Ws=this.contains($a.target),O1=this.contains($a.target);!Ws&&!O1&&(this.open=!1)}_handleNavMouseOver($a){this.optionElements.forEach(Ws=>Ws.removeAttribute("active"))}_handleKeyDown($a){var Ws,O1;$a.preventDefault();let{keyCode:W_}=$a,Lb=AC[W_];if(Lb==="escape"){this.open=!1;return}if((Lb==="up"||"down")&&!this.open){this.open=!0,this.optionElements.forEach((Kb,Gb)=>{Gb===0?Kb.setAttribute("active",""):Kb.removeAttribute("active")});return}if(Lb==="enter"&&this.open&&this.activeElement&&(this.open=!1,this.value=this.activeElement.value,this.inputValue=this.activeElement.label),Lb==="down"&&this.open){let Kb=this.optionElements.findIndex(p2=>p2.hasAttribute("active"));(Ws=this.activeElement)==null||Ws.removeAttribute("active");let Gb=this.optionElements[0];this.optionElements.forEach((p2,r2)=>{Kb===-1||Kb>=this.optionElements.length-1?Gb.setAttribute("active",""):r2===Kb+1&&p2.setAttribute("active","")})}if(Lb==="up"&&this.open){let Kb=this.optionElements.findIndex(p2=>p2.hasAttribute("active"));(O1=this.activeElement)==null||O1.removeAttribute("active");let Gb=this.optionElements[this.optionElements.length-1];this.optionElements.forEach((p2,r2)=>{Kb===0||Kb===-1?Gb.setAttribute("active",""):r2===Kb-1&&p2.setAttribute("active","")})}}_handleInputClick($a){$a.preventDefault(),setTimeout(()=>{this.open=!0},0)}_handleSlotChange($a){[...$a.target.assignedNodes()].forEach(Ws=>{Ws.removeEventListener("mousedown",this._handleOptionClick),Ws.addEventListener("mousedown",this._handleOptionClick)})}shouldUpdate($a){return $a.has("value")&&(this.dispatchEvent(new CustomEvent("change",{bubbles:!0})),this.optionElements.forEach(Ws=>{Ws.value===this.value?Ws.setAttribute("selected",""):Ws.removeAttribute("selected")})),!0}render(){return zb` <div part="base">
      <j-input
        label=${this.label}
        readonly
        @click=${this._handleInputClick}
        .value=${this.inputValue}
        part="input"
      >
        <j-icon size="sm" slot="end" part="arrow" name="chevron-down"></j-icon>
      </j-input>

      <nav part="menu" @mouseover=${this._handleNavMouseOver}>
        <slot @slotchange=${this._handleSlotChange}></slot>
      </nav>
    </div>`}};PA.styles=[mC,hT],m([d2({type:String,reflect:!0})],PA.prototype,"value",2),m([d2({type:String,reflect:!0})],PA.prototype,"label",2),m([d2({type:Boolean,reflect:!0})],PA.prototype,"open",2),m([d2({type:String,reflect:!0})],PA.prototype,"inputValue",2),PA=m([z2("j-select")],PA);var O4=La`
  :host {
    --j-modal-backdrop-bg-color: rgba(0, 0, 0, 0.1);
    --j-modal-backdrop-transition: all 0.2s
      cubic-bezier(0.785, 0.135, 0.15, 0.86);
    --j-modal-transition: all 0.4s cubic-bezier(0.785, 0.135, 0.15, 0.86);
    --j-modal-box-shadow: none;
    --j-modal-width: clamp(600px, 50vw, 800px);
    --j-modal-width-mobile: 80vw;
    --j-modal-height: auto;
    --j-modal-padding: var(--j-space-400);
    --j-modal-border: 1px solid transparent;
    --j-modal-translateY: 100%;
    --j-modal-translateX: 0px;
    --j-modal-justify: center;
    --j-modal-align: center;
  }

  :host([size="xs"]) {
    --j-modal-width-mobile: 80vw;
    --j-modal-width: clamp(350px, 30vw, 500px);
  }

  :host([size="sm"]) {
    --j-modal-width-mobile: 80vw;
    --j-modal-width: clamp(350px, 40vw, 600px);
  }

  :host([size="lg"]) {
    --j-modal-width-mobile: 90vw;
    --j-modal-width: clamp(350px, 50vw, 1000px);
  }

  :host([size="xl"]) {
    --j-modal-width-mobile: 95vw;
    --j-modal-width: clamp(350px, 60vw, 1200px);
  }

  :host {
    width: 100vw;
    height: 100vh;
    z-index: 999999;
    position: fixed;
    left: 0;
    top: 0;
    display: flex;
    align-items: var(--j-modal-align);
    justify-content: var(--j-modal-justify);
    visibility: hidden;
  }

  :host([open]) {
    visibility: visible;
  }

  :host([open]) [part="modal"] {
    opacity: 1;
    transform: scale(1);
  }

  [part="modal"] {
    transition: all 0.2s ease;
    opacity: 0;
    transform: scale(0.95);
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    position: relative;
    z-index: 999;
    border-radius: var(--j-border-radius);
    width: var(--j-modal-width-mobile);
    height: var(--j-modal-height);
    max-height: 90vh;
    background: var(--j-color-white);
    border: 1px solid var(--j-border-color);
  }

  @media screen and (min-width: 1000px) {
    [part="modal"] {
      width: var(--j-modal-width);
    }
  }

  [part="content"] {
    flex: 1;
    overflow-y: auto;
  }

  [part="close-button"] {
    cursor: pointer;
    padding: 0;
    background: none;
    border: 0;
    width: 15px;
    height: 15px;
    color: var(--j-color-black);
    fill: currentColor;
    position: absolute;
    right: var(--j-space-600);
    top: var(--j-space-600);
  }

  [part="close-icon"] {
    width: 15px;
    height: 15px;
  }

  [part="backdrop"] {
    opacity: 0;
    transition: opacity 0.5s cubic-bezier(0.785, 0.135, 0.15, 0.86);
    overflow: visible;
    z-index: 400;
    position: absolute;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    background: rgba(0, 0, 0, 0.4);
  }

  :host([open]) [part="backdrop"] {
    opacity: 1;
  }
`,jO=class extends j2{constructor(){super(...arguments),this.size=null,this.open=!1}shouldUpdate($a){return $a.has("open")&&this.dispatchEvent(new CustomEvent("toggle",{bubbles:!0})),!0}render(){return zb` <div part="base">
      <div part="backdrop" @click=${()=>this.open=!1}></div>
      <div part="modal">
        <button @click=${()=>this.open=!1} part="close-button">
          <svg
            part="close-icon"
            viewBox="0 0 329.26933 329"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="m194.800781 164.769531 128.210938-128.214843c8.34375-8.339844 8.34375-21.824219 0-30.164063-8.339844-8.339844-21.824219-8.339844-30.164063 0l-128.214844 128.214844-128.210937-128.214844c-8.34375-8.339844-21.824219-8.339844-30.164063 0-8.34375 8.339844-8.34375 21.824219 0 30.164063l128.210938 128.214843-128.210938 128.214844c-8.34375 8.339844-8.34375 21.824219 0 30.164063 4.15625 4.160156 9.621094 6.25 15.082032 6.25 5.460937 0 10.921875-2.089844 15.082031-6.25l128.210937-128.214844 128.214844 128.214844c4.160156 4.160156 9.621094 6.25 15.082032 6.25 5.460937 0 10.921874-2.089844 15.082031-6.25 8.34375-8.339844 8.34375-21.824219 0-30.164063zm0 0"
            />
          </svg>
        </button>
        <slot name="header" part="header"></slot>
        <div part="content"><slot></slot></div>
        <slot name="footer" part="footer"></slot>
      </div>
    </div>`}};jO.styles=[mC,O4],m([d2({type:String,reflect:!0})],jO.prototype,"size",2),m([d2({type:Boolean,reflect:!0,hasChanged($a){return $a?document.body.style.overflow="hidden":document.body.style.overflow="visible",!0}})],jO.prototype,"open",2),jO=m([z2("j-modal")],jO);var a5=La`
  :host([open]) [part="tooltip"] {
    display: inline-block;
  }
  [part="tooltip"] {
    white-space: nowrap;
    z-index: 999;
    display: none;
    font-size: var(--j-font-size-400);
    font-weight: 500;
    padding: var(--j-space-300) var(--j-space-300);
    background: var(--j-color-ui-800);
    color: var(--j-color-ui-200);
    border-radius: var(--j-border-radius);
  }
  [part="content"] {
    display: inline-block;
    position: relative;
  }
  [part="arrow"],
  [part="arrow"]::before {
    position: absolute;
    width: 8px;
    height: 8px;
    background: inherit;
  }

  [part="arrow"] {
    visibility: hidden;
  }

  [part="arrow"]::before {
    visibility: visible;
    content: "";
    transform: rotate(45deg);
  }
  [part="tooltip"][data-popper-placement^="top"] > [part="arrow"] {
    bottom: -4px;
  }

  [part="tooltip"][data-popper-placement^="bottom"] > [part="arrow"] {
    top: -4px;
  }

  [part="tooltip"][data-popper-placement^="left"] > [part="arrow"] {
    right: -4px;
  }

  [part="tooltip"][data-popper-placement^="right"] > [part="arrow"] {
    left: -4px;
  }
`,A4=class extends j2{constructor(){super(...arguments),this.open=!1,this.title=null,this.placement="auto",this.popperInstance=null}get tooltipEl(){return this.renderRoot.querySelector("[part='tooltip']")}get contentEl(){return this.renderRoot.querySelector("[part='content']")}shouldUpdate($a){var Ws;return $a.has("open")&&(this.open?this.popperInstance?(this.popperInstance.setOptions({placement:this.placement}),this.popperInstance.update()):this.createTooltip():(Ws=this.tooltipEl)==null||Ws.removeAttribute("data-show"),this.dispatchEvent(new CustomEvent("toggle",{bubbles:!0}))),!0}createTooltip(){this.contentEl&&this.tooltipEl&&(this.popperInstance=B4(this.contentEl,this.tooltipEl,{placement:this.placement,strategy:"absolute",modifiers:[{name:"offset",options:{offset:[0,10]}}]}))}firstUpdated(){this.createTooltip()}connectedCallback(){super.connectedCallback(),this.addEventListener("mouseover",()=>this.show()),this.addEventListener("mouseleave",()=>this.hide()),this.addEventListener("focusin",()=>this.show()),this.addEventListener("focusout",()=>this.hide())}show(){this.open=!0}hide(){this.open=!1}render(){return zb`
      <div part="base">
        <div part="tooltip">
          <slot name="title">${this.title}</slot>
          <div part="arrow" data-popper-arrow></div>
        </div>
        <div
          part="content"
          @click=${()=>this.hide()}
          @contextmenu=${()=>this.hide()}
        >
          <slot></slot>
        </div>
      </div>
    `}};A4.styles=[mC,a5],m([d2({type:Boolean,reflect:!0})],A4.prototype,"open",2),m([d2({type:String,reflect:!0})],A4.prototype,"title",2),m([d2({type:String,reflect:!0})],A4.prototype,"placement",2),m([KC()],A4.prototype,"popperInstance",2),A4=m([z2("j-tooltip")],A4);var d5=La`
  :host {
    --j-icon-color: currentColor;
    --j-icon-size: 24px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
  }
  :host i {
    color: var(--j-icon-color);
    fill: var(--j-icon-color);
    display: block;
    font-size: var(--j-icon-size);
  }
  :host([size="xs"]) i {
    --j-icon-size: 16px;
  }
  :host([size="sm"]) i {
    --j-icon-size: 18px;
  }
  :host([size="lg"]) i {
    --j-icon-size: 32px;
  }
  :host([size="xl"]) i {
    --j-icon-size: 48px;
  }
`,z4=class extends j2{constructor(){super(),this.name=null,this.size=null,this.color=null,this.svg="",this.attachShadow({mode:"open"}),this.shadowRoot.innerHTML='<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.9.1/font/bootstrap-icons.css">'}shouldUpdate(){let $a=[d5,mC];if(this.color){let Ws=YC("j-color",this.color,"currentColor");$a.push(gO("--j-icon-color",Ws))}return sr(this.shadowRoot,$a),!0}render(){return zb`<i
      class="bi-${this.name}"
      role="img"
      aria-label="${this.name}"
    ></i>`}};z4.styles=[mC,d5],m([d2({type:String,reflect:!0})],z4.prototype,"name",2),m([d2({type:String,reflect:!0})],z4.prototype,"size",2),m([d2({type:String,reflect:!0})],z4.prototype,"color",2),m([KC()],z4.prototype,"svg",2),z4=m([z2("j-icon")],z4);var E5=La`
  :host {
    --j-tabs-padding: 4px;
    --j-tab-item-border-selected: 0px 4px 0px -2px var(--j-color-primary-500);
    --j-tab-item-border-hover: 0px 4px 0px -2px var(--j-color-ui-200);
  }
  :host([vertical]) [part="base"] {
    flex-direction: column;
    --j-tab-item-text-align: left;
    --j-tab-item-border-selected: 2px 0px 0px 0px var(--j-color-primary-500);
    --j-tab-item-border-hover: 2px 0px 0px 0px var(--j-color-ui-200);
  }
  :host([vertical]) ::slotted(*) {
    width: 100%;
  }
  :host([full]) [part="base"] {
    display: flex;
  }
  [part="base"] {
    overflow-x: auto;
    display: inline-flex;
    align-items: center;
    flex-wrap: wrap;
    gap: var(--j-space-200);
    border-radius: var(--j-border-radius);
    padding: 0 var(--j-tabs-padding);
  }
`,e6=class extends j2{constructor(){super(...arguments),this.value=null,this.vertical=!1,this.full=!1}get optionElements(){return[...this.children]}get selectedElement(){return this.optionElements.find($a=>$a.value===this.value)}firstUpdated(){}shouldUpdate($a){return $a.has("value")&&(this.selectTab(this.value),this.dispatchEvent(new CustomEvent("change",{bubbles:!0}))),!0}selectTab($a){this.optionElements.forEach(Ws=>{let O1=Ws.value===$a;Ws.checked=O1,this.value=$a})}connectedCallback(){super.connectedCallback(),this.value&&setTimeout(()=>{this.selectTab(this.value)},100),this.addEventListener("tab-selected",$a=>{$a.stopPropagation(),this.selectTab($a.target.value)})}render(){return zb` <div part="base" role="tablist"><slot></slot></div>`}};e6.styles=[mC,E5],m([d2({type:String,reflect:!0})],e6.prototype,"value",2),m([d2({type:Boolean,reflect:!0})],e6.prototype,"vertical",2),m([d2({type:Boolean,reflect:!0})],e6.prototype,"full",2),e6=m([z2("j-tabs")],e6);var S5=La`
  :host {
    --j-tab-item-height: var(--j-size-md);
  }
  :host([size="sm"]) {
    --j-tab-item-height: var(--j-size-sm);
  }
  :host([size="lg"]) {
    --j-tab-item-height: var(--j-size-lg);
  }
  [part="base"] {
    display: flex;
    align-items: center;
    gap: var(--j-space-400);
    justify-content: space-between;
    white-space: nowrap;
    width: inherit;
    outline: 0;
    font-family: var(--j-font-family);
    color: var(--j-color-ui-600);
    cursor: pointer;
    z-index: 1;
    border: none;
    text-align: var(--j-tab-item-text-align, center);
    height: var(--j-tab-item-height);
    font-weight: 600;
    font-size: var(--j-font-size-500);
    background: 0;
    padding: 0 var(--j-space-500);
  }
  [part="base"]:hover {
    box-shadow: var(
      --j-tab-item-border-hover,
      0px 4px 0px -2px var(--j-color-ui-700)
    );
    color: var(--j-color-ui-700);
  }
  [part="content"] {
    flex: 1;
  }
  :host([checked]) [part="base"] {
    color: var(--j-color-primary-600);
    box-shadow: var(
      --j-tab-item-border-selected,
      0px 4px 0px -2px var(--j-color-primary-600)
    );
  }
  :host([variant="button"]) [part="base"] {
    border-radius: var(--j-border-radius);
    box-shadow: none;
    color: var(--j-color-ui-600);
  }
  :host([variant="button"]) [part="base"]:hover {
    background: var(--j-color-ui-50);
    color: var(--j-color-ui-700);
  }
  :host([variant="button"][checked]) [part="base"] {
    background: var(--j-color-primary-100);
    color: var(--j-color-primary-700);
  }
`,x4=class extends j2{constructor(){super(...arguments),this.checked=!1,this.disabled=!1,this.size=null,this.variant=null,this._label=null,this._value=null}get label(){return this._label||this.getAttribute("label")||this.innerText||this.innerHTML}set label($a){this._label=$a,this.setAttribute("label",$a)}get value(){return this._value||this.getAttribute("value")||this.innerText||this.innerHTML}set value($a){this._value=$a,this.setAttribute("value",$a)}static get styles(){return[S5,mC]}_handleChange($a){$a.stopPropagation(),this.checked=!0,this.dispatchEvent(new CustomEvent("tab-selected",{bubbles:!0}))}render(){return zb`
      <button
        aria-selected=${this.checked}
        aria-controls=${this.value}
        @click=${this._handleChange}
        part="base"
        role="tab"
      >
        <slot name="start"></slot>
        <div part="content">
          <slot></slot>
        </div>
        <slot name="start"></slot>
      </button>
    `}};m([d2({type:Boolean,reflect:!0})],x4.prototype,"checked",2),m([d2({type:Boolean,reflect:!0})],x4.prototype,"disabled",2),m([d2({type:Boolean,reflect:!0})],x4.prototype,"size",2),m([d2({type:String,reflect:!0})],x4.prototype,"variant",2),m([KC()],x4.prototype,"_label",2),m([KC()],x4.prototype,"_value",2),x4=m([z2("j-tab-item")],x4);var p5=La`
  :host {
    --j-flex-gap: none;
    --j-flex-align-items: top;
    --j-flex-justify-content: start;
    --j-flex-display: flex;
    --j-flex-wrap: nowrap;
    --j-flex-direction: row;
  }
  :host([inline]) {
    --j-flex-display: inline-flex;
  }
  :host([wrap]) {
    --j-flex-wrap: wrap;
  }
  :host([a="center"]) {
    --j-flex-align-items: center;
  }
  :host([a="start"]) {
    --j-flex-align-items: start;
  }
  :host([a="end"]) {
    --j-flex-align-items: end;
  }
  :host([j="between"]) {
    --j-flex-justify-content: space-between;
  }
  :host([j="around"]) {
    --j-flex-justify-content: space-around;
  }
  :host([j="center"]) {
    --j-flex-justify-content: center;
  }
  :host([direction="row"]) {
    --j-flex-direction: row;
  }
  :host([direction="row-reverse"]) {
    --j-flex-direction: row-reverse;
  }
  :host([direction="column"]) {
    --j-flex-direction: column;
  }
  :host([direction="column-reverse"]) {
    --j-flex-direction: column-reverse;
  }
  [part="base"] {
    display: var(--j-flex-display);
    gap: var(--j-flex-gap);
    flex-direction: var(--j-flex-direction);
    align-items: var(--j-flex-align-items);
    justify-content: var(--j-flex-justify-content);
    flex-wrap: var(--j-flex-wrap);
  }
`,P4=class extends j2{constructor(){super(...arguments),this.j=null,this.a=null,this.wrap=!1,this.gap=null,this.direction=null}shouldUpdate(){let $a=[p5,mC];if(this.gap){let Ws=YC("j-space",this.gap);$a.push(gO("--j-flex-gap",Ws))}return sr(this.shadowRoot,$a),!0}render(){return zb`
      <div part="base">
        <slot></slot>
      </div>
    `}};P4.styles=[mC,p5],m([d2({type:String,reflect:!0})],P4.prototype,"j",2),m([d2({type:String,reflect:!0})],P4.prototype,"a",2),m([d2({type:Boolean,reflect:!0})],P4.prototype,"wrap",2),m([d2({type:String,reflect:!0})],P4.prototype,"gap",2),m([d2({type:String,reflect:!0})],P4.prototype,"direction",2),P4=m([z2("j-flex")],P4);var C5=La`
  :host {
    --j-badge-border-radius: var(--j-border-radius);
    --j-badge-bg: var(--j-color-ui-50);
    --j-badge-color: var(--j-color-ui-500);
    --j-badge-font-size: var(--j-font-size-400);
    --j-badge-padding: var(--j-space-200) var(--j-space-300);
  }
  :host([size="sm"]) {
    --j-badge-font-size: var(--j-font-size-300);
    --j-badge-padding: var(--j-space-100) var(--j-space-200);
  }
  :host([size="lg"]) {
    --j-badge-font-size: var(--j-font-size-500);
    --j-badge-padding: var(--j-space-300) var(--j-space-500);
  }
  :host([variant="primary"]) {
    --j-badge-bg: var(--j-color-primary-50);
    --j-badge-color: var(--j-color-primary-600);
  }
  :host([variant="success"]) {
    --j-badge-bg: var(--j-color-success-100);
    --j-badge-color: var(--j-color-success-600);
  }
  :host([variant="warning"]) {
    --j-badge-bg: var(--j-color-warning-100);
    --j-badge-color: var(--j-color-warning-600);
  }
  :host([variant="danger"]) {
    --j-badge-bg: var(--j-color-danger-100);
    --j-badge-color: var(--j-color-danger-600);
  }
  [part="base"] {
    font-size: var(--j-badge-font-size);
    border-radius: var(--j-badge-border-radius);
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: var(--j-badge-padding);
    background: var(--j-badge-bg);
    color: var(--j-badge-color);
  }
`,k6=class extends j2{constructor(){super(...arguments),this.variant=null,this.size=null}render(){return zb`<span part="base">
      <slot></slot>
    </span>`}};k6.styles=[mC,C5],m([d2({type:String,reflect:!0})],k6.prototype,"variant",2),m([d2({type:String,reflect:!0})],k6.prototype,"size",2),k6=m([z2("j-badge")],k6);var $5=La`
  :host {
    display: contents;
    --j-spinner-size: var(--j-size-md);
    --j-spinner-stroke: 2px;
    --j-spinner-color: var(--j-color-primary-500);
  }

  :host([size="xxs"]) {
    --j-spinner-size: var(--j-size-xxs);
    --j-spinner-stroke: 1px;
    --j-spinner-color: var(--j-color-primary-500);
  }

  :host([size="xs"]) {
    --j-spinner-size: var(--j-size-xs);
    --j-spinner-stroke: 2px;
    --j-spinner-color: var(--j-color-primary-500);
  }

  :host([size="sm"]) {
    --j-spinner-size: var(--j-size-sm);
    --j-spinner-stroke: 2px;
    --j-spinner-color: var(--j-color-primary-500);
  }

  :host([size="lg"]) {
    --j-spinner-size: var(--j-size-lg);
    --j-spinner-stroke: 4px;
    --j-spinner-color: var(--j-color-primary-500);
  }

  .lds-ring {
    display: inline-block;
    position: relative;
    width: var(--j-spinner-size);
    height: var(--j-spinner-size);
  }
  .lds-ring div {
    box-sizing: border-box;
    display: block;
    position: absolute;
    width: var(--j-spinner-size);
    height: var(--j-spinner-size);
    margin: var(--j-spinner-stroke);
    border: var(--j-spinner-stroke) solid var(--j-spinner-color);
    border-radius: 50%;
    animation: lds-ring 1.2s cubic-bezier(0.5, 0, 0.5, 1) infinite;
    border-color: var(--j-spinner-color) transparent transparent transparent;
  }
  .lds-ring div:nth-child(1) {
    animation-delay: -0.45s;
  }
  .lds-ring div:nth-child(2) {
    animation-delay: -0.3s;
  }
  .lds-ring div:nth-child(3) {
    animation-delay: -0.15s;
  }
  @keyframes lds-ring {
    0% {
      transform: rotate(0deg);
    }
    100% {
      transform: rotate(360deg);
    }
  }
`,L6=class extends j2{constructor(){super(...arguments),this.size=null}render(){return zb`<div class="lds-ring">
      <div></div>
      <div></div>
      <div></div>
      <div></div>
    </div>`}};L6.styles=[mC,$5],m([d2({type:String,reflect:!0})],L6.prototype,"size",2),L6=m([z2("j-spinner")],L6);var k5=La`
  :host {
    --j-toast-border: 1px solid var(--j-color-ui-100);
    --j-toast-background: var(--j-color-white);
    --j-toast-color: var(--j-color-ui-500);
  }
  :host([variant="success"]) {
    --j-toast-border: 1px solid var(--j-color-success-300);
    --j-toast-background: var(--j-color-white);
    --j-toast-color: var(--j-color-success-500);
  }
  :host([variant="danger"]) {
    --j-toast-border: 1px solid var(--j-color-danger-300);
    --j-toast-background: var(--j-color-white);
    --j-toast-color: var(--j-color-danger-500);
  }
  :host([variant="warning"]) {
    --j-toast-border: 1px solid var(--j-color-warning-300);
    --j-toast-background: var(--j-color-white);
    --j-toast-color: var(--j-color-warning-500);
  }
  :host {
    display: none;
  }
  :host([open]) {
    display: block;
    animation: fade-up 0.2s ease;
  }
  [part="base"] {
    box-shadow: var(--j-depth-100);
    display: flex;
    align-items: center;
    justify-content: space-between;
    border-radius: var(--j-border-radius);
    position: absolute;
    bottom: var(--j-space-400);
    left: 50%;
    transform: translateX(-50%);
    background: var(--j-toast-background);
    border: var(--j-toast-border);
    color: var(--j-toast-color);
    max-width: 900px;
    min-width: 150px;
    padding: var(--j-space-500);
  }

  @keyframes fade-up {
    from {
      transform: translateY(20px);
    }
    to {
      transform: translateY(0px);
    }
  }
`,t6=class extends j2{constructor(){super(...arguments),this.variant=null,this.open=!1,this.autohide=5}autoClose(){this.autohide>0&&setTimeout(()=>{this.open=!1},this.autohide*1e3)}shouldUpdate($a){return $a.has("open")&&(this.autoClose(),this.dispatchEvent(new CustomEvent("toggle",{bubbles:!0}))),!0}render(){return zb`<div part="base">
      <div part="content"><slot></slot></div>
      <j-button @click=${()=>this.open=!1} size="sm" variant="ghost">
        <j-icon size="sm" name="x"></j-icon>
      </j-button>
    </div>`}};t6.styles=[mC,k5],m([d2({type:String,reflect:!0})],t6.prototype,"variant",2),m([d2({type:Boolean,reflect:!0})],t6.prototype,"open",2),m([d2({type:Number,reflect:!0})],t6.prototype,"autohide",2),t6=m([z2("j-toast")],t6);var s5={year:24*60*60*1e3*365,month:24*60*60*1e3*365/12,day:24*60*60*1e3,hour:60*60*1e3,minute:60*1e3,second:1e3};function A5($a,Ws=new Date,O1){var W_=$a-Ws;for(var Lb in s5)if(Math.abs(W_)>s5[Lb]||Lb=="second")return O1.format(Math.round(W_/s5[Lb]),Lb)}var gT=class extends j2{constructor(){super(...arguments),this.value="01/01/1970",this.locales="en",this.relative=!1,this.dateStyle=null,this.timeStyle=null,this.dayPeriod=null,this.hourCycle=null,this.timeZone=null,this.weekday=null,this.era=null,this.year=null,this.month=null,this.day=null,this.hour=null,this.minute=null,this.second=null}get options(){return this.dateStyle?l({dateStyle:this.dateStyle},this.timeStyle&&{timeStyle:this.timeStyle}):l(l(l(l(l(l(l(l(l(l(l({},this.dayPeriod&&{dayPeriod:this.dayPeriod}),this.timeZone&&{timeZone:this.timeZone}),this.weekday&&{weekday:this.weekday}),this.era&&{era:this.era}),this.year&&{year:this.year}),this.month&&{month:this.month}),this.day&&{day:this.day}),this.second&&{second:this.second}),this.hour&&{hour:this.hour}),this.minute&&{minute:this.minute}),this.hourCycle&&{hourCycle:this.hourCycle})}firstUpdated(){this.relative&&this.runLoop()}runLoop(){setTimeout(()=>{this.requestUpdate(),this.runLoop()},60*1e3)}get formattedTime(){if(this.relative){let $a=new Intl.RelativeTimeFormat(this.locales,{numeric:"auto",style:"long"});return A5(new Date(this.value),new Date,$a)}else return new Intl.DateTimeFormat(this.locales,this.options).format(new Date(this.value))}render(){return zb`<span>${this.formattedTime}</span>`}};gT.styles=[mC],m([d2({type:String,reflect:!0})],gT.prototype,"value",2),m([d2({type:String,reflect:!0})],gT.prototype,"locales",2),m([d2({type:Boolean,reflect:!0})],gT.prototype,"relative",2),m([d2({type:String,reflect:!0})],gT.prototype,"dateStyle",2),m([d2({type:String,reflect:!0})],gT.prototype,"timeStyle",2),m([d2({type:String,reflect:!0})],gT.prototype,"dayPeriod",2),m([d2({type:String,reflect:!0})],gT.prototype,"hourCycle",2),m([d2({type:String,reflect:!0})],gT.prototype,"timeZone",2),m([d2({type:String,reflect:!0})],gT.prototype,"weekday",2),m([d2({type:String,reflect:!0})],gT.prototype,"era",2),m([d2({type:String,reflect:!0})],gT.prototype,"year",2),m([d2({type:String,reflect:!0})],gT.prototype,"month",2),m([d2({type:String,reflect:!0})],gT.prototype,"day",2),m([d2({type:String,reflect:!0})],gT.prototype,"hour",2),m([d2({type:String,reflect:!0})],gT.prototype,"minute",2),m([d2({type:String,reflect:!0})],gT.prototype,"second",2),gT=m([z2("j-timestamp")],gT);function h5($a,{onScroll:Ws=Lb=>null,onScrollStop:O1=Lb=>null,removeListenerAfterStop:W_=!1}){let Lb=null;function Kb(Gb){Ws(Gb),Lb&&clearTimeout(Lb),Lb=setTimeout(()=>{O1(Gb),W_&&$a.removeEventListener("scroll",Kb)},150)}$a.addEventListener("scroll",Kb)}function F5($a,Ws,O1){h5($a,{onScrollStop:O1,removeListenerAfterStop:!0}),$a.scrollTo({left:$a.clientWidth*Ws,behavior:"smooth"})}var f5=La`
  :host {
    --j-carousel-gap: none;
  }
  [part="base"] {
    width: 100%;
    overflow: hidden;
  }

  [part="carousel"] {
    display: flex;
    gap: var(--j-carousel-gap);
    overflow-x: scroll;
    scroll-snap-type: x mandatory;
    scrollbar-width: none;
    align-items: center;
  }

  [part="carousel"]::-webkit-scrollbar {
    display: none;
  }

  ::slotted(*) {
    min-width: 100%;
    width: 100%;
    flex-shrink: 0;
    scroll-snap-align: start;
  }

  [part="navigation"] {
    display: flex;
    padding-top: var(--j-space-200);
    gap: var(--j-space-500);
    align-items: center;
    justify-content: center;
  }

  [part="navigation-button"] {
    border: 1px solid transparent;
    cursor: pointer;
    background: var(--j-color-ui-100);
    width: 0.8rem;
    height: 0.8rem;
    border-radius: 50%;
  }

  [part="navigation-button"][active] {
    background: var(--j-color-primary-500);
  }
`,B6=class extends j2{constructor(){super(),this._timer=null,this._value=0,this._isScrolling=!1,this.gap=null,this.goToSlide=this.goToSlide.bind(this)}get nearestIndex(){return Math.round(this.carouselEl.scrollLeft/this.carouselEl.clientWidth)}goToSlide($a){this.value=$a}firstUpdated(){h5(this.carouselEl,{onScroll:()=>{this._isScrolling=!0,this.value=this.nearestIndex},onScrollStop:()=>{this.value=this.nearestIndex,this._isScrolling=!1}})}shouldUpdate(){let $a=[f5,mC];if(this.gap){let Ws=YC("j-space",this.gap);$a.push(gO("--j-carousel-gap",Ws))}return sr(this.shadowRoot,$a),!0}set value($a){$a!==this._value&&(this._isScrolling?(this._value=$a,this.dispatchEvent(new CustomEvent("change")),this.requestUpdate()):F5(this.carouselEl,$a,()=>{this._value=$a,this.dispatchEvent(new CustomEvent("change")),this.requestUpdate()}))}get value(){return this._value}get slides(){return[...this.children]}get carouselEl(){return this.renderRoot.querySelector("[part='carousel']")}render(){return zb`<div part="base">
      <div part="carousel">
        <slot></slot>
      </div>
      <div part="navigation">
        ${this.slides.map(($a,Ws)=>zb`<button
              ?active=${this.value===Ws}
              data-index=${Ws}
              @click=${()=>this.goToSlide(Ws)}
              part="navigation-button"
            ></button>`)}
      </div>
    </div>`}};B6.styles=[f5,mC],m([d2({type:String,reflect:!0})],B6.prototype,"gap",2),B6=m([z2("j-carousel")],B6);var D5=La`
  :host {
    --j-toggle-size: var(--j-size-md);
  }
  :host([size="sm"]) {
    --j-toggle-size: var(--j-size-sm);
  }
  :host([size="lg"]) {
    --j-toggle-size: var(--j-size-lg);
  }
  input {
    position: absolute;
    clip: rect(1px 1px 1px 1px);
    clip: rect(1px, 1px, 1px, 1px);
    vertical-align: middle;
  }
  [part="base"] {
    cursor: pointer;
    display: flex;
    height: var(--j-toggle-size);
    align-items: center;
    gap: var(--j-space-400);
  }
  :host([disabled]) [part="base"] {
    opacity: 0.5;
    cursor: default;
  }
  :host(:not([disabled]):not([checked])) [part="base"]:hover [part="toggle"] {
    background: var(--j-color-ui-300);
  }
  [part="toggle"] {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: calc(var(--j-toggle-size) * 1);
    height: calc(var(--j-toggle-size) * 0.6);
    border-radius: var(--j-border-radius);
    background: var(--j-color-ui-200);
    color: var(--j-color-white);
    position: relative;
    border-radius: 300px;
  }
  :host([checked]) [part="toggle"] {
    background: var(--j-color-primary-500);
  }
  [part="indicator"] {
    position: absolute;
    transition: all 0.2s ease;
    top: 50%;
    transform: translateY(-50%) translateX(0px);
    left: 5px;
    display: inline-block;
    border-radius: 50%;
    background: var(--j-color-white);
    width: calc(var(--j-toggle-size) * 0.4);
    height: calc(var(--j-toggle-size) * 0.4);
  }
  :host([checked]) [part="indicator"] {
    left: calc(100% - 5px);
    transform: translateY(-50%) translateX(-100%);
  }
`,T5=class extends j2{constructor(){super(),this.checked=!1,this.full=!1,this.disabled=!1,this.size=null,this.value=null,this._handleChange=this._handleChange.bind(this)}static get properties(){return{checked:{type:Boolean,reflect:!0},disabled:{type:Boolean,reflect:!0},full:{type:Boolean,reflect:!0},size:{type:String,reflect:!0},value:{type:String}}}static get styles(){return[D5,mC]}_handleChange($a){$a.stopPropagation(),this.checked=$a.target.checked,this.dispatchEvent(new CustomEvent("change"))}render(){return zb`
      <label part="base">
        <input
          ?disabled=${this.disabled}
          @change=${this._handleChange}
          .checked=${this.checked}
          value=${this.value}
          type="checkbox"
        />
        <span aria-hidden="true" part="toggle">
          <span part="indicator" name="indicator"></span>
        </span>
        <span part="label"><slot></slot></span>
      </label>
    `}};customElements.define("j-toggle",T5)})();var main="";const pinia=createPinia();pinia.use(({store:e})=>{const t=e.$id,n=localStorage.getItem(t);n&&(e.$patch(JSON.parse(n)),localStorage.setItem(t,JSON.stringify(e.$state))),watch(e.$state,()=>{localStorage.setItem(t,JSON.stringify(e.$state))})});createApp({render:()=>h$1(App)}).use(pinia).use(router).mount("#app")});export default R5();
